!function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t(t.s=164)}([function(e,t,n){e.exports=n(207)()},function(e,t,n){"use strict";e.exports=n(171)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(105),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}},function(e,t,n){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(77),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),(0,i.default)(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()},function(e,t,n){var r,i;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var i=typeof r;if("string"===i||"number"===i)e.push(r);else if(Array.isArray(r))e.push(n.apply(null,r));else if("object"===i)for(var o in r)a.call(r,o)&&r[o]&&e.push(o)}}return e.join(" ")}var a={}.hasOwnProperty;"undefined"!==typeof e&&e.exports?e.exports=n:(r=[],void 0!==(i=function(){return n}.apply(t,r))&&(e.exports=i))}()},function(e,t,n){e.exports={default:n(223),__esModule:!0}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(55),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"===typeof t?"undefined":(0,i.default)(t))&&"function"!==typeof t?e:t}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(240),a=r(i),o=n(244),s=r(o),l=n(55),u=r(l);t.default=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"===typeof t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(a.default?(0,a.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);n.n(r),n(94)},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(77),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e,t,n){return t in e?(0,i.default)(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return ne||(ne=(0,V.default)())}Object.defineProperty(t,"__esModule",{value:!0}),t.sheetsManager=void 0;var a=n(22),o=r(a),s=n(2),l=r(s),u=n(7),c=r(u),d=n(4),f=r(d),h=n(5),p=r(h),m=n(8),g=r(m),y=n(9),v=r(y),_=n(3),b=r(_),x=n(247),w=r(x),k=n(263),T=r(k),M=n(1),A=r(M),C=n(0),S=r(C),E=n(11),P=(r(E),n(87)),I=r(P),L=n(121),O=(r(L),n(44)),z=(r(O),n(266)),R=r(z),D=n(123),N=n(122),F=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(N),j=n(288),B=r(j),U=n(129),V=r(U),H=n(131),W=r(H),q=n(314),G=r(q),Y=n(315),X=r(Y),Z=n(316),J=r(Z),K=(0,D.create)((0,B.default)()),Q=(0,G.default)(),$=T.default,ee=t.sheetsManager=new w.default,te={},ne=void 0,re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(n){var r=t.withTheme,a=void 0!==r&&r,s=t.flip,u=void 0===s?null:s,d=t.name,h=(0,b.default)(t,["withTheme","flip","name"]),m=(0,X.default)(e),y=m.themingEnabled||a||"string"===typeof d;$+=1,m.options.index=$;var _=function(e){function t(e,n){(0,f.default)(this,t);var r=(0,g.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e,n));r.state={},r.disableStylesGeneration=!1,r.jss=null,r.sheetOptions=null,r.sheetsManager=ee,r.stylesCreatorSaved=null,r.theme=null,r.unsubscribeId=null,r.jss=r.context[F.jss]||K;var a=r.context.muiThemeProviderOptions;return a&&(a.sheetsManager&&(r.sheetsManager=a.sheetsManager),r.disableStylesGeneration=a.disableStylesGeneration),r.stylesCreatorSaved=m,r.sheetOptions=(0,l.default)({generateClassName:Q},r.context[F.sheetOptions]),r.theme=y?W.default.initial(n)||i():te,r.attach(r.theme),r}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this;y&&(this.unsubscribeId=W.default.subscribe(this.context,function(t){var n=e.theme;e.theme=t,e.attach(e.theme),e.setState({},function(){e.detach(n)})}))}},{key:"componentDidUpdate",value:function(){this.stylesCreatorSaved,0}},{key:"componentWillUnmount",value:function(){this.detach(this.theme),null!==this.unsubscribeId&&W.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"attach",value:function(e){if(!this.disableStylesGeneration){var t=this.stylesCreatorSaved,n=this.sheetsManager.get(t);n||(n=new w.default,this.sheetsManager.set(t,n));var r=n.get(e);if(r||(r={refs:0,sheet:null},n.set(e,r)),0===r.refs){var i=t.create(e,d),a=d,o=this.jss.createStyleSheet(i,(0,l.default)({meta:a,classNamePrefix:a,flip:"boolean"===typeof u?u:"rtl"===e.direction,link:!1},this.sheetOptions,t.options,{name:d},h));r.sheet=o,o.attach();var s=this.context[F.sheetsRegistry];s&&s.add(o)}r.refs+=1}}},{key:"detach",value:function(e){if(!this.disableStylesGeneration){var t=this.stylesCreatorSaved,n=this.sheetsManager.get(t),r=n.get(e);if(r.refs-=1,0===r.refs){n.delete(e),this.jss.removeStyleSheet(r.sheet);var i=this.context[F.sheetsRegistry];i&&i.remove(r.sheet)}}}},{key:"render",value:function(){var e=this.props,t=e.classes,r=e.innerRef,i=(0,b.default)(e,["classes","innerRef"]),s=void 0,u={};if(!this.disableStylesGeneration){var c=this.sheetsManager.get(this.stylesCreatorSaved),f=c.get(this.theme);u=f.sheet.classes}s=t?(0,l.default)({},u,(0,o.default)(t).reduce(function(e,n){return t[n]&&(e[n]=u[n]+" "+t[n]),e},{})):u;var h=(0,J.default)({theme:this.theme,name:d});return a&&(h.theme=this.theme),A.default.createElement(n,(0,l.default)({},h,{classes:s,ref:r},i))}}]),t}(A.default.Component);return _.propTypes={},_.contextTypes=(0,l.default)({muiThemeProviderOptions:S.default.object},R.default,y?W.default.contextTypes:{}),(0,I.default)(_,n),_}};t.default=re},function(e,t){var n=e.exports={version:"2.5.4"};"number"==typeof __e&&(__e=n)},function(e,t,n){var r=n(20),i=n(14),a=n(30),o=n(26),s=n(32),l=function(e,t,n){var u,c,d,f=e&l.F,h=e&l.G,p=e&l.S,m=e&l.P,g=e&l.B,y=e&l.W,v=h?i:i[t]||(i[t]={}),_=v.prototype,b=h?r:p?r[t]:(r[t]||{}).prototype;h&&(n=t);for(u in n)(c=!f&&b&&void 0!==b[u])&&s(v,u)||(d=c?b[u]:n[u],v[u]=h&&"function"!=typeof b[u]?n[u]:g&&c?a(d,r):y&&b[u]==d?function(e){var t=function(t,n,r){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,r)}return e.apply(this,arguments)};return t.prototype=e.prototype,t}(d):m&&"function"==typeof d?a(Function.call,d):d,m&&((v.virtual||(v.virtual={}))[u]=d,e&l.R&&_&&!_[u]&&o(_,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(148);n.d(t,"default",function(){return r.a}),n.d(t,"Grid",function(){return r.a});var i=n(412);n.d(t,"accessibilityOverscanIndicesGetter",function(){return i.a});var a=n(150);n.d(t,"defaultCellRangeRenderer",function(){return a.a});var o=n(149);n.d(t,"defaultOverscanIndicesGetter",function(){return o.c})},function(e,t,n){"use strict";function r(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.noWarn,i=void 0!==r&&r,a=n.createElement,o=void 0===a||a,s=function(t){function n(){var e,r,a;F(this,n);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return e=r=V(this,t.call.apply(t,[this].concat(s))),r.warned=i,r.state={theme:{}},r.setTheme=function(e){return r.setState({theme:e})},a=e,V(r,a)}return B(n,t),n.prototype.componentWillMount=function(){this.context[z];var e=this.props.theme;this.context[z]?this.setTheme(e||this.context[z].getState()):this.setTheme(e||{})},n.prototype.componentWillReceiveProps=function(e){this.props.theme!==e.theme&&this.setTheme(e.theme)},n.prototype.componentDidMount=function(){this.context[z]&&!this.props.theme&&(this.subscriptionId=this.context[z].subscribe(this.setTheme))},n.prototype.componentWillUnmount=function(){this.subscriptionId&&this.context[z].unsubscribe(this.subscriptionId)},n.prototype.render=function(){return o?E.a.createElement(e,j({},this.props,this.state)):e.call(this,j({},this.props,this.state),this.context)},n}(E.a.Component),l=(t={},t[z]=R.object,t),u=null;return Object.defineProperty(s,"contextTypes",{enumerable:!0,configurable:!0,set:function(e){u=e},get:function(){return u?j({},l,u):l}}),s}function i(e){var t=W.call(e);return"[object Function]"===t||"function"===typeof e&&"[object RegExp]"!==t||"undefined"!==typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}function a(e){return!0===q(e)&&"[object Object]"===Object.prototype.toString.call(e)}function o(e){function t(){return s}function n(e){s=e;for(var t=Object.keys(a),n=0,r=t.length;n<r;n++)a[t[n]]&&a[t[n]](e)}function r(e){if("function"!==typeof e)throw new Error("listener must be a function.");var t=o;return a[t]=e,o+=1,t}function i(e){a[e]=void 0}var a={},o=1,s=e;return{getState:t,setState:n,subscribe:r,unsubscribe:i}}function s(e){var t=[],n=[];return e.toString().split(" ").forEach(function(e){if(0===e.indexOf("css-")){var r=l(e);n.push(r)}else t.push(e)}),{glamorlessClassName:t,glamorStyles:n}}function l(e){var t;return t={},t["data-"+e]="",t}function u(e){var t=e.styles,n=e.props,r=e.cssOverrides,i=e.cssProp,a=e.context,o=(e.displayName,c([].concat(t,[n.className,r,i]),n,a)),s=o.mappedArgs,l=o.nonGlamorClassNames;return(P.css.apply(void 0,[null].concat(s)).toString()+" "+l.join(" ").trim()).trim()}function c(e,t,n){for(var r=void 0,i=[],a=[],o=0;o<e.length;o++){for(r=e[o];"function"===typeof r;)r=r(t,n);if("string"===typeof r){var l=s(r),u=l.glamorStyles,d=l.glamorlessClassName;i.push.apply(i,u),a.push.apply(a,d)}else if(Array.isArray(r)){var f=c(r,t,n);i.push.apply(i,f.mappedArgs),a.push.apply(a,f.nonGlamorClassNames)}else i.push(r)}return{mappedArgs:i,nonGlamorClassNames:a}}function d(e,t,n,r){return e.forEach(function(e){return"function"===typeof e?Object.assign(t,e(Object.assign({},t,n),r)):Array.isArray(e)?Object.assign(t,d(e,t,n,r)):Object.assign(t,e)}),Object.assign(t,n)}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(e)?e:[e]}function h(e,t){return e?e.concat(t):t}function p(e){return e.rootEl?e.rootEl:e.comp||e}function m(e){return"string"===typeof e?e:e.displayName||e.name||"unknown"}function g(e,t){var n=t&&t.cache?t.cache:X,r=t&&t.serializer?t.serializer:T;return(t&&t.strategy?t.strategy:x)(e,{cache:n,serializer:r})}function y(e){return null==e||"number"===typeof e||"boolean"===typeof e}function v(e,t,n,r){var i=y(r)?r:n(r),a=t.get(i);return"undefined"===typeof a&&(a=e.call(this,r),t.set(i,a)),a}function _(e,t,n){var r=Array.prototype.slice.call(arguments,3),i=n(r),a=t.get(i);return"undefined"===typeof a&&(a=e.apply(this,r),t.set(i,a)),a}function b(e,t,n,r,i){return n.bind(t,e,r,i)}function x(e,t){return b(e,this,1===e.length?v:_,t.cache.create(),t.serializer)}function w(e,t){return b(e,this,_,t.cache.create(),t.serializer)}function k(e,t){return b(e,this,v,t.cache.create(),t.serializer)}function T(){return JSON.stringify(arguments)}function M(){this.cache=Object.create(null)}function A(e,t){var n=t.propsAreCssOverrides,r=t.rootEl,i=t.filterProps,a=t.forwardProps,o=e.css,s=e.innerRef,l=(e.theme,e.className,e.glam,U(e,["css","innerRef","theme","className","glam"]));void 0!==s&&-1!==a.indexOf("innerRef")&&(l.innerRef=s);var u={toForward:{},cssProp:o,cssOverrides:{}};return n||"string"===typeof r||0!==i.length?Object.keys(l).reduce(function(e,t){return-1!==i.indexOf(t)?e:(-1!==a.indexOf(t)||bt(r,t)?e.toForward[t]=l[t]:n&&(e.cssOverrides[t]=l[t]),e)},u):(u.toForward=l,u)}function C(e){return e.slice(0,1).toUpperCase()+e.slice(1)}var S=n(1),E=n.n(S),P=n(180),I=(n.n(P),["a","abbr","acronym","address","applet","area","article","aside","audio","b","base","basefont","bdi","bdo","bgsound","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","command","content","data","datalist","dd","del","details","dfn","dialog","dir","div","dl","dt","element","em","embed","fieldset","figcaption","figure","font","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","image","img","input","ins","isindex","kbd","keygen","label","legend","li","link","listing","main","map","mark","marquee","math","menu","menuitem","meta","meter","multicol","nav","nextid","nobr","noembed","noframes","noscript","object","ol","optgroup","option","output","p","param","picture","plaintext","pre","progress","q","rb","rbc","rp","rt","rtc","ruby","s","samp","script","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","tt","u","ul","var","video","wbr","xmp"]),L=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","animation","audio","canvas","circle","clipPath","color-profile","cursor","defs","desc","discard","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","handler","hatch","hatchpath","hkern","iframe","image","line","linearGradient","listener","marker","mask","mesh","meshgradient","meshpatch","meshrow","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","prefetch","radialGradient","rect","script","set","solidColor","solidcolor","stop","style","svg","switch","symbol","tbreak","text","textArea","textPath","title","tref","tspan","unknown","use","video","view","vkern"],O=I.concat(L).filter(function(e,t,n){return n.indexOf(e)===t}),z="__glamorous__",R=void 0;if(parseFloat(E.a.version.slice(0,4))>=15.5)try{R=n(0)}catch(e){}R=R||E.a.PropTypes;var D,N,F=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B=function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},U=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},V=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t},H=i,W=Object.prototype.toString,q=function(e){return null!=e&&"object"===typeof e&&!1===Array.isArray(e)},G=function(e){var t,n;return!1!==a(e)&&("function"===typeof(t=e.constructor)&&(n=t.prototype,!1!==a(n)&&!1!==n.hasOwnProperty("isPrototypeOf")))},Y=function(e){function t(){var n,r,i;F(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=V(this,e.call.apply(e,[this].concat(o))),r.setOuterTheme=function(e){r.outerTheme=e,void 0!==r.broadcast&&r.publishTheme()},i=n,V(r,i)}return B(t,e),t.prototype.getTheme=function(e){var t=e||this.props.theme;if(H(t)){var n=t(this.outerTheme);if(!G(n))throw new Error("[ThemeProvider] Please return an object from your theme function, i.e. theme={() => ({})}!");return n}return j({},this.outerTheme,t)},t.prototype.getChildContext=function(){var e;return e={},e[z]=this.broadcast,e},t.prototype.publishTheme=function(e){this.broadcast.setState(this.getTheme(e))},t.prototype.componentDidMount=function(){this.context[z]&&(this.subscriptionId=this.context[z].subscribe(this.setOuterTheme))},t.prototype.componentWillMount=function(){this.context[z]&&this.setOuterTheme(this.context[z].getState()),this.broadcast=o(this.getTheme(this.props.theme))},t.prototype.componentWillReceiveProps=function(e){this.props.theme!==e.theme&&this.publishTheme(e.theme)},t.prototype.componentWillUnmount=function(){this.subscriptionId&&this.context[z].unsubscribe(this.subscriptionId)},t.prototype.render=function(){return this.props.children?E.a.Children.only(this.props.children):null},t}(E.a.Component);Y.childContextTypes=(D={},D[z]=R.object.isRequired,D),Y.contextTypes=(N={},N[z]=R.object,N),M.prototype.has=function(e){return e in this.cache},M.prototype.get=function(e){return this.cache[e]},M.prototype.set=function(e,t){this.cache[e]=t};var X={create:function(){return new M}},Z=g,J={variadic:w,monadic:k};Z.strategies=J;var K=["coords","download","href","name","rel","shape","target","type"],Q=["title"],$=["alt","height","name","width"],ee=["alt","coords","download","href","rel","shape","target","type"],te=["controls","loop","muted","preload","src"],ne=["href","target"],re=["size"],ie=["dir"],ae=["cite"],oe=["disabled","form","name","type","value"],se=["height","width"],le=["span","width"],ue=["span","width"],ce=["value"],de=["cite"],fe=["open"],he=["title"],pe=["open"],me=["height","src","type","width"],ge=["disabled","form","name"],ye=["size"],ve=["accept","action","method","name","target"],_e=["name","scrolling","src"],be=["cols","rows"],xe=["profile"],we=["size","width"],ke=["manifest"],Te=["height","name","sandbox","scrolling","src","width"],Me=["alt","height","name","sizes","src","width"],Ae=["accept","alt","autoCapitalize","autoCorrect","autoSave","checked","defaultChecked","defaultValue","disabled","form","height","list","max","min","multiple","name","onChange","pattern","placeholder","required","results","size","src","step","title","type","value","width"],Ce=["cite"],Se=["challenge","disabled","form","name"],Ee=["form"],Pe=["type","value"],Ie=["color","href","integrity","media","nonce","rel","scope","sizes","target","title","type"],Le=["name"],Oe=["content","name"],ze=["high","low","max","min","optimum","value"],Re=["data","form","height","name","type","width"],De=["reversed","start","type"],Ne=["disabled","label"],Fe=["disabled","label","selected","value"],je=["form","name"],Be=["name","type","value"],Ue=["width"],Ve=["max","value"],He=["cite"],We=["async","defer","integrity","nonce","src","type"],qe=["defaultValue","disabled","form","multiple","name","onChange","required","size","value"],Ge=["name"],Ye=["media","sizes","src","type"],Xe=["media","nonce","title","type"],Ze=["summary","width"],Je=["headers","height","scope","width"],Ke=["autoCapitalize","autoCorrect","cols","defaultValue","disabled","form","name","onChange","placeholder","required","rows","value","wrap"],Qe=["headers","height","scope","width"],$e=["default","kind","label","src"],et=["type"],tt=["controls","height","loop","muted","poster","preload","src","width"],nt=["accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baseProfile","baselineShift","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","color","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","height","horizAdvX","horizOriginX","ideographic","imageRendering","in","in2","intercept","k","k1","k2","k3","k4","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","points","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","scale","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","vHanging","vIdeographic","vMathematical","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","viewBox","viewTarget","visibility","width","widths","wordSpacing","writingMode","x","x1","x2","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlSpace","xmlns","xmlnsXlink","y","y1","y2","yChannelSelector","z","zoomAndPan"],rt={html:["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rb","rp","rt","rtc","ruby","s","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],svg:["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"]},it={a:K,abbr:Q,applet:$,area:ee,audio:te,base:ne,basefont:re,bdo:ie,blockquote:ae,button:oe,canvas:se,col:le,colgroup:ue,data:ce,del:de,details:fe,dfn:he,dialog:pe,embed:me,fieldset:ge,font:ye,form:ve,frame:_e,frameset:be,head:xe,hr:we,html:ke,iframe:Te,img:Me,input:Ae,ins:Ce,keygen:Se,label:Ee,li:Pe,link:Ie,map:Le,meta:Oe,meter:ze,object:Re,ol:De,optgroup:Ne,option:Fe,output:je,param:Be,pre:Ue,progress:Ve,q:He,script:We,select:qe,slot:Ge,source:Ye,style:Xe,table:Ze,td:Je,textarea:Ke,th:Qe,track:$e,ul:et,video:tt,svg:nt,elements:rt,"*":["about","acceptCharset","accessKey","allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","capture","cellPadding","cellSpacing","charSet","classID","className","colSpan","contentEditable","contextMenu","crossOrigin","dangerouslySetInnerHTML","datatype","dateTime","dir","draggable","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hidden","hrefLang","htmlFor","httpEquiv","icon","id","inlist","inputMode","is","itemID","itemProp","itemRef","itemScope","itemType","keyParams","keyType","lang","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","prefix","property","radioGroup","readOnly","resource","role","rowSpan","scoped","seamless","security","spellCheck","srcDoc","srcLang","srcSet","style","suppressContentEditableWarning","tabIndex","title","typeof","unselectable","useMap","vocab","wmode"]},at=Object.freeze({a:K,abbr:Q,applet:$,area:ee,audio:te,base:ne,basefont:re,bdo:ie,blockquote:ae,button:oe,canvas:se,col:le,colgroup:ue,data:ce,del:de,details:fe,dfn:he,dialog:pe,embed:me,fieldset:ge,font:ye,form:ve,frame:_e,frameset:be,head:xe,hr:we,html:ke,iframe:Te,img:Me,input:Ae,ins:Ce,keygen:Se,label:Ee,li:Pe,link:Ie,map:Le,meta:Oe,meter:ze,object:Re,ol:De,optgroup:Ne,option:Fe,output:je,param:Be,pre:Ue,progress:Ve,q:He,script:We,select:qe,slot:Ge,source:Ye,style:Xe,table:Ze,td:Je,textarea:Ke,th:Qe,track:$e,ul:et,video:tt,svg:nt,elements:rt,default:it}),ot=at&&it||at,st=function(e,t){return t={exports:{}},e(t,t.exports),t.exports}(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=ot,e.exports=ot}),lt=function(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}(st),ut=["children","dangerouslySetInnerHTML","key","ref","autoFocus","defaultValue","valueLink","defaultChecked","checkedLink","innerHTML","suppressContentEditableWarning","onFocusIn","onFocusOut","className","onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onKeyDown","onKeyPress","onKeyUp","onFocus","onBlur","onChange","onInput","onInvalid","onSubmit","onClick","onContextMenu","onDoubleClick","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onScroll","onWheel","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onLoad","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onCopyCapture","onCutCapture","onPasteCapture","onCompositionEndCapture","onCompositionStartCapture","onCompositionUpdateCapture","onKeyDownCapture","onKeyPressCapture","onKeyUpCapture","onFocusCapture","onBlurCapture","onChangeCapture","onInputCapture","onSubmitCapture","onClickCapture","onContextMenuCapture","onDoubleClickCapture","onDragCapture","onDragEndCapture","onDragEnterCapture","onDragExitCapture","onDragLeaveCapture","onDragOverCapture","onDragStartCapture","onDropCapture","onMouseDownCapture","onMouseEnterCapture","onMouseLeaveCapture","onMouseMoveCapture","onMouseOutCapture","onMouseOverCapture","onMouseUpCapture","onSelectCapture","onTouchCancelCapture","onTouchEndCapture","onTouchMoveCapture","onTouchStartCapture","onScrollCapture","onWheelCapture","onAbortCapture","onCanPlayCapture","onCanPlayThroughCapture","onDurationChangeCapture","onEmptiedCapture","onEncryptedCapture","onEndedCapture","onErrorCapture","onLoadedDataCapture","onLoadedMetadataCapture","onLoadStartCapture","onPauseCapture","onPlayCapture","onPlayingCapture","onProgressCapture","onRateChangeCapture","onSeekedCapture","onSeekingCapture","onStalledCapture","onSuspendCapture","onTimeUpdateCapture","onVolumeChangeCapture","onWaitingCapture","onLoadCapture","onAnimationStartCapture","onAnimationEndCapture","onAnimationIterationCapture","onTransitionEndCapture"],ct=lt["*"],dt=lt.elements.svg,ft=lt.elements.html,ht=["color","height","width"],pt=RegExp.prototype.test.bind(new RegExp("^(data|aria)-[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$")),mt=function(e){return"svg"===e||-1===ft.indexOf(e)&&-1!==dt.indexOf(e)},gt=function(e,t){var n=void 0;return n=mt(t)?lt.svg:lt[t]||[],-1!==ct.indexOf(e)||-1!==n.indexOf(e)},yt=function(e){return-1!==ht.indexOf(e)},vt=function(e){return-1!==ut.indexOf(e)},_t=function(e,t){return"string"!==typeof e||(gt(t,e)||vt(t)||pt(t.toLowerCase()))&&(!yt(t)||mt(e))},bt=Z(_t),xt=function(e){function t(i){function a(e){return t(i,j({},s,e))}function o(){function o(e,t,n){if(!f)return!0;var r=!0;return n&&(f(n.props,e,n.context,t)||(r=!1)),r}for(var s=arguments.length,h=Array(s),g=0;g<s;g++)h[g]=arguments[g];var v=r(function(t,n){t=d(v.propsToApply,{},t,n);var r=o(t,n,this.previous);f&&(this.previous={props:t,context:n});var i=e(t,v),a=i.toForward,s=i.cssOverrides,l=i.cssProp;return this.className=r?u({styles:v.styles,props:t,cssOverrides:s,cssProp:l,context:n,displayName:v.displayName}):this.className,E.a.createElement(v.comp,j({ref:"innerRef"in a?void 0:t.innerRef},a,{className:this.className}))},{noWarn:!0,createElement:!1});return Object.assign(v,n({comp:i,styles:h,rootEl:l,filterProps:m,forwardProps:y,displayName:c,propsToApply:b}),{isGlamorousComponent:!0,propsAreCssOverrides:_,withComponent:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=v.forwardProps,i=v.filterProps,a=U(v,["forwardProps","filterProps"]);return t(j({},a,{comp:e,rootEl:p(e)}),j({forwardProps:r,filterProps:i},n))()},withProps:function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return t(v,{withProps:n})()},withConfig:a}),v}var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=s.rootEl,c=s.displayName,f=s.shouldClassNameUpdate,h=s.filterProps,m=void 0===h?[]:h,g=s.forwardProps,y=void 0===g?[]:g,v=s.propsAreCssOverrides,_=void 0===v?i.propsAreCssOverrides:v,b=s.withProps;return Object.assign(o,{withConfig:a}),o}function n(e){var t=e.comp,n=e.styles,r=e.rootEl,i=e.filterProps,a=e.forwardProps,o=e.displayName,s=e.propsToApply,l=t.comp?t.comp:t,u=t.propsToApply?[].concat(t.propsToApply,f(s)):f(s);return{styles:h(t.styles,n),comp:l,rootEl:r||p(t),forwardProps:h(t.forwardProps,a),filterProps:h(t.filterProps,i),displayName:o||"glamorous("+m(t)+")",propsToApply:u}}return t}(A);Object.assign(xt,O.reduce(function(e,t){return e[t]=xt(t),e},{})),Object.assign(xt,O.reduce(function(e,t){var n=C(t);return e[n]=xt[t](),e[n].displayName="glamorous."+n,e[n].propsAreCssOverrides=!0,e},{})),xt.default=xt;xt.A,xt.Abbr,xt.Acronym,xt.Address,xt.Applet,xt.Area,xt.Article,xt.Aside,xt.Audio,xt.B,xt.Base,xt.Basefont,xt.Bdi,xt.Bdo,xt.Bgsound,xt.Big,xt.Blink,xt.Blockquote,xt.Body,xt.Br,xt.Button,xt.Canvas,xt.Caption,xt.Center,xt.Cite,xt.Code,xt.Col,xt.Colgroup,xt.Command,xt.Content,xt.Data,xt.Datalist,xt.Dd,xt.Del,xt.Details,xt.Dfn,xt.Dialog,xt.Dir,xt.Div,xt.Dl,xt.Dt,xt.Element,xt.Em,xt.Embed,xt.Fieldset,xt.Figcaption,xt.Figure,xt.Font,xt.Footer,xt.Form,xt.Frame,xt.Frameset,xt.H1,xt.H2,xt.H3,xt.H4,xt.H5,xt.H6,xt.Head,xt.Header,xt.Hgroup,xt.Hr,xt.Html,xt.I,xt.Iframe,xt.Image,xt.Img,xt.Input,xt.Ins,xt.Isindex,xt.Kbd,xt.Keygen,xt.Label,xt.Legend,xt.Li,xt.Link,xt.Listing,xt.Main,xt.Map,xt.Mark,xt.Marquee,xt.Math,xt.Menu,xt.Menuitem,xt.Meta,xt.Meter,xt.Multicol,xt.Nav,xt.Nextid,xt.Nobr,xt.Noembed,xt.Noframes,xt.Noscript,xt.Object,xt.Ol,xt.Optgroup,xt.Option,xt.Output,xt.P,xt.Param,xt.Picture,xt.Plaintext,xt.Pre,xt.Progress,xt.Q,xt.Rb,xt.Rbc,xt.Rp,xt.Rt,xt.Rtc,xt.Ruby,xt.S,xt.Samp,xt.Script,xt.Section,xt.Select,xt.Shadow,xt.Slot,xt.Small,xt.Source,xt.Spacer,xt.Span,xt.Strike,xt.Strong,xt.Style,xt.Sub,xt.Summary,xt.Sup,xt.Svg,xt.Table,xt.Tbody,xt.Td,xt.Template,xt.Textarea,xt.Tfoot,xt.Th,xt.Thead,xt.Time,xt.Title,xt.Tr,xt.Track,xt.Tt,xt.U,xt.Ul,xt.Var,xt.Video,xt.Wbr,xt.Xmp,xt.AltGlyph,xt.AltGlyphDef,xt.AltGlyphItem,xt.Animate,xt.AnimateColor,xt.AnimateMotion,xt.AnimateTransform,xt.Animation,xt.Circle,xt.ClipPath,xt["Color-profile"],xt.Cursor,xt.Defs,xt.Desc,xt.Discard,xt.Ellipse,xt.FeBlend,xt.FeColorMatrix,xt.FeComponentTransfer,xt.FeComposite,xt.FeConvolveMatrix,xt.FeDiffuseLighting,xt.FeDisplacementMap,xt.FeDistantLight,xt.FeDropShadow,xt.FeFlood,xt.FeFuncA,xt.FeFuncB,xt.FeFuncG,xt.FeFuncR,xt.FeGaussianBlur,xt.FeImage,xt.FeMerge,xt.FeMergeNode,xt.FeMorphology,xt.FeOffset,xt.FePointLight,xt.FeSpecularLighting,xt.FeSpotLight,xt.FeTile,xt.FeTurbulence,xt.Filter,xt["Font-face"],xt["Font-face-format"],xt["Font-face-name"],xt["Font-face-src"],xt["Font-face-uri"],xt.ForeignObject,xt.G,xt.Glyph,xt.GlyphRef,xt.Handler,xt.Hatch,xt.Hatchpath,xt.Hkern,xt.Line,xt.LinearGradient,xt.Listener,xt.Marker,xt.Mask,xt.Mesh,xt.Meshgradient,xt.Meshpatch,xt.Meshrow,xt.Metadata,xt["Missing-glyph"],xt.Mpath,xt.Path,xt.Pattern,xt.Polygon,xt.Polyline,xt.Prefetch,xt.RadialGradient,xt.Rect,xt.Set,xt.SolidColor,xt.Solidcolor,xt.Stop,xt.Switch,xt.Symbol,xt.Tbreak,xt.Text,xt.TextArea,xt.TextPath,xt.Tref,xt.Tspan,xt.Unknown,xt.Use,xt.View,xt.Vkern;t.a=xt},function(e,t,n){var r=n(74)("wks"),i=n(53),a=n(20).Symbol,o="function"==typeof a;(e.exports=function(e){return r[e]||(r[e]=o&&a[e]||(o?a:i)("Symbol."+e))}).store=r},function(e,t,n){var r=n(27),i=n(107),a=n(68),o=Object.defineProperty;t.f=n(21)?Object.defineProperty:function(e,t,n){if(r(e),t=a(t,!0),r(n),i)try{return o(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){e.exports=!n(31)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){e.exports={default:n(221),__esModule:!0}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"===typeof window&&(n=window)}e.exports=n},function(e,t){e.exports=function(e){return"object"===typeof e?null!==e:"function"===typeof e}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return e.charAt(0).toUpperCase()+e.slice(1)}function a(e,t){return(0,f.default)(t).every(function(n){return e.hasOwnProperty(n)&&e[n]===t[n]})}function o(e,t){for(var n="undefined"===typeof t?"undefined":(0,c.default)(t),r=0;r<e.length;r+=1){if("function"===n&&!0===!!t(e[r],r,e))return r;if("object"===n&&a(e[r],t))return r;if(-1!==["string","number","boolean"].indexOf(n))return e.indexOf(t)}return-1}function s(e,t){var n=o(e,t);return n>-1?e[n]:void 0}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return null!=e}).reduce(function(e,t){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];e.apply(this,r),t.apply(this,r)}},function(){})}Object.defineProperty(t,"__esModule",{value:!0});var u=n(55),c=r(u),d=n(22),f=r(d);t.capitalize=i,t.contains=a,t.findIndex=o,t.find=s,t.createChainedFunction=l;var h=n(11);r(h)},function(e,t,n){var r=n(19),i=n(41);e.exports=n(21)?function(e,t,n){return r.f(e,t,i(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var r=n(24);e.exports=function(e){if(!r(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){"use strict";var r={background:"#f7fcfc",orange:"#ffab40",lightTeal:"#009688",darkTeal:"#00796b",tealScale:[[0,"#f7fcfc"],[1e-12,"#E0F2F1"],[.2,"#B2DFDB"],[.3,"#80CBC4"],[.4,"#4DB6AC"],[.5,"#26A69A"],[.6,"#009688"],[.7,"#00897B"],[.8,"#00796B"],[.9,"#00695C"],[1,"#004D40"]],tealList:{2:["#004D40","#80CBC4"],3:["#004D40","#00897B","#4DB6AC"],4:["#004D40","#00796B","#009688","#4DB6AC"],10:["#004D40","#00695C","#00796B","#00897B","#009688","#26A69A","#4DB6AC","#80CBC4","#B2DFDB","#E0F2F1"],19:["#004D40","#005B4E","#00695C","#007164","#00796B","#008173","#00897B","#009082","#009688","#139E91","#26A69A","#3AAEA3","#4DB6AC","#67C1B8","#80CBC4","#99D5D0","#B2DFDB","#C9E9E6","#E0F2F1"]},plotlyConfig:{displayModeBar:!0,displaylogo:!1,modeBarButtonsToRemove:["sendDataToCloud","sendDataToCloud","hoverCompareCartesian","hoverClosestPie","zoom2d","pan2d","lasso2d","select2d","zoomIn2d","zoomOut2d","autoScale2d","resetScale2d","toggleSpikelines","hoverClosestCartesian","zoomInGeo","zoomOutGeo","hoverClosestGeo"]}};t.a=r},function(e,t,n){"use strict";function r(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}r(),e.exports=n(172)},function(e,t,n){var r=n(106);e.exports=function(e,t,n){if(r(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var r=n(69),i=n(71);e.exports=function(e){return r(i(e))}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(364);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var i=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,s,l=r(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var c in n)a.call(n,c)&&(l[c]=n[c]);if(i){s=i(n);for(var d=0;d<s.length;d++)o.call(n,s[d])&&(l[s[d]]=n[s[d]])}}return l}},function(e,t,n){var r=n(71);e.exports=function(e){return Object(r(e))}},function(e,t){e.exports={}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(11),u=r(l),c=n(88),d=r(c),f=n(60),h=r(f),p=function(){function e(t,n,r){i(this,e),this.type="style",this.isProcessed=!1;var a=r.sheet,o=r.Renderer,s=r.selector;this.key=t,this.options=r,this.style=n,s&&(this.selectorText=s),this.renderer=a?a.renderer:new o}return s(e,[{key:"prop",value:function(e,t){if(void 0===t)return this.style[e];if(this.style[e]===t)return this;t=this.options.jss.plugins.onChangeValue(t,e,this);var n=null==t||!1===t,r=e in this.style;if(n&&!r)return this;var i=n&&r;if(i?delete this.style[e]:this.style[e]=t,this.renderable)return i?this.renderer.removeProperty(this.renderable,e):this.renderer.setProperty(this.renderable,e,t),this;var a=this.options.sheet;return a&&a.attached&&(0,u.default)(!1,'Rule is not linked. Missing sheet option "link: true".'),this}},{key:"applyTo",value:function(e){var t=this.toJSON();for(var n in t)this.renderer.setProperty(e,n,t[n]);return this}},{key:"toJSON",value:function(){var e={};for(var t in this.style){var n=this.style[t];"object"!==("undefined"===typeof n?"undefined":o(n))?e[t]=n:Array.isArray(n)&&(e[t]=(0,h.default)(n))}return e}},{key:"toString",value:function(e){var t=this.options.sheet,n=!!t&&t.options.link,r=n?a({},e,{allowEmpty:!0}):e;return(0,d.default)(this.selector,this.style,r)}},{key:"selector",set:function(e){if(e!==this.selectorText&&(this.selectorText=e,this.renderable)){if(!this.renderer.setSelector(this.renderable,e)&&this.renderable){var t=this.renderer.replaceRule(this.renderable,this);t&&(this.renderable=t)}}},get:function(){return this.selectorText}}]),e}();t.default=p},function(e,t,n){},function(e,t,n){"use strict";function r(e){return"string"===typeof e&&i.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=/-webkit-|-moz-|-ms-/;e.exports=t.default},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var r=n(109),i=n(75);e.exports=Object.keys||function(e){return r(e,i)}},function(e,t,n){"use strict";var r=n(227)(!0);n(79)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=r(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";t.__esModule=!0;var r=n(121),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(e,t){return t+"("+(0,i.default)(e)+")"};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(61),l=r(s),u=n(126),c=r(u),d=n(38),f=r(d),h=n(274),p=r(h),m=function(){function e(t){i(this,e),this.map={},this.raw={},this.index=[],this.options=t,this.classes=t.classes}return o(e,[{key:"add",value:function(e,t,n){var r=this.options,i=r.parent,o=r.sheet,s=r.jss,u=r.Renderer,c=r.generateClassName;n=a({classes:this.classes,parent:i,sheet:o,jss:s,Renderer:u,generateClassName:c},n),!n.selector&&this.classes[e]&&(n.selector="."+(0,p.default)(this.classes[e])),this.raw[e]=t;var d=(0,l.default)(e,t,n),h=void 0;!n.selector&&d instanceof f.default&&(h=c(d,o),d.selector="."+(0,p.default)(h)),this.register(d,h);var m=void 0===n.index?this.index.length:n.index;return this.index.splice(m,0,d),d}},{key:"get",value:function(e){return this.map[e]}},{key:"remove",value:function(e){this.unregister(e),this.index.splice(this.indexOf(e),1)}},{key:"indexOf",value:function(e){return this.index.indexOf(e)}},{key:"process",value:function(){var e=this.options.jss.plugins;this.index.slice(0).forEach(e.onProcessRule,e)}},{key:"register",value:function(e,t){this.map[e.key]=e,e instanceof f.default&&(this.map[e.selector]=e,t&&(this.classes[e.key]=t))}},{key:"unregister",value:function(e){delete this.map[e.key],e instanceof f.default&&(delete this.map[e.selector],delete this.classes[e.key])}},{key:"update",value:function(e,t){var n=this.options,r=n.jss.plugins,i=n.sheet;if("string"===typeof e)return void r.onUpdate(t,this.get(e),i);for(var a=0;a<this.index.length;a++)r.onUpdate(e,this.index[a],i)}},{key:"link",value:function(e){for(var t=this.options.sheet.renderer.getUnescapedKeysMap(this.index),n=0;n<e.length;n++){var r=e[n],i=this.options.sheet.renderer.getKey(r);t[i]&&(i=t[i]);var a=this.map[i];a&&(0,c.default)(a,r)}}},{key:"toString",value:function(e){for(var t="",n=this.options.sheet,r=!!n&&n.options.link,i=0;i<this.index.length;i++){var a=this.index[i],o=a.toString(e);(o||r)&&(t&&(t+="\n"),t+=o)}return t}}]),e}();t.default=m},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){function t(e){return"@media (min-width:"+("number"===typeof c[e]?c[e]:e)+f+")"}function n(e){var n=u.indexOf(e)+1,r=c[u[n]];return n===u.length?t("xs"):"@media (max-width:"+(("number"===typeof r&&n>0?r:e)-p/100)+f+")"}function r(e,n){var r=u.indexOf(n)+1;return r===u.length?t(e):"@media (min-width:"+c[e]+f+") and (max-width:"+(c[u[r]]-p/100)+f+")"}function i(e){return r(e,e)}function a(e){return c[e]}var s=e.values,c=void 0===s?{xs:0,sm:600,md:960,lg:1280,xl:1920}:s,d=e.unit,f=void 0===d?"px":d,h=e.step,p=void 0===h?5:h,m=(0,l.default)(e,["values","unit","step"]);return(0,o.default)({keys:u,values:c,up:t,down:n,between:r,only:i,width:a},m)}Object.defineProperty(t,"__esModule",{value:!0}),t.keys=void 0;var a=n(2),o=r(a),s=n(3),l=r(s);t.default=i;var u=t.keys=["xs","sm","md","lg","xl"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(373);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){(function(e,r){var i;(function(){function a(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function o(e,t,n,r){for(var i=-1,a=null==e?0:e.length;++i<a;){var o=e[i];t(r,o,n(o),e)}return r}function s(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e}function l(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e}function u(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function c(e,t){for(var n=-1,r=null==e?0:e.length,i=0,a=[];++n<r;){var o=e[n];t(o,n,e)&&(a[i++]=o)}return a}function d(e,t){return!!(null==e?0:e.length)&&w(e,t,0)>-1}function f(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function h(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function p(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function m(e,t,n,r){var i=-1,a=null==e?0:e.length;for(r&&a&&(n=e[++i]);++i<a;)n=t(n,e[i],i,e);return n}function g(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function y(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function v(e){return e.split("")}function _(e){return e.match(Ft)||[]}function b(e,t,n){var r;return n(e,function(e,n,i){if(t(e,n,i))return r=n,!1}),r}function x(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}function w(e,t,n){return t===t?J(e,t,n):x(e,T,n)}function k(e,t,n,r){for(var i=n-1,a=e.length;++i<a;)if(r(e[i],t))return i;return-1}function T(e){return e!==e}function M(e,t){var n=null==e?0:e.length;return n?P(e,t)/n:ze}function A(e){return function(t){return null==t?re:t[e]}}function C(e){return function(t){return null==e?re:e[t]}}function S(e,t,n,r,i){return i(e,function(e,i,a){n=r?(r=!1,e):t(n,e,i,a)}),n}function E(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function P(e,t){for(var n,r=-1,i=e.length;++r<i;){var a=t(e[r]);a!==re&&(n=n===re?a:n+a)}return n}function I(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function L(e,t){return h(t,function(t){return[t,e[t]]})}function O(e){return function(t){return e(t)}}function z(e,t){return h(t,function(t){return e[t]})}function R(e,t){return e.has(t)}function D(e,t){for(var n=-1,r=e.length;++n<r&&w(t,e[n],0)>-1;);return n}function N(e,t){for(var n=e.length;n--&&w(t,e[n],0)>-1;);return n}function F(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r}function j(e){return"\\"+An[e]}function B(e,t){return null==e?re:e[t]}function U(e){return yn.test(e)}function V(e){return vn.test(e)}function H(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function q(e,t){return function(n){return e(t(n))}}function G(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n];o!==t&&o!==ue||(e[n]=ue,a[i++]=n)}return a}function Y(e,t){return"__proto__"==t?re:e[t]}function X(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function Z(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}function J(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function K(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r}function Q(e){return U(e)?ee(e):Hn(e)}function $(e){return U(e)?te(e):v(e)}function ee(e){for(var t=mn.lastIndex=0;mn.test(e);)++t;return t}function te(e){return e.match(mn)||[]}function ne(e){return e.match(gn)||[]}var re,ie=200,ae="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",oe="Expected a function",se="__lodash_hash_undefined__",le=500,ue="__lodash_placeholder__",ce=1,de=2,fe=4,he=1,pe=2,me=1,ge=2,ye=4,ve=8,_e=16,be=32,xe=64,we=128,ke=256,Te=512,Me=30,Ae="...",Ce=800,Se=16,Ee=1,Pe=2,Ie=1/0,Le=9007199254740991,Oe=1.7976931348623157e308,ze=NaN,Re=4294967295,De=Re-1,Ne=Re>>>1,Fe=[["ary",we],["bind",me],["bindKey",ge],["curry",ve],["curryRight",_e],["flip",Te],["partial",be],["partialRight",xe],["rearg",ke]],je="[object Arguments]",Be="[object Array]",Ue="[object AsyncFunction]",Ve="[object Boolean]",He="[object Date]",We="[object DOMException]",qe="[object Error]",Ge="[object Function]",Ye="[object GeneratorFunction]",Xe="[object Map]",Ze="[object Number]",Je="[object Null]",Ke="[object Object]",Qe="[object Proxy]",$e="[object RegExp]",et="[object Set]",tt="[object String]",nt="[object Symbol]",rt="[object Undefined]",it="[object WeakMap]",at="[object WeakSet]",ot="[object ArrayBuffer]",st="[object DataView]",lt="[object Float32Array]",ut="[object Float64Array]",ct="[object Int8Array]",dt="[object Int16Array]",ft="[object Int32Array]",ht="[object Uint8Array]",pt="[object Uint8ClampedArray]",mt="[object Uint16Array]",gt="[object Uint32Array]",yt=/\b__p \+= '';/g,vt=/\b(__p \+=) '' \+/g,_t=/(__e\(.*?\)|\b__t\)) \+\n'';/g,bt=/&(?:amp|lt|gt|quot|#39);/g,xt=/[&<>"']/g,wt=RegExp(bt.source),kt=RegExp(xt.source),Tt=/<%-([\s\S]+?)%>/g,Mt=/<%([\s\S]+?)%>/g,At=/<%=([\s\S]+?)%>/g,Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,St=/^\w*$/,Et=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pt=/[\\^$.*+?()[\]{}|]/g,It=RegExp(Pt.source),Lt=/^\s+|\s+$/g,Ot=/^\s+/,zt=/\s+$/,Rt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Dt=/\{\n\/\* \[wrapped with (.+)\] \*/,Nt=/,? & /,Ft=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,jt=/\\(\\)?/g,Bt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ut=/\w*$/,Vt=/^[-+]0x[0-9a-f]+$/i,Ht=/^0b[01]+$/i,Wt=/^\[object .+?Constructor\]$/,qt=/^0o[0-7]+$/i,Gt=/^(?:0|[1-9]\d*)$/,Yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Xt=/($^)/,Zt=/['\n\r\u2028\u2029\\]/g,Jt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Kt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Qt="["+Kt+"]",$t="["+Jt+"]",en="[a-z\\xdf-\\xf6\\xf8-\\xff]",tn="[^\\ud800-\\udfff"+Kt+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",nn="\\ud83c[\\udffb-\\udfff]",rn="(?:\\ud83c[\\udde6-\\uddff]){2}",an="[\\ud800-\\udbff][\\udc00-\\udfff]",on="[A-Z\\xc0-\\xd6\\xd8-\\xde]",sn="(?:"+en+"|"+tn+")",ln="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",un="(?:\\u200d(?:"+["[^\\ud800-\\udfff]",rn,an].join("|")+")[\\ufe0e\\ufe0f]?"+ln+")*",cn="[\\ufe0e\\ufe0f]?"+ln+un,dn="(?:"+["[\\u2700-\\u27bf]",rn,an].join("|")+")"+cn,fn="(?:"+["[^\\ud800-\\udfff]"+$t+"?",$t,rn,an,"[\\ud800-\\udfff]"].join("|")+")",hn=RegExp("['\u2019]","g"),pn=RegExp($t,"g"),mn=RegExp(nn+"(?="+nn+")|"+fn+cn,"g"),gn=RegExp([on+"?"+en+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?="+[Qt,on,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?="+[Qt,on+sn,"$"].join("|")+")",on+"?"+sn+"+(?:['\u2019](?:d|ll|m|re|s|t|ve))?",on+"+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?","\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])","\\d+",dn].join("|"),"g"),yn=RegExp("[\\u200d\\ud800-\\udfff"+Jt+"\\ufe0e\\ufe0f]"),vn=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,_n=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bn=-1,xn={};xn[lt]=xn[ut]=xn[ct]=xn[dt]=xn[ft]=xn[ht]=xn[pt]=xn[mt]=xn[gt]=!0,xn[je]=xn[Be]=xn[ot]=xn[Ve]=xn[st]=xn[He]=xn[qe]=xn[Ge]=xn[Xe]=xn[Ze]=xn[Ke]=xn[$e]=xn[et]=xn[tt]=xn[it]=!1;var wn={};wn[je]=wn[Be]=wn[ot]=wn[st]=wn[Ve]=wn[He]=wn[lt]=wn[ut]=wn[ct]=wn[dt]=wn[ft]=wn[Xe]=wn[Ze]=wn[Ke]=wn[$e]=wn[et]=wn[tt]=wn[nt]=wn[ht]=wn[pt]=wn[mt]=wn[gt]=!0,wn[qe]=wn[Ge]=wn[it]=!1;var kn={"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I","\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i","\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r","\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij","\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"},Tn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Mn={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},An={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cn=parseFloat,Sn=parseInt,En="object"==typeof e&&e&&e.Object===Object&&e,Pn="object"==typeof self&&self&&self.Object===Object&&self,In=En||Pn||Function("return this")(),Ln="object"==typeof t&&t&&!t.nodeType&&t,On=Ln&&"object"==typeof r&&r&&!r.nodeType&&r,zn=On&&On.exports===Ln,Rn=zn&&En.process,Dn=function(){try{return Rn&&Rn.binding&&Rn.binding("util")}catch(e){}}(),Nn=Dn&&Dn.isArrayBuffer,Fn=Dn&&Dn.isDate,jn=Dn&&Dn.isMap,Bn=Dn&&Dn.isRegExp,Un=Dn&&Dn.isSet,Vn=Dn&&Dn.isTypedArray,Hn=A("length"),Wn=C(kn),qn=C(Tn),Gn=C(Mn),Yn=function e(t){function n(e){if(tl(e)&&!hf(e)&&!(e instanceof v)){if(e instanceof i)return e;if(fc.call(e,"__wrapped__"))return Ka(e)}return new i(e)}function r(){}function i(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=re}function v(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Re,this.__views__=[]}function C(){var e=new v(this.__wrapped__);return e.__actions__=Oi(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Oi(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Oi(this.__views__),e}function J(){if(this.__filtered__){var e=new v(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function ee(){var e=this.__wrapped__.value(),t=this.__dir__,n=hf(e),r=t<0,i=n?e.length:0,a=wa(0,i,this.__views__),o=a.start,s=a.end,l=s-o,u=r?s:o-1,c=this.__iteratees__,d=c.length,f=0,h=Vc(l,this.__takeCount__);if(!n||!r&&i==l&&h==l)return gi(e,this.__actions__);var p=[];e:for(;l--&&f<h;){u+=t;for(var m=-1,g=e[u];++m<d;){var y=c[m],v=y.iteratee,_=y.type,b=v(g);if(_==Pe)g=b;else if(!b){if(_==Ee)continue e;break e}}p[f++]=g}return p}function te(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ft(){this.__data__=Qc?Qc(null):{},this.size=0}function Jt(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Kt(e){var t=this.__data__;if(Qc){var n=t[e];return n===se?re:n}return fc.call(t,e)?t[e]:re}function Qt(e){var t=this.__data__;return Qc?t[e]!==re:fc.call(t,e)}function $t(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Qc&&t===re?se:t,this}function en(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function tn(){this.__data__=[],this.size=0}function nn(e){var t=this.__data__,n=Xn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Ac.call(t,n,1),--this.size,!0)}function rn(e){var t=this.__data__,n=Xn(t,e);return n<0?re:t[n][1]}function an(e){return Xn(this.__data__,e)>-1}function on(e,t){var n=this.__data__,r=Xn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function sn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function ln(){this.size=0,this.__data__={hash:new te,map:new(Xc||en),string:new te}}function un(e){var t=va(this,e).delete(e);return this.size-=t?1:0,t}function cn(e){return va(this,e).get(e)}function dn(e){return va(this,e).has(e)}function fn(e,t){var n=va(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function mn(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new sn;++t<n;)this.add(e[t])}function gn(e){return this.__data__.set(e,se),this}function yn(e){return this.__data__.has(e)}function vn(e){var t=this.__data__=new en(e);this.size=t.size}function kn(){this.__data__=new en,this.size=0}function Tn(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function Mn(e){return this.__data__.get(e)}function An(e){return this.__data__.has(e)}function En(e,t){var n=this.__data__;if(n instanceof en){var r=n.__data__;if(!Xc||r.length<ie-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new sn(r)}return n.set(e,t),this.size=n.size,this}function Pn(e,t){var n=hf(e),r=!n&&ff(e),i=!n&&!r&&mf(e),a=!n&&!r&&!i&&bf(e),o=n||r||i||a,s=o?I(e.length,ac):[],l=s.length;for(var u in e)!t&&!fc.call(e,u)||o&&("length"==u||i&&("offset"==u||"parent"==u)||a&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||Pa(u,l))||s.push(u);return s}function Ln(e){var t=e.length;return t?e[Kr(0,t-1)]:re}function On(e,t){return Ya(Oi(e),er(t,0,e.length))}function Rn(e){return Ya(Oi(e))}function Dn(e,t,n){(n===re||Us(e[t],n))&&(n!==re||t in e)||Qn(e,t,n)}function Hn(e,t,n){var r=e[t];fc.call(e,t)&&Us(r,n)&&(n!==re||t in e)||Qn(e,t,n)}function Xn(e,t){for(var n=e.length;n--;)if(Us(e[n][0],t))return n;return-1}function Zn(e,t,n,r){return cd(e,function(e,i,a){t(r,e,n(e),a)}),r}function Jn(e,t){return e&&zi(t,Dl(t),e)}function Kn(e,t){return e&&zi(t,Nl(t),e)}function Qn(e,t,n){"__proto__"==t&&Pc?Pc(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function $n(e,t){for(var n=-1,r=t.length,i=Qu(r),a=null==e;++n<r;)i[n]=a?re:Ol(e,t[n]);return i}function er(e,t,n){return e===e&&(n!==re&&(e=e<=n?e:n),t!==re&&(e=e>=t?e:t)),e}function tr(e,t,n,r,i,a){var o,l=t&ce,u=t&de,c=t&fe;if(n&&(o=i?n(e,r,i,a):n(e)),o!==re)return o;if(!el(e))return e;var d=hf(e);if(d){if(o=Ma(e),!l)return Oi(e,o)}else{var f=wd(e),h=f==Ge||f==Ye;if(mf(e))return ki(e,l);if(f==Ke||f==je||h&&!i){if(o=u||h?{}:Aa(e),!l)return u?Di(e,Kn(o,e)):Ri(e,Jn(o,e))}else{if(!wn[f])return i?e:{};o=Ca(e,f,l)}}a||(a=new vn);var p=a.get(e);if(p)return p;if(a.set(e,o),_f(e))return e.forEach(function(r){o.add(tr(r,t,n,r,e,a))}),o;if(yf(e))return e.forEach(function(r,i){o.set(i,tr(r,t,n,i,e,a))}),o;var m=c?u?pa:ha:u?Nl:Dl,g=d?re:m(e);return s(g||e,function(r,i){g&&(i=r,r=e[i]),Hn(o,i,tr(r,t,n,i,e,a))}),o}function nr(e){var t=Dl(e);return function(n){return rr(n,e,t)}}function rr(e,t,n){var r=n.length;if(null==e)return!r;for(e=rc(e);r--;){var i=n[r],a=t[i],o=e[i];if(o===re&&!(i in e)||!a(o))return!1}return!0}function ir(e,t,n){if("function"!=typeof e)throw new oc(oe);return Md(function(){e.apply(re,n)},t)}function ar(e,t,n,r){var i=-1,a=d,o=!0,s=e.length,l=[],u=t.length;if(!s)return l;n&&(t=h(t,O(n))),r?(a=f,o=!1):t.length>=ie&&(a=R,o=!1,t=new mn(t));e:for(;++i<s;){var c=e[i],p=null==n?c:n(c);if(c=r||0!==c?c:0,o&&p===p){for(var m=u;m--;)if(t[m]===p)continue e;l.push(c)}else a(t,p,r)||l.push(c)}return l}function or(e,t){var n=!0;return cd(e,function(e,r,i){return n=!!t(e,r,i)}),n}function sr(e,t,n){for(var r=-1,i=e.length;++r<i;){var a=e[r],o=t(a);if(null!=o&&(s===re?o===o&&!fl(o):n(o,s)))var s=o,l=a}return l}function lr(e,t,n,r){var i=e.length;for(n=vl(n),n<0&&(n=-n>i?0:i+n),r=r===re||r>i?i:vl(r),r<0&&(r+=i),r=n>r?0:_l(r);n<r;)e[n++]=t;return e}function ur(e,t){var n=[];return cd(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function cr(e,t,n,r,i){var a=-1,o=e.length;for(n||(n=Ea),i||(i=[]);++a<o;){var s=e[a];t>0&&n(s)?t>1?cr(s,t-1,n,r,i):p(i,s):r||(i[i.length]=s)}return i}function dr(e,t){return e&&fd(e,t,Dl)}function fr(e,t){return e&&hd(e,t,Dl)}function hr(e,t){return c(t,function(t){return Ks(e[t])})}function pr(e,t){t=xi(t,e);for(var n=0,r=t.length;null!=e&&n<r;)e=e[Xa(t[n++])];return n&&n==r?e:re}function mr(e,t,n){var r=t(e);return hf(e)?r:p(r,n(e))}function gr(e){return null==e?e===re?rt:Je:Ec&&Ec in rc(e)?xa(e):Ua(e)}function yr(e,t){return e>t}function vr(e,t){return null!=e&&fc.call(e,t)}function _r(e,t){return null!=e&&t in rc(e)}function br(e,t,n){return e>=Vc(t,n)&&e<Uc(t,n)}function xr(e,t,n){for(var r=n?f:d,i=e[0].length,a=e.length,o=a,s=Qu(a),l=1/0,u=[];o--;){var c=e[o];o&&t&&(c=h(c,O(t))),l=Vc(c.length,l),s[o]=!n&&(t||i>=120&&c.length>=120)?new mn(o&&c):re}c=e[0];var p=-1,m=s[0];e:for(;++p<i&&u.length<l;){var g=c[p],y=t?t(g):g;if(g=n||0!==g?g:0,!(m?R(m,y):r(u,y,n))){for(o=a;--o;){var v=s[o];if(!(v?R(v,y):r(e[o],y,n)))continue e}m&&m.push(y),u.push(g)}}return u}function wr(e,t,n,r){return dr(e,function(e,i,a){t(r,n(e),i,a)}),r}function kr(e,t,n){t=xi(t,e),e=Ha(e,t);var r=null==e?e:e[Xa(yo(t))];return null==r?re:a(r,e,n)}function Tr(e){return tl(e)&&gr(e)==je}function Mr(e){return tl(e)&&gr(e)==ot}function Ar(e){return tl(e)&&gr(e)==He}function Cr(e,t,n,r,i){return e===t||(null==e||null==t||!tl(e)&&!tl(t)?e!==e&&t!==t:Sr(e,t,n,r,Cr,i))}function Sr(e,t,n,r,i,a){var o=hf(e),s=hf(t),l=o?Be:wd(e),u=s?Be:wd(t);l=l==je?Ke:l,u=u==je?Ke:u;var c=l==Ke,d=u==Ke,f=l==u;if(f&&mf(e)){if(!mf(t))return!1;o=!0,c=!1}if(f&&!c)return a||(a=new vn),o||bf(e)?ua(e,t,n,r,i,a):ca(e,t,l,n,r,i,a);if(!(n&he)){var h=c&&fc.call(e,"__wrapped__"),p=d&&fc.call(t,"__wrapped__");if(h||p){var m=h?e.value():e,g=p?t.value():t;return a||(a=new vn),i(m,g,n,r,a)}}return!!f&&(a||(a=new vn),da(e,t,n,r,i,a))}function Er(e){return tl(e)&&wd(e)==Xe}function Pr(e,t,n,r){var i=n.length,a=i,o=!r;if(null==e)return!a;for(e=rc(e);i--;){var s=n[i];if(o&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<a;){s=n[i];var l=s[0],u=e[l],c=s[1];if(o&&s[2]){if(u===re&&!(l in e))return!1}else{var d=new vn;if(r)var f=r(u,c,l,e,t,d);if(!(f===re?Cr(c,u,he|pe,r,d):f))return!1}}return!0}function Ir(e){return!(!el(e)||Ra(e))&&(Ks(e)?vc:Wt).test(Za(e))}function Lr(e){return tl(e)&&gr(e)==$e}function Or(e){return tl(e)&&wd(e)==et}function zr(e){return tl(e)&&$s(e.length)&&!!xn[gr(e)]}function Rr(e){return"function"==typeof e?e:null==e?Au:"object"==typeof e?hf(e)?Ur(e[0],e[1]):Br(e):zu(e)}function Dr(e){if(!Da(e))return Bc(e);var t=[];for(var n in rc(e))fc.call(e,n)&&"constructor"!=n&&t.push(n);return t}function Nr(e){if(!el(e))return Ba(e);var t=Da(e),n=[];for(var r in e)("constructor"!=r||!t&&fc.call(e,r))&&n.push(r);return n}function Fr(e,t){return e<t}function jr(e,t){var n=-1,r=Vs(e)?Qu(e.length):[];return cd(e,function(e,i,a){r[++n]=t(e,i,a)}),r}function Br(e){var t=_a(e);return 1==t.length&&t[0][2]?Fa(t[0][0],t[0][1]):function(n){return n===e||Pr(n,e,t)}}function Ur(e,t){return La(e)&&Na(t)?Fa(Xa(e),t):function(n){var r=Ol(n,e);return r===re&&r===t?Rl(n,e):Cr(t,r,he|pe)}}function Vr(e,t,n,r,i){e!==t&&fd(t,function(a,o){if(el(a))i||(i=new vn),Hr(e,t,o,n,Vr,r,i);else{var s=r?r(Y(e,o),a,o+"",e,t,i):re;s===re&&(s=a),Dn(e,o,s)}},Nl)}function Hr(e,t,n,r,i,a,o){var s=Y(e,n),l=Y(t,n),u=o.get(l);if(u)return void Dn(e,n,u);var c=a?a(s,l,n+"",e,t,o):re,d=c===re;if(d){var f=hf(l),h=!f&&mf(l),p=!f&&!h&&bf(l);c=l,f||h||p?hf(s)?c=s:Hs(s)?c=Oi(s):h?(d=!1,c=ki(l,!0)):p?(d=!1,c=Si(l,!0)):c=[]:ul(l)||ff(l)?(c=s,ff(s)?c=xl(s):(!el(s)||r&&Ks(s))&&(c=Aa(l))):d=!1}d&&(o.set(l,c),i(c,l,r,a,o),o.delete(l)),Dn(e,n,c)}function Wr(e,t){var n=e.length;if(n)return t+=t<0?n:0,Pa(t,n)?e[t]:re}function qr(e,t,n){var r=-1;return t=h(t.length?t:[Au],O(ya())),E(jr(e,function(e,n,i){return{criteria:h(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return Pi(e,t,n)})}function Gr(e,t){return Yr(e,t,function(t,n){return Rl(e,n)})}function Yr(e,t,n){for(var r=-1,i=t.length,a={};++r<i;){var o=t[r],s=pr(e,o);n(s,o)&&ri(a,xi(o,e),s)}return a}function Xr(e){return function(t){return pr(t,e)}}function Zr(e,t,n,r){var i=r?k:w,a=-1,o=t.length,s=e;for(e===t&&(t=Oi(t)),n&&(s=h(e,O(n)));++a<o;)for(var l=0,u=t[a],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&Ac.call(s,l,1),Ac.call(e,l,1);return e}function Jr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==a){var a=i;Pa(i)?Ac.call(e,i,1):hi(e,i)}}return e}function Kr(e,t){return e+Rc(qc()*(t-e+1))}function Qr(e,t,n,r){for(var i=-1,a=Uc(zc((t-e)/(n||1)),0),o=Qu(a);a--;)o[r?a:++i]=e,e+=n;return o}function $r(e,t){var n="";if(!e||t<1||t>Le)return n;do{t%2&&(n+=e),(t=Rc(t/2))&&(e+=e)}while(t);return n}function ei(e,t){return Ad(Va(e,t,Au),e+"")}function ti(e){return Ln(Zl(e))}function ni(e,t){var n=Zl(e);return Ya(n,er(t,0,n.length))}function ri(e,t,n,r){if(!el(e))return e;t=xi(t,e);for(var i=-1,a=t.length,o=a-1,s=e;null!=s&&++i<a;){var l=Xa(t[i]),u=n;if(i!=o){var c=s[l];u=r?r(c,l,s):re,u===re&&(u=el(c)?c:Pa(t[i+1])?[]:{})}Hn(s,l,u),s=s[l]}return e}function ii(e){return Ya(Zl(e))}function ai(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),n=n>i?i:n,n<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var a=Qu(i);++r<i;)a[r]=e[r+t];return a}function oi(e,t){var n;return cd(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function si(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=Ne){for(;r<i;){var a=r+i>>>1,o=e[a];null!==o&&!fl(o)&&(n?o<=t:o<t)?r=a+1:i=a}return i}return li(e,t,Au,n)}function li(e,t,n,r){t=n(t);for(var i=0,a=null==e?0:e.length,o=t!==t,s=null===t,l=fl(t),u=t===re;i<a;){var c=Rc((i+a)/2),d=n(e[c]),f=d!==re,h=null===d,p=d===d,m=fl(d);if(o)var g=r||p;else g=u?p&&(r||f):s?p&&f&&(r||!h):l?p&&f&&!h&&(r||!m):!h&&!m&&(r?d<=t:d<t);g?i=c+1:a=c}return Vc(a,De)}function ui(e,t){for(var n=-1,r=e.length,i=0,a=[];++n<r;){var o=e[n],s=t?t(o):o;if(!n||!Us(s,l)){var l=s;a[i++]=0===o?0:o}}return a}function ci(e){return"number"==typeof e?e:fl(e)?ze:+e}function di(e){if("string"==typeof e)return e;if(hf(e))return h(e,di)+"";if(fl(e))return ld?ld.call(e):"";var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function fi(e,t,n){var r=-1,i=d,a=e.length,o=!0,s=[],l=s;if(n)o=!1,i=f;else if(a>=ie){var u=t?null:vd(e);if(u)return X(u);o=!1,i=R,l=new mn}else l=t?[]:s;e:for(;++r<a;){var c=e[r],h=t?t(c):c;if(c=n||0!==c?c:0,o&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue e;t&&l.push(h),s.push(c)}else i(l,h,n)||(l!==s&&l.push(h),s.push(c))}return s}function hi(e,t){return t=xi(t,e),null==(e=Ha(e,t))||delete e[Xa(yo(t))]}function pi(e,t,n,r){return ri(e,t,n(pr(e,t)),r)}function mi(e,t,n,r){for(var i=e.length,a=r?i:-1;(r?a--:++a<i)&&t(e[a],a,e););return n?ai(e,r?0:a,r?a+1:i):ai(e,r?a+1:0,r?i:a)}function gi(e,t){var n=e;return n instanceof v&&(n=n.value()),m(t,function(e,t){return t.func.apply(t.thisArg,p([e],t.args))},n)}function yi(e,t,n){var r=e.length;if(r<2)return r?fi(e[0]):[];for(var i=-1,a=Qu(r);++i<r;)for(var o=e[i],s=-1;++s<r;)s!=i&&(a[i]=ar(a[i]||o,e[s],t,n));return fi(cr(a,1),t,n)}function vi(e,t,n){for(var r=-1,i=e.length,a=t.length,o={};++r<i;){var s=r<a?t[r]:re;n(o,e[r],s)}return o}function _i(e){return Hs(e)?e:[]}function bi(e){return"function"==typeof e?e:Au}function xi(e,t){return hf(e)?e:La(e,t)?[e]:Cd(kl(e))}function wi(e,t,n){var r=e.length;return n=n===re?r:n,!t&&n>=r?e:ai(e,t,n)}function ki(e,t){if(t)return e.slice();var n=e.length,r=wc?wc(n):new e.constructor(n);return e.copy(r),r}function Ti(e){var t=new e.constructor(e.byteLength);return new xc(t).set(new xc(e)),t}function Mi(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Ai(e){var t=new e.constructor(e.source,Ut.exec(e));return t.lastIndex=e.lastIndex,t}function Ci(e){return sd?rc(sd.call(e)):{}}function Si(e,t){var n=t?Ti(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Ei(e,t){if(e!==t){var n=e!==re,r=null===e,i=e===e,a=fl(e),o=t!==re,s=null===t,l=t===t,u=fl(t);if(!s&&!u&&!a&&e>t||a&&o&&l&&!s&&!u||r&&o&&l||!n&&l||!i)return 1;if(!r&&!a&&!u&&e<t||u&&n&&i&&!r&&!a||s&&n&&i||!o&&i||!l)return-1}return 0}function Pi(e,t,n){for(var r=-1,i=e.criteria,a=t.criteria,o=i.length,s=n.length;++r<o;){var l=Ei(i[r],a[r]);if(l){if(r>=s)return l;return l*("desc"==n[r]?-1:1)}}return e.index-t.index}function Ii(e,t,n,r){for(var i=-1,a=e.length,o=n.length,s=-1,l=t.length,u=Uc(a-o,0),c=Qu(l+u),d=!r;++s<l;)c[s]=t[s];for(;++i<o;)(d||i<a)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function Li(e,t,n,r){for(var i=-1,a=e.length,o=-1,s=n.length,l=-1,u=t.length,c=Uc(a-s,0),d=Qu(c+u),f=!r;++i<c;)d[i]=e[i];for(var h=i;++l<u;)d[h+l]=t[l];for(;++o<s;)(f||i<a)&&(d[h+n[o]]=e[i++]);return d}function Oi(e,t){var n=-1,r=e.length;for(t||(t=Qu(r));++n<r;)t[n]=e[n];return t}function zi(e,t,n,r){var i=!n;n||(n={});for(var a=-1,o=t.length;++a<o;){var s=t[a],l=r?r(n[s],e[s],s,n,e):re;l===re&&(l=e[s]),i?Qn(n,s,l):Hn(n,s,l)}return n}function Ri(e,t){return zi(e,bd(e),t)}function Di(e,t){return zi(e,xd(e),t)}function Ni(e,t){return function(n,r){var i=hf(n)?o:Zn,a=t?t():{};return i(n,e,ya(r,2),a)}}function Fi(e){return ei(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:re,o=i>2?n[2]:re;for(a=e.length>3&&"function"==typeof a?(i--,a):re,o&&Ia(n[0],n[1],o)&&(a=i<3?re:a,i=1),t=rc(t);++r<i;){var s=n[r];s&&e(t,s,r,a)}return t})}function ji(e,t){return function(n,r){if(null==n)return n;if(!Vs(n))return e(n,r);for(var i=n.length,a=t?i:-1,o=rc(n);(t?a--:++a<i)&&!1!==r(o[a],a,o););return n}}function Bi(e){return function(t,n,r){for(var i=-1,a=rc(t),o=r(t),s=o.length;s--;){var l=o[e?s:++i];if(!1===n(a[l],l,a))break}return t}}function Ui(e,t,n){function r(){return(this&&this!==In&&this instanceof r?a:e).apply(i?n:this,arguments)}var i=t&me,a=Wi(e);return r}function Vi(e){return function(t){t=kl(t);var n=U(t)?$(t):re,r=n?n[0]:t.charAt(0),i=n?wi(n,1).join(""):t.slice(1);return r[e]()+i}}function Hi(e){return function(t){return m(xu(tu(t).replace(hn,"")),e,"")}}function Wi(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=ud(e.prototype),r=e.apply(n,t);return el(r)?r:n}}function qi(e,t,n){function r(){for(var o=arguments.length,s=Qu(o),l=o,u=ga(r);l--;)s[l]=arguments[l];var c=o<3&&s[0]!==u&&s[o-1]!==u?[]:G(s,u);return(o-=c.length)<n?na(e,t,Xi,r.placeholder,re,s,c,re,re,n-o):a(this&&this!==In&&this instanceof r?i:e,this,s)}var i=Wi(e);return r}function Gi(e){return function(t,n,r){var i=rc(t);if(!Vs(t)){var a=ya(n,3);t=Dl(t),n=function(e){return a(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[a?t[o]:o]:re}}function Yi(e){return fa(function(t){var n=t.length,r=n,a=i.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new oc(oe);if(a&&!s&&"wrapper"==ma(o))var s=new i([],!0)}for(r=s?r:n;++r<n;){o=t[r];var l=ma(o),u="wrapper"==l?_d(o):re;s=u&&za(u[0])&&u[1]==(we|ve|be|ke)&&!u[4].length&&1==u[9]?s[ma(u[0])].apply(s,u[3]):1==o.length&&za(o)?s[l]():s.thru(o)}return function(){var e=arguments,r=e[0];if(s&&1==e.length&&hf(r))return s.plant(r).value();for(var i=0,a=n?t[i].apply(this,e):r;++i<n;)a=t[i].call(this,a);return a}})}function Xi(e,t,n,r,i,a,o,s,l,u){function c(){for(var y=arguments.length,v=Qu(y),_=y;_--;)v[_]=arguments[_];if(p)var b=ga(c),x=F(v,b);if(r&&(v=Ii(v,r,i,p)),a&&(v=Li(v,a,o,p)),y-=x,p&&y<u){var w=G(v,b);return na(e,t,Xi,c.placeholder,n,v,w,s,l,u-y)}var k=f?n:this,T=h?k[e]:e;return y=v.length,s?v=Wa(v,s):m&&y>1&&v.reverse(),d&&l<y&&(v.length=l),this&&this!==In&&this instanceof c&&(T=g||Wi(T)),T.apply(k,v)}var d=t&we,f=t&me,h=t&ge,p=t&(ve|_e),m=t&Te,g=h?re:Wi(e);return c}function Zi(e,t){return function(n,r){return wr(n,e,t(r),{})}}function Ji(e,t){return function(n,r){var i;if(n===re&&r===re)return t;if(n!==re&&(i=n),r!==re){if(i===re)return r;"string"==typeof n||"string"==typeof r?(n=di(n),r=di(r)):(n=ci(n),r=ci(r)),i=e(n,r)}return i}}function Ki(e){return fa(function(t){return t=h(t,O(ya())),ei(function(n){var r=this;return e(t,function(e){return a(e,r,n)})})})}function Qi(e,t){t=t===re?" ":di(t);var n=t.length;if(n<2)return n?$r(t,e):t;var r=$r(t,zc(e/Q(t)));return U(t)?wi($(r),0,e).join(""):r.slice(0,e)}function $i(e,t,n,r){function i(){for(var t=-1,l=arguments.length,u=-1,c=r.length,d=Qu(c+l),f=this&&this!==In&&this instanceof i?s:e;++u<c;)d[u]=r[u];for(;l--;)d[u++]=arguments[++t];return a(f,o?n:this,d)}var o=t&me,s=Wi(e);return i}function ea(e){return function(t,n,r){return r&&"number"!=typeof r&&Ia(t,n,r)&&(n=r=re),t=yl(t),n===re?(n=t,t=0):n=yl(n),r=r===re?t<n?1:-1:yl(r),Qr(t,n,r,e)}}function ta(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=bl(t),n=bl(n)),e(t,n)}}function na(e,t,n,r,i,a,o,s,l,u){var c=t&ve,d=c?o:re,f=c?re:o,h=c?a:re,p=c?re:a;t|=c?be:xe,(t&=~(c?xe:be))&ye||(t&=~(me|ge));var m=[e,t,i,h,d,p,f,s,l,u],g=n.apply(re,m);return za(e)&&Td(g,m),g.placeholder=r,qa(g,e,t)}function ra(e){var t=nc[e];return function(e,n){if(e=bl(e),n=null==n?0:Vc(vl(n),292)){var r=(kl(e)+"e").split("e");return r=(kl(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}function ia(e){return function(t){var n=wd(t);return n==Xe?W(t):n==et?Z(t):L(t,e(t))}}function aa(e,t,n,r,i,a,o,s){var l=t&ge;if(!l&&"function"!=typeof e)throw new oc(oe);var u=r?r.length:0;if(u||(t&=~(be|xe),r=i=re),o=o===re?o:Uc(vl(o),0),s=s===re?s:vl(s),u-=i?i.length:0,t&xe){var c=r,d=i;r=i=re}var f=l?re:_d(e),h=[e,t,n,r,i,c,d,a,o,s];if(f&&ja(h,f),e=h[0],t=h[1],n=h[2],r=h[3],i=h[4],s=h[9]=h[9]===re?l?0:e.length:Uc(h[9]-u,0),!s&&t&(ve|_e)&&(t&=~(ve|_e)),t&&t!=me)p=t==ve||t==_e?qi(e,t,s):t!=be&&t!=(me|be)||i.length?Xi.apply(re,h):$i(e,t,n,r);else var p=Ui(e,t,n);return qa((f?pd:Td)(p,h),e,t)}function oa(e,t,n,r){return e===re||Us(e,uc[n])&&!fc.call(r,n)?t:e}function sa(e,t,n,r,i,a){return el(e)&&el(t)&&(a.set(t,e),Vr(e,t,re,sa,a),a.delete(t)),e}function la(e){return ul(e)?re:e}function ua(e,t,n,r,i,a){var o=n&he,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=a.get(e);if(u&&a.get(t))return u==t;var c=-1,d=!0,f=n&pe?new mn:re;for(a.set(e,t),a.set(t,e);++c<s;){var h=e[c],p=t[c];if(r)var m=o?r(p,h,c,t,e,a):r(h,p,c,e,t,a);if(m!==re){if(m)continue;d=!1;break}if(f){if(!y(t,function(e,t){if(!R(f,t)&&(h===e||i(h,e,n,r,a)))return f.push(t)})){d=!1;break}}else if(h!==p&&!i(h,p,n,r,a)){d=!1;break}}return a.delete(e),a.delete(t),d}function ca(e,t,n,r,i,a,o){switch(n){case st:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case ot:return!(e.byteLength!=t.byteLength||!a(new xc(e),new xc(t)));case Ve:case He:case Ze:return Us(+e,+t);case qe:return e.name==t.name&&e.message==t.message;case $e:case tt:return e==t+"";case Xe:var s=W;case et:var l=r&he;if(s||(s=X),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;r|=pe,o.set(e,t);var c=ua(s(e),s(t),r,i,a,o);return o.delete(e),c;case nt:if(sd)return sd.call(e)==sd.call(t)}return!1}function da(e,t,n,r,i,a){var o=n&he,s=ha(e),l=s.length;if(l!=ha(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:fc.call(t,c)))return!1}var d=a.get(e);if(d&&a.get(t))return d==t;var f=!0;a.set(e,t),a.set(t,e);for(var h=o;++u<l;){c=s[u];var p=e[c],m=t[c];if(r)var g=o?r(m,p,c,t,e,a):r(p,m,c,e,t,a);if(!(g===re?p===m||i(p,m,n,r,a):g)){f=!1;break}h||(h="constructor"==c)}if(f&&!h){var y=e.constructor,v=t.constructor;y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v)&&(f=!1)}return a.delete(e),a.delete(t),f}function fa(e){return Ad(Va(e,re,lo),e+"")}function ha(e){return mr(e,Dl,bd)}function pa(e){return mr(e,Nl,xd)}function ma(e){for(var t=e.name+"",n=ed[t],r=fc.call(ed,t)?n.length:0;r--;){var i=n[r],a=i.func;if(null==a||a==e)return i.name}return t}function ga(e){return(fc.call(n,"placeholder")?n:e).placeholder}function ya(){var e=n.iteratee||Cu;return e=e===Cu?Rr:e,arguments.length?e(arguments[0],arguments[1]):e}function va(e,t){var n=e.__data__;return Oa(t)?n["string"==typeof t?"string":"hash"]:n.map}function _a(e){for(var t=Dl(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,Na(i)]}return t}function ba(e,t){var n=B(e,t);return Ir(n)?n:re}function xa(e){var t=fc.call(e,Ec),n=e[Ec];try{e[Ec]=re;var r=!0}catch(e){}var i=mc.call(e);return r&&(t?e[Ec]=n:delete e[Ec]),i}function wa(e,t,n){for(var r=-1,i=n.length;++r<i;){var a=n[r],o=a.size;switch(a.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Vc(t,e+o);break;case"takeRight":e=Uc(e,t-o)}}return{start:e,end:t}}function ka(e){var t=e.match(Dt);return t?t[1].split(Nt):[]}function Ta(e,t,n){t=xi(t,e);for(var r=-1,i=t.length,a=!1;++r<i;){var o=Xa(t[r]);if(!(a=null!=e&&n(e,o)))break;e=e[o]}return a||++r!=i?a:!!(i=null==e?0:e.length)&&$s(i)&&Pa(o,i)&&(hf(e)||ff(e))}function Ma(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&fc.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Aa(e){return"function"!=typeof e.constructor||Da(e)?{}:ud(kc(e))}function Ca(e,t,n){var r=e.constructor;switch(t){case ot:return Ti(e);case Ve:case He:return new r(+e);case st:return Mi(e,n);case lt:case ut:case ct:case dt:case ft:case ht:case pt:case mt:case gt:return Si(e,n);case Xe:return new r;case Ze:case tt:return new r(e);case $e:return Ai(e);case et:return new r;case nt:return Ci(e)}}function Sa(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Rt,"{\n/* [wrapped with "+t+"] */\n")}function Ea(e){return hf(e)||ff(e)||!!(Cc&&e&&e[Cc])}function Pa(e,t){var n=typeof e;return!!(t=null==t?Le:t)&&("number"==n||"symbol"!=n&&Gt.test(e))&&e>-1&&e%1==0&&e<t}function Ia(e,t,n){if(!el(n))return!1;var r=typeof t;return!!("number"==r?Vs(n)&&Pa(t,n.length):"string"==r&&t in n)&&Us(n[t],e)}function La(e,t){if(hf(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!fl(e))||(St.test(e)||!Ct.test(e)||null!=t&&e in rc(t))}function Oa(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function za(e){var t=ma(e),r=n[t];if("function"!=typeof r||!(t in v.prototype))return!1;if(e===r)return!0;var i=_d(r);return!!i&&e===i[0]}function Ra(e){return!!pc&&pc in e}function Da(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||uc)}function Na(e){return e===e&&!el(e)}function Fa(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==re||e in rc(n)))}}function ja(e,t){var n=e[1],r=t[1],i=n|r,a=i<(me|ge|we),o=r==we&&n==ve||r==we&&n==ke&&e[7].length<=t[8]||r==(we|ke)&&t[7].length<=t[8]&&n==ve;if(!a&&!o)return e;r&me&&(e[2]=t[2],i|=n&me?0:ye);var s=t[3];if(s){var l=e[3];e[3]=l?Ii(l,s,t[4]):s,e[4]=l?G(e[3],ue):t[4]}return s=t[5],s&&(l=e[5],e[5]=l?Li(l,s,t[6]):s,e[6]=l?G(e[5],ue):t[6]),s=t[7],s&&(e[7]=s),r&we&&(e[8]=null==e[8]?t[8]:Vc(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Ba(e){var t=[];if(null!=e)for(var n in rc(e))t.push(n);return t}function Ua(e){return mc.call(e)}function Va(e,t,n){return t=Uc(t===re?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Uc(r.length-t,0),s=Qu(o);++i<o;)s[i]=r[t+i];i=-1;for(var l=Qu(t+1);++i<t;)l[i]=r[i];return l[t]=n(s),a(e,this,l)}}function Ha(e,t){return t.length<2?e:pr(e,ai(t,0,-1))}function Wa(e,t){for(var n=e.length,r=Vc(t.length,n),i=Oi(e);r--;){var a=t[r];e[r]=Pa(a,n)?i[a]:re}return e}function qa(e,t,n){var r=t+"";return Ad(e,Sa(r,Ja(ka(r),n)))}function Ga(e){var t=0,n=0;return function(){var r=Hc(),i=Se-(r-n);if(n=r,i>0){if(++t>=Ce)return arguments[0]}else t=0;return e.apply(re,arguments)}}function Ya(e,t){var n=-1,r=e.length,i=r-1;for(t=t===re?r:t;++n<t;){var a=Kr(n,i),o=e[a];e[a]=e[n],e[n]=o}return e.length=t,e}function Xa(e){if("string"==typeof e||fl(e))return e;var t=e+"";return"0"==t&&1/e==-Ie?"-0":t}function Za(e){if(null!=e){try{return dc.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ja(e,t){return s(Fe,function(n){var r="_."+n[0];t&n[1]&&!d(e,r)&&e.push(r)}),e.sort()}function Ka(e){if(e instanceof v)return e.clone();var t=new i(e.__wrapped__,e.__chain__);return t.__actions__=Oi(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Qa(e,t,n){t=(n?Ia(e,t,n):t===re)?1:Uc(vl(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,a=0,o=Qu(zc(r/t));i<r;)o[a++]=ai(e,i,i+=t);return o}function $a(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var a=e[t];a&&(i[r++]=a)}return i}function eo(){var e=arguments.length;if(!e)return[];for(var t=Qu(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return p(hf(n)?Oi(n):[n],cr(t,1))}function to(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:vl(t),ai(e,t<0?0:t,r)):[]}function no(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:vl(t),t=r-t,ai(e,0,t<0?0:t)):[]}function ro(e,t){return e&&e.length?mi(e,ya(t,3),!0,!0):[]}function io(e,t){return e&&e.length?mi(e,ya(t,3),!0):[]}function ao(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Ia(e,t,n)&&(n=0,r=i),lr(e,t,n,r)):[]}function oo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vl(n);return i<0&&(i=Uc(r+i,0)),x(e,ya(t,3),i)}function so(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return n!==re&&(i=vl(n),i=n<0?Uc(r+i,0):Vc(i,r-1)),x(e,ya(t,3),i,!0)}function lo(e){return(null==e?0:e.length)?cr(e,1):[]}function uo(e){return(null==e?0:e.length)?cr(e,Ie):[]}function co(e,t){return(null==e?0:e.length)?(t=t===re?1:vl(t),cr(e,t)):[]}function fo(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function ho(e){return e&&e.length?e[0]:re}function po(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:vl(n);return i<0&&(i=Uc(r+i,0)),w(e,t,i)}function mo(e){return(null==e?0:e.length)?ai(e,0,-1):[]}function go(e,t){return null==e?"":jc.call(e,t)}function yo(e){var t=null==e?0:e.length;return t?e[t-1]:re}function vo(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return n!==re&&(i=vl(n),i=i<0?Uc(r+i,0):Vc(i,r-1)),t===t?K(e,t,i):x(e,T,i,!0)}function _o(e,t){return e&&e.length?Wr(e,vl(t)):re}function bo(e,t){return e&&e.length&&t&&t.length?Zr(e,t):e}function xo(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,ya(n,2)):e}function wo(e,t,n){return e&&e.length&&t&&t.length?Zr(e,t,re,n):e}function ko(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],a=e.length;for(t=ya(t,3);++r<a;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Jr(e,i),n}function To(e){return null==e?e:Gc.call(e)}function Mo(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Ia(e,t,n)?(t=0,n=r):(t=null==t?0:vl(t),n=n===re?r:vl(n)),ai(e,t,n)):[]}function Ao(e,t){return si(e,t)}function Co(e,t,n){return li(e,t,ya(n,2))}function So(e,t){var n=null==e?0:e.length;if(n){var r=si(e,t);if(r<n&&Us(e[r],t))return r}return-1}function Eo(e,t){return si(e,t,!0)}function Po(e,t,n){return li(e,t,ya(n,2),!0)}function Io(e,t){if(null==e?0:e.length){var n=si(e,t,!0)-1;if(Us(e[n],t))return n}return-1}function Lo(e){return e&&e.length?ui(e):[]}function Oo(e,t){return e&&e.length?ui(e,ya(t,2)):[]}function zo(e){var t=null==e?0:e.length;return t?ai(e,1,t):[]}function Ro(e,t,n){return e&&e.length?(t=n||t===re?1:vl(t),ai(e,0,t<0?0:t)):[]}function Do(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===re?1:vl(t),t=r-t,ai(e,t<0?0:t,r)):[]}function No(e,t){return e&&e.length?mi(e,ya(t,3),!1,!0):[]}function Fo(e,t){return e&&e.length?mi(e,ya(t,3)):[]}function jo(e){return e&&e.length?fi(e):[]}function Bo(e,t){return e&&e.length?fi(e,ya(t,2)):[]}function Uo(e,t){return t="function"==typeof t?t:re,e&&e.length?fi(e,re,t):[]}function Vo(e){if(!e||!e.length)return[];var t=0;return e=c(e,function(e){if(Hs(e))return t=Uc(e.length,t),!0}),I(t,function(t){return h(e,A(t))})}function Ho(e,t){if(!e||!e.length)return[];var n=Vo(e);return null==t?n:h(n,function(e){return a(t,re,e)})}function Wo(e,t){return vi(e||[],t||[],Hn)}function qo(e,t){return vi(e||[],t||[],ri)}function Go(e){var t=n(e);return t.__chain__=!0,t}function Yo(e,t){return t(e),e}function Xo(e,t){return t(e)}function Zo(){return Go(this)}function Jo(){return new i(this.value(),this.__chain__)}function Ko(){this.__values__===re&&(this.__values__=gl(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?re:this.__values__[this.__index__++]}}function Qo(){return this}function $o(e){for(var t,n=this;n instanceof r;){var i=Ka(n);i.__index__=0,i.__values__=re,t?a.__wrapped__=i:t=i;var a=i;n=n.__wrapped__}return a.__wrapped__=e,t}function es(){var e=this.__wrapped__;if(e instanceof v){var t=e;return this.__actions__.length&&(t=new v(this)),t=t.reverse(),t.__actions__.push({func:Xo,args:[To],thisArg:re}),new i(t,this.__chain__)}return this.thru(To)}function ts(){return gi(this.__wrapped__,this.__actions__)}function ns(e,t,n){var r=hf(e)?u:or;return n&&Ia(e,t,n)&&(t=re),r(e,ya(t,3))}function rs(e,t){return(hf(e)?c:ur)(e,ya(t,3))}function is(e,t){return cr(cs(e,t),1)}function as(e,t){return cr(cs(e,t),Ie)}function os(e,t,n){return n=n===re?1:vl(n),cr(cs(e,t),n)}function ss(e,t){return(hf(e)?s:cd)(e,ya(t,3))}function ls(e,t){return(hf(e)?l:dd)(e,ya(t,3))}function us(e,t,n,r){e=Vs(e)?e:Zl(e),n=n&&!r?vl(n):0;var i=e.length;return n<0&&(n=Uc(i+n,0)),dl(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&w(e,t,n)>-1}function cs(e,t){return(hf(e)?h:jr)(e,ya(t,3))}function ds(e,t,n,r){return null==e?[]:(hf(t)||(t=null==t?[]:[t]),n=r?re:n,hf(n)||(n=null==n?[]:[n]),qr(e,t,n))}function fs(e,t,n){var r=hf(e)?m:S,i=arguments.length<3;return r(e,ya(t,4),n,i,cd)}function hs(e,t,n){var r=hf(e)?g:S,i=arguments.length<3;return r(e,ya(t,4),n,i,dd)}function ps(e,t){return(hf(e)?c:ur)(e,Ss(ya(t,3)))}function ms(e){return(hf(e)?Ln:ti)(e)}function gs(e,t,n){return t=(n?Ia(e,t,n):t===re)?1:vl(t),(hf(e)?On:ni)(e,t)}function ys(e){return(hf(e)?Rn:ii)(e)}function vs(e){if(null==e)return 0;if(Vs(e))return dl(e)?Q(e):e.length;var t=wd(e);return t==Xe||t==et?e.size:Dr(e).length}function _s(e,t,n){var r=hf(e)?y:oi;return n&&Ia(e,t,n)&&(t=re),r(e,ya(t,3))}function bs(e,t){if("function"!=typeof t)throw new oc(oe);return e=vl(e),function(){if(--e<1)return t.apply(this,arguments)}}function xs(e,t,n){return t=n?re:t,t=e&&null==t?e.length:t,aa(e,we,re,re,re,re,t)}function ws(e,t){var n;if("function"!=typeof t)throw new oc(oe);return e=vl(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=re),n}}function ks(e,t,n){t=n?re:t;var r=aa(e,ve,re,re,re,re,re,t);return r.placeholder=ks.placeholder,r}function Ts(e,t,n){t=n?re:t;var r=aa(e,_e,re,re,re,re,re,t);return r.placeholder=Ts.placeholder,r}function Ms(e,t,n){function r(t){var n=f,r=h;return f=h=re,v=t,m=e.apply(r,n)}function i(e){return v=e,g=Md(s,t),_?r(e):m}function a(e){var n=e-y,r=e-v,i=t-n;return b?Vc(i,p-r):i}function o(e){var n=e-y,r=e-v;return y===re||n>=t||n<0||b&&r>=p}function s(){var e=ef();if(o(e))return l(e);g=Md(s,a(e))}function l(e){return g=re,x&&f?r(e):(f=h=re,m)}function u(){g!==re&&yd(g),v=0,f=y=h=g=re}function c(){return g===re?m:l(ef())}function d(){var e=ef(),n=o(e);if(f=arguments,h=this,y=e,n){if(g===re)return i(y);if(b)return g=Md(s,t),r(y)}return g===re&&(g=Md(s,t)),m}var f,h,p,m,g,y,v=0,_=!1,b=!1,x=!0;if("function"!=typeof e)throw new oc(oe);return t=bl(t)||0,el(n)&&(_=!!n.leading,b="maxWait"in n,p=b?Uc(bl(n.maxWait)||0,t):p,x="trailing"in n?!!n.trailing:x),d.cancel=u,d.flush=c,d}function As(e){return aa(e,Te)}function Cs(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new oc(oe);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],a=n.cache;if(a.has(i))return a.get(i);var o=e.apply(this,r);return n.cache=a.set(i,o)||a,o};return n.cache=new(Cs.Cache||sn),n}function Ss(e){if("function"!=typeof e)throw new oc(oe);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function Es(e){return ws(2,e)}function Ps(e,t){if("function"!=typeof e)throw new oc(oe);return t=t===re?t:vl(t),ei(e,t)}function Is(e,t){if("function"!=typeof e)throw new oc(oe);return t=null==t?0:Uc(vl(t),0),ei(function(n){var r=n[t],i=wi(n,0,t);return r&&p(i,r),a(e,this,i)})}function Ls(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new oc(oe);return el(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Ms(e,t,{leading:r,maxWait:t,trailing:i})}function Os(e){return xs(e,1)}function zs(e,t){return sf(bi(t),e)}function Rs(){if(!arguments.length)return[];var e=arguments[0];return hf(e)?e:[e]}function Ds(e){return tr(e,fe)}function Ns(e,t){return t="function"==typeof t?t:re,tr(e,fe,t)}function Fs(e){return tr(e,ce|fe)}function js(e,t){return t="function"==typeof t?t:re,tr(e,ce|fe,t)}function Bs(e,t){return null==t||rr(e,t,Dl(t))}function Us(e,t){return e===t||e!==e&&t!==t}function Vs(e){return null!=e&&$s(e.length)&&!Ks(e)}function Hs(e){return tl(e)&&Vs(e)}function Ws(e){return!0===e||!1===e||tl(e)&&gr(e)==Ve}function qs(e){return tl(e)&&1===e.nodeType&&!ul(e)}function Gs(e){if(null==e)return!0;if(Vs(e)&&(hf(e)||"string"==typeof e||"function"==typeof e.splice||mf(e)||bf(e)||ff(e)))return!e.length;var t=wd(e);if(t==Xe||t==et)return!e.size;if(Da(e))return!Dr(e).length;for(var n in e)if(fc.call(e,n))return!1;return!0}function Ys(e,t){return Cr(e,t)}function Xs(e,t,n){n="function"==typeof n?n:re;var r=n?n(e,t):re;return r===re?Cr(e,t,re,n):!!r}function Zs(e){if(!tl(e))return!1;var t=gr(e);return t==qe||t==We||"string"==typeof e.message&&"string"==typeof e.name&&!ul(e)}function Js(e){return"number"==typeof e&&Fc(e)}function Ks(e){if(!el(e))return!1;var t=gr(e);return t==Ge||t==Ye||t==Ue||t==Qe}function Qs(e){return"number"==typeof e&&e==vl(e)}function $s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=Le}function el(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function tl(e){return null!=e&&"object"==typeof e}function nl(e,t){return e===t||Pr(e,t,_a(t))}function rl(e,t,n){return n="function"==typeof n?n:re,Pr(e,t,_a(t),n)}function il(e){return ll(e)&&e!=+e}function al(e){if(kd(e))throw new ec(ae);return Ir(e)}function ol(e){return null===e}function sl(e){return null==e}function ll(e){return"number"==typeof e||tl(e)&&gr(e)==Ze}function ul(e){if(!tl(e)||gr(e)!=Ke)return!1;var t=kc(e);if(null===t)return!0;var n=fc.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&dc.call(n)==gc}function cl(e){return Qs(e)&&e>=-Le&&e<=Le}function dl(e){return"string"==typeof e||!hf(e)&&tl(e)&&gr(e)==tt}function fl(e){return"symbol"==typeof e||tl(e)&&gr(e)==nt}function hl(e){return e===re}function pl(e){return tl(e)&&wd(e)==it}function ml(e){return tl(e)&&gr(e)==at}function gl(e){if(!e)return[];if(Vs(e))return dl(e)?$(e):Oi(e);if(Sc&&e[Sc])return H(e[Sc]());var t=wd(e);return(t==Xe?W:t==et?X:Zl)(e)}function yl(e){if(!e)return 0===e?e:0;if((e=bl(e))===Ie||e===-Ie){return(e<0?-1:1)*Oe}return e===e?e:0}function vl(e){var t=yl(e),n=t%1;return t===t?n?t-n:t:0}function _l(e){return e?er(vl(e),0,Re):0}function bl(e){if("number"==typeof e)return e;if(fl(e))return ze;if(el(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=el(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(Lt,"");var n=Ht.test(e);return n||qt.test(e)?Sn(e.slice(2),n?2:8):Vt.test(e)?ze:+e}function xl(e){return zi(e,Nl(e))}function wl(e){return e?er(vl(e),-Le,Le):0===e?e:0}function kl(e){return null==e?"":di(e)}function Tl(e,t){var n=ud(e);return null==t?n:Jn(n,t)}function Ml(e,t){return b(e,ya(t,3),dr)}function Al(e,t){return b(e,ya(t,3),fr)}function Cl(e,t){return null==e?e:fd(e,ya(t,3),Nl)}function Sl(e,t){return null==e?e:hd(e,ya(t,3),Nl)}function El(e,t){return e&&dr(e,ya(t,3))}function Pl(e,t){return e&&fr(e,ya(t,3))}function Il(e){return null==e?[]:hr(e,Dl(e))}function Ll(e){return null==e?[]:hr(e,Nl(e))}function Ol(e,t,n){var r=null==e?re:pr(e,t);return r===re?n:r}function zl(e,t){return null!=e&&Ta(e,t,vr)}function Rl(e,t){return null!=e&&Ta(e,t,_r)}function Dl(e){return Vs(e)?Pn(e):Dr(e)}function Nl(e){return Vs(e)?Pn(e,!0):Nr(e)}function Fl(e,t){var n={};return t=ya(t,3),dr(e,function(e,r,i){Qn(n,t(e,r,i),e)}),n}function jl(e,t){var n={};return t=ya(t,3),dr(e,function(e,r,i){Qn(n,r,t(e,r,i))}),n}function Bl(e,t){return Ul(e,Ss(ya(t)))}function Ul(e,t){if(null==e)return{};var n=h(pa(e),function(e){return[e]});return t=ya(t),Yr(e,n,function(e,n){return t(e,n[0])})}function Vl(e,t,n){t=xi(t,e);var r=-1,i=t.length;for(i||(i=1,e=re);++r<i;){var a=null==e?re:e[Xa(t[r])];a===re&&(r=i,a=n),e=Ks(a)?a.call(e):a}return e}function Hl(e,t,n){return null==e?e:ri(e,t,n)}function Wl(e,t,n,r){return r="function"==typeof r?r:re,null==e?e:ri(e,t,n,r)}function ql(e,t,n){var r=hf(e),i=r||mf(e)||bf(e);if(t=ya(t,4),null==n){var a=e&&e.constructor;n=i?r?new a:[]:el(e)&&Ks(a)?ud(kc(e)):{}}return(i?s:dr)(e,function(e,r,i){return t(n,e,r,i)}),n}function Gl(e,t){return null==e||hi(e,t)}function Yl(e,t,n){return null==e?e:pi(e,t,bi(n))}function Xl(e,t,n,r){return r="function"==typeof r?r:re,null==e?e:pi(e,t,bi(n),r)}function Zl(e){return null==e?[]:z(e,Dl(e))}function Jl(e){return null==e?[]:z(e,Nl(e))}function Kl(e,t,n){return n===re&&(n=t,t=re),n!==re&&(n=bl(n),n=n===n?n:0),t!==re&&(t=bl(t),t=t===t?t:0),er(bl(e),t,n)}function Ql(e,t,n){return t=yl(t),n===re?(n=t,t=0):n=yl(n),e=bl(e),br(e,t,n)}function $l(e,t,n){if(n&&"boolean"!=typeof n&&Ia(e,t,n)&&(t=n=re),n===re&&("boolean"==typeof t?(n=t,t=re):"boolean"==typeof e&&(n=e,e=re)),e===re&&t===re?(e=0,t=1):(e=yl(e),t===re?(t=e,e=0):t=yl(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=qc();return Vc(e+i*(t-e+Cn("1e-"+((i+"").length-1))),t)}return Kr(e,t)}function eu(e){return Gf(kl(e).toLowerCase())}function tu(e){return(e=kl(e))&&e.replace(Yt,Wn).replace(pn,"")}function nu(e,t,n){e=kl(e),t=di(t);var r=e.length;n=n===re?r:er(vl(n),0,r);var i=n;return(n-=t.length)>=0&&e.slice(n,i)==t}function ru(e){return e=kl(e),e&&kt.test(e)?e.replace(xt,qn):e}function iu(e){return e=kl(e),e&&It.test(e)?e.replace(Pt,"\\$&"):e}function au(e,t,n){e=kl(e),t=vl(t);var r=t?Q(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return Qi(Rc(i),n)+e+Qi(zc(i),n)}function ou(e,t,n){e=kl(e),t=vl(t);var r=t?Q(e):0;return t&&r<t?e+Qi(t-r,n):e}function su(e,t,n){e=kl(e),t=vl(t);var r=t?Q(e):0;return t&&r<t?Qi(t-r,n)+e:e}function lu(e,t,n){return n||null==t?t=0:t&&(t=+t),Wc(kl(e).replace(Ot,""),t||0)}function uu(e,t,n){return t=(n?Ia(e,t,n):t===re)?1:vl(t),$r(kl(e),t)}function cu(){var e=arguments,t=kl(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function du(e,t,n){return n&&"number"!=typeof n&&Ia(e,t,n)&&(t=n=re),(n=n===re?Re:n>>>0)?(e=kl(e),e&&("string"==typeof t||null!=t&&!vf(t))&&!(t=di(t))&&U(e)?wi($(e),0,n):e.split(t,n)):[]}function fu(e,t,n){return e=kl(e),n=null==n?0:er(vl(n),0,e.length),t=di(t),e.slice(n,n+t.length)==t}function hu(e,t,r){var i=n.templateSettings;r&&Ia(e,t,r)&&(t=re),e=kl(e),t=Mf({},t,i,oa);var a,o,s=Mf({},t.imports,i.imports,oa),l=Dl(s),u=z(s,l),c=0,d=t.interpolate||Xt,f="__p += '",h=ic((t.escape||Xt).source+"|"+d.source+"|"+(d===At?Bt:Xt).source+"|"+(t.evaluate||Xt).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++bn+"]")+"\n";e.replace(h,function(t,n,r,i,s,l){return r||(r=i),f+=e.slice(c,l).replace(Zt,j),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=l+t.length,t}),f+="';\n";var m=t.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(yt,""):f).replace(vt,"$1").replace(_t,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var g=Yf(function(){return tc(l,p+"return "+f).apply(re,u)});if(g.source=f,Zs(g))throw g;return g}function pu(e){return kl(e).toLowerCase()}function mu(e){return kl(e).toUpperCase()}function gu(e,t,n){if((e=kl(e))&&(n||t===re))return e.replace(Lt,"");if(!e||!(t=di(t)))return e;var r=$(e),i=$(t);return wi(r,D(r,i),N(r,i)+1).join("")}function yu(e,t,n){if((e=kl(e))&&(n||t===re))return e.replace(zt,"");if(!e||!(t=di(t)))return e;var r=$(e);return wi(r,0,N(r,$(t))+1).join("")}function vu(e,t,n){if((e=kl(e))&&(n||t===re))return e.replace(Ot,"");if(!e||!(t=di(t)))return e;var r=$(e);return wi(r,D(r,$(t))).join("")}function _u(e,t){var n=Me,r=Ae;if(el(t)){var i="separator"in t?t.separator:i;n="length"in t?vl(t.length):n,r="omission"in t?di(t.omission):r}e=kl(e);var a=e.length;if(U(e)){var o=$(e);a=o.length}if(n>=a)return e;var s=n-Q(r);if(s<1)return r;var l=o?wi(o,0,s).join(""):e.slice(0,s);if(i===re)return l+r;if(o&&(s+=l.length-s),vf(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=ic(i.source,kl(Ut.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var d=u.index;l=l.slice(0,d===re?s:d)}}else if(e.indexOf(di(i),s)!=s){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+r}function bu(e){return e=kl(e),e&&wt.test(e)?e.replace(bt,Gn):e}function xu(e,t,n){return e=kl(e),t=n?re:t,t===re?V(e)?ne(e):_(e):e.match(t)||[]}function wu(e){var t=null==e?0:e.length,n=ya();return e=t?h(e,function(e){if("function"!=typeof e[1])throw new oc(oe);return[n(e[0]),e[1]]}):[],ei(function(n){for(var r=-1;++r<t;){var i=e[r];if(a(i[0],this,n))return a(i[1],this,n)}})}function ku(e){return nr(tr(e,ce))}function Tu(e){return function(){return e}}function Mu(e,t){return null==e||e!==e?t:e}function Au(e){return e}function Cu(e){return Rr("function"==typeof e?e:tr(e,ce))}function Su(e){return Br(tr(e,ce))}function Eu(e,t){return Ur(e,tr(t,ce))}function Pu(e,t,n){var r=Dl(t),i=hr(t,r);null!=n||el(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=hr(t,Dl(t)));var a=!(el(n)&&"chain"in n)||!!n.chain,o=Ks(e);return s(i,function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Oi(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,p([this.value()],arguments))})}),e}function Iu(){return In._===this&&(In._=yc),this}function Lu(){}function Ou(e){return e=vl(e),ei(function(t){return Wr(t,e)})}function zu(e){return La(e)?A(Xa(e)):Xr(e)}function Ru(e){return function(t){return null==e?re:pr(e,t)}}function Du(){return[]}function Nu(){return!1}function Fu(){return{}}function ju(){return""}function Bu(){return!0}function Uu(e,t){if((e=vl(e))<1||e>Le)return[];var n=Re,r=Vc(e,Re);t=ya(t),e-=Re;for(var i=I(r,t);++n<e;)t(n);return i}function Vu(e){return hf(e)?h(e,Xa):fl(e)?[e]:Oi(Cd(kl(e)))}function Hu(e){var t=++hc;return kl(e)+t}function Wu(e){return e&&e.length?sr(e,Au,yr):re}function qu(e,t){return e&&e.length?sr(e,ya(t,2),yr):re}function Gu(e){return M(e,Au)}function Yu(e,t){return M(e,ya(t,2))}function Xu(e){return e&&e.length?sr(e,Au,Fr):re}function Zu(e,t){return e&&e.length?sr(e,ya(t,2),Fr):re}function Ju(e){return e&&e.length?P(e,Au):0}function Ku(e,t){return e&&e.length?P(e,ya(t,2)):0}t=null==t?In:Yn.defaults(In.Object(),t,Yn.pick(In,_n));var Qu=t.Array,$u=t.Date,ec=t.Error,tc=t.Function,nc=t.Math,rc=t.Object,ic=t.RegExp,ac=t.String,oc=t.TypeError,sc=Qu.prototype,lc=tc.prototype,uc=rc.prototype,cc=t["__core-js_shared__"],dc=lc.toString,fc=uc.hasOwnProperty,hc=0,pc=function(){var e=/[^.]+$/.exec(cc&&cc.keys&&cc.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),mc=uc.toString,gc=dc.call(rc),yc=In._,vc=ic("^"+dc.call(fc).replace(Pt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_c=zn?t.Buffer:re,bc=t.Symbol,xc=t.Uint8Array,wc=_c?_c.allocUnsafe:re,kc=q(rc.getPrototypeOf,rc),Tc=rc.create,Mc=uc.propertyIsEnumerable,Ac=sc.splice,Cc=bc?bc.isConcatSpreadable:re,Sc=bc?bc.iterator:re,Ec=bc?bc.toStringTag:re,Pc=function(){try{var e=ba(rc,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ic=t.clearTimeout!==In.clearTimeout&&t.clearTimeout,Lc=$u&&$u.now!==In.Date.now&&$u.now,Oc=t.setTimeout!==In.setTimeout&&t.setTimeout,zc=nc.ceil,Rc=nc.floor,Dc=rc.getOwnPropertySymbols,Nc=_c?_c.isBuffer:re,Fc=t.isFinite,jc=sc.join,Bc=q(rc.keys,rc),Uc=nc.max,Vc=nc.min,Hc=$u.now,Wc=t.parseInt,qc=nc.random,Gc=sc.reverse,Yc=ba(t,"DataView"),Xc=ba(t,"Map"),Zc=ba(t,"Promise"),Jc=ba(t,"Set"),Kc=ba(t,"WeakMap"),Qc=ba(rc,"create"),$c=Kc&&new Kc,ed={},td=Za(Yc),nd=Za(Xc),rd=Za(Zc),id=Za(Jc),ad=Za(Kc),od=bc?bc.prototype:re,sd=od?od.valueOf:re,ld=od?od.toString:re,ud=function(){function e(){}return function(t){if(!el(t))return{};if(Tc)return Tc(t);e.prototype=t;var n=new e;return e.prototype=re,n}}();n.templateSettings={escape:Tt,evaluate:Mt,interpolate:At,variable:"",imports:{_:n}},n.prototype=r.prototype,n.prototype.constructor=n,i.prototype=ud(r.prototype),i.prototype.constructor=i,v.prototype=ud(r.prototype),v.prototype.constructor=v,te.prototype.clear=Ft,te.prototype.delete=Jt,te.prototype.get=Kt,te.prototype.has=Qt,te.prototype.set=$t,en.prototype.clear=tn,en.prototype.delete=nn,en.prototype.get=rn,en.prototype.has=an,en.prototype.set=on,sn.prototype.clear=ln,sn.prototype.delete=un,sn.prototype.get=cn,sn.prototype.has=dn,sn.prototype.set=fn,mn.prototype.add=mn.prototype.push=gn,mn.prototype.has=yn,vn.prototype.clear=kn,vn.prototype.delete=Tn,vn.prototype.get=Mn,vn.prototype.has=An,vn.prototype.set=En;var cd=ji(dr),dd=ji(fr,!0),fd=Bi(),hd=Bi(!0),pd=$c?function(e,t){return $c.set(e,t),e}:Au,md=Pc?function(e,t){return Pc(e,"toString",{configurable:!0,enumerable:!1,value:Tu(t),writable:!0})}:Au,gd=ei,yd=Ic||function(e){return In.clearTimeout(e)},vd=Jc&&1/X(new Jc([,-0]))[1]==Ie?function(e){return new Jc(e)}:Lu,_d=$c?function(e){return $c.get(e)}:Lu,bd=Dc?function(e){return null==e?[]:(e=rc(e),c(Dc(e),function(t){return Mc.call(e,t)}))}:Du,xd=Dc?function(e){for(var t=[];e;)p(t,bd(e)),e=kc(e);return t}:Du,wd=gr;(Yc&&wd(new Yc(new ArrayBuffer(1)))!=st||Xc&&wd(new Xc)!=Xe||Zc&&"[object Promise]"!=wd(Zc.resolve())||Jc&&wd(new Jc)!=et||Kc&&wd(new Kc)!=it)&&(wd=function(e){var t=gr(e),n=t==Ke?e.constructor:re,r=n?Za(n):"";if(r)switch(r){case td:return st;case nd:return Xe;case rd:return"[object Promise]";case id:return et;case ad:return it}return t});var kd=cc?Ks:Nu,Td=Ga(pd),Md=Oc||function(e,t){return In.setTimeout(e,t)},Ad=Ga(md),Cd=function(e){var t=Cs(e,function(e){return n.size===le&&n.clear(),e}),n=t.cache;return t}(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Et,function(e,n,r,i){t.push(r?i.replace(jt,"$1"):n||e)}),t}),Sd=ei(function(e,t){return Hs(e)?ar(e,cr(t,1,Hs,!0)):[]}),Ed=ei(function(e,t){var n=yo(t);return Hs(n)&&(n=re),Hs(e)?ar(e,cr(t,1,Hs,!0),ya(n,2)):[]}),Pd=ei(function(e,t){var n=yo(t);return Hs(n)&&(n=re),Hs(e)?ar(e,cr(t,1,Hs,!0),re,n):[]}),Id=ei(function(e){var t=h(e,_i);return t.length&&t[0]===e[0]?xr(t):[]}),Ld=ei(function(e){var t=yo(e),n=h(e,_i);return t===yo(n)?t=re:n.pop(),n.length&&n[0]===e[0]?xr(n,ya(t,2)):[]}),Od=ei(function(e){var t=yo(e),n=h(e,_i);return t="function"==typeof t?t:re,t&&n.pop(),n.length&&n[0]===e[0]?xr(n,re,t):[]}),zd=ei(bo),Rd=fa(function(e,t){var n=null==e?0:e.length,r=$n(e,t);return Jr(e,h(t,function(e){return Pa(e,n)?+e:e}).sort(Ei)),r}),Dd=ei(function(e){return fi(cr(e,1,Hs,!0))}),Nd=ei(function(e){var t=yo(e);return Hs(t)&&(t=re),fi(cr(e,1,Hs,!0),ya(t,2))}),Fd=ei(function(e){var t=yo(e);return t="function"==typeof t?t:re,fi(cr(e,1,Hs,!0),re,t)}),jd=ei(function(e,t){return Hs(e)?ar(e,t):[]}),Bd=ei(function(e){return yi(c(e,Hs))}),Ud=ei(function(e){var t=yo(e);return Hs(t)&&(t=re),yi(c(e,Hs),ya(t,2))}),Vd=ei(function(e){var t=yo(e);return t="function"==typeof t?t:re,yi(c(e,Hs),re,t)}),Hd=ei(Vo),Wd=ei(function(e){var t=e.length,n=t>1?e[t-1]:re;return n="function"==typeof n?(e.pop(),n):re,Ho(e,n)}),qd=fa(function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,a=function(t){return $n(t,e)};return!(t>1||this.__actions__.length)&&r instanceof v&&Pa(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Xo,args:[a],thisArg:re}),new i(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(re),e})):this.thru(a)}),Gd=Ni(function(e,t,n){fc.call(e,n)?++e[n]:Qn(e,n,1)}),Yd=Gi(oo),Xd=Gi(so),Zd=Ni(function(e,t,n){fc.call(e,n)?e[n].push(t):Qn(e,n,[t])}),Jd=ei(function(e,t,n){var r=-1,i="function"==typeof t,o=Vs(e)?Qu(e.length):[];return cd(e,function(e){o[++r]=i?a(t,e,n):kr(e,t,n)}),o}),Kd=Ni(function(e,t,n){Qn(e,n,t)}),Qd=Ni(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),$d=ei(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Ia(e,t[0],t[1])?t=[]:n>2&&Ia(t[0],t[1],t[2])&&(t=[t[0]]),qr(e,cr(t,1),[])}),ef=Lc||function(){return In.Date.now()},tf=ei(function(e,t,n){var r=me;if(n.length){var i=G(n,ga(tf));r|=be}return aa(e,r,t,n,i)}),nf=ei(function(e,t,n){var r=me|ge;if(n.length){var i=G(n,ga(nf));r|=be}return aa(t,r,e,n,i)}),rf=ei(function(e,t){return ir(e,1,t)}),af=ei(function(e,t,n){return ir(e,bl(t)||0,n)});Cs.Cache=sn;var of=gd(function(e,t){t=1==t.length&&hf(t[0])?h(t[0],O(ya())):h(cr(t,1),O(ya()));var n=t.length;return ei(function(r){for(var i=-1,o=Vc(r.length,n);++i<o;)r[i]=t[i].call(this,r[i]);return a(e,this,r)})}),sf=ei(function(e,t){var n=G(t,ga(sf));return aa(e,be,re,t,n)}),lf=ei(function(e,t){var n=G(t,ga(lf));return aa(e,xe,re,t,n)}),uf=fa(function(e,t){return aa(e,ke,re,re,re,t)}),cf=ta(yr),df=ta(function(e,t){return e>=t}),ff=Tr(function(){return arguments}())?Tr:function(e){return tl(e)&&fc.call(e,"callee")&&!Mc.call(e,"callee")},hf=Qu.isArray,pf=Nn?O(Nn):Mr,mf=Nc||Nu,gf=Fn?O(Fn):Ar,yf=jn?O(jn):Er,vf=Bn?O(Bn):Lr,_f=Un?O(Un):Or,bf=Vn?O(Vn):zr,xf=ta(Fr),wf=ta(function(e,t){return e<=t}),kf=Fi(function(e,t){if(Da(t)||Vs(t))return void zi(t,Dl(t),e);for(var n in t)fc.call(t,n)&&Hn(e,n,t[n])}),Tf=Fi(function(e,t){zi(t,Nl(t),e)}),Mf=Fi(function(e,t,n,r){zi(t,Nl(t),e,r)}),Af=Fi(function(e,t,n,r){zi(t,Dl(t),e,r)}),Cf=fa($n),Sf=ei(function(e,t){e=rc(e);var n=-1,r=t.length,i=r>2?t[2]:re;for(i&&Ia(t[0],t[1],i)&&(r=1);++n<r;)for(var a=t[n],o=Nl(a),s=-1,l=o.length;++s<l;){var u=o[s],c=e[u];(c===re||Us(c,uc[u])&&!fc.call(e,u))&&(e[u]=a[u])}return e}),Ef=ei(function(e){return e.push(re,sa),a(zf,re,e)}),Pf=Zi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=mc.call(t)),e[t]=n},Tu(Au)),If=Zi(function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=mc.call(t)),fc.call(e,t)?e[t].push(n):e[t]=[n]},ya),Lf=ei(kr),Of=Fi(function(e,t,n){Vr(e,t,n)}),zf=Fi(function(e,t,n,r){Vr(e,t,n,r)}),Rf=fa(function(e,t){var n={};if(null==e)return n;var r=!1;t=h(t,function(t){return t=xi(t,e),r||(r=t.length>1),t}),zi(e,pa(e),n),r&&(n=tr(n,ce|de|fe,la));for(var i=t.length;i--;)hi(n,t[i]);return n}),Df=fa(function(e,t){return null==e?{}:Gr(e,t)}),Nf=ia(Dl),Ff=ia(Nl),jf=Hi(function(e,t,n){return t=t.toLowerCase(),e+(n?eu(t):t)}),Bf=Hi(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),Uf=Hi(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),Vf=Vi("toLowerCase"),Hf=Hi(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),Wf=Hi(function(e,t,n){return e+(n?" ":"")+Gf(t)}),qf=Hi(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),Gf=Vi("toUpperCase"),Yf=ei(function(e,t){try{return a(e,re,t)}catch(e){return Zs(e)?e:new ec(e)}}),Xf=fa(function(e,t){return s(t,function(t){t=Xa(t),Qn(e,t,tf(e[t],e))}),e}),Zf=Yi(),Jf=Yi(!0),Kf=ei(function(e,t){return function(n){return kr(n,e,t)}}),Qf=ei(function(e,t){return function(n){return kr(e,n,t)}}),$f=Ki(h),eh=Ki(u),th=Ki(y),nh=ea(),rh=ea(!0),ih=Ji(function(e,t){return e+t},0),ah=ra("ceil"),oh=Ji(function(e,t){return e/t},1),sh=ra("floor"),lh=Ji(function(e,t){return e*t},1),uh=ra("round"),ch=Ji(function(e,t){return e-t},0);return n.after=bs,n.ary=xs,n.assign=kf,n.assignIn=Tf,n.assignInWith=Mf,n.assignWith=Af,n.at=Cf,n.before=ws,n.bind=tf,n.bindAll=Xf,n.bindKey=nf,n.castArray=Rs,n.chain=Go,n.chunk=Qa,n.compact=$a,n.concat=eo,n.cond=wu,n.conforms=ku,n.constant=Tu,n.countBy=Gd,n.create=Tl,n.curry=ks,n.curryRight=Ts,n.debounce=Ms,n.defaults=Sf,n.defaultsDeep=Ef,n.defer=rf,n.delay=af,n.difference=Sd,n.differenceBy=Ed,n.differenceWith=Pd,n.drop=to,n.dropRight=no,n.dropRightWhile=ro,n.dropWhile=io,n.fill=ao,n.filter=rs,n.flatMap=is,n.flatMapDeep=as,n.flatMapDepth=os,n.flatten=lo,n.flattenDeep=uo,n.flattenDepth=co,n.flip=As,n.flow=Zf,n.flowRight=Jf,n.fromPairs=fo,n.functions=Il,n.functionsIn=Ll,n.groupBy=Zd,n.initial=mo,n.intersection=Id,n.intersectionBy=Ld,n.intersectionWith=Od,n.invert=Pf,n.invertBy=If,n.invokeMap=Jd,n.iteratee=Cu,n.keyBy=Kd,n.keys=Dl,n.keysIn=Nl,n.map=cs,n.mapKeys=Fl,n.mapValues=jl,n.matches=Su,n.matchesProperty=Eu,n.memoize=Cs,n.merge=Of,n.mergeWith=zf,n.method=Kf,n.methodOf=Qf,n.mixin=Pu,n.negate=Ss,n.nthArg=Ou,n.omit=Rf,n.omitBy=Bl,n.once=Es,n.orderBy=ds,n.over=$f,n.overArgs=of,n.overEvery=eh,n.overSome=th,n.partial=sf,n.partialRight=lf,n.partition=Qd,n.pick=Df,n.pickBy=Ul,n.property=zu,n.propertyOf=Ru,n.pull=zd,n.pullAll=bo,n.pullAllBy=xo,n.pullAllWith=wo,n.pullAt=Rd,n.range=nh,n.rangeRight=rh,n.rearg=uf,n.reject=ps,n.remove=ko,n.rest=Ps,n.reverse=To,n.sampleSize=gs,n.set=Hl,n.setWith=Wl,n.shuffle=ys,n.slice=Mo,n.sortBy=$d,n.sortedUniq=Lo,n.sortedUniqBy=Oo,n.split=du,n.spread=Is,n.tail=zo,n.take=Ro,n.takeRight=Do,n.takeRightWhile=No,n.takeWhile=Fo,n.tap=Yo,n.throttle=Ls,n.thru=Xo,n.toArray=gl,n.toPairs=Nf,n.toPairsIn=Ff,n.toPath=Vu,n.toPlainObject=xl,n.transform=ql,n.unary=Os,n.union=Dd,n.unionBy=Nd,n.unionWith=Fd,n.uniq=jo,n.uniqBy=Bo,n.uniqWith=Uo,n.unset=Gl,n.unzip=Vo,n.unzipWith=Ho,n.update=Yl,n.updateWith=Xl,n.values=Zl,n.valuesIn=Jl,n.without=jd,n.words=xu,n.wrap=zs,n.xor=Bd,n.xorBy=Ud,n.xorWith=Vd,n.zip=Hd,n.zipObject=Wo,n.zipObjectDeep=qo,n.zipWith=Wd,n.entries=Nf,n.entriesIn=Ff,n.extend=Tf,n.extendWith=Mf,Pu(n,n),n.add=ih,n.attempt=Yf,n.camelCase=jf,n.capitalize=eu,n.ceil=ah,n.clamp=Kl,n.clone=Ds,n.cloneDeep=Fs,n.cloneDeepWith=js,n.cloneWith=Ns,n.conformsTo=Bs,n.deburr=tu,n.defaultTo=Mu,n.divide=oh,n.endsWith=nu,n.eq=Us,n.escape=ru,n.escapeRegExp=iu,n.every=ns,n.find=Yd,n.findIndex=oo,n.findKey=Ml,n.findLast=Xd,n.findLastIndex=so,n.findLastKey=Al,n.floor=sh,n.forEach=ss,n.forEachRight=ls,n.forIn=Cl,n.forInRight=Sl,n.forOwn=El,n.forOwnRight=Pl,n.get=Ol,n.gt=cf,n.gte=df,n.has=zl,n.hasIn=Rl,n.head=ho,n.identity=Au,n.includes=us,n.indexOf=po,n.inRange=Ql,n.invoke=Lf,n.isArguments=ff,n.isArray=hf,n.isArrayBuffer=pf,n.isArrayLike=Vs,n.isArrayLikeObject=Hs,n.isBoolean=Ws,n.isBuffer=mf,n.isDate=gf,n.isElement=qs,n.isEmpty=Gs,n.isEqual=Ys,n.isEqualWith=Xs,n.isError=Zs,n.isFinite=Js,n.isFunction=Ks,n.isInteger=Qs,n.isLength=$s,n.isMap=yf,n.isMatch=nl,n.isMatchWith=rl,n.isNaN=il,n.isNative=al,n.isNil=sl,n.isNull=ol,n.isNumber=ll,n.isObject=el,n.isObjectLike=tl,n.isPlainObject=ul,n.isRegExp=vf,n.isSafeInteger=cl,n.isSet=_f,n.isString=dl,n.isSymbol=fl,n.isTypedArray=bf,n.isUndefined=hl,n.isWeakMap=pl,n.isWeakSet=ml,n.join=go,n.kebabCase=Bf,n.last=yo,n.lastIndexOf=vo,n.lowerCase=Uf,n.lowerFirst=Vf,n.lt=xf,n.lte=wf,n.max=Wu,n.maxBy=qu,n.mean=Gu,n.meanBy=Yu,n.min=Xu,n.minBy=Zu,n.stubArray=Du,n.stubFalse=Nu,n.stubObject=Fu,n.stubString=ju,n.stubTrue=Bu,n.multiply=lh,n.nth=_o,n.noConflict=Iu,n.noop=Lu,n.now=ef,n.pad=au,n.padEnd=ou,n.padStart=su,n.parseInt=lu,n.random=$l,n.reduce=fs,n.reduceRight=hs,n.repeat=uu,n.replace=cu,n.result=Vl,n.round=uh,n.runInContext=e,n.sample=ms,n.size=vs,n.snakeCase=Hf,n.some=_s,n.sortedIndex=Ao,n.sortedIndexBy=Co,n.sortedIndexOf=So,n.sortedLastIndex=Eo,n.sortedLastIndexBy=Po,n.sortedLastIndexOf=Io,n.startCase=Wf,n.startsWith=fu,n.subtract=ch,n.sum=Ju,n.sumBy=Ku,n.template=hu,n.times=Uu,n.toFinite=yl,n.toInteger=vl,n.toLength=_l,n.toLower=pu,n.toNumber=bl,n.toSafeInteger=wl,n.toString=kl,n.toUpper=mu,n.trim=gu,n.trimEnd=yu,n.trimStart=vu,n.truncate=_u,n.unescape=bu,n.uniqueId=Hu,n.upperCase=qf,n.upperFirst=Gf,n.each=ss,n.eachRight=ls,n.first=ho,Pu(n,function(){var e={};return dr(n,function(t,r){fc.call(n.prototype,r)||(e[r]=t)}),e}(),{chain:!1}),n.VERSION="4.17.5",s(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){n[e].placeholder=n}),s(["drop","take"],function(e,t){v.prototype[e]=function(n){n=n===re?1:Uc(vl(n),0);var r=this.__filtered__&&!t?new v(this):this.clone();return r.__filtered__?r.__takeCount__=Vc(n,r.__takeCount__):r.__views__.push({size:Vc(n,Re),type:e+(r.__dir__<0?"Right":"")}),r},v.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),s(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==Ee||3==n;v.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ya(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),s(["head","last"],function(e,t){var n="take"+(t?"Right":"");v.prototype[e]=function(){return this[n](1).value()[0]}}),s(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");v.prototype[e]=function(){return this.__filtered__?new v(this):this[n](1)}}),v.prototype.compact=function(){return this.filter(Au)},v.prototype.find=function(e){return this.filter(e).head()},v.prototype.findLast=function(e){return this.reverse().find(e)},v.prototype.invokeMap=ei(function(e,t){return"function"==typeof e?new v(this):this.map(function(n){return kr(n,e,t)})}),v.prototype.reject=function(e){return this.filter(Ss(ya(e)))},v.prototype.slice=function(e,t){e=vl(e);var n=this;return n.__filtered__&&(e>0||t<0)?new v(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==re&&(t=vl(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},v.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},v.prototype.toArray=function(){return this.take(Re)},dr(v.prototype,function(e,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),o=n[a?"take"+("last"==t?"Right":""):t],s=a||/^find/.test(t);o&&(n.prototype[t]=function(){var t=this.__wrapped__,l=a?[1]:arguments,u=t instanceof v,c=l[0],d=u||hf(t),f=function(e){var t=o.apply(n,p([e],l));return a&&h?t[0]:t};d&&r&&"function"==typeof c&&1!=c.length&&(u=d=!1);var h=this.__chain__,m=!!this.__actions__.length,g=s&&!h,y=u&&!m;if(!s&&d){t=y?t:new v(this);var _=e.apply(t,l);return _.__actions__.push({func:Xo,args:[f],thisArg:re}),new i(_,h)}return g&&y?e.apply(this,l):(_=this.thru(f),g?a?_.value()[0]:_.value():_)})}),s(["pop","push","shift","sort","splice","unshift"],function(e){var t=sc[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",i=/^(?:pop|shift)$/.test(e);n.prototype[e]=function(){var e=arguments;if(i&&!this.__chain__){var n=this.value();return t.apply(hf(n)?n:[],e)}return this[r](function(n){return t.apply(hf(n)?n:[],e)})}}),dr(v.prototype,function(e,t){var r=n[t];if(r){var i=r.name+"";(ed[i]||(ed[i]=[])).push({name:t,func:r})}}),ed[Xi(re,ge).name]=[{name:"wrapper",func:re}],v.prototype.clone=C,v.prototype.reverse=J,v.prototype.value=ee,n.prototype.at=qd,n.prototype.chain=Zo,n.prototype.commit=Jo,n.prototype.next=Ko,n.prototype.plant=$o,n.prototype.reverse=es,n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=ts,n.prototype.first=n.prototype.head,Sc&&(n.prototype[Sc]=Qo),n}();In._=Yn,(i=function(){return Yn}.call(t,n,t,r))!==re&&(r.exports=i)}).call(this)}).call(t,n(23),n(396)(e))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"cancelAnimationTimeout",function(){return i}),n.d(t,"requestAnimationTimeout",function(){return a});var r=n(409),i=function(e){return Object(r.a)(e.id)},a=function(e,t){var n=Date.now(),i=function i(){Date.now()-n>=t?e.call():a.id=Object(r.b)(i)},a={id:Object(r.b)(i)};return a}},function(e,t,n){},function(e,t,n){"use strict";function r(e){return function(){return e}}var i=function(){};i.thatReturns=r,i.thatReturnsFalse=r(!1),i.thatReturnsTrue=r(!0),i.thatReturnsNull=r(null),i.thatReturnsThis=function(){return this},i.thatReturnsArgument=function(e){return e},e.exports=i},function(e,t,n){var r=n(72),i=Math.min;e.exports=function(e){return e>0?i(r(e),9007199254740991):0}},function(e,t){var n=0,r=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+r).toString(36))}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(225),a=r(i),o=n(233),s=r(o),l="function"===typeof s.default&&"symbol"===typeof a.default?function(e){return typeof e}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":typeof e};t.default="function"===typeof s.default&&"symbol"===l(a.default)?function(e){return"undefined"===typeof e?"undefined":l(e)}:function(e){return e&&"function"===typeof s.default&&e.constructor===s.default&&e!==s.default.prototype?"symbol":"undefined"===typeof e?"undefined":l(e)}},function(e,t,n){var r=n(27),i=n(229),a=n(75),o=n(73)("IE_PROTO"),s=function(){},l=function(){var e,t=n(108)("iframe"),r=a.length;for(t.style.display="none",n(230).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object<\/script>"),e.close(),l=e.F;r--;)delete l.prototype[a[r]];return l()};e.exports=Object.create||function(e,t){var n;return null!==e?(s.prototype=r(e),n=new s,s.prototype=null,n[o]=e):n=l(),void 0===t?n:i(n,t)}},function(e,t,n){var r=n(19).f,i=n(32),a=n(18)("toStringTag");e.exports=function(e,t,n){e&&!i(e=n?e:e.prototype,a)&&r(e,a,{configurable:!0,value:t})}},function(e,t,n){n(231);for(var r=n(20),i=n(26),a=n(37),o=n(18)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var u=s[l],c=r[u],d=c&&c.prototype;d&&!d[o]&&i(d,o,u),a[u]=a.Array}},function(e,t,n){var r=n(30),i=n(118),a=n(119),o=n(27),s=n(52),l=n(85),u={},c={},t=e.exports=function(e,t,n,d,f){var h,p,m,g,y=f?function(){return e}:l(e),v=r(n,d,t?2:1),_=0;if("function"!=typeof y)throw TypeError(e+" is not iterable!");if(a(y)){for(h=s(e.length);h>_;_++)if((g=t?v(o(p=e[_])[0],p[1]):v(e[_]))===u||g===c)return g}else for(m=y.call(e);!(p=m.next()).done;)if((g=i(m,v,p.value,t))===u||g===c)return g};t.BREAK=u,t.RETURN=c},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Array.isArray(e))return e;var n="";if(Array.isArray(e[0]))for(var r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=", "),n+=i(e[r]," ");else n=i(e,", ");return t||"!important"!==e[e.length-1]||(n+=" !important"),n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=function(e,t){for(var n="",r=0;r<e.length&&"!important"!==e[r];r++)n&&(n+=t),n+=e[r];return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"unnamed",t=arguments[1],n=arguments[2],r=n.jss,i=(0,c.default)(t),a=r.plugins.onCreateRule(e,i,n);return a||("@"===e[0]&&(0,o.default)(!1,"[JSS] Unknown at-rule %s",e),new l.default(e,i,n))}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(11),o=r(a),s=n(38),l=r(s),u=n(270),c=r(u)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"isBrowser",function(){return i});var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i="object"===("undefined"===typeof window?"undefined":r(window))&&"object"===("undefined"===typeof document?"undefined":r(document))&&9===document.nodeType;t.default=i},function(e,t,n){"use strict";function r(e){return!!e&&"object"===typeof e}function i(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||a(e)}function a(e){return e.$$typeof===h}function o(e){return Array.isArray(e)?[]:{}}function s(e,t){return!1!==t.clone&&t.isMergeableObject(e)?c(o(e),e,t):e}function l(e,t,n){return e.concat(t).map(function(e){return s(e,n)})}function u(e,t,n){var r={};return n.isMergeableObject(e)&&Object.keys(e).forEach(function(t){r[t]=s(e[t],n)}),Object.keys(t).forEach(function(i){n.isMergeableObject(t[i])&&e[i]?r[i]=c(e[i],t[i],n):r[i]=s(t[i],n)}),r}function c(e,t,n){n=n||{},n.arrayMerge=n.arrayMerge||l,n.isMergeableObject=n.isMergeableObject||d;var r=Array.isArray(t);return r===Array.isArray(e)?r?n.arrayMerge(e,t,n):u(e,t,n):s(t,n)}Object.defineProperty(t,"__esModule",{value:!0});var d=function(e){return r(e)&&!i(e)},f="function"===typeof Symbol&&Symbol.for,h=f?Symbol.for("react.element"):60103;c.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(e,n){return c(e,n,t)},{})};var p=c;t.default=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(344);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(394),a=r(i),o=n(395),s=r(o),l=(0,a.default)(s.default);t.default=l,e.exports=t.default},function(e,t,n){"use strict";var r={ASC:"ASC",DESC:"DESC"};t.a=r},function(e,t,n){"use strict";function r(e,t){return e===t?0!==e||0!==t||1/e===1/t:e!==e&&t!==t}function i(e,t){if(r(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var o=0;o<n.length;o++)if(!a.call(t,n[o])||!r(e[n[o]],t[n[o]]))return!1;return!0}var a=Object.prototype.hasOwnProperty;e.exports=i},function(e,t,n){var r=n(24);e.exports=function(e,t){if(!r(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!r(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!r(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var r=n(70);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==r(e)?e.split(""):Object(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){var n=Math.ceil,r=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?r:n)(e)}},function(e,t,n){var r=n(74)("keys"),i=n(53);e.exports=function(e){return r[e]||(r[e]=i(e))}},function(e,t,n){var r=n(20),i=r["__core-js_shared__"]||(r["__core-js_shared__"]={});e.exports=function(e){return i[e]||(i[e]={})}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){e.exports={default:n(219),__esModule:!0}},function(e,t,n){var r=n(15),i=n(14),a=n(31);e.exports=function(e,t){var n=(i.Object||{})[e]||Object[e],o={};o[e]=t(n),r(r.S+r.F*a(function(){n(1)}),"Object",o)}},function(e,t,n){"use strict";var r=n(80),i=n(15),a=n(111),o=n(26),s=n(37),l=n(228),u=n(57),c=n(110),d=n(18)("iterator"),f=!([].keys&&"next"in[].keys()),h=function(){return this};e.exports=function(e,t,n,p,m,g,y){l(n,t,p);var v,_,b,x=function(e){if(!f&&e in M)return M[e];switch(e){case"keys":case"values":return function(){return new n(this,e)}}return function(){return new n(this,e)}},w=t+" Iterator",k="values"==m,T=!1,M=e.prototype,A=M[d]||M["@@iterator"]||m&&M[m],C=A||x(m),S=m?k?x("entries"):C:void 0,E="Array"==t?M.entries||A:A;if(E&&(b=c(E.call(new e)))!==Object.prototype&&b.next&&(u(b,w,!0),r||"function"==typeof b[d]||o(b,d,h)),k&&A&&"values"!==A.name&&(T=!0,C=function(){return A.call(this)}),r&&!y||!f&&!T&&M[d]||o(M,d,C),s[t]=C,s[w]=h,m)if(v={values:k?C:x("values"),keys:g?C:x("keys"),entries:S},y)for(_ in v)_ in M||a(M,_,v[_]);else i(i.P+i.F*(f||T),t,v);return v}},function(e,t){e.exports=!0},function(e,t,n){t.f=n(18)},function(e,t,n){var r=n(53)("meta"),i=n(24),a=n(32),o=n(19).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(31)(function(){return l(Object.preventExtensions({}))}),c=function(e){o(e,r,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,r)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[r].i},f=function(e,t){if(!a(e,r)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[r].w},h=function(e){return u&&p.NEED&&l(e)&&!a(e,r)&&c(e),e},p=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:f,onFreeze:h}},function(e,t,n){var r=n(20),i=n(14),a=n(80),o=n(81),s=n(19).f;e.exports=function(e){var t=i.Symbol||(i.Symbol=a?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:o.f(e)})}},function(e,t,n){var r=n(54),i=n(41),a=n(33),o=n(68),s=n(32),l=n(107),u=Object.getOwnPropertyDescriptor;t.f=n(21)?u:function(e,t){if(e=a(e),t=o(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return i(!r.f.call(e,t),e[t])}},function(e,t,n){var r=n(86),i=n(18)("iterator"),a=n(37);e.exports=n(14).getIteratorMethod=function(e){if(void 0!=e)return e[i]||e["@@iterator"]||a[r(e)]}},function(e,t,n){var r=n(70),i=n(18)("toStringTag"),a="Arguments"==r(function(){return arguments}()),o=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=o(t=Object(e),i))?n:a?r(t):"Object"==(s=r(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){!function(t,n){e.exports=n()}(0,function(){"use strict";var e={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},n=Object.defineProperty,r=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols,a=Object.getOwnPropertyDescriptor,o=Object.getPrototypeOf,s=o&&o(Object);return function l(u,c,d){if("string"!==typeof c){if(s){var f=o(c);f&&f!==s&&l(u,f,d)}var h=r(c);i&&(h=h.concat(i(c)));for(var p=0;p<h.length;++p){var m=h[p];if(!e[m]&&!t[m]&&(!d||!d[m])){var g=a(c,m);try{n(u,m,g)}catch(e){}}}return u}return u}})},function(e,t,n){"use strict";function r(e,t){for(var n="",r=0;r<t;r++)n+="  ";return n+e}function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i="";if(!t)return i;var a=n.indent,s=void 0===a?0:a,l=t.fallbacks;if(s++,l)if(Array.isArray(l))for(var u=0;u<l.length;u++){var c=l[u];for(var d in c){var f=c[d];null!=f&&(i+="\n"+r(d+": "+(0,o.default)(f)+";",s))}}else for(var h in l){var p=l[h];null!=p&&(i+="\n"+r(h+": "+(0,o.default)(p)+";",s))}for(var m in t){var g=t[m];null!=g&&"fallbacks"!==m&&(i+="\n"+r(m+": "+(0,o.default)(g)+";",s))}return i||n.allowEmpty?(s--,i=r(e+" {"+i+"\n",s)+r("}",s)):i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(60),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(124),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=new i.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(62),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a="",o="";if(i.default){var s={Moz:"-moz-",ms:"-ms-",O:"-o-",Webkit:"-webkit-"},l=document.createElement("p").style;for(var u in s)if(u+"Transform"in l){a=u,o=s[u];break}}t.default={js:a,css:o}},function(e,t,n){"use strict";function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return e<t?t:e>n?n:e}function i(e){e=e.substr(1);var t=new RegExp(".{1,"+e.length/3+"}","g"),n=e.match(t);return n&&1===n[0].length&&(n=n.map(function(e){return e+e})),n?"rgb("+n.map(function(e){return parseInt(e,16)}).join(", ")+")":""}function a(e){if("#"===e.charAt(0))return a(i(e));var t=e.indexOf("("),n=e.substring(0,t),r=e.substring(t+1,e.length-1).split(",");return r=r.map(function(e){return parseFloat(e)}),{type:n,values:r}}function o(e){var t=e.type,n=e.values;return-1!==t.indexOf("rgb")&&(n=n.map(function(e,t){return t<3?parseInt(e,10):e})),-1!==t.indexOf("hsl")&&(n[1]=n[1]+"%",n[2]=n[2]+"%"),e.type+"("+n.join(", ")+")"}function s(e,t){var n=l(e),r=l(t);return(Math.max(n,r)+.05)/(Math.min(n,r)+.05)}function l(e){var t=a(e);if(-1!==t.type.indexOf("rgb")){var n=t.values.map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return Number((.2126*n[0]+.7152*n[1]+.0722*n[2]).toFixed(3))}return t.values[2]/100}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return l(e)>.5?d(e,t):f(e,t)}function c(e,t){return e?(e=a(e),t=r(t),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,o(e)):e}function d(e,t){if(!e)return e;if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]*=1-t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]*=1-t;return o(e)}function f(e,t){if(!e)return e;if(e=a(e),t=r(t),-1!==e.type.indexOf("hsl"))e.values[2]+=(100-e.values[2])*t;else if(-1!==e.type.indexOf("rgb"))for(var n=0;n<3;n+=1)e.values[n]+=(255-e.values[n])*t;return o(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.convertHexToRGB=i,t.decomposeColor=a,t.recomposeColor=o,t.getContrastRatio=s,t.getLuminance=l,t.emphasize=u,t.fade=c,t.darken=d,t.lighten=f;var h=n(11);!function(e){e&&e.__esModule}(h)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return(0,C.default)({},R,e)}function a(e,t,n){var r=[e,t];return r.push(z.passiveOption?n:n.capture),r}function o(e,t,n,r){e.addEventListener.apply(e,a(t,n,r))}function s(e,t,n,r){e.removeEventListener.apply(e,a(t,n,r))}function l(e,t){var n=(e.children,e.target,(0,M.default)(e,["children","target"]));(0,k.default)(n).forEach(function(e){if("on"===e.substring(0,2)){var r=n[e],a="undefined"===typeof r?"undefined":(0,x.default)(r),o="object"===a,s="function"===a;if(o||s){var l="capture"===e.substr(-7).toLowerCase(),u=e.substring(2).toLowerCase();u=l?u.substring(0,u.length-7):u,o?t(u,r.handler,r.options):t(u,r,i({capture:l}))}}})}function u(e,t){return{handler:e,options:i(t)}}Object.defineProperty(t,"__esModule",{value:!0});var c=n(7),d=r(c),f=n(4),h=r(f),p=n(5),m=r(p),g=n(8),y=r(g),v=n(9),_=r(v),b=n(55),x=r(b),w=n(22),k=r(w),T=n(3),M=r(T),A=n(105),C=r(A);t.withOptions=u;var S=n(1),E=r(S),P=n(0),I=(r(P),n(67)),L=r(I),O=n(11),z=(r(O),n(320)),R={capture:!1,passive:!1},D=function(e){function t(){return(0,h.default)(this,t),(0,y.default)(this,(t.__proto__||(0,d.default)(t)).apply(this,arguments))}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.addListeners()}},{key:"shouldComponentUpdate",value:function(e){return!(0,L.default)(this.props,e)}},{key:"componentWillUpdate",value:function(){this.removeListeners()}},{key:"componentDidUpdate",value:function(){this.addListeners()}},{key:"componentWillUnmount",value:function(){this.removeListeners()}},{key:"addListeners",value:function(){this.applyListeners(o)}},{key:"removeListeners",value:function(){this.applyListeners(s)}},{key:"applyListeners",value:function(e){var t=this.props.target;if(t){var n=t;"string"===typeof t&&(n=window[t]),l(this.props,e.bind(null,n))}}},{key:"render",value:function(){return this.props.children||null}}]),t}(E.default.Component);D.propTypes={},t.default=D},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=n(385),f=n.n(d),h=n(392),p=(n.n(h),n(34)),m=n.n(p),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=c.a.div({marginBottom:20}),v=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),g(t,[{key:"render",value:function(){return s.a.createElement(y,null,s.a.createElement(f.a,null,s.a.createElement(d.CardMedia,{image:"dummy"},this.props.plot),s.a.createElement(d.CardContent,null,s.a.createElement(m.a,{gutterBottom:!0,variant:"headline",component:"h2"},this.props.title),s.a.createElement("div",null,this.props.text))))}}]),t}(o.Component);v.propTypes={plot:u.a.oneOfType([u.a.element.isRequired,u.a.string.isRequired]),title:u.a.string.isRequired,text:u.a.oneOfType([u.a.element.isRequired,u.a.string.isRequired])},v.defaultProps={plot:""},t.a=v},function(e,t,n){"use strict";var r=n(3),i=n.n(r),a=n(4),o=n.n(a),s=n(5),l=n.n(s),u=n(407),c=n(408),d=(n(10).babelPluginFlowReactPropTypes_proptype_VisibleCellRange||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_CellSizeGetter||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_Alignment||n(0).any,function(){function e(t){var n=t.maxScrollSize,r=void 0===n?Object(c.a)():n,a=i()(t,["maxScrollSize"]);o()(this,e),this._cellSizeAndPositionManager=new u.a(a),this._maxScrollSize=r}return l()(e,[{key:"areOffsetsAdjusted",value:function(){return this._cellSizeAndPositionManager.getTotalSize()>this._maxScrollSize}},{key:"configure",value:function(e){this._cellSizeAndPositionManager.configure(e)}},{key:"getCellCount",value:function(){return this._cellSizeAndPositionManager.getCellCount()}},{key:"getEstimatedCellSize",value:function(){return this._cellSizeAndPositionManager.getEstimatedCellSize()}},{key:"getLastMeasuredIndex",value:function(){return this._cellSizeAndPositionManager.getLastMeasuredIndex()}},{key:"getOffsetAdjustment",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize(),a=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:i});return Math.round(a*(i-r))}},{key:"getSizeAndPositionOfCell",value:function(e){return this._cellSizeAndPositionManager.getSizeAndPositionOfCell(e)}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._cellSizeAndPositionManager.getSizeAndPositionOfLastMeasuredCell()}},{key:"getTotalSize",value:function(){return Math.min(this._maxScrollSize,this._cellSizeAndPositionManager.getTotalSize())}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,r=e.containerSize,i=e.currentOffset,a=e.targetIndex;i=this._safeOffsetToOffset({containerSize:r,offset:i});var o=this._cellSizeAndPositionManager.getUpdatedOffsetForIndex({align:n,containerSize:r,currentOffset:i,targetIndex:a});return this._offsetToSafeOffset({containerSize:r,offset:o})}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;return n=this._safeOffsetToOffset({containerSize:t,offset:n}),this._cellSizeAndPositionManager.getVisibleCellRange({containerSize:t,offset:n})}},{key:"resetCell",value:function(e){this._cellSizeAndPositionManager.resetCell(e)}},{key:"_getOffsetPercentage",value:function(e){var t=e.containerSize,n=e.offset,r=e.totalSize;return r<=t?0:n/(r-t)}},{key:"_offsetToSafeOffset",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(r===i)return n;var a=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:r});return Math.round(a*(i-t))}},{key:"_safeOffsetToOffset",value:function(e){var t=e.containerSize,n=e.offset,r=this._cellSizeAndPositionManager.getTotalSize(),i=this.getTotalSize();if(r===i)return n;var a=this._getOffsetPercentage({containerSize:t,offset:n,totalSize:i});return Math.round(a*(r-t))}}]),e}());t.a=d},function(e,t,n){"use strict";function r(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t={};return function(n){var r=n.callback,i=n.indices,o=a()(i),s=!e||o.every(function(e){var t=i[e];return Array.isArray(t)?t.length>0:t>=0}),l=o.length!==a()(t).length||o.some(function(e){var n=t[e],r=i[e];return Array.isArray(r)?n.join(",")!==r.join(","):n!==r});t=i,s&&l&&r(i)}}t.a=r;var i=n(22),a=n.n(i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if((!a&&0!==a||e)&&i.default){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),a=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return a};var r=n(142),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=void 0;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);n.n(r)},function(e,t,n){"use strict";function r(e){return e}function i(){}Object.defineProperty(t,"__esModule",{value:!0}),n.d(t,"DEFAULT_SCROLLING_RESET_TIME_INTERVAL",function(){return T});var a=n(2),o=n.n(a),s=n(7),l=n.n(s),u=n(4),c=n.n(u),d=n(5),f=n.n(d),h=n(8),p=n.n(h),m=n(9),g=n.n(m),y=n(1),v=n.n(y),_=n(6),b=n.n(_),x=n(433),w=n(49),k=(n(49).babelPluginFlowReactPropTypes_proptype_AnimationTimeoutId||n(0).any,{}),T=150,M=function(e){function t(e,n){c()(this,t);var r=p()(this,(t.__proto__||l()(t)).call(this,e,n));return r._invalidateOnUpdateStartIndex=null,r._invalidateOnUpdateStopIndex=null,r._positionCache=new x.a,r._startIndex=null,r._startIndexMemoized=null,r._stopIndex=null,r._stopIndexMemoized=null,r.state={isScrolling:!1,scrollTop:0},r._debounceResetIsScrollingCallback=r._debounceResetIsScrollingCallback.bind(r),r._setScrollingContainerRef=r._setScrollingContainerRef.bind(r),r._onScroll=r._onScroll.bind(r),r}return g()(t,e),f()(t,[{key:"clearCellPositions",value:function(){this._positionCache=new x.a,this.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.rowIndex;null===this._invalidateOnUpdateStartIndex?(this._invalidateOnUpdateStartIndex=t,this._invalidateOnUpdateStopIndex=t):(this._invalidateOnUpdateStartIndex=Math.min(this._invalidateOnUpdateStartIndex,t),this._invalidateOnUpdateStopIndex=Math.max(this._invalidateOnUpdateStopIndex,t))}},{key:"recomputeCellPositions",value:function(){var e=this._positionCache.count-1;this._positionCache=new x.a,this._populatePositionCache(0,e),this.forceUpdate()}},{key:"componentDidMount",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentDidUpdate",value:function(){this._checkInvalidateOnUpdate(),this._invokeOnScrollCallback(),this._invokeOnCellsRenderedCallback()}},{key:"componentWillUnmount",value:function(){this._debounceResetIsScrollingId&&Object(w.cancelAnimationTimeout)(this._debounceResetIsScrollingId)}},{key:"componentWillReceiveProps",value:function(e){this.props.scrollTop!==e.scrollTop&&(this._debounceResetIsScrolling(),this.setState({isScrolling:!0,scrollTop:e.scrollTop}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.autoHeight,r=t.cellCount,i=t.cellMeasurerCache,a=t.cellRenderer,s=t.className,l=t.height,u=t.id,c=t.keyMapper,d=t.overscanByPixels,f=t.role,h=t.style,p=t.tabIndex,m=t.width,g=this.state,y=g.isScrolling,_=g.scrollTop,x=[],w=this._getEstimatedTotalHeight(),k=this._positionCache.shortestColumnSize,T=this._positionCache.count,M=0,A=void 0;if(this._positionCache.range(Math.max(0,_-d),l+2*d,function(t,n,r){"undefined"===typeof A?(M=t,A=t):(M=Math.min(M,t),A=Math.max(A,t)),x.push(a({index:t,isScrolling:y,key:c(t),parent:e,style:{height:i.getHeight(t),left:n,position:"absolute",top:r,width:i.getWidth(t)}}))}),k<_+l+d&&T<r)for(var C=Math.min(r-T,Math.ceil((_+l+d-k)/i.defaultHeight*m/i.defaultWidth)),S=T;S<T+C;S++)A=S,x.push(a({index:S,isScrolling:y,key:c(S),parent:this,style:{width:i.getWidth(S)}}));return this._startIndex=M,this._stopIndex=A,v.a.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:b()("ReactVirtualized__Masonry",s),id:u,onScroll:this._onScroll,role:f,style:o()({boxSizing:"border-box",direction:"ltr",height:n?"auto":l,overflowX:"hidden",overflowY:w<l?"hidden":"auto",position:"relative",width:m,WebkitOverflowScrolling:"touch",willChange:"transform"},h),tabIndex:p},v.a.createElement("div",{className:"ReactVirtualized__Masonry__innerScrollContainer",style:{width:"100%",height:w,maxWidth:"100%",maxHeight:w,overflow:"hidden",pointerEvents:y?"none":"",position:"relative"}},x))}},{key:"_checkInvalidateOnUpdate",value:function(){if("number"===typeof this._invalidateOnUpdateStartIndex){var e=this._invalidateOnUpdateStartIndex,t=this._invalidateOnUpdateStopIndex;this._invalidateOnUpdateStartIndex=null,this._invalidateOnUpdateStopIndex=null,this._populatePositionCache(e,t),this.forceUpdate()}}},{key:"_debounceResetIsScrolling",value:function(){var e=this.props.scrollingResetTimeInterval;this._debounceResetIsScrollingId&&Object(w.cancelAnimationTimeout)(this._debounceResetIsScrollingId),this._debounceResetIsScrollingId=Object(w.requestAnimationTimeout)(this._debounceResetIsScrollingCallback,e)}},{key:"_debounceResetIsScrollingCallback",value:function(){this.setState({isScrolling:!1})}},{key:"_getEstimatedTotalHeight",value:function(){var e=this.props,t=e.cellCount,n=e.cellMeasurerCache,r=e.width,i=Math.max(1,Math.floor(r/n.defaultWidth));return this._positionCache.estimateTotalHeight(t,i,n.defaultHeight)}},{key:"_invokeOnScrollCallback",value:function(){var e=this.props,t=e.height,n=e.onScroll,r=this.state.scrollTop;this._onScrollMemoized!==r&&(n({clientHeight:t,scrollHeight:this._getEstimatedTotalHeight(),scrollTop:r}),this._onScrollMemoized=r)}},{key:"_invokeOnCellsRenderedCallback",value:function(){if(this._startIndexMemoized!==this._startIndex||this._stopIndexMemoized!==this._stopIndex){(0,this.props.onCellsRendered)({startIndex:this._startIndex,stopIndex:this._stopIndex}),this._startIndexMemoized=this._startIndex,this._stopIndexMemoized=this._stopIndex}}},{key:"_populatePositionCache",value:function(e,t){for(var n=this.props,r=n.cellMeasurerCache,i=n.cellPositioner,a=e;a<=t;a++){var o=i(a),s=o.left,l=o.top;this._positionCache.setPosition(a,s,l,r.getHeight(a))}}},{key:"_setScrollingContainerRef",value:function(e){this._scrollingContainer=e}},{key:"_onScroll",value:function(e){var t=this.props.height,n=e.target.scrollTop,r=Math.min(Math.max(0,this._getEstimatedTotalHeight()-t),n);n===r&&(this._debounceResetIsScrolling(),this.state.scrollTop!==r&&this.setState({isScrolling:!0,scrollTop:r}))}}]),t}(y.PureComponent);M.defaultProps={autoHeight:!1,keyMapper:r,onCellsRendered:i,onScroll:i,overscanByPixels:20,role:"grid",scrollingResetTimeInterval:T,style:k,tabIndex:0},M.propTypes=null,t.default=M},function(e,t,n){"use strict";function r(){}function i(e){try{return e.then}catch(e){return y=e,v}}function a(e,t){try{return e(t)}catch(e){return y=e,v}}function o(e,t,n){try{e(t,n)}catch(e){return y=e,v}}function s(e){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof e)throw new TypeError("Promise constructor's argument is not a function");this._75=0,this._83=0,this._18=null,this._38=null,e!==r&&m(e,this)}function l(e,t,n){return new e.constructor(function(i,a){var o=new s(r);o.then(i,a),u(e,new p(t,n,o))})}function u(e,t){for(;3===e._83;)e=e._18;if(s._47&&s._47(e),0===e._83)return 0===e._75?(e._75=1,void(e._38=t)):1===e._75?(e._75=2,void(e._38=[e._38,t])):void e._38.push(t);c(e,t)}function c(e,t){g(function(){var n=1===e._83?t.onFulfilled:t.onRejected;if(null===n)return void(1===e._83?d(t.promise,e._18):f(t.promise,e._18));var r=a(n,e._18);r===v?f(t.promise,y):d(t.promise,r)})}function d(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"===typeof t||"function"===typeof t)){var n=i(t);if(n===v)return f(e,y);if(n===e.then&&t instanceof s)return e._83=3,e._18=t,void h(e);if("function"===typeof n)return void m(n.bind(t),e)}e._83=1,e._18=t,h(e)}function f(e,t){e._83=2,e._18=t,s._71&&s._71(e,t),h(e)}function h(e){if(1===e._75&&(u(e,e._38),e._38=null),2===e._75){for(var t=0;t<e._38.length;t++)u(e,e._38[t]);e._38=null}}function p(e,t,n){this.onFulfilled="function"===typeof e?e:null,this.onRejected="function"===typeof t?t:null,this.promise=n}function m(e,t){var n=!1,r=o(e,function(e){n||(n=!0,d(t,e))},function(e){n||(n=!0,f(t,e))});n||r!==v||(n=!0,f(t,y))}var g=n(167),y=null,v={};e.exports=s,s._47=null,s._71=null,s._44=r,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var n=new s(r);return u(this,new p(e,t,n)),n}},function(e,t,n){"use strict";var r={};e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n="";for(var r in e){var i=0===r.indexOf("--");if(e.hasOwnProperty(r)&&"label"!==r){var a=e[r];null!=a&&(i?n+=r+":"+a+";":(n+=h(r)+":",n+=(0,s.default)(r,a,t)+";"))}}return n||null}Object.defineProperty(t,"__esModule",{value:!0}),t.processStyleName=void 0,t.createMarkupForStyles=i;var a=n(182),o=(r(a),n(184)),s=r(o),l=n(186),u=r(l),c=n(188),d=r(c),f=n(102),h=(r(f),t.processStyleName=(0,d.default)(u.default))},function(e,t,n){"use strict";var r=n(51),i=r;e.exports=i},function(e,t,n){"use strict";function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e in o?o[e]:o[e]=e.replace(i,"-$&").toLowerCase().replace(a,"-ms-")}var i=/[A-Z]/g,a=/^ms-/,o={};e.exports=r},function(e,t,n){e.exports={default:n(214),__esModule:!0}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,n){e.exports=!n(21)&&!n(31)(function(){return 7!=Object.defineProperty(n(108)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var r=n(24),i=n(20).document,a=r(i)&&r(i.createElement);e.exports=function(e){return a?i.createElement(e):{}}},function(e,t,n){var r=n(32),i=n(33),a=n(217)(!1),o=n(73)("IE_PROTO");e.exports=function(e,t){var n,s=i(e),l=0,u=[];for(n in s)n!=o&&r(s,n)&&u.push(n);for(;t.length>l;)r(s,n=t[l++])&&(~a(u,n)||u.push(n));return u}},function(e,t,n){var r=n(32),i=n(36),a=n(73)("IE_PROTO"),o=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=i(e),r(e,a)?e[a]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?o:null}},function(e,t,n){e.exports=n(26)},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var r=n(70);e.exports=Array.isArray||function(e){return"Array"==r(e)}},function(e,t,n){var r=n(109),i=n(75).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return r(e,i)}},function(e,t){},function(e,t,n){var r=n(26);e.exports=function(e,t,n){for(var i in t)n&&e[i]?e[i]=t[i]:r(e,i,t[i]);return e}},function(e,t){e.exports=function(e,t,n,r){if(!(e instanceof t)||void 0!==r&&r in e)throw TypeError(n+": incorrect invocation!");return e}},function(e,t,n){var r=n(27);e.exports=function(e,t,n,i){try{return i?t(r(n)[0],n[1]):t(n)}catch(t){var a=e.return;throw void 0!==a&&r(a.call(e)),t}}},function(e,t,n){var r=n(37),i=n(18)("iterator"),a=Array.prototype;e.exports=function(e){return void 0!==e&&(r.Array===e||a[i]===e)}},function(e,t,n){var r=n(24);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e){if("string"===typeof e)return e;if(e)return e.displayName||e.name||"Component"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.jss="64a55d578f856d258dc345b094a2a2b3",t.sheetsRegistry="d4bd0baacbc52bbd48bbb9eb24344ecd",t.managers="b768b78919504fba9de2c03545c5cd3a",t.sheetOptions="6fc570d6bd61383819d0f9e7407c452d"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.create=t.createGenerateClassName=t.sheets=t.RuleList=t.SheetsManager=t.SheetsRegistry=t.toCssValue=t.getDynamicStyles=void 0;var i=n(268);Object.defineProperty(t,"getDynamicStyles",{enumerable:!0,get:function(){return r(i).default}});var a=n(60);Object.defineProperty(t,"toCssValue",{enumerable:!0,get:function(){return r(a).default}});var o=n(124);Object.defineProperty(t,"SheetsRegistry",{enumerable:!0,get:function(){return r(o).default}});var s=n(269);Object.defineProperty(t,"SheetsManager",{enumerable:!0,get:function(){return r(s).default}});var l=n(45);Object.defineProperty(t,"RuleList",{enumerable:!0,get:function(){return r(l).default}});var u=n(89);Object.defineProperty(t,"sheets",{enumerable:!0,get:function(){return r(u).default}});var c=n(127);Object.defineProperty(t,"createGenerateClassName",{enumerable:!0,get:function(){return r(c).default}});var d=n(276),f=r(d),h=t.create=function(e){return new f.default(e)};t.default=h()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e),this.registry=[]}return i(e,[{key:"add",value:function(e){var t=this.registry,n=e.options.index;if(-1===t.indexOf(e)){if(0===t.length||n>=this.index)return void t.push(e);for(var r=0;r<t.length;r++)if(t[r].options.index>n)return void t.splice(r,0,e)}}},{key:"reset",value:function(){this.registry=[]}},{key:"remove",value:function(e){var t=this.registry.indexOf(e);this.registry.splice(t,1)}},{key:"toString",value:function(e){return this.registry.filter(function(e){return e.attached}).map(function(t){return t.toString(e)}).join("\n")}},{key:"index",get:function(){return 0===this.registry.length?0:this.registry[this.registry.length-1].options.index}}]),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(271),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){return e&&e[i.default]&&e===e[i.default]()}},function(e,t,n){"use strict";function r(e,t){e.renderable=t,e.rules&&t.cssRules&&e.rules.link(t.cssRules)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),a=r(i),o=n(128),s=(r(o),n(275)),l=r(s);t.default=function(){var e=0;return function(t,n){(e+=1)>1e10&&(0,a.default)(!1,"[JSS] You might have a memory leak. Rule counter is at %s.",e);var r="c",i="";return n&&(r=n.options.classNamePrefix||"c",null!=n.options.jss.id&&(i+=n.options.jss.id)),""+r+l.default+i+e}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(126),l=r(s),u=n(45),c=r(u),d=function(){function e(t,n){i(this,e),this.attached=!1,this.deployed=!1,this.linked=!1,this.classes={},this.options=a({},n,{sheet:this,parent:this,classes:this.classes}),this.renderer=new n.Renderer(this),this.rules=new c.default(this.options);for(var r in t)this.rules.add(r,t[r]);this.rules.process()}return o(e,[{key:"attach",value:function(){return this.attached?this:(this.deployed||this.deploy(),this.renderer.attach(),!this.linked&&this.options.link&&this.link(),this.attached=!0,this)}},{key:"detach",value:function(){return this.attached?(this.renderer.detach(),this.attached=!1,this):this}},{key:"addRule",value:function(e,t,n){var r=this.queue;this.attached&&!r&&(this.queue=[]);var i=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(i),this.attached?this.deployed?(r?r.push(i):(this.insertRule(i),this.queue&&(this.queue.forEach(this.insertRule,this),this.queue=void 0)),i):i:(this.deployed=!1,i)}},{key:"insertRule",value:function(e){var t=this.renderer.insertRule(e);t&&this.options.link&&(0,l.default)(e,t)}},{key:"addRules",value:function(e,t){var n=[];for(var r in e)n.push(this.addRule(r,e[r],t));return n}},{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"deleteRule",value:function(e){var t=this.rules.get(e);return!!t&&(this.rules.remove(t),!this.attached||!t.renderable||this.renderer.deleteRule(t.renderable))}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"deploy",value:function(){return this.renderer.deploy(),this.deployed=!0,this}},{key:"link",value:function(){var e=this.renderer.getRules();return e&&this.rules.link(e),this.linked=!0,this}},{key:"update",value:function(e,t){return this.rules.update(e,t),this}},{key:"toString",value:function(e){return this.rules.toString(e)}}]),e}();t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.palette,n=void 0===t?{}:t,r=e.breakpoints,i=void 0===r?{}:r,a=e.mixins,s=void 0===a?{}:a,u=e.typography,d=void 0===u?{}:u,f=e.shadows,p=(0,l.default)(e,["palette","breakpoints","mixins","typography","shadows"]),g=(0,y.default)(n),v=(0,m.default)(i),b=(0,o.default)({breakpoints:v,direction:"ltr",mixins:(0,_.default)(v,C.default,s),overrides:{},palette:g,props:{},shadows:f||x.default,typography:(0,h.default)(g,d)},(0,c.default)({transitions:k.default,spacing:C.default,zIndex:M.default},p));return b}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(3),l=r(s),u=n(63),c=r(u),d=n(11),f=(r(d),n(300)),h=r(f),p=n(46),m=r(p),g=n(301),y=r(g),v=n(307),_=r(v),b=n(308),x=r(b),w=n(309),k=r(w),T=n(312),M=r(T),A=n(313),C=r(A);t.default=i},function(e,t,n){e.exports={default:n(310),__esModule:!0}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CHANNEL=void 0;var i=n(12),a=r(i),o=n(0),s=r(o),l=t.CHANNEL="__THEMING__",u={contextTypes:(0,a.default)({},l,s.default.object),initial:function(e){return e[l]?e[l].getState():null},subscribe:function(e,t){return e[l]?e[l].subscribe(t):null},unsubscribe:function(e,t){e[l]&&e[l].unsubscribe(t)}};t.default=u},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(317);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){function r(e,t,n){function r(t){var n=v,r=_;return v=_=void 0,T=t,x=e.apply(r,n)}function c(e){return T=e,w=setTimeout(h,t),M?r(e):x}function d(e){var n=e-k,r=e-T,i=t-n;return A?u(i,b-r):i}function f(e){var n=e-k,r=e-T;return void 0===k||n>=t||n<0||A&&r>=b}function h(){var e=a();if(f(e))return p(e);w=setTimeout(h,d(e))}function p(e){return w=void 0,C&&v?r(e):(v=_=void 0,x)}function m(){void 0!==w&&clearTimeout(w),T=0,v=k=_=w=void 0}function g(){return void 0===w?x:p(a())}function y(){var e=a(),n=f(e);if(v=arguments,_=this,k=e,n){if(void 0===w)return c(k);if(A)return w=setTimeout(h,t),r(k)}return void 0===w&&(w=setTimeout(h,t)),x}var v,_,b,x,w,k,T=0,M=!1,A=!1,C=!0;if("function"!=typeof e)throw new TypeError(s);return t=o(t)||0,i(n)&&(M=!!n.leading,A="maxWait"in n,b=A?l(o(n.maxWait)||0,t):b,C="trailing"in n?!!n.trailing:C),y.cancel=m,y.flush=g,y}var i=n(134),a=n(321),o=n(323),s="Expected a function",l=Math.max,u=Math.min;e.exports=r},function(e,t){function n(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=n},function(e,t,n){var r=n(322),i="object"==typeof self&&self&&self.Object===Object&&self,a=r||i||Function("return this")();e.exports=a},function(e,t,n){var r=n(135),i=r.Symbol;e.exports=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(339),a=r(i),o=n(341),s=r(o),l=n(138),u=(r(l),n(44)),c=(r(u),function(e){var t=(0,a.default)(function(e,t){return!(0,s.default)(e,t)});return t(e)});t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var r=n(340),i=function(e){return e&&e.__esModule?e:{default:e}}(r),a=function(e){return(0,i.default)("displayName",e)};t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(342);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t){function n(e){if(e&&"object"===typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"===typeof e)return o[e];var n=String(e),a=r[n.toLowerCase()];if(a)return a;var a=i[n.toLowerCase()];return a||(1===n.length?n.charCodeAt(0):void 0)}n.isEventKey=function(e,t){if(e&&"object"===typeof e){var n=e.which||e.keyCode||e.charCode;if(null===n||void 0===n)return!1;if("string"===typeof t){var a=r[t.toLowerCase()];if(a)return a===n;var a=i[t.toLowerCase()];if(a)return a===n}else if("number"===typeof t)return t===n;return!1}},t=e.exports=n;var r=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"\u21e7":16,"\u2325":18,"\u2303":17,"\u2318":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(a=97;a<123;a++)r[String.fromCharCode(a)]=a-32;for(var a=48;a<58;a++)r[a-48]=a;for(a=1;a<13;a++)r["f"+a]=a+111;for(a=0;a<10;a++)r["numpad "+a]=a+96;var o=t.names=t.title={};for(a in r)o[r[a]]=a;for(var s in i)r[s]=i[s]},function(e,t,n){"use strict";function r(e){return e&&e.ownerDocument||document}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=!("undefined"===typeof window||!window.document||!window.document.createElement),e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=n(28),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),f(t,[{key:"render",value:function(){var e=this.props,t=e.location,n=e.size,r=c.a.div({height:n,width:"100%",backgroundColor:"inside"===t?d.a.background:"#ff0000",marginTop:5,marginBottom:5});return s.a.createElement(r,null)}}]),t}(o.Component);h.propTypes={location:u.a.string.isRequired,size:u.a.number.isRequired},h.defaultProps={location:"inside"},t.a=h},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=n(65),f=n.n(d),h=n(48),p=(n.n(h),n(28)),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=Object(c.a)(f.a)({width:"100%",height:600}),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.useCountBy,r=n?Object(h.countBy)(t):t,i=0;Object.keys(r).map(function(e,t){1==r[e]&&(delete r[e],i+=1)});var a=[];return Object.keys(r).map(function(e,t){a.push({key:e,value:r[e]})}),a=Object(h.reverse)(Object(h.sortBy)(a,"value")),i>0&&a.push({key:"others",value:i}),s.a.createElement(g,{useResizeHandler:!0,data:[{values:a.map(function(e){return e.value}),labels:a.map(function(e){return e.key}),type:"pie",hoverinfo:"label+value+percent",text:a.map(function(e){return e.key+" ("+e.value.toString()+")"}),textposition:"outside",direction:"clockwise",rotation:0,showlegend:!1,pull:.02,hole:.3,sort:!1,marker:{colors:a.length<=4?p.a.tealList[a.length.toString()]:a.length<=10?p.a.tealList[10]:p.a.tealList[19],line:{color:p.a.orange,width:.01}}}],layout:{autosize:!0,title:""},config:p.a.plotlyConfig})}}]),t}(s.a.Component);y.propTypes={data:u.a.oneOfType([u.a.array.isRequired,u.a.object.isRequired]),useCountBy:u.a.bool.isRequired},y.defaultProps={useCountBy:!0},t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=(n.n(l),n(17)),c=n(399),d=(n.n(c),n(47)),f=n.n(d),h=n(34),p=n.n(h),m=n(28),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=Object(u.a)(f.a)({textAlign:"center"}),v=Object(u.a)(c.CircularProgress)({paddingTop:100}),_=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),g(t,[{key:"render",value:function(){return s.a.createElement(f.a,{container:!0,spacing:24},s.a.createElement(y,{item:!0,xs:12,sm:12,md:12},s.a.createElement(v,{style:{color:m.a.orange},size:50}),s.a.createElement("br",null),s.a.createElement(p.a,null," generating plots ")))}}]),t}(s.a.Component);_.propTypes={},t.a=_},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=n(65),f=n.n(d),h=n(28),p=n(48),m=(n.n(p),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),g=Object(c.a)(f.a)({width:"100%",height:700}),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),m(t,[{key:"render",value:function(){var e=this.props,t=e.xData,n=e.yData,r=e.xAxis,i=e.yAxis,a=e.autobinx;return s.a.createElement(g,{useResizeHandler:!0,data:[{x:t,y:n,type:"histogram2d",histnorm:"",colorscale:h.a.tealScale,showscale:!0,colorbar:{thickness:10},autobinx:a,xbins:a?{}:{start:0,end:Object(p.ceil)(Object(p.max)(t)),size:1}}],layout:{margin:{l:140,r:50,b:120,t:50,pad:4},autosize:!0,title:"",xaxis:{ticks:"",side:"bottom",title:r},yaxis:{ticks:"",ticksuffix:" ",title:i}},config:h.a.plotlyConfig})}}]),t}(s.a.Component);y.propTypes={xData:u.a.array.isRequired,yData:u.a.array.isRequired,xAxis:u.a.string.isRequired,yAxis:u.a.string.isRequired,autobinx:u.a.bool.isRequired},y.defaultProps={autobinx:!0},t.a=y},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(4),o=n.n(a),s=n(5),l=n.n(s),u=n(8),c=n.n(u),d=n(9),f=n.n(d),h=n(1),p=(n.n(h),n(16).babelPluginFlowReactPropTypes_proptype_RenderedSection||n(0).any,n(413).babelPluginFlowReactPropTypes_proptype_ScrollIndices||n(0).any,function(e){function t(e){o()(this,t);var n=c()(this,(t.__proto__||i()(t)).call(this,e));return n._columnStartIndex=0,n._columnStopIndex=0,n._rowStartIndex=0,n._rowStopIndex=0,n._onKeyDown=function(e){var t=n.props,r=t.columnCount,i=t.disabled,a=t.mode,o=t.rowCount;if(!i){var s=n._getScrollState(),l=s.scrollToColumn,u=s.scrollToRow,c=n._getScrollState(),d=c.scrollToColumn,f=c.scrollToRow;switch(e.key){case"ArrowDown":f="cells"===a?Math.min(f+1,o-1):Math.min(n._rowStopIndex+1,o-1);break;case"ArrowLeft":d="cells"===a?Math.max(d-1,0):Math.max(n._columnStartIndex-1,0);break;case"ArrowRight":d="cells"===a?Math.min(d+1,r-1):Math.min(n._columnStopIndex+1,r-1);break;case"ArrowUp":f="cells"===a?Math.max(f-1,0):Math.max(n._rowStartIndex-1,0)}d===l&&f===u||(e.preventDefault(),n._updateScrollState({scrollToColumn:d,scrollToRow:f}))}},n._onSectionRendered=function(e){var t=e.columnStartIndex,r=e.columnStopIndex,i=e.rowStartIndex,a=e.rowStopIndex;n._columnStartIndex=t,n._columnStopIndex=r,n._rowStartIndex=i,n._rowStopIndex=a},n.state={scrollToColumn:e.scrollToColumn,scrollToRow:e.scrollToRow},n}return f()(t,e),l()(t,[{key:"componentWillReceiveProps",value:function(e){if(!this.props.isControlled){var t=e.scrollToColumn,n=e.scrollToRow,r=this.props,i=r.scrollToColumn,a=r.scrollToRow;i!==t&&a!==n?this.setState({scrollToColumn:t,scrollToRow:n}):i!==t?this.setState({scrollToColumn:t}):a!==n&&this.setState({scrollToRow:n})}}},{key:"setScrollIndexes",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow;this.setState({scrollToRow:n,scrollToColumn:t})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.children,r=this._getScrollState(),i=r.scrollToColumn,a=r.scrollToRow;return h.createElement("div",{className:t,onKeyDown:this._onKeyDown},n({onSectionRendered:this._onSectionRendered,scrollToColumn:i,scrollToRow:a}))}},{key:"_getScrollState",value:function(){return this.props.isControlled?this.props:this.state}},{key:"_updateScrollState",value:function(e){var t=e.scrollToColumn,n=e.scrollToRow,r=this.props,i=r.isControlled,a=r.onScrollToChange;"function"===typeof a&&a({scrollToColumn:t,scrollToRow:n}),i||this.setState({scrollToColumn:t,scrollToRow:n})}}]),t}(h.PureComponent));p.defaultProps={disabled:!1,isControlled:!1,mode:"edges",scrollToColumn:0,scrollToRow:0},p.propTypes=null},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(7),o=n.n(a),s=n(4),l=n.n(s),u=n(5),c=n.n(u),d=n(8),f=n.n(d),h=n(9),p=n.n(h),m=n(1),g=(n.n(m),n(6)),y=n.n(g),v=n(410),_=n(94),b=n(95),x=n(149),w=n(411),k=n(150),T=n(96),M=n.n(T),A=n(49),C=(n(10).babelPluginFlowReactPropTypes_proptype_Alignment||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_OverscanIndicesGetter||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_RenderedSection||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_ScrollbarPresenceChange||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_Scroll||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_NoContentRenderer||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_CellSizeGetter||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_CellSize||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_CellPosition||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_CellRangeRenderer||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_CellRenderer||n(0).any,n(49).babelPluginFlowReactPropTypes_proptype_AnimationTimeoutId||n(0).any,{OBSERVED:"observed",REQUESTED:"requested"}),S=function(){return null},E=function(e){function t(e){l()(this,t);var n=f()(this,(t.__proto__||o()(t)).call(this,e));return n.state={isScrolling:!1,scrollDirectionHorizontal:x.b,scrollDirectionVertical:x.b,scrollLeft:0,scrollTop:0,scrollPositionChangeReason:null},n._onGridRenderedMemoizer=Object(b.a)(),n._onScrollMemoizer=Object(b.a)(!1),n._deferredInvalidateColumnIndex=null,n._deferredInvalidateRowIndex=null,n._recomputeScrollLeftFlag=!1,n._recomputeScrollTopFlag=!1,n._horizontalScrollBarSize=0,n._verticalScrollBarSize=0,n._scrollbarPresenceChanged=!1,n._cellCache={},n._styleCache={},n._scrollbarSizeMeasured=!1,n._renderedColumnStartIndex=0,n._renderedColumnStopIndex=0,n._renderedRowStartIndex=0,n._renderedRowStopIndex=0,n._debounceScrollEndedCallback=function(){n._disablePointerEventsTimeoutId=null,n._resetStyleCache()},n._invokeOnGridRenderedHelper=function(){var e=n.props.onSectionRendered;n._onGridRenderedMemoizer({callback:e,indices:{columnOverscanStartIndex:n._columnStartIndex,columnOverscanStopIndex:n._columnStopIndex,columnStartIndex:n._renderedColumnStartIndex,columnStopIndex:n._renderedColumnStopIndex,rowOverscanStartIndex:n._rowStartIndex,rowOverscanStopIndex:n._rowStopIndex,rowStartIndex:n._renderedRowStartIndex,rowStopIndex:n._renderedRowStopIndex}})},n._setScrollingContainerRef=function(e){n._scrollingContainer=e},n._onScroll=function(e){e.target===n._scrollingContainer&&n.handleScrollEvent(e.target)},n._columnWidthGetter=n._wrapSizeGetter(e.columnWidth),n._rowHeightGetter=n._wrapSizeGetter(e.rowHeight),n._columnSizeAndPositionManager=new _.a({cellCount:e.columnCount,cellSizeGetter:function(e){return n._columnWidthGetter(e)},estimatedCellSize:n._getEstimatedColumnSize(e)}),n._rowSizeAndPositionManager=new _.a({cellCount:e.rowCount,cellSizeGetter:function(e){return n._rowHeightGetter(e)},estimatedCellSize:n._getEstimatedRowSize(e)}),n}return p()(t,e),c()(t,[{key:"getOffsetForCell",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.alignment,n=void 0===t?this.props.scrollToAlignment:t,r=e.columnIndex,a=void 0===r?this.props.scrollToColumn:r,o=e.rowIndex,s=void 0===o?this.props.scrollToRow:o,l=i()({},this.props,{scrollToAlignment:n,scrollToColumn:a,scrollToRow:s});return{scrollLeft:this._getCalculatedScrollLeft(l),scrollTop:this._getCalculatedScrollTop(l)}}},{key:"handleScrollEvent",value:function(e){var t=e.scrollLeft,n=void 0===t?0:t,r=e.scrollTop,i=void 0===r?0:r;if(!(i<0)){this._debounceScrollEnded();var a=this.props,o=a.autoHeight,s=a.autoWidth,l=a.height,u=a.width,c=this._scrollbarSize,d=this._rowSizeAndPositionManager.getTotalSize(),f=this._columnSizeAndPositionManager.getTotalSize(),h=Math.min(Math.max(0,f-u+c),n),p=Math.min(Math.max(0,d-l+c),i);if(this.state.scrollLeft!==h||this.state.scrollTop!==p){var m=h!==this.state.scrollLeft?h>this.state.scrollLeft?x.b:x.a:this.state.scrollDirectionHorizontal,g=p!==this.state.scrollTop?p>this.state.scrollTop?x.b:x.a:this.state.scrollDirectionVertical,y={isScrolling:!0,scrollDirectionHorizontal:m,scrollDirectionVertical:g,scrollPositionChangeReason:C.OBSERVED};o||(y.scrollTop=p),s||(y.scrollLeft=h),this.setState(y)}this._invokeOnScrollMemoizer({scrollLeft:h,scrollTop:p,totalColumnsWidth:f,totalRowsHeight:d})}}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this._deferredInvalidateColumnIndex="number"===typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,t):t,this._deferredInvalidateRowIndex="number"===typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,n):n}},{key:"measureAllCells",value:function(){var e=this.props,t=e.columnCount,n=e.rowCount;this._columnSizeAndPositionManager.getSizeAndPositionOfCell(t-1),this._rowSizeAndPositionManager.getSizeAndPositionOfCell(n-1)}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,i=void 0===r?0:r,a=this.props,o=a.scrollToColumn,s=a.scrollToRow;this._columnSizeAndPositionManager.resetCell(n),this._rowSizeAndPositionManager.resetCell(i),this._recomputeScrollLeftFlag=o>=0&&n<=o,this._recomputeScrollTopFlag=s>=0&&i<=s,this._cellCache={},this._styleCache={},this.forceUpdate()}},{key:"scrollToCell",value:function(e){var t=e.columnIndex,n=e.rowIndex,r=this.props.columnCount,a=this.props;r>1&&void 0!==t&&this._updateScrollLeftForScrollToColumn(i()({},a,{scrollToColumn:t})),void 0!==n&&this._updateScrollTopForScrollToRow(i()({},a,{scrollToRow:n}))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.getScrollbarSize,n=e.height,r=e.scrollLeft,i=e.scrollToColumn,a=e.scrollTop,o=e.scrollToRow,s=e.width;this._handleInvalidatedGridSize(),this._scrollbarSizeMeasured||(this._scrollbarSize=t(),this._scrollbarSizeMeasured=!0,this.setState({})),("number"===typeof r&&r>=0||"number"===typeof a&&a>=0)&&this.scrollToPosition({scrollLeft:r,scrollTop:a});var l=n>0&&s>0;i>=0&&l&&this._updateScrollLeftForScrollToColumn(),o>=0&&l&&this._updateScrollTopForScrollToRow(),this._invokeOnGridRenderedHelper(),this._invokeOnScrollMemoizer({scrollLeft:r||0,scrollTop:a||0,totalColumnsWidth:this._columnSizeAndPositionManager.getTotalSize(),totalRowsHeight:this._rowSizeAndPositionManager.getTotalSize()}),this._maybeCallOnScrollbarPresenceChange()}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=this.props,i=r.autoHeight,a=r.autoWidth,o=r.columnCount,s=r.height,l=r.rowCount,u=r.scrollToAlignment,c=r.scrollToColumn,d=r.scrollToRow,f=r.width,h=this.state,p=h.scrollLeft,m=h.scrollPositionChangeReason,g=h.scrollTop;this._handleInvalidatedGridSize();var y=o>0&&0===e.columnCount||l>0&&0===e.rowCount;m===C.REQUESTED&&(!a&&p>=0&&(p!==t.scrollLeft&&p!==this._scrollingContainer.scrollLeft||y)&&(this._scrollingContainer.scrollLeft=p),!i&&g>=0&&(g!==t.scrollTop&&g!==this._scrollingContainer.scrollTop||y)&&(this._scrollingContainer.scrollTop=g));var v=(0===e.width||0===e.height)&&s>0&&f>0;if(this._recomputeScrollLeftFlag?(this._recomputeScrollLeftFlag=!1,this._updateScrollLeftForScrollToColumn(this.props)):Object(w.a)({cellSizeAndPositionManager:this._columnSizeAndPositionManager,previousCellsCount:e.columnCount,previousCellSize:e.columnWidth,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToColumn,previousSize:e.width,scrollOffset:p,scrollToAlignment:u,scrollToIndex:c,size:f,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return n._updateScrollLeftForScrollToColumn(n.props)}}),this._recomputeScrollTopFlag?(this._recomputeScrollTopFlag=!1,this._updateScrollTopForScrollToRow(this.props)):Object(w.a)({cellSizeAndPositionManager:this._rowSizeAndPositionManager,previousCellsCount:e.rowCount,previousCellSize:e.rowHeight,previousScrollToAlignment:e.scrollToAlignment,previousScrollToIndex:e.scrollToRow,previousSize:e.height,scrollOffset:g,scrollToAlignment:u,scrollToIndex:d,size:s,sizeJustIncreasedFromZero:v,updateScrollIndexCallback:function(){return n._updateScrollTopForScrollToRow(n.props)}}),this._invokeOnGridRenderedHelper(),p!==t.scrollLeft||g!==t.scrollTop){var _=this._rowSizeAndPositionManager.getTotalSize(),b=this._columnSizeAndPositionManager.getTotalSize();this._invokeOnScrollMemoizer({scrollLeft:p,scrollTop:g,totalColumnsWidth:b,totalRowsHeight:_})}this._maybeCallOnScrollbarPresenceChange()}},{key:"componentWillMount",value:function(){var e=this.props.getScrollbarSize;this._scrollbarSize=e(),void 0===this._scrollbarSize?(this._scrollbarSizeMeasured=!1,this._scrollbarSize=0):this._scrollbarSizeMeasured=!0,this._calculateChildrenToRender()}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&Object(A.cancelAnimationTimeout)(this._disablePointerEventsTimeoutId)}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.state,r=n.scrollLeft,i=n.scrollTop;if(0===e.columnCount&&0!==r||0===e.rowCount&&0!==i)this.scrollToPosition({scrollLeft:0,scrollTop:0});else if(e.scrollLeft!==this.props.scrollLeft||e.scrollTop!==this.props.scrollTop){var a={};null!=e.scrollLeft&&(a.scrollLeft=e.scrollLeft),null!=e.scrollTop&&(a.scrollTop=e.scrollTop),this.scrollToPosition(a)}e.columnWidth===this.props.columnWidth&&e.rowHeight===this.props.rowHeight||(this._styleCache={}),this._columnWidthGetter=this._wrapSizeGetter(e.columnWidth),this._rowHeightGetter=this._wrapSizeGetter(e.rowHeight),this._columnSizeAndPositionManager.configure({cellCount:e.columnCount,estimatedCellSize:this._getEstimatedColumnSize(e)}),this._rowSizeAndPositionManager.configure({cellCount:e.rowCount,estimatedCellSize:this._getEstimatedRowSize(e)});var o=this.props,s=o.columnCount,l=o.rowCount;0!==s&&0!==l||(s=0,l=0),e.autoHeight&&!1===e.isScrolling&&!0===this.props.isScrolling&&this._resetStyleCache(),Object(v.a)({cellCount:s,cellSize:"number"===typeof this.props.columnWidth?this.props.columnWidth:null,computeMetadataCallback:function(){return t._columnSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.columnCount,nextCellSize:"number"===typeof e.columnWidth?e.columnWidth:null,nextScrollToIndex:e.scrollToColumn,scrollToIndex:this.props.scrollToColumn,updateScrollOffsetForScrollToIndex:function(){return t._updateScrollLeftForScrollToColumn(e,t.state)}}),Object(v.a)({cellCount:l,cellSize:"number"===typeof this.props.rowHeight?this.props.rowHeight:null,computeMetadataCallback:function(){return t._rowSizeAndPositionManager.resetCell(0)},computeMetadataCallbackProps:e,nextCellsCount:e.rowCount,nextCellSize:"number"===typeof e.rowHeight?e.rowHeight:null,nextScrollToIndex:e.scrollToRow,scrollToIndex:this.props.scrollToRow,updateScrollOffsetForScrollToIndex:function(){return t._updateScrollTopForScrollToRow(e,t.state)}})}},{key:"componentWillUpdate",value:function(e,t){this._calculateChildrenToRender(e,t)}},{key:"render",value:function(){var e=this.props,t=e.autoContainerWidth,n=e.autoHeight,r=e.autoWidth,a=e.className,o=e.containerProps,s=e.containerRole,l=e.containerStyle,u=e.height,c=e.id,d=e.noContentRenderer,f=e.role,h=e.style,p=e.tabIndex,g=e.width,v=this._isScrolling(),_={boxSizing:"border-box",direction:"ltr",height:n?"auto":u,position:"relative",width:r?"auto":g,WebkitOverflowScrolling:"touch",willChange:"transform"},b=this._columnSizeAndPositionManager.getTotalSize(),x=this._rowSizeAndPositionManager.getTotalSize(),w=x>u?this._scrollbarSize:0,k=b>g?this._scrollbarSize:0;k===this._horizontalScrollBarSize&&w===this._verticalScrollBarSize||(this._horizontalScrollBarSize=k,this._verticalScrollBarSize=w,this._scrollbarPresenceChanged=!0),_.overflowX=b+w<=g?"hidden":"auto",_.overflowY=x+k<=u?"hidden":"auto";var T=this._childrenToDisplay,M=0===T.length&&u>0&&g>0;return m.createElement("div",i()({ref:this._setScrollingContainerRef},o,{"aria-label":this.props["aria-label"],"aria-readonly":this.props["aria-readonly"],className:y()("ReactVirtualized__Grid",a),id:c,onScroll:this._onScroll,role:f,style:i()({},_,h),tabIndex:p}),T.length>0&&m.createElement("div",{className:"ReactVirtualized__Grid__innerScrollContainer",role:s,style:i()({width:t?"auto":b,height:x,maxWidth:b,maxHeight:x,overflow:"hidden",pointerEvents:v?"none":"",position:"relative"},l)},T),M&&d())}},{key:"_calculateChildrenToRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.cellRenderer,r=e.cellRangeRenderer,i=e.columnCount,a=e.deferredMeasurementCache,o=e.height,s=e.overscanColumnCount,l=e.overscanIndicesGetter,u=e.overscanRowCount,c=e.rowCount,d=e.width,f=t.scrollDirectionHorizontal,h=t.scrollDirectionVertical,p=t.scrollLeft,m=t.scrollTop,g=this._isScrolling(e,t);if(this._childrenToDisplay=[],o>0&&d>0){var y=this._columnSizeAndPositionManager.getVisibleCellRange({containerSize:d,offset:p}),v=this._rowSizeAndPositionManager.getVisibleCellRange({containerSize:o,offset:m}),_=this._columnSizeAndPositionManager.getOffsetAdjustment({containerSize:d,offset:p}),b=this._rowSizeAndPositionManager.getOffsetAdjustment({containerSize:o,offset:m});this._renderedColumnStartIndex=y.start,this._renderedColumnStopIndex=y.stop,this._renderedRowStartIndex=v.start,this._renderedRowStopIndex=v.stop;var x=l({direction:"horizontal",cellCount:i,overscanCellsCount:s,scrollDirection:f,startIndex:"number"===typeof y.start?y.start:0,stopIndex:"number"===typeof y.stop?y.stop:-1}),w=l({direction:"vertical",cellCount:c,overscanCellsCount:u,scrollDirection:h,startIndex:"number"===typeof v.start?v.start:0,stopIndex:"number"===typeof v.stop?v.stop:-1});if(this._columnStartIndex=x.overscanStartIndex,this._columnStopIndex=x.overscanStopIndex,this._rowStartIndex=w.overscanStartIndex,this._rowStopIndex=w.overscanStopIndex,a){if(!a.hasFixedHeight())for(var k=this._rowStartIndex;k<=this._rowStopIndex;k++)if(!a.has(k,0)){this._columnStartIndex=0,this._columnStopIndex=i-1;break}if(!a.hasFixedWidth())for(var T=this._columnStartIndex;T<=this._columnStopIndex;T++)if(!a.has(0,T)){this._rowStartIndex=0,this._rowStopIndex=c-1;break}}this._childrenToDisplay=r({cellCache:this._cellCache,cellRenderer:n,columnSizeAndPositionManager:this._columnSizeAndPositionManager,columnStartIndex:this._columnStartIndex,columnStopIndex:this._columnStopIndex,deferredMeasurementCache:a,horizontalOffsetAdjustment:_,isScrolling:g,parent:this,rowSizeAndPositionManager:this._rowSizeAndPositionManager,rowStartIndex:this._rowStartIndex,rowStopIndex:this._rowStopIndex,scrollLeft:p,scrollTop:m,styleCache:this._styleCache,verticalOffsetAdjustment:b,visibleColumnIndices:y,visibleRowIndices:v})}}},{key:"_debounceScrollEnded",value:function(){var e=this.props.scrollingResetTimeInterval;this._disablePointerEventsTimeoutId&&Object(A.cancelAnimationTimeout)(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=Object(A.requestAnimationTimeout)(this._debounceScrollEndedCallback,e)}},{key:"_getEstimatedColumnSize",value:function(e){return"number"===typeof e.columnWidth?e.columnWidth:e.estimatedColumnSize}},{key:"_getEstimatedRowSize",value:function(e){return"number"===typeof e.rowHeight?e.rowHeight:e.estimatedRowSize}},{key:"_handleInvalidatedGridSize",value:function(){if("number"===typeof this._deferredInvalidateColumnIndex&&"number"===typeof this._deferredInvalidateRowIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t})}}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,r=e.scrollTop,i=e.totalColumnsWidth,a=e.totalRowsHeight;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,r=e.scrollTop,o=t.props,s=o.height;(0,o.onScroll)({clientHeight:s,clientWidth:o.width,scrollHeight:a,scrollLeft:n,scrollTop:r,scrollWidth:i})},indices:{scrollLeft:n,scrollTop:r}})}},{key:"_isScrolling",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;return Object.hasOwnProperty.call(e,"isScrolling")?Boolean(e.isScrolling):Boolean(t.isScrolling)}},{key:"_maybeCallOnScrollbarPresenceChange",value:function(){if(this._scrollbarPresenceChanged){var e=this.props.onScrollbarPresenceChange;this._scrollbarPresenceChanged=!1,e({horizontal:this._horizontalScrollBarSize>0,size:this._scrollbarSize,vertical:this._verticalScrollBarSize>0})}}},{key:"scrollToPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,r={scrollPositionChangeReason:C.REQUESTED};"number"===typeof t&&t>=0&&(r.scrollDirectionHorizontal=t>this.state.scrollLeft?x.b:x.a,r.scrollLeft=t),"number"===typeof n&&n>=0&&(r.scrollDirectionVertical=n>this.state.scrollTop?x.b:x.a,r.scrollTop=n),("number"===typeof t&&t>=0&&t!==this.state.scrollLeft||"number"===typeof n&&n>=0&&n!==this.state.scrollTop)&&this.setState(r)}},{key:"_wrapSizeGetter",value:function(e){return"function"===typeof e?e:function(){return e}}},{key:"_getCalculatedScrollLeft",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.columnCount,r=e.height,i=e.scrollToAlignment,a=e.scrollToColumn,o=e.width,s=t.scrollLeft;if(n>0){var l=n-1,u=a<0?l:Math.min(l,a),c=this._rowSizeAndPositionManager.getTotalSize(),d=c>r?this._scrollbarSize:0;return this._columnSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:o-d,currentOffset:s,targetIndex:u})}}},{key:"_updateScrollLeftForScrollToColumn",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t.scrollLeft,r=this._getCalculatedScrollLeft(e,t);"number"===typeof r&&r>=0&&n!==r&&this.scrollToPosition({scrollLeft:r,scrollTop:-1})}},{key:"_getCalculatedScrollTop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=e.height,r=e.rowCount,i=e.scrollToAlignment,a=e.scrollToRow,o=e.width,s=t.scrollTop;if(r>0){var l=r-1,u=a<0?l:Math.min(l,a),c=this._columnSizeAndPositionManager.getTotalSize(),d=c>o?this._scrollbarSize:0;return this._rowSizeAndPositionManager.getUpdatedOffsetForIndex({align:i,containerSize:n-d,currentOffset:s,targetIndex:u})}}},{key:"_resetStyleCache",value:function(){var e=this._styleCache;this._cellCache={},this._styleCache={};for(var t=this._rowStartIndex;t<=this._rowStopIndex;t++)for(var n=this._columnStartIndex;n<=this._columnStopIndex;n++){var r=t+"-"+n;this._styleCache[r]=e[r]}this.setState({isScrolling:!1})}},{key:"_updateScrollTopForScrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state,n=t.scrollTop,r=this._getCalculatedScrollTop(e,t);"number"===typeof r&&r>=0&&n!==r&&this.scrollToPosition({scrollLeft:-1,scrollTop:r})}}]),t}(m.PureComponent);E.defaultProps={"aria-label":"grid","aria-readonly":!0,autoContainerWidth:!1,autoHeight:!1,autoWidth:!1,cellRangeRenderer:k.a,containerRole:"rowgroup",containerStyle:{},estimatedColumnSize:100,estimatedRowSize:30,getScrollbarSize:M.a,noContentRenderer:S,onScroll:function(){},onScrollbarPresenceChange:function(){},onSectionRendered:function(){},overscanColumnCount:0,overscanIndicesGetter:x.c,overscanRowCount:10,role:"grid",scrollingResetTimeInterval:150,scrollToAlignment:"auto",scrollToColumn:-1,scrollToRow:-1,style:{},tabIndex:0},E.propTypes=null,t.a=E},function(e,t,n){"use strict";function r(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,i=e.startIndex,o=e.stopIndex;return r===a?{overscanStartIndex:Math.max(0,i),overscanStopIndex:Math.min(t-1,o+n)}:{overscanStartIndex:Math.max(0,i-n),overscanStopIndex:Math.min(t-1,o)}}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return a}),t.c=r;var i=(n(10).babelPluginFlowReactPropTypes_proptype_OverscanIndices||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_OverscanIndicesGetterParams||n(0).any,-1),a=1},function(e,t,n){"use strict";function r(e){for(var t=e.cellCache,n=e.cellRenderer,r=e.columnSizeAndPositionManager,i=e.columnStartIndex,a=e.columnStopIndex,o=e.deferredMeasurementCache,s=e.horizontalOffsetAdjustment,l=e.isScrolling,u=e.parent,c=e.rowSizeAndPositionManager,d=e.rowStartIndex,f=e.rowStopIndex,h=e.styleCache,p=e.verticalOffsetAdjustment,m=e.visibleColumnIndices,g=e.visibleRowIndices,y=[],v=r.areOffsetsAdjusted()||c.areOffsetsAdjusted(),_=!l&&!v,b=d;b<=f;b++)for(var x=c.getSizeAndPositionOfCell(b),w=i;w<=a;w++){var k=r.getSizeAndPositionOfCell(w),T=w>=m.start&&w<=m.stop&&b>=g.start&&b<=g.stop,M=b+"-"+w,A=void 0;_&&h[M]?A=h[M]:o&&!o.has(b,w)?A={height:"auto",left:0,position:"absolute",top:0,width:"auto"}:(A={height:x.size,left:k.offset+s,position:"absolute",top:x.offset+p,width:k.size},h[M]=A);var C={columnIndex:w,isScrolling:l,isVisible:T,key:M,parent:u,rowIndex:b,style:A},S=void 0;!l||s||p?S=n(C):(t[M]||(t[M]=n(C)),S=t[M]),null!=S&&!1!==S&&y.push(S)}return y}t.a=r;n(10).babelPluginFlowReactPropTypes_proptype_CellRangeRendererParams||n(0).any},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(7),o=n.n(a),s=n(4),l=n.n(s),u=n(5),c=n.n(u),d=n(8),f=n.n(d),h=n(9),p=n.n(h),m=n(1),g=(n.n(m),n(152)),y=function(e){function t(){var e,n,r,i;l()(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return n=r=f()(this,(e=t.__proto__||o()(t)).call.apply(e,[this].concat(s))),r.state={height:r.props.defaultHeight||0,width:r.props.defaultWidth||0},r._onResize=function(){var e=r.props,t=e.disableHeight,n=e.disableWidth,i=e.onResize;if(r._parentNode){var a=r._parentNode.offsetHeight||0,o=r._parentNode.offsetWidth||0,s=window.getComputedStyle(r._parentNode)||{},l=parseInt(s.paddingLeft,10)||0,u=parseInt(s.paddingRight,10)||0,c=parseInt(s.paddingTop,10)||0,d=parseInt(s.paddingBottom,10)||0,f=a-c-d,h=o-l-u;(!t&&r.state.height!==f||!n&&r.state.width!==h)&&(r.setState({height:a-c-d,width:o-l-u}),i({height:a,width:o}))}},r._setRef=function(e){r._autoSizer=e},i=n,f()(r,i)}return p()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this.props.nonce;this._autoSizer&&this._autoSizer.parentNode&&this._autoSizer.parentNode.ownerDocument&&this._autoSizer.parentNode.ownerDocument.defaultView&&this._autoSizer.parentNode instanceof this._autoSizer.parentNode.ownerDocument.defaultView.HTMLElement&&(this._parentNode=this._autoSizer.parentNode,this._detectElementResize=Object(g.a)(e),this._detectElementResize.addResizeListener(this._parentNode,this._onResize),this._onResize())}},{key:"componentWillUnmount",value:function(){this._detectElementResize&&this._parentNode&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize)}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.disableHeight,a=e.disableWidth,o=e.style,s=this.state,l=s.height,u=s.width,c={overflow:"visible"},d={};return r||(c.height=0,d.height=l),a||(c.width=0,d.width=u),m.createElement("div",{className:n,ref:this._setRef,style:i()({},c,o)},t(d))}}]),t}(m.PureComponent);y.defaultProps={onResize:function(){},disableHeight:!1,disableWidth:!1,style:{}},y.propTypes=null,t.a=y},function(e,t,n){"use strict";(function(e){function n(t){var n;n="undefined"!==typeof window?window:"undefined"!==typeof self?self:e;var r="undefined"!==typeof document&&document.attachEvent;if(!r){var i=function(){var e=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||function(e){return n.setTimeout(e,20)};return function(t){return e(t)}}(),a=function(){var e=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.clearTimeout;return function(t){return e(t)}}(),o=function(e){var t=e.__resizeTriggers__,n=t.firstElementChild,r=t.lastElementChild,i=n.firstElementChild;r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight,i.style.width=n.offsetWidth+1+"px",i.style.height=n.offsetHeight+1+"px",n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight},s=function(e){return e.offsetWidth!=e.__resizeLast__.width||e.offsetHeight!=e.__resizeLast__.height},l=function(e){if(!(e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)){var t=this;o(this),this.__resizeRAF__&&a(this.__resizeRAF__),this.__resizeRAF__=i(function(){s(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(n){n.call(t,e)}))})}},u=!1,c="",d="animationstart",f="Webkit Moz O ms".split(" "),h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),p="",m=document.createElement("fakeelement");if(void 0!==m.style.animationName&&(u=!0),!1===u)for(var g=0;g<f.length;g++)if(void 0!==m.style[f[g]+"AnimationName"]){p=f[g],c="-"+p.toLowerCase()+"-",d=h[g],u=!0;break}var y="resizeanim",v="@"+c+"keyframes "+y+" { from { opacity: 0; } to { opacity: 0; } } ",_=c+"animation: 1ms "+y+"; "}var b=function(e){if(!e.getElementById("detectElementResize")){var n=(v||"")+".resize-triggers { "+(_||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',r=e.head||e.getElementsByTagName("head")[0],i=e.createElement("style");i.id="detectElementResize",i.type="text/css",null!=t&&i.setAttribute("nonce",t),i.styleSheet?i.styleSheet.cssText=n:i.appendChild(e.createTextNode(n)),r.appendChild(i)}};return{addResizeListener:function(e,t){if(r)e.attachEvent("onresize",t);else{if(!e.__resizeTriggers__){var i=e.ownerDocument,a=n.getComputedStyle(e);a&&"static"==a.position&&(e.style.position="relative"),b(i),e.__resizeLast__={},e.__resizeListeners__=[],(e.__resizeTriggers__=i.createElement("div")).className="resize-triggers",e.__resizeTriggers__.innerHTML='<div class="expand-trigger"><div></div></div><div class="contract-trigger"></div>',e.appendChild(e.__resizeTriggers__),o(e),e.addEventListener("scroll",l,!0),d&&(e.__resizeTriggers__.__animationListener__=function(t){t.animationName==y&&o(e)},e.__resizeTriggers__.addEventListener(d,e.__resizeTriggers__.__animationListener__))}e.__resizeListeners__.push(t)}},removeResizeListener:function(e,t){if(r)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",l,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(d,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}t.a=n}).call(t,n(23))},function(e,t,n){"use strict";var r=n(415);n(154),r.a},function(e,t,n){"use strict";function r(e,t){return e+"-"+t}var i=n(4),a=n.n(i),o=n(5),s=n.n(o),l=30,u=100;!function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a()(this,e),this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._columnCount=0,this._rowCount=0,this.columnWidth=function(e){var n=e.index,r=t._keyMapper(0,n);return t._columnWidthCache.hasOwnProperty(r)?t._columnWidthCache[r]:t._defaultWidth},this.rowHeight=function(e){var n=e.index,r=t._keyMapper(n,0);return t._rowHeightCache.hasOwnProperty(r)?t._rowHeightCache[r]:t._defaultHeight};var i=n.defaultHeight,o=n.defaultWidth,s=n.fixedHeight,c=n.fixedWidth,d=n.keyMapper,f=n.minHeight,h=n.minWidth;this._hasFixedHeight=!0===s,this._hasFixedWidth=!0===c,this._minHeight=f||0,this._minWidth=h||0,this._keyMapper=d||r,this._defaultHeight=Math.max(this._minHeight,"number"===typeof i?i:l),this._defaultWidth=Math.max(this._minWidth,"number"===typeof o?o:u)}s()(e,[{key:"clear",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._keyMapper(e,t);delete this._cellHeightCache[n],delete this._cellWidthCache[n],this._updateCachedColumnAndRowSizes(e,t)}},{key:"clearAll",value:function(){this._cellHeightCache={},this._cellWidthCache={},this._columnWidthCache={},this._rowHeightCache={},this._rowCount=0,this._columnCount=0}},{key:"hasFixedHeight",value:function(){return this._hasFixedHeight}},{key:"hasFixedWidth",value:function(){return this._hasFixedWidth}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedHeight)return this._defaultHeight;var n=this._keyMapper(e,t);return this._cellHeightCache.hasOwnProperty(n)?Math.max(this._minHeight,this._cellHeightCache[n]):this._defaultHeight}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this._hasFixedWidth)return this._defaultWidth;var n=this._keyMapper(e,t);return this._cellWidthCache.hasOwnProperty(n)?Math.max(this._minWidth,this._cellWidthCache[n]):this._defaultWidth}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this._keyMapper(e,t);return this._cellHeightCache.hasOwnProperty(n)}},{key:"set",value:function(e,t,n,r){var i=this._keyMapper(e,t);t>=this._columnCount&&(this._columnCount=t+1),e>=this._rowCount&&(this._rowCount=e+1),this._cellHeightCache[i]=r,this._cellWidthCache[i]=n,this._updateCachedColumnAndRowSizes(e,t)}},{key:"_updateCachedColumnAndRowSizes",value:function(e,t){if(!this._hasFixedWidth){for(var n=0,r=0;r<this._rowCount;r++)n=Math.max(n,this.getWidth(r,t));var i=this._keyMapper(0,t);this._columnWidthCache[i]=n}if(!this._hasFixedHeight){for(var a=0,o=0;o<this._columnCount;o++)a=Math.max(a,this.getHeight(e,o));var s=this._keyMapper(e,0);this._rowHeightCache[s]=a}}},{key:"defaultHeight",get:function(){return this._defaultHeight}},{key:"defaultWidth",get:function(){return this._defaultWidth}}])}()},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(428),o=n.n(a),s=n(7),l=n.n(s),u=n(4),c=n.n(u),d=n(5),f=n.n(d),h=n(8),p=n.n(h),m=n(9),g=n.n(m),y=n(16),v=n(1),_=(n.n(v),n(6)),b=n.n(_),x=(n(16).babelPluginFlowReactPropTypes_proptype_Scroll||n(0).any,n(16).babelPluginFlowReactPropTypes_proptype_CellRendererParams||n(0).any,n(16).babelPluginFlowReactPropTypes_proptype_RenderedSection||n(0).any,n(16).babelPluginFlowReactPropTypes_proptype_OverscanIndicesGetter||n(0).any,n(16).babelPluginFlowReactPropTypes_proptype_CellPosition||n(0).any,n(16).babelPluginFlowReactPropTypes_proptype_CellSize||n(0).any,n(16).babelPluginFlowReactPropTypes_proptype_Alignment||n(0).any,n(16).babelPluginFlowReactPropTypes_proptype_NoContentRenderer||n(0).any,n(97).babelPluginFlowReactPropTypes_proptype_Scroll||n(0).any,n(97).babelPluginFlowReactPropTypes_proptype_RenderedRows||n(0).any,n(97).babelPluginFlowReactPropTypes_proptype_RowRenderer||n(0).any,function(e){function t(){var e,n,r,i;c()(this,t);for(var a=arguments.length,s=Array(a),u=0;u<a;u++)s[u]=arguments[u];return n=r=p()(this,(e=t.__proto__||l()(t)).call.apply(e,[this].concat(s))),r._cellRenderer=function(e){var t=e.parent,n=e.rowIndex,i=e.style,a=e.isScrolling,s=e.isVisible,l=e.key,u=r.props.rowRenderer;return o()(i,"width").writable&&(i.width="100%"),u({index:n,style:i,isScrolling:a,isVisible:s,key:l,parent:t})},r._setRef=function(e){r.Grid=e},r._onScroll=function(e){var t=e.clientHeight,n=e.scrollHeight,i=e.scrollTop;(0,r.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:i})},r._onSectionRendered=function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,i=e.rowStartIndex,a=e.rowStopIndex;(0,r.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:i,stopIndex:a})},i=n,p()(r,i)}return g()(t,e),f()(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;if(this.Grid){return this.Grid.getOffsetForCell({alignment:t,rowIndex:n,columnIndex:0}).scrollTop}return 0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,i=void 0===r?0:r;this.Grid&&this.Grid.recomputeGridSize({rowIndex:i,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e,columnIndex:0})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.noRowsRenderer,r=e.scrollToIndex,a=e.width,o=b()("ReactVirtualized__List",t);return v.createElement(y.default,i()({},this.props,{autoContainerWidth:!0,cellRenderer:this._cellRenderer,className:o,columnWidth:a,columnCount:1,noContentRenderer:n,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,scrollToRow:r}))}}]),t}(v.PureComponent));x.defaultProps={autoHeight:!1,estimatedRowSize:30,onScroll:function(){},noRowsRenderer:function(){return null},onRowsRendered:function(){},overscanIndicesGetter:y.accessibilityOverscanIndicesGetter,overscanRowCount:10,scrollToAlignment:"auto",scrollToIndex:-1,style:{}},x.propTypes=null},function(e,t,n){"use strict";function r(e){var t=e.dataKey,n=e.rowData;return"function"===typeof n.get?n.get(t):n[t]}t.a=r;n(50).babelPluginFlowReactPropTypes_proptype_CellDataGetterParams||n(0).any},function(e,t,n){"use strict";function r(e){var t=e.cellData;return null==t?"":String(t)}t.a=r;n(50).babelPluginFlowReactPropTypes_proptype_CellRendererParams||n(0).any},function(e,t,n){"use strict";function r(e){var t=e.className,n=e.columns,r=e.style;return a.a.createElement("div",{className:t,role:"row",style:r},n)}t.a=r;var i=n(1),a=n.n(i);n(50).babelPluginFlowReactPropTypes_proptype_HeaderRowRendererParams||n(0).any;r.propTypes=null},function(e,t,n){"use strict";function r(e){var t=e.dataKey,n=e.label,r=e.sortBy,i=e.sortDirection,s=r===t,l=[a.a.createElement("span",{className:"ReactVirtualized__Table__headerTruncatedText",key:"label",title:n},n)];return s&&l.push(a.a.createElement(o.a,{key:"SortIndicator",sortDirection:i})),l}t.a=r;var i=n(1),a=n.n(i),o=n(160);n(50).babelPluginFlowReactPropTypes_proptype_HeaderRendererParams||n(0).any;r.propTypes=null},function(e,t,n){"use strict";function r(e){var t=e.sortDirection,n=a()("ReactVirtualized__Table__sortableHeaderIcon",{"ReactVirtualized__Table__sortableHeaderIcon--ASC":t===u.a.ASC,"ReactVirtualized__Table__sortableHeaderIcon--DESC":t===u.a.DESC});return l.a.createElement("svg",{className:n,width:18,height:18,viewBox:"0 0 24 24"},t===u.a.ASC?l.a.createElement("path",{d:"M7 14l5-5 5 5z"}):l.a.createElement("path",{d:"M7 10l5 5 5-5z"}),l.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}))}t.a=r;var i=n(6),a=n.n(i),o=n(0),s=(n.n(o),n(1)),l=n.n(s),u=n(66);r.propTypes={}},function(e,t,n){"use strict";function r(e){var t=e.className,n=e.columns,r=e.index,i=e.key,o=e.onRowClick,l=e.onRowDoubleClick,u=e.onRowMouseOut,c=e.onRowMouseOver,d=e.onRowRightClick,f=e.rowData,h=e.style,p={};return(o||l||u||c||d)&&(p["aria-label"]="row",p.tabIndex=0,o&&(p.onClick=function(e){return o({event:e,index:r,rowData:f})}),l&&(p.onDoubleClick=function(e){return l({event:e,index:r,rowData:f})}),u&&(p.onMouseOut=function(e){return u({event:e,index:r,rowData:f})}),c&&(p.onMouseOver=function(e){return c({event:e,index:r,rowData:f})}),d&&(p.onContextMenu=function(e){return d({event:e,index:r,rowData:f})})),s.a.createElement("div",a()({},p,{className:t,key:i,role:"row",style:h}),n)}t.a=r;var i=n(2),a=n.n(i),o=n(1),s=n.n(o);n(50).babelPluginFlowReactPropTypes_proptype_RowRendererParams||n(0).any;r.propTypes=null},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(4),o=n.n(a),s=n(8),l=n.n(s),u=n(9),c=n.n(u),d=n(0),f=(n.n(d),n(1)),h=(n.n(f),n(159)),p=n(157),m=n(156),g=n(66),y=function(e){function t(){return o()(this,t),l()(this,(t.__proto__||i()(t)).apply(this,arguments))}return c()(t,e),t}(f.Component);y.defaultProps={cellDataGetter:m.a,cellRenderer:p.a,defaultSortDirection:g.a.ASC,flexGrow:0,flexShrink:1,headerRenderer:h.a,style:{}};y.propTypes={}},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(7),o=n.n(a),s=n(4),l=n.n(s),u=n(5),c=n.n(u),d=n(8),f=n.n(d),h=n(9),p=n.n(h),m=n(1),g=(n.n(m),n(29)),y=n.n(g),v=n(452),_=n(453),b=n(152),x=function(){return"undefined"!==typeof window?window:void 0},w=function(e){function t(){var e,n,r,a;l()(this,t);for(var s=arguments.length,u=Array(s),c=0;c<s;c++)u[c]=arguments[c];return n=r=f()(this,(e=t.__proto__||o()(t)).call.apply(e,[this].concat(u))),r._window=x(),r._isMounted=!1,r._positionFromTop=0,r._positionFromLeft=0,r.state=i()({},Object(_.a)(r.props.scrollElement,r.props),{isScrolling:!1,scrollLeft:0,scrollTop:0}),r._registerChild=function(e){!e||e instanceof Element||console.warn("WindowScroller registerChild expects to be passed Element or null"),r._child=e,r.updatePosition()},r._onChildScroll=function(e){var t=e.scrollTop;if(r.state.scrollTop!==t){var n=r.props.scrollElement;n&&("function"===typeof n.scrollTo?n.scrollTo(0,t+r._positionFromTop):n.scrollTop=t+r._positionFromTop)}},r._registerResizeListener=function(e){e===window?window.addEventListener("resize",r._onResize,!1):r._detectElementResize.addResizeListener(e,r._onResize)},r._unregisterResizeListener=function(e){e===window?window.removeEventListener("resize",r._onResize,!1):e&&r._detectElementResize.removeResizeListener(e,r._onResize)},r._onResize=function(){r.updatePosition()},r.__handleWindowScrollEvent=function(){if(r._isMounted){var e=r.props.onScroll,t=r.props.scrollElement;if(t){var n=Object(_.c)(t),i=Math.max(0,n.left-r._positionFromLeft),a=Math.max(0,n.top-r._positionFromTop);r.setState({isScrolling:!0,scrollLeft:i,scrollTop:a}),e({scrollLeft:i,scrollTop:a})}}},r.__resetIsScrolling=function(){r.setState({isScrolling:!1})},a=n,f()(r,a)}return p()(t,e),c()(t,[{key:"updatePosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.scrollElement,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props,n=this.props.onResize,r=this.state,i=r.height,a=r.width,o=this._child||y.a.findDOMNode(this);if(o instanceof Element&&e){var s=Object(_.b)(o,e);this._positionFromTop=s.top,this._positionFromLeft=s.left}var l=Object(_.a)(e,t);i===l.height&&a===l.width||(this.setState({height:l.height,width:l.width}),n({height:l.height,width:l.width}))}},{key:"componentDidMount",value:function(){var e=this.props.scrollElement;this._detectElementResize=Object(b.a)(),this.updatePosition(e),e&&(Object(v.a)(this,e),this._registerResizeListener(e)),this._isMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.scrollElement,n=e.scrollElement;t!==n&&t&&n&&(this.updatePosition(n,e),Object(v.b)(this,t),Object(v.a)(this,n),this._unregisterResizeListener(t),this._registerResizeListener(n))}},{key:"componentWillUnmount",value:function(){var e=this.props.scrollElement;e&&(Object(v.b)(this,e),this._unregisterResizeListener(e)),this._isMounted=!1}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.isScrolling,r=t.scrollTop,i=t.scrollLeft,a=t.height,o=t.width;return e({onChildScroll:this._onChildScroll,registerChild:this._registerChild,height:a,isScrolling:n,scrollLeft:i,scrollTop:r,width:o})}}]),t}(m.PureComponent);w.defaultProps={onResize:function(){},onScroll:function(){},scrollingResetTimeInterval:150,scrollElement:x(),serverHeight:0,serverWidth:0},w.propTypes=null,t.a=w},function(e,t,n){n(165),e.exports=n(170)},function(e,t,n){"use strict";"undefined"===typeof Promise&&(n(166).enable(),window.Promise=n(168)),n(169),Object.assign=n(35)},function(e,t,n){"use strict";function r(){u=!1,s._47=null,s._71=null}function i(e){function t(t){(e.allRejections||o(d[t].error,e.whitelist||l))&&(d[t].displayId=c++,e.onUnhandled?(d[t].logged=!0,e.onUnhandled(d[t].displayId,d[t].error)):(d[t].logged=!0,a(d[t].displayId,d[t].error)))}function n(t){d[t].logged&&(e.onHandled?e.onHandled(d[t].displayId,d[t].error):d[t].onUnhandled||(console.warn("Promise Rejection Handled (id: "+d[t].displayId+"):"),console.warn('  This means you can ignore any previous messages of the form "Possible Unhandled Promise Rejection" with id '+d[t].displayId+".")))}e=e||{},u&&r(),u=!0;var i=0,c=0,d={};s._47=function(e){2===e._83&&d[e._56]&&(d[e._56].logged?n(e._56):clearTimeout(d[e._56].timeout),delete d[e._56])},s._71=function(e,n){0===e._75&&(e._56=i++,d[e._56]={displayId:null,error:n,timeout:setTimeout(t.bind(null,e._56),o(n,l)?100:2e3),logged:!1})}}function a(e,t){console.warn("Possible Unhandled Promise Rejection (id: "+e+"):"),((t&&(t.stack||t))+"").split("\n").forEach(function(e){console.warn("  "+e)})}function o(e,t){return t.some(function(t){return e instanceof t})}var s=n(99),l=[ReferenceError,TypeError,RangeError],u=!1;t.disable=r,t.enable=i},function(e,t,n){"use strict";(function(t){function n(e){o.length||(a(),s=!0),o[o.length]=e}function r(){for(;l<o.length;){var e=l;if(l+=1,o[e].call(),l>u){for(var t=0,n=o.length-l;t<n;t++)o[t]=o[t+l];o.length-=l,l=0}}o.length=0,l=0,s=!1}function i(e){return function(){function t(){clearTimeout(n),clearInterval(r),e()}var n=setTimeout(t,0),r=setInterval(t,50)}}e.exports=n;var a,o=[],s=!1,l=0,u=1024,c="undefined"!==typeof t?t:self,d=c.MutationObserver||c.WebKitMutationObserver;a="function"===typeof d?function(e){var t=1,n=new d(e),r=document.createTextNode("");return n.observe(r,{characterData:!0}),function(){t=-t,r.data=t}}(r):i(r),n.requestFlush=a,n.makeRequestCallFromTimer=i}).call(t,n(23))},function(e,t,n){"use strict";function r(e){var t=new i(i._44);return t._83=1,t._18=e,t}var i=n(99);e.exports=i;var a=r(!0),o=r(!1),s=r(null),l=r(void 0),u=r(0),c=r("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return a;if(!1===e)return o;if(0===e)return u;if(""===e)return c;if("object"===typeof e||"function"===typeof e)try{var t=e.then;if("function"===typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,n){n(e)})}return r(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,n){function r(o,s){if(s&&("object"===typeof s||"function"===typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._83;)s=s._18;return 1===s._83?r(o,s._18):(2===s._83&&n(s._18),void s.then(function(e){r(o,e)},n))}var l=s.then;if("function"===typeof l){return void new i(l.bind(s)).then(function(e){r(o,e)},n)}}t[o]=s,0===--a&&e(t)}if(0===t.length)return e([]);for(var a=t.length,o=0;o<t.length;o++)r(o,t[o])})},i.reject=function(e){return new i(function(t,n){n(e)})},i.race=function(e){return new i(function(t,n){e.forEach(function(e){i.resolve(e).then(t,n)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t){!function(e){"use strict";function t(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!==typeof e&&(e=String(e)),e}function r(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function i(e){this.map={},e instanceof i?e.forEach(function(e,t){this.append(t,e)},this):Array.isArray(e)?e.forEach(function(e){this.append(e[0],e[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function a(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function o(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader,n=o(t);return t.readAsArrayBuffer(e),n}function l(e){var t=new FileReader,n=o(t);return t.readAsText(e),n}function u(e){for(var t=new Uint8Array(e),n=new Array(t.length),r=0;r<t.length;r++)n[r]=String.fromCharCode(t[r]);return n.join("")}function c(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,e)if("string"===typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(y.arrayBuffer&&y.blob&&_(e))this._bodyArrayBuffer=c(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e)&&!b(e))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=c(e)}else this._bodyText="";this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob&&(this.blob=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?a(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(s)}),this.text=function(){var e=a(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(u(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function f(e){var t=e.toUpperCase();return x.indexOf(t)>-1?t:e}function h(e,t){t=t||{};var n=t.body;if(e instanceof h){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new i(e.headers)),this.method=e.method,this.mode=e.mode,n||null==e._bodyInit||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new i(t.headers)),this.method=f(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function m(e){var t=new i;return e.split(/\r?\n/).forEach(function(e){var n=e.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();t.append(r,i)}}),t}function g(e,t){t||(t={}),this.type="default",this.status="status"in t?t.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new i(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(y.arrayBuffer)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(e){return e&&DataView.prototype.isPrototypeOf(e)},b=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};i.prototype.append=function(e,r){e=t(e),r=n(r);var i=this.map[e];this.map[e]=i?i+","+r:r},i.prototype.delete=function(e){delete this.map[t(e)]},i.prototype.get=function(e){return e=t(e),this.has(e)?this.map[e]:null},i.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},i.prototype.set=function(e,r){this.map[t(e)]=n(r)},i.prototype.forEach=function(e,t){for(var n in this.map)this.map.hasOwnProperty(n)&&e.call(t,this.map[n],n,this)},i.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),r(e)},i.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),r(e)},i.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),r(e)},y.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var x=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this,{body:this._bodyInit})},d.call(h.prototype),d.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var w=[301,302,303,307,308];g.redirect=function(e,t){if(-1===w.indexOf(t))throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=i,e.Request=h,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,r){var i=new h(e,t),a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:m(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;n(new g(t,e))},a.onerror=function(){r(new TypeError("Network request failed"))},a.ontimeout=function(){r(new TypeError("Network request failed"))},a.open(i.method,i.url,!0),"include"===i.credentials&&(a.withCredentials=!0),"responseType"in a&&y.blob&&(a.responseType="blob"),i.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send("undefined"===typeof i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!==typeof self?self:this)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),i=n.n(r),a=n(29),o=n.n(a),s=n(178),l=(n.n(s),n(179)),u=n(458);o.a.render(i.a.createElement(l.a,null),document.getElementById("root")),Object(u.a)()},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||P}function a(){}function o(e,t,n){this.props=e,this.context=t,this.refs=v,this.updater=n||P}function s(e,t,n){var r=void 0,i={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)O.call(t,r)&&!z.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:x,type:e,key:a,ref:o,props:i,_owner:L.current}}function l(e){return"object"===typeof e&&null!==e&&e.$$typeof===x}function u(e){var t={"=":"=0",":":"=2"};return"$"+(""+e).replace(/[=:]/g,function(e){return t[e]})}function c(e,t,n,r){if(D.length){var i=D.pop();return i.result=e,i.keyPrefix=t,i.func=n,i.context=r,i.count=0,i}return{result:e,keyPrefix:t,func:n,context:r,count:0}}function d(e){e.result=null,e.keyPrefix=null,e.func=null,e.context=null,e.count=0,10>D.length&&D.push(e)}function f(e,t,n,i){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var o=!1;if(null===e)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case x:case w:o=!0}}if(o)return n(i,e,""===t?"."+h(e,0):t),1;if(o=0,t=""===t?".":t+":",Array.isArray(e))for(var s=0;s<e.length;s++){a=e[s];var l=t+h(a,s);o+=f(a,l,n,i)}else if(null===e||"undefined"===typeof e?l=null:(l=E&&e[E]||e["@@iterator"],l="function"===typeof l?l:null),"function"===typeof l)for(e=l.call(e),s=0;!(a=e.next()).done;)a=a.value,l=t+h(a,s++),o+=f(a,l,n,i);else"object"===a&&(n=""+e,r("31","[object Object]"===n?"object with keys {"+Object.keys(e).join(", ")+"}":n,""));return o}function h(e,t){return"object"===typeof e&&null!==e&&null!=e.key?u(e.key):t.toString(36)}function p(e,t){e.func.call(e.context,t,e.count++)}function m(e,t,n){var r=e.result,i=e.keyPrefix;e=e.func.call(e.context,t,e.count++),Array.isArray(e)?g(e,r,n,_.thatReturnsArgument):null!=e&&(l(e)&&(t=i+(!e.key||t&&t.key===e.key?"":(""+e.key).replace(R,"$&/")+"/")+n,e={$$typeof:x,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}),r.push(e))}function g(e,t,n,r,i){var a="";null!=n&&(a=(""+n).replace(R,"$&/")+"/"),t=c(t,a,r,i),null==e||f(e,"",m,t),d(t)}var y=n(35),v=n(100),_=n(51),b="function"===typeof Symbol&&Symbol.for,x=b?Symbol.for("react.element"):60103,w=b?Symbol.for("react.portal"):60106,k=b?Symbol.for("react.fragment"):60107,T=b?Symbol.for("react.strict_mode"):60108,M=b?Symbol.for("react.provider"):60109,A=b?Symbol.for("react.context"):60110,C=b?Symbol.for("react.async_mode"):60111,S=b?Symbol.for("react.forward_ref"):60112,E="function"===typeof Symbol&&Symbol.iterator,P={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}};i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!==typeof e&&"function"!==typeof e&&null!=e&&r("85"),this.updater.enqueueSetState(this,e,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},a.prototype=i.prototype;var I=o.prototype=new a;I.constructor=o,y(I,i.prototype),I.isPureReactComponent=!0;var L={current:null},O=Object.prototype.hasOwnProperty,z={key:!0,ref:!0,__self:!0,__source:!0},R=/\/+/g,D=[],N={Children:{map:function(e,t,n){if(null==e)return e;var r=[];return g(e,r,null,t,n),r},forEach:function(e,t,n){if(null==e)return e;t=c(null,null,t,n),null==e||f(e,"",p,t),d(t)},count:function(e){return null==e?0:f(e,"",_.thatReturnsNull,null)},toArray:function(e){var t=[];return g(e,t,null,_.thatReturnsArgument),t},only:function(e){return l(e)||r("143"),e}},createRef:function(){return{current:null}},Component:i,PureComponent:o,createContext:function(e,t){return void 0===t&&(t=null),e={$$typeof:A,_calculateChangedBits:t,_defaultValue:e,_currentValue:e,_changedBits:0,Provider:null,Consumer:null},e.Provider={$$typeof:M,context:e},e.Consumer=e},forwardRef:function(e){return{$$typeof:S,render:e}},Fragment:k,StrictMode:T,unstable_AsyncMode:C,createElement:s,cloneElement:function(e,t,n){var r=void 0,i=y({},e.props),a=e.key,o=e.ref,s=e._owner;if(null!=t){void 0!==t.ref&&(o=t.ref,s=L.current),void 0!==t.key&&(a=""+t.key);var l=void 0;e.type&&e.type.defaultProps&&(l=e.type.defaultProps);for(r in t)O.call(t,r)&&!z.hasOwnProperty(r)&&(i[r]=void 0===t[r]&&void 0!==l?l[r]:t[r])}if(1===(r=arguments.length-2))i.children=n;else if(1<r){l=Array(r);for(var u=0;u<r;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:x,type:e.type,key:a,ref:o,props:i,_owner:s}},createFactory:function(e){var t=s.bind(null,e);return t.type=e,t},isValidElement:l,version:"16.3.0",__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{ReactCurrentOwner:L,assign:y}},F=Object.freeze({default:N}),j=F&&N||F;e.exports=j.default?j.default:j},function(e,t,n){"use strict";function r(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,r=0;r<t;r++)n+="&args[]="+encodeURIComponent(arguments[r+1]);throw t=Error(n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."),t.name="Invariant Violation",t.framesToPop=1,t}function i(e,t,n,r,i,a,o,s,l){this._hasCaughtError=!1,this._caughtError=null;var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(e){this._caughtError=e,this._hasCaughtError=!0}}function a(){if(yn._hasRethrowError){var e=yn._rethrowError;throw yn._rethrowError=null,yn._hasRethrowError=!1,e}}function o(){if(vn)for(var e in _n){var t=_n[e],n=vn.indexOf(e);if(-1<n||r("96",e),!bn[n]){t.extractEvents||r("97",e),bn[n]=t,n=t.eventTypes;for(var i in n){var a=void 0,o=n[i],l=t,u=i;xn.hasOwnProperty(u)&&r("99",u),xn[u]=o;var c=o.phasedRegistrationNames;if(c){for(a in c)c.hasOwnProperty(a)&&s(c[a],l,u);a=!0}else o.registrationName?(s(o.registrationName,l,u),a=!0):a=!1;a||r("98",i,e)}}}}function s(e,t,n){wn[e]&&r("100",e),wn[e]=t,kn[e]=t.eventTypes[n].dependencies}function l(e){vn&&r("101"),vn=Array.prototype.slice.call(e),o()}function u(e){var t,n=!1;for(t in e)if(e.hasOwnProperty(t)){var i=e[t];_n.hasOwnProperty(t)&&_n[t]===i||(_n[t]&&r("102",t),_n[t]=i,n=!0)}n&&o()}function c(e,t,n,r){t=e.type||"unknown-event",e.currentTarget=Cn(r),yn.invokeGuardedCallbackAndCatchFirstError(t,n,void 0,e),e.currentTarget=null}function d(e,t){return null==t&&r("30"),null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}function f(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}function h(e,t){if(e){var n=e._dispatchListeners,r=e._dispatchInstances;if(Array.isArray(n))for(var i=0;i<n.length&&!e.isPropagationStopped();i++)c(e,t,n[i],r[i]);else n&&c(e,t,n,r);e._dispatchListeners=null,e._dispatchInstances=null,e.isPersistent()||e.constructor.release(e)}}function p(e){return h(e,!0)}function m(e){return h(e,!1)}function g(e,t){var n=e.stateNode;if(!n)return null;var i=Mn(n);if(!i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":(i=!i.disabled)||(e=e.type,i=!("button"===e||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}return e?null:(n&&"function"!==typeof n&&r("231",t,typeof n),n)}function y(e,t){null!==e&&(Sn=d(Sn,e)),e=Sn,Sn=null,e&&(t?f(e,p):f(e,m),Sn&&r("95"),yn.rethrowCaughtError())}function v(e,t,n,r){for(var i=null,a=0;a<bn.length;a++){var o=bn[a];o&&(o=o.extractEvents(e,t,n,r))&&(i=d(i,o))}y(i,!1)}function _(e){if(e[Ln])return e[Ln];for(;!e[Ln];){if(!e.parentNode)return null;e=e.parentNode}return e=e[Ln],5===e.tag||6===e.tag?e:null}function b(e){if(5===e.tag||6===e.tag)return e.stateNode;r("33")}function x(e){return e[On]||null}function w(e){do{e=e.return}while(e&&5!==e.tag);return e||null}function k(e,t,n){for(var r=[];e;)r.push(e),e=w(e);for(e=r.length;0<e--;)t(r[e],"captured",n);for(e=0;e<r.length;e++)t(r[e],"bubbled",n)}function T(e,t,n){(t=g(e,n.dispatchConfig.phasedRegistrationNames[t]))&&(n._dispatchListeners=d(n._dispatchListeners,t),n._dispatchInstances=d(n._dispatchInstances,e))}function M(e){e&&e.dispatchConfig.phasedRegistrationNames&&k(e._targetInst,T,e)}function A(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst;t=t?w(t):null,k(t,T,e)}}function C(e,t,n){e&&n&&n.dispatchConfig.registrationName&&(t=g(e,n.dispatchConfig.registrationName))&&(n._dispatchListeners=d(n._dispatchListeners,t),n._dispatchInstances=d(n._dispatchInstances,e))}function S(e){e&&e.dispatchConfig.registrationName&&C(e._targetInst,null,e)}function E(e){f(e,M)}function P(e,t,n,r){if(n&&r)e:{for(var i=n,a=r,o=0,s=i;s;s=w(s))o++;s=0;for(var l=a;l;l=w(l))s++;for(;0<o-s;)i=w(i),o--;for(;0<s-o;)a=w(a),s--;for(;o--;){if(i===a||i===a.alternate)break e;i=w(i),a=w(a)}i=null}else i=null;for(a=i,i=[];n&&n!==a&&(null===(o=n.alternate)||o!==a);)i.push(n),n=w(n);for(n=[];r&&r!==a&&(null===(o=r.alternate)||o!==a);)n.push(r),r=w(r);for(r=0;r<i.length;r++)C(i[r],"bubbled",e);for(e=n.length;0<e--;)C(n[e],"captured",t)}function I(){return!Dn&&cn.canUseDOM&&(Dn="textContent"in document.documentElement?"textContent":"innerText"),Dn}function L(){if(Nn._fallbackText)return Nn._fallbackText;var e,t,n=Nn._startText,r=n.length,i=O(),a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Nn._fallbackText=i.slice(e,1<t?1-t:void 0),Nn._fallbackText}function O(){return"value"in Nn._root?Nn._root.value:Nn._root[I()]}function z(e,t,n,r){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n,e=this.constructor.Interface;for(var i in e)e.hasOwnProperty(i)&&((t=e[i])?this[i]=t(n):"target"===i?this.target=r:this[i]=n[i]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?fn.thatReturnsTrue:fn.thatReturnsFalse,this.isPropagationStopped=fn.thatReturnsFalse,this}function R(e,t,n,r){if(this.eventPool.length){var i=this.eventPool.pop();return this.call(i,e,t,n,r),i}return new this(e,t,n,r)}function D(e){e instanceof this||r("223"),e.destructor(),10>this.eventPool.length&&this.eventPool.push(e)}function N(e){e.eventPool=[],e.getPooled=R,e.release=D}function F(e,t){switch(e){case"topKeyUp":return-1!==Vn.indexOf(t.keyCode);case"topKeyDown":return 229!==t.keyCode;case"topKeyPress":case"topMouseDown":case"topBlur":return!0;default:return!1}}function j(e){return e=e.detail,"object"===typeof e&&"data"in e?e.data:null}function B(e,t){switch(e){case"topCompositionEnd":return j(t);case"topKeyPress":return 32!==t.which?null:(Zn=!0,Yn);case"topTextInput":return e=t.data,e===Yn&&Zn?null:e;default:return null}}function U(e,t){if(Jn)return"topCompositionEnd"===e||!Hn&&F(e,t)?(e=L(),Nn._root=null,Nn._startText=null,Nn._fallbackText=null,Jn=!1,e):null;switch(e){case"topPaste":return null;case"topKeyPress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"topCompositionEnd":return Gn?null:t.data;default:return null}}function V(e){if(e=An(e)){Qn&&"function"===typeof Qn.restoreControlledState||r("194");var t=Mn(e.stateNode);Qn.restoreControlledState(e.stateNode,e.type,t)}}function H(e){$n?er?er.push(e):er=[e]:$n=e}function W(){return null!==$n||null!==er}function q(){if($n){var e=$n,t=er;if(er=$n=null,V(e),t)for(e=0;e<t.length;e++)V(t[e])}}function G(e,t){return e(t)}function Y(e,t,n){return e(t,n)}function X(){}function Z(e,t){if(rr)return e(t);rr=!0;try{return G(e,t)}finally{rr=!1,W()&&(X(),q())}}function J(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!ir[e.type]:"textarea"===t}function K(e){return e=e.target||window,e.correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}function Q(e,t){return!(!cn.canUseDOM||t&&!("addEventListener"in document))&&(e="on"+e,t=e in document,t||(t=document.createElement("div"),t.setAttribute(e,"return;"),t="function"===typeof t[e]),t)}function $(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ee(e){var t=$(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"function"===typeof n.get&&"function"===typeof n.set)return Object.defineProperty(e,t,{configurable:!0,get:function(){return n.get.call(this)},set:function(e){r=""+e,n.set.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}function te(e){e._valueTracker||(e._valueTracker=ee(e))}function ne(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function re(e){return null===e||"undefined"===typeof e?null:(e=yr&&e[yr]||e["@@iterator"],"function"===typeof e?e:null)}function ie(e){if("function"===typeof(e=e.type))return e.displayName||e.name;if("string"===typeof e)return e;switch(e){case dr:return"ReactFragment";case cr:return"ReactPortal";case lr:return"ReactCall";case ur:return"ReactReturn"}return null}function ae(e){var t="";do{e:switch(e.tag){case 0:case 1:case 2:case 5:var n=e._debugOwner,r=e._debugSource,i=ie(e),a=null;n&&(a=ie(n)),n=r,i="\n    in "+(i||"Unknown")+(n?" (at "+n.fileName.replace(/^.*[\\\/]/,"")+":"+n.lineNumber+")":a?" (created by "+a+")":"");break e;default:i=""}t+=i,e=e.return}while(e);return t}function oe(e){return!!br.hasOwnProperty(e)||!_r.hasOwnProperty(e)&&(vr.test(e)?br[e]=!0:(_r[e]=!0,!1))}function se(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}function le(e,t,n,r){if(null===t||"undefined"===typeof t||se(e,t,n,r))return!0;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ue(e,t,n,r,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t}function ce(e){return e[1].toUpperCase()}function de(e,t,n,r){var i=xr.hasOwnProperty(t)?xr[t]:null;(null!==i?0===i.type:!r&&(2<t.length&&("o"===t[0]||"O"===t[0])&&("n"===t[1]||"N"===t[1])))||(le(t,n,i,r)&&(n=null),r||null===i?oe(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(i=i.type,n=3===i||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}function fe(e,t){var n=t.checked;return dn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function he(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=ve(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function pe(e,t){null!=(t=t.checked)&&de(e,"checked",t,!1)}function me(e,t){pe(e,t);var n=ve(t.value);null!=n&&("number"===t.type?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n)),t.hasOwnProperty("value")?ye(e,t.type,n):t.hasOwnProperty("defaultValue")&&ye(e,t.type,ve(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function ge(e,t){(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue"))&&(""===e.value&&(e.value=""+e._wrapperState.initialValue),e.defaultValue=""+e._wrapperState.initialValue),t=e.name,""!==t&&(e.name=""),e.defaultChecked=!e.defaultChecked,e.defaultChecked=!e.defaultChecked,""!==t&&(e.name=t)}function ye(e,t,n){"number"===t&&e.ownerDocument.activeElement===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}function ve(e){switch(typeof e){case"boolean":case"number":case"object":case"string":case"undefined":return e;default:return""}}function _e(e,t,n){return e=z.getPooled(kr.change,e,t,n),e.type="change",H(n),E(e),e}function be(e){y(e,!1)}function xe(e){if(ne(b(e)))return e}function we(e,t){if("topChange"===e)return t}function ke(){Tr&&(Tr.detachEvent("onpropertychange",Te),Mr=Tr=null)}function Te(e){"value"===e.propertyName&&xe(Mr)&&(e=_e(Mr,e,K(e)),Z(be,e))}function Me(e,t,n){"topFocus"===e?(ke(),Tr=t,Mr=n,Tr.attachEvent("onpropertychange",Te)):"topBlur"===e&&ke()}function Ae(e){if("topSelectionChange"===e||"topKeyUp"===e||"topKeyDown"===e)return xe(Mr)}function Ce(e,t){if("topClick"===e)return xe(t)}function Se(e,t){if("topInput"===e||"topChange"===e)return xe(t)}function Ee(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Er[e])&&!!t[e]}function Pe(){return Ee}function Ie(e){var t=e;if(e.alternate)for(;t.return;)t=t.return;else{if(0!==(2&t.effectTag))return 1;for(;t.return;)if(t=t.return,0!==(2&t.effectTag))return 1}return 3===t.tag?2:3}function Le(e){return!!(e=e._reactInternalFiber)&&2===Ie(e)}function Oe(e){2!==Ie(e)&&r("188")}function ze(e){var t=e.alternate;if(!t)return t=Ie(e),3===t&&r("188"),1===t?null:e;for(var n=e,i=t;;){var a=n.return,o=a?a.alternate:null;if(!a||!o)break;if(a.child===o.child){for(var s=a.child;s;){if(s===n)return Oe(a),e;if(s===i)return Oe(a),t;s=s.sibling}r("188")}if(n.return!==i.return)n=a,i=o;else{s=!1;for(var l=a.child;l;){if(l===n){s=!0,n=a,i=o;break}if(l===i){s=!0,i=a,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,i=a;break}if(l===i){s=!0,i=o,n=a;break}l=l.sibling}s||r("189")}}n.alternate!==i&&r("190")}return 3!==n.tag&&r("188"),n.stateNode.current===n?e:t}function Re(e){if(!(e=ze(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function De(e){if(!(e=ze(e)))return null;for(var t=e;;){if(5===t.tag||6===t.tag)return t;if(t.child&&4!==t.tag)t.child.return=t,t=t.child;else{if(t===e)break;for(;!t.sibling;){if(!t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}}return null}function Ne(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Fe(e,t){var n=e[0].toUpperCase()+e.slice(1),r="on"+n;n="top"+n,t={phasedRegistrationNames:{bubbled:r,captured:r+"Capture"},dependencies:[n],isInteractive:t},Hr[e]=t,Wr[n]=t}function je(e){var t=e.targetInst;do{if(!t){e.ancestors.push(t);break}var n;for(n=t;n.return;)n=n.return;if(!(n=3!==n.tag?null:n.stateNode.containerInfo))break;e.ancestors.push(t),t=_(n)}while(t);for(n=0;n<e.ancestors.length;n++)t=e.ancestors[n],v(e.topLevelType,t,e.nativeEvent,K(e.nativeEvent))}function Be(e){Xr=!!e}function Ue(e,t,n){if(!n)return null;e=(Gr(e)?He:We).bind(null,e),n.addEventListener(t,e,!1)}function Ve(e,t,n){if(!n)return null;e=(Gr(e)?He:We).bind(null,e),n.addEventListener(t,e,!0)}function He(e,t){Y(We,e,t)}function We(e,t){if(Xr){var n=K(t);if(n=_(n),null!==n&&"number"===typeof n.tag&&2!==Ie(n)&&(n=null),Yr.length){var r=Yr.pop();r.topLevelType=e,r.nativeEvent=t,r.targetInst=n,e=r}else e={topLevelType:e,nativeEvent:t,targetInst:n,ancestors:[]};try{Z(je,e)}finally{e.topLevelType=null,e.nativeEvent=null,e.targetInst=null,e.ancestors.length=0,10>Yr.length&&Yr.push(e)}}}function qe(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function Ge(e){if(Kr[e])return Kr[e];if(!Jr[e])return e;var t,n=Jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Qr)return Kr[e]=n[t];return e}function Ye(e){return Object.prototype.hasOwnProperty.call(e,ri)||(e[ri]=ni++,ti[e[ri]]={}),ti[e[ri]]}function Xe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ze(e,t){var n=Xe(e);e=0;for(var r;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xe(n)}}function Je(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)}function Ke(e,t){if(ui||null==oi||oi!==hn())return null;var n=oi;return"selectionStart"in n&&Je(n)?n={start:n.selectionStart,end:n.selectionEnd}:window.getSelection?(n=window.getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}):n=void 0,li&&pn(li,n)?null:(li=n,e=z.getPooled(ai.select,si,e,t),e.type="select",e.target=oi,E(e),e)}function Qe(e,t,n,r){this.tag=e,this.key=n,this.stateNode=this.type=null,this.sibling=this.child=this.return=null,this.index=0,this.ref=null,this.pendingProps=t,this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.effectTag=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.expirationTime=0,this.alternate=null}function $e(e,t,n){var r=e.alternate;return null===r?(r=new Qe(e.tag,t,e.key,e.mode),r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.effectTag=0,r.nextEffect=null,r.firstEffect=null,r.lastEffect=null),r.expirationTime=n,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function et(e,t,n){var i=e.type,a=e.key;e=e.props;var o=void 0;if("function"===typeof i)o=i.prototype&&i.prototype.isReactComponent?2:0;else if("string"===typeof i)o=5;else switch(i){case dr:return tt(e.children,t,n,a);case mr:o=11,t|=3;break;case fr:o=11,t|=2;break;case lr:o=7;break;case ur:o=9;break;default:if("object"===typeof i&&null!==i)switch(i.$$typeof){case hr:o=13;break;case pr:o=12;break;case gr:o=14;break;default:if("number"===typeof i.tag)return t=i,t.pendingProps=e,t.expirationTime=n,t;r("130",null==i?i:typeof i,"")}else r("130",null==i?i:typeof i,"")}return t=new Qe(o,e,a,t),t.type=i,t.expirationTime=n,t}function tt(e,t,n,r){return e=new Qe(10,e,r,t),e.expirationTime=n,e}function nt(e,t,n){return e=new Qe(6,e,null,t),e.expirationTime=n,e}function rt(e,t,n){return t=new Qe(4,null!==e.children?e.children:[],e.key,t),t.expirationTime=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function it(e){return function(t){try{return e(t)}catch(e){}}}function at(e){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)return!0;try{var n=t.inject(e);di=it(function(e){return t.onCommitFiberRoot(n,e)}),fi=it(function(e){return t.onCommitFiberUnmount(n,e)})}catch(e){}return!0}function ot(e){"function"===typeof di&&di(e)}function st(e){"function"===typeof fi&&fi(e)}function lt(e){return{baseState:e,expirationTime:0,first:null,last:null,callbackList:null,hasForceUpdate:!1,isInitialized:!1,capturedValues:null}}function ut(e,t){null===e.last?e.first=e.last=t:(e.last.next=t,e.last=t),(0===e.expirationTime||e.expirationTime>t.expirationTime)&&(e.expirationTime=t.expirationTime)}function ct(e){hi=pi=null;var t=e.alternate,n=e.updateQueue;null===n&&(n=e.updateQueue=lt(null)),null!==t?null===(e=t.updateQueue)&&(e=t.updateQueue=lt(null)):e=null,hi=n,pi=e!==n?e:null}function dt(e,t){ct(e),e=hi;var n=pi;null===n?ut(e,t):null===e.last||null===n.last?(ut(e,t),ut(n,t)):(ut(e,t),n.last=t)}function ft(e,t,n,r){return e=e.partialState,"function"===typeof e?e.call(t,n,r):e}function ht(e,t,n,r,i,a){null!==e&&e.updateQueue===n&&(n=t.updateQueue={baseState:n.baseState,expirationTime:n.expirationTime,first:n.first,last:n.last,isInitialized:n.isInitialized,capturedValues:n.capturedValues,callbackList:null,hasForceUpdate:!1}),n.expirationTime=0,n.isInitialized?e=n.baseState:(e=n.baseState=t.memoizedState,n.isInitialized=!0);for(var o=!0,s=n.first,l=!1;null!==s;){var u=s.expirationTime;if(u>a){var c=n.expirationTime;(0===c||c>u)&&(n.expirationTime=u),l||(l=!0,n.baseState=e)}else l||(n.first=s.next,null===n.first&&(n.last=null)),s.isReplace?(e=ft(s,r,e,i),o=!0):(u=ft(s,r,e,i))&&(e=o?dn({},e,u):dn(e,u),o=!1),s.isForced&&(n.hasForceUpdate=!0),null!==s.callback&&(u=n.callbackList,null===u&&(u=n.callbackList=[]),u.push(s)),null!==s.capturedValue&&(u=n.capturedValues,null===u?n.capturedValues=[s.capturedValue]:u.push(s.capturedValue));s=s.next}return null!==n.callbackList?t.effectTag|=32:null!==n.first||n.hasForceUpdate||null!==n.capturedValues||(t.updateQueue=null),l||(n.baseState=e),e}function pt(e,t){var n=e.callbackList;if(null!==n)for(e.callbackList=null,e=0;e<n.length;e++){var i=n[e],a=i.callback;i.callback=null,"function"!==typeof a&&r("191",a),a.call(t)}}function mt(e,t,n,r,i){function a(e,t,n,r,i,a){if(null===t||null!==e.updateQueue&&e.updateQueue.hasForceUpdate)return!0;var o=e.stateNode;return e=e.type,"function"===typeof o.shouldComponentUpdate?o.shouldComponentUpdate(n,i,a):!e.prototype||!e.prototype.isPureReactComponent||(!pn(t,n)||!pn(r,i))}function o(e,t){t.updater=p,e.stateNode=t,t._reactInternalFiber=e}function s(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&p.enqueueReplaceState(t,t.state,null)}function l(e,t,n,r){if(e=e.type,"function"===typeof e.getDerivedStateFromProps)return e.getDerivedStateFromProps.call(null,n,r)}var u=e.cacheContext,c=e.getMaskedContext,d=e.getUnmaskedContext,f=e.isContextConsumer,h=e.hasContextChanged,p={isMounted:Le,enqueueSetState:function(e,r,i){e=e._reactInternalFiber,i=void 0===i?null:i;var a=n(e);dt(e,{expirationTime:a,partialState:r,callback:i,isReplace:!1,isForced:!1,capturedValue:null,next:null}),t(e,a)},enqueueReplaceState:function(e,r,i){e=e._reactInternalFiber,i=void 0===i?null:i;var a=n(e);dt(e,{expirationTime:a,partialState:r,callback:i,isReplace:!0,isForced:!1,capturedValue:null,next:null}),t(e,a)},enqueueForceUpdate:function(e,r){e=e._reactInternalFiber,r=void 0===r?null:r;var i=n(e);dt(e,{expirationTime:i,partialState:null,callback:r,isReplace:!1,isForced:!0,capturedValue:null,next:null}),t(e,i)}};return{adoptClassInstance:o,callGetDerivedStateFromProps:l,constructClassInstance:function(e,t){var n=e.type,r=d(e),i=f(e),a=i?c(e,r):gn;n=new n(t,a);var s=null!==n.state&&void 0!==n.state?n.state:null;return o(e,n),e.memoizedState=s,t=l(e,n,t,s),null!==t&&void 0!==t&&(e.memoizedState=dn({},e.memoizedState,t)),i&&u(e,r,a),n},mountClassInstance:function(e,t){var n=e.type,r=e.alternate,i=e.stateNode,a=e.pendingProps,o=d(e);i.props=a,i.state=e.memoizedState,i.refs=gn,i.context=c(e,o),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(n=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),n!==i.state&&p.enqueueReplaceState(i,i.state,null),null!==(n=e.updateQueue)&&(i.state=ht(r,e,n,i,a,t))),"function"===typeof i.componentDidMount&&(e.effectTag|=4)},resumeMountClassInstance:function(e,t){var n=e.type,o=e.stateNode;o.props=e.memoizedProps,o.state=e.memoizedState;var u=e.memoizedProps,f=e.pendingProps,p=o.context,m=d(e);m=c(e,m),(n="function"===typeof n.getDerivedStateFromProps||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||p!==m)&&s(e,o,f,m),p=e.memoizedState,t=null!==e.updateQueue?ht(null,e,e.updateQueue,o,f,t):p;var g=void 0;return u!==f&&(g=l(e,o,f,t)),null!==g&&void 0!==g&&(t=null===t||void 0===t?g:dn({},t,g)),u!==f||p!==t||h()||null!==e.updateQueue&&e.updateQueue.hasForceUpdate?((u=a(e,u,f,p,t,m))?(n||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(e.effectTag|=4)):("function"===typeof o.componentDidMount&&(e.effectTag|=4),r(e,f),i(e,t)),o.props=f,o.state=t,o.context=m,u):("function"===typeof o.componentDidMount&&(e.effectTag|=4),!1)},updateClassInstance:function(e,t,n){var o=t.type,u=t.stateNode;u.props=t.memoizedProps,u.state=t.memoizedState;var f=t.memoizedProps,p=t.pendingProps,m=u.context,g=d(t);g=c(t,g),(o="function"===typeof o.getDerivedStateFromProps||"function"===typeof u.getSnapshotBeforeUpdate)||"function"!==typeof u.UNSAFE_componentWillReceiveProps&&"function"!==typeof u.componentWillReceiveProps||(f!==p||m!==g)&&s(t,u,p,g),m=t.memoizedState,n=null!==t.updateQueue?ht(e,t,t.updateQueue,u,p,n):m;var y=void 0;return f!==p&&(y=l(t,u,p,n)),null!==y&&void 0!==y&&(n=null===n||void 0===n?y:dn({},n,y)),f!==p||m!==n||h()||null!==t.updateQueue&&t.updateQueue.hasForceUpdate?((y=a(t,f,p,m,n,g))?(o||"function"!==typeof u.UNSAFE_componentWillUpdate&&"function"!==typeof u.componentWillUpdate||("function"===typeof u.componentWillUpdate&&u.componentWillUpdate(p,n,g),"function"===typeof u.UNSAFE_componentWillUpdate&&u.UNSAFE_componentWillUpdate(p,n,g)),"function"===typeof u.componentDidUpdate&&(t.effectTag|=4),"function"===typeof u.getSnapshotBeforeUpdate&&(t.effectTag|=2048)):("function"!==typeof u.componentDidUpdate||f===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),"function"!==typeof u.getSnapshotBeforeUpdate||f===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=2048),r(t,p),i(t,n)),u.props=p,u.state=n,u.context=g,y):("function"!==typeof u.componentDidUpdate||f===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=4),"function"!==typeof u.getSnapshotBeforeUpdate||f===e.memoizedProps&&m===e.memoizedState||(t.effectTag|=2048),!1)}}}function gt(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){n=n._owner;var i=void 0;n&&(2!==n.tag&&r("110"),i=n.stateNode),i||r("147",e);var a=""+e;return null!==t&&null!==t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs===gn?i.refs={}:i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}"string"!==typeof e&&r("148"),n._owner||r("254",e)}return e}function yt(e,t){"textarea"!==e.type&&r("31","[object Object]"===Object.prototype.toString.call(t)?"object with keys {"+Object.keys(t).join(", ")+"}":t,"")}function vt(e){function t(t,n){if(e){var r=t.lastEffect;null!==r?(r.nextEffect=n,t.lastEffect=n):t.firstEffect=t.lastEffect=n,n.nextEffect=null,n.effectTag=8}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t,n){return e=$e(e,t,n),e.index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index,r<n?(t.effectTag=2,n):r):(t.effectTag=2,n):n}function s(t){return e&&null===t.alternate&&(t.effectTag=2),t}function l(e,t,n,r){return null===t||6!==t.tag?(t=nt(n,e.mode,r),t.return=e,t):(t=a(t,n,r),t.return=e,t)}function u(e,t,n,r){return null!==t&&t.type===n.type?(r=a(t,n.props,r),r.ref=gt(e,t,n),r.return=e,r):(r=et(n,e.mode,r),r.ref=gt(e,t,n),r.return=e,r)}function c(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?(t=rt(n,e.mode,r),t.return=e,t):(t=a(t,n.children||[],r),t.return=e,t)}function d(e,t,n,r,i){return null===t||10!==t.tag?(t=tt(n,e.mode,r,i),t.return=e,t):(t=a(t,n,r),t.return=e,t)}function f(e,t,n){if("string"===typeof t||"number"===typeof t)return t=nt(""+t,e.mode,n),t.return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case sr:return n=et(t,e.mode,n),n.ref=gt(e,null,t),n.return=e,n;case cr:return t=rt(t,e.mode,n),t.return=e,t}if(mi(t)||re(t))return t=tt(t,e.mode,n,null),t.return=e,t;yt(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case sr:return n.key===i?n.type===dr?d(e,t,n.props.children,r,i):u(e,t,n,r):null;case cr:return n.key===i?c(e,t,n,r):null}if(mi(n)||re(n))return null!==i?null:d(e,t,n,r,null);yt(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r||"number"===typeof r)return e=e.get(n)||null,l(t,e,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case sr:return e=e.get(null===r.key?n:r.key)||null,r.type===dr?d(t,e,r.props.children,i,r.key):u(t,e,r,i);case cr:return e=e.get(null===r.key?n:r.key)||null,c(t,e,r,i)}if(mi(r)||re(r))return e=e.get(n)||null,d(t,e,r,i,null);yt(t,r)}return null}function m(r,a,s,l){for(var u=null,c=null,d=a,m=a=0,g=null;null!==d&&m<s.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=h(r,d,s[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(r,d),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,d=g}if(m===s.length)return n(r,d),u;if(null===d){for(;m<s.length;m++)(d=f(r,s[m],l))&&(a=o(d,a,m),null===c?u=d:c.sibling=d,c=d);return u}for(d=i(r,d);m<s.length;m++)(g=p(d,r,m,s[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&d.forEach(function(e){return t(r,e)}),u}function g(a,s,l,u){var c=re(l);"function"!==typeof c&&r("150"),null==(l=c.call(l))&&r("151");for(var d=c=null,m=s,g=s=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var _=h(a,m,v.value,u);if(null===_){m||(m=y);break}e&&m&&null===_.alternate&&t(a,m),s=o(_,s,g),null===d?c=_:d.sibling=_,d=_,m=y}if(v.done)return n(a,m),c;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=f(a,v.value,u))&&(s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return c}for(m=i(a,m);!v.done;g++,v=l.next())null!==(v=p(m,a,g,v.value,u))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),s=o(v,s,g),null===d?c=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(a,e)}),c}return function(e,i,o,l){"object"===typeof o&&null!==o&&o.type===dr&&null===o.key&&(o=o.props.children);var u="object"===typeof o&&null!==o;if(u)switch(o.$$typeof){case sr:e:{var c=o.key;for(u=i;null!==u;){if(u.key===c){if(10===u.tag?o.type===dr:u.type===o.type){n(e,u.sibling),i=a(u,o.type===dr?o.props.children:o.props,l),i.ref=gt(e,u,o),i.return=e,e=i;break e}n(e,u);break}t(e,u),u=u.sibling}o.type===dr?(i=tt(o.props.children,e.mode,l,o.key),i.return=e,e=i):(l=et(o,e.mode,l),l.ref=gt(e,i,o),l.return=e,e=l)}return s(e);case cr:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(e,i.sibling),i=a(i,o.children||[],l),i.return=e,e=i;break e}n(e,i);break}t(e,i),i=i.sibling}i=rt(o,e.mode,l),i.return=e,e=i}return s(e)}if("string"===typeof o||"number"===typeof o)return o=""+o,null!==i&&6===i.tag?(n(e,i.sibling),i=a(i,o,l)):(n(e,i),i=nt(o,e.mode,l)),i.return=e,e=i,s(e);if(mi(o))return m(e,i,o,l);if(re(o))return g(e,i,o,l);if(u&&yt(e,o),"undefined"===typeof o)switch(e.tag){case 2:case 1:l=e.type,r("152",l.displayName||l.name||"Component")}return n(e,i)}}function _t(e,t,n,i,a,o,s){function l(e,t,n){u(e,t,n,t.expirationTime)}function u(e,t,n,r){t.child=null===e?yi(t,null,n,r):gi(t,e.child,n,r)}function c(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.effectTag|=128)}function d(e,t,n,r,i,a){if(c(e,t),!n&&!i)return r&&A(t,!1),m(e,t);n=t.stateNode,ar.current=t;var o=i?null:n.render();return t.effectTag|=1,i&&(u(e,t,null,a),t.child=null),u(e,t,o,a),t.memoizedState=n.state,t.memoizedProps=n.props,r&&A(t,!0),t.child}function f(e){var t=e.stateNode;t.pendingContext?M(e,t.pendingContext,t.pendingContext!==t.context):t.context&&M(e,t.context,!1),_(e,t.containerInfo)}function h(e,t,n,r){var i=e.child;for(null!==i&&(i.return=e);null!==i;){switch(i.tag){case 12:var a=0|i.stateNode;if(i.type===t&&0!==(a&n)){for(a=i;null!==a;){var o=a.alternate;if(0===a.expirationTime||a.expirationTime>r)a.expirationTime=r,null!==o&&(0===o.expirationTime||o.expirationTime>r)&&(o.expirationTime=r);else{if(null===o||!(0===o.expirationTime||o.expirationTime>r))break;o.expirationTime=r}a=a.return}a=null}else a=i.child;break;case 13:a=i.type===e.type?null:i.child;break;default:a=i.child}if(null!==a)a.return=i;else for(a=i;null!==a;){if(a===e){a=null;break}if(null!==(i=a.sibling)){a=i;break}a=a.return}i=a}}function p(e,t,n){var r=t.type.context,i=t.pendingProps,a=t.memoizedProps;if(!k()&&a===i)return t.stateNode=0,b(t),m(e,t);var o=i.value;if(t.memoizedProps=i,null===a)o=1073741823;else if(a.value===i.value){if(a.children===i.children)return t.stateNode=0,b(t),m(e,t);o=0}else{var s=a.value;if(s===o&&(0!==s||1/s===1/o)||s!==s&&o!==o){if(a.children===i.children)return t.stateNode=0,b(t),m(e,t);o=0}else if(o="function"===typeof r._calculateChangedBits?r._calculateChangedBits(s,o):1073741823,0===(o|=0)){if(a.children===i.children)return t.stateNode=0,b(t),m(e,t)}else h(t,r,o,n)}return t.stateNode=o,b(t),l(e,t,i.children),t.child}function m(e,t){if(null!==e&&t.child!==e.child&&r("153"),null!==t.child){e=t.child;var n=$e(e,e.pendingProps,e.expirationTime);for(t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,n=n.sibling=$e(e,e.pendingProps,e.expirationTime),n.return=t;n.sibling=null}return t.child}var g=e.shouldSetTextContent,y=e.shouldDeprioritizeSubtree,v=t.pushHostContext,_=t.pushHostContainer,b=i.pushProvider,x=n.getMaskedContext,w=n.getUnmaskedContext,k=n.hasContextChanged,T=n.pushContextProvider,M=n.pushTopLevelContextObject,A=n.invalidateContextProvider,C=a.enterHydrationState,S=a.resetHydrationState,E=a.tryToClaimNextHydratableInstance;e=mt(n,o,s,function(e,t){e.memoizedProps=t},function(e,t){e.memoizedState=t});var P=e.adoptClassInstance,I=e.callGetDerivedStateFromProps,L=e.constructClassInstance,O=e.mountClassInstance,z=e.resumeMountClassInstance,R=e.updateClassInstance;return{beginWork:function(e,t,n){if(0===t.expirationTime||t.expirationTime>n){switch(t.tag){case 3:f(t);break;case 2:T(t);break;case 4:_(t,t.stateNode.containerInfo);break;case 13:b(t)}return null}switch(t.tag){case 0:null!==e&&r("155");var i=t.type,a=t.pendingProps,o=w(t);return o=x(t,o),i=i(a,o),t.effectTag|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(o=t.type,t.tag=2,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,"function"===typeof o.getDerivedStateFromProps&&null!==(a=I(t,i,a,t.memoizedState))&&void 0!==a&&(t.memoizedState=dn({},t.memoizedState,a)),a=T(t),P(t,i),O(t,n),e=d(e,t,!0,a,!1,n)):(t.tag=1,l(e,t,i),t.memoizedProps=a,e=t.child),e;case 1:return a=t.type,n=t.pendingProps,k()||t.memoizedProps!==n?(i=w(t),i=x(t,i),a=a(n,i),t.effectTag|=1,l(e,t,a),t.memoizedProps=n,e=t.child):e=m(e,t),e;case 2:a=T(t),null===e?null===t.stateNode?(L(t,t.pendingProps),O(t,n),i=!0):i=z(t,n):i=R(e,t,n),o=!1;var s=t.updateQueue;return null!==s&&null!==s.capturedValues&&(o=i=!0),d(e,t,i,a,o,n);case 3:e:if(f(t),null!==(i=t.updateQueue)){if(o=t.memoizedState,a=ht(e,t,i,null,null,n),t.memoizedState=a,null!==(i=t.updateQueue)&&null!==i.capturedValues)i=null;else{if(o===a){S(),e=m(e,t);break e}i=a.element}o=t.stateNode,(null===e||null===e.child)&&o.hydrate&&C(t)?(t.effectTag|=2,t.child=yi(t,null,i,n)):(S(),l(e,t,i)),t.memoizedState=a,e=t.child}else S(),e=m(e,t);return e;case 5:return v(t),null===e&&E(t),a=t.type,s=t.memoizedProps,i=t.pendingProps,o=null!==e?e.memoizedProps:null,k()||s!==i||((s=1&t.mode&&y(a,i))&&(t.expirationTime=1073741823),s&&1073741823===n)?(s=i.children,g(a,i)?s=null:o&&g(a,o)&&(t.effectTag|=16),c(e,t),1073741823!==n&&1&t.mode&&y(a,i)?(t.expirationTime=1073741823,t.memoizedProps=i,e=null):(l(e,t,s),t.memoizedProps=i,e=t.child)):e=m(e,t),e;case 6:return null===e&&E(t),t.memoizedProps=t.pendingProps,null;case 8:t.tag=7;case 7:return a=t.pendingProps,k()||t.memoizedProps!==a||(a=t.memoizedProps),i=a.children,t.stateNode=null===e?yi(t,t.stateNode,i,n):gi(t,e.stateNode,i,n),t.memoizedProps=a,t.stateNode;case 9:return null;case 4:return _(t,t.stateNode.containerInfo),a=t.pendingProps,k()||t.memoizedProps!==a?(null===e?t.child=gi(t,null,a,n):l(e,t,a),t.memoizedProps=a,e=t.child):e=m(e,t),e;case 14:return n=t.type.render,n=n(t.pendingProps,t.ref),l(e,t,n),t.memoizedProps=n,t.child;case 10:return n=t.pendingProps,k()||t.memoizedProps!==n?(l(e,t,n),t.memoizedProps=n,e=t.child):e=m(e,t),e;case 11:return n=t.pendingProps.children,k()||null!==n&&t.memoizedProps!==n?(l(e,t,n),t.memoizedProps=n,e=t.child):e=m(e,t),e;case 13:return p(e,t,n);case 12:i=t.type,o=t.pendingProps;var u=t.memoizedProps;return a=i._currentValue,s=i._changedBits,k()||0!==s||u!==o?(t.memoizedProps=o,u=o.unstable_observedBits,void 0!==u&&null!==u||(u=1073741823),t.stateNode=u,0!==(s&u)&&h(t,i,s,n),n=o.children,n=n(a),l(e,t,n),e=t.child):e=m(e,t),e;default:r("156")}}}}function bt(e,t,n,i,a){function o(e){e.effectTag|=4}var s=e.createInstance,l=e.createTextInstance,u=e.appendInitialChild,c=e.finalizeInitialChildren,d=e.prepareUpdate,f=e.persistence,h=t.getRootHostContainer,p=t.popHostContext,m=t.getHostContext,g=t.popHostContainer,y=n.popContextProvider,v=n.popTopLevelContextObject,_=i.popProvider,b=a.prepareToHydrateHostInstance,x=a.prepareToHydrateHostTextInstance,w=a.popHydrationState,k=void 0,T=void 0,M=void 0;return e.mutation?(k=function(){},T=function(e,t,n){(t.updateQueue=n)&&o(t)},M=function(e,t,n,r){n!==r&&o(t)}):r(f?"235":"236"),{completeWork:function(e,t,n){var i=t.pendingProps;switch(t.tag){case 1:return null;case 2:return y(t),e=t.stateNode,i=t.updateQueue,null!==i&&null!==i.capturedValues&&(t.effectTag&=-65,"function"===typeof e.componentDidCatch?t.effectTag|=256:i.capturedValues=null),null;case 3:return g(t),v(t),i=t.stateNode,i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(w(t),t.effectTag&=-3),k(t),e=t.updateQueue,null!==e&&null!==e.capturedValues&&(t.effectTag|=256),null;case 5:p(t),n=h();var a=t.type;if(null!==e&&null!=t.stateNode){var f=e.memoizedProps,A=t.stateNode,C=m();A=d(A,a,f,i,n,C),T(e,t,A,a,f,i,n,C),e.ref!==t.ref&&(t.effectTag|=128)}else{if(!i)return null===t.stateNode&&r("166"),null;if(e=m(),w(t))b(t,n,e)&&o(t);else{f=s(a,i,n,e,t);e:for(C=t.child;null!==C;){if(5===C.tag||6===C.tag)u(f,C.stateNode);else if(4!==C.tag&&null!==C.child){C.child.return=C,C=C.child;continue}if(C===t)break;for(;null===C.sibling;){if(null===C.return||C.return===t)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}c(f,a,i,n,e)&&o(t),t.stateNode=f}null!==t.ref&&(t.effectTag|=128)}return null;case 6:if(e&&null!=t.stateNode)M(e,t,e.memoizedProps,i);else{if("string"!==typeof i)return null===t.stateNode&&r("166"),null;e=h(),n=m(),w(t)?x(t)&&o(t):t.stateNode=l(i,e,n,t)}return null;case 7:(i=t.memoizedProps)||r("165"),t.tag=8,a=[];e:for((f=t.stateNode)&&(f.return=t);null!==f;){if(5===f.tag||6===f.tag||4===f.tag)r("247");else if(9===f.tag)a.push(f.pendingProps.value);else if(null!==f.child){f.child.return=f,f=f.child;continue}for(;null===f.sibling;){if(null===f.return||f.return===t)break e;f=f.return}f.sibling.return=f.return,f=f.sibling}return f=i.handler,i=f(i.props,a),t.child=gi(t,null!==e?e.child:null,i,n),t.child;case 8:return t.tag=7,null;case 9:case 14:case 10:case 11:return null;case 4:return g(t),k(t),null;case 13:return _(t),null;case 12:return null;case 0:r("167");default:r("156")}}}}function xt(e,t,n,r,i){var a=e.popHostContainer,o=e.popHostContext,s=t.popContextProvider,l=t.popTopLevelContextObject,u=n.popProvider;return{throwException:function(e,t,n){t.effectTag|=512,t.firstEffect=t.lastEffect=null,t={value:n,source:t,stack:ae(t)};do{switch(e.tag){case 3:return ct(e),e.updateQueue.capturedValues=[t],void(e.effectTag|=1024);case 2:if(n=e.stateNode,0===(64&e.effectTag)&&null!==n&&"function"===typeof n.componentDidCatch&&!i(n)){ct(e),n=e.updateQueue;var r=n.capturedValues;return null===r?n.capturedValues=[t]:r.push(t),void(e.effectTag|=1024)}}e=e.return}while(null!==e)},unwindWork:function(e){switch(e.tag){case 2:s(e);var t=e.effectTag;return 1024&t?(e.effectTag=-1025&t|64,e):null;case 3:return a(e),l(e),t=e.effectTag,1024&t?(e.effectTag=-1025&t|64,e):null;case 5:return o(e),null;case 4:return a(e),null;case 13:return u(e),null;default:return null}},unwindInterruptedWork:function(e){switch(e.tag){case 2:s(e);break;case 3:a(e),l(e);break;case 5:o(e);break;case 4:a(e);break;case 13:u(e)}}}}function wt(e,t){var n=t.source;null===t.stack&&ae(n),null!==n&&ie(n),t=t.value,null!==e&&2===e.tag&&ie(e);try{t&&t.suppressReactErrorLogging||console.error(t)}catch(e){e&&e.suppressReactErrorLogging||console.error(e)}}function kt(e,t,n,i,a){function o(e){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(n){t(e,n)}else n.current=null}function s(e){switch("function"===typeof st&&st(e),e.tag){case 2:o(e);var n=e.stateNode;if("function"===typeof n.componentWillUnmount)try{n.props=e.memoizedProps,n.state=e.memoizedState,n.componentWillUnmount()}catch(n){t(e,n)}break;case 5:o(e);break;case 7:l(e.stateNode);break;case 4:f&&c(e)}}function l(e){for(var t=e;;)if(s(t),null===t.child||f&&4===t.tag){if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}else t.child.return=t,t=t.child}function u(e){return 5===e.tag||3===e.tag||4===e.tag}function c(e){for(var t=e,n=!1,i=void 0,a=void 0;;){if(!n){n=t.return;e:for(;;){switch(null===n&&r("160"),n.tag){case 5:i=n.stateNode,a=!1;break e;case 3:case 4:i=n.stateNode.containerInfo,a=!0;break e}n=n.return}n=!0}if(5===t.tag||6===t.tag)l(t),a?w(i,t.stateNode):x(i,t.stateNode);else if(4===t.tag?i=t.stateNode.containerInfo:s(t),null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return;t=t.return,4===t.tag&&(n=!1)}t.sibling.return=t.return,t=t.sibling}}var d=e.getPublicInstance,f=e.mutation;e=e.persistence,f||r(e?"235":"236");var h=f.commitMount,p=f.commitUpdate,m=f.resetTextContent,g=f.commitTextUpdate,y=f.appendChild,v=f.appendChildToContainer,_=f.insertBefore,b=f.insertInContainerBefore,x=f.removeChild,w=f.removeChildFromContainer;return{commitBeforeMutationLifeCycles:function(e,t){switch(t.tag){case 2:if(2048&t.effectTag&&null!==e){var n=e.memoizedProps,i=e.memoizedState;e=t.stateNode,e.props=t.memoizedProps,e.state=t.memoizedState,t=e.getSnapshotBeforeUpdate(n,i),e.__reactInternalSnapshotBeforeUpdate=t}break;case 3:case 5:case 6:case 4:break;default:r("163")}},commitResetTextContent:function(e){m(e.stateNode)},commitPlacement:function(e){e:{for(var t=e.return;null!==t;){if(u(t)){var n=t;break e}t=t.return}r("160"),n=void 0}var i=t=void 0;switch(n.tag){case 5:t=n.stateNode,i=!1;break;case 3:case 4:t=n.stateNode.containerInfo,i=!0;break;default:r("161")}16&n.effectTag&&(m(t),n.effectTag&=-17);e:t:for(n=e;;){for(;null===n.sibling;){if(null===n.return||u(n.return)){n=null;break e}n=n.return}for(n.sibling.return=n.return,n=n.sibling;5!==n.tag&&6!==n.tag;){if(2&n.effectTag)continue t;if(null===n.child||4===n.tag)continue t;n.child.return=n,n=n.child}if(!(2&n.effectTag)){n=n.stateNode;break e}}for(var a=e;;){if(5===a.tag||6===a.tag)n?i?b(t,a.stateNode,n):_(t,a.stateNode,n):i?v(t,a.stateNode):y(t,a.stateNode);else if(4!==a.tag&&null!==a.child){a.child.return=a,a=a.child;continue}if(a===e)break;for(;null===a.sibling;){if(null===a.return||a.return===e)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},commitDeletion:function(e){c(e),e.return=null,e.child=null,e.alternate&&(e.alternate.child=null,e.alternate.return=null)},commitWork:function(e,t){switch(t.tag){case 2:break;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var a=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&p(n,o,a,e,i,t)}break;case 6:null===t.stateNode&&r("162"),n=t.memoizedProps,g(t.stateNode,null!==e?e.memoizedProps:n,n);break;case 3:break;default:r("163")}},commitLifeCycles:function(e,t,n){switch(n.tag){case 2:if(e=n.stateNode,4&n.effectTag)if(null===t)e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidMount();else{var i=t.memoizedProps;t=t.memoizedState,e.props=n.memoizedProps,e.state=n.memoizedState,e.componentDidUpdate(i,t,e.__reactInternalSnapshotBeforeUpdate)}n=n.updateQueue,null!==n&&pt(n,e);break;case 3:if(null!==(t=n.updateQueue)){if(e=null,null!==n.child)switch(n.child.tag){case 5:e=d(n.child.stateNode);break;case 2:e=n.child.stateNode}pt(t,e)}break;case 5:e=n.stateNode,null===t&&4&n.effectTag&&h(e,n.type,n.memoizedProps,n);break;case 6:case 4:break;default:r("163")}},commitErrorLogging:function(e,t){switch(e.tag){case 2:var n=e.type;t=e.stateNode;var i=e.updateQueue;(null===i||null===i.capturedValues)&&r("264");var o=i.capturedValues;for(i.capturedValues=null,"function"!==typeof n.getDerivedStateFromCatch&&a(t),t.props=e.memoizedProps,t.state=e.memoizedState,n=0;n<o.length;n++){i=o[n];var s=i.value,l=i.stack;wt(e,i),t.componentDidCatch(s,{componentStack:null!==l?l:""})}break;case 3:for(n=e.updateQueue,(null===n||null===n.capturedValues)&&r("264"),o=n.capturedValues,n.capturedValues=null,n=0;n<o.length;n++)i=o[n],wt(e,i),t(i.value);break;default:r("265")}},commitAttachRef:function(e){var t=e.ref;if(null!==t){var n=e.stateNode;switch(e.tag){case 5:e=d(n);break;default:e=n}"function"===typeof t?t(e):t.current=e}},commitDetachRef:function(e){null!==(e=e.ref)&&("function"===typeof e?e(null):e.current=null)}}}function Tt(e,t){function n(e){return e===vi&&r("174"),e}var i=e.getChildHostContext,a=e.getRootHostContext;e=t.createCursor;var o=t.push,s=t.pop,l=e(vi),u=e(vi),c=e(vi);return{getHostContext:function(){return n(l.current)},getRootHostContainer:function(){return n(c.current)},popHostContainer:function(e){s(l,e),s(u,e),s(c,e)},popHostContext:function(e){u.current===e&&(s(l,e),s(u,e))},pushHostContainer:function(e,t){o(c,t,e),t=a(t),o(u,e,e),o(l,t,e)},pushHostContext:function(e){var t=n(c.current),r=n(l.current);t=i(r,e.type,t),r!==t&&(o(u,e,e),o(l,t,e))}}}function Mt(e){function t(e,t){var n=new Qe(5,null,null,0);n.type="DELETED",n.stateNode=t,n.return=e,n.effectTag=8,null!==e.lastEffect?(e.lastEffect.nextEffect=n,e.lastEffect=n):e.firstEffect=e.lastEffect=n}function n(e,t){switch(e.tag){case 5:return null!==(t=o(t,e.type,e.pendingProps))&&(e.stateNode=t,!0);case 6:return null!==(t=s(t,e.pendingProps))&&(e.stateNode=t,!0);default:return!1}}function i(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag;)e=e.return;f=e}var a=e.shouldSetTextContent;if(!(e=e.hydration))return{enterHydrationState:function(){return!1},resetHydrationState:function(){},tryToClaimNextHydratableInstance:function(){},prepareToHydrateHostInstance:function(){r("175")},prepareToHydrateHostTextInstance:function(){r("176")},popHydrationState:function(){return!1}};var o=e.canHydrateInstance,s=e.canHydrateTextInstance,l=e.getNextHydratableSibling,u=e.getFirstHydratableChild,c=e.hydrateInstance,d=e.hydrateTextInstance,f=null,h=null,p=!1;return{enterHydrationState:function(e){return h=u(e.stateNode.containerInfo),f=e,p=!0},resetHydrationState:function(){h=f=null,p=!1},tryToClaimNextHydratableInstance:function(e){if(p){var r=h;if(r){if(!n(e,r)){if(!(r=l(r))||!n(e,r))return e.effectTag|=2,p=!1,void(f=e);t(f,h)}f=e,h=u(r)}else e.effectTag|=2,p=!1,f=e}},prepareToHydrateHostInstance:function(e,t,n){return t=c(e.stateNode,e.type,e.memoizedProps,t,n,e),e.updateQueue=t,null!==t},prepareToHydrateHostTextInstance:function(e){return d(e.stateNode,e.memoizedProps,e)},popHydrationState:function(e){if(e!==f)return!1;if(!p)return i(e),p=!0,!1;var n=e.type;if(5!==e.tag||"head"!==n&&"body"!==n&&!a(n,e.memoizedProps))for(n=h;n;)t(e,n),n=l(n);return i(e),h=f?l(e.stateNode):null,!0}}}function At(e){function t(e,t,n){e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=n}function n(e){return 2===e.tag&&null!=e.type.childContextTypes}function i(e,t){var n=e.stateNode,i=e.type.childContextTypes;if("function"!==typeof n.getChildContext)return t;n=n.getChildContext();for(var a in n)a in i||r("108",ie(e)||"Unknown",a);return dn({},t,n)}var a=e.createCursor,o=e.push,s=e.pop,l=a(gn),u=a(!1),c=gn;return{getUnmaskedContext:function(e){return n(e)?c:l.current},cacheContext:t,getMaskedContext:function(e,n){var r=e.type.contextTypes;if(!r)return gn;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===n)return i.__reactInternalMemoizedMaskedChildContext;var a,o={};for(a in r)o[a]=n[a];return i&&t(e,n,o),o},hasContextChanged:function(){return u.current},isContextConsumer:function(e){return 2===e.tag&&null!=e.type.contextTypes},isContextProvider:n,popContextProvider:function(e){n(e)&&(s(u,e),s(l,e))},popTopLevelContextObject:function(e){s(u,e),s(l,e)},pushTopLevelContextObject:function(e,t,n){null!=l.cursor&&r("168"),o(l,t,e),o(u,n,e)},processChildContext:i,pushContextProvider:function(e){if(!n(e))return!1;var t=e.stateNode;return t=t&&t.__reactInternalMemoizedMergedChildContext||gn,c=l.current,o(l,t,e),o(u,u.current,e),!0},invalidateContextProvider:function(e,t){var n=e.stateNode;if(n||r("169"),t){var a=i(e,c);n.__reactInternalMemoizedMergedChildContext=a,s(u,e),s(l,e),o(l,a,e)}else s(u,e);o(u,t,e)},findCurrentUnmaskedContext:function(e){for(2!==Ie(e)||2!==e.tag?r("170"):void 0;3!==e.tag;){if(n(e))return e.stateNode.__reactInternalMemoizedMergedChildContext;(e=e.return)||r("171")}return e.stateNode.context}}}function Ct(e){var t=e.createCursor,n=e.push,r=e.pop,i=t(null),a=t(null),o=t(0);return{pushProvider:function(e){var t=e.type.context;n(o,t._changedBits,e),n(a,t._currentValue,e),n(i,e,e),t._currentValue=e.pendingProps.value,t._changedBits=e.stateNode},popProvider:function(e){var t=o.current,n=a.current;r(i,e),r(a,e),r(o,e),e=e.type.context,e._currentValue=n,e._changedBits=t}}}function St(){var e=[],t=-1;return{createCursor:function(e){return{current:e}},isEmpty:function(){return-1===t},pop:function(n){0>t||(n.current=e[t],e[t]=null,t--)},push:function(n,r){t++,e[t]=n.current,n.current=r},checkThatStackIsEmpty:function(){},resetStackAfterFatalErrorInDev:function(){}}}function Et(e){function t(){if(null!==$)for(var e=$.return;null!==e;)L(e),e=e.return;ee=null,te=0,$=null,ie=!1}function n(e){return null!==oe&&oe.has(e)}function i(e){for(;;){var t=e.alternate,n=e.return,r=e.sibling;if(0===(512&e.effectTag)){t=E(t,e,te);var i=e;if(1073741823===te||1073741823!==i.expirationTime){e:switch(i.tag){case 3:case 2:var a=i.updateQueue;a=null===a?0:a.expirationTime;break e;default:a=0}for(var o=i.child;null!==o;)0!==o.expirationTime&&(0===a||a>o.expirationTime)&&(a=o.expirationTime),o=o.sibling;i.expirationTime=a}if(null!==t)return t;if(null!==n&&0===(512&n.effectTag)&&(null===n.firstEffect&&(n.firstEffect=e.firstEffect),null!==e.lastEffect&&(null!==n.lastEffect&&(n.lastEffect.nextEffect=e.firstEffect),n.lastEffect=e.lastEffect),1<e.effectTag&&(null!==n.lastEffect?n.lastEffect.nextEffect=e:n.firstEffect=e,n.lastEffect=e)),null!==r)return r;if(null===n){ie=!0;break}e=n}else{if(null!==(e=I(e)))return e.effectTag&=2559,e;if(null!==n&&(n.firstEffect=n.lastEffect=null,n.effectTag|=512),null!==r)return r;if(null===n)break;e=n}}return null}function a(e){var t=S(e.alternate,e,te);return null===t&&(t=i(e)),ar.current=null,t}function o(e,n,o){Q&&r("243"),Q=!0,n===te&&e===ee&&null!==$||(t(),ee=e,te=n,$=$e(ee.current,null,te),e.pendingCommitExpirationTime=0);for(var s=!1;;){try{if(o)for(;null!==$&&!w();)$=a($);else for(;null!==$;)$=a($)}catch(e){if(null===$){s=!0,k(e);break}o=$;var l=o.return;if(null===l){s=!0,k(e);break}P(l,o,e),$=i(o)}break}return Q=!1,s||null!==$?null:ie?(e.pendingCommitExpirationTime=n,e.current.alternate):void r("262")}function s(e,t,n,r){e={value:n,source:e,stack:ae(e)},dt(t,{expirationTime:r,partialState:null,callback:null,isReplace:!1,isForced:!1,capturedValue:e,next:null}),c(t,r)}function l(e,t){e:{Q&&!re&&r("263");for(var i=e.return;null!==i;){switch(i.tag){case 2:var a=i.stateNode;if("function"===typeof i.type.getDerivedStateFromCatch||"function"===typeof a.componentDidCatch&&!n(a)){s(e,i,t,1),e=void 0;break e}break;case 3:s(e,i,t,1),e=void 0;break e}i=i.return}3===e.tag&&s(e,e,t,1),e=void 0}return e}function u(e){return e=0!==K?K:Q?re?1:te:1&e.mode?xe?10*(1+((d()+50)/10|0)):25*(1+((d()+500)/25|0)):1,xe&&(0===pe||e>pe)&&(pe=e),e}function c(e,n){e:{for(;null!==e;){if((0===e.expirationTime||e.expirationTime>n)&&(e.expirationTime=n),null!==e.alternate&&(0===e.alternate.expirationTime||e.alternate.expirationTime>n)&&(e.alternate.expirationTime=n),null===e.return){if(3!==e.tag){n=void 0;break e}var i=e.stateNode;!Q&&0!==te&&n<te&&t(),Q&&!re&&ee===i||p(i,n),Te>ke&&r("185")}e=e.return}n=void 0}return n}function d(){return Z=V()-Y,X=2+(Z/10|0)}function f(e,t,n,r,i){var a=K;K=1;try{return e(t,n,r,i)}finally{K=a}}function h(e){if(0!==ue){if(e>ue)return;W(ce)}var t=V()-Y;ue=e,ce=H(g,{timeout:10*(e-2)-t})}function p(e,t){if(null===e.nextScheduledRoot)e.remainingExpirationTime=t,null===le?(se=le=e,e.nextScheduledRoot=e):(le=le.nextScheduledRoot=e,le.nextScheduledRoot=se);else{var n=e.remainingExpirationTime;(0===n||t<n)&&(e.remainingExpirationTime=t)}de||(_e?be&&(fe=e,he=1,b(e,1,!1)):1===t?y():h(t))}function m(){var e=0,t=null;if(null!==le)for(var n=le,i=se;null!==i;){var a=i.remainingExpirationTime;if(0===a){if((null===n||null===le)&&r("244"),i===i.nextScheduledRoot){se=le=i.nextScheduledRoot=null;break}if(i===se)se=a=i.nextScheduledRoot,le.nextScheduledRoot=a,i.nextScheduledRoot=null;else{if(i===le){le=n,le.nextScheduledRoot=se,i.nextScheduledRoot=null;break}n.nextScheduledRoot=i.nextScheduledRoot,i.nextScheduledRoot=null}i=n.nextScheduledRoot}else{if((0===e||a<e)&&(e=a,t=i),i===le)break;n=i,i=i.nextScheduledRoot}}n=fe,null!==n&&n===t&&1===e?Te++:Te=0,fe=t,he=e}function g(e){v(0,!0,e)}function y(){v(1,!1,null)}function v(e,t,n){if(ve=n,m(),t)for(;null!==fe&&0!==he&&(0===e||e>=he)&&(!me||d()>=he);)b(fe,he,!me),m();else for(;null!==fe&&0!==he&&(0===e||e>=he);)b(fe,he,!1),m();null!==ve&&(ue=0,ce=-1),0!==he&&h(he),ve=null,me=!1,_()}function _(){if(Te=0,null!==we){var e=we;we=null;for(var t=0;t<e.length;t++){var n=e[t];try{n._onComplete()}catch(e){ge||(ge=!0,ye=e)}}}if(ge)throw e=ye,ye=null,ge=!1,e}function b(e,t,n){de&&r("245"),de=!0,n?(n=e.finishedWork,null!==n?x(e,n,t):(e.finishedWork=null,null!==(n=o(e,t,!0))&&(w()?e.finishedWork=n:x(e,n,t)))):(n=e.finishedWork,null!==n?x(e,n,t):(e.finishedWork=null,null!==(n=o(e,t,!1))&&x(e,n,t))),de=!1}function x(e,t,n){var i=e.firstBatch;if(null!==i&&i._expirationTime<=n&&(null===we?we=[i]:we.push(i),i._defer))return e.finishedWork=t,void(e.remainingExpirationTime=0);e.finishedWork=null,re=Q=!0,n=t.stateNode,n.current===t&&r("177"),i=n.pendingCommitExpirationTime,0===i&&r("261"),n.pendingCommitExpirationTime=0;var a=d();if(ar.current=null,1<t.effectTag)if(null!==t.lastEffect){t.lastEffect.nextEffect=t;var o=t.firstEffect}else o=t;else o=t.firstEffect;for(q(n.containerInfo),ne=o;null!==ne;){var s=!1,u=void 0;try{for(;null!==ne;)2048&ne.effectTag&&O(ne.alternate,ne),ne=ne.nextEffect}catch(e){s=!0,u=e}s&&(null===ne&&r("178"),l(ne,u),null!==ne&&(ne=ne.nextEffect))}for(ne=o;null!==ne;){s=!1,u=void 0;try{for(;null!==ne;){var c=ne.effectTag;if(16&c&&z(ne),128&c){var f=ne.alternate;null!==f&&U(f)}switch(14&c){case 2:R(ne),ne.effectTag&=-3;break;case 6:R(ne),ne.effectTag&=-3,N(ne.alternate,ne);break;case 4:N(ne.alternate,ne);break;case 8:D(ne)}ne=ne.nextEffect}}catch(e){s=!0,u=e}s&&(null===ne&&r("178"),l(ne,u),null!==ne&&(ne=ne.nextEffect))}for(G(n.containerInfo),n.current=t,ne=o;null!==ne;){c=!1,f=void 0;try{for(o=n,s=a,u=i;null!==ne;){var h=ne.effectTag;36&h&&F(o,ne.alternate,ne,s,u),256&h&&j(ne,k),128&h&&B(ne);var p=ne.nextEffect;ne.nextEffect=null,ne=p}}catch(e){c=!0,f=e}c&&(null===ne&&r("178"),l(ne,f),null!==ne&&(ne=ne.nextEffect))}Q=re=!1,"function"===typeof ot&&ot(t.stateNode),t=n.current.expirationTime,0===t&&(oe=null),e.remainingExpirationTime=t}function w(){return!(null===ve||ve.timeRemaining()>Me)&&(me=!0)}function k(e){null===fe&&r("246"),fe.remainingExpirationTime=0,ge||(ge=!0,ye=e)}var T=St(),M=Tt(e,T),A=At(T);T=Ct(T);var C=Mt(e),S=_t(e,M,A,T,C,c,u).beginWork,E=bt(e,M,A,T,C).completeWork;M=xt(M,A,T,c,n);var P=M.throwException,I=M.unwindWork,L=M.unwindInterruptedWork;M=kt(e,l,c,u,function(e){null===oe?oe=new Set([e]):oe.add(e)},d);var O=M.commitBeforeMutationLifeCycles,z=M.commitResetTextContent,R=M.commitPlacement,D=M.commitDeletion,N=M.commitWork,F=M.commitLifeCycles,j=M.commitErrorLogging,B=M.commitAttachRef,U=M.commitDetachRef,V=e.now,H=e.scheduleDeferredCallback,W=e.cancelDeferredCallback,q=e.prepareForCommit,G=e.resetAfterCommit,Y=V(),X=2,Z=Y,J=0,K=0,Q=!1,$=null,ee=null,te=0,ne=null,re=!1,ie=!1,oe=null,se=null,le=null,ue=0,ce=-1,de=!1,fe=null,he=0,pe=0,me=!1,ge=!1,ye=null,ve=null,_e=!1,be=!1,xe=!1,we=null,ke=1e3,Te=0,Me=1;return{recalculateCurrentTime:d,computeExpirationForFiber:u,scheduleWork:c,requestWork:p,flushRoot:function(e,t){de&&r("253"),fe=e,he=t,b(e,t,!1),y(),_()},batchedUpdates:function(e,t){var n=_e;_e=!0;try{return e(t)}finally{(_e=n)||de||y()}},unbatchedUpdates:function(e,t){if(_e&&!be){be=!0;try{return e(t)}finally{be=!1}}return e(t)},flushSync:function(e,t){de&&r("187");var n=_e;_e=!0;try{return f(e,t)}finally{_e=n,y()}},flushControlled:function(e){var t=_e;_e=!0;try{f(e)}finally{(_e=t)||de||v(1,!1,null)}},deferredUpdates:function(e){var t=K;K=25*(1+((d()+500)/25|0));try{return e()}finally{K=t}},syncUpdates:f,interactiveUpdates:function(e,t,n){if(xe)return e(t,n);_e||de||0===pe||(v(pe,!1,null),pe=0);var r=xe,i=_e;_e=xe=!0;try{return e(t,n)}finally{xe=r,(_e=i)||de||y()}},flushInteractiveUpdates:function(){de||0===pe||(v(pe,!1,null),pe=0)},computeUniqueAsyncExpiration:function(){var e=25*(1+((d()+500)/25|0));return e<=J&&(e=J+1),J=e},legacyContext:A}}function Pt(e){function t(e,t,n,r,i,a){if(r=t.current,n){n=n._reactInternalFiber;var s=l(n);n=u(n)?c(n,s):s}else n=gn;return null===t.context?t.context=n:t.pendingContext=n,t=a,dt(r,{expirationTime:i,partialState:{element:e},callback:void 0===t?null:t,isReplace:!1,isForced:!1,capturedValue:null,next:null}),o(r,i),i}function n(e){return e=Re(e),null===e?null:e.stateNode}var r=e.getPublicInstance;e=Et(e);var i=e.recalculateCurrentTime,a=e.computeExpirationForFiber,o=e.scheduleWork,s=e.legacyContext,l=s.findCurrentUnmaskedContext,u=s.isContextProvider,c=s.processChildContext;return{createContainer:function(e,t,n){return t=new Qe(3,null,null,t?3:0),e={current:t,containerInfo:e,pendingChildren:null,pendingCommitExpirationTime:0,finishedWork:null,context:null,pendingContext:null,hydrate:n,remainingExpirationTime:0,firstBatch:null,nextScheduledRoot:null},t.stateNode=e},updateContainer:function(e,n,r,o){var s=n.current,l=i();return s=a(s),t(e,n,r,l,s,o)},updateContainerAtExpirationTime:function(e,n,r,a,o){return t(e,n,r,i(),a,o)},flushRoot:e.flushRoot,requestWork:e.requestWork,computeUniqueAsyncExpiration:e.computeUniqueAsyncExpiration,batchedUpdates:e.batchedUpdates,unbatchedUpdates:e.unbatchedUpdates,deferredUpdates:e.deferredUpdates,syncUpdates:e.syncUpdates,interactiveUpdates:e.interactiveUpdates,flushInteractiveUpdates:e.flushInteractiveUpdates,flushControlled:e.flushControlled,flushSync:e.flushSync,getPublicRootInstance:function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return r(e.child.stateNode);default:return e.child.stateNode}},findHostInstance:n,findHostInstanceWithNoPortals:function(e){return e=De(e),null===e?null:e.stateNode},injectIntoDevTools:function(e){var t=e.findFiberByHostInstance;return at(dn({},e,{findHostInstanceByFiber:function(e){return n(e)},findFiberByHostInstance:function(e){return t?t(e):null}}))}}}function It(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:cr,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}function Lt(e){var t="";return un.Children.forEach(e,function(e){null==e||"string"!==typeof e&&"number"!==typeof e||(t+=e)}),t}function Ot(e,t){return e=dn({children:void 0},t),(t=Lt(t.children))&&(e.children=t),e}function zt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+n,t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function Rt(e,t){var n=t.value;e._wrapperState={initialValue:null!=n?n:t.defaultValue,wasMultiple:!!t.multiple}}function Dt(e,t){return null!=t.dangerouslySetInnerHTML&&r("91"),dn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nt(e,t){var n=t.value;null==n&&(n=t.defaultValue,t=t.children,null!=t&&(null!=n&&r("92"),Array.isArray(t)&&(1>=t.length||r("93"),t=t[0]),n=""+t),null==n&&(n="")),e._wrapperState={initialValue:""+n}}function Ft(e,t){var n=t.value;null!=n&&(n=""+n,n!==e.value&&(e.value=n),null==t.defaultValue&&(e.defaultValue=n)),null!=t.defaultValue&&(e.defaultValue=t.defaultValue)}function jt(e){var t=e.textContent;t===e._wrapperState.initialValue&&(e.value=t)}function Bt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ut(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?Bt(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}function Vt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}function Ht(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=n,a=t[n];i=null==a||"boolean"===typeof a||""===a?"":r||"number"!==typeof a||0===a||ji.hasOwnProperty(i)&&ji[i]?(""+a).trim():a+"px","float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}function Wt(e,t,n){t&&(Ui[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML)&&r("137",e,n()),null!=t.dangerouslySetInnerHTML&&(null!=t.children&&r("60"),"object"===typeof t.dangerouslySetInnerHTML&&"__html"in t.dangerouslySetInnerHTML||r("61")),null!=t.style&&"object"!==typeof t.style&&r("62",n()))}function qt(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Gt(e,t){e=9===e.nodeType||11===e.nodeType?e:e.ownerDocument;var n=Ye(e);t=kn[t];for(var r=0;r<t.length;r++){var i=t[r];n.hasOwnProperty(i)&&n[i]||("topScroll"===i?Ve("topScroll","scroll",e):"topFocus"===i||"topBlur"===i?(Ve("topFocus","focus",e),Ve("topBlur","blur",e),n.topBlur=!0,n.topFocus=!0):"topCancel"===i?(Q("cancel",!0)&&Ve("topCancel","cancel",e),n.topCancel=!0):"topClose"===i?(Q("close",!0)&&Ve("topClose","close",e),n.topClose=!0):$r.hasOwnProperty(i)&&Ue(i,$r[i],e),n[i]=!0)}}function Yt(e,t,n,r){return n=9===n.nodeType?n:n.ownerDocument,r===Vi&&(r=Bt(e)),r===Vi?"script"===e?(e=n.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):e="string"===typeof t.is?n.createElement(e,{is:t.is}):n.createElement(e):e=n.createElementNS(r,e),e}function Xt(e,t){return(9===t.nodeType?t:t.ownerDocument).createTextNode(e)}function Zt(e,t,n,r){var i=qt(t,n);switch(t){case"iframe":case"object":Ue("topLoad","load",e);var a=n;break;case"video":case"audio":for(a in ei)ei.hasOwnProperty(a)&&Ue(a,ei[a],e);a=n;break;case"source":Ue("topError","error",e),a=n;break;case"img":case"image":case"link":Ue("topError","error",e),Ue("topLoad","load",e),a=n;break;case"form":Ue("topReset","reset",e),Ue("topSubmit","submit",e),a=n;break;case"details":Ue("topToggle","toggle",e),a=n;break;case"input":he(e,n),a=fe(e,n),Ue("topInvalid","invalid",e),Gt(r,"onChange");break;case"option":a=Ot(e,n);break;case"select":Rt(e,n),a=dn({},n,{value:void 0}),Ue("topInvalid","invalid",e),Gt(r,"onChange");break;case"textarea":Nt(e,n),a=Dt(e,n),Ue("topInvalid","invalid",e),Gt(r,"onChange");break;default:a=n}Wt(t,a,Hi);var o,s=a;for(o in s)if(s.hasOwnProperty(o)){var l=s[o];"style"===o?Ht(e,l,Hi):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&Fi(e,l):"children"===o?"string"===typeof l?("textarea"!==t||""!==l)&&Vt(e,l):"number"===typeof l&&Vt(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(wn.hasOwnProperty(o)?null!=l&&Gt(r,o):null!=l&&de(e,o,l,i))}switch(t){case"input":te(e),ge(e,n);break;case"textarea":te(e),jt(e,n);break;case"option":null!=n.value&&e.setAttribute("value",n.value);break;case"select":e.multiple=!!n.multiple,t=n.value,null!=t?zt(e,!!n.multiple,t,!1):null!=n.defaultValue&&zt(e,!!n.multiple,n.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=fn)}}function Jt(e,t,n,r,i){var a=null;switch(t){case"input":n=fe(e,n),r=fe(e,r),a=[];break;case"option":n=Ot(e,n),r=Ot(e,r),a=[];break;case"select":n=dn({},n,{value:void 0}),r=dn({},r,{value:void 0}),a=[];break;case"textarea":n=Dt(e,n),r=Dt(e,r),a=[];break;default:"function"!==typeof n.onClick&&"function"===typeof r.onClick&&(e.onclick=fn)}Wt(t,r,Hi),t=e=void 0;var o=null;for(e in n)if(!r.hasOwnProperty(e)&&n.hasOwnProperty(e)&&null!=n[e])if("style"===e){var s=n[e];for(t in s)s.hasOwnProperty(t)&&(o||(o={}),o[t]="")}else"dangerouslySetInnerHTML"!==e&&"children"!==e&&"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&"autoFocus"!==e&&(wn.hasOwnProperty(e)?a||(a=[]):(a=a||[]).push(e,null));for(e in r){var l=r[e];if(s=null!=n?n[e]:void 0,r.hasOwnProperty(e)&&l!==s&&(null!=l||null!=s))if("style"===e)if(s){for(t in s)!s.hasOwnProperty(t)||l&&l.hasOwnProperty(t)||(o||(o={}),o[t]="");for(t in l)l.hasOwnProperty(t)&&s[t]!==l[t]&&(o||(o={}),o[t]=l[t])}else o||(a||(a=[]),a.push(e,o)),o=l;else"dangerouslySetInnerHTML"===e?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(e,""+l)):"children"===e?s===l||"string"!==typeof l&&"number"!==typeof l||(a=a||[]).push(e,""+l):"suppressContentEditableWarning"!==e&&"suppressHydrationWarning"!==e&&(wn.hasOwnProperty(e)?(null!=l&&Gt(i,e),a||s===l||(a=[])):(a=a||[]).push(e,l))}return o&&(a=a||[]).push("style",o),a}function Kt(e,t,n,r,i){"input"===n&&"radio"===i.type&&null!=i.name&&pe(e,i),qt(n,r),r=qt(n,i);for(var a=0;a<t.length;a+=2){var o=t[a],s=t[a+1];"style"===o?Ht(e,s,Hi):"dangerouslySetInnerHTML"===o?Fi(e,s):"children"===o?Vt(e,s):de(e,o,s,r)}switch(n){case"input":me(e,i);break;case"textarea":Ft(e,i);break;case"select":e._wrapperState.initialValue=void 0,t=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!i.multiple,n=i.value,null!=n?zt(e,!!i.multiple,n,!1):t!==!!i.multiple&&(null!=i.defaultValue?zt(e,!!i.multiple,i.defaultValue,!0):zt(e,!!i.multiple,i.multiple?[]:"",!1))}}function Qt(e,t,n,r,i){switch(t){case"iframe":case"object":Ue("topLoad","load",e);break;case"video":case"audio":for(var a in ei)ei.hasOwnProperty(a)&&Ue(a,ei[a],e);break;case"source":Ue("topError","error",e);break;case"img":case"image":case"link":Ue("topError","error",e),Ue("topLoad","load",e);break;case"form":Ue("topReset","reset",e),Ue("topSubmit","submit",e);break;case"details":Ue("topToggle","toggle",e);break;case"input":he(e,n),Ue("topInvalid","invalid",e),Gt(i,"onChange");break;case"select":Rt(e,n),Ue("topInvalid","invalid",e),Gt(i,"onChange");break;case"textarea":Nt(e,n),Ue("topInvalid","invalid",e),Gt(i,"onChange")}Wt(t,n,Hi),r=null;for(var o in n)n.hasOwnProperty(o)&&(a=n[o],"children"===o?"string"===typeof a?e.textContent!==a&&(r=["children",a]):"number"===typeof a&&e.textContent!==""+a&&(r=["children",""+a]):wn.hasOwnProperty(o)&&null!=a&&Gt(i,o));switch(t){case"input":te(e),ge(e,n);break;case"textarea":te(e),jt(e,n);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(e.onclick=fn)}return r}function $t(e,t){return e.nodeValue!==t}function en(e){this._expirationTime=Yi.computeUniqueAsyncExpiration(),this._root=e,this._callbacks=this._next=null,this._hasChildren=this._didComplete=!1,this._children=null,this._defer=!0}function tn(){this._callbacks=null,this._didCommit=!1,this._onCommit=this._onCommit.bind(this)}function nn(e,t,n){this._internalRoot=Yi.createContainer(e,t,n)}function rn(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function an(e,t){switch(e){case"button":case"input":case"select":case"textarea":return!!t.autoFocus}return!1}function on(e,t){if(t||(t=e?9===e.nodeType?e.documentElement:e.firstChild:null,t=!(!t||1!==t.nodeType||!t.hasAttribute("data-reactroot"))),!t)for(var n;n=e.lastChild;)e.removeChild(n);return new nn(e,!1,t)}function sn(e,t,n,i,a){rn(n)||r("200");var o=n._reactRootContainer;if(o){if("function"===typeof a){var s=a;a=function(){var e=Yi.getPublicRootInstance(o._internalRoot);s.call(e)}}null!=e?o.legacy_renderSubtreeIntoContainer(e,t,a):o.render(t,a)}else{if(o=n._reactRootContainer=on(n,i),"function"===typeof a){var l=a;a=function(){var e=Yi.getPublicRootInstance(o._internalRoot);l.call(e)}}Yi.unbatchedUpdates(function(){null!=e?o.legacy_renderSubtreeIntoContainer(e,t,a):o.render(t,a)})}return Yi.getPublicRootInstance(o._internalRoot)}function ln(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;return rn(t)||r("200"),It(e,t,null,n)}var un=n(1),cn=n(173),dn=n(35),fn=n(51),hn=n(174),pn=n(67),mn=n(175),gn=n(100);un||r("227");var yn={_caughtError:null,_hasCaughtError:!1,_rethrowError:null,_hasRethrowError:!1,invokeGuardedCallback:function(e,t,n,r,a,o,s,l,u){i.apply(yn,arguments)},invokeGuardedCallbackAndCatchFirstError:function(e,t,n,r,i,a,o,s,l){if(yn.invokeGuardedCallback.apply(this,arguments),yn.hasCaughtError()){var u=yn.clearCaughtError();yn._hasRethrowError||(yn._hasRethrowError=!0,yn._rethrowError=u)}},rethrowCaughtError:function(){return a.apply(yn,arguments)},hasCaughtError:function(){return yn._hasCaughtError},clearCaughtError:function(){if(yn._hasCaughtError){var e=yn._caughtError;return yn._caughtError=null,yn._hasCaughtError=!1,e}r("198")}},vn=null,_n={},bn=[],xn={},wn={},kn={},Tn=Object.freeze({plugins:bn,eventNameDispatchConfigs:xn,registrationNameModules:wn,registrationNameDependencies:kn,possibleRegistrationNames:null,injectEventPluginOrder:l,injectEventPluginsByName:u}),Mn=null,An=null,Cn=null,Sn=null,En={injectEventPluginOrder:l,injectEventPluginsByName:u},Pn=Object.freeze({injection:En,getListener:g,runEventsInBatch:y,runExtractedEventsInBatch:v}),In=Math.random().toString(36).slice(2),Ln="__reactInternalInstance$"+In,On="__reactEventHandlers$"+In,zn=Object.freeze({precacheFiberNode:function(e,t){t[Ln]=e},getClosestInstanceFromNode:_,getInstanceFromNode:function(e){return e=e[Ln],!e||5!==e.tag&&6!==e.tag?null:e},getNodeFromInstance:b,getFiberCurrentPropsFromNode:x,updateFiberProps:function(e,t){e[On]=t}}),Rn=Object.freeze({accumulateTwoPhaseDispatches:E,accumulateTwoPhaseDispatchesSkipTarget:function(e){f(e,A)},accumulateEnterLeaveDispatches:P,accumulateDirectDispatches:function(e){f(e,S)}}),Dn=null,Nn={_root:null,_startText:null,_fallbackText:null},Fn="dispatchConfig _targetInst nativeEvent isDefaultPrevented isPropagationStopped _dispatchListeners _dispatchInstances".split(" "),jn={type:null,target:null,currentTarget:fn.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};dn(z.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=fn.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=fn.thatReturnsTrue)},persist:function(){this.isPersistent=fn.thatReturnsTrue},isPersistent:fn.thatReturnsFalse,destructor:function(){var e,t=this.constructor.Interface;for(e in t)this[e]=null;for(t=0;t<Fn.length;t++)this[Fn[t]]=null}}),z.Interface=jn,z.extend=function(e){function t(){}function n(){return r.apply(this,arguments)}var r=this;t.prototype=r.prototype;var i=new t;return dn(i,n.prototype),n.prototype=i,n.prototype.constructor=n,n.Interface=dn({},r.Interface,e),n.extend=r.extend,N(n),n},N(z);var Bn=z.extend({data:null}),Un=z.extend({data:null}),Vn=[9,13,27,32],Hn=cn.canUseDOM&&"CompositionEvent"in window,Wn=null;cn.canUseDOM&&"documentMode"in document&&(Wn=document.documentMode);var qn=cn.canUseDOM&&"TextEvent"in window&&!Wn,Gn=cn.canUseDOM&&(!Hn||Wn&&8<Wn&&11>=Wn),Yn=String.fromCharCode(32),Xn={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["topCompositionEnd","topKeyPress","topTextInput","topPaste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"topBlur topCompositionEnd topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},dependencies:"topBlur topCompositionStart topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"topBlur topCompositionUpdate topKeyDown topKeyPress topKeyUp topMouseDown".split(" ")}},Zn=!1,Jn=!1,Kn={eventTypes:Xn,extractEvents:function(e,t,n,r){var i=void 0,a=void 0;if(Hn)e:{switch(e){case"topCompositionStart":i=Xn.compositionStart;break e;case"topCompositionEnd":i=Xn.compositionEnd;break e;case"topCompositionUpdate":i=Xn.compositionUpdate;break e}i=void 0}else Jn?F(e,n)&&(i=Xn.compositionEnd):"topKeyDown"===e&&229===n.keyCode&&(i=Xn.compositionStart);return i?(Gn&&(Jn||i!==Xn.compositionStart?i===Xn.compositionEnd&&Jn&&(a=L()):(Nn._root=r,Nn._startText=O(),Jn=!0)),i=Bn.getPooled(i,t,n,r),a?i.data=a:null!==(a=j(n))&&(i.data=a),E(i),a=i):a=null,(e=qn?B(e,n):U(e,n))?(t=Un.getPooled(Xn.beforeInput,t,n,r),t.data=e,E(t)):t=null,null===a?t:null===t?a:[a,t]}},Qn=null,$n=null,er=null,tr={injectFiberControlledHostComponent:function(e){Qn=e}},nr=Object.freeze({injection:tr,enqueueStateRestore:H,needsStateRestore:W,restoreStateIfNeeded:q}),rr=!1,ir={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},ar=un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,or="function"===typeof Symbol&&Symbol.for,sr=or?Symbol.for("react.element"):60103,lr=or?Symbol.for("react.call"):60104,ur=or?Symbol.for("react.return"):60105,cr=or?Symbol.for("react.portal"):60106,dr=or?Symbol.for("react.fragment"):60107,fr=or?Symbol.for("react.strict_mode"):60108,hr=or?Symbol.for("react.provider"):60109,pr=or?Symbol.for("react.context"):60110,mr=or?Symbol.for("react.async_mode"):60111,gr=or?Symbol.for("react.forward_ref"):60112,yr="function"===typeof Symbol&&Symbol.iterator,vr=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_r={},br={},xr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){xr[e]=new ue(e,0,!1,e,null)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];xr[t]=new ue(t,1,!1,e[1],null)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){xr[e]=new ue(e,2,!1,e.toLowerCase(),null)}),["autoReverse","externalResourcesRequired","preserveAlpha"].forEach(function(e){xr[e]=new ue(e,2,!1,e,null)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){xr[e]=new ue(e,3,!1,e.toLowerCase(),null)}),["checked","multiple","muted","selected"].forEach(function(e){xr[e]=new ue(e,3,!0,e.toLowerCase(),null)}),["capture","download"].forEach(function(e){xr[e]=new ue(e,4,!1,e.toLowerCase(),null)}),["cols","rows","size","span"].forEach(function(e){xr[e]=new ue(e,6,!1,e.toLowerCase(),null)}),["rowSpan","start"].forEach(function(e){xr[e]=new ue(e,5,!1,e.toLowerCase(),null)});var wr=/[\-\:]([a-z])/g;"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(wr,ce);xr[t]=new ue(t,1,!1,e,null)}),"xlink:actuate xlink:arcrole xlink:href xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(wr,ce);xr[t]=new ue(t,1,!1,e,"http://www.w3.org/1999/xlink")}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(wr,ce);xr[t]=new ue(t,1,!1,e,"http://www.w3.org/XML/1998/namespace")}),xr.tabIndex=new ue("tabIndex",1,!1,"tabindex",null);var kr={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"topBlur topChange topClick topFocus topInput topKeyDown topKeyUp topSelectionChange".split(" ")}},Tr=null,Mr=null,Ar=!1;cn.canUseDOM&&(Ar=Q("input")&&(!document.documentMode||9<document.documentMode));var Cr={eventTypes:kr,_isInputEventSupported:Ar,extractEvents:function(e,t,n,r){var i=t?b(t):window,a=void 0,o=void 0,s=i.nodeName&&i.nodeName.toLowerCase();if("select"===s||"input"===s&&"file"===i.type?a=we:J(i)?Ar?a=Se:(a=Ae,o=Me):!(s=i.nodeName)||"input"!==s.toLowerCase()||"checkbox"!==i.type&&"radio"!==i.type||(a=Ce),a&&(a=a(e,t)))return _e(a,n,r);o&&o(e,i,t),"topBlur"===e&&null!=t&&(e=t._wrapperState||i._wrapperState)&&e.controlled&&"number"===i.type&&ye(i,"number",i.value)}},Sr=z.extend({view:null,detail:null}),Er={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},Pr=Sr.extend({screenX:null,screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:Pe,button:null,buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)}}),Ir={mouseEnter:{registrationName:"onMouseEnter",dependencies:["topMouseOut","topMouseOver"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["topMouseOut","topMouseOver"]}},Lr={eventTypes:Ir,extractEvents:function(e,t,n,r){if("topMouseOver"===e&&(n.relatedTarget||n.fromElement)||"topMouseOut"!==e&&"topMouseOver"!==e)return null;var i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window;if("topMouseOut"===e?(e=t,t=(t=n.relatedTarget||n.toElement)?_(t):null):e=null,e===t)return null;var a=null==e?i:b(e);i=null==t?i:b(t);var o=Pr.getPooled(Ir.mouseLeave,e,n,r);return o.type="mouseleave",o.target=a,o.relatedTarget=i,n=Pr.getPooled(Ir.mouseEnter,t,n,r),n.type="mouseenter",n.target=i,n.relatedTarget=a,P(o,n,e,t),[o,n]}},Or=z.extend({animationName:null,elapsedTime:null,pseudoElement:null}),zr=z.extend({clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Rr=Sr.extend({relatedTarget:null}),Dr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fr=Sr.extend({key:function(e){if(e.key){var t=Dr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?(e=Ne(e),13===e?"Enter":String.fromCharCode(e)):"keydown"===e.type||"keyup"===e.type?Nr[e.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:Pe,charCode:function(e){return"keypress"===e.type?Ne(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Ne(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),jr=Pr.extend({dataTransfer:null}),Br=Sr.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:Pe}),Ur=z.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),Vr=Pr.extend({deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null}),Hr={},Wr={};"blur cancel click close contextMenu copy cut doubleClick dragEnd dragStart drop focus input invalid keyDown keyPress keyUp mouseDown mouseUp paste pause play rateChange reset seeked submit touchCancel touchEnd touchStart volumeChange".split(" ").forEach(function(e){Fe(e,!0)}),"abort animationEnd animationIteration animationStart canPlay canPlayThrough drag dragEnter dragExit dragLeave dragOver durationChange emptied encrypted ended error load loadedData loadedMetadata loadStart mouseMove mouseOut mouseOver playing progress scroll seeking stalled suspend timeUpdate toggle touchMove transitionEnd waiting wheel".split(" ").forEach(function(e){Fe(e,!1)});var qr={eventTypes:Hr,isInteractiveTopLevelEventType:function(e){return void 0!==(e=Wr[e])&&!0===e.isInteractive},extractEvents:function(e,t,n,r){var i=Wr[e];if(!i)return null;switch(e){case"topKeyPress":if(0===Ne(n))return null;case"topKeyDown":case"topKeyUp":e=Fr;break;case"topBlur":case"topFocus":e=Rr;break;case"topClick":if(2===n.button)return null;case"topDoubleClick":case"topMouseDown":case"topMouseMove":case"topMouseUp":case"topMouseOut":case"topMouseOver":case"topContextMenu":e=Pr;break;case"topDrag":case"topDragEnd":case"topDragEnter":case"topDragExit":case"topDragLeave":case"topDragOver":case"topDragStart":case"topDrop":e=jr;break;case"topTouchCancel":case"topTouchEnd":case"topTouchMove":case"topTouchStart":e=Br;break;case"topAnimationEnd":case"topAnimationIteration":case"topAnimationStart":e=Or;break;case"topTransitionEnd":e=Ur;break;case"topScroll":e=Sr;break;case"topWheel":e=Vr;break;case"topCopy":case"topCut":case"topPaste":e=zr;break;default:e=z}return t=e.getPooled(i,t,n,r),E(t),t}},Gr=qr.isInteractiveTopLevelEventType,Yr=[],Xr=!0,Zr=Object.freeze({get _enabled(){return Xr},setEnabled:Be,isEnabled:function(){return Xr},trapBubbledEvent:Ue,trapCapturedEvent:Ve,dispatchEvent:We}),Jr={animationend:qe("Animation","AnimationEnd"),animationiteration:qe("Animation","AnimationIteration"),animationstart:qe("Animation","AnimationStart"),transitionend:qe("Transition","TransitionEnd")},Kr={},Qr={};cn.canUseDOM&&(Qr=document.createElement("div").style,"AnimationEvent"in window||(delete Jr.animationend.animation,delete Jr.animationiteration.animation,delete Jr.animationstart.animation),"TransitionEvent"in window||delete Jr.transitionend.transition);var $r={topAnimationEnd:Ge("animationend"),topAnimationIteration:Ge("animationiteration"),topAnimationStart:Ge("animationstart"),topBlur:"blur",topCancel:"cancel",topChange:"change",topClick:"click",topClose:"close",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoad:"load",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topScroll:"scroll",topSelectionChange:"selectionchange",topTextInput:"textInput",topToggle:"toggle",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:Ge("transitionend"),topWheel:"wheel"},ei={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},ti={},ni=0,ri="_reactListenersID"+(""+Math.random()).slice(2),ii=cn.canUseDOM&&"documentMode"in document&&11>=document.documentMode,ai={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},dependencies:"topBlur topContextMenu topFocus topKeyDown topKeyUp topMouseDown topMouseUp topSelectionChange".split(" ")}},oi=null,si=null,li=null,ui=!1,ci={eventTypes:ai,extractEvents:function(e,t,n,r){var i,a=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;if(!(i=!a)){e:{a=Ye(a),i=kn.onSelect;for(var o=0;o<i.length;o++){var s=i[o];if(!a.hasOwnProperty(s)||!a[s]){a=!1;break e}}a=!0}i=!a}if(i)return null;switch(a=t?b(t):window,e){case"topFocus":(J(a)||"true"===a.contentEditable)&&(oi=a,si=t,li=null);break;case"topBlur":li=si=oi=null;break;case"topMouseDown":ui=!0;break;case"topContextMenu":case"topMouseUp":return ui=!1,Ke(n,r);case"topSelectionChange":if(ii)break;case"topKeyDown":case"topKeyUp":return Ke(n,r)}return null}};En.injectEventPluginOrder("ResponderEventPlugin SimpleEventPlugin TapEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" ")),Mn=zn.getFiberCurrentPropsFromNode,An=zn.getInstanceFromNode,Cn=zn.getNodeFromInstance,En.injectEventPluginsByName({SimpleEventPlugin:qr,EnterLeaveEventPlugin:Lr,ChangeEventPlugin:Cr,SelectEventPlugin:ci,BeforeInputEventPlugin:Kn});var di=null,fi=null;new Set;var hi=void 0,pi=void 0,mi=Array.isArray,gi=vt(!0),yi=vt(!1),vi={},_i=Object.freeze({default:Pt}),bi=_i&&Pt||_i,xi=bi.default?bi.default:bi,wi="object"===typeof performance&&"function"===typeof performance.now,ki=void 0;ki=wi?function(){return performance.now()}:function(){return Date.now()};var Ti=void 0,Mi=void 0;if(cn.canUseDOM)if("function"!==typeof requestIdleCallback||"function"!==typeof cancelIdleCallback){var Ai=null,Ci=!1,Si=-1,Ei=!1,Pi=0,Ii=33,Li=33,Oi=void 0;Oi=wi?{didTimeout:!1,timeRemaining:function(){var e=Pi-performance.now();return 0<e?e:0}}:{didTimeout:!1,timeRemaining:function(){var e=Pi-Date.now();return 0<e?e:0}};var zi="__reactIdleCallback$"+Math.random().toString(36).slice(2);window.addEventListener("message",function(e){if(e.source===window&&e.data===zi){if(Ci=!1,e=ki(),0>=Pi-e){if(!(-1!==Si&&Si<=e))return void(Ei||(Ei=!0,requestAnimationFrame(Ri)));Oi.didTimeout=!0}else Oi.didTimeout=!1;Si=-1,e=Ai,Ai=null,null!==e&&e(Oi)}},!1);var Ri=function(e){Ei=!1;var t=e-Pi+Li;t<Li&&Ii<Li?(8>t&&(t=8),Li=t<Ii?Ii:t):Ii=t,Pi=e+Li,Ci||(Ci=!0,window.postMessage(zi,"*"))};Ti=function(e,t){return Ai=e,null!=t&&"number"===typeof t.timeout&&(Si=ki()+t.timeout),Ei||(Ei=!0,requestAnimationFrame(Ri)),0},Mi=function(){Ai=null,Ci=!1,Si=-1}}else Ti=window.requestIdleCallback,Mi=window.cancelIdleCallback;else Ti=function(e){return setTimeout(function(){e({timeRemaining:function(){return 1/0},didTimeout:!1})})},Mi=function(e){clearTimeout(e)};var Di={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"},Ni=void 0,Fi=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n)})}:e}(function(e,t){if(e.namespaceURI!==Di.svg||"innerHTML"in e)e.innerHTML=t;else{for(Ni=Ni||document.createElement("div"),Ni.innerHTML="<svg>"+t+"</svg>",t=Ni.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}),ji={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Bi=["Webkit","ms","Moz","O"];Object.keys(ji).forEach(function(e){Bi.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ji[t]=ji[e]})});var Ui=dn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),Vi=Di.html,Hi=fn.thatReturns(""),Wi=Object.freeze({createElement:Yt,createTextNode:Xt,setInitialProperties:Zt,diffProperties:Jt,updateProperties:Kt,diffHydratedProperties:Qt,diffHydratedText:$t,warnForUnmatchedText:function(){},warnForDeletedHydratableElement:function(){},warnForDeletedHydratableText:function(){},warnForInsertedHydratedElement:function(){},warnForInsertedHydratedText:function(){},restoreControlledState:function(e,t,n){switch(t){case"input":if(me(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var a=x(i);a||r("90"),ne(i),me(i,a)}}}break;case"textarea":Ft(e,n);break;case"select":null!=(t=n.value)&&zt(e,!!n.multiple,t,!1)}}});tr.injectFiberControlledHostComponent(Wi);var qi=null,Gi=null;en.prototype.render=function(e){this._defer||r("250"),this._hasChildren=!0,this._children=e;var t=this._root._internalRoot,n=this._expirationTime,i=new tn;return Yi.updateContainerAtExpirationTime(e,t,null,n,i._onCommit),i},en.prototype.then=function(e){if(this._didComplete)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},en.prototype.commit=function(){var e=this._root._internalRoot,t=e.firstBatch;if(this._defer&&null!==t||r("251"),this._hasChildren){var n=this._expirationTime;if(t!==this){this._hasChildren&&(n=this._expirationTime=t._expirationTime,this.render(this._children));for(var i=null,a=t;a!==this;)i=a,a=a._next;null===i&&r("251"),i._next=a._next,this._next=t,e.firstBatch=this}this._defer=!1,Yi.flushRoot(e,n),t=this._next,this._next=null,t=e.firstBatch=t,null!==t&&t._hasChildren&&t.render(t._children)}else this._next=null,this._defer=!1},en.prototype._onComplete=function(){if(!this._didComplete){this._didComplete=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++)(0,e[t])()}},tn.prototype.then=function(e){if(this._didCommit)e();else{var t=this._callbacks;null===t&&(t=this._callbacks=[]),t.push(e)}},tn.prototype._onCommit=function(){if(!this._didCommit){this._didCommit=!0;var e=this._callbacks;if(null!==e)for(var t=0;t<e.length;t++){var n=e[t];"function"!==typeof n&&r("191",n),n()}}},nn.prototype.render=function(e,t){var n=this._internalRoot,r=new tn;return t=void 0===t?null:t,null!==t&&r.then(t),Yi.updateContainer(e,n,null,r._onCommit),r},nn.prototype.unmount=function(e){var t=this._internalRoot,n=new tn;return e=void 0===e?null:e,null!==e&&n.then(e),Yi.updateContainer(null,t,null,n._onCommit),n},nn.prototype.legacy_renderSubtreeIntoContainer=function(e,t,n){var r=this._internalRoot,i=new tn;return n=void 0===n?null:n,null!==n&&i.then(n),Yi.updateContainer(t,r,e,i._onCommit),i},nn.prototype.createBatch=function(){var e=new en(this),t=e._expirationTime,n=this._internalRoot,r=n.firstBatch;if(null===r)n.firstBatch=e,e._next=null;else{for(n=null;null!==r&&r._expirationTime<=t;)n=r,r=r._next;e._next=r,null!==n&&(n._next=e)}return e};var Yi=xi({getRootHostContext:function(e){var t=e.nodeType;switch(t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ut(null,"");break;default:t=8===t?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ut(e,t)}return e},getChildHostContext:function(e,t){return Ut(e,t)},getPublicInstance:function(e){return e},prepareForCommit:function(){qi=Xr;var e=hn();if(Je(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{var n=window.getSelection&&window.getSelection();if(n&&0!==n.rangeCount){t=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{t.nodeType,i.nodeType}catch(e){t=null;break e}var a=0,o=-1,s=-1,l=0,u=0,c=e,d=null;t:for(;;){for(var f;c!==t||0!==r&&3!==c.nodeType||(o=a+r),c!==i||0!==n&&3!==c.nodeType||(s=a+n),3===c.nodeType&&(a+=c.nodeValue.length),null!==(f=c.firstChild);)d=c,c=f;for(;;){if(c===e)break t;if(d===t&&++l===r&&(o=a),d===i&&++u===n&&(s=a),null!==(f=c.nextSibling))break;c=d,d=c.parentNode}c=f}t=-1===o||-1===s?null:{start:o,end:s}}else t=null}t=t||{start:0,end:0}}else t=null;Gi={focusedElem:e,selectionRange:t},Be(!1)},resetAfterCommit:function(){var e=Gi,t=hn(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&mn(document.documentElement,n)){if(Je(n))if(t=r.start,e=r.end,void 0===e&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(window.getSelection){t=window.getSelection();var i=n[I()].length;e=Math.min(r.start,i),r=void 0===r.end?e:Math.min(r.end,i),!t.extend&&e>r&&(i=r,r=e,e=i),i=Ze(n,e);var a=Ze(n,r);if(i&&a&&(1!==t.rangeCount||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)){var o=document.createRange();o.setStart(i.node,i.offset),t.removeAllRanges(),e>r?(t.addRange(o),t.extend(a.node,a.offset)):(o.setEnd(a.node,a.offset),t.addRange(o))}}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}Gi=null,Be(qi),qi=null},createInstance:function(e,t,n,r,i){return e=Yt(e,t,n,r),e[Ln]=i,e[On]=t,e},appendInitialChild:function(e,t){e.appendChild(t)},finalizeInitialChildren:function(e,t,n,r){return Zt(e,t,n,r),an(t,n)},prepareUpdate:function(e,t,n,r,i){return Jt(e,t,n,r,i)},shouldSetTextContent:function(e,t){return"textarea"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&"string"===typeof t.dangerouslySetInnerHTML.__html},shouldDeprioritizeSubtree:function(e,t){return!!t.hidden},createTextInstance:function(e,t,n,r){return e=Xt(e,t),e[Ln]=r,e},now:ki,mutation:{commitMount:function(e,t,n){an(t,n)&&e.focus()},commitUpdate:function(e,t,n,r,i){e[On]=i,Kt(e,t,n,r,i)},resetTextContent:function(e){Vt(e,"")},commitTextUpdate:function(e,t,n){e.nodeValue=n},appendChild:function(e,t){e.appendChild(t)},appendChildToContainer:function(e,t){8===e.nodeType?e.parentNode.insertBefore(t,e):e.appendChild(t)},insertBefore:function(e,t,n){e.insertBefore(t,n)},insertInContainerBefore:function(e,t,n){8===e.nodeType?e.parentNode.insertBefore(t,n):e.insertBefore(t,n)},removeChild:function(e,t){e.removeChild(t)},removeChildFromContainer:function(e,t){8===e.nodeType?e.parentNode.removeChild(t):e.removeChild(t)}},hydration:{canHydrateInstance:function(e,t){return 1!==e.nodeType||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e},canHydrateTextInstance:function(e,t){return""===t||3!==e.nodeType?null:e},getNextHydratableSibling:function(e){for(e=e.nextSibling;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},getFirstHydratableChild:function(e){for(e=e.firstChild;e&&1!==e.nodeType&&3!==e.nodeType;)e=e.nextSibling;return e},hydrateInstance:function(e,t,n,r,i,a){return e[Ln]=a,e[On]=n,Qt(e,t,n,i,r)},hydrateTextInstance:function(e,t,n){return e[Ln]=n,$t(e,t)},didNotMatchHydratedContainerTextInstance:function(){},didNotMatchHydratedTextInstance:function(){},didNotHydrateContainerInstance:function(){},didNotHydrateInstance:function(){},didNotFindHydratableContainerInstance:function(){},didNotFindHydratableContainerTextInstance:function(){},didNotFindHydratableInstance:function(){},didNotFindHydratableTextInstance:function(){}},scheduleDeferredCallback:Ti,cancelDeferredCallback:Mi}),Xi=Yi;G=Xi.batchedUpdates,Y=Xi.interactiveUpdates,X=Xi.flushInteractiveUpdates;var Zi={createPortal:ln,findDOMNode:function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternalFiber;if(t)return Yi.findHostInstance(t);"function"===typeof e.render?r("188"):r("213",Object.keys(e))},hydrate:function(e,t,n){return sn(null,e,t,!0,n)},render:function(e,t,n){return sn(null,e,t,!1,n)},unstable_renderSubtreeIntoContainer:function(e,t,n,i){return(null==e||void 0===e._reactInternalFiber)&&r("38"),sn(e,t,n,!1,i)},unmountComponentAtNode:function(e){return rn(e)||r("40"),!!e._reactRootContainer&&(Yi.unbatchedUpdates(function(){sn(null,null,e,!1,function(){e._reactRootContainer=null})}),!0)},unstable_createPortal:function(){return ln.apply(void 0,arguments)},unstable_batchedUpdates:Yi.batchedUpdates,unstable_deferredUpdates:Yi.deferredUpdates,flushSync:Yi.flushSync,unstable_flushControlled:Yi.flushControlled,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:{EventPluginHub:Pn,EventPluginRegistry:Tn,EventPropagators:Rn,ReactControlledComponent:nr,ReactDOMComponentTree:zn,ReactDOMEventListener:Zr},unstable_createRoot:function(e,t){return new nn(e,!0,null!=t&&!0===t.hydrate)}};Yi.injectIntoDevTools({findFiberByHostInstance:_,bundleType:0,version:"16.3.0",rendererPackageName:"react-dom"});var Ji=Object.freeze({default:Zi}),Ki=Ji&&Zi||Ji;e.exports=Ki.default?Ki.default:Ki},function(e,t,n){"use strict";var r=!("undefined"===typeof window||!window.document||!window.document.createElement),i={canUseDOM:r,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};e.exports=i},function(e,t,n){"use strict";function r(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}e.exports=r},function(e,t,n){"use strict";function r(e,t){return!(!e||!t)&&(e===t||!i(e)&&(i(t)?r(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var i=n(176);e.exports=r},function(e,t,n){"use strict";function r(e){return i(e)&&3==e.nodeType}var i=n(177);e.exports=r},function(e,t,n){"use strict";function r(e){var t=e?e.ownerDocument||e:document,n=t.defaultView||window;return!(!e||!("function"===typeof n.Node?e instanceof n.Node:"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName))}e.exports=r},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(17),u=n(210),c=n(211),d=n(456),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),h=l.a.div({}),p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={formatedData:Object(d.a)(u.a),rawData:u.a,ready:!0},n}return a(t,e),f(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.formatedData,n=e.rawData;return e.ready?s.a.createElement(h,null,s.a.createElement(c.a,{data:t,raw:n})):null}}]),t}(o.Component);t.a=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){return qe.speedy(e)}function s(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];Je=!!e}function l(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=(0,Ue.default)(t),t?Je?t.reduce(function(e,t){return e["data-simulate-"+c(t)]="",e},{}):(Ke||(console.warn("can't simulate without once calling simulations(true)"),Ke=!0),Ye||Xe||Qe||(console.warn("don't use simulation outside dev"),Qe=!0),{}):{}}function u(e){$e=!!e}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.toLowerCase().replace(/[^a-z0-9]/g,t)}function d(e){var t=JSON.stringify(e),n=(0,We.default)(t).toString(36);return e.label&&e.label.length>0&&Ye?c(e.label.join("."),"-")+"-"+n:n}function f(e){var t=Object.keys(e).filter(function(e){return"toString"!==e});return 1===t.length&&!!/data\-css\-([a-zA-Z0-9\-_]+)/.exec(t[0])}function h(e){var t=Object.keys(e).filter(function(e){return"toString"!==e});if(1!==t.length)throw new Error("not a rule");var n=/data\-css\-([a-zA-Z0-9\-_]+)/,r=n.exec(t[0]);if(!r)throw new Error("not a rule");return r[1]}function p(e){if(-1===e.indexOf(","))return[e];for(var t,n=[],r=[],i=0;t=et.exec(e);)switch(t[0]){case"(":i++;break;case")":i--;break;case",":if(i)break;n.push(t.index)}for(t=n.length;t--;)r.unshift(e.slice(n[t]+1)),e=e.slice(0,n[t]);return r.unshift(e),r}function m(e,t){if(!e)return t.replace(/\&/g,"");if(!t)return".css-"+e+",[data-css-"+e+"]";var n=p(t).map(function(t){return t.indexOf("&")>=0?[t.replace(/\&/gm,".css-"+e),t.replace(/\&/gm,"[data-css-"+e+"]")].join(","):".css-"+e+t+",[data-css-"+e+"]"+t}).join(",");return Je&&/^\&\:/.exec(t)&&!/\s/.exec(t)&&(n+=",.css-"+e+"[data-simulate-"+c(t)+"],[data-css-"+e+"][data-simulate-"+c(t)+"]"),n}function g(e){var t=e.selector,n=e.style,r=Ge.transform({selector:t,style:n});return r.selector+"{"+(0,je.createMarkupForStyles)(r.style)+"}"}function y(e){var t=void 0,n=void 0,r=void 0,i=void 0;return Object.keys(e).forEach(function(a){a.indexOf("&")>=0?(n=n||{},n[a]=e[a]):0===a.indexOf("@media")?(r=r||{},r[a]=y(e[a])):0===a.indexOf("@supports")?(i=i||{},i[a]=y(e[a])):"label"===a?e.label.length>0&&(t=t||{},t.label=$e?e.label.join("."):""):(t=t||{},t[a]=e[a])}),{plain:t,selects:n,medias:r,supports:i}}function v(e,t){var n=[],r=t.plain,i=t.selects,a=t.medias,o=t.supports;return r&&n.push(g({style:r,selector:m(e)})),i&&Object.keys(i).forEach(function(t){return n.push(g({style:i[t],selector:m(e,t)}))}),a&&Object.keys(a).forEach(function(t){return n.push(t+"{"+v(e,a[t]).join("")+"}")}),o&&Object.keys(o).forEach(function(t){return n.push(t+"{"+v(e,o[t]).join("")+"}")}),n}function _(e){if(!tt[e.id]){tt[e.id]=!0;var t=y(e.style),n=v(e.id,t);tt[e.id]=!!Ze||n,n.forEach(function(e){return qe.insert(e)})}}function b(e){nt[e.id]||(nt[e.id]=e)}function x(e){if(f(e)){var t=nt[h(e)];if(null==t)throw new Error("[glamor] an unexpected rule cache miss occurred. This is probably a sign of multiple glamor instances in your app. See https://github.com/threepointone/glamor/issues/79");return t}return e}function w(e){if(b(e),_(e),rt[e.id])return rt[e.id];var t=a({},"data-css-"+e.id,$e?e.label||"":"");return Object.defineProperty(t,"toString",{enumerable:!1,value:function(){return"css-"+e.id}}),rt[e.id]=t,t}function k(e){for(var t=[":",".","[",">"," "],n=!1,r=e.charAt(0),i=0;i<t.length;i++)if(r===t[i]){n=!0;break}return n||e.indexOf("&")>=0}function T(e,t){var n=p(e).map(function(e){return e.indexOf("&")>=0?e:"&"+e});return p(t).map(function(e){return e.indexOf("&")>=0?e:"&"+e}).reduce(function(e,t){return e.concat(n.map(function(e){return t.replace(/\&/g,e)}))},[]).join(",")}function M(e,t){return e?"@media "+e.substring(6)+" and "+t.substring(6):t}function A(e){return 0===e.indexOf("@media")}function C(e){return 0===e.indexOf("@supports")}function S(e,t){return e?"@supports "+e.substring(9)+" and "+t.substring(9):t}function E(e){for(var t=[],n=0;n<e.length;n++)t=Array.isArray(e[n])?t.concat(E(e[n])):t.concat(e[n]);return t}function P(e,t){var n=t.selector,r=void 0===n?"":n,i=t.mq,a=void 0===i?"":i,o=t.supp,s=void 0===o?"":o,l=t.src,u=void 0===l?{}:l;Array.isArray(u)||(u=[u]),u=E(u),u.forEach(function(t){if(f(t)){var n=x(t);if("css"!==n.type)throw new Error("cannot merge this rule");t=n.style}t=(0,Ue.default)(t),t&&t.composes&&P(e,{selector:r,mq:a,supp:s,src:t.composes}),Object.keys(t||{}).forEach(function(n){if(k(n))it[n]&&it[n].forEach(function(i){return P(e,{selector:T(r,i),mq:a,supp:s,src:t[n]})}),P(e,{selector:T(r,n),mq:a,supp:s,src:t[n]});else if(A(n))P(e,{selector:r,mq:M(a,n),supp:s,src:t[n]});else if(C(n))P(e,{selector:r,mq:a,supp:S(s,n),src:t[n]});else if("composes"===n);else{var i=e;s&&(i[s]=i[s]||{},i=i[s]),a&&(i[a]=i[a]||{},i=i[a]),r&&(i[r]=i[r]||{},i=i[r]),"label"===n?$e&&(e.label=e.label.concat(t.label)):i[n]=t[n]}})})}function I(e){var t={label:[]};return P(t,{src:e}),w({id:d(t),style:t,label:$e?t.label.join("."):"",type:"css"})}function L(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];if(t[0]&&t[0].length&&t[0].raw)throw new Error("you forgot to include glamor/babel in your babel plugins.");return t=(0,Ue.default)(t),t?lt(t):at}function O(e){if(!tt[e.id]){var t=Object.keys(e.keyframes).map(function(t){var n=Ge.keyframes.transform({id:e.id,name:t,style:e.keyframes[t]});return n.name+"{"+(0,je.createMarkupForStyles)(n.style)+"}"}).join(""),n=["-webkit-","-moz-","-o-",""].map(function(n){return"@"+n+"keyframes "+e.name+"_"+e.id+"{"+t+"}"});n.forEach(function(e){return qe.insert(e)}),tt[e.id]=!!Ze||n}}function z(e){if(!tt[e.id]){var t="@font-face{"+(0,je.createMarkupForStyles)(e.font)+"}";qe.insert(t),tt[e.id]=!!Ze||[t]}}function R(e){(0,Ne.default)(tt,e.reduce(function(e,t){return e[t]=!0,e},{}))}function D(){tt=qe.inserted={},nt=qe.registered={},rt={},qe.flush(),qe.inject()}function N(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e?L(a({},e,n)):ut(n)}function F(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return L(a({},e+" &",n))}function j(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return L(a({},"@media "+e,n))}function B(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return L(a({},e,n))}function U(e){return B(":active",e)}function V(e){return B(":any",e)}function H(e){return B(":checked",e)}function W(e){return B(":disabled",e)}function q(e){return B(":empty",e)}function G(e){return B(":enabled",e)}function Y(e){return B(":default",e)}function X(e){return B(":first",e)}function Z(e){return B(":first-child",e)}function J(e){return B(":first-of-type",e)}function K(e){return B(":fullscreen",e)}function Q(e){return B(":focus",e)}function $(e){return B(":hover",e)}function ee(e){return B(":indeterminate",e)}function te(e){return B(":in-range",e)}function ne(e){return B(":invalid",e)}function re(e){return B(":last-child",e)}function ie(e){return B(":last-of-type",e)}function ae(e){return B(":left",e)}function oe(e){return B(":link",e)}function se(e){return B(":only-child",e)}function le(e){return B(":only-of-type",e)}function ue(e){return B(":optional",e)}function ce(e){return B(":out-of-range",e)}function de(e){return B(":read-only",e)}function fe(e){return B(":read-write",e)}function he(e){return B(":required",e)}function pe(e){return B(":right",e)}function me(e){return B(":root",e)}function ge(e){return B(":scope",e)}function ye(e){return B(":target",e)}function ve(e){return B(":valid",e)}function _e(e){return B(":visited",e)}function be(e,t){return B(":dir("+e+")",t)}function xe(e,t){return B(":lang("+e+")",t)}function we(e,t){var n=e.split(",").map(function(e){return e.trim()}).map(function(e){return":not("+e+")"});return 1===n.length?B(":not("+e+")",t):N(n.join(""),t)}function ke(e,t){return B(":nth-child("+e+")",t)}function Te(e,t){return B(":nth-last-child("+e+")",t)}function Me(e,t){return B(":nth-last-of-type("+e+")",t)}function Ae(e,t){return B(":nth-of-type("+e+")",t)}function Ce(e){return B("::after",e)}function Se(e){return B("::before",e)}function Ee(e){return B("::first-letter",e)}function Pe(e){return B("::first-line",e)}function Ie(e){return B("::selection",e)}function Le(e){return B("::backdrop",e)}function Oe(e){return L({"::placeholder":e})}function ze(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=(0,Ue.default)(t),t?t.map(function(e){var t={label:[]};return P(t,{src:e}),v(d(t),y(t)).join("")}).join(""):""}function Re(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t=(0,Ue.default)(t),t?t.map(function(e){h(e);var t=Object.keys(e)[0];return t+'="'+(e[t]||"")+'"'}).join(" "):""}Object.defineProperty(t,"__esModule",{value:!0}),t.compose=t.merge=t.$=t.style=t.presets=t.keyframes=t.fontFace=t.insertGlobal=t.insertRule=t.plugins=t.styleSheet=void 0,t.speedy=o,t.simulations=s,t.simulate=l,t.cssLabels=u,t.isLikeRule=f,t.idFor=h,t.css=L,t.rehydrate=R,t.flush=D,t.select=N,t.parent=F,t.media=j,t.pseudo=B,t.active=U,t.any=V,t.checked=H,t.disabled=W,t.empty=q,t.enabled=G,t._default=Y,t.first=X,t.firstChild=Z,t.firstOfType=J,t.fullscreen=K,t.focus=Q,t.hover=$,t.indeterminate=ee,t.inRange=te,t.invalid=ne,t.lastChild=re,t.lastOfType=ie,t.left=ae,t.link=oe,t.onlyChild=se,t.onlyOfType=le,t.optional=ue,t.outOfRange=ce,t.readOnly=de,t.readWrite=fe,t.required=he,t.right=pe,t.root=me,t.scope=ge,t.target=ye,t.valid=ve,t.visited=_e,t.dir=be,t.lang=xe,t.not=we,t.nthChild=ke,t.nthLastChild=Te,t.nthLastOfType=Me,t.nthOfType=Ae,t.after=Ce,t.before=Se,t.firstLetter=Ee,t.firstLine=Pe,t.selection=Ie,t.backdrop=Le,t.placeholder=Oe,t.cssFor=ze,t.attribsFor=Re;var De=n(35),Ne=r(De),Fe=n(181),je=n(101),Be=n(189),Ue=r(Be),Ve=n(190),He=n(206),We=r(He),qe=t.styleSheet=new Fe.StyleSheet;qe.inject();var Ge=t.plugins=qe.plugins=new Ve.PluginSet([Ve.prefixes,Ve.contentWrap,Ve.fallbacks]);Ge.media=new Ve.PluginSet,Ge.fontFace=new Ve.PluginSet,Ge.keyframes=new Ve.PluginSet([Ve.prefixes,Ve.fallbacks]);var Ye=!1,Xe=!1,Ze="undefined"!==typeof window,Je=Ye,Ke=!1,Qe=!1,$e=Ye,et=/[(),]|"(?:\\.|[^"\n])*"|'(?:\\.|[^'\n])*'|\/\*[\s\S]*?\*\//g,tt=qe.inserted={},nt=qe.registered={},rt={},it={"::placeholder":["::-webkit-input-placeholder","::-moz-placeholder","::-ms-input-placeholder"],":fullscreen":[":-webkit-full-screen",":-moz-full-screen",":-ms-fullscreen"]},at={};Object.defineProperty(at,"toString",{enumerable:!1,value:function(){return"css-nil"}});var ot="undefined"!==typeof WeakMap?[at,new WeakMap,new WeakMap,new WeakMap]:[at],st=!1,lt="undefined"!==typeof WeakMap?function(e){return function(t){if(ot[t.length]){for(var n=ot[t.length],r=0;r<t.length-1;)n.has(t[r])||n.set(t[r],new WeakMap),n=n.get(t[r]),r++;if(n.has(t[t.length-1])){var a=n.get(t[r]);if(nt[a.toString().substring(4)])return a}}var o=e(t);if(ot[t.length]){for(var s=0,l=ot[t.length];s<t.length-1;)l=l.get(t[s]),s++;try{l.set(t[s],o)}catch(e){if(Ye&&!st){var u;st=!0,(u=console).warn.apply(u,["failed setting the WeakMap cache for args:"].concat(i(t))),console.warn("this should NOT happen, please file a bug on the github repo.")}}}return o}}(I):I;L.insert=function(e){var t={id:d(e),css:e,type:"raw"};b(t),tt[t.id]||(qe.insert(t.css),tt[t.id]=!!Ze||[t.css])};t.insertRule=L.insert;L.global=function(e,t){if(t=(0,Ue.default)(t))return L.insert(g({selector:e,style:t}))};t.insertGlobal=L.global;L.keyframes=function(e,t){t||(t=e,e="animation"),t=(0,Ue.default)(t)||{};var n={id:d({name:e,kfs:t}),type:"keyframes",name:e,keyframes:t};return b(n),O(n),e+"_"+n.id},L.fontFace=function(e){e=(0,Ue.default)(e);var t={id:d(e),type:"font-face",font:e};return b(t),z(t),e.fontFamily};var ut=(t.fontFace=L.fontFace,t.keyframes=L.keyframes,t.presets={mobile:"(min-width: 400px)",Mobile:"@media (min-width: 400px)",phablet:"(min-width: 550px)",Phablet:"@media (min-width: 550px)",tablet:"(min-width: 750px)",Tablet:"@media (min-width: 750px)",desktop:"(min-width: 1000px)",Desktop:"@media (min-width: 1000px)",hd:"(min-width: 1200px)",Hd:"@media (min-width: 1200px)"},t.style=L);t.$=N,t.merge=L,t.compose=L},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){return e[e.length-1]}function a(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function o(){var e=document.createElement("style");return e.type="text/css",e.setAttribute("data-glamor",""),e.appendChild(document.createTextNode("")),(document.head||document.getElementsByTagName("head")[0]).appendChild(e),e}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.speedy,n=void 0===t?!d&&!f:t,r=e.maxLength,i=void 0===r?c&&h?4e3:65e3:r;this.isSpeedy=n,this.sheet=void 0,this.tags=[],this.maxLength=i,this.ctr=0}Object.defineProperty(t,"__esModule",{value:!0}),t.StyleSheet=s;var l=n(35),u=function(e){return e&&e.__esModule?e:{default:e}}(l),c="undefined"!==typeof window,d=!1,f=!1,h=function(){if(c){var e=document.createElement("div");return e.innerHTML="\x3c!--[if lt IE 10]><i></i><![endif]--\x3e",1===e.getElementsByTagName("i").length}}();(0,u.default)(s.prototype,{getSheet:function(){return a(i(this.tags))},inject:function(){var e=this;if(this.injected)throw new Error("already injected stylesheet!");c?this.tags[0]=o():this.sheet={cssRules:[],insertRule:function(t){e.sheet.cssRules.push({cssText:t})}},this.injected=!0},speedy:function(e){if(0!==this.ctr)throw new Error("cannot change speedy mode after inserting any rule to sheet. Either call speedy("+e+") earlier in your app, or call flush() before speedy("+e+")");this.isSpeedy=!!e},_insert:function(e){try{var t=this.getSheet();t.insertRule(e,-1!==e.indexOf("@import")?0:t.cssRules.length)}catch(t){d&&console.warn("whoops, illegal rule inserted",e)}},insert:function(e){if(c)if(this.isSpeedy&&this.getSheet().insertRule)this._insert(e);else if(-1!==e.indexOf("@import")){var t=i(this.tags);t.insertBefore(document.createTextNode(e),t.firstChild)}else i(this.tags).appendChild(document.createTextNode(e));else this.sheet.insertRule(e,-1!==e.indexOf("@import")?0:this.sheet.cssRules.length);return this.ctr++,c&&this.ctr%this.maxLength===0&&this.tags.push(o()),this.ctr-1},delete:function(e){return this.replace(e,"")},flush:function(){c?(this.tags.forEach(function(e){return e.parentNode.removeChild(e)}),this.tags=[],this.sheet=null,this.ctr=0):this.sheet.cssRules=[],this.injected=!1},rules:function(){if(!c)return this.sheet.cssRules;var e=[];return this.tags.forEach(function(t){return e.splice.apply(e,[e.length,0].concat(r(Array.from(a(t).cssRules))))}),e}})},function(e,t,n){"use strict";function r(e){return i(e.replace(a,"ms-"))}var i=n(183),a=/^-ms-/;e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(i,function(e,t){return t.toUpperCase()})}var i=/-(.)/g;e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){if(null==t||"boolean"===typeof t||""===t)return"";if(isNaN(t)||0===t||l.hasOwnProperty(e)&&l[e])return""+t;if("string"===typeof t){t=t.trim()}return t+"px"}Object.defineProperty(t,"__esModule",{value:!0});var a=n(185),o=r(a),s=n(102),l=(r(s),o.default.isUnitlessNumber);t.default=i},function(e,t,n){"use strict";function r(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}Object.defineProperty(t,"__esModule",{value:!0});var i={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowStart:!0,gridRowEnd:!0,gridColumn:!0,gridColumnStart:!0,gridColumnEnd:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},a=["Webkit","ms","Moz","O"];Object.keys(i).forEach(function(e){a.forEach(function(t){i[r(t,e)]=i[e]})});var o={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:i,shorthandPropertyExpansions:o};t.default=s},function(e,t,n){"use strict";function r(e){return i(e).replace(a,"-ms-")}var i=n(187),a=/^ms-/;e.exports=r},function(e,t,n){"use strict";function r(e){return e.replace(i,"-$1").toLowerCase()}var i=/([A-Z])/g;e.exports=r},function(e,t,n){"use strict";function r(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}e.exports=r},function(e,t,n){"use strict";function r(e){return null===e||void 0===e||!1===e||"object"===("undefined"===typeof e?"undefined":s(e))&&0===Object.keys(e).length}function i(e){if(r(e))return null;if("object"!==("undefined"===typeof e?"undefined":s(e)))return e;for(var t={},n=Object.keys(e),i=!1,a=0;a<n.length;a++){var l=e[n[a]],u=o(l);null!==u&&u===l||(i=!0),null!==u&&(t[n[a]]=u)}return 0===Object.keys(t).length?null:i?t:e}function a(e){var t=!1,n=[];return e.forEach(function(e){var r=o(e);null!==r&&r===e||(t=!0),null!==r&&n.push(r)}),0==n.length?null:t?n:e}function o(e){return Array.isArray(e)?a(e):i(e)}Object.defineProperty(t,"__esModule",{value:!0});var s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){this.fns=e||[]}function a(e){if(Object.keys(e.style).map(function(t){return Array.isArray(e.style[t])}).indexOf(!0)>=0){var t=e.style,n=Object.keys(t).reduce(function(e,n){return e[n]=Array.isArray(t[n])?t[n].join("; "+(0,d.processStyleName)(n)+": "):t[n],e},{});return(0,c.default)({},e,{style:n})}return e}function o(e){if(e.style.content){var t=e.style.content;return p.indexOf(t)>=0?e:/^(attr|calc|counters?|url)\(/.test(t)?e:t.charAt(0)!==t.charAt(t.length-1)||'"'!==t.charAt(0)&&"'"!==t.charAt(0)?l({},e,{style:l({},e.style,{content:'"'+t+'"'})}):e}return e}function s(e){return(0,c.default)({},e,{style:(0,h.default)(l({},e.style))})}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.PluginSet=i,t.fallbacks=a,t.contentWrap=o,t.prefixes=s;var u=n(35),c=r(u),d=n(101),f=n(191),h=r(f);(0,c.default)(i.prototype,{add:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];n.forEach(function(t){e.fns.indexOf(t)>=0||(e.fns=[t].concat(e.fns))})},remove:function(e){this.fns=this.fns.filter(function(t){return t!==e})},clear:function(){this.fns=[]},transform:function(e){return this.fns.reduce(function(e,t){return t(e)},e)}});var p=["normal","none","counter","open-quote","close-quote","no-open-quote","no-close-quote","initial","inherit"]},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){for(var t in e){var n=e[t],r=(0,c.default)(I,t,n,e,L);r&&(e[t]=r),(0,l.default)(L,t,e)}return e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(192),o=r(a),s=n(193),l=r(s),u=n(194),c=r(u),d=n(195),f=r(d),h=n(196),p=r(h),m=n(197),g=r(m),y=n(198),v=r(y),_=n(199),b=r(_),x=n(200),w=r(x),k=n(201),T=r(k),M=n(202),A=r(M),C=n(203),S=r(C),E=n(204),P=r(E),I=[p.default,f.default,g.default,b.default,w.default,T.default,A.default,S.default,P.default,v.default],L=o.default.prefixMap},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=["Webkit"],i=["Moz"],a=["ms"],o=["Webkit","Moz"],s=["Webkit","ms"],l=["Webkit","Moz","ms"];t.default={plugins:[],prefixMap:{appearance:o,userSelect:l,textEmphasisPosition:r,textEmphasis:r,textEmphasisStyle:r,textEmphasisColor:r,boxDecorationBreak:r,clipPath:r,maskImage:r,maskMode:r,maskRepeat:r,maskPosition:r,maskClip:r,maskOrigin:r,maskSize:r,maskComposite:r,mask:r,maskBorderSource:r,maskBorderMode:r,maskBorderSlice:r,maskBorderWidth:r,maskBorderOutset:r,maskBorderRepeat:r,maskBorder:r,maskType:r,textDecorationStyle:r,textDecorationSkip:r,textDecorationLine:r,textDecorationColor:r,filter:r,fontFeatureSettings:r,breakAfter:l,breakBefore:l,breakInside:l,columnCount:o,columnFill:o,columnGap:o,columnRule:o,columnRuleColor:o,columnRuleStyle:o,columnRuleWidth:o,columns:o,columnSpan:o,columnWidth:o,writingMode:s,flex:r,flexBasis:r,flexDirection:r,flexGrow:r,flexFlow:r,flexShrink:r,flexWrap:r,alignContent:r,alignItems:r,alignSelf:r,justifyContent:r,order:r,transform:r,transformOrigin:r,transformOriginX:r,transformOriginY:r,backfaceVisibility:r,perspective:r,perspectiveOrigin:r,transformStyle:r,transformOriginZ:r,animation:r,animationDelay:r,animationDirection:r,animationFillMode:r,animationDuration:r,animationIterationCount:r,animationName:r,animationPlayState:r,animationTimingFunction:r,backdropFilter:r,fontKerning:r,scrollSnapType:s,scrollSnapPointsX:s,scrollSnapPointsY:s,scrollSnapDestination:s,scrollSnapCoordinate:s,shapeImageThreshold:r,shapeImageMargin:r,shapeImageOutside:r,hyphens:l,flowInto:s,flowFrom:s,regionFragment:s,textAlignLast:i,tabSize:i,wrapFlow:a,wrapThrough:a,wrapMargin:a,gridTemplateColumns:a,gridTemplateRows:a,gridTemplateAreas:a,gridTemplate:a,gridAutoColumns:a,gridAutoRows:a,gridAutoFlow:a,grid:a,gridRowStart:a,gridColumnStart:a,gridRowEnd:a,gridRow:a,gridColumn:a,gridColumnEnd:a,gridColumnGap:a,gridRowGap:a,gridArea:a,gridGap:a,textSizeAdjust:s,borderImage:r,borderImageOutset:r,borderImageRepeat:r,borderImageSlice:r,borderImageSource:r,borderImageWidth:r,transitionDelay:r,transitionDuration:r,transitionProperty:r,transitionTimingFunction:r}},e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){if(e.hasOwnProperty(t))for(var r=e[t],i=0,o=r.length;i<o;++i)n[r[i]+(0,a.default)(t)]=n[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(103),a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n,r,i){for(var a=0,o=e.length;a<o;++a){var s=e[a](t,n,r,i);if(s)return s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if("cursor"===e&&a.hasOwnProperty(t))return i.map(function(e){return e+t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=["-webkit-","-moz-",""],a={"zoom-in":!0,"zoom-out":!0,grab:!0,grabbing:!0};e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if("string"===typeof t&&!(0,a.default)(t)&&t.indexOf("cross-fade(")>-1)return o.map(function(e){return t.replace(/cross-fade\(/g,e+"cross-fade(")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(40),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if("string"===typeof t&&!(0,a.default)(t)&&t.indexOf("filter(")>-1)return o.map(function(e){return t.replace(/filter\(/g,e+"filter(")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(40),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if("display"===e&&i.hasOwnProperty(t))return i[t]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i={flex:["-webkit-box","-moz-box","-ms-flexbox","-webkit-flex","flex"],"inline-flex":["-webkit-inline-box","-moz-inline-box","-ms-inline-flexbox","-webkit-inline-flex","inline-flex"]};e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n){"flexDirection"===e&&"string"===typeof t&&(t.indexOf("column")>-1?n.WebkitBoxOrient="vertical":n.WebkitBoxOrient="horizontal",t.indexOf("reverse")>-1?n.WebkitBoxDirection="reverse":n.WebkitBoxDirection="normal"),a.hasOwnProperty(e)&&(n[a[e]]=i[t]||t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i={"space-around":"justify","space-between":"justify","flex-start":"start","flex-end":"end","wrap-reverse":"multiple",wrap:"multiple"},a={alignItems:"WebkitBoxAlign",justifyContent:"WebkitBoxPack",flexWrap:"WebkitBoxLines"};e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if("string"===typeof t&&!(0,a.default)(t)&&s.test(t))return o.map(function(e){return e+t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(40),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=["-webkit-","-moz-",""],s=/linear-gradient|radial-gradient|repeating-linear-gradient|repeating-radial-gradient/;e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if("string"===typeof t&&!(0,a.default)(t)&&t.indexOf("image-set(")>-1)return o.map(function(e){return t.replace(/image-set\(/g,e+"image-set(")})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(40),a=function(e){return e&&e.__esModule?e:{default:e}}(i),o=["-webkit-",""];e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if("position"===e&&"sticky"===t)return["-webkit-sticky","sticky"]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){if(a.hasOwnProperty(e)&&o.hasOwnProperty(t))return i.map(function(e){return e+t})}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=["-webkit-","-moz-",""],a={maxHeight:!0,maxWidth:!0,width:!0,height:!0,columnWidth:!0,minWidth:!0,minHeight:!0},o={"min-content":!0,"max-content":!0,"fill-available":!0,"fit-content":!0,"contain-floats":!0};e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if((0,u.default)(e))return e;for(var n=e.split(/,(?![^()]*(?:\([^()]*\))?\))/g),r=0,i=n.length;r<i;++r){var a=n[r],o=[a];for(var l in t){var c=(0,s.default)(l);if(a.indexOf(c)>-1&&"order"!==c)for(var d=t[l],f=0,p=d.length;f<p;++f)o.unshift(a.replace(c,h[d[f]]+c))}n[r]=o.join(",")}return n.join(",")}function a(e,t,n,r){if("string"===typeof t&&f.hasOwnProperty(e)){var a=i(t,r),o=a.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(e){return!/-moz-|-ms-/.test(e)}).join(",");if(e.indexOf("Webkit")>-1)return o;var s=a.split(/,(?![^()]*(?:\([^()]*\))?\))/g).filter(function(e){return!/-webkit-|-ms-/.test(e)}).join(",");return e.indexOf("Moz")>-1?s:(n["Webkit"+(0,d.default)(e)]=o,n["Moz"+(0,d.default)(e)]=s,a)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var o=n(205),s=r(o),l=n(40),u=r(l),c=n(103),d=r(c),f={transition:!0,transitionProperty:!0,WebkitTransition:!0,WebkitTransitionProperty:!0,MozTransition:!0,MozTransitionProperty:!0},h={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-"};e.exports=t.default},function(e,t,n){"use strict";function r(e){return(0,a.default)(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(104),a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},function(e,t,n){"use strict";function r(e,t){for(var n=1540483477,r=t^e.length,s=e.length,l=0;s>=4;){var u=i(e,l);u=o(u,n),u^=u>>>24,u=o(u,n),r=o(r,n),r^=u,l+=4,s-=4}switch(s){case 3:r^=a(e,l),r^=e.charCodeAt(l+2)<<16,r=o(r,n);break;case 2:r^=a(e,l),r=o(r,n);break;case 1:r^=e.charCodeAt(l),r=o(r,n)}return r^=r>>>13,r=o(r,n),(r^=r>>>15)>>>0}function i(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)+(e.charCodeAt(t++)<<16)+(e.charCodeAt(t)<<24)}function a(e,t){return e.charCodeAt(t++)+(e.charCodeAt(t++)<<8)}function o(e,t){return e|=0,t|=0,(65535&e)*t+(((e>>>16)*t&65535)<<16)|0}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";var r=n(51),i=n(208),a=n(209);e.exports=function(){function e(e,t,n,r,o,s){s!==a&&i(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},function(e,t,n){"use strict";function r(e,t,n,r,a,o,s,l){if(i(t),!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[n,r,a,o,s,l],d=0;u=new Error(t.replace(/%s/g,function(){return c[d++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}var i=function(e){};e.exports=r},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";var r=[{abstract:"Limited capture range and the requirement to provide high quality initializations for optimization-based 2D/3D image registration methods can significantly degrade the per- formance of 3D image reconstruction and motion compensation pipelines. Challenging clinical imaging scenarios, that contain sig- nificant subject motion such as fetal in-utero imaging, complicate the 3D image and volume reconstruction process. In this paper we present a learning based image registra- tion method capable of predicting 3D rigid transformations of arbitrarily oriented 2D image slices, with respect to a learned canonical atlas co-ordinate system. Only image slice intensity information is used to perform registration and canonical align- ment, no spatial transform initialization is required. To find image transformations we utilize a Convolutional Neural Network (CNN) architecture to learn the regression function capable of mapping 2D image slices to the 3D canonical atlas space. We extensively evaluate the effectiveness of our approach quantitatively on simulated Magnetic Resonance Imaging (MRI), fetal brain imagery with synthetic motion and further demon- strate qualitative results on real fetal MRI data where our method is integrated into a full reconstruction and motion compensation pipeline. Our learning based registration achieves an average spatial prediction error of 7 mm on simulated data and produces qualitatively improved reconstructions for heavily moving fetuses with gestational ages of approximately 20 weeks. Our model provides a general and computationally efficient solution to the 2D-3D registration initialization problem and is suitable for real- time scenarios.",authors:"Benjamin Hou, Bishesh Khanal, Amir Alansary, Steven McDonagh, Alice Davidson, Mary Rutherford, Jo V. Hajnal, Daniel Rueckert, Ben Glocker, Bernhard Kainz",description:"Retrieved from arXiv. 2017",doi:null,duplicate:!1,email:["bh1511@imperial.ac.uk"],email_new:["bh1511@imperial.ac.uk"],fullUrl:"https://arxiv.org/abs/1709.06341",key:"b391f338-b950-4f10-bc06-388fc6027782",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1709.06341.pdf",phase:1,received:0,source:"arxiv",title:"3d reconstruction in canonical co-ordinate space from arbitrarily oriented 2d images",tools:["caffe"],year:2017,id:"b391f338-b950-4f10-bc06-388fc6027782.pdf",use:1,domain:"radiology",task_1:"reconstruction",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"fetal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet",based_on_1_name:"bvlc_googlelenet",based_on_2:"https://github.com/google/inception",based_on_2_name:"google_inception",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"UK",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Image denoising techniques are essential to reducing noise levels and enhancing diagnosis reliability in low-dose computed tomography (CT). Machine learning based denoising methods have shown great potential in removing the complex and spatial-variant noises in CT images. However, some residue artifacts would appear in the denoised image due to complexity of noises. A cascaded training network was proposed in this work, where the trained CNN was applied on the training dataset to initiate new trainings and remove artifacts induced by denoising. A cascades of convolutional neural networks (CNN) were built iteratively to achieve better performance with simple CNN structures. Experiments were carried out on 2016 Low-dose CT Grand Challenge datasets to evaluate the method's performance.",authors:"Dufan Wu, Kyungsang Kim, Georges El Fakhri, Quanzheng Li",description:"9 pages, 9 figures. 2017",doi:null,duplicate:!1,email:["li.quanzheng@mgh.harvard.edu"],email_new:["li.quanzheng@mgh.harvard.edu"],fullUrl:"https://arxiv.org/abs/1705.04267",key:"eb4f2b27-878e-4057-baf5-d1a748d714b7",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1705.04267.pdf",phase:1,received:0,source:"arxiv",title:"a cascaded convolutional neural network for x-ray low-dose ct image denoising",tools:["caffe"],year:2017,id:"eb4f2b27-878e-4057-baf5-d1a748d714b7.pdf",use:1,domain:"radiology",task_1:"denoising",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"abdomin",location_1:"0",method_1:"rcnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://www.aapm.org/grandchallenge/lowdosect/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/cszn/DnCNN",based_on_1_name:"dncnn",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"In this paper, we present a Convolutional Neural Network (CNN) regression approach to address the two major limitations of existing intensity-based 2-D/3-D registration technology: 1) slow computation and 2) small capture range. Different from optimization-based methods, which iteratively optimize the transformation parameters over a scalar-valued metric function representing the quality of the registration, the proposed method exploits the information embedded in the appearances of the digitally reconstructed radiograph and X-ray images, and employs CNN regressors to directly estimate the transformation parameters. An automatic feature extraction step is introduced to calculate 3-D pose-indexed features that are sensitive to the variables to be regressed while robust to other factors. The CNN regressors are then trained for local zones and applied in a hierarchical manner to break down the complex regression task into multiple simpler sub-tasks that can be learned separately. Weight sharing is furthermore employed in the CNN regression model to reduce the memory footprint. The proposed approach has been quantitatively evaluated on 3 potential clinical applications, demonstrating its significant advantage in providing highly accurate real-time 2-D/3-D registration with a significantly enlarged capture range when compared to intensity-based methods.",authors:"S. Miao,  Z. J. Wang,  R. Liao",description:"IEEE Transactions on Medical Imaging. 2016",doi:"10.1109/TMI.2016.2521800",duplicate:!1,email:["smiao@ece.ubc.ca","zjwang@ece.ubc.ca","rui.liao@siemens.com"],email_new:["smiao@ece.ubc.ca","zjwang@ece.ubc.ca","rui.liao@siemens.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7393571",key:"44acb4cb-d1e0-465f-abc2-9441707db2d3",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"a cnn regression approach for real-time 2d/3d registration",tools:["caffe"],year:2016,id:"44acb4cb-d1e0-465f-abc2-9441707db2d3.pdf",use:1,domain:"radiology",task_1:"registration",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"multi-organ",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"0",training:0,validation:0,testing:0,cross_validation:0,country_1:"USA",country_2:"Canada",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Nuclear segmentation in digital microscopic tissue images can enable extraction of high-quality features for nuclear morphometrics and other analysis in computational pathology. Conventional image processing techniques, such as Otsu thresholding and watershed segmentation, do not work effectively on challenging cases, such as chromatin-sparse and crowded nuclei. In contrast, machine learning-based segmentation can generalize across various nuclear appearances. However, training machine learning algorithms requires data sets of images, in which a vast number of nuclei have been annotated. Publicly accessible and annotated data sets, along with widely agreed upon metrics to compare techniques, have catalyzed tremendous innovation and progress on other image classification problems, particularly in object recognition. Inspired by their success, we introduce a large publicly accessible data set of hematoxylin and eosin (H&E)-stained tissue images with more than 21000 painstakingly annotated nuclear boundaries, whose quality was validated by a medical doctor. Because our data set is taken from multiple hospitals and includes a diversity of nuclear appearances from several patients, disease states, and organs, techniques trained on it are likely to generalize well and work right out-of-the-box on other H&E-stained images. We also propose a new metric to evaluate nuclear segmentation results that penalizes object- and pixel-level errors in a unified manner, unlike previous metrics that penalize only one type of error. We also propose a segmentation technique based on deep learning that lays a special emphasis on identifying the nuclear boundaries, including those between the touching or overlapping nuclei, and works well on a diverse set of test images.",authors:"N. Kumar,  R. Verma,  S. Sharma,  S. Bhargava,  A. Vahadane,  A. Sethi",description:"IEEE Transactions on Medical Imaging. 2017",doi:"10.1109/TMI.2017.2677499",duplicate:!1,email:["neeraj.kumar.iitg@gmail.com","amitsethi@gmail.com"],email_new:["neeraj.kumar.iitg@gmail.com","amitsethi@gmail.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7872382",key:"6011dff4-4995-40e3-9827-068f13a3b4e1",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"a dataset and a technique for generalized nuclear segmentation for computational pathology",tools:["torch"],year:2017,id:"6011dff4-4995-40e3-9827-068f13a3b4e1.pdf",use:1,domain:"pathology",task_1:"segmentation",task_2:"0",data_type:"wsi",data_type_1:"H&E stained",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:1,data_link_1:"http://nucleisegmentationbenchmark.weebly.com/",data_link_2:"0",data_ok:1,code_public:1,code_link:"https://github.com/neerajkumarvaid/NucleiSegmentation",code_ok:1,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"India",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Wireless Capsule Endoscopy (WCE) is a standard non-invasive modality for small bowel examination. Recently, the development of computer-aided diagnosis (CAD) systems for gastrointestinal (GI) bleeding detection in WCE image videos has become an active research area with the goal of relieving the workload of physicians. Existing methods based primarily on handcrafted features usually give insufficient accuracy for bleeding detection, due to their limited capability of feature representation. In this paper, we present a new automatic bleeding detection strategy based on a deep convolutional neural network and evaluate our method on an expanded dataset of 10,000 WCE images. Experimental results with an increase of around 2 percentage points in the Fi score demonstrate that our method outperforms the state-of-the-art approaches in WCE bleeding detection. The achieved Fi score is of up to 0.9955.",authors:"Xiao Jia, Meng MQ.",description:"Conf Proc IEEE Eng Med Biol Soc.  2016",doi:null,duplicate:!1,email:["xjia@ee.cuhk.edu.hk","qhmeng@ee.cuhk.edu.hk"],email_new:["xjia@ee.cuhk.edu.hk","qhmeng@ee.cuhk.edu.hk"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28268409",key:"19fe9d15-1a95-44c4-be60-812ccfb9437c",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"a deep convolutional neural network for bleeding detection in wireless capsule endoscopy images",tools:["caffe"],year:2016,id:"19fe9d15-1a95-44c4-be60-812ccfb9437c.pdf",use:1,domain:"endoscopy",task_1:"detection",task_2:"0",data_type:"wireless capsule endoscopy",data_type_1:"0",data_type_2:"0",location:"gastrointestinal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"10000",training:8200,validation:0,testing:1800,cross_validation:0,country_1:"Hong Kong",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 38th Annual International Conference of the IEEE Engineering in Medicine and Biology Society",public:0,"Unnamed: 40":null},{abstract:"Epithelial (EP) and stromal (ST) are two types of tissues in histological images. Automated segmentation or classification of EP and ST tissues is important when developing computerized system for analyzing the tumor microenvironment. In this paper, a Deep Convolutional Neural Networks (DCNN) based feature learning is presented to automatically segment or classify EP and ST regions from digitized tumor tissue microarrays (TMAs). Current approaches are based on handcraft feature representation, such as color, texture, and Local Binary Patterns (LBP) in classifying two regions. Compared to handcrafted feature based approaches, which involve task dependent representation, DCNN is an end-to-end feature extractor that may be directly learned from the raw pixel intensity value of EP and ST tissues in a data driven fashion. These high-level features contribute to the construction of a supervised classifier for discriminating the two types of tissues. In this work we compare DCNN based models with three handcraft feature extraction based approaches on two different datasets which consist of 157 Hematoxylin and Eosin (H&amp;E) stained images of breast cancer and 1376 immunohistological (IHC) stained images of colorectal cancer, respectively. The DCNN based feature learning approach was shown to have a F1 classification score of 85%, 89%, and 100%, accuracy (ACC) of 84%, 88%, and 100%, and Matthews Correlation Coefficient (MCC) of 86%, 77%, and 100% on two H&amp;E stained (NKI and VGH) and IHC stained data, respectively. Our DNN based approach was shown to outperform three handcraft feature extraction based approaches in terms of the classification of EP and ST regions.",authors:"Xu J, Luo X, Wang G, Gilmore H, Madabhushi A.",description:"Neurocomputing.  2016",doi:null,duplicate:!1,email:["xujung@gmail.com"],email_new:["xujung@gmail.com"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28154470",key:"6429810d-0d56-4d3c-8d30-e290517a2495",keyok:1,keywords:"Breast histopathology; Colorectal cancer; Deep Convolutional Neural Networks; Feature representation; The classification of epithelial and stromal regions",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"a deep convolutional neural network for segmenting and classifying epithelial and stromal regions in histopathological images",tools:["caffe"],year:2016,id:"6429810d-0d56-4d3c-8d30-e290517a2495.pdf",use:1,domain:"pathology",task_1:"segmentation",task_2:"classification",data_type:"wsi",data_type_1:"H&E stained",data_type_2:"IHC stained",location:"breast",location_1:"colorectal",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://tma.im/tma_portal/C-Path/images.html",data_link_2:"http://fimm.webmicroscope.net/supplements/epistroma",data_ok:null,code_public:0,code_link:"0",code_ok:0,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"USA",country_3:"0",journal:"Neurocomputing",impact_factor:3.317,conference:"0",public:0,"Unnamed: 40":null},{abstract:"While cancer is a heterogeneous complex of distinct diseases, the common underlying mechanism for uncontrolled tumor growth is due to mutations in proto-oncogenes and the loss of the regulatory function of tumor suppression genes. In this paper we propose a novel deep learning model for predicting tumor suppression genes (TSGs) and proto-oncogenes (OGs) from their Protein Data Bank (PDB) three dimensional structures. Specifically, we develop a convolutional neural network (CNN) to classify the feature map sets extracted from the tertiary protein structures. Each feature map set represents particular biochemical properties associated with the atomic coordinates appearing on the outer surface of protein's three dimensional structure. The experimental results on the collected dataset for classifying TSGs and OGs demonstrate promising performance with 82.57% accuracy and 0.89 area under the ROC curve. The initial success of the proposed model warrants further study to develop a comprehensive model to identify the cancer driver genes or events using TSG and OG as the basis to track the causal chain.",authors:"Amirhossein Tavanaei, Nishanth Anandanadarajah, Rasiah Loganantharaj",description:"Retrieved from bioRxiv. 2017",doi:null,duplicate:!1,email:["tavanaei@louisiana.edu","nishanth@louisiana.edu","raja@louisiana.edu"],email_new:["tavanaei@louisiana.edu","nishanth@louisiana.edu","raja@louisiana.edu"],fullUrl:"http://www.biorxiv.org/content/early/2017/08/16/177378",key:"9b35e33a-52c9-4c24-b701-9a52d770bf08",keyok:1,keywords:null,pdfUrl:"http://www.biorxiv.org/content/early/2017/08/16/177378.full.pdf",phase:1,received:0,source:"biorxiv",title:"a deep learning model for predicting tumor suppressor genes and oncogenes from pdb structure",tools:["torch"],year:2017,id:"9b35e33a-52c9-4c24-b701-9a52d770bf08.pdf",use:1,domain:"genomics",task_1:"classification",task_2:"0",data_type:"tertiary protein structure",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://www.rcsb.org/#Category-download",data_link_2:"0",data_ok:null,code_public:1,code_link:"https://github.com/tavanaei/Cancer-Suppressor-Gene-Deep-Learning",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 IEEE International Conference on Bioinformatics and Biomedicine (BIBM)",public:1,"Unnamed: 40":null},{abstract:"Multimodal registration is a challenging problem in medical imaging due the high variability of tissue appearance under different imaging modalities. The crucial component here is the choice of the right similarity measure. We make a step towards a general learning-based solution that can be adapted to specific situations and present a metric based on a convolutional neural network. Our network can be trained from scratch even from a few aligned image pairs. The metric is validated on intersubject deformable registration on a dataset different from the one used for training, demonstrating good generalization. In this task, we outperform mutual information by a significant margin.",authors:"Martin Simonovsky, Benjam\xedn Guti\xe9rrez-Becker, Diana Mateus, Nassir Navab, Nikos Komodakis",description:"Accepted to MICCAI 2016; extended version. 2016",doi:null,duplicate:!1,email:["gutierrez.becker@tum.de","martin.simonovsky@enpc.fr","nikos.komodakis@enpc.fr"],email_new:["gutierrez.becker@tum.de","martin.simonovsky@enpc.fr","nikos.komodakis@enpc.fr"],fullUrl:"https://arxiv.org/abs/1609.05396",key:"6469b38f-a01d-4677-a645-959994770605",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1609.05396.pdf",phase:1,received:0,source:"arxiv",title:"a deep metric for multimodal registration",tools:["torch"],year:2016,id:"6469b38f-a01d-4677-a645-959994770605.pdf",use:1,domain:"radiology",task_1:"registration",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"newborn",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://brain-development.org/ixi-dataset/",data_link_2:"http://brain-development.org/brain-atlases/",data_ok:null,code_public:0,code_link:"0",code_ok:0,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"France",country_2:"Germany",country_3:"0",journal:"0",impact_factor:0,conference:"Medical Image Computing and Computer-Assisted Intervention",public:1,"Unnamed: 40":null},{abstract:"With the improvement of people's living standards, there is no doubt that people are paying more and more attention to their health. However, shortage of medical resources is a critical global problem. As a result, an intelligent prognostics system has a great potential to play important roles in computer aided diagnosis. Numerous papers reported that tongue features have been closely related to a human's state. Among them, the majority of the existing tongue image analyses and classification methods are based on the low-level features, which may not provide a holistic view of the tongue. Inspired by a deep convolutional neural network (CNN), we propose a deep tongue image feature analysis system to extract unbiased features and reduce human labor for tongue diagnosis. With the unbalanced sample distribution, it is hard to form a balanced classification model based on feature representations obtained by existing low-level and high-level methods. Our proposed deep tongue image feature analysis model learns high-level features and provide more classification information during training time, which may result in higher accuracy when predicting testing samples. We tested the proposed system on a set of 267 gastritis patients, and a control group of 48 healthy volunteers (labeled according to Western medical practices). Test results show that the proposed deep tongue image feature analysis model can classify a given tongue image into healthy and diseased state with an average accuracy of 91.49%, which demonstrates the relationship between human body's state and its deep tongue image features.",authors:"Dan Meng,  Guitao Cao,  Y. Duan,  Minghua Zhu,  Liping Tu,  Jiatuo Xu,  D. Xu",description:"2016 IEEE International Conference on Bioinformatics and Biomedicine (BIBM). 2016",doi:"10.1109/BIBM.2016.7822815",duplicate:!1,email:["samansarraf@ieee.org","ghi@ryerson.ca"],email_new:["samansarraf@ieee.org","ghi@ryerson.ca"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7822815",key:"8f553f4f-6705-4e43-be8b-8f1b2cf2857e",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"a deep tongue image features analysis model for medical application",tools:["digits","caffe","convnet"],year:2016,id:"8f553f4f-6705-4e43-be8b-8f1b2cf2857e.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"fmri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"adni.loni.usc.edu",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/NVIDIA/DIGITS/blob/master/digits/standard-networks/caffe/lenet.prototxt",based_on_1_name:"digits_lenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Canada",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 Future Technologies Conference (FTC)",public:0,"Unnamed: 40":null},{abstract:"Automated cardiac segmentation from magnetic resonance imaging datasets is an essential step in the timely diagnosis and management of cardiac pathologies. We propose to tackle the problem of automated left and right ventricle segmentation through the application of a deep fully convolutional neural network architecture. Our model is efficiently trained end-to-end in a single learning stage from whole-image inputs and ground truths to make inference at every pixel. To our knowledge, this is the first application of a fully convolutional neural network architecture for pixel-wise labeling in cardiac magnetic resonance imaging. Numerical experiments demonstrate that our model is robust to outperform previous fully automated methods across multiple evaluation measures on a range of cardiac datasets. Moreover, our model is fast and can leverage commodity compute resources such as the graphics processing unit to enable state-of-the-art cardiac segmentation at massive scales. The models and code are available at this https URL",authors:"Phi Vu Tran",description:"Initial Technical Report; Include link to models and code. 2016",doi:null,duplicate:!1,email:["tran_phi@bah.com"],email_new:["tran_phi@bah.com"],fullUrl:"https://arxiv.org/abs/1604.00494",key:"985c8604-1381-4ebf-85af-bfe32080fb55",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1604.00494.pdf",phase:1,received:0,source:"arxiv",title:"a fully convolutional neural network for cardiac segmentation in short-axis mri",tools:["caffe"],year:2016,id:"985c8604-1381-4ebf-85af-bfe32080fb55.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"heart",location_1:"0",method_1:"fullycnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.litislab.fr/?projet=1rvsc",data_link_2:"http://www.cardiacatlas.org/challenges/lv-segmentation-challenge/",data_ok:null,code_public:1,code_link:"https://github.com/vuptran/cardiac-segmentation",code_ok:null,pseudocode:null,based_on_1:"https://github.com/shelhamer/fcn.berkeleyvision.org",based_on_1_name:"bvlc_fully_convolutional_nets",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Medical image fusion technique plays an an increasingly critical role in many clinical applications by deriving the complementary information from medical images with different modalities. In this paper, a medical image fusion method based on convolutional neural networks (CNNs) is proposed. In our method, a siamese convolutional network is adopted to generate a weight map which integrates the pixel activity information from two source images. The fusion process is conducted in a multi-scale manner via image pyramids to be more consistent with human visual perception. In addition, a local similarity based strategy is applied to adaptively adjust the fusion mode for the decomposed coefficients. Experimental results demonstrate that the proposed method can achieve promising results in terms of both visual quality and objective assessment.",authors:"Y. Liu,  X. Chen,  J. Cheng,  H. Peng",description:"2017 20th International Conference on Information Fusion (Fusion). 2017",doi:"10.23919/ICIF.2017.8009769",duplicate:!1,email:["yuliu@hfut.edu.cn","xun.chen@hfut.edu.cn","chengjuan@hfut.edu.cn","hpeng@hfut.edu.cn"],email_new:["yuliu@hfut.edu.cn","xun.chen@hfut.edu.cn","chengjuan@hfut.edu.cn","hpeng@hfut.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8009769",key:"aaa20839-51fc-4026-94cd-04286660dd5d",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"a medical image fusion method based on convolutional neural networks",tools:["caffe"],year:2017,id:"aaa20839-51fc-4026-94cd-04286660dd5d.pdf",use:1,domain:"radiology",task_1:"fusion",task_2:"registration",data_type:"ct",data_type_1:"mri",data_type_2:"spect",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.med.harvard.edu/AANLIB/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 20th International Conference on Information Fusion (Fusion)",public:0,"Unnamed: 40":null},{abstract:"BACKGROUND AND OBJECTIVES: Highly accurate classification of biomedical images is an essential task in the clinical diagnosis of numerous medical diseases identified from those images. Traditional image classification methods combined with hand-crafted image feature descriptors and various classifiers are not able to effectively improve the accuracy rate and meet the high requirements of classification of biomedical images. The same also holds true for artificial neural network models directly trained with limited biomedical images used as training data or directly used as a black box to extract the deep features based on another distant dataset. In this study, we propose a highly reliable and accurate end-to-end classifier for all kinds of biomedical images via deep learning and transfer learning. METHODS: e first apply domain transferred deep convolutional neural network for building a deep model; and then develop an overall deep learning architecture based on the raw pixels of original biomedical images using supervised training. In our model, we do not need the manual design of the feature space, seek an effective feature vector classifier or segment specific detection object and image patches, which are the main technological difficulties in the adoption of traditional image classification methods. Moreover, we do not need to be concerned with whether there are large training sets of annotated biomedical images, affordable parallel computing resources featuring GPUs or long times to wait for training a perfect deep model, which are the main problems to train deep neural networks for biomedical image classification as observed in recent works. RESULTS: With the utilization of a simple data augmentation method and fast convergence speed, our algorithm can achieve the best accuracy rate and outstanding classification ability for biomedical images. We have evaluated our classifier on several well-known public biomedical datasets and compared it with several state-of-the-art approaches. CONCLUSIONS: We propose a robust automated end-to-end classifier for biomedical images based on a domain transferred deep convolutional neural network model that shows a highly reliable and accurate performance which has been confirmed on several public biomedical image datasets. Copyright \xa9 2017 Elsevier Ireland Ltd. All rights reserved.",authors:"Pang S, Yu Z, Orgun MA.",description:"Comput Methods Programs Biomed.  2017",doi:null,duplicate:!1,email:["pangshuchao1212@sina.com","yuzz@jlu.edu.cn","mehmet.orgun@mq.edu.au"],email_new:["pangshuchao1212@sina.com","yuzz@jlu.edu.cn","mehmet.orgun@mq.edu.au"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28254085",key:"633eb771-27f2-45f5-8658-a1c9872aeb48",keyok:1,keywords:"Biomedical image classification; Convolutional neural network; Data augmentation; Deep learning; Transfer learning",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"a novel end-to-end classifier using domain transferred deep convolutional neural networks for biomedical images",tools:["caffe"],year:2017,id:"633eb771-27f2-45f5-8658-a1c9872aeb48.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"ct",data_type_1:"mri",data_type_2:"0",location:"multi-organ",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"ftp://medical.nema.org/medical/Dicom/Multiframe/",data_link_2:"https://www.oasis-brains.org/",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"Australia",country_3:"0",journal:"Computer Methods and Programs in Biomedicine",impact_factor:2.503,conference:"0",public:0,"Unnamed: 40":null},{abstract:"With the increasing ability to routinely and rapidly digitize whole slide images with slide scanners, there has been interest in developing computerized image analysis algorithms for automated detection of disease extent from digital pathology images. The manual identification of presence and extent of breast cancer by a pathologist is critical for patient management for tumor staging and assessing treatment response. However, this process is tedious and subject to inter- and intra-reader variability. For computerized methods to be useful as decision support tools, they need to be resilient to data acquired from different sources, different staining and cutting protocols and different scanners. The objective of this study was to evaluate the accuracy and robustness of a deep learning-based method to automatically identify the extent of invasive tumor on digitized images. Here, we present a new method that employs a convolutional neural network for detecting presence of invasive tumor on whole slide images. Our approach involves training the classifier on nearly 400 exemplars from multiple different sites, and scanners, and then independently validating on almost 200 cases from The Cancer Genome Atlas. Our approach yielded a Dice coefficient of 75.86%, a positive predictive value of 71.62% and a negative predictive value of 96.77% in terms of pixel-by-pixel evaluation compared to manually annotated regions of invasive ductal carcinoma.",authors:"Cruz-Roa A, Gilmore H, Basavanhally A, Feldman M, Ganesan S, Shih NNC, Tomaszewski J, Gonz\xe1lez FA, Madabhushi A.",description:"Sci Rep.  2017",doi:null,duplicate:!1,email:["aacruz@unillanos.edu.co"],email_new:["aacruz@unillanos.edu.co"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28418027",key:"d1145abc-18c6-4f9f-bf43-f759ef393d3d",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"accurate and reproducible invasive breast cancer detection in whole-slide images: a deep learning approach for quantifying tumor extent",tools:["torch"],year:2017,id:"d1145abc-18c6-4f9f-bf43-f759ef393d3d.pdf",use:1,domain:"pathology",task_1:"detection",task_2:"0",data_type:"wsi",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://portal.gdc.cancer.gov/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Colombia",country_2:"USA",country_3:"0",journal:"Scientific Reports",impact_factor:4.259,conference:"0",public:1,"Unnamed: 40":null},{abstract:"High-throughput microscopy of many single cells generates high-dimensional data that are far from straightforward to analyze. One important problem is automatically detecting the cellular compartment where a fluorescently-tagged protein resides, a task relatively simple for an experienced human, but difficult to automate on a computer. Here, we train an 11-layer neural network on data from mapping thousands of yeast proteins, achieving per cell localization classification accuracy of 91%, and per protein accuracy of 99% on held-out images. We confirm that low-level network features correspond to basic image characteristics, while deeper layers separate localization classes. Using this network as a feature calculator, we train standard classifiers that assign proteins to previously unseen compartments after observing only a small number of training examples. Our results are the most accurate subcellular localization classifications to date, and demonstrate the usefulness of deep learning for high-throughput microscopy.Copyright \xa9 2017 Parnamaa and Parts.",authors:"P\xe4rnamaa T, Parts L.",description:"G3 (Bethesda).  2017",doi:null,duplicate:!1,email:["leopold.parts@sanger.ac.uk"],email_new:["leopold.parts@sanger.ac.uk"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28391243",key:"d50796da-87f2-4493-846e-6eeb498acc63",keyok:1,keywords:"deep learning; high-content screening; machine learning; microscopy; yeast",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"accurate classification of protein subcellular localization from high-throughput microscopy images using deep learning",tools:["tensorflow","caffe"],year:2017,id:"d50796da-87f2-4493-846e-6eeb498acc63.pdf",use:1,domain:"microscopy",task_1:"classification",task_2:"0",data_type:"microscopy",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.cs.ut.ee/~leopoldp/2016_DeepYeast",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Estonia",country_2:"UK",country_3:"0",journal:"G3: Genes, Genomes, Genetics",impact_factor:2.861,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Crying is a way which infants express their needs to their parents. In general, parents often feel worried and anxious when infant crying. For realizing the reason of baby crying, this paper presents an automatic infant crying recognition method. Crying is convert to spectrogram. A convolutional neural networks (CNN) based deep learning is then adopted to train and classify the crying into three categories including hungry, pain, and sleepy. Experimental results shows that the proposed method achieves high classification accuracy.",authors:"C. Y. Chang,  J. J. Li",description:"2016 IEEE International Conference on Consumer Electronics-Taiwan (ICCE-TW). 2016",doi:"10.1109/ICCE-TW.2016.7520947",duplicate:!1,email:["chuanyu@yuntech.edu.tw"],email_new:["chuanyu@yuntech.edu.tw"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7520947",key:"bd3122c2-1476-44fe-ad2a-6edfc15b7c68",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"application of deep learning for recognizing infant cries",tools:["caffe"],year:2016,id:"bd3122c2-1476-44fe-ad2a-6edfc15b7c68.pdf",use:1,domain:"psychology",task_1:"classification",task_2:"0",data_type:"audio",data_type_1:"0",data_type_2:"0",location:"infant",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Taiwan",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE International Conference on Consumer Electronics-Taiwan (ICCE-TW)",public:0,"Unnamed: 40":null},{abstract:"Breast lesion detection using ultrasound imaging is considered an important step of Computer-Aided Diagnosis systems. Over the past decade, researchers have demonstrated the possibilities to automate the initial lesion detection. However, the lack of a common dataset impedes research when comparing the performance of such algorithms. This paper proposes the use of deep learning approaches for breast ultrasound lesion detection and investigates three different methods: a Patch-based LeNet, a U-Net, and a transfer learning approach with a pretrained FCN-AlexNet. Their performance is compared against four state-of-the-art lesion detection algorithms (i.e. Radial Gradient Index, Multifractal Filtering, Rule-based Region Ranking and Deformable Part Models). In addition, this paper compares and contrasts two conventional ultrasound image datasets acquired from two different ultrasound systems. Dataset A comprises 306 (60 malignant and 246 benign) images and Dataset B comprises 163 (53 malignant and 110 benign) images. To overcome the lack of public datasets in this domain, Dataset B will be made available for research purposes. The results demonstrate an overall improvement by the deep learning approaches when assessed on both datasets in terms of True Positive Fraction, False Positives per image, and F-measure.",authors:"Yap MH, Pons G, Marti J, Ganau S, Sentis M, Zwiggelaar R, Davison AK, Marti R.",description:"IEEE J Biomed Health Inform.  2017",doi:null,duplicate:!1,email:["m.yap@mmu.ac.uk","gponsro@uoc.edu","robert.marti@udg.edu","MSentis@tauli.cat","rrz@aber.ac.uk","adrian.davison@manchester.ac.uk"],email_new:["m.yap@mmu.ac.uk","gponsro@uoc.edu","robert.marti@udg.edu","MSentis@tauli.cat","rrz@aber.ac.uk","adrian.davison@manchester.ac.uk"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28796627",key:"211d576b-be6a-4ba2-bded-41d6348174e4",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"automated breast ultrasound lesions detection using convolutional neural networks",tools:["caffe"],year:2017,id:"211d576b-be6a-4ba2-bded-41d6348174e4.pdf",use:1,domain:"radiology",task_1:"detection",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"breast",location_1:"0",method_1:"cnn",method_2:"fcn",method_3:"0",data_public:0,data_upon_request:0,data_shared:1,data_link_1:"http://www2.docm.mmu.ac.uk/STAFF/m.yap/dataset.php",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://lmb.informatik.uni-freiburg.de/resources/opensource/unet.en.html",based_on_1_name:"unet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:"469",training:0,validation:0,testing:0,cross_validation:1,country_1:"UK",country_2:"Spain",country_3:"0",journal:"IEEE Journal of Biomedical and Health Informatics",impact_factor:3.451,conference:"0",public:0,"Unnamed: 40":"*"},{abstract:"PURPOSE: To develop and test a deep learning approach named Convolutional Neural Network (CNN) for automated screening of T2 -weighted (T2 WI) liver acquisitions for nondiagnostic images, and compare this automated approach to evaluation by two radiologists. MATERIALS AND METHODS: We evaluated 522 liver magnetic resonance imaging (MRI) exams performed at 1.5T and 3T at our institution between November 2014 and May 2016 for CNN training and validation. The CNN consisted of an input layer, convolutional layer, fully connected layer, and output layer. 351\u2009T2 WI were anonymized for training. Each case was annotated with a label of being diagnostic or nondiagnostic for detecting lesions and assessing liver morphology. Another independently collected 171 cases were sequestered for a blind test. These 171\u2009T2 WI were assessed independently by two radiologists and annotated as being diagnostic or nondiagnostic. These 171\u2009T2 WI were presented to the CNN algorithm and image quality (IQ) output of the algorithm was compared to that of two radiologists. RESULTS: There was concordance in IQ label between Reader 1 and CNN in 79% of cases and between Reader 2 and CNN in 73%. The sensitivity and the specificity of the CNN algorithm in identifying nondiagnostic IQ was 67% and 81% with respect to Reader 1 and 47% and 80% with respect to Reader 2. The negative predictive value of the algorithm for identifying nondiagnostic IQ was 94% and 86% (relative to Readers 1 and 2). CONCLUSION: We demonstrate a CNN algorithm that yields a high negative predictive value when screening for nondiagnostic T2 WI of the liver. LEVEL OF EVIDENCE: 2 Technical Efficacy: Stage 2 J. Magn. Reson. Imaging 2017.\xa9 2017 International Society for Magnetic Resonance in Medicine.",authors:"Esses SJ, Lu X, Zhao T, Shanbhogue K, Dane B, Bruno M, Chandarana H.",description:"J Magn Reson Imaging.  2017",doi:null,duplicate:!1,email:["Hersh.Chandarana@nyumc.org"],email_new:["Hersh.Chandarana@nyumc.org"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28577329",key:"e0207c62-727f-403b-8a69-fb196762732b",keyok:1,keywords:"T2 weighted imaging; convolutional neuronal network; deep learning; image quality; liver MRI; machine learning",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"automated image quality evaluation of t(2) -weighted liver mri utilizing deep learning architecture",tools:["caffe"],year:2017,id:"e0207c62-727f-403b-8a69-fb196762732b.pdf",use:1,domain:"radiology",task_1:"quality assesment",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"liver",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Journal of Magnetic Resonance Imaging",impact_factor:3.083,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Automated melanoma recognition in dermoscopy images is a very challenging task due to the low contrast of skin lesions, the huge intraclass variation of melanomas, the high degree of visual similarity between melanoma and non-melanoma lesions, and the existence of many artifacts in the image. In order to meet these challenges, we propose a novel method for melanoma recognition by leveraging very deep convolutional neural networks (CNNs). Compared with existing methods employing either low-level hand-crafted features or CNNs with shallower architectures, our substantially deeper networks (more than 50 layers) can acquire richer and more discriminative features for more accurate recognition. To take full advantage of very deep networks, we propose a set of schemes to ensure effective training and learning under limited training data. First, we apply the residual learning to cope with the degradation and overfitting problems when a network goes deeper. This technique can ensure that our networks benefit from the performance gains achieved by increasing network depth. Then, we construct a fully convolutional residual network (FCRN) for accurate skin lesion segmentation, and further enhance its capability by incorporating a multi-scale contextual information integration scheme. Finally, we seamlessly integrate the proposed FCRN (for segmentation) and other very deep residual networks (for classification) to form a two-stage framework. This framework enables the classification network to extract more representative and specific features based on segmented results instead of the whole dermoscopy images, further alleviating the insufficiency of training data. The proposed framework is extensively evaluated on ISBI 2016 Skin Lesion Analysis Towards Melanoma Detection Challenge dataset. Experimental results demonstrate the significant performance gains of the proposed framework, ranking the first in classification and the second in segmentation among 25 teams and 28 teams, r- spectively. This study corroborates that very deep CNNs with effective training mechanisms can be employed to solve complicated medical image analysis tasks, even with limited training data.",authors:"L. Yu,  H. Chen,  Q. Dou,  J. Qin,  P. A. Heng",description:"IEEE Transactions on Medical Imaging. 2017",doi:"10.1109/TMI.2016.2642839",duplicate:!1,email:["lqyu@cse.cuhk.edu.hk","hchen@cse.cuhk.edu.hk","qdou@cse.cuhk.edu.hk","pheng@cse.cuhk.edu.hk","harry.qin@polyu.edu.hk"],email_new:["lqyu@cse.cuhk.edu.hk","hchen@cse.cuhk.edu.hk","qdou@cse.cuhk.edu.hk","pheng@cse.cuhk.edu.hk","harry.qin@polyu.edu.hk"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7792699",key:"0104bacd-b252-4612-b689-cc1c856707b8",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"automated melanoma recognition in dermoscopy images via very deep residual networks",tools:["caffe"],year:2017,id:"0104bacd-b252-4612-b689-cc1c856707b8.pdf",use:1,domain:"dermatology",task_1:"segmentation",task_2:"classification",data_type:"dermoscopy",data_type_1:"0",data_type_2:"0",location:"skin",location_1:"0",method_1:"fcrn",method_2:"cnn",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://isic-archive.com/",data_link_2:"0",data_ok:1,code_public:1,code_link:"https://github.com/yulequan/melanoma-recognition",code_ok:1,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"1250",training:900,validation:0,testing:350,cross_validation:0,country_1:"Hong Kong",country_2:"0",country_3:"0",journal:"IEEE TRANSACTIONS ON MEDICAL IMAGING",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"We present a computer-aided diagnosis system (CADx) for the automatic categorization of solid, part-solid and non-solid nodules in pulmonary computerized tomography images using a Convolutional Neural Network (CNN). Provided with only a two-dimensional region of interest (ROI) surrounding each nodule, our CNN automatically reasons from image context to discover informative computational features. As a result, no image segmentation processing is needed for further analysis of nodule attenuation, allowing our system to avoid potential errors caused by inaccurate image processing. We implemented two computerized texture analysis schemes, classification and regression, to automatically categorize solid, part-solid and non-solid nodules in CT scans, with hierarchical features in each case learned directly by the CNN model. To show the effectiveness of our CNN-based CADx, an established method based on histogram analysis (HIST) was implemented for comparison. The experimental results show significant performance improvement by the CNN model over HIST in both classification and regression tasks, yielding nodule classification and rating performance concordant with those of practicing radiologists. Adoption of CNN-based CADx systems may reduce the inter-observer variation among screening radiologists and provide a quantitative reference for further nodule analysis.",authors:"Tu X, Xie M, Gao J, Ma Z, Chen D, Wang Q, Finlayson SG, Ou Y, Cheng JZ.",description:"Sci Rep.  2017",doi:null,duplicate:!1,email:["mxie@uestc.edu.cn","jzcheng@ntu.edu.tw"],email_new:["mxie@uestc.edu.cn","jzcheng@ntu.edu.tw"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28864824",key:"81d6c0eb-9cc3-4cb0-83d9-c67b86ef8c1c",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"automatic categorization and scoring of solid, part-solid and non-solid pulmonary nodules in ct images with convolutional neural network",tools:["caffe"],year:2017,id:"81d6c0eb-9cc3-4cb0-83d9-c67b86ef8c1c.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"regression",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"lung",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://wiki.cancerimagingarchive.net/display/Public/LIDC-IDRI",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"China",country_2:"USA",country_3:"0",journal:"Scientific Reports",impact_factor:4.259,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Colorectal cancer (CRC) is a leading cause of cancer deaths worldwide. Although polypectomy at early stage reduces CRC incidence, 90% of the polyps are small and diminutive, where removal of them poses risks to patients that may outweigh the benefits. Correctly detecting and predicting polyp type during colonoscopy allows endoscopists to resect and discard the tissue without submitting it for histology, saving time, and costs. Nevertheless, human visual observation of early stage polyps varies. Therefore, this paper aims at developing a fully automatic algorithm to detect and classify hyperplastic and adenomatous colorectal polyps. Adenomatous polyps should be removed, whereas distal diminutive hyperplastic polyps are considered clinically insignificant and may be left in situ . A novel transfer learning application is proposed utilizing features learned from big nonmedical datasets with 1.4-2.5 million images using deep convolutional neural network. The endoscopic images we collected for experiment were taken under random lighting conditions, zooming and optical magnification, including 1104 endoscopic nonpolyp images taken under both white-light and narrowband imaging (NBI) endoscopy and 826 NBI endoscopic polyp images, of which 263 images were hyperplasia and 563 were adenoma as confirmed by histology. The proposed method identified polyp images from nonpolyp images in the beginning followed by predicting the polyp histology. When compared with visual inspection by endoscopists, the results of this study show that the proposed method has similar precision (87.3% versus 86.4%) but a higher recall rate (87.6% versus 77.0%) and a higher accuracy (85.9% versus 74.3%). In conclusion, automatic algorithms can assist endoscopists in identifying polyps that are adenomatous but have been incorrectly judged as hyperplasia and, therefore, enable timely resection of these polyps at an early stage before they develop into invasive cancer.",authors:"Zhang R, Zheng Y, Mak TW, Yu R, Wong SH, Lau JY, Poon CC.",description:"IEEE J Biomed Health Inform.  2017",doi:null,duplicate:!1,email:["cpoon@surgery.cuhk.edu.hk"],email_new:["cpoon@surgery.cuhk.edu.hk"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28114040",key:"3bd582af-d98e-4f9e-8985-040bca4e4925",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"automatic detection and classification of colorectal polyps by transferring low-level cnn features from nonmedical domain",tools:["caffe"],year:2017,id:"3bd582af-d98e-4f9e-8985-040bca4e4925.pdf",use:1,domain:"colonoscopy",task_1:"detection",task_2:"classification",data_type:"colonoscopy",data_type_1:"0",data_type_2:"0",location:"colon",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.depeca.uah.es/colonoscopy_dataset/",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_reference_caffenet",based_on_1_name:"bvlc_caffenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:"291",training:0,validation:0,testing:0,cross_validation:1,country_1:"Hong Kong",country_2:"0",country_3:"0",journal:"IEEE Journal of Biomedical and Health Informatics",impact_factor:3.451,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Considerable practical interest exists in being able to automatically determine whether a recorded magnetic resonance image is affected by motion artifacts caused by patient movements during scanning. Existing approaches usually rely on the use of navigators or external sensors to detect and track patient motion during image acquisition. In this work, we present an algorithm based on convolutional neural networks that enables fully automated detection of motion artifacts in MR scans without special hardware requirements. The approach is data driven and uses the magnitude of MR images in the spatial domain as input. We evaluate the performance of our algorithm on both synthetic and real data and observe adequate performance in terms of accuracy and generalization to different types of data. Our proposed approach could potentially be used in clinical practice to tag an MR image as motion-free or motion-corrupted immediately after a scan is finished. This process would facilitate the acquisition of high-quality MR images that are often indispensable for accurate medical diagnosis.",authors:"K. Meding,  A. Loktyushin,  M. Hirsch",description:"2017 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP). 2017",doi:"10.1109/ICASSP.2017.7952268",duplicate:!1,email:["KristoJ.Meding@tuebingen.mpg.de","Alexander.Loktyushin@tuebingen.mpg.de","Michael.Hirsch@tuebingen.mpg.de"],email_new:["KristoJ.Meding@tuebingen.mpg.de","Alexander.Loktyushin@tuebingen.mpg.de","Michael.Hirsch@tuebingen.mpg.de"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7952268",key:"d93b13b9-b5c3-4c7c-8334-397c791aca87",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"automatic detection of motion artifacts in mr images using cnns",tools:["caffe"],year:2017,id:"d93b13b9-b5c3-4c7c-8334-397c791aca87.pdf",use:1,domain:"radiology",task_1:"detection",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Germany",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)",public:0,"Unnamed: 40":null},{abstract:"Automatic and accurate lumbar vertebrae detection is an essential step of image-guided minimally invasive spine surgery (IG-MISS). However, traditional methods still require human intervention due to the similarity of vertebrae, abnormal pathological conditions and uncertain imaging angle. In this paper, we present a novel convolutional neural network (CNN) model to automatically detect lumbar vertebrae for C-arm X-ray images. Training data is augmented by DRR and automatic segmentation of ROI is able to reduce the computational complexity. Furthermore, a feature fusion deep learning (FFDL) model is introduced to combine two types of features of lumbar vertebrae X-ray images, which uses sobel kernel and Gabor kernel to obtain the contour and texture of lumbar vertebrae, respectively. Comprehensive qualitative and quantitative experiments demonstrate that our proposed model performs more accurate in abnormal cases with pathologies and surgical implants in multi-angle views.",authors:"Y. Li,  W. Liang,  Y. Zhang,  H. An,  J. Tan",description:"2016 38th Annual International Conference of the IEEE Engineering in Medicine and Biology Society (EMBC). 2016",doi:"10.1109/EMBC.2016.7590785",duplicate:!1,email:["liyang@sia.cn","liang-wei2014315@gmail.com","tan@utk.edu"],email_new:["liyang@sia.cn","liang-wei2014315@gmail.com","tan@utk.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7590785",key:"9ccddf12-0caa-4122-8bc2-a9f56a370bde",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"automatic lumbar vertebrae detection based on feature fusion deep learning for partial occluded c-arm x-ray images",tools:["caffe"],year:2016,id:"9ccddf12-0caa-4122-8bc2-a9f56a370bde.pdf",use:1,domain:"radiology",task_1:"detection",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"spine",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://www.microsoft.com/en-us/research/project/medical-image-analysis/?from=http%3A%2F%2Fresearch.microsoft.com%2Fprojects%2Fmedicalimageanalysis%2F",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"USA",country_3:"0",journal:"0",impact_factor:0,conference:"2016 38th Annual International Conference of the IEEE Engineering in Medicine and Biology Society (EMBC)",public:0,"Unnamed: 40":null},{abstract:"Echocardiography (echo) is a skilled technical procedure that depends on the experience of the operator. The aim of this paper is to reduce user variability in data acquisition by automatically computing a score of echo quality for operator feedback. To do this, a deep convolutional neural network model, trained on a large set of samples, was developed for scoring apical four-chamber (A4C) echo. In this paper, 6,916 end-systolic echo images were manually studied by an expert cardiologist and were assigned a score between 0 (not acceptable) and 5 (excellent). The images were divided into two independent training-validation and test sets. The network architecture and its parameters were based on the stochastic approach of the particle swarm optimization on the training-validation data. The mean absolute error between the scores from the ultimately trained model and the expert's manual scores was 0.71 \xb1 0.58. The reported error was comparable to the measured intra-rater reliability. The learned features of the network were visually interpretable and could be mapped to the anatomy of the heart in the A4C echo, giving confidence in the training result. The computation time for the proposed network architecture, running on a graphics processing unit, was less than 10 ms per frame, sufficient for real-time deployment. The proposed approach has the potential to facilitate the widespread use of echo at the point-of-care and enable early and timely diagnosis and treatment. Finally, the approach did not use any specific assumptions about the A4C echo, so it could be generalizable to other standard echo views.",authors:"Abdi AH, Luong C, Tsang T, Allan G, Nouranian S, Jue J, Hawley D, Fleming S, Gin K, Swift J, Rohling R, Abolmaesumi P.",description:"IEEE Trans Med Imaging.  2017",doi:null,duplicate:!1,email:["purang@ece.ubc.ca"],email_new:["purang@ece.ubc.ca"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28391191",key:"3db1dca1-3ee6-416e-ac50-74359d00efb7",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"automatic quality assessment of echocardiograms using convolutional neural networks: feasibility on the apical four-chamber view",tools:["caffe"],year:2017,id:"3db1dca1-3ee6-416e-ac50-74359d00efb7.pdf",use:1,domain:"echocardiography",task_1:"quality assesment",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"heart",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"6,916",training:5533,validation:0,testing:1383,cross_validation:1,country_1:"Canada",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Counting bacterial colonies on microbiological culture plates is a time-consuming, error-prone, nevertheless fundamental task in microbiology. Computer vision based approaches can increase the efficiency and the reliability of the process, but accurate counting is challenging, due to the high degree of variability of agglomerated colonies. In this paper, we propose a solution which adopts Convolutional Neural Networks (CNN) for counting the number of colonies contained in confluent agglomerates, that scored an overall accuracy of the 92.8% on a large challenging dataset. The proposed CNN-based technique for estimating the cardinality of colony aggregates outperforms traditional image processing approaches, becoming a promising approach to many related applications.",authors:"Ferrari A, Lombardi S, Signoroni A.",description:"Conf Proc IEEE Eng Med Biol Soc.  2015",doi:null,duplicate:!1,email:["alberto.signoroni@unibs.it","alessandro.ferrari@copanitalia.com"],email_new:["alberto.signoroni@unibs.it","alessandro.ferrari@copanitalia.com"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/26738016",key:"d077a6b8-a563-41c7-aa51-72f3d58ee930",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"bacterial colony counting by convolutional neural networks",tools:["caffe"],year:2015,id:"d077a6b8-a563-41c7-aa51-72f3d58ee930.pdf",use:1,domain:"microscopy",task_1:"counting",task_2:"classification",data_type:"microscopy",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/blob/master/examples/mnist/lenet.prototxt",based_on_1_name:"bvlc_lenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Italy",country_2:"0",country_3:"0",journal:"pattern recognition",impact_factor:3.399,conference:"0",public:1,"Unnamed: 40":null},{abstract:"The complex language of eukaryotic gene expression remains incompletely understood. Despite the importance suggested by many noncoding variants statistically associated with human disease, nearly all such variants have unknown mechanism. Here, we address this challenge using an approach based on a recent machine learning advance--deep convolutional neural networks (CNNs). We introduce an open source package Basset (https://github.com/davek44/Basset) to apply CNNs to learn the functional activity of DNA sequences from genomics data. We trained Basset on a compendium of accessible genomic sites mapped in 164 cell types by DNaseI-seq and demonstrate far greater predictive accuracy than previous methods. Basset predictions for the change in accessibility between variant alleles were far greater for GWAS SNPs that are likely to be causal relative to nearby SNPs in linkage disequilibrium with them. With Basset, a researcher can perform a single sequencing assay in their cell type of interest and simultaneously learn that cell's chromatin accessibility code and annotate every mutation in the genome with its influence on present accessibility and latent potential for accessibility. Thus, Basset offers a powerful computational approach to annotate and interpret the noncoding genome.",authors:"David R Kelley, Jasper Snoek, John Rinn",description:"Now published in Genome Research. 2016",doi:null,duplicate:!1,email:["dkelley@fas.harvard.edu","jsnoek@seas.harvard.edu","john_rinn@harvard.edu"],email_new:["dkelley@fas.harvard.edu","jsnoek@seas.harvard.edu","john_rinn@harvard.edu"],fullUrl:"http://www.biorxiv.org/content/early/2016/02/18/028399",key:"7ba25133-06c5-4c75-b2d4-e62dc4c8c250",keyok:1,keywords:null,pdfUrl:"http://www.biorxiv.org/content/early/2016/02/18/028399.full.pdf",phase:1,received:0,source:"biorxiv",title:"basset: learning the regulatory code of the accessible genome with deep convolutional neural networks",tools:["digits","torch"],year:2016,id:"7ba25133-06c5-4c75-b2d4-e62dc4c8c250.pdf",use:1,domain:"genomics",task_1:"annotation",task_2:"0",data_type:"dna",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://genome.ucsc.edu/",data_link_2:"http://www.roadmapepigenomics.org/",data_ok:null,code_public:1,code_link:"https://github.com/davek44/Basset",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Genome Research",impact_factor:11.351,conference:"0",public:1,"Unnamed: 40":null},{abstract:"The task of MRI fingerprinting is to identify tissue parameters from complex-valued MRI signals. The prevalent approach is dictionary based, where a test MRI signal is compared to stored MRI signals with known tissue parameters and the most similar signals and tissue parameters retrieved. Such an approach does not scale with the number of parameters and is rather slow when the tissue parameter space is large. Our first novel contribution is to use deep learning as an efficient nonlinear inverse mapping approach. We generate synthetic (tissue, MRI) data from an MRI simulator, and use them to train a deep net to map the MRI signal to the tissue parameters directly. Our second novel contribution is to develop a complex-valued neural network with new cardioid activation functions. Our results demonstrate that complex-valued neural nets could be much more accurate than real-valued neural nets at complex-valued MRI fingerprinting.",authors:"Patrick Virtue, Stella X. Yu, Michael Lustig",description:"Accepted in Proc. IEEE International Conference on Image Processing (ICIP), 2017. 2017",doi:null,duplicate:!1,email:["virtue@berkeley.edu"],email_new:["virtue@berkeley.edu"],fullUrl:"https://arxiv.org/abs/1707.00070",key:"2b27e52f-7df6-4b60-9ed8-5900da98cb2c",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1707.00070.pdf",phase:1,received:0,source:"arxiv",title:"better than real: complex-valued neural nets for mri fingerprinting",tools:["caffe"],year:2017,id:"2b27e52f-7df6-4b60-9ed8-5900da98cb2c.pdf",use:1,domain:"radiology",task_1:"fingerprinting",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"0",location_1:"0",method_1:"fullyconnectednn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:0,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"0",training:1e5,validation:0,testing:0,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:" IEEE International Conference on Image Processing (ICIP), 2017",public:1,"Unnamed: 40":null},{abstract:" Gliomas are rapidly progressive, neurologically devastating, largely fatal brain tumors. Magnetic resonance imaging (MRI) is a widely used technique employed in the diagnosis and management of gliomas in clinical practice. MRI is also the standard imaging modality used to delineate the brain tumor target as part of treatment planning for the administration of radiation therapy. Despite more than 20 yr of research and development, computational brain tumor segmentation in MRI images remains a challenging task. We are presenting a novel method of automatic image segmentation based on holistically nested neural networks that could be employed for brain tumor segmentation of MRI images. METHODS: Two preprocessing techniques were applied to MRI images. The N4ITK method was employed for correction of bias field distortion. A novel landmark-based intensity normalization method was developed so that tissue types have a similar intensity scale in images of different subjects for the same MRI protocol. The holistically nested neural networks (HNN), which extend from the convolutional neural networks (CNN) with a deep supervision through an additional weighted-fusion output layer, was trained to learn the multiscale and multilevel hierarchical appearance representation of the brain tumor in MRI images and was subsequently applied to produce a prediction map of the brain tumor on test images. Finally, the brain tumor was obtained through an optimum thresholding on the prediction map. RESULTS: The proposed method was evaluated on both the Multimodal Brain Tumor Image Segmentation (BRATS) Benchmark 2013 training datasets, and clinical data from our institute. A dice similarity coefficient (DSC) and sensitivity of 0.78 and 0.81 were achieved on 20 BRATS 2013 training datasets with high-grade gliomas (HGG), based on a two-fold cross-validation. The HNN model built on the BRATS 2013 training data was applied to ten clinical datasets with HGG from a locally developed database. DSC and sensitivity of 0.83 and 0.85 were achieved. A quantitative comparison indicated that the proposed method outperforms the popular fully convolutional network (FCN) method. In terms of efficiency, the proposed method took around 10 h for training with 50,000 iterations, and approximately 30 s for testing of a typical MRI image in the BRATS 2013 dataset with a size of 160 \xd7 216 \xd7 176, using a DELL PRECISION workstation T7400, with an NVIDIA Tesla K20c GPU.CONCLUSIONS: An effective brain tumor segmentation method for MRI images based on a HNN has been developed. The high level of accuracy and efficiency make this method practical in brain tumor segmentation. It may play a crucial role in both brain tumor diagnostic analysis and in the treatment planning of radiation therapy. Published 2017. This article is a U.S. Government work and is in the public domain in the USA.",authors:"Zhuge Y, Krauze AV, Ning H, Cheng JY, Arora BC, Camphausen K, Miller RW.",description:"Med Phys.  2017",doi:null,duplicate:!1,email:["zhugey@nih.gov"],email_new:["zhugey@nih.gov"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28736864",key:"ac01437e-df0b-45c8-af27-0f7f943a8a44",keyok:1,keywords:"MRI image; brain tumor; convolutional neural networks; holistically nested neural networks; image segmentation",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"brain tumor segmentation using holistically nested neural networks in mri images",tools:["caffe"],year:2017,id:"ac01437e-df0b-45c8-af27-0f7f943a8a44.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"hnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://www.smir.ch/BRATS/Start2013#download",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/s9xie/hed",based_on_1_name:"holistically_nested_edge_detection",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"medical physics",impact_factor:2.635,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Automated breast cancer multi-classification from histopathological images plays a key role in computer-aided breast cancer diagnosis or prognosis. Breast cancer multi-classification is to identify subordinate classes of breast cancer (Ductal carcinoma, Fibroadenoma, Lobular carcinoma, etc.). However, breast cancer multi-classification from histopathological images faces two main challenges from: (1) the great difficulties in breast cancer multi-classification methods contrasting with the classification of binary classes (benign and malignant), and (2) the subtle differences in multiple classes due to the broad variability of high-resolution image appearances, high coherency of cancerous cells, and extensive inhomogeneity of color distribution. Therefore, automated breast cancer multi-classification from histopathological images is of great clinical significance yet has never been explored. Existing works in literature only focus on the binary classification but do not support further breast cancer quantitative assessment. In this study, we propose a breast cancer multi-classification method using a newly proposed deep learning model. The structured deep learning model has achieved remarkable performance (average 93.2% accuracy) on a large-scale dataset, which demonstrates the strength of our method in providing an efficient tool for breast cancer multi-classification in clinical settings.",authors:"Han Z, Wei B, Zheng Y, Yin Y, Li K, Li S.",description:"Sci Rep.  2017",doi:null,duplicate:!1,email:["wbz99@sina.com"],email_new:["wbz99@sina.com"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28646155",key:"445e091e-d8a7-4e31-a501-26eaf91c882c",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"breast cancer multi-classification from histopathological images with structured deep learning model",tools:["caffe"],year:2017,id:"445e091e-d8a7-4e31-a501-26eaf91c882c.pdf",use:1,domain:"pathology",task_1:"classification",task_2:"0",data_type:"histopathology",data_type_1:"0",data_type_2:"0",location:"breast",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://web.inf.ufpr.br/vri/databases/breast-cancer-histopathological-database-breakhis/",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:"82",training:61,validation:0,testing:21,cross_validation:1,country_1:"China",country_2:"UK",country_3:"0",journal:"nature scientific reports",impact_factor:4.259,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Hyperspectral imaging is a rising imaging modality in the field of medical applications, and the combination of both spectral and spatial information provides wealth information for cell classification. In this paper, deep convolutional neural network (CNN) is employed to achieve blood cell discrimination in medical hyperspectral images (MHSI). As a deep learning architecture, CNNs are expected to get more discriminative and semantic features, which effect classification accuracy to a certain extent. Experimental results based on two real medical hyperspectral image data sets demonstrate that cell classification using CNNs is effective. In addition, compared to traditional support vector machine (SVM), the proposed method, which jointly exploits spatial and spectral features, can achieve better classification performance, showcasing the CNN-based methods' tremendous potential for accurate medical hyperspectral data classification.",authors:"Xiang Li,  W. Li,  Xiaodong Xu,  Wei Hu",description:"2017 2nd International Conference on Image, Vision and Computing (ICIVC). 2017",doi:"10.1109/ICIVC.2017.7984606",duplicate:!1,email:["liwei089@ieee.org"],email_new:["liwei089@ieee.org"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7984606",key:"310fb8e5-7fda-416b-84c0-35cb33685984",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"cell classification using convolutional neural networks in medical hyperspectral imagery",tools:["caffe"],year:2017,id:"310fb8e5-7fda-416b-84c0-35cb33685984.pdf",use:1,domain:"microscopy",task_1:"classification",task_2:"0",data_type:"hsi",data_type_1:"0",data_type_2:"0",location:"blood",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"24222",training:9687,validation:0,testing:14535,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 2nd International Conference on Image, Vision and Computing",public:0,"Unnamed: 40":null},{abstract:"Dental records play an important role in forensic identification. To this end, postmortem dental findings and teeth conditions are recorded in a dental chart and compared with those of antemortem records. However, most dentists are inexperienced at recording the dental chart for corpses, and it is a physically and mentally laborious task, especially in large scale disasters. Our goal is to automate the dental filing process by using dental x-ray images. In this study, we investigated the application of a deep convolutional neural network (DCNN) for classifying tooth types on dental cone-beam computed tomography (CT) images. Regions of interest (ROIs) including single teeth were extracted from CT slices. Fifty two CT volumes were randomly divided into 42 training and 10 test cases, and the ROIs obtained from the training cases were used for training the DCNN. For examining the sampling effect, random sampling was performed 3 times, and training and testing were repeated. We used the AlexNet network architecture provided in the Caffe framework, which consists of 5 convolution layers, 3 pooling layers, and 2 full connection layers. For reducing the overtraining effect, we augmented the data by image rotation and intensity transformation. The test ROIs were classified into 7 tooth types by the trained network. The average classification accuracy using the augmented training data by image rotation and intensity transformation was 88.8%. Compared with the result without data augmentation, data augmentation resulted in an approximately 5% improvement in classification accuracy. This indicates that the further improvement can be expected by expanding the CT dataset. Unlike the conventional methods, the proposed method is advantageous in obtaining high classification accuracy without the need for precise tooth segmentation. The proposed tooth classification method can be useful in automatic filing of dental charts for forensic identification.Copyright \xa9 2016 Elsevier Ltd. All rights reserved.",authors:"Miki Y, Muramatsu C, Hayashi T, Zhou X, Hara T, Katsumata A, Fujita H.",description:"Comput Biol Med.  2017",doi:null,duplicate:!1,email:["chisa@fjt.info.gifu-u.ac.jp"],email_new:["chisa@fjt.info.gifu-u.ac.jp"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/27889430",key:"5d20cbe9-c3f0-41a5-9084-f623c01a9258",keyok:1,keywords:"Deep convolutional neural networks; Dental chart; Dental cone-beam CT; Forensic identification; Tooth classification",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"classification of teeth in cone-beam ct using deep convolutional neural network",tools:["digits","caffe"],year:2017,id:"5d20cbe9-c3f0-41a5-9084-f623c01a9258.pdf",use:1,domain:"dentistry",task_1:"classification",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"teeth",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Japan",country_2:"0",country_3:"0",journal:"Computers in Biology and Medicine",impact_factor:1.836,conference:"0",public:0,"Unnamed: 40":null},{abstract:"In this paper, we develop a new weakly-supervised learning algorithm to learn to segment cancerous regions in histopathology images. Our work is under a multiple instance learning framework (MIL) with a new formulation, deep weak supervision (DWS); we also propose an effective way to introduce constraints to our neural networks to assist the learning process. The contributions of our algorithm are threefold: (1) We build an end-to-end learning system that segments cancerous regions with fully convolutional networks (FCN) in which image-toimage weakly-supervised learning is performed. (2) We develop a deep week supervision formulation to exploit multi-scale learning under weak supervision within fully convolutional networks. (3) Constraints about positive instances are introduced in our approach to effectively explore additional weakly-supervised information that is easy to obtain and enjoys a significant boost to the learning process. The proposed algorithm, abbreviated as DWS-MIL, is easy to implement and can be trained efficiently. Our system demonstrates state-of-the-art results on large-scale histopathology image datasets and can be applied to various applications in medical imaging beyond histopathology images such as MRI, CT, and ultrasound images.",authors:"Jia Z, Huang X, Chang EI, Xu Y.",description:"IEEE Trans Med Imaging.  2017",doi:null,duplicate:!1,email:["huangxingyi102@126.com","xuyan04@gmail.com","zhipeng.jia@outlook.com","echang@microsoft.com","xuyan04@gmail.com","zhipeng.jia@outlook.com"],email_new:["huangxingyi102@126.com","xuyan04@gmail.com","zhipeng.jia@outlook.com","echang@microsoft.com","xuyan04@gmail.com","zhipeng.jia@outlook.com"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28692971",key:"bfffca90-88eb-4036-91e5-45058f85c96e",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"constrained deep weak supervision for histopathology image segmentation",tools:["caffe"],year:2017,id:"bfffca90-88eb-4036-91e5-45058f85c96e.pdf",use:1,domain:"pathology",task_1:"segmentation",task_2:"0",data_type:"histapathology",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"colon",method_1:"fullycnn",method_2:"cnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"https://lmb.informatik.uni-freiburg.de/people/ronneber/u-net/",based_on_2_name:"unet",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"China",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:1,"Unnamed: 40":null},{abstract:"MOTIVATION: Convolutional neural networks (CNN) have outperformed conventional methods in modeling the sequence specificity of DNA-protein binding. Yet inappropriate CNN architectures can yield poorer performance than simpler models. Thus an in-depth understanding of how to match CNN architecture to a given task is needed to fully harness the power of CNNs for computational biology applications. RESULTS: We present a systematic exploration of CNN architectures for predicting DNA sequence binding using a large compendium of transcription factor datasets. We identify the best-performing architectures by varying CNN width, depth and pooling designs. We find that adding convolutional kernels to a network is important for motif-based tasks. We show the benefits of CNNs in learning rich higher-order sequence features, such as secondary motifs and local sequence context, by comparing network performance on multiple modeling tasks ranging in difficulty. We also demonstrate how careful construction of sequence benchmark datasets, using approaches that control potentially confounding effects like positional or motif strength bias, is critical in making fair comparisons between competing methods. We explore how to establish the sufficiency of training data for these learning tasks, and we have created a flexible cloud-based framework that permits the rapid exploration of alternative neural network architectures for problems in computational biology. AVAILABILITY AND IMPLEMENTATION: All the models analyzed are available at http://cnn.csail.mit.edu. SUPPLEMENTARY INFORMATION: Supplementary data are available at Bioinformatics online.\xa9 The Author 2016. Published by Oxford University Press.",authors:"Zeng H, Edwards MD, Liu G, Gifford DK.",description:"Bioinformatics.  2016",doi:null,duplicate:!1,email:["gifford@mit.edu"],email_new:["gifford@mit.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/27307608",key:"6f605dcd-ac54-411e-8a52-73eb0886510e",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"convolutional neural network architectures for predicting dna-protein binding",tools:["caffe"],year:2016,id:"6f605dcd-ac54-411e-8a52-73eb0886510e.pdf",use:1,domain:"genomics",task_1:"classification",task_2:"0",data_type:"dna",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://hgdownload.cse.ucsc.edu/goldenPath/hg19/encodeDCC/wgEncodeAwgTfbsUniform/",data_link_2:"0",data_ok:null,code_public:1,code_link:"http://cnn.csail.mit.edu/",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Bioinformatics",impact_factor:7.307,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Diagnosis and cure of cancer has been one of the biggest challenges faced by mankind in the last few decades. Early detection of cancer would facilitate in saving millions of lives across the globe every year. This paper presents an approach which uses a Convolutional Neural Network (CNNs) to classify tumours seen in lung cancer screening computed tomography scans as malignant or benign. CNNs have special properties such as spatial invariance, and allow for multiple feature extraction. When such layers are cascaded, leading to Deep CNNs, it has been shown widely that the accuracy of prediction increases dramatically. In this work, we have designed a CNN suitable for the analysis of CT scans with tumours, using domain knowledge from both medicine and neural networks. The results show that the accuracy of classification for our network performs better than both the traidtional neural networks, and also existing CNNs built for image classification purposes.",authors:"P. Rao,  N. A. Pereira,  R. Srinivasan",description:"2016 2nd International Conference on Contemporary Computing and Informatics (IC3I). 2016",doi:"10.1109/IC3I.2016.7918014",duplicate:!1,email:["prajwaljpj@gmail.com","nishalpereira@gmail.com","raghuram@msrit.edu"],email_new:["prajwaljpj@gmail.com","nishalpereira@gmail.com","raghuram@msrit.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7918014",key:"c642c7a5-cd18-4525-b3f7-1f2a103a7765",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"convolutional neural networks for lung cancer screening in computed tomography (ct) scans",tools:["caffe"],year:2016,id:"c642c7a5-cd18-4525-b3f7-1f2a103a7765.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"lung",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://wiki.cancerimagingarchive.net/display/Public/LIDC-IDRI",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/blob/master/examples/mnist/lenet.prototxt",based_on_1_name:"bvlc_lenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"India",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 2nd International Conference on Contemporary Computing and Informatics (IC3I)",public:0,"Unnamed: 40":null},{abstract:"For automatic screening of eye diseases, it is very important to segment regions corresponding to the different eye-parts from the fundal images. A challenging task, in this context, is to segment the network of blood vessels. The blood vessel network runs all along the fundal image, varying in density and fineness of structure. Besides, changes in illumination, color and pathology also add to the difficulties in blood vessel segmentation. In this paper, we propose segmentation of blood vessels from fundal images in the deep learning framework, without any pre-processing. A deep convolutional network, consisting of 8 convolutional layers and 3 pooling layers in between, is used to achieve the segmentation. In this work, a Convolutional Neural Network currently in use for semantic image segmentation is customized for blood vessel segmentation by replacing the output layer with a convolutional layer of kernel size 1 \xd7 1 which generates the final segmented image. The output of CNN is a gray scale image and is binarized by thresholding. The proposed method is applied on 2 publicly available databases DRIVE and HRF (capturing diversity in image resolution), consisting of healthy and diseased fundal images boosted by mirror versions of the originals. The method results in an accuracy of 93.94% and yields 0.894 as area under the ROC curve on the test data comprising of randomly selected 23 images from HRF dataset. The promising results illustrate generalizability of the proposed approach.",authors:"S. K. Vengalil,  N. Sinha,  S. S. S. Kruthiventi,  R. V. Babu",description:"2016 International Conference on Signal Processing and Communications (SPCOM). 2016",doi:"10.1109/SPCOM.2016.7746702",duplicate:!1,email:["sunilkumar.vengalil@iiitb.org","neelam.sinha@iiitb.ac.in","kssaisrinivas@gmail.com","venky@cds.iisc.ac.in"],email_new:["sunilkumar.vengalil@iiitb.org","neelam.sinha@iiitb.ac.in","kssaisrinivas@gmail.com","venky@cds.iisc.ac.in"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7746702",key:"afa5c419-2eb3-41b6-b4d3-8cd23d8c6c45",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"customizing cnns for blood vessel segmentation from fundus images",tools:["caffe"],year:2016,id:"afa5c419-2eb3-41b6-b4d3-8cd23d8c6c45.pdf",use:1,domain:"ophthalmology",task_1:"segmentation",task_2:"0",data_type:"fundus photography",data_type_1:"0",data_type_2:"0",location:"eye",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://www5.cs.fau.de/research/data/fundus-images/",data_link_2:"http://www.isi.uu.nl/Research/Databases/DRIVE/",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"https://bitbucket.org/deeplab/deeplab-public/",based_on_2_name:"deeplab",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"India",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 International Conference on Signal Processing and Communications (SPCOM)",public:0,"Unnamed: 40":null},{abstract:"The morphology of glands has been used routinely by pathologists to assess the malignancy degree of adenocarcinomas. Accurate segmentation of glands from histology images is a crucial step to obtain reliable morphological statistics for quantitative diagnosis. In this paper, we proposed an efficient deep contour-aware network (DCAN) to solve this challenging problem under a unified multi-task learning framework. In the proposed network, multi-level contextual features from the hierarchical architecture are explored with auxiliary supervision for accurate gland segmentation. When incorporated with multi-task regularization during the training, the discriminative capability of intermediate features can be further improved. Moreover, our network can not only output accurate probability maps of glands, but also depict clear contours simultaneously for separating clustered objects, which further boosts the gland segmentation performance. This unified framework can be efficient when applied to large-scale histopathological data without resorting to additional steps to generate contours based on low-level cues for post-separating. Our method won the 2015 MICCAI Gland Segmentation Challenge out of 13 competitive teams, surpassing all the other methods by a significant margin.",authors:"H. Chen,  X. Qi,  L. Yu,  P. A. Heng",description:"2016 IEEE Conference on Computer Vision and Pattern Recognition (CVPR). 2016",doi:"10.1109/CVPR.2016.273",duplicate:!1,email:["hchen@cse.cuhk.edu.hk","xjqi@cse.cuhk.edu.hk","lqyu@cse.cuhk.edu.hk","pheng@cse.cuhk.edu.hk"],email_new:["hchen@cse.cuhk.edu.hk","xjqi@cse.cuhk.edu.hk","lqyu@cse.cuhk.edu.hk","pheng@cse.cuhk.edu.hk"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7780642",key:"717f3d26-d55a-44da-8e6b-27621e1a3266",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"dcan: deep contour-aware networks for accurate gland segmentation",tools:["caffe"],year:2016,id:"717f3d26-d55a-44da-8e6b-27621e1a3266.pdf",use:1,domain:"pathology",task_1:"segmentation",task_2:"0",data_type:"histapathology",data_type_1:"0",data_type_2:"0",location:"gland",location_1:"0",method_1:"fullycnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://warwick.ac.uk/fac/sci/dcs/research/tia/glascontest/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/tensorflow/models/tree/master/research/deeplab",based_on_1_name:"deeplab",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Hong Kong",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE Conference on Computer Vision and Pattern Recognition",public:1,"Unnamed: 40":null},{abstract:"INTRODUCTION: To develop real-time image processing for image-guided radiotherapy, we evaluated several neural network models for use with different imaging modalities, including X-ray fluoroscopic image denoising. MATERIALS: Setup images of prostate cancer patients were acquired with two oblique X-ray fluoroscopic units. Two types of residual network were designed: a convolutional autoencoder (rCAE) and a convolutional neural network (rCNN). We changed the convolutional kernel size and number of convolutional layers for both networks, and the number of pooling and upsampling layers for rCAE. The ground-truth image was applied to the contrast-limited adaptive histogram equalization (CLAHE) method of image processing. Network models were trained to keep the quality of the output image close to that of the ground-truth image from the input image without image processing. For image denoising evaluation, noisy input images were used for the training. RESULTS: More than 6 convolutional layers with convolutional kernels &gt;5\xd75 improved image quality. However, this did not allow real-time imaging. After applying a pair of pooling and upsampling layers to both networks, rCAEs with &gt;3 convolutions each and rCNNs with &gt;12 convolutions with a pair of pooling and upsampling layers achieved real-time processing at 30 frames per second (fps) with acceptable image quality. CONCLUSIONS: Use of our suggested network achieved real-time image processing for contrast enhancement and image denoising by the use of a conventional modern personal computer. Copyright \xa9 2017 Associazione Italiana di Fisica Medica. Published by Elsevier Ltd. All rights reserved.",authors:"Mori S.",description:"Phys Med.  2017",doi:null,duplicate:!1,email:["mori.shinichiro@qst.go.jp"],email_new:["mori.shinichiro@qst.go.jp"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28743618",key:"3b168276-17e1-4dc7-91e9-d6dcb969b3e6",keyok:1,keywords:"Computer-assisted; Fluoroscopy; Image processing; Neural network model; Radiation therapy",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"deep architecture neural network-based real-time image processing for image-guided radiotherapy",tools:["caffe"],year:2017,id:"3b168276-17e1-4dc7-91e9-d6dcb969b3e6.pdf",use:1,domain:"image-guided radiotherapy",task_1:"denoising",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"prostate",location_1:"0",method_1:"rcae",method_2:"rcnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"42",training:0,validation:0,testing:0,cross_validation:0,country_1:"Japan",country_2:"0",country_3:"0",journal:"Physica Medica",impact_factor:1.99,conference:"0",public:0,"Unnamed: 40":null},{abstract:"We propose a simple, efficient and effective method using deep convolutional activation features (CNNs) to achieve stat- of-the-art classification and segmentation for the MICCAI 2014 Brain Tumor Digital Pathology Challenge. Common traits of such medical image challenges are characterized by large image dimensions (up to the gigabyte size of an image), a limited amount of training data, and significant clinical feature representations. To tackle these challenges, we transfer the features extracted from CNNs trained with a very large general image database to the medical image challenge. In this paper, we used CNN activations trained by ImageNet to extract features (4096 neurons, 13.3% active). In addition, feature selection, feature pooling, and data augmentation are used in our work. Our system obtained 97.5% accuracy on classification and 84% accuracy on segmentation, demonstrating a significant performance gain over other participating teams.",authors:"Y. Xu,  Z. Jia,  Y. Ai,  F. Zhang,  M. Lai,  E. I. C. Chang",description:"2015 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP). 2015",doi:"10.1109/ICASSP.2015.7178109",duplicate:!1,email:["xuyan04@gmail.com","lmd@zju.edu.cn","eric.chang@microsoft.com","v-zhijia@microsoft.com","v-yuai@microsoft.com","v-fangz@microsoft.com"],email_new:["xuyan04@gmail.com","lmd@zju.edu.cn","eric.chang@microsoft.com","v-zhijia@microsoft.com","v-yuai@microsoft.com","v-fangz@microsoft.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7178109",key:"6a3fa06b-cd73-4ee2-94aa-942ee6a5a28a",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"deep convolutional activation features for large scale brain tumor histopathology image classification and segmentation",tools:["caffe"],year:2015,id:"6a3fa06b-cd73-4ee2-94aa-942ee6a5a28a.pdf",use:1,domain:"pathology",task_1:"classification",task_2:"segmentation",data_type:"histapathology",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://cancergenome.nih.gov/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf",based_on_1_name:"alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2015 IEEE International Conference on Acoustics, Speech and Signal Processing",public:0,"Unnamed: 40":null},{abstract:"We propose a fully automatic method for segmenting myelin and axon from microscopy images of excised mouse spinal cord based on Convolutional Neural Networks (CNNs) and Deep Convolutional Encoder-Decoder. We compare a two-class CNN, multi-class CNN, and multi-class deep convolutional encoder-decoder with traditional methods. The CNN method gives a pixel-wise accuracy of 79.7% whereas an Active Contour method gives 59.4%. The encoder-decoder shows better performance with 82.3% and noticeably shorter classification time than CNN methods.",authors:"R. Mesbah,  B. McCane,  S. Mills",description:"2016 International Conference on Image and Vision Computing New Zealand (IVCNZ). 2016",doi:"10.1109/IVCNZ.2016.7804455",duplicate:!1,email:["rassoul@cs.otago.ac.nz","mccane@cs.otago.ac.nz","steven@cs.otago.ac.nz"],email_new:["rassoul@cs.otago.ac.nz","mccane@cs.otago.ac.nz","steven@cs.otago.ac.nz"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7804455",key:"04327d42-c350-4022-901a-6e46d79139bc",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"deep convolutional encoder-decoder for myelin and axon segmentation",tools:["torch"],year:2016,id:"04327d42-c350-4022-901a-6e46d79139bc.pdf",use:1,domain:"microscopy",task_1:"segmentation",task_2:"0",data_type:"microscopy",data_type_1:"0",data_type_2:"0",location:"mouse",location_1:"0",method_1:"cnn",method_2:"dced",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"35",training:34,validation:0,testing:1,cross_validation:1,country_1:"New Zealand",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 International Conference on Image and Vision Computing New Zealand",public:0,"Unnamed: 40":null},{abstract:"PURPOSE: To describe and evaluate a new fully automated musculoskeletal tissue segmentation method using deep convolutional neural network (CNN) and three-dimensional (3D) simplex deformable modeling to improve the accuracy and efficiency of cartilage and bone segmentation within the knee joint. METHODS: A fully automated segmentation pipeline was built by combining a semantic segmentation CNN and 3D simplex deformable modeling. A CNN technique called SegNet was applied as the core of the segmentation method to perform high resolution pixel-wise multi-class tissue classification. The 3D simplex deformable modeling refined the output from SegNet to preserve the overall shape and maintain a desirable smooth surface for musculoskeletal structure. The fully automated segmentation method was tested using a publicly available knee image data set to compare with currently used state-of-the-art segmentation methods. The fully automated method was also evaluated on two different data sets, which include morphological and quantitative MR images with different tissue contrasts. RESULTS: The proposed fully automated segmentation method provided good segmentation performance with segmentation accuracy superior to most of state-of-the-art methods in the publicly available knee image data set. The method also demonstrated versatile segmentation performance on both morphological and quantitative musculoskeletal MR images with different tissue contrasts and spatial resolutions. CONCLUSION: The study demonstrates that the combined CNN and 3D deformable modeling approach is useful for performing rapid and accurate cartilage and bone segmentation within the knee joint. The CNN has promising potential applications in musculoskeletal imaging. Magn Reson Med, 2017. \xa9 2017 International Society for Magnetic Resonance in Medicine.",authors:"Liu F, Zhou Z, Jang H, Samsonov A, Zhao G, Kijowski R.",description:"Magn Reson Med.  2017",doi:null,duplicate:!1,email:["fliu37@wisc.edu"],email_new:["fliu37@wisc.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28733975",key:"5adf95df-b744-476a-9738-34320b8a88e1",keyok:1,keywords:"CNN; MRI; deep learning; deformable model; musculoskeletal imaging; segmentation",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"deep convolutional neural network and 3d deformable approach for tissue segmentation in musculoskeletal magnetic resonance imaging",tools:["caffe"],year:2017,id:"5adf95df-b744-476a-9738-34320b8a88e1.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"knee",location_1:"0",method_1:"ced",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"www.ski10.org",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"https://lmb.informatik.uni-freiburg.de/people/ronneber/u-net/",based_on_2_name:"unet",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"Magnetic Resonance in Medicine",impact_factor:3.924,conference:"0",public:0,"Unnamed: 40":null},{abstract:"The goal of this study is to evaluate the efficacy of deep convolutional neural networks (DCNNs) in differentiating subtle, intermediate, and more obvious image differences in radiography. Three different datasets were created, which included presence/absence of the endotracheal (ET) tube (n\xa0=\xa0300), low/normal position of the ET tube (n\xa0=\xa0300), and chest/abdominal radiographs (n\xa0=\xa0120). The datasets were split into training, validation, and test. Both untrained and pre-trained deep neural networks were employed, including AlexNet and GoogLeNet classifiers, using the Caffe framework. Data augmentation was performed for the presence/absence and low/normal ET tube datasets. Receiver operating characteristic (ROC), area under the curves (AUC), and 95% confidence intervals were calculated. Statistical differences of the AUCs were determined using a non-parametric approach. The pre-trained AlexNet and GoogLeNet classifiers had perfect accuracy (AUC 1.00) in differentiating chest vs. abdominal radiographs, using only 45 training cases. For more difficult datasets, including the presence/absence and low/normal position endotracheal tubes, more training cases, pre-trained networks, and data-augmentation approaches were helpful to increase accuracy. The best-performing network for classifying presence vs. absence of an ET tube was still very accurate with an AUC of 0.99. However, for the most difficult dataset, such as low vs. normal position of the endotracheal tube, DCNNs did not perform as well, but achieved a reasonable AUC of 0.81.",authors:"Lakhani P.",description:"J Digit Imaging.  2017",doi:null,duplicate:!1,email:["Paras.lakhani@jefferson.edu"],email_new:["Paras.lakhani@jefferson.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28600640",key:"4f1ffb01-099c-4b82-b32e-3f35295de368",keyok:1,keywords:"Artificial intelligence; Artificial neural networks (ANNs); Classification; Machine learning; Radiography",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"deep convolutional neural networks for endotracheal tube position and x-ray image classification: challenges and opportunities",tools:["caffe"],year:2017,id:"4f1ffb01-099c-4b82-b32e-3f35295de368.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"chest",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"http://caffe.berkeleyvision.org/model_zoo.html",based_on_1_name:"bvlc_caffenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Journal of Digital Imaging",impact_factor:1.407,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Recently, more and more attention is drawn to the field of medical image synthesis across modalities. Among them, the synthesis of computed tomography (CT) image from T1-weighted magnetic resonance (MR) image is of great importance, although the mapping between them is highly complex due to large gaps of appearances of the two modalities. In this work, we aim to tackle this MR-to-CT synthesis by a novel deep embedding convolutional neural network (DECNN). Specifically, we generate the feature maps from MR images, and then transform these feature maps forward through convolutional layers in the network. We can further compute a tentative CT synthesis from the midway of the flow of feature maps, and then embed this tentative CT synthesis back to the feature maps. This embedding operation results in better feature maps, which are further transformed forward in DECNN. After repeat-ing this embedding procedure for several times in the network, we can eventually synthesize a final CT image in the end of the DECNN. We have validated our proposed method on both brain and prostate datasets, by also compar-ing with the state-of-the-art methods. Experimental results suggest that our DECNN (with repeated embedding op-erations) demonstrates its superior performances, in terms of both the perceptive quality of the synthesized CT image and the run-time cost for synthesizing a CT image.",authors:"Lei Xiang, Qian Wang, Dong Nie, Yu Qiao, Dinggang Shen",description:"Retrieved from arXiv. 2017",doi:null,duplicate:!1,email:["wang.qian@sjtu.edu.cn","dgshen@med.unc.edu"],email_new:["wang.qian@sjtu.edu.cn","dgshen@med.unc.edu"],fullUrl:"https://arxiv.org/abs/1709.02073",key:"f76fa072-49e3-486e-855e-c29f25d77f1e",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1709.02073.pdf",phase:1,received:0,source:"arxiv",title:"deep embedding convolutional neural network for synthesizing ct image from t1-weighted mr image",tools:["caffe"],year:2017,id:"f76fa072-49e3-486e-855e-c29f25d77f1e.pdf",use:1,domain:"radiology",task_1:"generation",task_2:"0",data_type:"sct",data_type_1:"mri",data_type_2:"0",location:"prostate",location_1:"brain",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.adni-info.org/Scientists/ADNIData.html",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"USA",country_3:"Korea",journal:"medical image analysis",impact_factor:4.188,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Purpose: To evaluate the efficacy of deep convolutional neural networks (DCNNs) for detecting tuberculosis (TB) on chest radiographs. Materials and Methods: Four deidentified HIPAA-compliant datasets were used in this study that were exempted from review by the institutional review board, which consisted of 1007 posteroanterior chest radiographs. The datasets were split into training (68.0%), validation (17.1%), and test (14.9%). Two different DCNNs, AlexNet and GoogLeNet, were used to classify the images as having manifestations of pulmonary TB or as healthy. Both untrained and pretrained networks on ImageNet were used, and augmentation with multiple preprocessing techniques. Ensembles were performed on the best-performing algorithms. For cases where the classifiers were in disagreement, an independent board-certified cardiothoracic radiologist blindly interpreted the images to evaluate a potential radiologist-augmented workflow. Receiver operating characteristic curves and areas under the curve (AUCs) were used to assess model performance by using the DeLong method for statistical comparison of receiver operating characteristic curves. Results: The best-performing classifier had an AUC of 0.99, which was an ensemble of the AlexNet and GoogLeNet DCNNs. The AUCs of the pretrained models were greater than that of the untrained models (P &lt; .001). Augmenting the dataset further increased accuracy (P values for AlexNet and GoogLeNet were .03 and .02, respectively). The DCNNs had disagreement in 13 of the 150 test cases, which were blindly reviewed by a cardiothoracic radiologist, who correctly interpreted all 13 cases (100%). This radiologist-augmented approach resulted in a sensitivity of 97.3% and specificity 100%. Conclusion: Deep learning with DCNNs can accurately classify TB at chest radiography with an AUC of 0.99. A radiologist-augmented approach for cases where there was disagreement among the classifiers further improved accuracy. \xa9 RSNA, 2017.",authors:"Lakhani P, Sundaram B.",description:"Radiology.  2017",doi:null,duplicate:!1,email:["paras.lakhani@jefferson.edu"],email_new:["paras.lakhani@jefferson.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28436741",key:"80262690-ca74-4789-b58f-d648f35b39b8",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"deep learning at chest radiography: automated classification of pulmonary tuberculosis by using convolutional neural networks",tools:["digits","caffe"],year:2017,id:"80262690-ca74-4789-b58f-d648f35b39b8.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"chest",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://ceb.nlm.nih.gov/repositories/tuberculosis-chest-x-ray-image-data-sets/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf",based_on_1_name:"alexnet",based_on_2:"https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet",based_on_2_name:"bvlc_googlelenet",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Radiology",impact_factor:7.297,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Objective: The advent of Electronic Medical Records (EMR) with large electronic imaging databases along with advances in deep neural networks with machine learning has provided a unique opportunity to achieve milestones in automated image analysis. Optical coherence tomography (OCT) is the most commonly obtained imaging modality in ophthalmology and represents a dense and rich dataset when combined with labels derived from the EMR. We sought to determine if deep learning could be utilized to distinguish normal OCT images from images from patients with Age-related Macular Degeneration (AMD). Methods: Automated extraction of an OCT imaging database was performed and linked to clinical endpoints from the EMR. OCT macula scans were obtained by Heidelberg Spectralis, and each OCT scan was linked to EMR clinical endpoints extracted from EPIC. The central 11 images were selected from each OCT scan of two cohorts of patients: normal and AMD. Cross-validation was performed using a random subset of patients. Area under receiver operator curves (auROC) were constructed at an independent image level, macular OCT level, and patient level. Results: Of an extraction of 2.6 million OCT images linked to clinical datapoints from the EMR, 52,690 normal and 48,312 AMD macular OCT images were selected. A deep neural network was trained to categorize images as either normal or AMD. At the image level, we achieved an auROC of 92.78% with an accuracy of 87.63%. At the macula level, we achieved an auROC of 93.83% with an accuracy of 88.98%. At a patient level, we achieved an auROC of 97.45% with an accuracy of 93.45%. Peak sensitivity and specificity with optimal cutoffs were 92.64% and 93.69% respectively. Conclusions: Deep learning techniques are effective for classifying OCT images. These findings have important implications in utilizing OCT in automated screening and computer aided diagnosis tools.",authors:"Cecilia S. Lee, Doug M. Baughman, Aaron Y. Lee",description:"4 Figures, 1 Table. 2016",doi:null,duplicate:!1,email:["leeay@uw.edu"],email_new:["leeay@uw.edu"],fullUrl:"https://arxiv.org/abs/1612.04891",key:"c15e6d64-6572-4f5a-b857-55094921a7bd",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1612.04891.pdf",phase:1,received:0,source:"arxiv",title:"deep learning is effective for the classification of oct images of normal versus age-related macular degeneration",tools:["caffe"],year:2016,id:"c15e6d64-6572-4f5a-b857-55094921a7bd.pdf",use:1,domain:"ophthalmology",task_1:"classification",task_2:"0",data_type:"oct",data_type_1:"0",data_type_2:"0",location:"eye",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"Ophthalmology Retina",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Digital reconstruction, or tracing, of 3-D neuron structure from microscopy images is a critical step toward reversing engineering the wiring and anatomy of a brain. Despite a number of prior attempts, this task remains very challenging, especially when images are contaminated by noises or have discontinued segments of neurite patterns. An approach for addressing such problems is to identify the locations of neuronal voxels using image segmentation methods, prior to applying tracing or reconstruction techniques. This preprocessing step is expected to remove noises in the data, thereby leading to improved reconstruction results. In this paper, we proposed to use 3-D convolutional neural networks (CNNs) for segmenting the neuronal microscopy images. Specifically, we designed a novel CNN architecture, that takes volumetric images as the inputs and their voxel-wise segmentation maps as the outputs. The developed architecture allows us to train and predict using large microscopy images in an end-to-end manner. We evaluated the performance of our model on a variety of challenging 3-D microscopy images from different organisms. Results showed that the proposed methods improved the tracing performance significantly when combined with different reconstruction algorithms.",authors:"Li R, Zeng T, Peng H, Ji S.",description:"IEEE Trans Med Imaging.  2017",doi:null,duplicate:!1,email:["tzeng@eecs.wsu.edu","sji@@eecs.wsu.edu","hanchuanp@alleninstitute.org"],email_new:["tzeng@eecs.wsu.edu","sji@@eecs.wsu.edu","hanchuanp@alleninstitute.org"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28287966",key:"d932ab7c-0ece-4f62-be87-204bf6f3982a",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"deep learning segmentation of optical microscopy images improves 3-d neuron reconstruction",tools:["caffe"],year:2017,id:"d932ab7c-0ece-4f62-be87-204bf6f3982a.pdf",use:1,domain:"microscopy",task_1:"segmentation",task_2:"0",data_type:"microscopy",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"fullycnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"https://alleninstitute.org/bigneuron/about/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/google/inception",based_on_1_name:"google_inception",based_on_2:"https://github.com/KaimingHe/deep-residual-networks",based_on_2_name:"deep_residual_networks",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Motivation: Progress in 3D electron microscopy (EM) imaging has greatly facilitated neuroscience research in high-throughput data acquisition. Correspondingly, high-throughput automated image analysis methods are necessary to work on par with the speed of data being produced. One such example is the need for automated EM image segmentation for neurite reconstruction. However, the efficiency and reliability of current methods are still lagging far behind human performance. Results: Here, we propose DeepEM3D, a deep learning method for segmenting 3D anisotropic brain electron microscopy images. In this method, the deep learning model can efficiently build feature representation and incorporate sufficient multi-scale contextual information. We propose employing a combination of novel boundary map generation methods with optimized model ensembles to address the inherent challenges of segmenting anisotropic images. We evaluated our method by participating in the 3D segmentation of neurites in EM images (SNEMI3D) challenge. Our submission is ranked #1 on the current leaderboard as of Oct 15, 2016. More importantly, our result was very close to human-level performance in terms of the challenge evaluation metric: namely, a Rand error of 0.06015 versus the human value of 0.05998. Availability and Implementation: The code is available at https://github.com/divelab/deepem3d/. Contact: sji@eecs.wsu.edu. Supplementary information: Supplementary data are available at Bioinformatics online.",authors:"Zeng T, Wu B, Ji S.",description:"Bioinformatics.  2017",doi:null,duplicate:!1,email:["sji@eecs.wsu.edu"],email_new:["sji@eecs.wsu.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28379412",key:"a0f317d8-a596-4a3f-b867-846499ba1b97",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"deepem3d: approaching human-level performance on 3d anisotropic em image segmentation",tools:["caffe"],year:2017,id:"a0f317d8-a596-4a3f-b867-846499ba1b97.pdf",use:1,domain:"microscopy",task_1:"segmentation",task_2:"0",data_type:"em",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://brainiac2.mit.edu/SNEMI3D/user/register",data_link_2:"0",data_ok:null,code_public:1,code_link:"https://github.com/divelab/deepem3d/",code_ok:null,pseudocode:null,based_on_1:"https://github.com/KaimingHe/deep-residual-networks",based_on_1_name:"deep_residual_networks",based_on_2:"https://github.com/google/inception",based_on_2_name:"google_inception",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Bioinformatics",impact_factor:7.307,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Automation-assisted cervical screening via Pap smear or liquid-based cytology (LBC) is a highly effective cell imaging based cancer detection tool, where cells are partitioned into \u201dabnormal\u201d and \u201dnormal\u201d categories. However, the success of most traditional classification methods relies on the presence of accurate cell segmentations. Despite sixty years of research in this field, accurate segmentation remains a challenge in the presence of cell clusters and pathologies. Moreover, previous classification methods are only built upon the extraction of hand-crafted features, such as morphology and texture. This paper addresses these limitations by proposing a method to directly classify cervical cells \u2013 without prior segmentation \u2013 based on deep features, using convolutional neural networks (ConvNets). First, the ConvNet is pre-trained on a natural image dataset. It is subsequently fine-tuned on a cervical cell dataset consisting of adaptively re-sampled image patches coarsely centered on the nuclei. In the testing phase, aggregation is used to average the prediction scores of a similar set of image patches. The proposed method is evaluated on both Pap smear and LBC datasets. Results show that our method outperforms previous algorithms in classification accuracy (98.3%), area under the curve (AUC) (0.99) values, and especially specificity (98.3%), when applied to the Herlev benchmark Pap smear dataset and evaluated using five-fold cross-validation. Similar superior performances are also achieved on the HEMLBC (H&E stained manual LBC) dataset. Our method is promising for the development of automation-assisted reading systems in primary cervical screening.",authors:"L. Zhang,  L. Lu,  I. Nogues,  R. Summers,  S. Liu,  J. Yao",description:"IEEE Journal of Biomedical and Health Informatics. 2017",doi:"10.1109/JBHI.2017.2705583",duplicate:!1,email:["ling.zhang3@nih.gov","jyao@nih.gov"],email_new:["ling.zhang3@nih.gov","jyao@nih.gov"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7932065",key:"4b5193c9-e8bf-4b0a-9ce4-5cae475dd1b8",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"deeppap: deep convolutional networks for cervical cell classification",tools:["caffe","convnet"],year:2017,id:"4b5193c9-e8bf-4b0a-9ce4-5cae475dd1b8.pdf",use:1,domain:"cytology",task_1:"classification",task_2:"0",data_type:"pap smear",data_type_1:"0",data_type_2:"0",location:"cervix",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://mde-lab.aegean.gr/downloads",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_reference_caffenet",based_on_1_name:"bvlc_caffenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"China",country_3:"0",journal:"IEEE Journal of Biomedical and Health Informatics",impact_factor:3.451,conference:"0",public:0,"Unnamed: 40":null},{abstract:"The early diagnosis of Alzheimer's Disease (AD) and its prodromal form, Mild Cognitive Impairment (MCI), has been the subject of extensive research in recent years. Some recent studies have shown promising results in the diagnosis of AD and MCI using structural Magnetic Resonance Imaging (MRI) scans. In this paper, we propose the use of a Convolutional Neural Network (CNN) in the detection of AD and MCI. In particular, we modified the 16-layered VGGNet for the 3-way classification of AD, MCI and Healthy Controls (HC) on the Alzheimer's Disease Neuroimaging Initiative (ADNI) dataset achieving an overall accuracy of 91.85% and outperforming several classifiers from other studies.",authors:"C. D. Billones,  O. J. L. D. Demetria,  D. E. D. Hostallero,  P. C. Naval",description:"2016 IEEE Region 10 Conference (TENCON). 2016",doi:"10.1109/TENCON.2016.7848755",duplicate:!1,email:["pcnaval@dcs.upd.edu.ph"],email_new:["pcnaval@dcs.upd.edu.ph"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7848755",key:"279c6394-f97b-4307-99d8-71d593434033",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"demnet: a convolutional neural network for the detection of alzheimer's disease and mild cognitive impairment",tools:["digits","caffe"],year:2016,id:"279c6394-f97b-4307-99d8-71d593434033.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"adni.loni.usc.edu",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:"900",training:630,validation:0,testing:270,cross_validation:0,country_1:"Philippines",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE Region 10 Conference (TENCON)",public:0,"Unnamed: 40":null},{abstract:"PURPOSE: Colitis refers to inflammation of the inner lining of the colon that is frequently associated with infection and allergic reactions. In this paper, we propose deep convolutional neural networks methods for lesion-level colitis detection and a support vector machine (SVM) classifier for patient-level colitis diagnosis on routine abdominal CT scans. METHODS: The recently developed Faster Region-based Convolutional Neural Network (Faster RCNN) is utilized for lesion-level colitis detection. For each 2D slice, rectangular region proposals are generated by region proposal networks (RPN). Then, each region proposal is jointly classified and refined by a softmax classifier and bounding-box regressor. Two convolutional neural networks, eight layers of ZF net and 16 layers of VGG net are compared for colitis detection. Finally, for each patient, the detections on all 2D slices are collected and a SVM classifier is applied to develop a patient-level diagnosis. We trained and evaluated our method with 80 colitis patients and 80 normal cases using 4\xa0\xd7\xa04-fold cross validation. RESULTS: For lesion-level colitis detection, with ZF net, the mean of average precisions (mAP) were 48.7% and 50.9% for RCNN and Faster RCNN, respectively. The detection system achieved sensitivities of 51.4% and 54.0% at two false positives per patient for RCNN and Faster RCNN, respectively. With VGG net, Faster RCNN increased the mAP to 56.9% and increased the sensitivity to 58.4% at two false positive per patient. For patient-level colitis diagnosis, with ZF net, the average areas under the ROC curve (AUC) were 0.978\xa0\xb1\xa00.009 and 0.984\xa0\xb1\xa00.008 for RCNN and Faster RCNN method, respectively. The difference was not statistically significant with P\xa0=\xa00.18. At the optimal operating point, the RCNN method correctly identified 90.4% (72.3/80) of the colitis patients and 94.0% (75.2/80) of normal cases. The sensitivity improved to 91.6% (73.3/80) and the specificity improved to 95.0% (76.0/80) for the Faster RCNN method. With VGG net, Faster RCNN increased the AUC to 0.986\xa0\xb1\xa00.007 and increased the diagnosis sensitivity to 93.7% (75.0/80) and specificity was unchanged at 95.0% (76.0/80). CONCLUSION: Colitis detection and diagnosis by deep convolutional neural networks is accurate and promising for future clinical application. Published 2017. This article is a U.S. Government work and is in the public domain in the USA.",authors:"Liu J, Wang D, Lu L, Wei Z, Kim L, Turkbey EB, Sahiner B, Petrick NA, Summers RM.",description:"Med Phys.  2017",doi:null,duplicate:!1,email:["rms@nih.gov"],email_new:["rms@nih.gov"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28594460",key:"53aaa619-cfc3-4fa7-93ad-a399933683d3",keyok:1,keywords:"RPN; Region-based CNN; colitis detection; colitis diagnosis",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"detection and diagnosis of colitis on computed tomography using deep convolutional neural networks",tools:["caffe"],year:2017,id:"53aaa619-cfc3-4fa7-93ad-a399933683d3.pdf",use:1,domain:"radiology",task_1:"detection",task_2:"diagnosis",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"colon",location_1:"0",method_1:"regioncnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"medical physics ",impact_factor:2.635,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Video understanding of robot-assisted surgery (RAS) videos is an active research area. Modeling the gestures and skill level of surgeons presents an interesting problem. The insights drawn may be applied in effective skill acquisition, objective skill assessment, real-time feedback, and human-robot collaborative surgeries. We propose a solution to the tool detection and localization open problem in RAS video understanding, using a strictly computer vision approach and the recent advances of deep learning. We propose an architecture using multimodal convolutional neural networks for fast detection and localization of tools in RAS videos. To the best of our knowledge, this approach will be the first to incorporate deep neural networks for tool detection and localization in RAS videos. Our architecture applies a region proposal network (RPN) and a multimodal two stream convolutional network for object detection to jointly predict objectness and localization on a fusion of image and temporal motion cues. Our results with an average precision of 91% and a mean computation time of 0.1 s per test frame detection indicate that our study is superior to conventionally used methods for medical imaging while also emphasizing the benefits of using RPN for precision and efficiency. We also introduce a new data set, ATLAS Dione, for RAS video understanding. Our data set provides video data of ten surgeons from Roswell Park Cancer Institute, Buffalo, NY, USA, performing six different surgical tasks on the daVinci Surgical System (dVSS) with annotations of robotic tools per frame.",authors:"D. Sarikaya,  J. J. Corso,  K. A. Guru",description:"IEEE Transactions on Medical Imaging. 2017",doi:"10.1109/TMI.2017.2665671",duplicate:!1,email:["duy-gusar@buffalo.edu"],email_new:["duy-gusar@buffalo.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7847313",key:"e911aadd-df2d-46d4-8a06-9b0c35ff2e5b",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"detection and localization of robotic tools in robot-assisted surgery videos using deep neural networks for region proposal and detection",tools:["caffe"],year:2017,id:"e911aadd-df2d-46d4-8a06-9b0c35ff2e5b.pdf",use:1,domain:"robotics",task_1:"detection",task_2:"localization",data_type:"video",data_type_1:"0",data_type_2:"0",location:"multi-organ",location_1:"0",method_1:"rcnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:1,data_link_1:"https://www.roswellpark.org/education/atlas-program/research-development/dione-dataset",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/rbgirshick/py-faster-rcnn",based_on_1_name:"faster_rcnn",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"BACKGROUND AND OBJECTIVE: Diabetic retinopathy is one of the leading disabling chronic diseases and one of the leading causes of preventable blindness in developed world. Early diagnosis of diabetic retinopathy enables timely treatment and in order to achieve it a major effort will have to be invested into automated population screening programs. Detection of exudates in color fundus photographs is very important for early diagnosis of diabetic retinopathy. METHODS: We use deep convolutional neural networks for exudate detection. In order to incorporate high level anatomical knowledge about potential exudate locations, output of the convolutional neural network is combined with the output of the optic disc detection and vessel detection procedures. RESULTS: In the validation step using a manually segmented image database we obtain a maximum F1 measure of 0.78. CONCLUSIONS: As manually segmenting and counting exudate areas is a tedious task, having a reliable automated output, such as automated segmentation using convolutional neural networks in combination with other landmark detectors, is an important step in creating automated screening programs for early detection of diabetic retinopathy. Copyright \xa9 2016 Elsevier Ireland Ltd. All rights reserved.",authors:"Prenta\u0161i\u0107 P, Lon\u010dari\u0107 S.",description:"Comput Methods Programs Biomed.  2016",doi:null,duplicate:!1,email:["pavle.prentasic@fer.hr"],email_new:["pavle.prentasic@fer.hr"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28110732",key:"15de50b5-be30-42fc-b6e0-ab0f0770d7d0",keyok:1,keywords:"Convolutional neural networks; Diabetic retinopathy; Exudates; Fundus photographs; Machine learning",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"detection of exudates in fundus photographs using deep neural networks and anatomical landmark detection fusion",tools:["caffe"],year:2016,id:"15de50b5-be30-42fc-b6e0-ab0f0770d7d0.pdf",use:1,domain:"ophthalmology",task_1:"detection",task_2:"0",data_type:"fundus photography",data_type_1:"0",data_type_2:"0",location:"eye",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://ieeexplore.ieee.org/document/6703830/",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"50",training:0,validation:0,testing:0,cross_validation:1,country_1:"Croatia",country_2:"0",country_3:"0",journal:"Computer Methods and Programs in Biomedicine",impact_factor:2.503,conference:"0",public:0,"Unnamed: 40":null},{abstract:"BACKGROUND: Ongoing research into inflammatory conditions raises an increasing need to evaluate immune cells in histological sections in biologically relevant regions of interest (ROIs). Herein, we compare different approaches to automatically detect lobular structures in human normal breast tissue in digitized whole slide images (WSIs). This automation is required to perform objective and consistent quantitative studies on large data sets. METHODS: In normal breast tissue from nine healthy patients immunohistochemically stained for different markers, we evaluated and compared three different image analysis methods to automatically detect lobular structures in WSIs: (1) a bottom-up approach using the cell-based data for subsequent tissue level classification, (2) a top-down method starting with texture classification at tissue level analysis of cell densities in specific ROIs, and (3) a direct texture classification using deep learning technology. RESULTS: All three methods result in comparable overall quality allowing automated detection of lobular structures with minor advantage in sensitivity (approach 3), specificity (approach 2), or processing time (approach 1). Combining the outputs of the approaches further improved the precision. CONCLUSIONS: Different approaches of automated ROI detection are feasible and should be selected according to the individual needs of biomarker research. Additionally, detected ROIs could be used as a basis for quantification of immune infiltration in lobular structures. Copyright \xa9 2016 Elsevier Ltd. All rights reserved.",authors:"Apou G, Schaadt NS, Naegel B, Forestier G, Sch\xf6nmeyer R, Feuerhake F, Wemmert C, Grote A.",description:"Comput Biol Med.  2016",doi:null,duplicate:!1,email:["gapou@unistra.fr"],email_new:["gapou@unistra.fr"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/27209271",key:"48752b7a-3043-4a6f-ae1c-49f1d134b915",keyok:1,keywords:"Convolutional neural network; Digital histopathology; Image analysis; Normal breast lobule; Whole slide image",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"detection of lobular structures in normal breast tissue",tools:["caffe"],year:2016,id:"48752b7a-3043-4a6f-ae1c-49f1d134b915.pdf",use:1,domain:"pathology",task_1:"detection",task_2:"0",data_type:"wsi",data_type_1:"0",data_type_2:"0",location:"breast",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"9",training:0,validation:0,testing:0,cross_validation:1,country_1:"Germany",country_2:"France",country_3:"0",journal:"Computers in Biology and Medicine",impact_factor:1.836,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Cardiac indices estimation is of great importance during identification and diagnosis of cardiac disease in clinical routine. However, estimation of multitype cardiac indices with consistently reliable and high accuracy is still a great challenge due to the high variability of cardiac structures and complexity of temporal dynamics in cardiac MR sequences. While efforts have been devoted into cardiac volumes estimation through feature engineering followed by a independent regression model, these methods suffer from the vulnerable feature representation and incompatible regression model. In this paper, we propose a semi-automated method for multitype cardiac indices estimation. After manual labelling of two landmarks for ROI cropping, an integrated deep neural network Indices-Net is designed to jointly learn the representation and regression models. It comprises two tightly-coupled networks: a deep convolution autoencoder (DCAE) for cardiac image representation, and a multiple output convolution neural network (CNN) for indices regression. Joint learning of the two networks effectively enhances the expressiveness of image representation with respect to cardiac indices, and the compatibility between image representation and indices regression, thus leading to accurate and reliable estimations for all the cardiac indices. When applied with five-fold cross validation on MR images of 145 subjects, Indices-Net achieves consistently low estimation error for LV wall thicknesses (1.440.71mm) and areas of cavity and myocardium (204133mm2). It outperforms, with significant error reductions, segmentation method (55.1% and 17.4%) and two-phase direct volume-only methods (12.7% and 14.6%) for wall thicknesses and areas, respectively. These advantages endow the proposed method a great potential in clinical cardiac function assessment",authors:"W. Xue,  A. Islam,  M. Bhaduri,  S. Li",description:"IEEE Transactions on Medical Imaging. 2017",doi:"10.1109/TMI.2017.2709251",duplicate:!1,email:["slishuo@gmail.com"],email_new:["slishuo@gmail.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7934404",key:"d402996b-007f-414f-b190-0658dd9a4e78",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"direct multitype cardiac indices estimation via joint representation and regression learning",tools:["caffe"],year:2017,id:"d402996b-007f-414f-b190-0658dd9a4e78.pdf",use:1,domain:"radiology",task_1:"regression",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"heart",location_1:"0",method_1:"ced",method_2:"cnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/shelhamer/fcn.berkeleyvision.org",based_on_1_name:"bvlc_fully_convolutional_nets",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Canada",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"In the demand for protecting the increasing aged groups from heart attacks, the improvement of the mobile electrocardiogram (ECG) monitoring systems becomes significant. The limitations of the arrhythmia classification in these systems are the lack of ability to cope with motion state and the low accuracy in new users' data. This paper proposes a system which applies the impulse radio ultra wideband radar data as additional information to assist the arrhythmia classification of ECG recordings in the slight motion state. Besides, this proposed system employs a cascade convolutional neural network to achieve an integrated analysis of ECG recordings and radar data. The experiments are implemented in the Caffe platform and the result reaches an accuracy of 88.89% in the slight motion state. It turns out that this proposed system keeps a stable accuracy of classification for normal and abnormal heartbeats in the slight motion state.",authors:"W. Yin,  X. Yang,  L. Zhang,  E. Oki",description:"IEEE Access. 2016",doi:"10.1109/ACCESS.2016.2608777",duplicate:!1,email:["ywf2014@bupt.edu.cn"],email_new:["ywf2014@bupt.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7576640",key:"85236bc2-7b11-4acb-8da5-a554a9f09f59",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"ecg monitoring system integrated with ir-uwb radar based on cnn",tools:["caffe"],year:2016,id:"85236bc2-7b11-4acb-8da5-a554a9f09f59.pdf",use:1,domain:"electrocardiography",task_1:"classification",task_2:"0",data_type:"ecg",data_type_1:"0",data_type_2:"0",location:"heart",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"IEEE Access",impact_factor:3.244,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Surgical workflow recognition has numerous potential medical applications, such as the automatic indexing of surgical video databases and the optimization of real-time operating room scheduling, among others. As a result, phase recognition has been studied in the context of several kinds of surgeries, such as cataract, neurological, and laparoscopic surgeries. In the literature, two types of features are typically used to perform this task: visual features and tool usage signals. However, the visual features used are mostly handcrafted. Furthermore, the tool usage signals are usually collected via a manual annotation process or by using additional equipment. In this paper, we propose a novel method for phase recognition that uses a convolutional neural network (CNN) to automatically learn features from cholecystectomy videos and that relies uniquely on visual information. In previous studies, it has been shown that the tool signals can provide valuable information in performing the phase recognition task. Thus, we present a novel CNN architecture, called EndoNet, that is designed to carry out the phase recognition and tool presence detection tasks in a multi-task manner. To the best of our knowledge, this is the first work proposing to use a CNN for multiple recognition tasks on laparoscopic videos. Extensive experimental comparisons to other methods show that EndoNet yields state-of-the-art results for both tasks.",authors:"Andru P. Twinanda, Sherif Shehata, Didier Mutter, Jacques Marescaux, Michel de Mathelin, Nicolas Padoy",description:"Video: this https URL. 2016",doi:null,duplicate:!1,email:["twinanda@unistra.fr"],email_new:["twinanda@unistra.fr"],fullUrl:"https://arxiv.org/abs/1602.03012",key:"c9b6fe1b-1c0d-4c8e-97d1-f8fd0919d4f6",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1602.03012.pdf",phase:1,received:0,source:"arxiv",title:"endonet: a deep architecture for recognition tasks on laparoscopic videos",tools:["caffe"],year:2016,id:"c9b6fe1b-1c0d-4c8e-97d1-f8fd0919d4f6.pdf",use:1,domain:"laparoscopy",task_1:"detection",task_2:"0",data_type:"video",data_type_1:"0",data_type_2:"0",location:"gallbladder",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:1,data_link_1:"https://endovis.grand-challenge.org/",data_link_2:"http://camma.u-strasbg.fr/datasets",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"France",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Epithelium-stroma classification is a necessary preprocessing step in histopathological image analysis. Current deep learning based recognition methods for histology data require collection of large volumes of labeled data in order to train a new neural network when there are changes to the image acquisition procedure. However, it is extremely expensive for pathologists to manually label sufficient volumes of data for each pathology study in a professional manner, which results in limitations in real-world applications. A very simple but effective deep learning method, that introduces the concept of unsupervised domain adaptation to a simple convolutional neural network (CNN), has been proposed in this paper. Inspired by transfer learning, our work assumes that the training data and testing data follow different distributions, and there is an adaptation operation to more accurately estimate the kernels in CNN in feature extraction, in order to enhance performance by transferring knowledge from labeled data in source domain to unlabeled data in target domain. The model has been evaluated using three independent public epithelium-stroma datasets by cross-dataset validations. The experimental results demonstrate that for epithelium-stroma classification, the proposed framework outperforms the state-of-the-art deep neural network model, and it also achieves better performance than other existing deep domain adaptation methods. The proposed model can be considered to be a better option for real-world applications in histopathological image analysis, since there is no longer a requirement for large-scale labeled data in each specified domain.",authors:"Huang Y, Zheng H, Liu C, Ding X, Rohde G.",description:"IEEE J Biomed Health Inform.  2017",doi:null,duplicate:!1,email:["yhuang2010@xmu.edu.cn","dxh@xmu.edu.cn"],email_new:["yhuang2010@xmu.edu.cn","dxh@xmu.edu.cn"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28410112",key:"361c7ffa-8455-4deb-a7cf-37fc6604adcb",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"epithelium-stroma classification via convolutional neural networks and unsupervised domain adaptation in histopathological images",tools:["caffe"],year:2017,id:"361c7ffa-8455-4deb-a7cf-37fc6604adcb.pdf",use:1,domain:"pathology",task_1:"classification",task_2:"0",data_type:"histopathology",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://github.com/KaimingHe/deep-residual-networks",based_on_1_name:"deep_residual_networks",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:"1219",training:0,validation:0,testing:0,cross_validation:1,country_1:"China",country_2:"USA",country_3:"0",journal:"IEEE Journal of Biomedical and Health Informatics",impact_factor:3.451,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Computer-Aided Diagnosis (CAD) has witnessed a rapid growth over the past decade, providing a variety of automated tools for the analysis of medical images. In surgical pathology, such tools enhance the diagnosing capabilities of pathologists by allowing them to review and diagnose a larger number of cases daily. Geared towards developing such tools, the main goal of this paper is to identify useful computer vision based feature descriptors for recognizing cancerous tissues in histopathologic images. To this end, we use images of Hematoxylin & Eosin-stained microscopic sections of breast and prostate carcinomas, and myometrial leiomyosarcomas, and provide an exhaustive evaluation of several state of the art feature representations for this task. Among the various image descriptors that we chose to compare, including representations based on convolutional neural networks, Fisher vectors, and sparse codes, we found that working with covariance based descriptors shows superior performance on all three types of cancer considered. While covariance descriptors are known to be effective for texture recognition, it is the first time that they are demonstrated to be useful for the proposed task and evaluated against deep learning models. Capitalizing on Region Covariance Descriptors (RCDs), we derive a powerful image descriptor for cancerous tissue recognition termed, Covariance Kernel Descriptor (CKD), which consistently outperformed all the considered image representations. Our experiments show that using CKD lead to 92.83%, 91.51%, and 98.10% classification accuracy for the recognition of breast carcinomas, prostate carcinomas, and myometrial leiomyosarcomas, respectively.",authors:"P. Stanitsas,  A. Cherian,  Xinyan Li,  A. Truskinovsky,  V. Morellas,  N. Papanikolopoulos",description:"2016 23rd International Conference on Pattern Recognition (ICPR). 2016",doi:"10.1109/ICPR.2016.7899848",duplicate:!1,email:["papan001@umn.edu"],email_new:["papan001@umn.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7899848",key:"ec322014-095c-497c-8199-a06698616b61",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"evaluation of feature descriptors for cancerous tissue recognition",tools:["caffe"],year:2016,id:"ec322014-095c-497c-8199-a06698616b61.pdf",use:1,domain:"pathology",task_1:"classification",task_2:"0",data_type:"histapathology",data_type_1:"H&E stained",data_type_2:"0",location:"breast",location_1:"prostate",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"Australia",country_3:"0",journal:"0",impact_factor:0,conference:"2016 23rd International Conference on Pattern Recognition (ICPR)",public:0,"Unnamed: 40":null},{abstract:"We introduce a deep encoder-decoder architecture for image deformation prediction from multimodal images. Specifically, we design an image-patch-based deep network that jointly (i) learns an image similarity measure and (ii) the relationship between image patches and deformation parameters. While our method can be applied to general image registration formulations, we focus on the Large Deformation Diffeomorphic Metric Mapping (LDDMM) registration model. By predicting the initial momentum of the shooting formulation of LDDMM, we preserve its mathematical properties and drastically reduce the computation time, compared to optimization-based approaches. Furthermore, we create a Bayesian probabilistic version of the network that allows evaluation of registration uncertainty via sampling of the network at test time. We evaluate our method on a 3D brain MRI dataset using both T1- and T2-weighted images. Our experiments show that our method generates accurate predictions and that learning the similarity measure leads to more consistent registrations than relying on generic multimodal image similarity measures, such as mutual information. Our approach is an order of magnitude faster than optimization-based LDDMM.",authors:"Xiao Yang, Roland Kwitt, Martin Styner, Marc Niethammer",description:"Accepted as a conference paper for ISBI 2017. 2017",doi:null,duplicate:!1,email:["xy@cs.unc.edu"],email_new:["xy@cs.unc.edu"],fullUrl:"https://arxiv.org/abs/1703.10902",key:"b9e7fc20-e2ef-49ed-aff7-d95daaa47d74",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1703.10902.pdf",phase:1,received:0,source:"arxiv",title:"fast predictive multimodal image registration",tools:["torch"],year:2017,id:"b9e7fc20-e2ef-49ed-aff7-d95daaa47d74.pdf",use:1,domain:"radiology",task_1:"registration",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"ced",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://www.ibis-network.org/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"Austria",country_3:"0",journal:"NeuroImage",impact_factor:5.835,conference:"0",public:1,"Unnamed: 40":null},{abstract:"The quality of ultrasound (US) images for the obstetric examination is crucial for accurate biometric measurement. However, manual quality control is a labor intensive process and often impractical in a clinical setting. To improve the efficiency of examination and alleviate the measurement error caused by improper US scanning operation and slice selection, a computerized fetal US image quality assessment (FUIQA) scheme is proposed to assist the implementation of US image quality control in the clinical obstetric examination. The proposed FUIQA is realized with two deep convolutional neural network models, which are denoted as L-CNN and C-CNN, respectively. The L-CNN aims to find the region of interest (ROI) of the fetal abdominal region in the US image. Based on the ROI found by the L-CNN, the C-CNN evaluates the image quality by assessing the goodness of depiction for the key structures of stomach bubble and umbilical vein. To further boost the performance of the L-CNN, we augment the input sources of the neural network with the local phase features along with the original US data. It will be shown that the heterogeneous input sources will help to improve the performance of the L-CNN. The performance of the proposed FUIQA is compared with the subjective image quality evaluation results from three medical doctors. With comprehensive experiments, it will be illustrated that the computerized assessment with our FUIQA scheme can be comparable to the subjective ratings from medical doctors.",authors:"L. Wu,  J. Z. Cheng,  S. Li,  B. Lei,  T. Wang,  D. Ni",description:"IEEE Transactions on Cybernetics. 2017",doi:"10.1109/TCYB.2017.2671898",duplicate:!1,email:["nidong@szu.edu.cn"],email_new:["nidong@szu.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7875138",key:"9eb23897-e5bb-4d28-931e-ff3cceff8a15",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"fuiqa: fetal ultrasound image quality assessment with deep convolutional networks",tools:["caffe"],year:2017,id:"9eb23897-e5bb-4d28-931e-ff3cceff8a15.pdf",use:1,domain:"radiology",task_1:"quality assesment",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"fetal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"IEEE Transactions on Cybernetics",impact_factor:7.384,conference:"0",public:0,"Unnamed: 40":null},{abstract:"The interpretation and analysis of wireless capsule endoscopy (WCE) recordings is a complex task which requires sophisticated computer aided decision (CAD) systems to help physicians with video screening and, finally, with the diagnosis. Most CAD systems used in capsule endoscopy share a common system design, but use very different image and video representations. As a result, each time a new clinical application of WCE appears, a new CAD system has to be designed from the scratch. This makes the design of new CAD systems very time consuming. Therefore, in this paper we introduce a system for small intestine motility characterization, based on Deep Convolutional Neural Networks, which circumvents the laborious step of designing specific features for individual motility events. Experimental results show the superiority of the learned features over alternative classifiers constructed using state-of-the-art handcrafted features. In particular, it reaches a mean classification accuracy of 96% for six intestinal motility events, outperforming the other classifiers by a large margin (a 14% relative performance increase). Copyright \xa9 2016 Elsevier Ltd. All rights reserved.",authors:"Segu\xed S, Drozdzal M, Pascual G, Radeva P, Malagelada C, Azpiroz F, Vitri\xe0 J.",description:"Comput Biol Med.  2016",doi:null,duplicate:!1,email:["santi.segui@ub.edu"],email_new:["santi.segui@ub.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/27810622",key:"00de577b-26a3-47ce-9a98-27259e3c3c3b",keyok:1,keywords:"Deep learning; Feature learning; Motility analysis; Wireless capsule endoscopy",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"generic feature learning for wireless capsule endoscopy analysis",tools:["caffe"],year:2016,id:"00de577b-26a3-47ce-9a98-27259e3c3c3b.pdf",use:1,domain:"endoscopy",task_1:"detection",task_2:"0",data_type:"wireless capsule endoscopy",data_type_1:"0",data_type_2:"0",location:"gastrointestinal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"120000",training:1e5,validation:0,testing:2e4,cross_validation:0,country_1:"Spain",country_2:"Israel",country_3:"0",journal:"Computers in Biology and Medicine",impact_factor:1.836,conference:"0",public:1,"Unnamed: 40":null},{abstract:"In computerized detection of clustered microcalcifications (MCs) from mammograms, the traditional approach is to apply a pattern detector to locate the presence of individual MCs, which are subsequently grouped into clusters. Such an approach is often susceptible to the occurrence of false positives (FPs) caused by local image patterns that resemble MCs. We investigate the feasibility of a direct detection approach to determining whether an image region contains clustered MCs or not. Toward this goal, we develop a deep convolutional neural network (CNN) as the classifier model to which the input consists of a large image window ([Formula: see text] in size). The multiple layers in the CNN classifier are trained to automatically extract image features relevant to MCs at different spatial scales. In the experiments, we demonstrated this approach on a dataset consisting of both screen-film mammograms and full-field digital mammograms. We evaluated the detection performance both on classifying image regions of clustered MCs using a receiver operating characteristic (ROC) analysis and on detecting clustered MCs from full mammograms by a free-response receiver operating characteristic analysis. For comparison, we also considered a recently developed MC detector with FP suppression. In classifying image regions of clustered MCs, the CNN classifier achieved 0.971 in the area under the ROC curve, compared to 0.944 for the MC detector. In detecting clustered MCs from full mammograms, at 90% sensitivity, the CNN classifier obtained an FP rate of 0.69\xa0clusters/image, compared to 1.17\xa0clusters/image by the MC detector. These results indicate that using global image features can be more effective in discriminating clustered MCs from FPs caused by various sources, such as linear structures, thereby providing a more accurate detection of clustered MCs on mammograms.",authors:"Wang J, Nishikawa RM, Yang Y.",description:"J Med Imaging (Bellingham).  2017",doi:null,duplicate:!1,email:["yy@ece.iit.edu"],email_new:["yy@ece.iit.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28466029",key:"95e648c8-3712-43c4-ab77-fda549bb6e49",keyok:1,keywords:"clustered microcalcifications; computer-aided detection; convolutional neural network; deep learning",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"global detection approach for clustered microcalcifications in mammograms using a deep learning network",tools:["caffe"],year:2017,id:"95e648c8-3712-43c4-ab77-fda549bb6e49.pdf",use:1,domain:"radiology",task_1:"detection",task_2:"0",data_type:"mammogram",data_type_1:"0",data_type_2:"0",location:"breast",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Journal of medical imaging",impact_factor:1.109,conference:"0",public:1,"Unnamed: 40":null},{abstract:"A quantitative model to genetically interpret the histology in whole microscopy slide images is desirable to guide downstream immunohistochemistry, genomics, and precision medicine. We constructed a statistical model that predicts whether or not SPOP is mutated in prostate cancer, given only the digital whole slide after standard hematoxylin and eosin [H&E] staining. Using a TCGA cohort of 177 prostate cancer patients where 20 had mutant SPOP, we trained multiple ensembles of residual networks, accurately distinguishing SPOP mutant from SPOP non-mutant patients (test AUROC=0.74, p=0.0007 Fisher's Exact Test).  We further validated our full metaensemble classifier on an independent test cohort from MSK-IMPACT of 152 patients where 19 had mutant SPOP.  Mutants and non-mutants were accurately distinguished despite TCGA slides being frozen sections and MSK-IMPACT slides being formalin-fixed paraffin-embedded sections (AUROC=0.86, p=0.0038). Moreover, we scanned an additional 36 MSK-IMPACT patient having mutant SPOP, trained on this expanded MSK-IMPACT cohort (test AUROC=0.75, p=0.0002), tested on the TCGA cohort (AUROC=0.64, p=0.0306), and again accurately distinguished mutants from non-mutants using the same pipeline. Importantly, our method demonstrates tractable deep learning in this small data setting of 20-55 positive examples and quantifies each prediction's uncertainty with confidence intervals. To our knowledge, this is the first statistical model to predict a genetic mutation in cancer directly from the patient's digitized H&E-stained whole microscopy slide.  Moreover, this is the first time quantitative features learned from patient genetics and histology have been used for content-based image retrieval, finding similar patients for a given patient where the histology appears to share the same genetic driver of disease i.e. SPOP mutation (p=0.0241 Kost's Method), and finding similar patients for a given patient that does not have have that driver mutation (p=0.0170 Kost's Method).",authors:"Andrew J Schaumberg, Mark A Rubin, Thomas J Fuchs",description:"Retrieved from bioRxiv. 2017",doi:null,duplicate:!1,email:["ajs625@cornell.edu","rubinma@med.cornell.edu","fuchst@mskcc.org"],email_new:["ajs625@cornell.edu","rubinma@med.cornell.edu","fuchst@mskcc.org"],fullUrl:"http://www.biorxiv.org/content/early/2017/05/12/064279.1",key:"f7431639-d6cc-48f2-8772-8fdb4fd6f2e7",keyok:1,keywords:null,pdfUrl:"http://www.biorxiv.org/content/early/2017/05/12/064279.1.full.pdf",phase:1,received:0,source:"biorxiv",title:"h&e-stained whole slide image deep learning predicts spop mutation state in prostate cancer",tools:["caffe"],year:2017,id:"f7431639-d6cc-48f2-8772-8fdb4fd6f2e7.pdf",use:1,domain:"pathology",task_1:"classification",task_2:"0",data_type:"wsi",data_type_1:"H&E stained",data_type_2:"0",location:"prostate",location_1:"0",method_1:"rcnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.cbioportal.org/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/KaimingHe/deep-residual-networks",based_on_1_name:"deep_residual_networks",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Purpose: An end-to-end deep convolutional neural network (CNN) based on deep residual network (ResNet) was proposed to efficiently reconstruct reliable T2 mapping from single-shot OverLapping-Echo Detachment (OLED) planar imaging. Methods: The training dataset was obtained from simulations carried out on SPROM software developed by our group. The relationship between the original OLED image containing two echo signals and the corresponded T2 mapping was learned by ResNet training. After the ResNet was trained, it was applied to reconstruct the T2 mapping from simulation and in vivo human brain data. Results: Though the ResNet was trained entirely on simulated data, the trained network was generalized well to real human brain data. The results from simulation and in vivo human brain experiments show that the proposed method significantly outperformed the echo-detachment-based method. Reliable T2 mapping was achieved within tens of milliseconds after the network had been trained while the echo-detachment-based OLED reconstruction method took minutes. Conclusion: The proposed method will greatly facilitate real-time dynamic and quantitative MR imaging via OLED sequence, and ResNet has the potential to reconstruct images from complex MRI sequence efficiently.",authors:"Congbo Cai, Yiqing Zeng, Chao Wang, Shuhui Cai, Jun Zhang, Zhong Chen, Xinghao Ding, Jianhui Zhong",description:"18 pages, 7 figures. 2017",doi:null,duplicate:!1,email:["dxh@xmu.edu.cn"],email_new:["dxh@xmu.edu.cn"],fullUrl:"https://arxiv.org/abs/1708.05170",key:"7f0e1c55-f20f-4681-9532-d006f8bc0210",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1708.05170.pdf",phase:1,received:0,source:"arxiv",title:"high efficient reconstruction of single-shot t2 mapping from overlapping-echo detachment planar imaging based on deep residual network",tools:["caffe"],year:2017,id:"7f0e1c55-f20f-4681-9532-d006f8bc0210.pdf",use:1,domain:"radiology",task_1:"reconstruction",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/KaimingHe/deep-residual-networks",based_on_1_name:"deep_residual_networks",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Automated cell classification in Indirect Immunofluorescence (IIF) images has potential to be an important tool in clinical practice and research. This paper presents a framework for classification of Human Epithelial Type 2 cell IIF images using convolutional neural networks (CNNs). Previuos state-of-the-art methods show classification accuracy of 75.6% on a benchmark dataset. We conduct an exploration of different strategies for enhancing, augmenting and processing training data in a CNN framework for image classification. Our proposed strategy for training data and pre-training and fine-tuning the CNN network led to a significant increase in the performance over other approaches that have been used until now. Specifically, our method achieves a 80.25% classification accuracy. Source code and models to reproduce the experiments in the paper is made publicly available.",authors:"N. Bayramoglu,  J. Kannala,  J. Heikkil\xe4",description:"2015 IEEE 15th International Conference on Bioinformatics and Bioengineering (BIBE). 2015",doi:"10.1109/BIBE.2015.7367705",duplicate:!1,email:["jkannala@ee.oulu.fi","jth@ee.oulu.fi","nyalcinb@ee.oulu.fi"],email_new:["jkannala@ee.oulu.fi","jth@ee.oulu.fi","nyalcinb@ee.oulu.fi"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7367705",key:"962c98be-05c9-487b-a75b-ce20c74f5a6c",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"human epithelial type 2 cell classification with convolutional neural networks",tools:["convnet","caffe"],year:2015,id:"962c98be-05c9-487b-a75b-ce20c74f5a6c.pdf",use:1,domain:"pathology",task_1:"classification",task_2:"0",data_type:"iif",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://staff.itee.uq.edu.au/lovell/snphep2/",data_link_2:"0",data_ok:null,code_public:1,code_link:"http://www.ee.oulu.fi/~nyalcinb/papers/bibe2015/",code_ok:null,pseudocode:null,based_on_1:"https://code.google.com/archive/p/cuda-convnet/",based_on_1_name:"cuda_convnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Finland",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2015 IEEE 15th International Conference on Bioinformatics and Bioengineering (BIBE)",public:0,"Unnamed: 40":null},{abstract:"Limited angle problem is a challenging issue in x-ray computed tomography (CT) field. Iterative reconstruction methods that utilize the additional prior can suppress artifacts and improve image quality, but unfortunately require increased computation time. An interesting way is to restrain the artifacts in the images reconstructed from the practical filtered back projection (FBP) method. Frikel and Quinto have proved that the streak artifacts in FBP results could be characterized. It indicates that the artifacts created by FBP method have specific and similar characteristics in a stationary limited-angle scanning configuration. Based on this understanding, this work aims at developing a method to extract and suppress specific artifacts of FBP reconstructions for limited-angle tomography. A data-driven learning-based method is proposed based on a deep convolutional neural network. An end-to-end mapping between the FBP and artifact-free images is learned and the implicit features involving artifacts will be extracted and suppressed via nonlinear mapping. The qualitative and quantitative evaluations of experimental results indicate that the proposed method show a stable and prospective performance on artifacts reduction and detail recovery for limited angle tomography. The presented strategy provides a simple and efficient approach for improving image quality of the reconstruction results from limited projection data.",authors:"Hanming Zhang, Liang Li, Kai Qiao, Linyuan Wang, Bin Yan, Lei Li, Guoen Hu",description:"Retrieved from arXiv. 2016",doi:null,duplicate:!1,email:["liliang@tsinghua.edu.cn","ybspace@hotmail.com","z.hanming@hotmail.com","15517181502@163.com","wanglinyuanwly@163.com","leehotline@aliyun.com","13838265028@126.com"],email_new:["liliang@tsinghua.edu.cn","ybspace@hotmail.com","z.hanming@hotmail.com","15517181502@163.com","wanglinyuanwly@163.com","leehotline@aliyun.com","13838265028@126.com"],fullUrl:"https://arxiv.org/abs/1607.08707",key:"9b61d1b4-2973-4e5f-ae96-04170ad3afeb",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1607.08707.pdf",phase:1,received:0,source:"arxiv",title:"image prediction for limited-angle tomography via deep learning with convolutional neural network",tools:["caffe","convnet"],year:2016,id:"9b61d1b4-2973-4e5f-ae96-04170ad3afeb.pdf",use:1,domain:"radiology",task_1:"denoising",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"multi-organ",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://gdcm.sourceforge.net/wiki/index.php/Sample_DataSet",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"In this paper we introduce a method to handle the challenges posed by image registration for placenta reconstruction from fetoscopic video as used in the treatment of Twinto-Twin Transfusion Syndrome (TTTS). Panorama reconstruction of the placenta greatly supports the surgeon in obtaining a complete view of the placenta to localize vascular anastomoses. The found shunts can subsequently be blocked by coagulation in the correct order. By using similarity learning in training a Convolutional Neural Network we created a novel feature extraction method, allowing robust matching of keypoints for image registration and therefore taking the most critical step in placenta reconstruction from fetoscopic video. The fetoscopic video we used for our experiments was acquired from a training simulator for TTTS surgery. We compared our method with state-of-the-art methods. The matching performance of our method is up to three times better while the mean projection error is reduced with 64% for the registered images. Our image registration method provides the ground work for a complete panorama reconstruction of the placenta.",authors:"F. Gaisser,  P. P. Jonker,  T. Chiba",description:"2016 IEEE Conference on Computer Vision and Pattern Recognition Workshops (CVPRW). 2016",doi:"10.1109/CVPRW.2016.66",duplicate:!1,email:["f.gaisser@tudelft.nl","p.p.jonker@tudelft.nl","chiba-t@sea.plala.or.jp"],email_new:["f.gaisser@tudelft.nl","p.p.jonker@tudelft.nl","chiba-t@sea.plala.or.jp"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7789556",key:"aaefc655-ead3-4b78-917f-56eacc5d53b2",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"image registration for placenta reconstruction",tools:["caffe"],year:2016,id:"aaefc655-ead3-4b78-917f-56eacc5d53b2.pdf",use:1,domain:"endoscopy",task_1:"registration",task_2:"0",data_type:"fetoscopy video",data_type_1:"0",data_type_2:"0",location:"fetal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Netherlands",country_2:"Japan",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE Conference on Computer Vision and Pattern Recognition Workshops (CVPRW)",public:1,"Unnamed: 40":null},{abstract:"Tuberculosis (TB) is a chronic infectious disease worldwide and remains a major cause of death globally. Of the estimated 9 million people who developed TB in 2013, over 80% were in South-East Asia, Western Pacific, and African. The majority of the infected populations was from resource-poor and marginalized communities with weak healthcare infrastructure. Reducing TB diagnosis delay is critical in mitigating disease transmission and minimizing the reproductive rate of the tuberculosis epidemic. The combination of machine learning and mobile computing techniques offers a unique opportunity to accelerate the TB diagnosis among these communities. The ultimate goal of our research is to reduce patient wait times for being diagnosed with this infectious disease by developing new machine learning and mobile health techniques to the TB diagnosis problem. In this paper, we first introduce major technique barriers and proposed system architecture. Then we report two major progresses we recently made. The first activity aims to develop large-scale, real-world and well-annotated X-ray image database dedicated for automated TB screening. The second research activity focus on developing effective and efficient computational models (in particularly, deep convolutional neural networks (CNN)-based models) to classify the image into different category of TB manifestations. Experimental results have demonstrated the effectiveness of our approach. Our future work includes: (1) to further improve the performance of the algorithms, and (2) to deploy our system in the city of Carabayllo in Peru\u0301, a densely occupied urban community and high-burden TB.",authors:"Y. Cao,  C. Liu,  B. Liu,  M. J. Brunette,  N. Zhang,  T. Sun,  P. Zhang,  J. Peinado,  E. S. Garavito,  L. L. Garcia,  W. H. Curioso",description:"2016 IEEE First International Conference on Connected Health: Applications, Systems and Engineering Technologies (CHASE). 2016",doi:"10.1109/CHASE.2016.18",duplicate:!1,email:["ycao@cs.uml.edu"],email_new:["ycao@cs.uml.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7545842",key:"adf82185-9dc4-4028-8250-0cbf71aae893",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"improving tuberculosis diagnostics using deep learning and mobile health technologies among resource-poor and marginalized communities",tools:["caffe"],year:2016,id:"adf82185-9dc4-4028-8250-0cbf71aae893.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"chest",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://www.imageclef.org/2011/medical",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet",based_on_1_name:"bvlc_googlelenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2015 IEEE First Conference on Connected Health",public:0,"Unnamed: 40":null},{abstract:"Automated polyp detection in colonoscopy videos has been demonstrated to be a promising way for colorectal cancer prevention and diagnosis. Traditional manual screening is time consuming, operator dependent, and error prone; hence, automated detection approach is highly demanded in clinical practice. However, automated polyp detection is very challenging due to high intraclass variations in polyp size, color, shape, and texture, and low interclass variations between polyps and hard mimics. In this paper, we propose a novel offline and online three-dimensional (3-D) deep learning integration framework by leveraging the 3-D fully convolutional network (3D-FCN) to tackle this challenging problem. Compared with the previous methods employing hand-crafted features or 2-D convolutional neural network, the 3D-FCN is capable of learning more representative spatio-temporal features from colonoscopy videos, and hence has more powerful discrimination capability. More importantly, we propose a novel online learning scheme to deal with the problem of limited training data by harnessing the specific information of an input video in the learning process. We integrate offline and online learning to effectively reduce the number of false positives generated by the offline network and further improve the detection performance. Extensive experiments on the dataset of MICCAI 2015 Challenge on Polyp Detection demonstrated the better performance of our method when compared with other competitors.",authors:"Lequan Yu, Hao Chen, Qi Dou, Jing Qin, Pheng Ann Heng.",description:"IEEE J Biomed Health Inform.  2017",doi:null,duplicate:!1,email:["lqyu@cse.cuhk.edu.hk","hchen@cse.cuhk.edu.hk"],email_new:["lqyu@cse.cuhk.edu.hk","hchen@cse.cuhk.edu.hk"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28114049",key:"9b21f857-fa06-4a8b-8a33-f60e62a58ccb",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"integrating online and offline three-dimensional deep learning for automated polyp detection in colonoscopy videos",tools:["caffe"],year:2017,id:"9b21f857-fa06-4a8b-8a33-f60e62a58ccb.pdf",use:1,domain:"colonoscopy",task_1:"detection",task_2:"classification",data_type:"colonoscopy",data_type_1:"0",data_type_2:"0",location:"colon",location_1:"0",method_1:"fullycnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://grand-challenge.org/site/polyp/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/shelhamer/fcn.berkeleyvision.org",based_on_1_name:"bvlc_fully_convolutional_nets",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Hong Kong",country_2:"China",country_3:"0",journal:"IEEE Journal of Biomedical and Health Informatics",impact_factor:3.451,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Despite tremendous progress in computer vision, effective learning on very large-scale (> 100K patients) medical image databases has been vastly hindered. We present an interleaved text/image deep learning system to extract and mine the semantic interactions of radiology images and reports from a national research hospital's picture archiving and communication system. Instead of using full 3D medical volumes, we focus on a collection of representative ~216K 2D key images/slices (selected by clinicians for diagnostic reference) with text-driven scalar and vector labels. Our system interleaves between unsupervised learning (e.g., latent Dirichlet allocation, recurrent neural net language models) on document- and sentence-level texts to generate semantic labels and supervised learning via deep convolutional neural networks (CNNs) to map from images to label spaces. Disease-related key words can be predicted for radiology images in a retrieval manner. We have demonstrated promising quantitative and qualitative results. The large-scale datasets of extracted key images and their categorization, embedded vector labels and sentence descriptions can be harnessed to alleviate the deep learning \u201cdata-hungry\u201d obstacle in the medical domain.",authors:"H. C. Shin,  Le Lu,  L. Kim,  A. Seff,  J. Yao,  R. M. Summers",description:"2015 IEEE Conference on Computer Vision and Pattern Recognition (CVPR). 2015",doi:"10.1109/CVPR.2015.7298712",duplicate:!1,email:["jyao@cc.nih.gov","hoochang.shin@nih.gov","le.lu@nih.gov","lauren.kim2@nih.gov","ari.seff@nih.gov","rms@nih.gov"],email_new:["jyao@cc.nih.gov","hoochang.shin@nih.gov","le.lu@nih.gov","lauren.kim2@nih.gov","ari.seff@nih.gov","rms@nih.gov"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7298712",key:"8d4f319c-c2e0-4db3-b7df-43656d444712",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"interleaved text/image deep mining on a large-scale radiology database",tools:["digits","caffe"],year:2015,id:"8d4f319c-c2e0-4db3-b7df-43656d444712.pdf",use:1,domain:"radiology",task_1:"mining",task_2:"0",data_type:"ct",data_type_1:"mri",data_type_2:"text",location:"multi-organ",location_1:"0",method_1:"cnn",method_2:"rnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:1,code_link:"https://github.com/rsummers11/CADLab",code_ok:null,pseudocode:null,based_on_1:"https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf",based_on_1_name:"alexnet",based_on_2:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_2_name:"vgg_very_deep_convnets",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2015 IEEE Conference on Computer Vision and Pattern Recognition (CVPR)",public:0,"Unnamed: 40":null},{abstract:"Since gastroscopy is able to observe the interior of gastrointestinal tract directly, it has been widely used for gastrointestinal examination. But it is hard for clinicians to accurately detect gastrointestinal disease due to its great dependence on doctors experiences. Therefore, a computer-aided lesion detection system can offer great help for clinicians. In this paper, we propose a new scheme for endoscopy image lesion detection. A trainable feature extractor based on convolutional neural network (CNN) is utilized to get more generic features for endoscopy images. And features are fed to support vector machine (SVM) to enhance the generalization ability. Experiments show that the proposed scheme outperforms the previous conventional methods based on color and texture features.",authors:"R. Zhu,  R. Zhang,  D. Xue",description:"2015 8th International Congress on Image and Signal Processing (CISP). 2015",doi:"10.1109/CISP.2015.7407907",duplicate:!1,email:["zrs1991@mail.ustc.edu.cn","zrong@ustc.edu.cn","xuedixiu@mail.ustc.edu.cn"],email_new:["zrs1991@mail.ustc.edu.cn","zrong@ustc.edu.cn","xuedixiu@mail.ustc.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7407907",key:"edf6b323-ae15-496e-995b-2dc0e98e107e",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"lesion detection of endoscopy images based on convolutional neural network features",tools:["digits","caffe"],year:2015,id:"edf6b323-ae15-496e-995b-2dc0e98e107e.pdf",use:1,domain:"endoscopy",task_1:"detection",task_2:"0",data_type:"endoscopy",data_type_1:"0",data_type_2:"0",location:"gastrointestinal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/blob/master/examples/mnist/lenet.prototxt",based_on_1_name:"bvlc_lenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2015 8th International Congress on Image and Signal Processing (CISP 2015)",public:0,"Unnamed: 40":null},{abstract:"Diagnostic ultrasound offers great improvements in diagnostic accuracy and robustness. However, it is difficult to make subjective and uniform diagnoses, because the quality of ultrasound images can be easily influenced by machine settings, the characteristics of ultrasonic waves, the interactions between ultrasound and body tissues, and other uncontrollable factors. In this paper, we propose a novel liver fibrosis classification method based on transfer learning (TL) using VGGNet and a deep classifier called fully connected network (FCNet). In case of insufficient samples, deep features extracted using TL strategy can provide sufficient classification information. These deep features are then sent to FCNet for the classification of different liver fibrosis statuses. With this framework, tests show that our deep features combined with the FCNet can provide suitable information to enable the construction of the most accurate prediction model when compared with other methods.",authors:"D. Meng,  L. Zhang,  G. Cao,  W. Cao,  G. Zhang,  B. Hu",description:"IEEE Access. 2017",doi:"10.1109/ACCESS.2017.2689058",duplicate:!1,email:["mengdan90@163.com","gtcao@sei.ecnu.edu.cn","zsmj@hotmail.com","wmcao@szu.edu.cn","gxzhang@sei.ecnu.edu.cn","binghu stephen@163.com"],email_new:["mengdan90@163.com","gtcao@sei.ecnu.edu.cn","zsmj@hotmail.com","wmcao@szu.edu.cn","gxzhang@sei.ecnu.edu.cn","binghu stephen@163.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7890483",key:"7aa21208-ba83-47cf-a2ab-a25ed3427715",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"liver fibrosis classification based on transfer learning and fcnet for ultrasound images",tools:["caffe"],year:2017,id:"7aa21208-ba83-47cf-a2ab-a25ed3427715.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"liver",location_1:"0",method_1:"fullyconnectednn",method_2:"cnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"IEEE Access",impact_factor:3.244,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Given the potential X-ray radiation risk to the patient, low-dose CT has attracted a considerable interest in the medical imaging field. The current main stream low-dose CT methods include vendor-specific sinogram domain filtration and iterative reconstruction, but they need to access original raw data whose formats are not transparent to most users. Due to the difficulty of modeling the statistical characteristics in the image domain, the existing methods for directly processing reconstructed images cannot eliminate image noise very well while keeping structural details. Inspired by the idea of deep learning, here we combine the autoencoder, the deconvolution network, and shortcut connections into the residual encoder-decoder convolutional neural network (RED-CNN) for low-dose CT imaging. After patch-based training, the proposed RED-CNN achieves a competitive performance relative to the-state-of-art methods in both simulated and clinical cases. Especially, our method has been favorably evaluated in terms of noise suppression, structural preservation and lesion detection.",authors:"Hu Chen, Yi Zhang, Mannudeep K. Kalra, Feng Lin, Yang Chen, Peixi Liao, Jiliu Zhou, Ge Wang",description:"Accepted by IEEE TMI. 2017",doi:null,duplicate:!1,email:["linfeng@scu.edu.cn","huchen@scu.edu.cn","zhoujl@scu.edu.cn","yzhang@scu.edu.cn","mkalra@mgh.harvard.edu","chenyang.list@seu.edu.cn","universe6527@163.com","wangg6@rpi.edu"],email_new:["linfeng@scu.edu.cn","huchen@scu.edu.cn","zhoujl@scu.edu.cn","yzhang@scu.edu.cn","mkalra@mgh.harvard.edu","chenyang.list@seu.edu.cn","universe6527@163.com","wangg6@rpi.edu"],fullUrl:"https://arxiv.org/abs/1702.00288",key:"35f064f0-3981-4161-89c8-d1be8dff46bd",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1702.00288.pdf",phase:1,received:0,source:"arxiv",title:"low-dose ct with a residual encoder-decoder convolutional neural network (red-cnn)",tools:["caffe"],year:2017,id:"35f064f0-3981-4161-89c8-d1be8dff46bd.pdf",use:1,domain:"radiology",task_1:"denoising",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"0",location_1:"0",method_1:"redcnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://imaging.nci.nih.gov/ncia/login.jsf",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"175",training:0,validation:0,testing:0,cross_validation:1,country_1:"China",country_2:"USA",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Early detection of lung nodules in thoracic Computed Tomography (CT) scans is of great importance for the successful diagnosis and treatment of lung cancer. Due to improvements in screening technologies, and an increased demand for their use, radiologists are required to analyze an ever increasing amount of image data, which can affect the quality of their diagnoses. Computer-Aided Detection (CADe) systems are designed to assist radiologists in this endeavor. Here, we present a CADe system for the detection of lung nodules in thoracic CT images. Our system is based on (1) the publicly available Lung Image Database Consortium (LIDC) and Image Database Resource Initiative (IDRI) database, which contains 1018 thoracic CT scans with nodules of different shape and size, and (2) a deep Convolutional Neural Network (CNN), which is trained, using the back-propagation algorithm, to extract valuable volumetric features from the input data and detect lung nodules in sub-volumes of CT images. Considering only those test nodules that have been annotated by four radiologists, our CADe system achieves a sensitivity (true positive rate) of 78.9% with 20 false positives (FPs) per scan, or a sensitivity of 71.2% with 10 FPs per scan. This is achieved without using any segmentation or additional FP reduction procedures, both of which are commonly used in other CADe systems. Furthermore, our CADe system is validated on a larger number of lung nodules compared to other studies, which increases the variation in their appearance, and therefore, makes their detection by a CADe system more challenging.",authors:"R. Golan,  C. Jacob,  J. Denzinger",description:"2016 International Joint Conference on Neural Networks (IJCNN). 2016",doi:"10.1109/IJCNN.2016.7727205",duplicate:!1,email:["grotem@ucalgary.ca","cjacob@ucalgary.ca","denzinge@cpsc.ucalgary.ca"],email_new:["grotem@ucalgary.ca","cjacob@ucalgary.ca","denzinge@cpsc.ucalgary.ca"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7727205",key:"94ba9ab3-dab6-400f-995d-7fdd12a1fde8",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"lung nodule detection in ct images using deep convolutional neural networks",tools:["torch"],year:2016,id:"94ba9ab3-dab6-400f-995d-7fdd12a1fde8.pdf",use:1,domain:"radiology",task_1:"detection",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"lung",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://wiki.cancerimagingarchive.net/display/Public/LIDC-IDRI",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Canada",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 International Joint Conference on Neural Networks (IJCNN)",public:0,"Unnamed: 40":null},{abstract:"Recent advancement in genomics technologies has opened a new realm for early detection of diseases that shows potential to overcome the drawbacks of manual detection technologies. In this work, we have presented efficient contour aware segmentation approach based based on fully conventional network whereas for classification we have used extreme machine learning based on CNN features extracted from each segmented cell. We have evaluated system performance based on segmentation and classification on publicly available dataset. Experiment was conducted on 64000 blood cells and dataset is divided into 80% for training and 20% for testing. Segmentation results are compared with the manual segmentation and found that proposed approach provided with 98.12% and 98.16% for RBC and WBC respectively whereas classification accuracy is shown on publicly available dataset 94.71% and 98.68% for RBC & its abnormalities detection and WBC respectively.",authors:"M. I. Razzak,  S. Naz",description:"2017 IEEE Conference on Computer Vision and Pattern Recognition Workshops (CVPRW). 2017",doi:"10.1109/CVPRW.2017.111",duplicate:!1,email:["mirpak@gmail.com","saeedanaz292@gmail.com"],email_new:["mirpak@gmail.com","saeedanaz292@gmail.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8014845",key:"e4a574b5-37e7-41ce-9f49-8d6bd08437f5",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"microscopic blood smear segmentation and classification using deep contour aware cnn and extreme machine learning",tools:["caffe"],year:2017,id:"e4a574b5-37e7-41ce-9f49-8d6bd08437f5.pdf",use:1,domain:"microscopy",task_1:"segmentation",task_2:"classification",data_type:"blood film",data_type_1:"microscopy",data_type_2:"0",location:"blood",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://homes.di.unimi.it/scotti/all/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Saudi Arabia",country_2:"Pakistan",country_3:"0",journal:"0",impact_factor:0,conference:"2017 IEEE Conference on Computer Vision and Pattern Recognition",public:0,"Unnamed: 40":null},{abstract:"This paper focuses on the problem of feature extraction and the classification task of microvascular morphological type to aid esophageal cancer detection. A specialized convolutional neural network (CNN) is designed to extract hierarchical features and Support Vector Machines (SVMs) are introduced to enhance the generalization ability of classifiers. Experiments are conducted on the NBI-ME dataset, achieving a recognition rate of 88.19% on patch level. The results show that the CNN-SVM model beats models of traditional features with SVM as well as the original CNN with softmax. The synthesis results indicate this system is able to assist clinical diagnose to a certain extent.",authors:"D. X. Xue,  R. Zhang,  R. S. Zhu",description:"2015 International Symposium on Bioelectronics and Bioinformatics (ISBB). 2015",doi:"10.1109/ISBB.2015.7344925",duplicate:!1,email:["xuedixiu@mail.ustc.edu.cn","zrong@ustc.edu.cn","zrs1991@mail.ustc.edu.cn"],email_new:["xuedixiu@mail.ustc.edu.cn","zrong@ustc.edu.cn","zrs1991@mail.ustc.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7344925",key:"a0361dee-a14c-4d09-a259-295243474746",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"microvascular morphological type recognition using trainable feature extractor",tools:["digits","caffe"],year:2015,id:"a0361dee-a14c-4d09-a259-295243474746.pdf",use:1,domain:"endoscopy",task_1:"detection",task_2:"0",data_type:"magnification endoscopy",data_type_1:"0",data_type_2:"0",location:"esophagus",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet",based_on_2_name:"bvlc_googlelenet",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2015 International Symposium on Bioelectronics and Bioinformatics (ISBB)",public:0,"Unnamed: 40":null},{abstract:"PURPOSE: Interests have been rapidly growing in the field of radiotherapy to replace CT with magnetic resonance imaging (MRI), due to superior soft tissue contrast offered by MRI and the desire to reduce unnecessary radiation dose. MR-only radiotherapy also simplifies clinical workflow and avoids uncertainties in aligning MR with CT. Methods, however, are needed to derive CT-equivalent representations, often known as synthetic CT (sCT), from patient MR images for dose calculation and DRR-based patient positioning. Synthetic CT estimation is also important for PET attenuation correction in hybrid PET-MR systems. We propose in this work a novel deep convolutional neural network (DCNN) method for sCT generation and evaluate its performance on a set of brain tumor patient images. METHODS: The proposed method builds upon recent developments of deep learning and convolutional neural networks in the computer vision literature. The proposed DCNN model has 27 convolutional layers interleaved with pooling and unpooling layers and 35 million free parameters, which can be trained to learn a direct end-to-end mapping from MR images to their corresponding CTs. Training such a large model on our limited data is made possible through the principle of transfer learning and by initializing model weights from a pretrained model. Eighteen brain tumor patients with both CT and T1-weighted MR images are used as experimental data and a sixfold cross-validation study is performed. Each sCT generated is compared against the real CT image of the same patient on a voxel-by-voxel basis. Comparison is also made with respect to an atlas-based approach that involves deformable atlas registration and patch-based atlas fusion. RESULTS: The proposed DCNN method produced a mean absolute error (MAE) below 85 HU for 13 of the 18 test subjects. The overall average MAE was 84.8 \xb1 17.3 HU for all subjects, which was found to be significantly better than the average MAE of 94.5 \xb1 17.8 HU for the atlas-based method. The DCNN method also provided significantly better accuracy when being evaluated using two other metrics: the mean squared error (188.6 \xb1 33.7 versus 198.3 \xb1 33.0) and the Pearson correlation coefficient(0.906 \xb1 0.03 versus 0.896 \xb1 0.03). Although training a DCNN model can be slow, training only need be done once. Applying a trained model to generate a complete sCT volume for each new patient MR image only took 9 s, which was much faster than the atlas-based approach. CONCLUSIONS: A DCNN model method was developed, and shown to be able to produce highly accurate sCT estimations from conventional, single-sequence MR images in near real time. Quantitative results also showed that the proposed method competed favorably with an atlas-based method, in terms of both accuracy and computation speed at test time. Further validation on dose computation accuracy and on a larger patient cohort is warranted. Extensions of the method are also possible to further improve accuracy or to handle multi-sequence MR images. \xa9 2017 American Association of Physicists in Medicine.",authors:"Han X.",description:"Med Phys.  2017",doi:null,duplicate:!1,email:["xiao.han@elekta.com"],email_new:["xiao.han@elekta.com"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28192624",key:"e1096c87-1ba3-42bd-9c50-f87ffa2fcf43",keyok:1,keywords:"MRI; convolutional neural network; deep learning; radiation therapy; synthetic CT",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"mr-based synthetic ct generation using a deep convolutional neural network method",tools:["caffe"],year:2017,id:"e1096c87-1ba3-42bd-9c50-f87ffa2fcf43.pdf",use:1,domain:"radiology",task_1:"generation",task_2:"0",data_type:"sct",data_type_1:"mri",data_type_2:"0",location:"brain",location_1:"0",method_1:"fullycnn",method_2:"cnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"https://lmb.informatik.uni-freiburg.de/people/ronneber/u-net/",based_on_2_name:"unet",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"medical physics",impact_factor:2.635,conference:"0",public:0,"Unnamed: 40":null},{abstract:"With the development of various imaging technologies, medical imaging has been playing more important roles on providing scientific proof for doctors to make decisions on clinical diagnosis. At the same time, it is very important to excavate valuable information hidden in those images and take over some auxiliary medical works from doctors by the computer. Therefore, a large number of image segmentation methods, including some classic algorithms have been proposed and some of them perform well. In this paper, we built a deep convolutional neural network to segment the MRI brain images. Results show that the network has a good performance on segmentation of the gray and white matter of brains, it also had a good generalization ability.",authors:"Y. Wang,  Z. Sun,  C. Liu,  W. Peng,  J. Zhang",description:"2016 IEEE International Conference on Mechatronics and Automation. 2016",doi:"10.1109/ICMA.2016.7558819",duplicate:!1,email:["jhzhang@bit.edu.cn"],email_new:["jhzhang@bit.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7558819",key:"2d681b43-b383-48fc-9833-1b45c9eaf8e9",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"mri image segmentation by fully convolutional networks",tools:["caffe"],year:2016,id:"2d681b43-b383-48fc-9833-1b45c9eaf8e9.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"fullycnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://www.nitrc.org/",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"18",training:4,validation:0,testing:14,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE International Conference on Mechatronics and Automation",public:0,"Unnamed: 40":null},{abstract:"Recent advances in machine learning, specifically in deep learning with neural networks, has made a profound impact on fields such as natural language processing, image classification, and language modeling; however, feasibility and potential benefits of the approaches to metagenomic data analysis has been largely under-explored. Deep learning exploits many layers of learning nonlinear feature representations, typically in an unsupervised fashion, and recent results have shown outstanding generalization performance on previously unseen data. Furthermore, some deep learning methods can also represent the structure in a data set. Consequently, deep learning and neural networks may prove to be an appropriate approach for metagenomic data. To determine whether such approaches are indeed appropriate for metagenomics, we experiment with two deep learning methods: i) a deep belief network, and ii) a recursive neural network, the latter of which provides a tree representing the structure of the data. We compare these approaches to the standard multi-layer perceptron, which has been well-established in the machine learning community as a powerful prediction algorithm, though its presence is largely missing in metagenomics literature. We find that traditional neural networks can be quite powerful classifiers on metagenomic data compared to baseline methods, such as random forests. On the other hand, while the deep learning approaches did not result in improvements to the classification accuracy, they do provide the ability to learn hierarchical representations of a data set that standard classification methods do not allow. Our goal in this effort is not to determine the best algorithm in terms accuracy-as that depends on the specific application-but rather to highlight the benefits and drawbacks of each of the approach we discuss and provide insight on how they can be improved for predictive metagenomic analysis.",authors:"G. Ditzler,  R. Polikar,  G. Rosen",description:"IEEE Transactions on NanoBioscience. 2015",doi:"10.1109/TNB.2015.2461219",duplicate:!1,email:["gregory.ditzler@gmail.com","gailr@ece.drexel.edu","polikar@rowan.edu"],email_new:["gregory.ditzler@gmail.com","gailr@ece.drexel.edu","polikar@rowan.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7219432",key:"454721f9-3a79-4bdf-9e83-db9f2996e93c",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"multi-layer and recursive neural networks for metagenomic classification",tools:["torch"],year:2015,id:"454721f9-3a79-4bdf-9e83-db9f2996e93c.pdf",use:1,domain:"metagenomics",task_1:"classification",task_2:"0",data_type:"dna",data_type_1:"0",data_type_2:"0",location:"microorganisms",location_1:"0",method_1:"dbn",method_2:"rnn",method_3:"mlp",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://qiita.ucsd.edu/",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"0",training:0,validation:0,testing:0,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"IEEE Transactions on NanoBioscience",impact_factor:2.771,conference:"0",public:0,"Unnamed: 40":null},{abstract:"We propose a new Multi-scale Rotation-invariant Convolutional Neural Network (MRCNN) model for classifying various lung tissue types on high-resolution computed tomography (HRCT). MRCNN employs Gabor-local binary pattern (Gabor-LBP) which introduces a good property in image analysis - invariance to image scales and rotations. In addition, we offer an approach to deal with the problems caused by imbalanced number of samples between different classes in most of the existing works, accomplished by changing the overlapping size between the adjacent patches. Experimental results on a public Interstitial Lung Disease (ILD) database show a superior performance of the proposed method to state-of-the-art.",authors:"Q. Wang,  Y. Zheng,  g. yang,  W. Jin,  X. Chen,  y. yin",description:"IEEE Journal of Biomedical and Health Informatics. 2017",doi:"10.1109/JBHI.2017.2685586",duplicate:!1,email:["shdyn2000@mail.sdu.edu.cn","zhengyuanjie@gmail.com","gpyang@sdu.edu.cn","jinweidong@sdufe.edu.cn","xjchen@suda.edu.cn","ylyin@sdu.edu.cn"],email_new:["shdyn2000@mail.sdu.edu.cn","zhengyuanjie@gmail.com","gpyang@sdu.edu.cn","jinweidong@sdufe.edu.cn","xjchen@suda.edu.cn","ylyin@sdu.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7883849",key:"7b8ec9d1-e85f-4e80-bc3d-ed9eeb2b225f",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"multi-scale rotation-invariant convolutional neural networks for lung texture classification",tools:["caffe"],year:2017,id:"7b8ec9d1-e85f-4e80-bc3d-ed9eeb2b225f.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"lung",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://medgift.hevs.ch/wordpress/databases/ild-database/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"China",country_2:"0",country_3:"0",journal:"IEEE Journal of Biomedical and Health Informatics",impact_factor:3.451,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Algorithmic image-based diagnosis and prognosis of neurodegenerative diseases on longitudinal data has drawn great interest from computer vision researchers. The current state-of-the-art models for many image classification tasks are based on the Convolutional Neural Networks (CNN). However, a key challenge in applying CNN to biological problems is that the available labeled training samples are very limited. Another issue for CNN to be applied in computer aided diagnosis applications is that to achieve better diagnosis and prognosis accuracy, one usually has to deal with the longitudinal dataset, i.e., the dataset of images scanned at different time points. Here we argue that an enhanced CNN model with transfer learning for the joint analysis of tasks from multiple time points or regions of interests may have a potential to improve the accuracy of computer aided diagnosis. To reach this goal, we innovate a CNN based deep learning multi-task dictionary learning framework to address the above challenges. Firstly, we pre-train CNN on the ImageNet dataset and transfer the knowledge from the pre-trained model to the medical imaging progression representation, generating the features for different tasks. Then, we propose a novel unsupervised learning method, termed Multi-task Stochastic Coordinate Coding (MSCC), for learning different tasks by using shared and individual dictionaries and generating the sparse features required to predict the future cognitive clinical scores. We apply our new model in a publicly available neuroimaging cohort to predict clinical measures with two different feature sets and compare them with seven other state-of-the-art methods. The experimental results show our proposed method achieved superior results.",authors:"Jie Zhang, Qingyang Li, Richard J. Caselli, Jieping Ye, Yalin Wang",description:"Retrieved from arXiv. 2017",doi:null,duplicate:!1,email:["JieZhang.Joena@asu.edu","Qingyang.Li@asu.edu","Yalin.Wang@asu.edu","jpye@umich.edu","caselli.richard@mayo.edu"],email_new:["JieZhang.Joena@asu.edu","Qingyang.Li@asu.edu","Yalin.Wang@asu.edu","jpye@umich.edu","caselli.richard@mayo.edu"],fullUrl:"https://arxiv.org/abs/1709.00042",key:"a05bc5d0-f158-41f2-b8e9-d1cc1c67a9cd",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1709.00042.pdf",phase:1,received:0,source:"arxiv",title:"multi-task dictionary learning based convolutional neural network for computer aided diagnosis with longitudinal images",tools:["caffe"],year:2017,id:"a05bc5d0-f158-41f2-b8e9-d1cc1c67a9cd.pdf",use:1,domain:"radiology",task_1:"regression",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://adni.loni.usc.edu/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Automatic diabetes retinopathy (DR) recognition can help DR carriers to receive treatment in early stages and avoid the risk of vision loss. In this paper, we emphasize the role of multiple filter sizes in learning fine-grained discriminant features and propose: (i) two deep convolutional neural networks - Combined Kernels with Multiple Losses Network (CKML Net) and VGGNet with Extra Kernel (VNXK), which are an improvement upon GoogLeNet and VGGNet in context of DR tasks. Learning from existing research, (ii) we propose a hybrid color space, LGI, for DR recognition via proposed nets. (iii) Transfer learning is applied to solve the challenge of imbalanced dataset. The effectiveness of proposed new nets and color space is evaluated using two grand challenge retina datasets: EyePACS and Messidor. Our experimental results show: (iv) CKML Net improves upon GoogLeNet and VNXK improves upon VGGNet on both datasets using the LGI color space. Additionally, proposed methodology improves upon other state of the art results on Messidor dataset for referable/non-referable screening.",authors:"H. H. Vo,  A. Verma",description:"2016 IEEE International Symposium on Multimedia (ISM). 2016",doi:"10.1109/ISM.2016.0049",duplicate:!1,email:["hhvo@csu.fullerton.edu","averma@fullerton.edu"],email_new:["hhvo@csu.fullerton.edu","averma@fullerton.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7823616",key:"61e88b6c-394f-41be-888d-82cd96c0c4b1",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"new deep neural nets for fine-grained diabetic retinopathy recognition on hybrid color space",tools:["digits","caffe"],year:2016,id:"61e88b6c-394f-41be-888d-82cd96c0c4b1.pdf",use:1,domain:"ophthalmology",task_1:"detection",task_2:"0",data_type:"fundus photography",data_type_1:"0",data_type_2:"0",location:"eye",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://www.kaggle.com/c/diabetic-retinopathy-detection",data_link_2:"http://www.adcis.net/en/Download-Third-Party/Messidor.htmlindex-en.php",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE International Symposium on Multimedia",public:0,"Unnamed: 40":null},{abstract:"In studies using dental X-ray images, tooth localization is essential to produce accurate results. In this paper, we propose a tooth localization method that tightly localize diverse teeth in periapical dental X-ray images. Oriented tooth proposals are generated by using teeth separation lines (TSLs) and a tooth top line, which are reliable and tight to teeth. To classify each tooth proposal into either a tooth or a non-tooth, we utilize a convolutional neural network (CNN). Our CNN model is trained with three classes, i.e., one negative and two positives, for better classification. In addition, we propose scale based non-maximum suppression by integrating scale confidence with non-maximum suppression to efficiently eliminate multiple tooth localizations.",authors:"H. Eun,  C. Kim",description:"2016 Asia-Pacific Signal and Information Processing Association Annual Summit and Conference (APSIPA). 2016",doi:"10.1109/APSIPA.2016.7820720",duplicate:!1,email:["hj.eun@kaist.ac.kr","changick@kaist.ac.kr"],email_new:["hj.eun@kaist.ac.kr","changick@kaist.ac.kr"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7820720",key:"9f39197c-d7dd-4724-81e6-c1c680348789",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"oriented tooth localization for periapical dental x-ray images via convolutional neural network",tools:["caffe"],year:2016,id:"9f39197c-d7dd-4724-81e6-c1c680348789.pdf",use:1,domain:"dentistry",task_1:"localization",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"teeth",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Korea",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 Asia-Pacific Signal and Information Processing Association Annual Summit and Conference (APSIPA)",public:1,"Unnamed: 40":null},{abstract:"Convolutional Neural Networks (CNN) are state-of-the-art models for many image classification tasks. However, to recognize cancer subtypes automatically, training a CNN on gigapixel resolution Whole Slide Tissue Images (WSI) is currently computationally impossible. The differentiation of cancer subtypes is based on cellular-level visual features observed on image patch scale. Therefore, we argue that in this situation, training a patch-level classifier on image patches will perform better than or similar to an image-level classifier. The challenge becomes how to intelligently combine patch-level classification results and model the fact that not all patches will be discriminative. We propose to train a decision fusion model to aggregate patch-level predictions given by patch-level CNNs, which to the best of our knowledge has not been shown before. Furthermore, we formulate a novel Expectation-Maximization (EM) based method that automatically locates discriminative patches robustly by utilizing the spatial relationships of patches. We apply our method to the classification of glioma and non-small-cell lung carcinoma cases into subtypes. The classification accuracy of our method is similar to the inter-observer agreement between pathologists. Although it is impossible to train CNNs on WSIs, we experimentally demonstrate using a comparable non-cancer dataset of smaller images that a patch-based CNN can outperform an image-based CNN.",authors:"Hou L, Samaras D, Kurc TM, Gao Y, Davis JE, Saltz JH.",description:"Proc IEEE Comput Soc Conf Comput Vis Pattern Recognit.  2016",doi:null,duplicate:!1,email:["lehhou@cs.stonybrook.edu","samaras@cs.stonybrook.edu","tahsin.kurc@stonybrook.edu","joel.saltz@stonybrook.edu","yi.gao@stonybrookmedicine.edu","james.davis@stonybrookmedicine.edu"],email_new:["lehhou@cs.stonybrook.edu","samaras@cs.stonybrook.edu","tahsin.kurc@stonybrook.edu","joel.saltz@stonybrook.edu","yi.gao@stonybrookmedicine.edu","james.davis@stonybrookmedicine.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/27795661",key:"dc8439cf-1207-4cd9-b68f-3303b1640887",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"patch-based convolutional neural network for whole slide tissue image classification",tools:["caffe"],year:2016,id:"dc8439cf-1207-4cd9-b68f-3303b1640887.pdf",use:1,domain:"pathology",task_1:"classification",task_2:"0",data_type:"wsi",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://portal.gdc.cancer.gov/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE Conference on Computer Vision and Pattern Recognition",public:1,"Unnamed: 40":null},{abstract:"Machine learning analysis of neuroimaging data can accurately predict chronological age in healthy people and deviations from healthy brain ageing have been associated with cognitive impairment and disease. Here we sought to further establish the credentials of brain-predicted age as a biomarker of individual differences in the brain ageing process, using a predictive modelling approach based on deep learning, and specifically convolutional neural networks (CNN), and applied to both pre-processed and raw T1-weighted MRI data. Firstly, we aimed to demonstrate the accuracy of CNN brain-predicted age using a large dataset of healthy adults (N = 2001). Next, we sought to establish the heritability of brain-predicted age using a sample of monozygotic and dizygotic female twins (N = 62). Thirdly, we examined the test-retest and multi-centre reliability of brain-predicted age using two samples (within-scanner N = 20; between-scanner N = 11). CNN brain-predicted ages were generated and compared to a Gaussian Process Regression (GPR) approach, on all datasets. Input data were grey matter (GM) or white matter (WM) volumetric maps generated by Statistical Parametric Mapping (SPM) or raw data. Brain-predicted age represents an accurate, highly reliable and genetically-valid phenotype, that has potential to be used as a biomarker of brain ageing. Moreover, age predictions can be accurately generated on raw T1-MRI data, substantially reducing computation time for novel data, bringing the process closer to giving real-time information on brain health in clinical settings.",authors:"James H Cole, Rudra PK Poudel, Dimosthenis Tsagkrasoulis, Matthan WA Caan, Claire Steves, Tim D Spector, Giovanni Montana",description:"Retrieved from arXiv. 2016",doi:null,duplicate:!1,email:["giovanni.montana@kcl.ac.uk"],email_new:["giovanni.montana@kcl.ac.uk"],fullUrl:"https://arxiv.org/abs/1612.02572",key:"9ca4bc2e-ed46-41d6-a24b-b1f2b58a4228",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1612.02572.pdf",phase:1,received:0,source:"arxiv",title:"predicting brain age with deep learning from raw imaging data results in a reliable and heritable biomarker",tools:["torch"],year:2016,id:"9ca4bc2e-ed46-41d6-a24b-b1f2b58a4228.pdf",use:1,domain:"radiology",task_1:"regression",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"1",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"UK",country_2:"Netherlands",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"As a part of the automatic study of visual attention of affected populations with neurodegenerative diseases and to predict whether new gaze records a complaint of these diseases, we should design an automatic model that predicts salient areas in video. Past research showed, that people suffering form dementia are not reactive with regard to degradations on still images. In this paper we study the reaction of healthy normal control subjects on degraded area in videos. Furthermore, in the goal to build an automatic prediction model for salient areas in intentionally degraded videos, we design a deep learning architecture and measure its performances when predicting salient regions on completely unseen data. The obtained results are interesting regarding the reaction of normal control subjects against a degraded area in video.",authors:"S. Chaabouni,  F. Tison,  J. Benois-Pineau,  C. Ben Amar",description:"2016 14th International Workshop on Content-Based Multimedia Indexing (CBMI). 2016",doi:"10.1109/CBMI.2016.7500243",duplicate:!1,email:["souad.chaabouni@labri.fr","benois-p@labri.fr","francois.tison@chu-bordeaux.fr","chokri.benamar@ieee.org"],email_new:["souad.chaabouni@labri.fr","benois-p@labri.fr","francois.tison@chu-bordeaux.fr","chokri.benamar@ieee.org"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7500243",key:"21ca4519-4415-4c97-8d05-a26b35ebefae",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"prediction of visual attention with deep cnn for studies of neurodegenerative diseases",tools:["caffe"],year:2016,id:"21ca4519-4415-4c97-8d05-a26b35ebefae.pdf",use:1,domain:"neurology",task_1:"saliency",task_2:"0",data_type:"video",data_type_1:"0",data_type_2:"0",location:"gaze",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.di.ens.fr/~laptev/actions/hollywood2/",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:0,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"1707",training:823,validation:0,testing:884,cross_validation:0,country_1:"France",country_2:"Tunisia",country_3:"0",journal:"0",impact_factor:0,conference:"2016 14th International Workshop on Content-Based Multimedia Indexing (CBMI)",public:0,"Unnamed: 40":null},{abstract:"A novel deep learning architecture (XmasNet) based on convolutional neural networks was developed for the classification of prostate cancer lesions, using the 3D multiparametric MRI data provided by the PROSTATEx challenge. End-to-end training was performed for XmasNet, with data augmentation done through 3D rotation and slicing, in order to incorporate the 3D information of the lesion. XmasNet outperformed traditional machine learning models based on engineered features, for both train and test data. For the test data, XmasNet outperformed 69 methods from 33 participating groups and achieved the second highest AUC (0.84) in the PROSTATEx challenge. This study shows the great potential of deep learning for cancer imaging.",authors:"Saifeng Liu, Huaixiu Zheng, Yesu Feng, Wei Li",description:"4 pages, 4 figures, Proc. SPIE 10134, Medical Imaging 2017. 2017",doi:null,duplicate:!1,email:["liusaifeng@gmail.com","huaixiu.zheng2013@gmail.com"],email_new:["liusaifeng@gmail.com","huaixiu.zheng2013@gmail.com"],fullUrl:"https://arxiv.org/abs/1703.04078",key:"f56d6cd2-83ca-421a-96b3-9f521cbda975",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1703.04078.pdf",phase:1,received:0,source:"arxiv",title:"prostate cancer diagnosis using deep learning with 3d multiparametric mri",tools:["caffe"],year:2017,id:"f56d6cd2-83ca-421a-96b3-9f521cbda975.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"prostate",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://spie.org/x115569.xml?wt.mc_id=rmi17gb&SSO=1",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"Canada",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"This paper proposes a new approach to automatically quantify the severity of knee osteoarthritis (OA) from radiographs using deep convolutional neural networks (CNN). Clinically, knee OA severity is assessed using Kellgren & Lawrence (KL) grades, a five point scale. Previous work on automatically predicting KL grades from radiograph images were based on training shallow classifiers using a variety of hand engineered features. We demonstrate that classification accuracy can be significantly improved using deep convolutional neural network models pre-trained on ImageNet and fine-tuned on knee OA images. Furthermore, we argue that it is more appropriate to assess the accuracy of automatic knee OA severity predictions using a continuous distance-based evaluation metric like mean squared error than it is to use classification accuracy. This leads to the formulation of the prediction of KL grades as a regression problem and further improves accuracy. Results on a dataset of X-ray images and KL grades from the Osteoarthritis Initiative (OAI) show a sizable improvement over the current state-of-the-art.",authors:"J. Antony,  K. McGuinness,  N. E. O'Connor,  K. Moran",description:"2016 23rd International Conference on Pattern Recognition (ICPR). 2016",doi:"10.1109/ICPR.2016.7899799",duplicate:!1,email:["joseph.antony2@mail.dcu.ie"],email_new:["joseph.antony2@mail.dcu.ie"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7899799",key:"f8ce9555-71a2-46c9-afa5-bfe4c7df1272",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"quantifying radiographic knee osteoarthritis severity using deep convolutional neural networks",tools:["caffe"],year:2016,id:"f8ce9555-71a2-46c9-afa5-bfe4c7df1272.pdf",use:1,domain:"radiology",task_1:"regression",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"knee",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"http://www.robots.ox.ac.uk/~vgg/research/very_deep/",based_on_1_name:"vgg_very_deep_convnets",based_on_2:"https://github.com/BVLC/caffe/tree/master/models/bvlc_reference_caffenet",based_on_2_name:"bvlc_caffenet",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Ireland",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 23rd International Conference on Pattern Recognition (ICPR)",public:0,"Unnamed: 40":null},{abstract:"In this paper, we present a Convolutional Neural Network (CNN) regression approach for real-time 2-D/3-D registration. Different from optimization-based methods, which iteratively optimize the transformation parameters over a scalar-valued metric function representing the quality of the registration, the proposed method exploits the information embedded in the appearances of the Digitally Reconstructed Radiograph and X-ray images, and employs CNN regressors to directly estimate the transformation parameters. The CNN regressors are trained for local zones and applied in a hierarchical manner to break down the complex regression task into simpler sub-tasks that can be learned separately. Our experiment results demonstrate the advantage of the proposed method in computational efficiency with negligible degradation of registration accuracy compared to intensity-based methods.",authors:"S. Miao,  Z. J. Wang,  Y. Zheng,  R. Liao",description:"2016 IEEE 13th International Symposium on Biomedical Imaging (ISBI). 2016",doi:"10.1109/ISBI.2016.7493536",duplicate:!1,email:["smiao@ece.ubc.ca","shun.miao@siemens.com"],email_new:["smiao@ece.ubc.ca","shun.miao@siemens.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7493536",key:"9770284b-6194-487f-a284-abb5003670b5",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"real-time 2d/3d registration via cnn regression",tools:["caffe"],year:2016,id:"9770284b-6194-487f-a284-abb5003670b5.pdf",use:1,domain:"radiology",task_1:"registration",task_2:"0",data_type:"xray",data_type_1:"0",data_type_2:"0",location:"multi-organ",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Canada",country_2:"USA",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Accurate reconstruction of anatomical connections between neurons in the brain using electron microscopy (EM) images is considered to be the gold standard for circuit mapping. A key step in obtaining the reconstruction is the ability to automatically segment neurons with a precision close to human-level performance. Despite the recent technical advances in EM image segmentation, most of them rely on hand-crafted features to some extent that are specific to the data, limiting their ability to generalize. Here, we propose a simple yet powerful technique for EM image segmentation that is trained end-to-end and does not rely on prior knowledge of the data. Our proposed residual deconvolutional network consists of two information pathways that capture full-resolution features and contextual information, respectively. We showed that the proposed model is very effective in achieving the conflicting goals in dense output prediction; namely preserving full-resolution predictions and including sufficient contextual information. We applied our method to the ongoing open challenge of 3D neurite segmentation in EM images. Our method achieved one of the top results on this open challenge. We demonstrated the generality of our technique by evaluating it on the 2D neurite segmentation challenge dataset where consistently high performance was obtained. We thus expect our method to generalize well to other dense output prediction problems.",authors:"A. Fakhry,  T. Zeng,  S. Ji",description:"IEEE Transactions on Medical Imaging. 2017",doi:"10.1109/TMI.2016.2613019",duplicate:!1,email:["afakhry@cs.odu.edu","tzeng@eecs.wsu.edu","sji@eecs.wsu.edu"],email_new:["afakhry@cs.odu.edu","tzeng@eecs.wsu.edu","sji@eecs.wsu.edu"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7575638",key:"78d046bc-0d81-412d-947f-c29f4d31af74",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"residual deconvolutional networks for brain electron microscopy image segmentation",tools:["caffe"],year:2017,id:"78d046bc-0d81-412d-947f-c29f4d31af74.pdf",use:1,domain:"microscopy",task_1:"segmentation",task_2:"0",data_type:"electron microscopy",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"rdn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://brainiac2.mit.edu/SNEMI3D/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE Transactions on Medical Imaging",public:0,"Unnamed: 40":null},{abstract:"Vessel segmentation is a key step for various medical applications. This paper introduces the deep learning architecture to improve the performance of retinal vessel segmentation. Deep learning architecture has been demonstrated having the powerful ability in automatically learning the rich hierarchical representations. In this paper, we formulate the vessel segmentation to a boundary detection problem, and utilize the fully convolutional neural networks (CNNs) to generate a vessel probability map. Our vessel probability map distinguishes the vessels and background in the inadequate contrast region, and has robustness to the pathological regions in the fundus image. Moreover, a fully-connected Conditional Random Fields (CRFs) is also employed to combine the discriminative vessel probability map and long-range interactions between pixels. Finally, a binary vessel segmentation result is obtained by our method. We show that our proposed method achieve a state-of-the-art vessel segmentation performance on the DRIVE and STARE datasets.",authors:"H. Fu,  Y. Xu,  D. W. K. Wong,  J. Liu",description:"2016 IEEE 13th International Symposium on Biomedical Imaging (ISBI). 2016",doi:"10.1109/ISBI.2016.7493362",duplicate:!1,email:["fuhz@i2r.a-star.edu.sg","yaxu@i2r.a-star.edu.sg","wkwong@i2r.a-star.edu.sg","jliu@i2r.a-star.edu.sg"],email_new:["fuhz@i2r.a-star.edu.sg","yaxu@i2r.a-star.edu.sg","wkwong@i2r.a-star.edu.sg","jliu@i2r.a-star.edu.sg"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7493362",key:"9ac767ad-078a-4749-ad9b-a424df266751",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"retinal vessel segmentation via deep learning network and fully-connected conditional random fields",tools:["caffe"],year:2016,id:"9ac767ad-078a-4749-ad9b-a424df266751.pdf",use:1,domain:"ophthalmology",task_1:"segmentation",task_2:"0",data_type:"fundus photography",data_type_1:"0",data_type_2:"0",location:"eye",location_1:"0",method_1:"hnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.isi.uu.nl/Research/Databases/DRIVE/",data_link_2:"http://cecas.clemson.edu/~ahoover/stare/",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/s9xie/hed",based_on_1_name:"holistically_nested_edge_detection",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Singapore",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE 13th International Symposium on Biomedical Imaging (ISBI)",public:1,"Unnamed: 40":null},{abstract:"R-CNN (region-convolutional neural network) has recently achieved very outstanding results in variety of visual detecting fields, and its function of object-proposal-generation can achieve effective training models by using as small samples as possible in the field of machine learning. In this paper, a modified R-CNN is proposed and applied to detect cells under phase contrast microscopy images by adopting multiple object-proposal-generations instead of a single one to extract candidate regions. The results show that the proposed method can obtain better performance than the traditional method by using a single object-proposal-generation.",authors:"F. Deng,  H. Hu,  S. Chen,  Q. Guan,  Y. Zou",description:"2015 Sixth International Conference on Intelligent Control and Information Processing (ICICIP). 2015",doi:"10.1109/ICICIP.2015.7388195",duplicate:!1,email:["csy@zjut.edu.cn"],email_new:["csy@zjut.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7388195",key:"2a2d0c01-4d6f-4ee5-9ecd-7652866e82ac",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"rich feature hierarchies for cell detecting under phase contrast microscopy images",tools:["caffe"],year:2015,id:"2a2d0c01-4d6f-4ee5-9ecd-7652866e82ac.pdf",use:1,domain:"microscopy",task_1:"detection",task_2:"0",data_type:"phase contrast microscopy",data_type_1:"0",data_type_2:"0",location:"0",location_1:"0",method_1:"regioncnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"100",training:80,validation:0,testing:20,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2015 Sixth International Conference on Intelligent Control and Information Processing (ICICIP)",public:0,"Unnamed: 40":null},{abstract:"We present a deep learning based framework, called ROSE, to accurately predict ribosome stalling events in translation elongation from coding sequences based on high-throughput ribosome profiling data. Our validation results demonstrate the superior performance of ROSE over conventional prediction models. ROSE provides an effective index to estimate the likelihood of translational pausing at codon resolution and understand diverse putative regulatory factors of ribosome stalling. Also, the ribosome stalling landscape computed by ROSE can recover the functional interplay between ribosome stalling and cotranslational events in protein biogenesis, including protein targeting by the signal recognition particle (SRP) and protein secondary structure formation.",authors:"Sai Zhang, Hailin Hu, Jingtian Zhou, Xuan He, Tao Jiang, Jianyang Zeng",description:"Retrieved from bioRxiv. 2016",doi:null,duplicate:!1,email:["zengjy321@tsinghua.edu.cn"],email_new:["zengjy321@tsinghua.edu.cn"],fullUrl:"http://www.biorxiv.org/content/early/2016/11/15/067108",key:"e960c273-a280-41cc-938a-63d30f3c31ea",keyok:1,keywords:null,pdfUrl:"http://www.biorxiv.org/content/early/2016/11/15/067108.full.pdf",phase:1,received:0,source:"biorxiv",title:"rose: a deep learning based framework for predicting ribosome stalling",tools:["caffe"],year:2016,id:"e960c273-a280-41cc-938a-63d30f3c31ea.pdf",use:1,domain:"genomics",task_1:"classification",task_2:"0",data_type:"sequence",data_type_1:"0",data_type_2:"0",location:"cell",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.uniprot.org/",data_link_2:"https://gwips.ucc.ie/",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"China",country_3:"0",journal:"0",impact_factor:0,conference:"0",public:1,"Unnamed: 40":null},{abstract:"PURPOSE: Accurate segmentation of organs-at-risks (OARs) is the key step for efficient planning of radiation therapy for head and neck (HaN) cancer treatment. In the work, we proposed the first deep learning-based algorithm, for segmentation of OARs in HaN CT images, and compared its performance against state-of-the-art automated segmentation algorithms, commercial software, and interobserver variability. METHODS: Convolutional neural networks (CNNs)-a concept from the field of deep learning-were used to study consistent intensity patterns of OARs from training CT images and to segment the OAR in a previously unseen test CT image. For CNN training, we extracted a representative number of positive intensity patches around voxels that belong to the OAR of interest in training CT images, and negative intensity patches around voxels that belong to the surrounding structures. These patches then passed through a sequence of CNN layers that captured local image features such as corners, end-points, and edges, and combined them into more complex high-order features that can efficiently describe the OAR. The trained network was applied to classify voxels in a region of interest in the test image where the corresponding OAR is expected to be located. We then smoothed the obtained classification results by using Markov random fields algorithm. We finally extracted the largest connected component of the smoothed voxels classified as the OAR by CNN, performed dilate-erode operations to remove cavities of the component, which resulted in segmentation of the OAR in the test image. RESULTS: The performance of CNNs was validated on segmentation of spinal cord, mandible, parotid glands, submandibular glands, larynx, pharynx, eye globes, optic nerves, and optic chiasm using 50 CT images. The obtained segmentation results varied from 37.4% Dice coefficient (DSC) for chiasm to 89.5% DSC for mandible. We also analyzed the performance of state-of-the-art algorithms and commercial software reported in the literature, and observed that CNNs demonstrate similar or superior performance on segmentation of spinal cord, mandible, parotid glands, larynx, pharynx, eye globes, and optic nerves, but inferior performance on segmentation of submandibular glands and optic chiasm. CONCLUSION: We concluded that convolution neural networks can accurately segment most of OARs using a representative database of 50 HaN CT images. At the same time, inclusion of additional information, for example, MR images, may be beneficial to some OARs with poorly visible boundaries. \xa9 2016 American Association of Physicists in Medicine.",authors:"Ibragimov B, Xing L.",description:"Med Phys.  2017",doi:null,duplicate:!1,email:["bulat@stanford.edu"],email_new:["bulat@stanford.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28205307",key:"a274c952-6989-478c-bd5c-47dd0902015f",keyok:1,keywords:"convolutional neural networks; deep learning; head and neck; radiotherapy; segmentation",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"segmentation of organs-at-risks in head and neck ct images using convolutional neural networks",tools:["cntk"],year:2017,id:"a274c952-6989-478c-bd5c-47dd0902015f.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"multi-organ",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"medical physics",impact_factor:2.635,conference:"0",public:0,"Unnamed: 40":null},{abstract:"The accurate segmentation of pulmonary CT images is of great significance to clinical computer-aided diagnosis and treatment. In order to avoid the explicit extraction of image features and improve the efficiency of image segmentation and reduce the influence of human factors on the segmentation results, this paper proposes a method of segmenting pulmonary CT image based on membership function convolution neural network (MFCNN). First, the method uses pulmonary CT image filtered by the Gaussian as the input data of the convolution neural network. Then, that uses the improved convolution neural network to achieve the initial segmentation of the image. Finally, the final segmentation result is obtained by setting the threshold based on this paper method. After experimental comparison, this paper demonstrates the feasibility and effectiveness of convolution neural network in the segmentation of pulmonary CT images.",authors:"J. Xu,  H. Liu",description:"2017 IEEE International Conference on Computational Science and Engineering (CSE) and IEEE International Conference on Embedded and Ubiquitous Computing (EUC). 2017",doi:"10.1109/CSE-EUC.2017.42",duplicate:!1,email:["xxxuuujjjuuunnn@126.com","liuh_lh@126.com"],email_new:["xxxuuujjjuuunnn@126.com","liuh_lh@126.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=8005794",key:"e9a0a42f-0c1e-4eb9-bd87-9f81126e8bfe",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"segmentation of pulmonary ct image by using convolutional neural network based on membership function",tools:["caffe"],year:2017,id:"e9a0a42f-0c1e-4eb9-bd87-9f81126e8bfe.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"lung",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/blob/master/examples/mnist/lenet.prototxt",based_on_1_name:"bvlc_lenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 IEEE International Conference on Computational Science and Engineering (CSE) and IEEE International Conference on Embedded and Ubiquitous Computing (EUC)",public:0,"Unnamed: 40":null},{abstract:"The condition of the vascular network of human eye is an important diagnostic factor in ophthalmology. Its segmentation in fundus imaging is a nontrivial task due to variable size of vessels, relatively low contrast, and potential presence of pathologies like microaneurysms and hemorrhages. Many algorithms, both unsupervised and supervised, have been proposed for this purpose in the past. We propose a supervised segmentation technique that uses a deep neural network trained on a large (up to 400[Formula: see text]000) sample of examples preprocessed with global contrast normalization, zero-phase whitening, and augmented using geometric transformations and gamma corrections. Several variants of the method are considered, including structured prediction, where a network classifies multiple pixels simultaneously. When applied to standard benchmarks of fundus imaging, the DRIVE, STARE, and CHASE databases, the networks significantly outperform the previous algorithms on the area under ROC curve measure (up to &gt; 0.99) and accuracy of classification (up to &gt; 0.97 ). The method is also resistant to the phenomenon of central vessel reflex, sensitive in detection of fine vessels ( sensitivity &gt; 0.87 ), and fares well on pathological cases.",authors:"Liskowski P, Krawiec K.",description:"IEEE Trans Med Imaging.  2016",doi:null,duplicate:!1,email:["pliskowski@cs.put.poznan.pl","kkrawiec@cs.put.poznan.pl"],email_new:["pliskowski@cs.put.poznan.pl","kkrawiec@cs.put.poznan.pl"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/27046869",key:"d13ef99d-bf6b-45de-b094-420da3a2e7ab",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"pubmed",title:"segmenting retinal blood vessels with deep neural networks",tools:["caffe"],year:2016,id:"d13ef99d-bf6b-45de-b094-420da3a2e7ab.pdf",use:1,domain:"ophthalmology",task_1:"segmentation",task_2:"0",data_type:"fundus photography",data_type_1:"0",data_type_2:"0",location:"eye",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.isi.uu.nl/Research/Databases/DRIVE/",data_link_2:"http://cecas.clemson.edu/~ahoover/stare/",data_ok:null,code_public:1,code_link:"http://www.cs.put.poznan.pl/dltmi",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Poland",country_2:"0",country_3:"0",journal:"IEEE Transactions on Medical Imaging",impact_factor:3.942,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Low Dose Computed tomography (CT) has offered tremendous benefits in radiation restricted applications, but the quantum noise as resulted by the insufficient number of photons could potentially harm the diagnostic performance. Current image-based denoising methods tend to produce a blur effect on the final reconstructed results especially in high noise levels. In this paper, a deep learning based approach was proposed to mitigate this problem. An adversarially trained network and a sharpness detection network were trained to guide the training process. Experiments on both simulated and real dataset shows that the results of the proposed method have very small resolution loss and achieves better performance relative to the-state-of-art methods both quantitatively and visually.",authors:"Xin Yi, Paul Babyn",description:"Retrieved from arXiv. 2017",doi:null,duplicate:!1,email:["xiy525@mail.usask.ca"],email_new:["xiy525@mail.usask.ca"],fullUrl:"https://arxiv.org/abs/1708.06453",key:"972e8f62-0a96-4c59-b7b9-89f4ba0212ad",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1708.06453.pdf",phase:1,received:0,source:"arxiv",title:"sharpness-aware low dose ct denoising using conditional generative adversarial network",tools:["digits","torch"],year:2017,id:"972e8f62-0a96-4c59-b7b9-89f4ba0212ad.pdf",use:1,domain:"radiology",task_1:"denoising",task_2:"0",data_type:"ct",data_type_1:"0",data_type_2:"0",location:"multi-organ",location_1:"0",method_1:"gan",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"https://imaging.nci.nih.gov/ncia/login.jsf",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://lmb.informatik.uni-freiburg.de/people/ronneber/u-net/",based_on_1_name:"unet",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Canada",country_2:"0",country_3:"0",journal:"Journal of Digital Imaging",impact_factor:1.407,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Vessel segmentation of digital retinal images plays an important role in diagnosis of diseases such as diabetics, hypertension and retinopathy of prematurity due to these diseases impact the retina. In this paper, a novel Size-Invariant Fully Convolutional Neural Network (SIFCN) is proposed to address the automatic retinal vessel segmentation problems. The input data of the network is the patches of images and the corresponding pixel-wise labels. A consecutive convolution layers and pooling layers follow the input data, so that the network can learn the abstract features to segment retinal vessel. Our network is designed to hold the height and width of data of each layer with padding and assign pooling stride so that the spatial information maintain and up-sample is not required. Compared with the pixel-wise retinal vessel segmentation approaches, our patch-wise segmentation is much more efficient since in each cycle it can predict all the pixels of the patch. Our overlapped SIFCN approach achieves accuracy of 0.9471, with the AUC of 0.9682. And our non-overlap SIFCN is the most efficient approach among the deep learning approaches, costing only 3.68 seconds per image, and the overlapped SIFCN costs 31.17 seconds per image.",authors:"Y. Luo,  H. Cheng,  L. Yang",description:"2016 Asia-Pacific Signal and Information Processing Association Annual Summit and Conference (APSIPA). 2016",doi:"10.1109/APSIPA.2016.7820677",duplicate:!1,email:["1099361041@qq.com","hcheng@uestc.edu.cn","yanglu@uestc.edu.cn"],email_new:["1099361041@qq.com","hcheng@uestc.edu.cn","yanglu@uestc.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7820677",key:"4c314e2b-7f3b-437e-bf24-b341ea4dbe84",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"size-invariant fully convolutional neural network for vessel segmentation of digital retinal images",tools:["caffe"],year:2016,id:"4c314e2b-7f3b-437e-bf24-b341ea4dbe84.pdf",use:1,domain:"ophthalmology",task_1:"segmentation",task_2:"0",data_type:"fundus photography",data_type_1:"0",data_type_2:"0",location:"eye",location_1:"0",method_1:"fullycnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.isi.uu.nl/Research/Databases/DRIVE/",data_link_2:"0",data_ok:1,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 Asia-Pacific Signal and Information Processing Association Annual Summit and Conference (APSIPA)",public:0,"Unnamed: 40":null},{abstract:"A baby's gestational age determines whether or not they are preterm, which helps clinicians decide on suitable post-natal treatment. The most accurate dating methods use Ultrasound Scan (USS) machines, but these machines are expensive, require trained personnel and cannot always be deployed to remote areas. In the absence of USS, the Ballard Score can be used, which is a manual postnatal dating method. However, this method is highly subjective and results can vary widely depending on the experience of the rater. In this paper, we present an automatic system for postnatal gestational age estimation aimed to be deployed on mobile phones, using small sets of images of a newborn's face, foot and ear. We present a novel two-stage approach that makes the most out of Convolutional Neural Networks trained on small sets of images to predict broad classes of gestational age, and then fuse the outputs of these discrete classes with a baby's weight to make fine-grained predictions of gestational age. On a purpose=collected dataset of 88 babies, experiments show that our approach attains an expected error of 6 days and is three times more accurate than the manual postnatal method (Ballard). Making use of images improves predictions by 30% compared to using weight only. This indicates that even with a very small set of data, our method is a viable candidate for postnatal gestational age estimation in areas were USS is not available.",authors:"M. T. Torres,  M. F. Valstar,  C. Henry,  C. Ward,  D. Sharkey",description:"2017 12th IEEE International Conference on Automatic Face & Gesture Recognition (FG 2017). 2017",doi:"10.1109/FG.2017.19",duplicate:!1,email:["michel.valstar@nottingham.ac.uk"],email_new:["michel.valstar@nottingham.ac.uk"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7961726",key:"351c16ad-87b3-462b-a38f-eca2ae400dd6",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"small sample deep learning for newborn gestational age estimation",tools:["caffe"],year:2017,id:"351c16ad-87b3-462b-a38f-eca2ae400dd6.pdf",use:1,domain:"gestation",task_1:"segmentation",task_2:"regression",data_type:"photographic",data_type_1:"0",data_type_2:"0",location:"infant",location_1:"0",method_1:"fullycnn",method_2:"cnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://github.com/shelhamer/fcn.berkeleyvision.org",based_on_1_name:"bvlc_fully_convolutional_nets",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:"88",training:0,validation:0,testing:0,cross_validation:1,country_1:"UK",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 IEEE 12th International Conference on Automatic Face & Gesture Recognition",public:0,"Unnamed: 40":null},{abstract:"Automated nuclear detection is a critical step for a number of computer assisted pathology related image analysis algorithms such as for automated grading of breast cancer tissue specimens. The Nottingham Histologic Score system is highly correlated with the shape and appearance of breast cancer nuclei in histopathological images. However, automated nucleus detection is complicated by 1) the large number of nuclei and the size of high resolution digitized pathology images, and 2) the variability in size, shape, appearance, and texture of the individual nuclei. Recently there has been interest in the application of \u201cDeep Learning\u201d strategies for classification and analysis of big image data. Histopathology, given its size and complexity, represents an excellent use case for application of deep learning strategies. In this paper, a Stacked Sparse Autoencoder (SSAE), an instance of a deep learning strategy, is presented for efficient nuclei detection on high-resolution histopathological images of breast cancer. The SSAE learns high-level features from just pixel intensities alone in order to identify distinguishing features of nuclei. A sliding window operation is applied to each image in order to represent image patches via high-level features obtained via the auto-encoder, which are then subsequently fed to a classifier which categorizes each image patch as nuclear or non-nuclear. Across a cohort of 500 histopathological images (2200 \xd7 2200) and approximately 3500 manually segmented individual nuclei serving as the groundtruth, SSAE was shown to have an improved F-measure 84.49% and an average area under Precision-Recall curve (AveP) 78.83%. The SSAE approach also out-performed nine other state of the art nuclear detection strategies.",authors:"J. Xu,  L. Xiang,  Q. Liu,  H. Gilmore,  J. Wu,  J. Tang,  A. Madabhushi",description:"IEEE Transactions on Medical Imaging. 2016",doi:"10.1109/TMI.2015.2458702",duplicate:!1,email:["axm788@case.edu","xujung@gmail.com"],email_new:["axm788@case.edu","xujung@gmail.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7163353",key:"77c59385-02aa-4329-a9d1-9b80483efae0",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"stacked sparse autoencoder (ssae) for nuclei detection on breast cancer histopathology images",tools:["caffe"],year:2016,id:"77c59385-02aa-4329-a9d1-9b80483efae0.pdf",use:1,domain:"pathology",task_1:"detection",task_2:"0",data_type:"histapathology",data_type_1:"0",data_type_2:"0",location:"breast",location_1:"0",method_1:"ssae",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://engineering.case.edu/centers/ccipd/data",data_link_2:"0",data_ok:null,code_public:1,code_link:"http://engineering.case.edu/centers/ccipd/data",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"USA",country_3:"0",journal:"0",impact_factor:0,conference:"2015 IEEE Transactions on Medical Imaging",public:0,"Unnamed: 40":null},{abstract:"Automatic localization of the standard plane containing complicated anatomical structures in ultrasound (US) videos remains a challenging problem. In this paper, we present a learning-based approach to locate the fetal abdominal standard plane (FASP) in US videos by constructing a domain transferred deep convolutional neural network (CNN). Compared with previous works based on low-level features, our approach is able to represent the complicated appearance of the FASP and hence achieve better classification performance. More importantly, in order to reduce the overfitting problem caused by the small amount of training samples, we propose a transfer learning strategy, which transfers the knowledge in the low layers of a base CNN trained from a large database of natural images to our task-specific CNN. Extensive experiments demonstrate that our approach outperforms the state-of-the-art method for the FASP localization as well as the CNN only trained on the limited US training samples. The proposed approach can be easily extended to other similar medical image computing problems, which often suffer from the insufficient training samples when exploiting the deep CNN to represent high-level features.",authors:"H. Chen,  D. Ni,  J. Qin,  S. Li,  X. Yang,  T. Wang,  P. A. Heng",description:"IEEE Journal of Biomedical and Health Informatics. 2015",doi:"10.1109/JBHI.2015.2425041",duplicate:!1,email:["jackie.haochen@gmail.com","nidong@szu.edu.cn","jqin@szu.edu.cn","lishengli63@126.com","pheng@cse.cuhk.edu.hk"],email_new:["jackie.haochen@gmail.com","nidong@szu.edu.cn","jqin@szu.edu.cn","lishengli63@126.com","pheng@cse.cuhk.edu.hk"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7090943",key:"2f4ae966-7c74-4fb8-923e-301ac4d845fa",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"standard plane localization in fetal ultrasound via domain transferred deep neural networks",tools:["caffe"],year:2015,id:"2f4ae966-7c74-4fb8-923e-301ac4d845fa.pdf",use:1,domain:"radiology",task_1:"plane detection",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"fetal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_reference_caffenet",based_on_1_name:"bvlc_caffenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:"519",training:300,validation:0,testing:219,cross_validation:0,country_1:"China",country_2:"Hong Kong",country_3:"0",journal:"IEEE Journal of Biomedical and Health Informatics",impact_factor:3.451,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Super-resolution (SR) of single image is a meaningful challenge in medical images based diagnosis, while the image resolution is limited. Also, numerous deep neural networks based models were proposed and achieve excellent performance which is superior to the previous handcrafted methods. In this paper, we employ a deep convolutional neural networks for the super-resolution (SR) of single medical image, which learns the nonlinear mapping from the low-resolution space to high-resolution space directly. In addition, we use three sets imaging data (Mammary gland, Prostate tissue and Human brain) training deep network respectively. Firstly, we use Randomized Rectified Linear Unit (RReLU), which incorporates a nonzero slope for negative part to solve the problem of over compression. Secondly, for the purpose of enhancing the quality of reconstructed result and reducing the noise of over-fitting, Nesterov's Accelerated Gradient (NAG) method on the SRCNN is used to accelerate the convergence of loss function and avoid the large oscillations. A comparative performance evaluation is carried out over a set of experiments using real imaging data to verify the validity of proposed algorithm.",authors:"X. Yang,  S. Zhant,  C. Hu,  Z. Liang,  D. Xie",description:"2016 8th International Conference on Wireless Communications & Signal Processing (WCSP). 2016",doi:"10.1109/WCSP.2016.7752617",duplicate:!1,email:["shu_zhan@hfut.edu.cn"],email_new:["shu_zhan@hfut.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7752617",key:"749fd3f7-ddb7-4bd2-b802-00b81963eef1",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"super-resolution of medical image using representation learning",tools:["caffe"],year:2016,id:"749fd3f7-ddb7-4bd2-b802-00b81963eef1.pdf",use:1,domain:"radiology",task_1:"super resolution",task_2:"0",data_type:"ct",data_type_1:"mri",data_type_2:"0",location:"breast",location_1:"prostate",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 8th International Conference on Wireless Communications & Signal Processing",public:0,"Unnamed: 40":null},{abstract:"With many thyroid nodules being incidentally detected, it is important to identify as many malignant nodules as possible while excluding those that are highly likely to be benign from fine needle aspiration (FNA) biopsies or surgeries. This paper presents a computer-aided diagnosis (CAD) system for classifying thyroid nodules in ultrasound images. We use deep learning approach to extract features from thyroid ultrasound images. Ultrasound images are pre-processed to calibrate their scale and remove the artifacts. A pre-trained GoogLeNet model is then fine-tuned using the pre-processed image samples which leads to superior feature extraction. The extracted features of the thyroid ultrasound images are sent to a Cost-sensitive Random Forest classifier to classify the images into 'malignant' and 'benign' cases. The experimental results show the proposed fine-tuned GoogLeNet model achieves excellent classification performance, attaining 98.29% classification accuracy, 99.10% sensitivity and 93.90% specificity for the images in an open access database (Pedraza et al. 16), while 96.34% classification accuracy, 86% sensitivity and 99% specificity for the images in our local health region database.",authors:"Chi J, Walia E, Babyn P, Wang J, Groot G, Eramian M.",description:"J Digit Imaging.  2017",doi:null,duplicate:!1,email:["chi.jianning@gmail.com"],email_new:["chi.jianning@gmail.com"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/28695342",key:"e42f4303-10cc-4ed4-ae84-f9c43037c5c8",keyok:1,keywords:"Computer vision; Convolutional neural network; Deep learning; Fine-tuning; Machine learning; Thyroid nodules; Ultrasonography",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"thyroid nodule classification in ultrasound images by fine-tuning deep convolutional neural network",tools:["caffe"],year:2017,id:"e42f4303-10cc-4ed4-ae84-f9c43037c5c8.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"thyroid",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:1,data_upon_request:0,data_shared:0,data_link_1:"http://www.cimalab.unal.edu.co/",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet",based_on_1_name:"bvlc_googlelenet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Canada",country_2:"0",country_3:"0",journal:"Journal of Digital Imaging",impact_factor:1.407,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Tongue diagnosis is one of the most important parts in \u201cinspection diagnosis\u201d of Traditional Chinese Medicine (TCM). Observing tongue shape can help to understand the changes in human body and thereby to estimate the illness. This paper presents a method of recognizing tongue shapes based on Convolution Neural Network. The proposed method enhances the features of tongue images with preprocessing to ensure the data suitable for tongue shape binary classification. In view of the special texture and outline of tongue, the whole tongue images of dot-sting tongue and fissured tongue is transformed by Gabor filter, and the tooth-marked are processed by boundary detection approach. CNN is adopted because it has achieved remarkable results in computer vision and pattern recognition, and the model training through neural network coincides with the Chinese medicine dialectics through experience. Based on commonly used Alex-net, network is optimized with batch normalization to improve efficiency. The experimental results indicate that the preprocessing methods increase the accuracy and decreases the time of training process of tongue shape classification, which proves that the method is effective for the recognition of different tongue shapes.",authors:"C. M. Huo,  H. Zheng,  H. Y. Su,  Z. L. Sun,  Y. J. Cai,  Y. F. Xu",description:"2017 2nd Asia-Pacific Conference on Intelligent Robot Systems (ACIRS). 2017",doi:"10.1109/ACIRS.2017.7986062",duplicate:!1,email:["1874111766@qq.com","sapphire@bit.edu.cn","hongzheng@bit.edu.cn","henrysu@bit.edu.cn","sunzl8417@163.com","2120160980@bit.edu.cn"],email_new:["1874111766@qq.com","sapphire@bit.edu.cn","hongzheng@bit.edu.cn","henrysu@bit.edu.cn","sunzl8417@163.com","2120160980@bit.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7986062",key:"ec3f15f0-6c20-4e9d-a864-f8ce2568fd1b",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"tongue shape classification integrating image preprocessing and convolution neural network",tools:["caffe"],year:2017,id:"ec3f15f0-6c20-4e9d-a864-f8ce2568fd1b.pdf",use:1,domain:"tcm",task_1:"classification",task_2:"0",data_type:"photography",data_type_1:"0",data_type_2:"0",location:"tongue",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 2nd Asia-Pacific Conference on Intelligent Robot Systems",public:0,"Unnamed: 40":null},{abstract:"The purpose of this study is to evaluate transfer learning with deep convolutional neural networks for the classification of abdominal ultrasound images. Grayscale images from 185 consecutive clinical abdominal ultrasound studies were categorized into 11 categories based on the text annotation specified by the technologist for the image. Cropped images were rescaled to 256\u2009\xd7\u2009256 resolution and randomized, with 4094 images from 136 studies constituting the training set, and 1423 images from 49 studies constituting the test set. The fully connected layers of two convolutional neural networks based on CaffeNet and VGGNet, previously trained on the 2012 Large Scale Visual Recognition Challenge data set, were retrained on the training set. Weights in the convolutional layers of each network were frozen to serve as fixed feature extractors. Accuracy on the test set was evaluated for each network. A radiologist experienced in abdominal ultrasound also independently classified the images in the test set into the same 11 categories. The CaffeNet network classified 77.3% of the test set images accurately (1100/1423 images), with a top-2 accuracy of 90.4% (1287/1423 images). The larger VGGNet network classified 77.9% of the test set accurately (1109/1423 images), with a top-2 accuracy of VGGNet was 89.7% (1276/1423 images). The radiologist classified 71.7% of the test set images correctly (1020/1423 images). The differences in classification accuracies between both neural networks and the radiologist were statistically significant (p\u2009&lt;\u20090.001). The results demonstrate that transfer learning with convolutional neural networks may be used to construct effective classifiers for abdominal ultrasound images.",authors:"Cheng PM, Malhi HS.",description:"J Digit Imaging.  2017",doi:null,duplicate:!1,email:["phillip.cheng@med.usc.edu"],email_new:["phillip.cheng@med.usc.edu"],fullUrl:"https://www.ncbi.nlm.nih.gov//pubmed/27896451",key:"0dffbac9-2cdf-45f3-9199-dfdeb51b6b2f",keyok:1,keywords:"Artificial neural networks; Classification; Deep learning; Digital image processing; Machine learning",pdfUrl:null,phase:1,received:0,source:"pubmed",title:"transfer learning with convolutional neural networks for classification of abdominal ultrasound images",tools:["caffe"],year:2017,id:"0dffbac9-2cdf-45f3-9199-dfdeb51b6b2f.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"abdomin",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_reference_caffenet",based_on_1_name:"bvlc_caffenet",based_on_2:"https://gist.github.com/ksimonyan/211839e770f7b538e2d8",based_on_2_name:"vgg_very_deep_convnets",transfer_learning:1,total:"185",training:136,validation:0,testing:49,cross_validation:0,country_1:"USA",country_2:"0",country_3:"0",journal:"Journal of Digital Imaging",impact_factor:1.407,conference:"0",public:0,"Unnamed: 40":null},{abstract:"Ultrasound (US) imaging is a widely used screening tool for obstetric examination and diagnosis. Accurate acquisition of fetal standard planes with key anatomical structures is very crucial for substantial biometric measurement and diagnosis. However, the standard plane acquisition is a labor-intensive task and requires operator equipped with a thorough knowledge of fetal anatomy. Therefore, automatic approaches are highly demanded in clinical practice to alleviate the workload and boost the examination efficiency. The automatic detection of standard planes from US videos remains a challenging problem due to the high intraclass and low interclass variations of standard planes, and the relatively low image quality. Unlike previous studies which were specifically designed for individual anatomical standard planes, respectively, we present a general framework for the automatic identification of different standard planes from US videos. Distinct from conventional way that devises hand-crafted visual features for detection, our framework explores in- and between-plane feature learning with a novel composite framework of the convolutional and recurrent neural networks. To further address the issue of limited training data, a multitask learning framework is implemented to exploit common knowledge across detection tasks of distinctive standard planes for the augmentation of feature learning. Extensive experiments have been conducted on hundreds of US fetus videos to corroborate the better efficacy of the proposed framework on the difficult standard plane detection problem.",authors:"H. Chen,  L. Wu,  Q. Dou,  J. Qin,  S. Li,  J. Z. Cheng,  D. Ni,  P. A. Heng",description:"IEEE Transactions on Cybernetics. 2017",doi:"10.1109/TCYB.2017.2685080",duplicate:!1,email:["jackie.haochen@gmail.com","jzcheng@szu.edu.cn","nidong@szu.edu.cn"],email_new:["jackie.haochen@gmail.com","jzcheng@szu.edu.cn","nidong@szu.edu.cn"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7890445",key:"6240cc26-0b20-4dc5-ae04-1085c9723f53",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"ultrasound standard plane detection using a composite neural network framework",tools:["caffe"],year:2017,id:"6240cc26-0b20-4dc5-ae04-1085c9723f53.pdf",use:1,domain:"radiology",task_1:"plane detection",task_2:"0",data_type:"us",data_type_1:"0",data_type_2:"0",location:"fetal",location_1:"0",method_1:"cnn",method_2:"rnn",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:1,based_on_1:"0",based_on_1_name:null,based_on_2:"0",based_on_2_name:"0",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"China",country_2:"Hong Kong",country_3:"0",journal:"IEEE Transactions on Cybernetics",impact_factor:7.384,conference:"0",public:0,"Unnamed: 40":null},{abstract:"The recent rapid and tremendous success of deep convolutional neural networks (CNN) on many challenging computer vision tasks largely derives from the accessibility of the well-annotated ImageNet and PASCAL VOC datasets. Nevertheless, unsupervised image categorization (i.e., without the ground-truth labeling) is much less investigated, yet critically important and difficult when annotations are extremely hard to obtain in the conventional way of Google Search and crowd sourcing. We address this problem by presenting a looped deep pseudo-task optimization (LDPO) framework for joint mining of deep CNN features and image labels. Our method is conceptually simple and rests upon the hypothesized convergence of better labels leading to better trained CNN models which in turn feed more discriminative image representations to facilitate more meaningful clusters/labels. Our proposed method is validated in tackling two important applications: 1) Large-scale medical image annotation has always been a prohibitively expensive and easily-biased task even for well-trained radiologists. Significantly better image categorization results are achieved via our proposed approach compared to the previous state-of-the-art method. 2) Unsupervised scene recognition on representative and publicly available datasets with our proposed technique is examined. The LDPO achieves excellent quantitative scene classification results. On the MIT indoor scene dataset, it attains a clustering accuracy of 75:3%, compared to the state-of-the-art supervised classification accuracy of 81:0% (when both are based on the VGG-VD model).",authors:"X. Wang,  L. Lu,  H. C. Shin,  L. Kim,  M. Bagheri,  I. Nogues,  J. Yao,  R. M. Summers",description:"2017 IEEE Winter Conference on Applications of Computer Vision (WACV). 2017",doi:"10.1109/WACV.2017.116",duplicate:!1,email:["xiaosong.wang@nih.gov","le.lu@nih.gov","lauren.kim2@nih.gov","mohammad.bagheri@nih.gov","isabella.nogues@nih.gov","jyao@cc.nih.gov","rms@nih.gov"],email_new:["xiaosong.wang@nih.gov","le.lu@nih.gov","lauren.kim2@nih.gov","mohammad.bagheri@nih.gov","isabella.nogues@nih.gov","jyao@cc.nih.gov","rms@nih.gov"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7926699",key:"637c6bb6-95e7-4dd3-b984-6e0143b6f516",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"unsupervised joint mining of deep features and image labels for large-scale radiology image categorization and scene recognition",tools:["caffe"],year:2017,id:"637c6bb6-95e7-4dd3-b984-6e0143b6f516.pdf",use:1,domain:"radiology",task_1:"classification",task_2:"0",data_type:"text",data_type_1:"ct",data_type_2:"mri",location:"multi-organ",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:0,data_shared:0,data_link_1:"0",data_link_2:"0",data_ok:0,code_public:0,code_link:"0",code_ok:0,pseudocode:null,based_on_1:"https://github.com/BVLC/caffe/tree/master/models/bvlc_alexnet",based_on_1_name:"bvlc_alexnet",based_on_2:"https://github.com/BVLC/caffe/tree/master/models/bvlc_googlenet",based_on_2_name:"bvlc_googlelenet",transfer_learning:1,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"USA",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2017 IEEE Winter Conference on Applications of Computer Vision",public:1,"Unnamed: 40":null},{abstract:"Convolutional Neural Networks (CNNs) have been recently employed to solve problems from both the computer vision and medical image analysis fields. Despite their popularity, most approaches are only able to process 2D images while most medical data used in clinical practice consists of 3D volumes. In this work we propose an approach to 3D image segmentation based on a volumetric, fully convolutional, neural network. Our CNN is trained end-to-end on MRI volumes depicting prostate, and learns to predict segmentation for the whole volume at once. We introduce a novel objective function, that we optimise during training, based on Dice coefficient. In this way we can deal with situations where there is a strong imbalance between the number of foreground and background voxels. To cope with the limited number of annotated volumes available for training, we augment the data applying random non-linear transformations and histogram matching. We show in our experimental evaluation that our approach achieves good performances on challenging test data while requiring only a fraction of the processing time needed by other previous methods.",authors:"F. Milletari,  N. Navab,  S. A. Ahmadi",description:"2016 Fourth International Conference on 3D Vision (3DV). 2016",doi:"10.1109/3DV.2016.79",duplicate:!1,email:["fausto.milletari@tum.de","navab@cs.tum.edu","ahmad.ahmadi@med.uni-muenchen.de"],email_new:["fausto.milletari@tum.de","navab@cs.tum.edu","ahmad.ahmadi@med.uni-muenchen.de"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7785132",key:"4c992cf9-376f-4048-977a-2eba0a611c86",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"v-net: fully convolutional neural networks for volumetric medical image segmentation",tools:["caffe"],year:2016,id:"4c992cf9-376f-4048-977a-2eba0a611c86.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"prostate",location_1:"0",method_1:"fullycnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"https://promise12.grand-challenge.org/download/",data_link_2:"0",data_ok:1,code_public:1,code_link:"https://github.com/faustomilletari/VNet",code_ok:1,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Germany",country_2:"0",country_3:"0",journal:"0",impact_factor:0,conference:"2016 Fourth International Conference on 3D Vision",public:1,"Unnamed: 40":null},{abstract:"Recently deep residual learning with residual units for training very deep neural networks advanced the state-of-the-art performance on 2D image recognition tasks, e.g., object detection and segmentation. However, how to fully leverage contextual representations for recognition tasks from volumetric data has not been well studied, especially in the field of medical image computing, where a majority of image modalities are in volumetric format. In this paper we explore the deep residual learning on the task of volumetric brain segmentation. There are at least two main contributions in our work. First, we propose a deep voxelwise residual network, referred as VoxResNet, which borrows the spirit of deep residual learning in 2D image recognition tasks, and is extended into a 3D variant for handling volumetric data. Second, an auto-context version of VoxResNet is proposed by seamlessly integrating the low-level image appearance features, implicit shape information and high-level context together for further improving the volumetric segmentation performance. Extensive experiments on the challenging benchmark of brain segmentation from magnetic resonance (MR) images corroborated the efficacy of our proposed method in dealing with volumetric data. We believe this work unravels the potential of 3D deep learning to advance the recognition performance on volumetric image segmentation.",authors:"Hao Chen, Qi Dou, Lequan Yu, Pheng-Ann Heng",description:"Retrieved from arXiv. 2016",doi:null,duplicate:!1,email:["hchen@cse.cuhk.edu.hk"],email_new:["hchen@cse.cuhk.edu.hk"],fullUrl:"https://arxiv.org/abs/1608.05895",key:"6054d13e-6f9a-406f-a4d8-1f2d4be89100",keyok:1,keywords:null,pdfUrl:"https://arxiv.org/pdf/1608.05895.pdf",phase:1,received:0,source:"arxiv",title:"voxresnet: deep voxelwise residual networks for volumetric brain segmentation",tools:["caffe"],year:2016,id:"6054d13e-6f9a-406f-a4d8-1f2d4be89100.pdf",use:1,domain:"radiology",task_1:"segmentation",task_2:"0",data_type:"mri",data_type_1:"0",data_type_2:"0",location:"brain",location_1:"0",method_1:"rcnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"http://mrbrains13.isi.uu.nl/",data_link_2:"0",data_ok:1,code_public:1,code_link:"http://appsrv.cse.cuhk.edu.hk/~hchen/research/seg_brain.html",code_ok:1,pseudocode:1,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:1,country_1:"Hong Kong",country_2:"0",country_3:"0",journal:"NeuroImage",impact_factor:5.835,conference:"0",public:1,"Unnamed: 40":null},{abstract:"Graphic image annotations provide the necessary ground truth information for supervised machine learning in image-based computer-aided medical diagnosis. Performing such annotations is usually a time-consuming and cost-inefficient process requiring knowledge from domain experts. To cope with this problem we propose a novel weakly-supervised learning method based on a Convolutional Neural Network (CNN) architecture. The advantage of the proposed method over conventional supervised approaches is that only image-level semantic annotations are used in the training process, instead of pixel-level graphic annotations. This can drastically reduce the required annotation effort. Its advantage over the few state-of-the-art weakly-supervised CNN architectures is its simplicity. The performance of the proposed method is evaluated in the context of computer-aided detection of inflammatory gastrointestinal lesions in wireless capsule endoscopy videos. This is a broad category of lesions, for which early detection and treatment can be of vital importance. The results show that the proposed weakly-supervised learning method can be more effective than the conventional supervised learning, with an accuracy of 90%.",authors:"S. V. Georgakopoulos,  D. K. Iakovidis,  M. Vasilakakis,  V. P. Plagianakos,  A. Koulaouzidis",description:"2016 IEEE International Conference on Imaging Systems and Techniques (IST). 2016",doi:"10.1109/IST.2016.7738279",duplicate:!1,email:["spirosgeorg@gmail.com"],email_new:["spirosgeorg@gmail.com"],fullUrl:"http://ieeexplore.ieee.org/stamp/stamp.jsp?arnumber=7738279",key:"874abeb2-84e8-420e-b9af-55bfcf231116",keyok:1,keywords:null,pdfUrl:null,phase:1,received:0,source:"ieee",title:"weakly-supervised convolutional learning for detection of inflammatory gastrointestinal lesions",tools:["caffe"],year:2016,id:"874abeb2-84e8-420e-b9af-55bfcf231116.pdf",use:1,domain:"endoscopy",task_1:"detection",task_2:"0",data_type:"wireless capsule endoscopy",data_type_1:"0",data_type_2:"0",location:"gastrointestinal",location_1:"0",method_1:"cnn",method_2:"0",method_3:"0",data_public:0,data_upon_request:1,data_shared:0,data_link_1:"https://is-innovation.eu/kid/register.php",data_link_2:"0",data_ok:null,code_public:0,code_link:"0",code_ok:null,pseudocode:null,based_on_1:"0",based_on_1_name:"0",based_on_2:"0",based_on_2_name:"0",transfer_learning:0,total:null,training:null,validation:null,testing:null,cross_validation:0,country_1:"Greece",country_2:"UK",country_3:"0",journal:"0",impact_factor:0,conference:"2016 IEEE International Conference on Imaging Systems and Techniques (IST)",public:0,"Unnamed: 40":null}];t.a=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(17),u=n(0),c=n.n(u),d=n(212),f=n.n(d),h=n(318),p=n.n(h),m=n(363),g=n(28),y=n(365),v=n(372),_=n(384),b=n(402),x=n(403),w=n(455),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),T=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=function(e,t){n.setState({value:t})},n.state={value:1},n.handleChange=n.handleChange.bind(n),n}return a(t,e),k(t,[{key:"render",value:function(){var e=this.state.value,t=this.props,n=t.data,r=t.raw,i=Object(l.a)(f.a)({backgroundColor:g.a.darkTeal+" !important",fontSize:"20px !important"});return s.a.createElement("div",null,s.a.createElement(i,null,s.a.createElement(y.a,null),s.a.createElement(p.a,{indicatorColor:g.a.orange,centered:!1,fullWidth:!0,value:e,onChange:this.handleChange},s.a.createElement(h.Tab,{label:"about",href:"#"}),s.a.createElement(h.Tab,{label:"statistics",href:"#"}),s.a.createElement(h.Tab,{label:"reproducibility",href:"#"}),s.a.createElement(h.Tab,{label:"data",href:"#"}),s.a.createElement(h.Tab,{label:"contribute",href:"#"}))),0===e&&s.a.createElement(m.a,null,s.a.createElement(v.a,null)),1===e&&s.a.createElement(m.a,null,s.a.createElement(_.a,{data:n})),2===e&&s.a.createElement(m.a,null,s.a.createElement(b.a,{data:n})),3===e&&s.a.createElement(m.a,null,s.a.createElement(x.a,{data:n,raw:r})),4===e&&s.a.createElement(m.a,null,s.a.createElement(w.a,null)))}}]),t}(o.Component);T.propTypes={data:c.a.object.isRequired,raw:c.a.array.isRequired},t.a=T},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(213);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,n=e.children,r=e.classes,i=e.className,a=e.color,s=e.position,u=(0,c.default)(e,["children","classes","className","color","position"]),d=(0,m.default)(r.root,r["position"+(0,v.capitalize)(s)],(t={},(0,l.default)(t,r["color"+(0,v.capitalize)(a)],"inherit"!==a),(0,l.default)(t,"mui-fixed","fixed"===s),t),i);return f.default.createElement(b.default,(0,o.default)({square:!0,component:"header",elevation:4,className:d},u),n)}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(12),l=r(s),u=n(3),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(13),y=r(g),v=n(25),_=n(132),b=r(_),x=t.styles=function(e){var t="light"===e.palette.type?e.palette.grey[100]:e.palette.grey[900];return{root:{display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",zIndex:e.zIndex.appBar,flexShrink:0},positionFixed:{position:"fixed",top:0,left:"auto",right:0},positionAbsolute:{position:"absolute",top:0,left:"auto",right:0},positionSticky:{position:"sticky",top:0,left:"auto",right:0},positionStatic:{position:"static"},colorDefault:{backgroundColor:t,color:e.palette.getContrastText(t)},colorPrimary:{backgroundColor:e.palette.primary.main,color:e.palette.primary.contrastText},colorSecondary:{backgroundColor:e.palette.secondary.main,color:e.palette.secondary.contrastText}}};i.propTypes={},i.defaultProps={color:"primary",position:"fixed"},t.default=(0,y.default)(x,{name:"MuiAppBar"})(i)},function(e,t,n){n(215),e.exports=n(14).Object.assign},function(e,t,n){var r=n(15);r(r.S+r.F,"Object",{assign:n(216)})},function(e,t,n){"use strict";var r=n(42),i=n(76),a=n(54),o=n(36),s=n(69),l=Object.assign;e.exports=!l||n(31)(function(){var e={},t={},n=Symbol(),r="abcdefghijklmnopqrst";return e[n]=7,r.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=r})?function(e,t){for(var n=o(e),l=arguments.length,u=1,c=i.f,d=a.f;l>u;)for(var f,h=s(arguments[u++]),p=c?r(h).concat(c(h)):r(h),m=p.length,g=0;m>g;)d.call(h,f=p[g++])&&(n[f]=h[f]);return n}:l},function(e,t,n){var r=n(33),i=n(52),a=n(218);e.exports=function(e){return function(t,n,o){var s,l=r(t),u=i(l.length),c=a(o,u);if(e&&n!=n){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var r=n(72),i=Math.max,a=Math.min;e.exports=function(e,t){return e=r(e),e<0?i(e+t,0):a(e,t)}},function(e,t,n){n(220);var r=n(14).Object;e.exports=function(e,t,n){return r.defineProperty(e,t,n)}},function(e,t,n){var r=n(15);r(r.S+r.F*!n(21),"Object",{defineProperty:n(19).f})},function(e,t,n){n(222),e.exports=n(14).Object.keys},function(e,t,n){var r=n(36),i=n(42);n(78)("keys",function(){return function(e){return i(r(e))}})},function(e,t,n){n(224),e.exports=n(14).Object.getPrototypeOf},function(e,t,n){var r=n(36),i=n(110);n(78)("getPrototypeOf",function(){return function(e){return i(r(e))}})},function(e,t,n){e.exports={default:n(226),__esModule:!0}},function(e,t,n){n(43),n(58),e.exports=n(81).f("iterator")},function(e,t,n){var r=n(72),i=n(71);e.exports=function(e){return function(t,n){var a,o,s=String(i(t)),l=r(n),u=s.length;return l<0||l>=u?e?"":void 0:(a=s.charCodeAt(l),a<55296||a>56319||l+1===u||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):a:e?s.slice(l,l+2):o-56320+(a-55296<<10)+65536)}}},function(e,t,n){"use strict";var r=n(56),i=n(41),a=n(57),o={};n(26)(o,n(18)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=r(o,{next:i(1,n)}),a(e,t+" Iterator")}},function(e,t,n){var r=n(19),i=n(27),a=n(42);e.exports=n(21)?Object.defineProperties:function(e,t){i(e);for(var n,o=a(t),s=o.length,l=0;s>l;)r.f(e,n=o[l++],t[n]);return e}},function(e,t,n){var r=n(20).document;e.exports=r&&r.documentElement},function(e,t,n){"use strict";var r=n(232),i=n(112),a=n(37),o=n(33);e.exports=n(79)(Array,"Array",function(e,t){this._t=o(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,i(1)):"keys"==t?i(0,n):"values"==t?i(0,e[n]):i(0,[n,e[n]])},"values"),a.Arguments=a.Array,r("keys"),r("values"),r("entries")},function(e,t){e.exports=function(){}},function(e,t,n){e.exports={default:n(234),__esModule:!0}},function(e,t,n){n(235),n(115),n(238),n(239),e.exports=n(14).Symbol},function(e,t,n){"use strict";var r=n(20),i=n(32),a=n(21),o=n(15),s=n(111),l=n(82).KEY,u=n(31),c=n(74),d=n(57),f=n(53),h=n(18),p=n(81),m=n(83),g=n(236),y=n(113),v=n(27),_=n(24),b=n(33),x=n(68),w=n(41),k=n(56),T=n(237),M=n(84),A=n(19),C=n(42),S=M.f,E=A.f,P=T.f,I=r.Symbol,L=r.JSON,O=L&&L.stringify,z=h("_hidden"),R=h("toPrimitive"),D={}.propertyIsEnumerable,N=c("symbol-registry"),F=c("symbols"),j=c("op-symbols"),B=Object.prototype,U="function"==typeof I,V=r.QObject,H=!V||!V.prototype||!V.prototype.findChild,W=a&&u(function(){return 7!=k(E({},"a",{get:function(){return E(this,"a",{value:7}).a}})).a})?function(e,t,n){var r=S(B,t);r&&delete B[t],E(e,t,n),r&&e!==B&&E(B,t,r)}:E,q=function(e){var t=F[e]=k(I.prototype);return t._k=e,t},G=U&&"symbol"==typeof I.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof I},Y=function(e,t,n){return e===B&&Y(j,t,n),v(e),t=x(t,!0),v(n),i(F,t)?(n.enumerable?(i(e,z)&&e[z][t]&&(e[z][t]=!1),n=k(n,{enumerable:w(0,!1)})):(i(e,z)||E(e,z,w(1,{})),e[z][t]=!0),W(e,t,n)):E(e,t,n)},X=function(e,t){v(e);for(var n,r=g(t=b(t)),i=0,a=r.length;a>i;)Y(e,n=r[i++],t[n]);return e},Z=function(e,t){return void 0===t?k(e):X(k(e),t)},J=function(e){var t=D.call(this,e=x(e,!0));return!(this===B&&i(F,e)&&!i(j,e))&&(!(t||!i(this,e)||!i(F,e)||i(this,z)&&this[z][e])||t)},K=function(e,t){if(e=b(e),t=x(t,!0),e!==B||!i(F,t)||i(j,t)){var n=S(e,t);return!n||!i(F,t)||i(e,z)&&e[z][t]||(n.enumerable=!0),n}},Q=function(e){for(var t,n=P(b(e)),r=[],a=0;n.length>a;)i(F,t=n[a++])||t==z||t==l||r.push(t);return r},$=function(e){for(var t,n=e===B,r=P(n?j:b(e)),a=[],o=0;r.length>o;)!i(F,t=r[o++])||n&&!i(B,t)||a.push(F[t]);return a};U||(I=function(){if(this instanceof I)throw TypeError("Symbol is not a constructor!");var e=f(arguments.length>0?arguments[0]:void 0),t=function(n){this===B&&t.call(j,n),i(this,z)&&i(this[z],e)&&(this[z][e]=!1),W(this,e,w(1,n))};return a&&H&&W(B,e,{configurable:!0,set:t}),q(e)},s(I.prototype,"toString",function(){return this._k}),M.f=K,A.f=Y,n(114).f=T.f=Q,n(54).f=J,n(76).f=$,a&&!n(80)&&s(B,"propertyIsEnumerable",J,!0),p.f=function(e){return q(h(e))}),o(o.G+o.W+o.F*!U,{Symbol:I});for(var ee="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),te=0;ee.length>te;)h(ee[te++]);for(var ne=C(h.store),re=0;ne.length>re;)m(ne[re++]);o(o.S+o.F*!U,"Symbol",{for:function(e){return i(N,e+="")?N[e]:N[e]=I(e)},keyFor:function(e){if(!G(e))throw TypeError(e+" is not a symbol!");for(var t in N)if(N[t]===e)return t},useSetter:function(){H=!0},useSimple:function(){H=!1}}),o(o.S+o.F*!U,"Object",{create:Z,defineProperty:Y,defineProperties:X,getOwnPropertyDescriptor:K,getOwnPropertyNames:Q,getOwnPropertySymbols:$}),L&&o(o.S+o.F*(!U||u(function(){var e=I();return"[null]"!=O([e])||"{}"!=O({a:e})||"{}"!=O(Object(e))})),"JSON",{stringify:function(e){for(var t,n,r=[e],i=1;arguments.length>i;)r.push(arguments[i++]);if(n=t=r[1],(_(t)||void 0!==e)&&!G(e))return y(t)||(t=function(e,t){if("function"==typeof n&&(t=n.call(this,e,t)),!G(t))return t}),r[1]=t,O.apply(L,r)}}),I.prototype[R]||n(26)(I.prototype,R,I.prototype.valueOf),d(I,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},function(e,t,n){var r=n(42),i=n(76),a=n(54);e.exports=function(e){var t=r(e),n=i.f;if(n)for(var o,s=n(e),l=a.f,u=0;s.length>u;)l.call(e,o=s[u++])&&t.push(o);return t}},function(e,t,n){var r=n(33),i=n(114).f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return i(e)}catch(e){return o.slice()}};e.exports.f=function(e){return o&&"[object Window]"==a.call(e)?s(e):i(r(e))}},function(e,t,n){n(83)("asyncIterator")},function(e,t,n){n(83)("observable")},function(e,t,n){e.exports={default:n(241),__esModule:!0}},function(e,t,n){n(242),e.exports=n(14).Object.setPrototypeOf},function(e,t,n){var r=n(15);r(r.S,"Object",{setPrototypeOf:n(243).set})},function(e,t,n){var r=n(24),i=n(27),a=function(e,t){if(i(e),!r(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,r){try{r=n(30)(Function.call,n(84).f(Object.prototype,"__proto__").set,2),r(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return a(e,n),t?e.__proto__=n:r(e,n),e}}({},!1):void 0),check:a}},function(e,t,n){e.exports={default:n(245),__esModule:!0}},function(e,t,n){n(246);var r=n(14).Object;e.exports=function(e,t){return r.create(e,t)}},function(e,t,n){var r=n(15);r(r.S,"Object",{create:n(56)})},function(e,t,n){e.exports={default:n(248),__esModule:!0}},function(e,t,n){n(115),n(43),n(58),n(249),n(256),n(259),n(261),e.exports=n(14).Map},function(e,t,n){"use strict";var r=n(250),i=n(120);e.exports=n(252)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(i(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(i(this,"Map"),0===e?0:e,t)}},r,!0)},function(e,t,n){"use strict";var r=n(19).f,i=n(56),a=n(116),o=n(30),s=n(117),l=n(59),u=n(79),c=n(112),d=n(251),f=n(21),h=n(82).fastKey,p=n(120),m=f?"_s":"size",g=function(e,t){var n,r=h(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var c=e(function(e,r){s(e,c,t,"_i"),e._t=t,e._i=i(null),e._f=void 0,e._l=void 0,e[m]=0,void 0!=r&&l(r,n,e[u],e)});return a(c.prototype,{clear:function(){for(var e=p(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[m]=0},delete:function(e){var n=p(this,t),r=g(n,e);if(r){var i=r.n,a=r.p;delete n._i[r.i],r.r=!0,a&&(a.n=i),i&&(i.p=a),n._f==r&&(n._f=i),n._l==r&&(n._l=a),n[m]--}return!!r},forEach:function(e){p(this,t);for(var n,r=o(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(p(this,t),e)}}),f&&r(c.prototype,"size",{get:function(){return p(this,t)[m]}}),c},def:function(e,t,n){var r,i,a=g(e,t);return a?a.v=n:(e._l=a={i:i=h(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=a),r&&(r.n=a),e[m]++,"F"!==i&&(e._i[i]=a)),e},getEntry:g,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=p(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?c(0,n.k):"values"==t?c(0,n.v):c(0,[n.k,n.v]):(e._t=void 0,c(1))},n?"entries":"values",!n,!0),d(t)}}},function(e,t,n){"use strict";var r=n(20),i=n(14),a=n(19),o=n(21),s=n(18)("species");e.exports=function(e){var t="function"==typeof i[e]?i[e]:r[e];o&&t&&!t[s]&&a.f(t,s,{configurable:!0,get:function(){return this}})}},function(e,t,n){"use strict";var r=n(20),i=n(15),a=n(82),o=n(31),s=n(26),l=n(116),u=n(59),c=n(117),d=n(24),f=n(57),h=n(19).f,p=n(253)(0),m=n(21);e.exports=function(e,t,n,g,y,v){var _=r[e],b=_,x=y?"set":"add",w=b&&b.prototype,k={};return m&&"function"==typeof b&&(v||w.forEach&&!o(function(){(new b).entries().next()}))?(b=t(function(t,n){c(t,b,e,"_c"),t._c=new _,void 0!=n&&u(n,y,t[x],t)}),p("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in w&&(!v||"clear"!=e)&&s(b.prototype,e,function(n,r){if(c(this,b,e),!t&&v&&!d(n))return"get"==e&&void 0;var i=this._c[e](0===n?0:n,r);return t?this:i})}),v||h(b.prototype,"size",{get:function(){return this._c.size}})):(b=g.getConstructor(t,e,y,x),l(b.prototype,n),a.NEED=!0),f(b,e),k[e]=b,i(i.G+i.W+i.F,k),v||g.setStrong(b,e,y),b}},function(e,t,n){var r=n(30),i=n(69),a=n(36),o=n(52),s=n(254);e.exports=function(e,t){var n=1==e,l=2==e,u=3==e,c=4==e,d=6==e,f=5==e||d,h=t||s;return function(t,s,p){for(var m,g,y=a(t),v=i(y),_=r(s,p,3),b=o(v.length),x=0,w=n?h(t,b):l?h(t,0):void 0;b>x;x++)if((f||x in v)&&(m=v[x],g=_(m,x,y),e))if(n)w[x]=g;else if(g)switch(e){case 3:return!0;case 5:return m;case 6:return x;case 2:w.push(m)}else if(c)return!1;return d?-1:u||c?c:w}}},function(e,t,n){var r=n(255);e.exports=function(e,t){return new(r(e))(t)}},function(e,t,n){var r=n(24),i=n(113),a=n(18)("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&null===(t=t[a])&&(t=void 0)),void 0===t?Array:t}},function(e,t,n){var r=n(15);r(r.P+r.R,"Map",{toJSON:n(257)("Map")})},function(e,t,n){var r=n(86),i=n(258);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return i(this)}}},function(e,t,n){var r=n(59);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},function(e,t,n){n(260)("Map")},function(e,t,n){"use strict";var r=n(15);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},function(e,t,n){n(262)("Map")},function(e,t,n){"use strict";var r=n(15),i=n(106),a=n(30),o=n(59);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,l=arguments[1];return i(this),t=void 0!==l,t&&i(l),void 0==e?new this:(n=[],t?(r=0,s=a(l,arguments[2],2),o(e,!1,function(e){n.push(s(e,r++))})):o(e,!1,n.push,n),new this(n))}})}},function(e,t,n){e.exports={default:n(264),__esModule:!0}},function(e,t,n){n(265),e.exports=-9007199254740991},function(e,t,n){var r=n(15);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var i,a=n(0),o=n(122),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(o),l=n(267),u=function(e){return e&&e.__esModule?e:{default:e}}(l);t.default=(i={},r(i,s.jss,u.default.jss),r(i,s.sheetOptions,a.object),r(i,s.sheetsRegistry,u.default.registry),r(i,s.managers,a.object),i)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0);t.default={jss:(0,r.shape)({options:(0,r.shape)({createGenerateClassName:r.func.isRequired}).isRequired,createStyleSheet:r.func.isRequired,removeStyleSheet:r.func.isRequired}),registry:(0,r.shape)({add:r.func.isRequired,toString:r.func.isRequired})}},function(e,t,n){"use strict";function r(e){var t=null;for(var n in e){var a=e[n],o="undefined"===typeof a?"undefined":i(a);if("function"===o)t||(t={}),t[n]=a;else if("object"===o&&null!==a&&!Array.isArray(a)){var s=r(a);s&&(t||(t={}),t[n]=s)}}return t}Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){r(this,e),this.sheets=[],this.refs=[],this.keys=[]}return i(e,[{key:"get",value:function(e){var t=this.keys.indexOf(e);return this.sheets[t]}},{key:"add",value:function(e,t){var n=this.sheets,r=this.refs,i=this.keys,a=n.indexOf(t);return-1!==a?a:(n.push(t),r.push(0),i.push(e),n.length-1)}},{key:"manage",value:function(e){var t=this.keys.indexOf(e),n=this.sheets[t];return 0===this.refs[t]&&n.attach(),this.refs[t]++,this.keys[t]||this.keys.splice(t,0,e),n}},{key:"unmanage",value:function(e){var t=this.keys.indexOf(e);if(-1===t)return void(0,o.default)(!1,"SheetsManager: can't find sheet to unmanage");this.refs[t]>0&&0===--this.refs[t]&&this.sheets[t].detach()}},{key:"size",get:function(){return this.keys.length}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){if(null==e)return e;var t="undefined"===typeof e?"undefined":i(e);if("string"===t||"number"===t||"function"===t)return e;if(s(e))return e.map(r);if((0,o.default)(e))return e;var n={};for(var a in e){var l=e[a];"object"!==("undefined"===typeof l?"undefined":i(l))?n[a]=l:n[a]=r(l)}return n}Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=r;var a=n(125),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=Array.isArray},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e,r){var i,a=n(273);i="undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof e?e:r;var o=Object(a.a)(i);t.default=o}.call(t,n(23),n(272)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"===typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}t.a=r},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});e.CSS;t.default=function(e){return e}}).call(t,n(23))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n="2f1acc6c3a606b082e5eef5e54414ffb";null==e[n]&&(e[n]=0),t.default=e[n]++}).call(t,n(23))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),l=n(62),u=r(l),c=n(128),d=r(c),f=n(277),h=r(f),p=n(278),m=r(p),g=n(284),y=r(g),v=n(285),_=r(v),b=n(89),x=r(b),w=n(38),k=r(w),T=n(127),M=r(T),A=n(61),C=r(A),S=n(286),E=r(S),P=n(287),I=r(P),L=m.default.concat([y.default,_.default]),O=0,z=function(){function e(t){i(this,e),this.id=O++,this.version="9.8.1",this.plugins=new h.default,this.options={createGenerateClassName:M.default,Renderer:u.default?E.default:I.default,plugins:[]},this.generateClassName=(0,M.default)(),this.use.apply(this,L),this.setup(t)}return s(e,[{key:"setup",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.createGenerateClassName&&(this.options.createGenerateClassName=e.createGenerateClassName,this.generateClassName=e.createGenerateClassName()),null!=e.insertionPoint&&(this.options.insertionPoint=e.insertionPoint),(e.virtual||e.Renderer)&&(this.options.Renderer=e.Renderer||(e.virtual?I.default:E.default)),e.plugins&&this.use.apply(this,e.plugins),this}},{key:"createStyleSheet",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.index;"number"!==typeof n&&(n=0===x.default.index?0:x.default.index+1);var r=new d.default(e,o({},t,{jss:this,generateClassName:t.generateClassName||this.generateClassName,insertionPoint:this.options.insertionPoint,Renderer:this.options.Renderer,index:n}));return this.plugins.onProcessSheet(r),r}},{key:"removeStyleSheet",value:function(e){return e.detach(),x.default.remove(e),this}},{key:"createRule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"===("undefined"===typeof e?"undefined":a(e))&&(n=t,t=e,e=void 0);var r=n;r.jss=this,r.Renderer=this.options.Renderer,r.generateClassName||(r.generateClassName=this.generateClassName),r.classes||(r.classes={});var i=(0,C.default)(e,t,r);return!r.selector&&i instanceof k.default&&(i.selector="."+r.generateClassName(i)),this.plugins.onProcessRule(i),i}},{key:"use",value:function(){for(var e=this,t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return n.forEach(function(t){-1===e.options.plugins.indexOf(t)&&(e.options.plugins.push(t),e.plugins.use(t))}),this}}]),e}();t.default=z},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(){r(this,e),this.hooks={onCreateRule:[],onProcessRule:[],onProcessStyle:[],onProcessSheet:[],onChangeValue:[],onUpdate:[]}}return i(e,[{key:"onCreateRule",value:function(e,t,n){for(var r=0;r<this.hooks.onCreateRule.length;r++){var i=this.hooks.onCreateRule[r](e,t,n);if(i)return i}return null}},{key:"onProcessRule",value:function(e){if(!e.isProcessed){for(var t=e.options.sheet,n=0;n<this.hooks.onProcessRule.length;n++)this.hooks.onProcessRule[n](e,t);e.style&&this.onProcessStyle(e.style,e,t),e.isProcessed=!0}}},{key:"onProcessStyle",value:function(e,t,n){for(var r=e,i=0;i<this.hooks.onProcessStyle.length;i++)r=this.hooks.onProcessStyle[i](r,t,n),t.style=r}},{key:"onProcessSheet",value:function(e){for(var t=0;t<this.hooks.onProcessSheet.length;t++)this.hooks.onProcessSheet[t](e)}},{key:"onUpdate",value:function(e,t,n){for(var r=0;r<this.hooks.onUpdate.length;r++)this.hooks.onUpdate[r](e,t,n)}},{key:"onChangeValue",value:function(e,t,n){for(var r=e,i=0;i<this.hooks.onChangeValue.length;i++)r=this.hooks.onChangeValue[i](r,t,n);return r}},{key:"use",value:function(e){for(var t in e)this.hooks[t]?this.hooks[t].push(e[t]):(0,o.default)(!1,'[JSS] Unknown hook "%s".',t)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(279),a=r(i),o=n(280),s=r(o),l=n(281),u=r(l),c=n(282),d=r(c),f=n(283),h=r(f),p={"@charset":a.default,"@import":a.default,"@namespace":a.default,"@keyframes":s.default,"@media":u.default,"@supports":u.default,"@font-face":d.default,"@viewport":h.default,"@-ms-viewport":h.default};t.default=Object.keys(p).map(function(e){var t=new RegExp("^"+e);return{onCreateRule:function(n,r,i){return t.test(n)?new p[e](n,r,i):null}}})},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t,n,i){r(this,e),this.type="simple",this.isProcessed=!1,this.key=t,this.value=n,this.options=i}return i(e,[{key:"toString",value:function(e){if(Array.isArray(this.value)){for(var t="",n=0;n<this.value.length;n++)t+=this.key+" "+this.value[n]+";",this.value[n+1]&&(t+="\n");return t}return this.key+" "+this.value+";"}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(45),s=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t,n,a){r(this,e),this.type="keyframes",this.isProcessed=!1,this.key=t,this.options=a,this.rules=new s.default(i({},a,{parent:this}));for(var o in n)this.rules.add(o,n[o],i({},this.options,{parent:this,selector:o}));this.rules.process()}return a(e,[{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t&&(t+="\n"),this.key+" {\n"+t+"}"}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(45),s=function(e){return e&&e.__esModule?e:{default:e}}(o),l=function(){function e(t,n,a){r(this,e),this.type="conditional",this.isProcessed=!1,this.key=t,this.options=a,this.rules=new s.default(i({},a,{parent:this}));for(var o in n)this.rules.add(o,n[o]);this.rules.process()}return a(e,[{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"addRule",value:function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"toString",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{indent:1},t=this.rules.toString(e);return t?this.key+" {\n"+t+"\n}":""}}]),e}();t.default=l},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(88),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i){r(this,e),this.type="font-face",this.isProcessed=!1,this.key=t,this.style=n,this.options=i}return i(e,[{key:"toString",value:function(e){if(Array.isArray(this.style)){for(var t="",n=0;n<this.style.length;n++)t+=(0,o.default)(this.key,this.style[n]),this.style[n+1]&&(t+="\n");return t}return(0,o.default)(this.key,this.style,e)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(88),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=function(){function e(t,n,i){r(this,e),this.type="viewport",this.isProcessed=!1,this.key=t,this.style=n,this.options=i}return i(e,[{key:"toString",value:function(e){return(0,o.default)(this.key,this.style,e)}}]),e}();t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(38),a=r(i),o=n(61),s=r(o),l=n(125),u=r(l);t.default={onCreateRule:function(e,t,n){if(!(0,u.default)(t))return null;var r=t,i=(0,s.default)(e,{},n);return r.subscribe(function(e){for(var t in e)i.prop(t,e[t])}),i},onProcessRule:function(e){if(e instanceof a.default){var t=e,n=t.style;for(var r in n){(function(e){var r=n[e];if(!(0,u.default)(r))return"continue";delete n[e],r.subscribe({next:function(n){t.prop(e,n)}})})(r)}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(45),a=r(i),o=n(38),s=r(o),l=n(61),u=r(l),c=Date.now(),d="fnValues"+c,f="fnStyle"+ ++c;t.default={onCreateRule:function(e,t,n){if("function"!==typeof t)return null;var r=(0,u.default)(e,{},n);return r[f]=t,r},onProcessStyle:function(e,t){var n={};for(var r in e){var i=e[r];"function"===typeof i&&(delete e[r],n[r]=i)}return t=t,t[d]=n,e},onUpdate:function(e,t){if(t.rules instanceof a.default)return void t.rules.update(e);if(t instanceof s.default){if(t=t,t[d])for(var n in t[d])t.prop(n,t[d][n](e));t=t;var r=t[f];if(r){var i=r(e);for(var o in i)t.prop(o,i[o])}}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){try{return e.style.getPropertyValue(t)}catch(e){return""}}function o(e,t,n){try{var r=n;if(Array.isArray(n)&&(r=(0,w.default)(n,!0),"!important"===n[n.length-1]))return e.style.setProperty(t,r,"important"),!0;e.style.setProperty(t,r)}catch(e){return!1}return!0}function s(e,t){try{e.style.removeProperty(t)}catch(e){(0,g.default)(!1,'[JSS] DOMException "%s" was thrown. Tried to remove property "%s".',e.message,t)}}function l(e,t){return e.selectorText=t,e.selectorText===t}function u(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(r.attached&&r.options.index>t.index&&r.options.insertionPoint===t.insertionPoint)return r}return null}function c(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.attached&&r.options.insertionPoint===t.insertionPoint)return r}return null}function d(e){for(var t=A(),n=0;n<t.childNodes.length;n++){var r=t.childNodes[n];if(8===r.nodeType&&r.nodeValue.trim()===e)return r}return null}function f(e){var t=v.default.registry;if(t.length>0){var n=u(t,e);if(n)return n.renderer.element;if(n=c(t,e))return n.renderer.element.nextElementSibling}var r=e.insertionPoint;if(r&&"string"===typeof r){var i=d(r);if(i)return i.nextSibling;(0,g.default)("jss"===r,'[JSS] Insertion point "%s" not found.',r)}return null}function h(e,t){var n=t.insertionPoint,r=f(t);if(r){var i=r.parentNode;return void(i&&i.insertBefore(e,r))}if(n&&"number"===typeof n.nodeType){var a=n,o=a.parentNode;return void(o?o.insertBefore(e,a.nextSibling):(0,g.default)(!1,"[JSS] Insertion point is not in the DOM."))}A().insertBefore(e,r)}Object.defineProperty(t,"__esModule",{value:!0});var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=n(11),g=r(m),y=n(89),v=r(y),_=n(38),b=r(_),x=n(60),w=r(x),k=function(e){var t=void 0;return function(){return t||(t=e()),t}},T={STYLE_RULE:1,KEYFRAMES_RULE:7},M=function(){var e=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.substr(t,e.indexOf("{")-1)};return function(t){if(t.type===T.STYLE_RULE)return t.selectorText;if(t.type===T.KEYFRAMES_RULE){var n=t.name;if(n)return"@keyframes "+n;var r=t.cssText;return"@"+e(r,r.indexOf("keyframes"))}return e(t.cssText)}}(),A=k(function(){return document.head||document.getElementsByTagName("head")[0]}),C=function(){var e=void 0,t=!1;return function(n){var r={};e||(e=document.createElement("style"));for(var i=0;i<n.length;i++){var a=n[i];if(a instanceof b.default){var o=a.selector;if(o&&-1!==o.indexOf("\\")){t||(A().appendChild(e),t=!0),e.textContent=o+" {}";var s=e,l=s.sheet;if(l){var u=l.cssRules;u&&(r[u[0].selectorText]=a.key)}}}}return t&&(A().removeChild(e),t=!1),r}}(),S=k(function(){var e=document.querySelector('meta[property="csp-nonce"]');return e?e.getAttribute("content"):null}),E=function(){function e(t){i(this,e),this.getPropertyValue=a,this.setProperty=o,this.removeProperty=s,this.setSelector=l,this.getKey=M,this.getUnescapedKeysMap=C,this.hasInsertedRules=!1,t&&v.default.add(t),this.sheet=t;var n=this.sheet?this.sheet.options:{},r=n.media,u=n.meta,c=n.element;this.element=c||document.createElement("style"),this.element.type="text/css",this.element.setAttribute("data-jss",""),r&&this.element.setAttribute("media",r),u&&this.element.setAttribute("data-meta",u);var d=S();d&&this.element.setAttribute("nonce",d)}return p(e,[{key:"attach",value:function(){!this.element.parentNode&&this.sheet&&(this.hasInsertedRules&&(this.deploy(),this.hasInsertedRules=!1),h(this.element,this.sheet.options))}},{key:"detach",value:function(){this.element.parentNode.removeChild(this.element)}},{key:"deploy",value:function(){this.sheet&&(this.element.textContent="\n"+this.sheet.toString()+"\n")}},{key:"insertRule",value:function(e,t){var n=this.element.sheet,r=n.cssRules,i=e.toString();if(t||(t=r.length),!i)return!1;try{n.insertRule(i,t)}catch(t){return(0,g.default)(!1,"[JSS] Can not insert an unsupported rule \n\r%s",e),!1}return this.hasInsertedRules=!0,r[t]}},{key:"deleteRule",value:function(e){var t=this.element.sheet,n=this.indexOf(e);return-1!==n&&(t.deleteRule(n),!0)}},{key:"indexOf",value:function(e){for(var t=this.element.sheet.cssRules,n=0;n<t.length;n++)if(e===t[n])return n;return-1}},{key:"replaceRule",value:function(e,t){var n=this.indexOf(e),r=this.insertRule(t,n);return this.element.sheet.deleteRule(n),r}},{key:"getRules",value:function(){return this.element.sheet.cssRules}}]),e}();t.default=E},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(){r(this,e)}return i(e,[{key:"setProperty",value:function(){return!0}},{key:"getPropertyValue",value:function(){return""}},{key:"removeProperty",value:function(){}},{key:"setSelector",value:function(){return!0}},{key:"getKey",value:function(){return""}},{key:"attach",value:function(){}},{key:"detach",value:function(){}},{key:"deploy",value:function(){}},{key:"insertRule",value:function(){return!1}},{key:"deleteRule",value:function(){return!0}},{key:"replaceRule",value:function(){return!1}},{key:"getRules",value:function(){}},{key:"indexOf",value:function(){return-1}}]),e}();t.default=a},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return{plugins:[(0,o.default)(),(0,l.default)(),(0,c.default)(),(0,f.default)(),(0,p.default)(),(0,g.default)()]}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(289),o=r(a),s=n(290),l=r(s),u=n(291),c=r(u),d=n(292),f=r(d),h=n(294),p=r(h),m=n(299),g=r(m);t.default=i},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=e.split(m),r="",i=0;i<n.length;i++)r+=t+" "+n[i].trim(),n[i+1]&&(r+=", ");return r}function a(e){var t=e.options,n=e.style,r=n[d];if(r){for(var a in r)t.sheet.addRule(a,r[a],l({},t,{selector:i(a,e.selector)}));delete n[d]}}function o(e){var t=e.options,n=e.style;for(var r in n)if(r.substr(0,d.length)===d){var a=i(r.substr(d.length),e.selector);t.sheet.addRule(a,n[r],l({},t,{selector:a})),delete n[r]}}function s(){function e(e,t,n){if(e===d)return new h(e,t,n);if("@"===e[0]&&e.substr(0,f.length)===f)return new p(e,t,n);var r=n.parent;return r&&("global"!==r.type&&"global"!==r.options.parent.type||(n.global=!0)),n.global&&(n.selector=e),null}function t(e){"style"===e.type&&(a(e),o(e))}return{onCreateRule:e,onProcessRule:t}}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=s;var c=n(123),d="@global",f="@global ",h=function(){function e(t,n,i){r(this,e),this.type="global",this.key=t,this.options=i,this.rules=new c.RuleList(l({},i,{parent:this}));for(var a in n)this.rules.add(a,n[a],{selector:a});this.rules.process()}return u(e,[{key:"getRule",value:function(e){return this.rules.get(e)}},{key:"addRule",value:function(e,t,n){var r=this.rules.add(e,t,n);return this.options.jss.plugins.onProcessRule(r),r}},{key:"indexOf",value:function(e){return this.rules.indexOf(e)}},{key:"toString",value:function(){return this.rules.toString()}}]),e}(),p=function(){function e(t,n,i){r(this,e),this.name=t,this.options=i;var a=t.substr(f.length);this.rule=i.jss.createRule(a,n,l({},i,{parent:this,selector:a}))}return u(e,[{key:"toString",value:function(e){return this.rule.toString(e)}}]),e}(),m=/\s*,\s*/g},function(e,t,n){"use strict";function r(){function e(e){return function(t,n){var r=e.getRule(n);return r?r.selector:((0,o.default)(!1,"[JSS] Could not find the referenced rule %s in %s.",n,e.options.meta||e),n)}}function t(e,t){for(var n=t.split(s),r=e.split(s),i="",o=0;o<n.length;o++)for(var u=n[o],c=0;c<r.length;c++){var d=r[c];i&&(i+=", "),i+=a(d)?d.replace(l,u):u+" "+d}return i}function n(e,t,n){if(n)return i({},n,{index:n.index+1});var r=e.options.nestingLevel;return r=void 0===r?1:r+1,i({},e.options,{nestingLevel:r,index:t.indexOf(e)+1})}function r(r,o){if("style"!==o.type)return r;var s=o.options.parent,l=void 0,c=void 0;for(var d in r){var f=a(d),h="@"===d[0];if(f||h){if(l=n(o,s,l),f){var p=t(d,o.selector);c||(c=e(s)),p=p.replace(u,c),s.addRule(p,r[d],i({},l,{selector:p}))}else h&&s.addRule(d,null,l).addRule(o.key,r[d],{selector:o.selector});delete r[d]}}return r}var a=function(e){return-1!==e.indexOf("&")};return{onProcessStyle:r}}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=r;var a=n(11),o=function(e){return e&&e.__esModule?e:{default:e}}(a),s=/\s*,\s*/g,l=/&/g,u=/\$([\w-]+)/g},function(e,t,n){"use strict";function r(e){var t={};for(var n in e)t[(0,o.default)(n)]=e[n];return e.fallbacks&&(Array.isArray(e.fallbacks)?t.fallbacks=e.fallbacks.map(r):t.fallbacks=r(e.fallbacks)),t}function i(){function e(e){if(Array.isArray(e)){for(var t=0;t<e.length;t++)e[t]=r(e[t]);return e}return r(e)}function t(e,t,n){var r=(0,o.default)(t);return t===r?e:(n.prop(r,e),null)}return{onProcessStyle:e,onChangeValue:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(104),o=function(e){return e&&e.__esModule?e:{default:e}}(a)},function(e,t,n){"use strict";function r(e){var t=/(-[a-z])/g,n=function(e){return e[1].toUpperCase()},r={};for(var i in e)r[i]=e[i],r[i.replace(t,n)]=e[i];return r}function i(e,t,n){if(!t)return t;var r=t,a="undefined"===typeof t?"undefined":o(t);switch("object"===a&&Array.isArray(t)&&(a="array"),a){case"object":if("fallbacks"===e){for(var s in t)t[s]=i(s,t[s],n);break}for(var l in t)t[l]=i(e+"-"+l,t[l],n);break;case"array":for(var c=0;c<t.length;c++)t[c]=i(e,t[c],n);break;case"number":0!==t&&(r=t+(n[e]||u[e]||""))}return r}function a(){function e(e,t){if("style"!==t.type)return e;for(var n in e)e[n]=i(n,e[n],a);return e}function t(e,t){return i(t,e,a)}var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=r(n);return{onProcessStyle:e,onChangeValue:t}}Object.defineProperty(t,"__esModule",{value:!0});var o="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=a;var s=n(293),l=function(e){return e&&e.__esModule?e:{default:e}}(s),u=r(l.default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"animation-delay":"ms","animation-duration":"ms","background-position":"px","background-position-x":"px","background-position-y":"px","background-size":"px",border:"px","border-bottom":"px","border-bottom-left-radius":"px","border-bottom-right-radius":"px","border-bottom-width":"px","border-left":"px","border-left-width":"px","border-radius":"px","border-right":"px","border-right-width":"px","border-spacing":"px","border-top":"px","border-top-left-radius":"px","border-top-right-radius":"px","border-top-width":"px","border-width":"px","border-after-width":"px","border-before-width":"px","border-end-width":"px","border-horizontal-spacing":"px","border-start-width":"px","border-vertical-spacing":"px",bottom:"px","box-shadow":"px","column-gap":"px","column-rule":"px","column-rule-width":"px","column-width":"px","flex-basis":"px","font-size":"px","font-size-delta":"px",height:"px",left:"px","letter-spacing":"px","logical-height":"px","logical-width":"px",margin:"px","margin-after":"px","margin-before":"px","margin-bottom":"px","margin-left":"px","margin-right":"px","margin-top":"px","max-height":"px","max-width":"px","margin-end":"px","margin-start":"px","mask-position-x":"px","mask-position-y":"px","mask-size":"px","max-logical-height":"px","max-logical-width":"px","min-height":"px","min-width":"px","min-logical-height":"px","min-logical-width":"px",motion:"px","motion-offset":"px",outline:"px","outline-offset":"px","outline-width":"px",padding:"px","padding-bottom":"px","padding-left":"px","padding-right":"px","padding-top":"px","padding-after":"px","padding-before":"px","padding-end":"px","padding-start":"px","perspective-origin-x":"%","perspective-origin-y":"%",perspective:"px",right:"px","shape-margin":"px",size:"px","text-indent":"px","text-stroke":"px","text-stroke-width":"px",top:"px","transform-origin":"%","transform-origin-x":"%","transform-origin-y":"%","transform-origin-z":"%","transition-delay":"ms","transition-duration":"ms","vertical-align":"px",width:"px","word-spacing":"px","box-shadow-x":"px","box-shadow-y":"px","box-shadow-blur":"px","box-shadow-spread":"px","font-line-height":"px","text-shadow-x":"px","text-shadow-y":"px","text-shadow-blur":"px"}},function(e,t,n){"use strict";function r(){function e(e){"keyframes"===e.type&&(e.key="@"+a.prefix.css+e.key.substr(1))}function t(e,t){if("style"!==t.type)return e;for(var n in e){var r=e[n],i=!1,o=a.supportedProperty(n);o&&o!==n&&(i=!0);var s=!1,l=a.supportedValue(o,r);l&&l!==r&&(s=!0),(i||s)&&(i&&delete e[n],e[o||n]=l||r)}return e}function n(e,t){return a.supportedValue(t,e)}return{onProcessRule:e,onProcessStyle:t,onChangeValue:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(295),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.supportedValue=t.supportedProperty=t.prefix=void 0;var i=n(90),a=r(i),o=n(296),s=r(o),l=n(298),u=r(l);t.default={prefix:a.default,supportedProperty:s.default,supportedValue:u.default},t.prefix=a.default,t.supportedProperty=s.default,t.supportedValue=u.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return d?null!=f[e]?f[e]:((0,c.default)(e)in d.style?f[e]=e:l.default.js+(0,c.default)("-"+e)in d.style?f[e]=l.default.css+e:f[e]=!1,f[e]):e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(62),o=r(a),s=n(90),l=r(s),u=n(297),c=r(u),d=void 0,f={};if(o.default){d=document.createElement("p");var h=window.getComputedStyle(document.documentElement,"");for(var p in h)isNaN(p)||(f[h[p]]=h[p])}},function(e,t,n){"use strict";function r(e){return e.replace(a,i)}function i(e,t){return t?t.toUpperCase():""}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var a=/[-\s]+(.)?/g},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!c)return t;if("string"!==typeof t||!isNaN(parseInt(t,10)))return t;var n=e+t;if(null!=u[n])return u[n];try{c.style[e]=t}catch(e){return u[n]=!1,!1}return""!==c.style[e]?u[n]=t:(t=l.default.css+t,"-ms-flex"===t&&(t="-ms-flexbox"),c.style[e]=t,""!==c.style[e]&&(u[n]=t)),u[n]||(u[n]=!1),c.style[e]="",u[n]}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var a=n(62),o=r(a),s=n(90),l=r(s),u={},c=void 0;o.default&&(c=document.createElement("p"))},function(e,t,n){"use strict";function r(){function e(e,t){return e.length-t.length}function t(t,n){if("style"!==n.type)return t;var r={},i=Object.keys(t).sort(e);for(var a in i)r[i[a]]=t[i[a]];return r}return{onProcessStyle:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return Math.round(1e5*e)/1e5}function a(e,t){function n(e){return e/v*b+"rem"}var r="function"===typeof t?t(e):t,a=r.fontFamily,o=void 0===a?'"Roboto", "Helvetica", "Arial", sans-serif':a,l=r.fontSize,c=void 0===l?14:l,d=r.fontWeightLight,f=void 0===d?300:d,h=r.fontWeightRegular,p=void 0===h?400:h,m=r.fontWeightMedium,g=void 0===m?500:m,y=r.htmlFontSize,v=void 0===y?16:y,_=(0,s.default)(r,["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","htmlFontSize"]),b=c/14;return(0,u.default)({pxToRem:n,round:i,fontFamily:o,fontSize:c,fontWeightLight:f,fontWeightRegular:p,fontWeightMedium:g,display4:{fontSize:n(112),fontWeight:f,fontFamily:o,letterSpacing:"-.04em",lineHeight:i(128/112)+"em",marginLeft:"-.04em",color:e.text.secondary},display3:{fontSize:n(56),fontWeight:p,fontFamily:o,letterSpacing:"-.02em",lineHeight:i(73/56)+"em",marginLeft:"-.02em",color:e.text.secondary},display2:{fontSize:n(45),fontWeight:p,fontFamily:o,lineHeight:i(48/45)+"em",marginLeft:"-.02em",color:e.text.secondary},display1:{fontSize:n(34),fontWeight:p,fontFamily:o,lineHeight:i(41/34)+"em",color:e.text.secondary},headline:{fontSize:n(24),fontWeight:p,fontFamily:o,lineHeight:i(32.5/24)+"em",color:e.text.primary},title:{fontSize:n(21),fontWeight:g,fontFamily:o,lineHeight:i(24.5/21)+"em",color:e.text.primary},subheading:{fontSize:n(16),fontWeight:p,fontFamily:o,lineHeight:i(1.5)+"em",color:e.text.primary},body2:{fontSize:n(14),fontWeight:g,fontFamily:o,lineHeight:i(24/14)+"em",color:e.text.primary},body1:{fontSize:n(14),fontWeight:p,fontFamily:o,lineHeight:i(20.5/14)+"em",color:e.text.primary},caption:{fontSize:n(12),fontWeight:p,fontFamily:o,lineHeight:i(1.375)+"em",color:e.text.secondary},button:{fontSize:n(14),textTransform:"uppercase",fontWeight:g,fontFamily:o}},_,{clone:!1})}Object.defineProperty(t,"__esModule",{value:!0});var o=n(3),s=r(o);t.default=a;var l=n(63),u=r(l)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,r){e[t]||(e.hasOwnProperty(n)?e[t]=e[n]:"light"===t?e.light=(0,k.lighten)(e.main,r):"dark"===t&&(e.dark=(0,k.darken)(e.main,1.5*r)))}function a(e){function t(e){var t=(0,k.getContrastRatio)(e,M.text.primary)>=_?M.text.primary:T.text.primary;return t}function n(e,n,r,a){!e.main&&e[n]&&(e.main=e[n]),i(e,"light",r,A),i(e,"dark",a,A),e.contrastText||(e.contrastText=t(e.main))}var r=e.primary,a=void 0===r?{light:p.default[300],main:p.default[500],dark:p.default[700]}:r,o=e.secondary,l=void 0===o?{light:g.default.A200,main:g.default.A400,dark:g.default.A700}:o,c=e.error,d=void 0===c?{light:b.default[300],main:b.default[500],dark:b.default[700]}:c,h=e.type,m=void 0===h?"light":h,y=e.contrastThreshold,_=void 0===y?3:y,x=e.tonalOffset,A=void 0===x?.2:x,C=(0,u.default)(e,["primary","secondary","error","type","contrastThreshold","tonalOffset"]);n(a,500,300,700),n(l,"A400","A200","A700"),n(d,500,300,700);var S={dark:M,light:T};return(0,f.default)((0,s.default)({common:w.default,type:m,primary:a,secondary:l,error:d,grey:v.default,contrastThreshold:_,getContrastText:t,tonalOffset:A},S[m]),C,{clone:!1})}Object.defineProperty(t,"__esModule",{value:!0}),t.dark=t.light=void 0;var o=n(2),s=r(o),l=n(3),u=r(l);t.default=a;var c=n(11),d=(r(c),n(63)),f=r(d),h=n(302),p=r(h),m=n(303),g=r(m),y=n(304),v=r(y),_=n(305),b=r(_),x=n(306),w=r(x),k=n(91),T=t.light={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.54)",disabled:"rgba(0, 0, 0, 0.38)",hint:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:w.default.white,default:v.default[50]},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.08)",selected:"rgba(0, 0, 0, 0.14)",disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)"}},M=t.dark={text:{primary:w.default.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",hint:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:v.default[800],default:"#303030"},action:{active:w.default.white,hover:"rgba(255, 255, 255, 0.1)",selected:"rgba(255, 255, 255, 0.2)",disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#d5d5d5",A200:"#aaaaaa",A400:"#303030",A700:"#616161"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={black:"#000",white:"#fff"};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r;return(0,l.default)({gutters:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.default)({paddingLeft:2*t.unit,paddingRight:2*t.unit},n,(0,o.default)({},e.up("sm"),(0,l.default)({paddingLeft:3*t.unit,paddingRight:3*t.unit},n[e.up("sm")])))},toolbar:(r={minHeight:56},(0,o.default)(r,e.up("xs")+" and (orientation: landscape)",{minHeight:48}),(0,o.default)(r,e.up("sm"),{minHeight:64}),r)},n)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(12),o=r(a),s=n(2),l=r(s);t.default=i},function(e,t,n){"use strict";function r(){return[(arguments.length<=0?void 0:arguments[0])+"px "+(arguments.length<=1?void 0:arguments[1])+"px "+(arguments.length<=2?void 0:arguments[2])+"px "+(arguments.length<=3?void 0:arguments[3])+"px rgba(0, 0, 0, "+i+")",(arguments.length<=4?void 0:arguments[4])+"px "+(arguments.length<=5?void 0:arguments[5])+"px "+(arguments.length<=6?void 0:arguments[6])+"px "+(arguments.length<=7?void 0:arguments[7])+"px rgba(0, 0, 0, "+a+")",(arguments.length<=8?void 0:arguments[8])+"px "+(arguments.length<=9?void 0:arguments[9])+"px "+(arguments.length<=10?void 0:arguments[10])+"px "+(arguments.length<=11?void 0:arguments[11])+"px rgba(0, 0, 0, "+o+")"].join(",")}Object.defineProperty(t,"__esModule",{value:!0});var i=.2,a=.14,o=.12,s=["none",r(0,1,3,0,0,1,1,0,0,2,1,-1),r(0,1,5,0,0,2,2,0,0,3,1,-2),r(0,1,8,0,0,3,4,0,0,3,3,-2),r(0,2,4,-1,0,4,5,0,0,1,10,0),r(0,3,5,-1,0,5,8,0,0,1,14,0),r(0,3,5,-1,0,6,10,0,0,1,18,0),r(0,4,5,-2,0,7,10,1,0,2,16,1),r(0,5,5,-3,0,8,10,1,0,3,14,2),r(0,5,6,-3,0,9,12,1,0,3,16,2),r(0,6,6,-3,0,10,14,1,0,4,18,3),r(0,6,7,-4,0,11,15,1,0,4,20,3),r(0,7,8,-4,0,12,17,2,0,5,22,4),r(0,7,8,-4,0,13,19,2,0,5,24,4),r(0,7,9,-4,0,14,21,2,0,5,26,4),r(0,8,9,-5,0,15,22,2,0,6,28,5),r(0,8,10,-5,0,16,24,2,0,6,30,5),r(0,8,11,-5,0,17,26,2,0,6,32,5),r(0,9,11,-5,0,18,28,2,0,7,34,6),r(0,9,12,-6,0,19,29,2,0,7,36,6),r(0,10,13,-6,0,20,31,3,0,8,38,7),r(0,10,13,-6,0,21,33,3,0,8,40,7),r(0,10,14,-6,0,22,35,3,0,8,42,7),r(0,11,14,-7,0,23,36,3,0,9,44,8),r(0,11,15,-7,0,24,38,3,0,9,46,8)];t.default=s},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isNumber=t.isString=t.formatMs=t.duration=t.easing=void 0;var i=n(22),a=(r(i),n(3)),o=r(a),s=n(130),l=r(s),u=n(11),c=(r(u),t.easing={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"}),d=t.duration={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195},f=t.formatMs=function(e){return Math.round(e)+"ms"};t.isString=function(e){return"string"===typeof e},t.isNumber=function(e){return!(0,l.default)(parseFloat(e))};t.default={easing:c,duration:d,create:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.duration,r=void 0===n?d.standard:n,i=t.easing,a=void 0===i?c.easeInOut:i,s=t.delay,l=void 0===s?0:s;(0,o.default)(t,["duration","easing","delay"]);return(Array.isArray(e)?e:[e]).map(function(e){return e+" "+("string"===typeof r?r:f(r))+" "+a+" "+("string"===typeof l?l:f(l))}).join(",")},getAutoHeightDuration:function(e){if(!e)return 0;var t=e/36;return Math.round(10*(4+15*Math.pow(t,.25)+t/5))}}},function(e,t,n){n(311),e.exports=n(14).Number.isNaN},function(e,t,n){var r=n(15);r(r.S,"Number",{isNaN:function(e){return e!=e}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={mobileStepper:1e3,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={unit:8}},function(e,t,n){"use strict";function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dangerouslyUseGlobalCSS,n=void 0!==t&&t,r=e.productionPrefix,i=void 0===r?"jss":r,o=/([[\].#*$><+~=|^:(),"'`\s])/g,s=0;return"undefined"!==typeof window&&"jss"===i&&(a+=1)>2&&console.error(["Material-UI: we have detected more than needed creation of the class name generator.","You should only use one class name generator on the client side.","If you do otherwise, you take the risk to have conflicting class names in production."].join("\n")),function(e,t){if(s+=1,n){if(t&&t.options.classNamePrefix){var r=t.options.classNamePrefix;if(r=r.replace(o,"-"),r.match(/^Mui/))return r+"-"+e.key}return""+i+s}return""+i+s}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(11),a=(function(e){e&&e.__esModule}(i),0)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return t}function a(e){function t(t,r){var a=n?e(t):e;if(!r||!t.overrides||!t.overrides[r])return a;var o=t.overrides[r],l=(0,u.default)({},a);return(0,s.default)(o).forEach(function(e){l[e]=(0,f.default)(l[e],o[e],{arrayMerge:i})}),l}var n="function"===typeof e;return{create:t,options:{},themingEnabled:n}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(22),s=r(o),l=n(2),u=r(l),c=n(11),d=(r(c),n(63)),f=r(d);t.default=a},function(e,t,n){"use strict";function r(e){var t=e.theme,n=e.name;return n&&t.props&&t.props[n]?t.props[n]:{}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.classes,n=e.className,r=e.component,i=e.square,a=e.elevation,s=(0,l.default)(e,["classes","className","component","square","elevation"]),u=(0,m.default)(t.root,t["elevation"+a],(0,o.default)({},t.rounded,!i),n);return f.default.createElement(r,(0,c.default)({className:u},s))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(12),o=r(a),s=n(3),l=r(s),u=n(2),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(11),y=(r(g),n(13)),v=r(y),_=t.styles=function(e){var t={};return e.shadows.forEach(function(e,n){t["elevation"+n]={boxShadow:e}}),(0,c.default)({root:{backgroundColor:e.palette.background.paper},rounded:{borderRadius:2}},t)};i.propTypes={},i.defaultProps={component:"div",elevation:2,square:!1},t.default=(0,v.default)(_,{name:"MuiPaper"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(319);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}});var a=n(362);Object.defineProperty(t,"Tab",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var i=n(2),a=r(i),o=n(3),s=r(o),l=n(130),u=r(l),c=n(7),d=r(c),f=n(4),h=r(f),p=n(5),m=r(p),g=n(8),y=r(g),v=n(9),_=r(v),b=n(12),x=r(b),w=n(1),k=r(w),T=n(0),M=(r(T),n(11)),A=(r(M),n(6)),C=r(A),S=n(92),E=r(S),P=n(133),I=r(P),L=n(329),O=r(L),z=n(332),R=n(333),D=r(R),N=n(13),F=r(N),j=n(336),B=r(j),U=n(337),V=r(U),H=t.styles=function(e){return{root:{overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch"},flexContainer:{display:"flex"},scroller:{position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},fixed:{overflowX:"hidden",width:"100%"},scrollable:{overflowX:"scroll"},centered:{justifyContent:"center"},scrollButtons:{},scrollButtonsAuto:(0,x.default)({},e.breakpoints.down("xs"),{display:"none"}),indicator:{}}},W=function(e){function t(){var e,n,r,i;(0,h.default)(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=(0,y.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(o))),r.state={indicatorStyle:{},scrollerStyle:{marginBottom:0},showLeftScroll:!1,showRightScroll:!1,mounted:!1},r.getConditionalElements=function(){var e=r.props,t=e.classes,n=e.scrollable,i=e.scrollButtons,a=e.TabScrollButton,o=e.theme,s={};s.scrollbarSizeListener=n?k.default.createElement(O.default,{onLoad:r.handleScrollbarSizeChange,onChange:r.handleScrollbarSizeChange}):null;var l=n&&("auto"===i||"on"===i);return s.scrollButtonLeft=l?k.default.createElement(a,{direction:o&&"rtl"===o.direction?"right":"left",onClick:r.handleLeftScrollClick,visible:r.state.showLeftScroll,className:(0,C.default)(t.scrollButtons,(0,x.default)({},t.scrollButtonsAuto,"auto"===i))}):null,s.scrollButtonRight=l?k.default.createElement(a,{direction:o&&"rtl"===o.direction?"left":"right",onClick:r.handleRightScrollClick,visible:r.state.showRightScroll,className:(0,C.default)(t.scrollButtons,(0,x.default)({},t.scrollButtonsAuto,"auto"===i))}):null,s},r.getTabsMeta=function(e,t){var n=void 0;if(r.tabs){var i=r.tabs.getBoundingClientRect();n={clientWidth:r.tabs?r.tabs.clientWidth:0,scrollLeft:r.tabs?r.tabs.scrollLeft:0,scrollLeftNormalized:r.tabs?(0,z.getNormalizedScrollLeft)(r.tabs,t):0,scrollWidth:r.tabs?r.tabs.scrollWidth:0,left:i.left,right:i.right}}var a=void 0;if(r.tabs&&!1!==e){var o=r.tabs.children[0].children;if(o.length>0){var s=o[r.valueToIndex[e]];a=s?s.getBoundingClientRect():null}}return{tabsMeta:n,tabMeta:a}},r.tabs=void 0,r.valueToIndex={},r.handleResize=(0,I.default)(function(){r.updateIndicatorState(r.props),r.updateScrollButtonState()},166),r.handleLeftScrollClick=function(){r.tabs&&r.moveTabsScroll(-r.tabs.clientWidth)},r.handleRightScrollClick=function(){r.tabs&&r.moveTabsScroll(r.tabs.clientWidth)},r.handleScrollbarSizeChange=function(e){var t=e.scrollbarHeight;r.setState({scrollerStyle:{marginBottom:-t}})},r.handleTabsScroll=(0,I.default)(function(){r.updateScrollButtonState()},166),r.moveTabsScroll=function(e){var t=r.props.theme;if(r.tabs){var n="rtl"===t.direction?-1:1,i=r.tabs.scrollLeft+e*n,a="rtl"===t.direction&&"reverse"===(0,z.detectScrollType)()?-1:1;D.default.left(r.tabs,a*i)}},r.scrollSelectedIntoView=function(){var e=r.props,t=e.theme,n=e.value,i=r.getTabsMeta(n,t.direction),a=i.tabsMeta,o=i.tabMeta;if(o&&a)if(o.left<a.left){var s=a.scrollLeft+(o.left-a.left);D.default.left(r.tabs,s)}else if(o.right>a.right){var l=a.scrollLeft+(o.right-a.right);D.default.left(r.tabs,l)}},r.updateScrollButtonState=function(){var e=r.props,t=e.scrollable,n=e.scrollButtons,i=e.theme;if(r.tabs&&t&&"off"!==n){var a=r.tabs,o=a.scrollWidth,s=a.clientWidth,l=(0,z.getNormalizedScrollLeft)(r.tabs,i.direction),u="rtl"===i.direction?o>s+l:l>0,c="rtl"===i.direction?l>0:o>s+l;u===r.state.showLeftScroll&&c===r.state.showRightScroll||r.setState({showLeftScroll:u,showRightScroll:c})}},i=n,(0,y.default)(r,i)}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.setState({mounted:!0}),this.updateIndicatorState(this.props),this.updateScrollButtonState(),this.props.action&&this.props.action({updateIndicator:this.handleResize})}},{key:"componentDidUpdate",value:function(e,t){this.updateScrollButtonState(),this.updateIndicatorState(this.props),this.state.indicatorStyle!==t.indicatorStyle&&this.scrollSelectedIntoView()}},{key:"componentWillUnmount",value:function(){this.handleResize.cancel(),this.handleTabsScroll.cancel()}},{key:"updateIndicatorState",value:function(e){var t=e.theme,n=e.value,r=this.getTabsMeta(n,t.direction),i=r.tabsMeta,a=r.tabMeta,o=0;if(a&&i){var s="rtl"===t.direction?i.scrollLeftNormalized+i.clientWidth-i.scrollWidth:i.scrollLeft;o=a.left-i.left+s}var l={left:o,width:a?a.width:0};l.left===this.state.indicatorStyle.left&&l.width===this.state.indicatorStyle.width||(0,u.default)(l.left)||(0,u.default)(l.width)||this.setState({indicatorStyle:l})}},{key:"render",value:function(){var e,t=this,n=this.props,r=(n.action,n.centered),i=n.children,o=n.classes,l=n.className,u=n.fullWidth,c=n.indicatorColor,d=n.onChange,f=n.scrollable,h=(n.scrollButtons,n.TabScrollButton,n.textColor),p=(n.theme,n.value),m=(0,s.default)(n,["action","centered","children","classes","className","fullWidth","indicatorColor","onChange","scrollable","scrollButtons","TabScrollButton","textColor","theme","value"]),g=(0,C.default)(o.root,l),y=(0,C.default)(o.scroller,(e={},(0,x.default)(e,o.fixed,!f),(0,x.default)(e,o.scrollable,f),e)),v=(0,C.default)(o.flexContainer,(0,x.default)({},o.centered,r&&!f)),_=k.default.createElement(B.default,{style:this.state.indicatorStyle,className:o.indicator,color:c});this.valueToIndex={};var b=0,w=k.default.Children.map(i,function(e){if(!k.default.isValidElement(e))return null;var n=e.props.value||b;t.valueToIndex[n]=b;var r=n===p;return b+=1,k.default.cloneElement(e,{fullWidth:u,indicator:r&&!t.state.mounted&&_,selected:r,onChange:d,textColor:h,value:n})}),T=this.getConditionalElements();return k.default.createElement("div",(0,a.default)({className:g},m),k.default.createElement(E.default,{target:"window",onResize:this.handleResize}),T.scrollbarSizeListener,k.default.createElement("div",{className:o.flexContainer},T.scrollButtonLeft,k.default.createElement("div",{className:y,style:this.state.scrollerStyle,ref:function(e){t.tabs=e},role:"tablist",onScroll:this.handleTabsScroll},k.default.createElement("div",{className:v},w),this.state.mounted&&_),T.scrollButtonRight))}}]),t}(k.default.Component);W.propTypes={},W.defaultProps={centered:!1,fullWidth:!1,indicatorColor:"secondary",scrollable:!1,scrollButtons:"auto",TabScrollButton:V.default,textColor:"inherit"},t.default=(0,F.default)(H,{name:"MuiTabs",withTheme:!0})(W)},function(e,t,n){"use strict";function r(e,t,n){return(0,a.default)(e,t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.passiveOption=void 0;var i=n(77),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.passiveOption=function(){var e=null;return function(){if(null!==e)return e;var t=!1;try{window.addEventListener("test",null,r({},"passive",{get:function(){t=!0}}))}catch(e){}return e=t,t}()}();t.default={}},function(e,t,n){var r=n(135),i=function(){return r.Date.now()};e.exports=i},function(e,t,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(t,n(23))},function(e,t,n){function r(e){if("number"==typeof e)return e;if(a(e))return o;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(s,"");var n=u.test(e);return n||c.test(e)?d(e.slice(2),n?2:8):l.test(e)?o:+e}var i=n(134),a=n(324),o=NaN,s=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,d=parseInt;e.exports=r},function(e,t,n){function r(e){return"symbol"==typeof e||a(e)&&i(e)==o}var i=n(325),a=n(328),o="[object Symbol]";e.exports=r},function(e,t,n){function r(e){return null==e?void 0===e?l:s:u&&u in Object(e)?a(e):o(e)}var i=n(136),a=n(326),o=n(327),s="[object Null]",l="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=r},function(e,t,n){function r(e){var t=o.call(e,l),n=e[l];try{e[l]=void 0;var r=!0}catch(e){}var i=s.call(e);return r&&(t?e[l]=n:delete e[l]),i}var i=n(136),a=Object.prototype,o=a.hasOwnProperty,s=a.toString,l=i?i.toStringTag:void 0;e.exports=r},function(e,t){function n(e){return i.call(e)}var r=Object.prototype,i=r.toString;e.exports=n},function(e,t){function n(e){return null!=e&&"object"==typeof e}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(330),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(7),a=r(i),o=n(4),s=r(o),l=n(5),u=r(l),c=n(8),d=r(c),f=n(9),h=r(f),p=n(1),m=r(p),g=n(0),y=(r(g),n(92)),v=r(y),_=n(331),b=r(_),x={width:"100px",height:"100px",position:"absolute",top:"-100000px",overflow:"scroll",msOverflowStyle:"scrollbar"},w=function(e){function t(){var e,n,r,i;(0,s.default)(this,t);for(var o=arguments.length,l=Array(o),u=0;u<o;u++)l[u]=arguments[u];return n=r=(0,d.default)(this,(e=t.__proto__||(0,a.default)(t)).call.apply(e,[this].concat(l))),r.setMeasurements=function(){r.scrollbarHeight=r.node.offsetHeight-r.node.clientHeight,r.scrollbarWidth=r.node.offsetWidth-r.node.clientWidth},r.handleResize=(0,b.default)(function(){var e=r.props.onChange,t=r.scrollbarHeight,n=r.scrollbarWidth;r.setMeasurements(),t===r.scrollbarHeight&&n===r.scrollbarWidth||e({scrollbarHeight:r.scrollbarHeight,scrollbarWidth:r.scrollbarWidth})},166),i=n,(0,d.default)(r,i)}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.onLoad;e&&(this.setMeasurements(),e({scrollbarHeight:this.scrollbarHeight,scrollbarWidth:this.scrollbarWidth}))}},{key:"componentWillUnmount",value:function(){this.handleResize.cancel()}},{key:"render",value:function(){var e=this,t=this.props.onChange;return m.default.createElement("div",null,t?m.default.createElement(v.default,{target:"window",onResize:this.handleResize}):null,m.default.createElement("div",{style:x,ref:function(t){e.node=t}}))}}]),t}(p.Component);w.defaultProps={onLoad:null,onChange:null},t.default=w},function(e,t){function n(e,t){function n(){r=void 0,i&&(i=!1,a())}if("function"!==typeof e||"number"!==typeof t)throw new Error("stifle(fn, wait) -- expected a function and number of milliseconds, got ("+typeof e+", "+typeof t+")");var r,i,a=function(){r?i=!0:(r=setTimeout(n,t),e())};return a.cancel=function(){i=!1,r&&(clearTimeout(r),r=void 0)},a}e.exports=n},function(e,t,n){"use strict";function r(e){s=e}function i(){if(s)return s;if(!l||!window.document.body)return"indeterminate";var e=window.document.createElement("div");return e.appendChild(document.createTextNode("ABCD")),e.dir="rtl",e.style.fontSize="14px",e.style.width="4px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.overflow="scroll",document.body.appendChild(e),s="reverse",e.scrollLeft>0?s="default":(e.scrollLeft=1,0===e.scrollLeft&&(s="negative")),document.body.removeChild(e),s}function a(e,t){var n=e.scrollLeft;if("rtl"!==t)return n;var r=i();if("indeterminate"===r)return Number.NaN;switch(r){case"negative":return e.scrollWidth-e.clientWidth+n;case"reverse":return e.scrollWidth-e.clientWidth-n}return n}function o(e,t,n){if("rtl"!==n)return void(e.scrollLeft=t);var r=i();if("indeterminate"!==r)switch(r){case"negative":e.scrollLeft=e.clientWidth-e.scrollWidth+t;break;case"reverse":e.scrollLeft=e.scrollWidth-e.clientWidth-t;break;default:e.scrollLeft=t}}Object.defineProperty(t,"__esModule",{value:!0});var s,l=!("undefined"===typeof window||!window.document||!window.document.createElement);t._setScrollType=r,t.detectScrollType=i,t.getNormalizedScrollLeft=a,t.setNormalizedScrollLeft=o},function(e,t,n){function r(e){return function(t,n,r,c){function d(){y=!0}function f(r){if(y)return c(l,t[e]);var i=+new Date,a=u(1,(i-h)/g),s=m(a);t[e]=s*(n-p)+p,o(a<1?f:function(){c(null,t[e])})}r=r||{},"function"==typeof r&&(c=r,r={}),"function"!=typeof c&&(c=a);var h=+new Date,p=t[e],m=r.ease||i,g=isNaN(r.duration)?350:+r.duration,y=!1;return p===n?c(s,t[e]):o(f),d}}function i(e){return.5*(1-Math.cos(Math.PI*e))}function a(){}var o=n(334),s=new Error("Element already at target scroll position"),l=new Error("Scroll cancelled"),u=Math.min;e.exports={left:r("scrollLeft"),top:r("scrollTop")}},function(e,t,n){function r(e){var t=+new Date,n=Math.max(0,16-(t-o)),r=setTimeout(e,n);return o=t,r}var i=n(335),a=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||r,o=+new Date,s=i.cancelAnimationFrame||i.webkitCancelAnimationFrame||i.mozCancelAnimationFrame||clearTimeout;Function.prototype.bind&&(a=a.bind(i),s=s.bind(i)),t=e.exports=a,t.cancel=s},function(e,t,n){(function(t){var n;n="undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{},e.exports=n}).call(t,n(23))},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.classes,n=e.className,r=e.color,i=e.style,a=-1!==["primary","secondary"].indexOf(r),s=(0,h.default)(t.root,(0,l.default)({},t["color"+(0,g.capitalize)(r)],a),n),u=a?i:(0,o.default)({},i,{backgroundColor:r});return c.default.createElement("span",{className:s,style:u})}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(12),l=r(s),u=n(1),c=r(u),d=n(0),f=(r(d),n(6)),h=r(f),p=n(13),m=r(p),g=n(25),y=t.styles=function(e){return{root:{position:"absolute",height:2,bottom:0,width:"100%",transition:e.transitions.create(),willChange:"left, width"},colorPrimary:{backgroundColor:e.palette.primary.main},colorSecondary:{backgroundColor:e.palette.secondary.main}}};i.propTypes={},t.default=(0,m.default)(y,{name:"MuiTabIndicator"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.classes,n=e.className,r=e.direction,i=e.onClick,a=e.visible,s=(0,l.default)(e,["classes","className","direction","onClick","visible"]),u=(0,h.default)(t.root,n);return a?c.default.createElement(x.default,(0,o.default)({className:u,onClick:i,tabIndex:-1},s),"left"===r?k:T):c.default.createElement("div",{className:u})}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(3),l=r(s),u=n(1),c=r(u),d=n(0),f=(r(d),n(6)),h=r(f),p=n(338),m=r(p),g=n(343),y=r(g),v=n(13),_=r(v),b=n(64),x=r(b),w=t.styles=function(e){return{root:{color:"inherit",flex:"0 0 "+7*e.spacing.unit+"px"}}},k=c.default.createElement(m.default,null),T=c.default.createElement(y.default,null);i.propTypes={},i.defaultProps={visible:!0},t.default=(0,_.default)(w,{name:"MuiTabScrollButton"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),o=n(137),s=r(o),l=n(139),u=r(l),c=a.default.createElement("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),d=function(e){return a.default.createElement(u.default,e,c)};d=(0,s.default)(d),d.muiName="SvgIcon",t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var s=n(1),l=n(138),u=(r(l),n(44)),c=(r(u),function(e){return function(t){var n=(0,s.createFactory)(t),r=function(t){function r(){return i(this,r),a(this,t.apply(this,arguments))}return o(r,t),r.prototype.shouldComponentUpdate=function(t){return e(this.props,t)},r.prototype.render=function(){return n(this.props)},r}(s.Component);return r}});t.default=c},function(e,t,n){"use strict";t.__esModule=!0;var r=function(e,t){return function(n){return n[e]=t,n}};t.default=r},function(e,t,n){"use strict";t.__esModule=!0;var r=n(67),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=i.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children,n=e.classes,r=e.className,i=e.color,a=e.nativeColor,s=e.titleAccess,u=e.viewBox,d=(0,c.default)(e,["children","classes","className","color","nativeColor","titleAccess","viewBox"]),h=(0,m.default)(n.root,(0,l.default)({},n["color"+(0,v.capitalize)(i)],"inherit"!==i),r);return f.default.createElement("svg",(0,o.default)({className:h,focusable:"false",viewBox:u,color:a,"aria-hidden":s?"false":"true"},d),s?f.default.createElement("title",null,s):null,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(12),l=r(s),u=n(3),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(13),y=r(g),v=n(25),_=t.styles=function(e){return{root:{userSelect:"none",fontSize:24,width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorDisabled:{color:e.palette.action.disabled},colorError:{color:e.palette.error.main}}};i.propTypes={},i.defaultProps={color:"inherit",viewBox:"0 0 24 24"},i.muiName="SvgIcon",t.default=(0,y.default)(_,{name:"MuiSvgIcon"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),a=r(i),o=n(137),s=r(o),l=n(139),u=r(l),c=a.default.createElement("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),d=function(e){return a.default.createElement(u.default,e,c)};d=(0,s.default)(d),d.muiName="SvgIcon",t.default=d},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var i=n(2),a=r(i),o=n(12),s=r(o),l=n(3),u=r(l),c=n(7),d=r(c),f=n(4),h=r(f),p=n(5),m=r(p),g=n(8),y=r(g),v=n(9),_=r(v),b=n(1),x=r(b),w=n(0),k=(r(w),n(29)),T=r(k),M=n(6),A=r(M),C=n(140),S=r(C),E=n(345),P=r(E),I=n(346),L=r(I),O=n(13),z=r(O),R=n(347),D=n(349),N=r(D),F=n(361),j=r(F),B=t.styles={root:{display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:"none",border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},disabled:{pointerEvents:"none",cursor:"default"},keyboardFocused:{}},U=function(e){function t(){var e,n,r,i;(0,h.default)(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=(0,y.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(o))),r.state={},r.onKeyboardFocusHandler=function(e){r.keyDown=!1,r.setState({keyboardFocused:!0}),r.props.onKeyboardFocus&&r.props.onKeyboardFocus(e)},r.onRippleRef=function(e){r.ripple=e},r.ripple=null,r.keyDown=!1,r.button=null,r.keyboardFocusTimeout=null,r.keyboardFocusCheckTime=50,r.keyboardFocusMaxCheckTimes=5,r.handleKeyDown=function(e){var t=r.props,n=t.component,i=t.focusRipple,a=t.onKeyDown,o=t.onClick,s=(0,S.default)(e);i&&!r.keyDown&&r.state.keyboardFocused&&r.ripple&&"space"===s&&(r.keyDown=!0,e.persist(),r.ripple.stop(e,function(){r.ripple.start(e)})),a&&a(e),e.target!==e.currentTarget||!n||"button"===n||"space"!==s&&"enter"!==s||(e.preventDefault(),o&&o(e))},r.handleKeyUp=function(e){r.props.focusRipple&&"space"===(0,S.default)(e)&&r.ripple&&r.state.keyboardFocused&&(r.keyDown=!1,e.persist(),r.ripple.stop(e,function(){return r.ripple.pulsate(e)})),r.props.onKeyUp&&r.props.onKeyUp(e)},r.handleMouseDown=(0,j.default)(r,"MouseDown","start",function(){clearTimeout(r.keyboardFocusTimeout),(0,R.focusKeyPressed)(!1),r.state.keyboardFocused&&r.setState({keyboardFocused:!1})}),r.handleMouseUp=(0,j.default)(r,"MouseUp","stop"),r.handleMouseLeave=(0,j.default)(r,"MouseLeave","stop",function(e){r.state.keyboardFocused&&e.preventDefault()}),r.handleTouchStart=(0,j.default)(r,"TouchStart","start"),r.handleTouchEnd=(0,j.default)(r,"TouchEnd","stop"),r.handleTouchMove=(0,j.default)(r,"TouchEnd","stop"),r.handleBlur=(0,j.default)(r,"Blur","stop",function(){clearTimeout(r.keyboardFocusTimeout),(0,R.focusKeyPressed)(!1),r.setState({keyboardFocused:!1})}),r.handleFocus=function(e){r.props.disabled||(r.button||(r.button=e.currentTarget),e.persist(),(0,R.detectKeyboardFocus)(r,r.button,function(){r.onKeyboardFocusHandler(e)}),r.props.onFocus&&r.props.onFocus(e))},i=n,(0,y.default)(r,i)}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentDidMount",value:function(){this.button=T.default.findDOMNode(this),(0,R.listenForFocusKeys)((0,P.default)(this.button))}},{key:"componentDidUpdate",value:function(e,t){this.props.focusRipple&&!this.props.disableRipple&&!t.keyboardFocused&&this.state.keyboardFocused&&this.ripple.pulsate()}},{key:"componentWillUnmount",value:function(){this.button=null,clearTimeout(this.keyboardFocusTimeout)}},{key:"render",value:function(){var e,t=this.props,n=t.buttonRef,r=t.centerRipple,i=t.children,o=t.classes,l=t.className,c=t.component,d=t.disabled,f=t.disableRipple,h=(t.focusRipple,t.onBlur,t.onFocus,t.onKeyboardFocus,t.onKeyDown,t.onKeyUp,t.onMouseDown,t.onMouseLeave,t.onMouseUp,t.onTouchEnd,t.onTouchMove,t.onTouchStart,t.tabIndex),p=t.TouchRippleProps,m=t.type,g=(0,u.default)(t,["buttonRef","centerRipple","children","classes","className","component","disabled","disableRipple","focusRipple","onBlur","onFocus","onKeyboardFocus","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"]),y=(0,A.default)(o.root,(e={},(0,s.default)(e,o.disabled,d),(0,s.default)(e,o.keyboardFocused,this.state.keyboardFocused),e),l),v={},_=c;return _||(_=g.href?"a":"button"),"button"===_?(v.type=m||"button",v.disabled=d):v.role="button",x.default.createElement(_,(0,a.default)({onBlur:this.handleBlur,onFocus:this.handleFocus,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onMouseDown:this.handleMouseDown,onMouseLeave:this.handleMouseLeave,onMouseUp:this.handleMouseUp,onTouchEnd:this.handleTouchEnd,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,tabIndex:d?"-1":h,className:y,ref:n},v,g),i,f||d?null:x.default.createElement(N.default,(0,a.default)({innerRef:this.onRippleRef,center:r},p)))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return"undefined"===typeof t.keyboardFocused?{keyboardFocused:!1,lastDisabled:e.disabled}:!t.prevState&&e.disabled&&t.keyboardFocused?{keyboardFocused:!1,lastDisabled:e.disabled}:{lastDisabled:e.disabled}}}]),t}(x.default.Component);U.propTypes={},U.defaultProps={centerRipple:!1,disableRipple:!1,focusRipple:!1,tabIndex:"0",type:"button"},t.default=(0,z.default)(B,{name:"MuiButtonBase"})((0,L.default)(U))},function(e,t,n){"use strict";function r(e){var t=(0,a.default)(e);return t&&t.defaultView||t.parentWindow}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var i=n(141),a=function(e){return e&&e.__esModule?e:{default:e}}(i);e.exports=t.default},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!==e&&void 0!==e&&this.setState(e)}function i(e){var t=this.constructor.getDerivedStateFromProps(e,this.state);null!==t&&void 0!==t&&this.setState(t)}function a(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function o(e){if(!e.prototype||!e.prototype.isReactComponent)throw new Error("Can only polyfill class components");if("function"===typeof e.getDerivedStateFromProps){if("function"===typeof e.prototype.componentWillMount)throw new Error("Cannot polyfill getDerivedStateFromProps() for components that define componentWillMount()");if("function"===typeof e.prototype.componentWillReceiveProps)throw new Error("Cannot polyfill getDerivedStateFromProps() for components that define componentWillReceiveProps()");e.prototype.componentWillMount=r,e.prototype.componentWillReceiveProps=i}if("function"===typeof e.prototype.getSnapshotBeforeUpdate){if("function"===typeof e.prototype.componentWillUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that define componentWillUpdate()");if("function"!==typeof e.prototype.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");e.prototype.componentWillUpdate=a;var t=e.prototype.componentDidUpdate;e.prototype.componentDidUpdate=function(e,n){t.call(this,e,n,this.__reactInternalSnapshot)}}return e}r.__suppressDeprecationWarning=!0,i.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0,e.exports=o},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return"undefined"!==typeof e&&(m.focusKeyPressed=Boolean(e)),m.focusKeyPressed}function a(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;e.keyboardFocusTimeout=setTimeout(function(){var o=(0,p.default)(t);i()&&(o.activeElement===t||(0,f.default)(t,o.activeElement))?n():r<e.keyboardFocusMaxCheckTimes&&a(e,t,n,r+1)},e.keyboardFocusCheckTime)}function o(e){return-1!==g.indexOf((0,u.default)(e))}function s(e){e.addEventListener("keyup",y)}Object.defineProperty(t,"__esModule",{value:!0}),t.focusKeyPressed=i,t.detectKeyboardFocus=a,t.listenForFocusKeys=s;var l=n(140),u=r(l),c=n(11),d=(r(c),n(348)),f=r(d),h=n(141),p=r(h),m={focusKeyPressed:!1},g=["tab","enter","space","esc","up","down","left","right"],y=function(e){o(e)&&(m.focusKeyPressed=!0)}},function(e,t,n){"use strict";function r(e,t){if(t)do{if(t===e)return!0}while(t=t.parentNode);return!1}Object.defineProperty(t,"__esModule",{value:!0});var i=n(142),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(){return a.default?function(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):r(e,t)}:r}(),e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=t.DELAY_RIPPLE=void 0;var i=n(2),a=r(i),o=n(3),s=r(o),l=n(350),u=r(l),c=n(7),d=r(c),f=n(4),h=r(f),p=n(5),m=r(p),g=n(8),y=r(g),v=n(9),_=r(v),b=n(1),x=r(b),w=n(0),k=(r(w),n(29)),T=r(k),M=n(356),A=r(M),C=n(6),S=r(C),E=n(13),P=r(E),I=n(358),L=r(I),O=550,z=t.DELAY_RIPPLE=80,R=t.styles=function(e){return{root:{display:"block",position:"absolute",overflow:"hidden",borderRadius:"inherit",width:"100%",height:"100%",left:0,top:0,pointerEvents:"none",zIndex:0},ripple:{width:50,height:50,left:0,top:0,opacity:0,position:"absolute"},rippleVisible:{opacity:.3,transform:"scale(1)",animation:"mui-ripple-enter "+O+"ms "+e.transitions.easing.easeInOut},ripplePulsate:{animationDuration:e.transitions.duration.shorter+"ms"},child:{opacity:1,display:"block",width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"currentColor"},childLeaving:{opacity:0,animation:"mui-ripple-exit "+O+"ms "+e.transitions.easing.easeInOut},childPulsate:{position:"absolute",left:0,top:0,animation:"mui-ripple-pulsate 2500ms "+e.transitions.easing.easeInOut+" 200ms infinite"},"@keyframes mui-ripple-enter":{"0%":{transform:"scale(0)",opacity:.1},"100%":{transform:"scale(1)",opacity:.3}},"@keyframes mui-ripple-exit":{"0%":{opacity:1},"100%":{opacity:0}},"@keyframes mui-ripple-pulsate":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.92)"},"100%":{transform:"scale(1)"}}}},D=function(e){function t(){var e,n,r,i;(0,h.default)(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=(0,y.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(o))),r.state={nextKey:0,ripples:[]},r.ignoringMouseDown=!1,r.startTimer=null,r.startTimerCommit=null,r.pulsate=function(){r.start({},{pulsate:!0})},r.start=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments[2],i=t.pulsate,a=void 0!==i&&i,o=t.center,s=void 0===o?r.props.center||t.pulsate:o,l=t.fakeElement,u=void 0!==l&&l;if("mousedown"===e.type&&r.ignoringMouseDown)return void(r.ignoringMouseDown=!1);"touchstart"===e.type&&(r.ignoringMouseDown=!0);var c=u?null:T.default.findDOMNode(r),d=c?c.getBoundingClientRect():{width:0,height:0,left:0,top:0},f=void 0,h=void 0,p=void 0;if(s||0===e.clientX&&0===e.clientY||!e.clientX&&!e.touches)f=Math.round(d.width/2),h=Math.round(d.height/2);else{var m=e.clientX?e.clientX:e.touches[0].clientX,g=e.clientY?e.clientY:e.touches[0].clientY;f=Math.round(m-d.left),h=Math.round(g-d.top)}if(s)(p=Math.sqrt((2*Math.pow(d.width,2)+Math.pow(d.height,2))/3))%2===0&&(p+=1);else{var y=2*Math.max(Math.abs((c?c.clientWidth:0)-f),f)+2,v=2*Math.max(Math.abs((c?c.clientHeight:0)-h),h)+2;p=Math.sqrt(Math.pow(y,2)+Math.pow(v,2))}e.touches?(r.startTimerCommit=function(){r.startCommit({pulsate:a,rippleX:f,rippleY:h,rippleSize:p,cb:n})},r.startTimer=setTimeout(function(){r.startTimerCommit(),r.startTimerCommit=null},z)):r.startCommit({pulsate:a,rippleX:f,rippleY:h,rippleSize:p,cb:n})},r.startCommit=function(e){var t=e.pulsate,n=e.rippleX,i=e.rippleY,a=e.rippleSize,o=e.cb,s=r.state.ripples;s=[].concat((0,u.default)(s),[x.default.createElement(L.default,{key:r.state.nextKey,classes:r.props.classes,timeout:{exit:O,enter:O},pulsate:t,rippleX:n,rippleY:i,rippleSize:a})]),r.setState({nextKey:r.state.nextKey+1,ripples:s},o)},r.stop=function(e,t){clearTimeout(r.startTimer);var n=r.state.ripples;if("touchend"===e.type&&r.startTimerCommit)return e.persist(),r.startTimerCommit(),r.startTimerCommit=null,void(r.startTimer=setTimeout(function(){r.stop(e,t)},0));r.startTimerCommit=null,n&&n.length&&r.setState({ripples:n.slice(1)},t)},i=n,(0,y.default)(r,i)}return(0,_.default)(t,e),(0,m.default)(t,[{key:"componentWillUnmount",value:function(){clearTimeout(this.startTimer)}},{key:"render",value:function(){var e=this.props,t=(e.center,e.classes),n=e.className,r=(0,s.default)(e,["center","classes","className"]);return x.default.createElement(A.default,(0,a.default)({component:"span",enter:!0,exit:!0,className:(0,S.default)(t.root,n)},r),this.state.ripples)}}]),t}(x.default.Component);D.propTypes={},D.defaultProps={center:!1},t.default=(0,P.default)(R,{flip:!1,name:"MuiTouchRipple"})(D)},function(e,t,n){"use strict";t.__esModule=!0;var r=n(351),i=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,i.default)(e)}},function(e,t,n){e.exports={default:n(352),__esModule:!0}},function(e,t,n){n(43),n(353),e.exports=n(14).Array.from},function(e,t,n){"use strict";var r=n(30),i=n(15),a=n(36),o=n(118),s=n(119),l=n(52),u=n(354),c=n(85);i(i.S+i.F*!n(355)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,i,d,f=a(e),h="function"==typeof this?this:Array,p=arguments.length,m=p>1?arguments[1]:void 0,g=void 0!==m,y=0,v=c(f);if(g&&(m=r(m,p>2?arguments[2]:void 0,2)),void 0==v||h==Array&&s(v))for(t=l(f.length),n=new h(t);t>y;y++)u(n,y,g?m(f[y],y):f[y]);else for(d=v.call(f),n=new h;!(i=d.next()).done;y++)u(n,y,g?o(d,m,[i.value,y],!0):i.value);return n.length=y,n}})},function(e,t,n){"use strict";var r=n(19),i=n(41);e.exports=function(e,t,n){t in e?r.f(e,t,i(0,n)):e[t]=n}},function(e,t,n){var r=n(18)("iterator"),i=!1;try{var a=[7][r]();a.return=function(){i=!0},Array.from(a,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!i)return!1;var n=!1;try{var a=[7],o=a[r]();o.next=function(){return{done:n=!0}},a[r]=function(){return o},e(a)}catch(e){}return n}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.__esModule=!0;var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=n(0),c=r(u),d=n(1),f=r(d),h=n(357),p=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},m=(c.default.any,c.default.node,c.default.bool,c.default.bool,c.default.bool,c.default.func,{component:"div",childFactory:function(e){return e}}),g=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,n,r));return i.state={children:(0,h.getChildMapping)(n.children,function(e){return(0,d.cloneElement)(e,{onExited:i.handleExited.bind(i,e),in:!0,appear:i.getProp(e,"appear"),enter:i.getProp(e,"enter"),exit:i.getProp(e,"exit")})})},i}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:{isMounting:!this.appeared}}},t.prototype.getProp=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.props;return null!=n[t]?n[t]:e.props[t]},t.prototype.componentDidMount=function(){this.appeared=!0},t.prototype.componentWillReceiveProps=function(e){var t=this,n=this.state.children,r=(0,h.getChildMapping)(e.children),i=(0,h.mergeChildMappings)(n,r);Object.keys(i).forEach(function(a){var o=i[a];if((0,d.isValidElement)(o)){var s=a in n,l=a in r,u=n[a],c=(0,d.isValidElement)(u)&&!u.props.in;!l||s&&!c?l||!s||c?l&&s&&(0,d.isValidElement)(u)&&(i[a]=(0,d.cloneElement)(o,{onExited:t.handleExited.bind(t,o),in:u.props.in,exit:t.getProp(o,"exit",e),enter:t.getProp(o,"enter",e)})):i[a]=(0,d.cloneElement)(o,{in:!1}):i[a]=(0,d.cloneElement)(o,{onExited:t.handleExited.bind(t,o),in:!0,exit:t.getProp(o,"exit",e),enter:t.getProp(o,"enter",e)})}}),this.setState({children:i})},t.prototype.handleExited=function(e,t){var n=(0,h.getChildMapping)(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.setState(function(t){var n=l({},t.children);return delete n[e.key],{children:n}}))},t.prototype.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=i(e,["component","childFactory"]),a=p(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?a:f.default.createElement(t,r,a)},t}(f.default.Component);g.childContextTypes={transitionGroup:c.default.object.isRequired},g.propTypes={},g.defaultProps=m,t.default=g,e.exports=t.default},function(e,t,n){"use strict";function r(e,t){var n=function(e){return t&&(0,a.isValidElement)(e)?t(e):e},r=Object.create(null);return e&&a.Children.map(e,function(e){return e}).forEach(function(e){r[e.key]=n(e)}),r}function i(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r=Object.create(null),i=[];for(var a in e)a in t?i.length&&(r[a]=i,i=[]):i.push(a);var o=void 0,s={};for(var l in t){if(r[l])for(o=0;o<r[l].length;o++){var u=r[l][o];s[r[l][o]]=n(u)}s[l]=n(l)}for(o=0;o<i.length;o++)s[i[o]]=n(i[o]);return s}t.__esModule=!0,t.getChildMapping=r,t.mergeChildMappings=i;var a=n(1)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),a=r(i),o=n(12),s=r(o),l=n(3),u=r(l),c=n(7),d=r(c),f=n(4),h=r(f),p=n(5),m=r(p),g=n(8),y=r(g),v=n(9),_=r(v),b=n(1),x=r(b),w=n(0),k=(r(w),n(6)),T=r(k),M=n(359),A=r(M),C=function(e){function t(){var e,n,r,i;(0,h.default)(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=(0,y.default)(this,(e=t.__proto__||(0,d.default)(t)).call.apply(e,[this].concat(o))),r.state={visible:!1,leaving:!1},r.handleEnter=function(){r.setState({visible:!0})},r.handleExit=function(){r.setState({leaving:!0})},i=n,(0,y.default)(r,i)}return(0,_.default)(t,e),(0,m.default)(t,[{key:"render",value:function(){var e,t,n=this.props,r=n.classes,i=n.className,o=n.pulsate,l=n.rippleX,c=n.rippleY,d=n.rippleSize,f=(0,u.default)(n,["classes","className","pulsate","rippleX","rippleY","rippleSize"]),h=this.state,p=h.visible,m=h.leaving,g=(0,T.default)(r.ripple,(e={},(0,s.default)(e,r.rippleVisible,p),(0,s.default)(e,r.ripplePulsate,o),e),i),y={width:d,height:d,top:-d/2+c,left:-d/2+l},v=(0,T.default)(r.child,(t={},(0,s.default)(t,r.childLeaving,m),(0,s.default)(t,r.childPulsate,o),t));return x.default.createElement(A.default,(0,a.default)({onEnter:this.handleEnter,onExit:this.handleExit},f),x.default.createElement("span",{className:g,style:y},x.default.createElement("span",{className:v})))}}]),t}(x.default.Component);C.propTypes={},C.defaultProps={pulsate:!1},t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function s(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}t.__esModule=!0,t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var u=n(0),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(u),d=n(1),f=r(d),h=n(29),p=r(h),m=(n(360),t.UNMOUNTED="unmounted"),g=t.EXITED="exited",y=t.ENTERING="entering",v=t.ENTERED="entered",_=t.EXITING="exiting",b=function(e){function t(n,r){a(this,t);var i=o(this,e.call(this,n,r)),s=r.transitionGroup,l=s&&!s.isMounting?n.enter:n.appear,u=void 0;return i.nextStatus=null,n.in?l?(u=g,i.nextStatus=y):u=v:u=n.unmountOnExit||n.mountOnEnter?m:g,i.state={status:u},i.nextCallback=null,i}return s(t,e),t.prototype.getChildContext=function(){return{transitionGroup:null}},t.prototype.componentDidMount=function(){this.updateStatus(!0)},t.prototype.componentWillReceiveProps=function(e){var t=this.pendingState||this.state,n=t.status;e.in?(n===m&&this.setState({status:g}),n!==y&&n!==v&&(this.nextStatus=y)):n!==y&&n!==v||(this.nextStatus=_)},t.prototype.componentDidUpdate=function(){this.updateStatus()},t.prototype.componentWillUnmount=function(){this.cancelNextCallback()},t.prototype.getTimeouts=function(){var e=this.props.timeout,t=void 0,n=void 0,r=void 0;return t=n=r=e,null!=e&&"number"!==typeof e&&(t=e.exit,n=e.enter,r=e.appear),{exit:t,enter:n,appear:r}},t.prototype.updateStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.nextStatus;if(null!==t){this.nextStatus=null,this.cancelNextCallback();var n=p.default.findDOMNode(this);t===y?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===g&&this.setState({status:m})},t.prototype.performEnter=function(e,t){var n=this,r=this.props.enter,i=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,a=this.getTimeouts();if(!t&&!r)return void this.safeSetState({status:v},function(){n.props.onEntered(e)});this.props.onEnter(e,i),this.safeSetState({status:y},function(){n.props.onEntering(e,i),n.onTransitionEnd(e,a.enter,function(){n.safeSetState({status:v},function(){n.props.onEntered(e,i)})})})},t.prototype.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();if(!n)return void this.safeSetState({status:g},function(){t.props.onExited(e)});this.props.onExit(e),this.safeSetState({status:_},function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,function(){t.safeSetState({status:g},function(){t.props.onExited(e)})})})},t.prototype.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},t.prototype.safeSetState=function(e,t){var n=this;this.pendingState=e,t=this.setNextCallback(t),this.setState(e,function(){n.pendingState=null,t()})},t.prototype.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},t.prototype.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},t.prototype.render=function(){var e=this.state.status;if(e===m)return null;var t=this.props,n=t.children,r=i(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"===typeof n)return n(e,r);var a=f.default.Children.only(n);return f.default.cloneElement(a,r)},t}(f.default.Component);b.contextTypes={transitionGroup:c.object},b.childContextTypes={transitionGroup:function(){}},b.propTypes={},b.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},b.UNMOUNTED=0,b.EXITED=1,b.ENTERING=2,b.ENTERED=3,b.EXITING=4,t.default=b},function(e,t,n){"use strict";function r(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!==typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}}t.__esModule=!0,t.classNamesShape=t.timeoutsShape=void 0,t.transitionTimeout=r;var i=n(0),a=function(e){return e&&e.__esModule?e:{default:e}}(i);t.timeoutsShape=a.default.oneOfType([a.default.number,a.default.shape({enter:a.default.number,exit:a.default.number}).isRequired]),t.classNamesShape=a.default.oneOfType([a.default.string,a.default.shape({enter:a.default.string,exit:a.default.string,active:a.default.string}),a.default.shape({enter:a.default.string,enterDone:a.default.string,enterActive:a.default.string,exit:a.default.string,exitDone:a.default.string,exitActive:a.default.string})])},function(e,t,n){"use strict";function r(e,t,n,r){return function(i){return r&&r.call(e,i),!i.defaultPrevented&&(e.ripple&&e.ripple[n](i),e.props&&"function"===typeof e.props["on"+t]&&e.props["on"+t](i),!0)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var i=n(22),a=r(i),o=n(3),s=r(o),l=n(7),u=r(l),c=n(4),d=r(c),f=n(5),h=r(f),p=n(8),m=r(p),g=n(9),y=r(g),v=n(12),_=r(v),b=n(2),x=r(b),w=n(1),k=r(w),T=n(0),M=(r(T),n(6)),A=r(M),C=n(13),S=r(C),E=n(64),P=r(E),I=n(25),L=t.styles=function(e){return{root:(0,x.default)({},e.typography.button,(0,_.default)({maxWidth:264,position:"relative",minWidth:72,padding:0,height:48,flex:"none",overflow:"hidden"},e.breakpoints.up("md"),{minWidth:160})),labelIcon:{height:72},textColorInherit:{color:"inherit",opacity:.7},textColorPrimary:{color:e.palette.text.secondary},textColorPrimarySelected:{color:e.palette.primary.main},textColorPrimaryDisabled:{color:e.palette.text.disabled},textColorSecondary:{color:e.palette.text.secondary},textColorSecondarySelected:{color:e.palette.secondary.main},textColorSecondaryDisabled:{color:e.palette.text.disabled},textColorInheritSelected:{opacity:1},textColorInheritDisabled:{opacity:.4},fullWidth:{flexGrow:1},wrapper:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:"100%",flexDirection:"column"},labelContainer:(0,_.default)({paddingTop:6,paddingBottom:6,paddingLeft:12,paddingRight:12},e.breakpoints.up("md"),{paddingLeft:3*e.spacing.unit,paddingRight:3*e.spacing.unit}),label:(0,_.default)({fontSize:e.typography.pxToRem(14),whiteSpace:"normal"},e.breakpoints.up("md"),{fontSize:e.typography.pxToRem(13)}),labelWrapped:(0,_.default)({},e.breakpoints.down("sm"),{fontSize:e.typography.pxToRem(12)})}},O=function(e){function t(){var e,n,r,i;(0,d.default)(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=(0,m.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(o))),r.state={wrappedText:!1},r.handleChange=function(e){var t=r.props,n=t.onChange,i=t.value,a=t.onClick;n&&n(e,i),a&&a(e)},r.label=void 0,r.checkTextWrap=function(){if(r.label){var e=r.label.getClientRects().length>1;r.state.wrappedText!==e&&r.setState({wrappedText:e})}},i=n,(0,m.default)(r,i)}return(0,y.default)(t,e),(0,h.default)(t,[{key:"componentDidMount",value:function(){this.checkTextWrap()}},{key:"componentDidUpdate",value:function(e,t){this.state.wrappedText===t.wrappedText&&this.checkTextWrap()}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.classes,i=n.className,o=n.disabled,l=n.fullWidth,u=n.icon,c=n.indicator,d=n.label,f=(n.onChange,n.selected),h=n.style,p=n.textColor,m=(n.value,(0,s.default)(n,["classes","className","disabled","fullWidth","icon","indicator","label","onChange","selected","style","textColor","value"])),g=void 0;void 0!==d&&(g=k.default.createElement("span",{className:r.labelContainer},k.default.createElement("span",{className:(0,A.default)(r.label,(0,_.default)({},r.labelWrapped,this.state.wrappedText)),ref:function(e){t.label=e}},d)));var y=(0,A.default)(r.root,r["textColor"+(0,I.capitalize)(p)],(e={},(0,_.default)(e,r["textColor"+(0,I.capitalize)(p)+"Disabled"],o),(0,_.default)(e,r["textColor"+(0,I.capitalize)(p)+"Selected"],f),(0,_.default)(e,r.labelIcon,u&&g),(0,_.default)(e,r.fullWidth,l),e),i),v={};return"secondary"!==p&&"inherit"!==p&&(v.color=p),v=(0,a.default)(v).length>0?(0,x.default)({},v,h):h,k.default.createElement(P.default,(0,x.default)({focusRipple:!0,className:y,style:v,role:"tab","aria-selected":f,disabled:o},m,{onClick:this.handleChange}),k.default.createElement("span",{className:r.wrapper},u,g),c)}}]),t}(k.default.Component);O.propTypes={},O.defaultProps={disabled:!1,textColor:"inherit"},t.default=(0,S.default)(L,{name:"MuiTab"})(O)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=n(34),f=n.n(d),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"render",value:function(){var e=this.props.children,t=Object(c.a)(f.a)({padding:24,marginTop:"110px !important"});return s.a.createElement(t,{component:"div"},e)}}]),t}(o.Component);p.propTypes={children:u.a.node.isRequired},t.a=p},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,n=e.align,r=e.classes,i=e.className,a=e.component,s=e.color,u=e.gutterBottom,d=e.headlineMapping,h=e.noWrap,p=e.paragraph,g=e.variant,y=(0,c.default)(e,["align","classes","className","component","color","gutterBottom","headlineMapping","noWrap","paragraph","variant"]),_=(0,m.default)(r.root,r[g],(t={},(0,l.default)(t,r["color"+(0,v.capitalize)(s)],"default"!==s),(0,l.default)(t,r.noWrap,h),(0,l.default)(t,r.gutterBottom,u),(0,l.default)(t,r.paragraph,p),(0,l.default)(t,r["align"+(0,v.capitalize)(n)],"inherit"!==n),t),i),b=a||(p?"p":d[g])||"span";return f.default.createElement(b,(0,o.default)({className:_},y))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(12),l=r(s),u=n(3),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(13),y=r(g),v=n(25),_=t.styles=function(e){return{root:{display:"block",margin:0},display4:e.typography.display4,display3:e.typography.display3,display2:e.typography.display2,display1:e.typography.display1,headline:e.typography.headline,title:e.typography.title,subheading:e.typography.subheading,body2:e.typography.body2,body1:e.typography.body1,caption:e.typography.caption,button:e.typography.button,alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right"},alignJustify:{textAlign:"justify"},noWrap:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},gutterBottom:{marginBottom:"0.35em"},paragraph:{marginBottom:2*e.spacing.unit},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorTextSecondary:{color:e.palette.text.secondary},colorError:{color:e.palette.error.main}}};i.propTypes={},i.defaultProps={align:"inherit",color:"default",gutterBottom:!1,headlineMapping:{display4:"h1",display3:"h1",display2:"h1",display1:"h1",headline:"h1",title:"h2",subheading:"h3",body2:"aside",body1:"p"},noWrap:!1,paragraph:!1,variant:"body1"},t.default=(0,y.default)(_,{name:"MuiTypography"})(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(17),u=n(366),c=n.n(u),d=n(34),f=n.n(d),h=n(368),p=n.n(h),m=n(370),g=n.n(m),y=n(371),v=n.n(y),_=n(28),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),x=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),b(t,[{key:"render",value:function(){var e=l.a.header({backgroundColor:_.a.lightTeal}),t=l.a.div({position:"absolute",right:20}),n=l.a.img({paddingRight:10,width:40});return s.a.createElement(e,null,s.a.createElement(c.a,null,s.a.createElement(n,{src:g.a,alt:"logo"}),s.a.createElement(f.a,{variant:"title",color:"inherit"},"Medical Artificial Intelligence Index"),s.a.createElement(t,null,s.a.createElement(p.a,{"aria-haspopup":"false",color:"inherit"},s.a.createElement(v.a,{color:"#fff",size:32})))))}}]),t}(o.Component);x.propTypes={},t.a=x},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(367);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children,n=e.classes,r=e.className,i=e.disableGutters,a=(0,l.default)(e,["children","classes","className","disableGutters"]),s=(0,m.default)(n.root,(0,o.default)({},n.gutters,!i),r);return f.default.createElement("div",(0,c.default)({className:s},a),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(12),o=r(a),s=n(3),l=r(s),u=n(2),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(13),y=r(g),v=t.styles=function(e){return{root:(0,c.default)({},e.mixins.toolbar,{position:"relative",display:"flex",alignItems:"center"}),gutters:e.mixins.gutters()}};i.propTypes={},i.defaultProps={disableGutters:!1},t.default=(0,y.default)(v,{name:"MuiToolbar"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(369);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,n=e.children,r=e.classes,i=e.className,a=e.color,s=e.disabled,u=(0,c.default)(e,["children","classes","className","color","disabled"]);return f.default.createElement(_.default,(0,o.default)({className:(0,m.default)(r.root,(t={},(0,l.default)(t,r["color"+(0,b.capitalize)(a)],"default"!==a),(0,l.default)(t,r.disabled,s),t),i),centerRipple:!0,focusRipple:!0,disabled:s},u),f.default.createElement("span",{className:r.label},n))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(12),l=r(s),u=n(3),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(13),y=r(g),v=n(64),_=r(v),b=n(25),x=t.styles=function(e){return{root:{textAlign:"center",flex:"0 0 auto",fontSize:e.typography.pxToRem(24),width:48,height:48,padding:0,borderRadius:"50%",color:e.palette.action.active,transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest})},colorInherit:{color:"inherit"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},disabled:{color:e.palette.action.disabled},label:{width:"100%",display:"flex",alignItems:"inherit",justifyContent:"inherit"}}};i.propTypes={},i.defaultProps={color:"default",disabled:!1},t.default=(0,y.default)(x,{name:"MuiIconButton"})(i)},function(e,t,n){e.exports=n.p+"static/media/logo.5ccc52bf.svg"},function(e,t,n){"use strict";var r=function(e){return e&&"object"===typeof e&&"default"in e?e.default:e}(n(1)),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},o=function(e){var t=e.color,n=void 0===t?"#000":t,o=e.size,s=void 0===o?24:o,l=e.className,u=(e.children,a(e,["color","size","className","children"])),c="mdi-icon";return l&&(c+=" "+l),r.createElement("svg",i({},u,{width:s,height:s,fill:n,viewBox:"0 0 24 24",className:c}),r.createElement("path",{d:"M12,2C6.48,2 2,6.48 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12C22,6.48 17.52,2 12,2Z"}))};e.exports=o},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=(n.n(l),n(17)),c=n(47),d=n.n(c),f=n(34),h=n.n(f),p=n(143),m=n(382),g=n(383),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),v=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),y(t,[{key:"render",value:function(){var e=u.a.div({fontWeight:500}),t=Object(u.a)(d.a)({marginTop:"30px !important"}),n=u.a.img({width:"100%"});return s.a.createElement("div",null,s.a.createElement(d.a,{container:!0,spacing:24},s.a.createElement(d.a,{item:!0,md:3}),s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:6},s.a.createElement(p.a,{size:40}),s.a.createElement(h.a,{gutterBottom:!0,variant:"display1",component:"h5"},'"The Medical Artificial Intelligence Index is a community effort aimed at tracking, curating, and visualizing data on the applications of AI in medicine and health care."'),s.a.createElement(m.a,{content:"Artificial Intelligence (AI) continues to find ample application opportunities in health care systems fed by an ever increasing amount of medical data, ranging from x-ray images and DNA sequences to text reports and retinal photographs. In addition to promising greater efficacy and efficiency in clinical care, AI has demonstrated great utility in multiple clinical tasks - from improving diagnostics to optimizing patient scheduling. While physicians are historically trained to examine data for the detection and characterization of anomalies, recent advances in AI have enabled machines to automatically recognize complex discriminative patterns in data - and provide quantitative, rather than qualitative, assessments."}),s.a.createElement(m.a,{content:"The Medical AI Index identifies AI applications in radiology, pathology, genomics, dermatology, and other data-centric medical fields that currently benefit - or are expected to - from AI-based automated decision making systems. Specifically targeted at a general audience, the index measures activity and advancements in this rapidly growing domain, and compiles insights into digestible and consumable formats. It brings together a group of medical researchers, health care professionals, and machine learning scientists, in both academia and industry, to provide the domain knowledge needed to track the impact of AI on the field. "}),s.a.createElement(m.a,{title:"Context",content:s.a.createElement("div",null,"Within the larger AI scope, the index aims to address the medical vertical and, in doing so, complements other more horizontal efforts such as the",s.a.createElement(g.a,{content:"AI Index",url:"https://aiindex.org/"}),"as part of the Stanford One Hundred Year Study on Artificial Intelligence. The index also complements other health care-related efforts such as the",s.a.createElement(g.a,{content:"Future Health Index",url:"https://www.futurehealthindex.com/report/2017/"}),"that explores how global health systems use digital technology to help prepare for the future, as well as the",s.a.createElement(g.a,{content:"Ethical, Social, and Political Challenges of Artificial Intelligence in Health",url:"http://futureadvocacy.com/publications/"}),"report by the Future Advocacy group.")}),s.a.createElement(m.a,{title:"Current Scope",content:s.a.createElement("div",null,"This current pilot explores the academic literature landscape while using it as a proxy for the general state of medical AI applications. Some of its features include:",s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(e,null,"Fine-grained Catalog "),"The index spans multiple popular repositories housing academic manuscripts in the field including both journals and conferences, whilst providing granular and domain-specific search parameters."),s.a.createElement("li",null,s.a.createElement(e,null,"Live Reproducibility Index "),"A live track of reproducibility metrics in the field as it pertains to the sharing of code implementations and data used in experiments."),s.a.createElement("li",null,s.a.createElement(e,null,"Commentary "),"All statistics are accompanied by in depth explanations, interpretations, and extrapolations."),s.a.createElement("li",null,s.a.createElement(e,null,"Transparency "),"All underlying data used to generate statistics and insights are made public. While every effort has been made to accurately curate the data, errors are inevitable. Corrections are welcome."),s.a.createElement("li",null,s.a.createElement(e,null,"International Focus "),"Every attempt is made to produce globally-relevant statistics.")))}),s.a.createElement(m.a,{title:"Audience",content:s.a.createElement("div",null,s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(e,null,"Funding Agencies "),"Recognize over- and under-explored application areas for more well-informed funding decisions. Accurately situate requests for funding and funded projects within the current state-of-the-art."),s.a.createElement("li",null,s.a.createElement(e,null,"Journalists "),"Reference relevant statistics, reuse images and plots, and quickly develop a general understanding without domain-knowledge."),s.a.createElement("li",null,s.a.createElement(e,null,"Policymakers & Regulators "),"Query academic efforts while developing new guidance for submissions seeking approval."),s.a.createElement("li",null,s.a.createElement(e,null,"Industry Professionals "),"Quickly gauge the current academic state in a given application area as a proxy for commercial viability and success."),s.a.createElement("li",null,s.a.createElement(e,null,"Researchers "),"Explore the plethora of work that lives beyond the first page of Google search results. Identify state-of-the-art methods in your area and their evolution/popularity over time."),s.a.createElement("li",null,s.a.createElement(e,null,"The Public "),"Understand the applications most likely to be automated in the near future and how patients are most likely to be affected.")))}),s.a.createElement(m.a,{title:"Future Scope",content:s.a.createElement("div",null,"While initially focused on curating academic progress through scientific manuscripts, we hope to expand the index to include:",s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement(e,null,"Live Performance Leaderboard"),"Track the technical AI performance reported on specific benchmarking datasets used in the field."),s.a.createElement("li",null,s.a.createElement(e,null,"Clinical Implementation"),"Survey the landscape of actual AI-implementation in clinical settings including tools cleared for use by various regulatory bodies."),s.a.createElement("li",null,s.a.createElement(e,null,"Glossary "),"Running glossary of terms directly related to medical AI applications."),s.a.createElement("li",null,s.a.createElement(e,null,"Physician Stories "),"Survey levels of interaction with automated systems and their impact on clinical workflows. Gauge if and how physicians understand AI systems mechanics, interpret their outcomes, and guard against failures."),s.a.createElement("li",null,s.a.createElement(e,null,"Patient Stories"),"Survey the general sentiment towards medical decision making being outsourced to machines as a new third party in the sacred patient-doctor relationship."),s.a.createElement("li",null,s.a.createElement(e,null,"Adversarial Practices"),"Track methods for generating and countering adversarial attacks against medical AI systems."),s.a.createElement("li",null,s.a.createElement(e,null,"Industry"),"Analyze the industrial landscape spanning startups and associated funding."),s.a.createElement("li",null,s.a.createElement(e,null,"Open-source Software "),"Record activity surrounding the medical AI tool development on open-source software platforms such as github."),s.a.createElement("li",null,s.a.createElement(e,null,"Public Sentiment"),"Understand public attitude towards medical AI applications through sentiment analysis of social media content."),s.a.createElement("li",null,s.a.createElement(e,null,"Industry"),"Analyze the industrial landscape spanning startups and associated funding.")))}),s.a.createElement(m.a,{content:s.a.createElement("div",null,"The Medical AI Index is proudly sponsored by",s.a.createElement(t,{container:!0,spacing:24},s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement(n,{src:"img/hms.png"})),s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement(n,{src:"img/bwh.png"})),s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement(n,{src:"img/dfci.png"})),s.a.createElement(d.a,{item:!0,md:2}),s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement(n,{src:"img/nih.png"})),s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:4},s.a.createElement(n,{src:"img/nci.png"})),s.a.createElement(d.a,{item:!0,md:2})))}),s.a.createElement(m.a,{title:"Feedback",content:s.a.createElement("div",null,"We are in our early stages and we invite the community to join the effort and submit feedback. The effort would not have been possible without open-source software projects including",s.a.createElement(g.a,{content:"React",url:"https://reactjs.org/",space:!1}),",",s.a.createElement(g.a,{content:"Glamorous",url:"https://glamorous.rocks/",space:!1}),",",s.a.createElement(g.a,{content:"Material-UI",url:"https://material-ui-next.com/",space:!1}),", and",s.a.createElement(g.a,{content:"Plotly",url:"https://plot.ly/"}),"among others.")})),s.a.createElement(d.a,{item:!0,md:3})))}}]),t}(o.Component);v.propTypes={},t.a=v},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){var r=(0,f.default)({},"grid-"+n,{flexBasis:0,flexGrow:1,maxWidth:"100%"});M.forEach(function(e){if("boolean"!==typeof e){var t=Math.round(e/12*1e7)/1e5+"%";r["grid-"+n+"-"+e]={flexBasis:t,maxWidth:t}}}),"xs"===n?(0,c.default)(e,r):e[t.breakpoints.up(n)]=r}function a(e,t){var n={};return T.forEach(function(e,r){0!==r&&(n["spacing-"+t+"-"+e]={margin:-e/2,width:"calc(100% + "+e+"px)","& > $typeItem":{padding:e/2}})}),n}function o(e){var t,n=e.alignContent,r=e.alignItems,i=e.classes,a=e.className,s=e.component,u=e.container,d=e.direction,h=e.hidden,m=e.item,g=e.justify,v=e.lg,_=e.md,b=e.sm,x=e.spacing,w=e.wrap,T=e.xl,M=e.xs,A=e.zeroMinWidth,C=(0,l.default)(e,["alignContent","alignItems","classes","className","component","container","direction","hidden","item","justify","lg","md","sm","spacing","wrap","xl","xs","zeroMinWidth"]),S=(0,y.default)((t={},(0,f.default)(t,i.typeContainer,u),(0,f.default)(t,i.typeItem,m),(0,f.default)(t,i.zeroMinWidth,A),(0,f.default)(t,i["spacing-xs-"+String(x)],u&&0!==x),(0,f.default)(t,i["direction-xs-"+String(d)],d!==o.defaultProps.direction),(0,f.default)(t,i["wrap-xs-"+String(w)],w!==o.defaultProps.wrap),(0,f.default)(t,i["align-items-xs-"+String(r)],r!==o.defaultProps.alignItems),(0,f.default)(t,i["align-content-xs-"+String(n)],n!==o.defaultProps.alignContent),(0,f.default)(t,i["justify-xs-"+String(g)],g!==o.defaultProps.justify),(0,f.default)(t,i["grid-xs"],!0===M),(0,f.default)(t,i["grid-xs-"+String(M)],M&&!0!==M),(0,f.default)(t,i["grid-sm"],!0===b),(0,f.default)(t,i["grid-sm-"+String(b)],b&&!0!==b),(0,f.default)(t,i["grid-md"],!0===_),(0,f.default)(t,i["grid-md-"+String(_)],_&&!0!==_),(0,f.default)(t,i["grid-lg"],!0===v),(0,f.default)(t,i["grid-lg-"+String(v)],v&&!0!==v),(0,f.default)(t,i["grid-xl"],!0===T),(0,f.default)(t,i["grid-xl-"+String(T)],T&&!0!==T),t),a),E=(0,c.default)({className:S},C);return h?p.default.createElement(k.default,h,p.default.createElement(s,E)):p.default.createElement(s,E)}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var s=n(3),l=r(s),u=n(2),c=r(u),d=n(12),f=r(d),h=n(1),p=r(h),m=n(0),g=(r(m),n(6)),y=r(g),v=n(13),_=r(v),b=n(46),x=n(374),w=(r(x),n(375)),k=r(w),T=[0,8,16,24,40],M=[!0,1,2,3,4,5,6,7,8,9,10,11,12],A=t.styles=function(e){return(0,c.default)({typeContainer:{boxSizing:"border-box",display:"flex",flexWrap:"wrap",width:"100%"},typeItem:{boxSizing:"border-box",flex:"0 0 auto",margin:"0"},zeroMinWidth:{minWidth:0},"direction-xs-column":{flexDirection:"column"},"direction-xs-column-reverse":{flexDirection:"column-reverse"},"direction-xs-row-reverse":{flexDirection:"row-reverse"},"wrap-xs-nowrap":{flexWrap:"nowrap"},"wrap-xs-wrap-reverse":{flexWrap:"wrap-reverse"},"align-items-xs-center":{alignItems:"center"},"align-items-xs-flex-start":{alignItems:"flex-start"},"align-items-xs-flex-end":{alignItems:"flex-end"},"align-items-xs-baseline":{alignItems:"baseline"},"align-content-xs-center":{alignContent:"center"},"align-content-xs-flex-start":{alignContent:"flex-start"},"align-content-xs-flex-end":{alignContent:"flex-end"},"align-content-xs-space-between":{alignContent:"space-between"},"align-content-xs-space-around":{alignContent:"space-around"},"justify-xs-center":{justifyContent:"center"},"justify-xs-flex-end":{justifyContent:"flex-end"},"justify-xs-space-between":{justifyContent:"space-between"},"justify-xs-space-around":{justifyContent:"space-around"}},a(e,"xs"),b.keys.reduce(function(t,n){return i(t,e,n),t},{}))};o.propTypes={},o.defaultProps={alignContent:"stretch",alignItems:"stretch",component:"div",container:!1,direction:"row",item:!1,justify:"flex-start",spacing:0,wrap:"wrap",zeroMinWidth:!1};var C=o;t.default=(0,_.default)(A,{name:"MuiGrid"})(C)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return function(t){return function(n,r,i,a,o){var s=o||r;return"undefined"===typeof n[r]||n[t]?null:new Error("The property `"+s+"` of `"+e+"` must be used on `"+t+"`.")}}};t.default=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(376);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.implementation,n=(0,o.default)(e,["implementation"]);return"js"===t?l.default.createElement(d.default,n):l.default.createElement(h.default,n)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(3),o=r(a),s=n(1),l=r(s),u=n(0),c=(r(u),n(377)),d=r(c),f=n(381),h=r(f);i.propTypes={},i.defaultProps={implementation:"js",lgDown:!1,lgUp:!1,mdDown:!1,mdUp:!1,smDown:!1,smUp:!1,xlDown:!1,xlUp:!1,xsDown:!1,xsUp:!1},t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children,n=e.only,r=e.width,i=!0;if(n)if(Array.isArray(n))for(var a=0;a<n.length;a+=1){var o=n[a];if(r===o){i=!1;break}}else n&&r===n&&(i=!1);if(i)for(var u=0;u<s.keys.length;u+=1){var c=s.keys[u],d=e[c+"Up"],f=e[c+"Down"];if(d&&(0,l.isWidthUp)(c,r)||f&&(0,l.isWidthDown)(c,r)){i=!1;break}}return i?t:null}Object.defineProperty(t,"__esModule",{value:!0});var a=n(0),o=r(a),s=n(46),l=n(378),u=r(l),c=n(380),d=r(c);i.propTypes={children:o.default.node,className:o.default.string,implementation:o.default.oneOf(["js","css"]),initialWidth:o.default.oneOf(["xs","sm","md","lg","xl"]),lgDown:o.default.bool,lgUp:o.default.bool,mdDown:o.default.bool,mdUp:o.default.bool,only:o.default.oneOfType([o.default.oneOf(["xs","sm","md","lg","xl"]),o.default.arrayOf(o.default.oneOf(["xs","sm","md","lg","xl"]))]),smDown:o.default.bool,smUp:o.default.bool,width:o.default.string.isRequired,xlDown:o.default.bool,xlUp:o.default.bool,xsDown:o.default.bool,xsUp:o.default.bool},i.propTypes=(0,d.default)(i.propTypes,"HiddenJs"),t.default=(0,u.default)()(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isWidthDown=t.isWidthUp=void 0;var i=n(2),a=r(i),o=n(3),s=r(o),l=n(7),u=r(l),c=n(4),d=r(c),f=n(5),h=r(f),p=n(8),m=r(p),g=n(9),y=r(g),v=n(1),_=r(v),b=n(0),x=(r(b),n(92)),w=r(x),k=n(133),T=r(k),M=n(44),A=(r(M),n(87)),C=r(A),S=n(379),E=r(S),P=n(46),I=(t.isWidthUp=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?P.keys.indexOf(e)<P.keys.indexOf(t):P.keys.indexOf(e)<=P.keys.indexOf(t)},t.isWidthDown=function(e,t){return arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?P.keys.indexOf(t)<P.keys.indexOf(e):P.keys.indexOf(t)<=P.keys.indexOf(e)},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){var n=e.resizeInterval,r=void 0===n?166:n,i=e.withTheme,o=void 0!==i&&i,l=function(e){function n(){var e,t,i,a;(0,d.default)(this,n);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return t=i=(0,m.default)(this,(e=n.__proto__||(0,u.default)(n)).call.apply(e,[this].concat(s))),i.state={width:void 0},i.handleResize=(0,T.default)(function(){i.updateWidth(window.innerWidth)},r),a=t,(0,m.default)(i,a)}return(0,y.default)(n,e),(0,h.default)(n,[{key:"componentDidMount",value:function(){this.updateWidth(window.innerWidth)}},{key:"componentWillUnmount",value:function(){this.handleResize.cancel()}},{key:"updateWidth",value:function(e){for(var t=this.props.theme.breakpoints,n=null,r=1;null===n&&r<P.keys.length;){var i=P.keys[r];if(e<t.values[i]){n=P.keys[r-1];break}r+=1}(n=n||"xl")!==this.state.width&&this.setState({width:n})}},{key:"render",value:function(){var e=this.props,n=e.initialWidth,r=e.theme,i=e.width,l=(0,s.default)(e,["initialWidth","theme","width"]),u=(0,a.default)({width:i||this.state.width||n},l),c={};return o&&(c.theme=r),void 0===u.width?null:_.default.createElement(w.default,{target:"window",onResize:this.handleResize},_.default.createElement(t,(0,a.default)({},c,u)))}}]),n}(_.default.Component);return l.propTypes={},(0,C.default)(l,t),(0,E.default)()(l)}});t.default=I},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(){return A||(A=(0,k.default)())}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(7),l=r(s),u=n(4),c=r(u),d=n(5),f=r(d),h=n(8),p=r(h),m=n(9),g=r(m),y=n(1),v=r(y),_=n(87),b=r(_),x=n(44),w=(r(x),n(129)),k=r(w),T=n(131),M=r(T),A=void 0,C=function(){return function(e){var t=function(t){function n(e,t){(0,c.default)(this,n);var r=(0,p.default)(this,(n.__proto__||(0,l.default)(n)).call(this,e,t));return r.state={},r.unsubscribeId=null,r.state={theme:M.default.initial(t)||i()},r}return(0,g.default)(n,t),(0,f.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribeId=M.default.subscribe(this.context,function(t){e.setState({theme:t})})}},{key:"componentWillUnmount",value:function(){null!==this.unsubscribeId&&M.default.unsubscribe(this.context,this.unsubscribeId)}},{key:"render",value:function(){return v.default.createElement(e,(0,o.default)({theme:this.state.theme},this.props))}}]),n}(v.default.Component);return t.contextTypes=M.default.contextTypes,(0,b.default)(t,e),t}};t.default=C},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return(0,c.default)({},e,(0,o.default)({},d,function(n){var r=(0,l.default)(n).filter(function(t){return!e.hasOwnProperty(t)});return r.length>0?new TypeError(t+": unknown props found: "+r.join(", ")+". Please remove the unknown properties."):null}))}Object.defineProperty(t,"__esModule",{value:!0}),t.specialProperty=void 0;var a=n(12),o=r(a),s=n(22),l=r(s),u=n(2),c=r(u);t.default=i;var d=t.specialProperty="exact-prop: \u200b"},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.children,n=e.classes,r=e.className,i=(e.lgDown,e.lgUp,e.mdDown,e.mdUp,e.only),a=(e.smDown,e.smUp,e.xlDown,e.xlUp,e.xsDown,e.xsUp,(0,s.default)(e,["children","classes","className","lgDown","lgUp","mdDown","mdUp","only","smDown","smUp","xlDown","xlUp","xsDown","xsUp"]),[]);r&&a.push(r);for(var o=0;o<p.keys.length;o+=1){var l=p.keys[o],u=e[l+"Up"],c=e[l+"Down"];u&&a.push(n[l+"Up"]),c&&a.push(n[l+"Down"])}if(i){(Array.isArray(i)?i:[i]).forEach(function(e){a.push(n["only"+(0,m.capitalize)(e)])})}return d.default.createElement("div",{className:a.join(" ")},t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(22),o=(r(a),n(3)),s=r(o),l=n(12),u=r(l),c=n(1),d=r(c),f=n(0),h=(r(f),n(11)),p=(r(h),n(46)),m=n(25),g=n(13),y=r(g),v=function(e){var t={display:"none"};return p.keys.reduce(function(n,r){return n["only"+(0,m.capitalize)(r)]=(0,u.default)({},e.breakpoints.only(r),t),n[r+"Up"]=(0,u.default)({},e.breakpoints.up(r),t),n[r+"Down"]=(0,u.default)({},e.breakpoints.down(r),t),n},{})};i.propTypes={},t.default=(0,y.default)(v,{name:"MuiHiddenCss"})(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(34),d=n.n(c),f=n(143),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),h(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.content;return s.a.createElement("div",null,s.a.createElement(f.a,{size:20}),s.a.createElement(d.a,{variant:"headline"},t),s.a.createElement(d.a,{variant:"subheading"},n))}}]),t}(o.Component);p.propTypes={title:u.a.string.isRequired,content:u.a.oneOfType([u.a.string.isRequired,u.a.object.isRequired])},p.defaultProps={title:""},t.a=p},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),f=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),d(t,[{key:"render",value:function(){var e=this.props,t=e.content,n=e.url,r=e.space,i=c.a.div({display:"inline"});return s.a.createElement(i,null," ",s.a.createElement("a",{href:n,target:"_blank"},t),!0===r?" ":null)}}]),t}(o.Component);f.propTypes={content:u.a.string.isRequired,url:u.a.string.isRequired,space:u.a.bool.isRequired},f.defaultProps={space:!0},t.a=f},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(47),d=n.n(c),f=n(93),h=n(144),p=n(397),m=n(398),g=n(145),y=n(146),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={ready:!1},n}return a(t,e),v(t,[{key:"componentWillMount",value:function(){setTimeout(function(){this.setState({ready:!0})}.bind(this),800)}},{key:"render",value:function(){var e=this.props.data;return this.state.ready?s.a.createElement(d.a,{container:!0,spacing:24},s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:6},s.a.createElement(f.a,{title:e.count.toString(),text:"manuscripts analyzed so far."}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{data:e.years,xAxis:"Years",yAxis:"Frequency"}),title:"Years",text:"Publication years."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.sources}),title:"Sources",text:"Manuscript retrieval sources. Only peer-reviewed studies were                 included."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.tasks}),title:"Tasks",text:"Tasks preformed. Some studies investigate more than one task."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.domains}),title:"Domains",text:"Medical application areas."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.architectures}),title:"Architectures",text:"Deep learning architectures utilized. Some studies explore                 more than one architecture."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.anatomy}),title:"Anatomy",text:"Distribution across anatomy."})),s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:6},s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.types}),title:"Types",text:"Data types."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.jourConf,useCountBy:!1}),title:"Journals & Conferences",text:"Journals & Conferences."}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{data:e.impactFactors,xAxis:"Impact factors",yAxis:"Frequency"}),title:"Impact Factors",text:"Distribution of impact factors across journals."}),s.a.createElement(f.a,{plot:s.a.createElement(m.a,{data:e.countries}),title:"",text:""}),s.a.createElement(f.a,{plot:s.a.createElement(y.a,{xData:e.domains_tasks.x,yData:e.domains_tasks.y,xAxis:"Domains",yAxis:"Tasks",autobinx:!1}),title:"Domains vs Tasks",text:"Domains vs Tasks. Some studies explore more than one task."}),s.a.createElement(f.a,{plot:s.a.createElement(y.a,{xData:e.domains_architectures.x,yData:e.domains_architectures.y,xAxis:"Domains",yAxis:"Architectures",autobinx:!1}),title:"Domains vs Architectures",text:"Domains vs Architectures. Some studies explore more than one                 Architecture."}),s.a.createElement(f.a,{plot:s.a.createElement(y.a,{xData:e.methods_dataTypes.x,yData:e.methods_dataTypes.y,xAxis:"Architectures",yAxis:"Data types",autobinx:!1}),title:"Architectures vs data types",text:"Architectures vs data types."}))):s.a.createElement(g.a,null)}}]),t}(o.Component);_.propTypes={data:u.a.object.isRequired},t.a=_},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(386);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}});var a=n(387);Object.defineProperty(t,"CardContent",{enumerable:!0,get:function(){return r(a).default}});var o=n(388);Object.defineProperty(t,"CardActions",{enumerable:!0,get:function(){return r(o).default}});var s=n(390);Object.defineProperty(t,"CardMedia",{enumerable:!0,get:function(){return r(s).default}});var l=n(391);Object.defineProperty(t,"CardHeader",{enumerable:!0,get:function(){return r(l).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.raised,n=(0,l.default)(e,["raised"]);return c.default.createElement(h.default,(0,o.default)({elevation:t?8:2},n))}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),o=r(a),s=n(3),l=r(s),u=n(1),c=r(u),d=n(0),f=(r(d),n(132)),h=r(f);i.propTypes={},i.defaultProps={raised:!1},t.default=i},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.classes,n=e.className,r=e.component,i=(0,l.default)(e,["classes","className","component"]);return c.default.createElement(r,(0,o.default)({className:(0,h.default)(t.root,n)},i))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(3),l=r(s),u=n(1),c=r(u),d=n(0),f=(r(d),n(6)),h=r(f),p=n(13),m=r(p),g=t.styles=function(e){return{root:e.mixins.gutters({paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit,"&:last-child":{paddingBottom:3*e.spacing.unit}})}};i.propTypes={},i.defaultProps={component:"div"},t.default=(0,m.default)(g,{name:"MuiCardContent"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.disableActionSpacing,n=e.children,r=e.classes,i=e.className,a=(0,l.default)(e,["disableActionSpacing","children","classes","className"]);return f.default.createElement("div",(0,o.default)({className:(0,m.default)(r.root,i)},a),t?n:(0,v.cloneChildrenWithClassName)(n,r.action))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(3),l=r(s),u=n(12),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(13),y=r(g),v=n(389),_=t.styles=function(e){return{root:(0,c.default)({display:"flex",alignItems:"center",boxSizing:"border-box",padding:e.spacing.unit+"px "+e.spacing.unit/2+"px"},e.breakpoints.up("sm"),{padding:e.spacing.unit+"px "+1.5*e.spacing.unit+"px"}),action:{margin:"0 "+e.spacing.unit/2+"px"}}};i.propTypes={},i.defaultProps={disableActionSpacing:!1},t.default=(0,y.default)(_,{name:"MuiCardActions"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){return u.default.cloneElement(e,{className:(0,d.default)(e.props.className,t)})}function a(e,t){return u.default.Children.map(e,function(e){return u.default.isValidElement(e)&&i(e,t)})}function o(e,t){return u.default.isValidElement(e)&&-1!==t.indexOf(e.type.muiName)}function s(e,t){return-1!==t.indexOf(e.muiName)}Object.defineProperty(t,"__esModule",{value:!0}),t.cloneElementWithClassName=i,t.cloneChildrenWithClassName=a,t.isMuiElement=o,t.isMuiComponent=s;var l=n(1),u=r(l),c=n(6),d=r(c)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.classes,n=e.className,r=e.component,i=e.image,a=e.src,s=e.style,u=(0,c.default)(e,["classes","className","component","image","src","style"]),d=-1!==b.indexOf(r),h=!d&&i?(0,l.default)({backgroundImage:"url("+i+")"},s):s;return f.default.createElement(r,(0,l.default)({className:(0,m.default)(t.root,(0,o.default)({},t.media,d),n),style:h,src:d?i||a:void 0},u))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(12),o=r(a),s=n(2),l=r(s),u=n(3),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(11),y=(r(g),n(13)),v=r(y),_=t.styles={root:{display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},media:{width:"100%"}},b=["video","audio","picture","iframe","img"];i.propTypes={},i.defaultProps={component:"div"},t.default=(0,v.default)(_,{name:"MuiCardMedia"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t=e.action,n=e.avatar,r=e.classes,i=e.className,a=e.component,s=e.subheader,u=e.title,d=(0,l.default)(e,["action","avatar","classes","className","component","subheader","title"]);return c.default.createElement(a,(0,o.default)({className:(0,h.default)(r.root,i)},d),n&&c.default.createElement("div",{className:r.avatar},n),c.default.createElement("div",{className:r.content},c.default.createElement(y.default,{variant:n?"body2":"headline",component:"span",className:r.title},u),s&&c.default.createElement(y.default,{variant:n?"body2":"body1",component:"span",color:"textSecondary",className:r.subheader},s)),t&&c.default.createElement("div",{className:r.action},t))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(3),l=r(s),u=n(1),c=r(u),d=n(0),f=(r(d),n(6)),h=r(f),p=n(13),m=r(p),g=n(34),y=r(g),v=t.styles=function(e){return{root:e.mixins.gutters({display:"flex",alignItems:"center",paddingTop:2*e.spacing.unit,paddingBottom:2*e.spacing.unit}),avatar:{flex:"0 0 auto",marginRight:2*e.spacing.unit},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-1*e.spacing.unit,marginRight:-2*e.spacing.unit},content:{flex:"1 1 auto"},title:{},subheader:{}}};i.propTypes={},i.defaultProps={component:"div"},t.default=(0,m.default)(v,{name:"MuiCardHeader"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(393);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return r(i).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,n=e.children,r=e.classes,i=e.className,a=e.color,s=e.disabled,u=e.disableFocusRipple,d=e.fullWidth,h=e.mini,p=e.size,g=e.variant,y=(0,l.default)(e,["children","classes","className","color","disabled","disableFocusRipple","fullWidth","mini","size","variant"]),v="fab"===g,_="raised"===g,w=!_&&!v,k=(0,m.default)(r.root,(t={},(0,o.default)(t,r.raised,_||v),(0,o.default)(t,r.fab,v),(0,o.default)(t,r.mini,v&&h),(0,o.default)(t,r.colorInherit,"inherit"===a),(0,o.default)(t,r.flatPrimary,w&&"primary"===a),(0,o.default)(t,r.flatSecondary,w&&"secondary"===a),(0,o.default)(t,r.raisedPrimary,!w&&"primary"===a),(0,o.default)(t,r.raisedSecondary,!w&&"secondary"===a),(0,o.default)(t,r["size"+(0,x.capitalize)(p)],"medium"!==p),(0,o.default)(t,r.disabled,s),(0,o.default)(t,r.fullWidth,d),t),i);return f.default.createElement(b.default,(0,c.default)({className:k,disabled:s,focusRipple:!u,classes:{keyboardFocused:r.keyboardFocused}},y),f.default.createElement("span",{className:r.label},n))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(12),o=r(a),s=n(3),l=r(s),u=n(2),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(13),y=r(g),v=n(91),_=n(64),b=r(_),x=n(25),w=t.styles=function(e){return{root:(0,c.default)({},e.typography.button,{lineHeight:"1.4em",boxSizing:"border-box",minWidth:11*e.spacing.unit,minHeight:36,padding:e.spacing.unit+"px "+2*e.spacing.unit+"px",borderRadius:2,color:e.palette.text.primary,transition:e.transitions.create(["background-color","box-shadow"],{duration:e.transitions.duration.short}),"&:hover":{textDecoration:"none",backgroundColor:(0,v.fade)(e.palette.text.primary,.12),"@media (hover: none)":{backgroundColor:"transparent"},"&$disabled":{backgroundColor:"transparent"}}}),label:{width:"100%",display:"inherit",alignItems:"inherit",justifyContent:"inherit"},flatPrimary:{color:e.palette.primary.main,"&:hover":{backgroundColor:(0,v.fade)(e.palette.primary.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},flatSecondary:{color:e.palette.secondary.main,"&:hover":{backgroundColor:(0,v.fade)(e.palette.secondary.main,.12),"@media (hover: none)":{backgroundColor:"transparent"}}},colorInherit:{color:"inherit"},raised:{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2],"&$keyboardFocused":{boxShadow:e.shadows[6]},"&:active":{boxShadow:e.shadows[8]},"&$disabled":{boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground},"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},"&$disabled":{backgroundColor:e.palette.action.disabledBackground}}},keyboardFocused:{},raisedPrimary:{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.main,"&:hover":{backgroundColor:e.palette.primary.dark,"@media (hover: none)":{backgroundColor:e.palette.primary.main}}},raisedSecondary:{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.main,"&:hover":{backgroundColor:e.palette.secondary.dark,"@media (hover: none)":{backgroundColor:e.palette.secondary.main}}},disabled:{color:e.palette.action.disabled},fab:{borderRadius:"50%",padding:0,minWidth:0,width:56,fontSize:24,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]}},mini:{width:40,height:40},sizeSmall:{padding:e.spacing.unit-1+"px "+e.spacing.unit+"px",minWidth:8*e.spacing.unit,minHeight:32,fontSize:e.typography.pxToRem(13)},sizeLarge:{padding:e.spacing.unit+"px "+3*e.spacing.unit+"px",minWidth:14*e.spacing.unit,minHeight:40,fontSize:e.typography.pxToRem(15)},fullWidth:{width:"100%"}}};i.propTypes={},i.defaultProps={color:"default",disabled:!1,disableFocusRipple:!1,fullWidth:!1,mini:!1,size:"medium",type:"button",variant:"flat"},t.default=(0,y.default)(w,{name:"MuiButton"})(i)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){var t=function(t){function n(e){i(this,n);var t=a(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.p=Promise.resolve(),t.resizeHandler=null,t.handlers={},t.syncWindowResize=t.syncWindowResize.bind(t),t.syncEventHandlers=t.syncEventHandlers.bind(t),t.attachUpdateEvents=t.attachUpdateEvents.bind(t),t.getRef=t.getRef.bind(t),t.handleUpdate=t.handleUpdate.bind(t),t.figureCallback=t.figureCallback.bind(t),t}return o(n,t),l(n,[{key:"componentDidMount",value:function(){var t=this;this.p=this.p.then(function(){return e.newPlot(t.el,{data:t.props.data,layout:t.props.layout,config:t.props.config,frames:t.props.frames})}).then(function(){return t.syncWindowResize(null,!0)}).then(this.syncEventHandlers).then(this.attachUpdateEvents).then(function(){return t.figureCallback(t.props.onInitialized)}).catch(function(e){return console.error("Error while plotting:",e),t.props.onError&&t.props.onError(e)})}},{key:"componentWillUpdate",value:function(t){var n=this;if(void 0===t.revision||t.revision!==this.props.revision){var r=this.props.frames&&this.props.frames.length?this.props.frames.length:0,i=t.frames&&t.frames.length?t.frames.length:0;t.layout===this.props.layout&&t.data===this.props.data&&t.config===this.props.config&&i===r||(this.p=this.p.then(function(){return e.react(n.el,{data:t.data,layout:t.layout,config:t.config,frames:t.frames})}).then(function(){return n.syncEventHandlers(t)}).then(function(){return n.syncWindowResize(t)}).then(function(){return n.figureCallback(t.onUpdate)}).catch(function(e){console.error("Error while plotting:",e),n.props.onError&&n.props.onError(e)}))}}},{key:"componentWillUnmount",value:function(){this.figureCallback(this.props.onPurge),this.resizeHandler&&m&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),e.purge(this.el)}},{key:"attachUpdateEvents",value:function(){if(this.el&&this.el.removeListener)for(var e=0;e<p.length;e++)this.el.on(p[e],this.handleUpdate)}},{key:"removeUpdateEvents",value:function(){if(this.el&&this.el.removeListener)for(var e=0;e<p.length;e++)this.el.removeListener(p[e],this.handleUpdate)}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(e){if("function"===typeof e){var t=this.el;e({data:t.data,layout:t.layout,frames:this.el._transitionData?this.el._transitionData._frames:null},this.el)}}},{key:"syncWindowResize",value:function(t,n){var r=this,i=t||this.props;m&&(i.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return e.Plots.resize(r.el)},window.addEventListener("resize",this.resizeHandler),n&&this.resizeHandler()):!i.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(e){this.el=e,this.props.debug&&m&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(e){for(var t=e||this.props,n=0;n<h.length;n++){var r=h[n],i=t["on"+r],a=!!this.handlers[r];i&&!a?(this.handlers[r]=i,this.el.on("plotly_"+r.toLowerCase(),this.handlers[r])):!i&&a&&(this.el.removeListener("plotly_"+r.toLowerCase(),this.handlers[r]),delete this.handlers[r])}}},{key:"render",value:function(){return c.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),n}(u.Component);t.propTypes={data:f.default.arrayOf(f.default.object),config:f.default.object,layout:f.default.object,frames:f.default.arrayOf(f.default.object),revision:f.default.number,onInitialized:f.default.func,onPurge:f.default.func,onError:f.default.func,onUpdate:f.default.func,debug:f.default.bool,style:f.default.object,className:f.default.string,useResizeHandler:f.default.bool,divId:f.default.string};for(var n=0;n<h.length;n++)t.propTypes["on"+h[n]]=f.default.func;return t.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},t}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=s;var u=n(1),c=r(u),d=n(0),f=r(d),h=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","Relayout","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","Transitioning","TransitionInterrupted","Unhover"],p=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_doubleclick","plotly_animated"],m="undefined"!==typeof window;e.exports=t.default},function(e,t,n){(function(t){var r,r,r;!function(t){e.exports=t()}(function(){function e(e){for(var t,n=e.length,r=0;r<n;r++)if(((t=e.charCodeAt(r))<9||t>13)&&32!==t&&133!==t&&160!==t&&5760!==t&&6158!==t&&(t<8192||t>8205)&&8232!==t&&8233!==t&&8239!==t&&8287!==t&&8288!==t&&12288!==t&&65279!==t)return!1;return!0}function i(e,t){var n,r;for(n=0;n<e.length;n++){if(null!==(r=e[n])&&"object"===typeof r)return!1;void 0!==r&&(t[n]=r)}return!0}function a(e,t,n,r){var o,s,l,u,c,d,f=e[0],h=e.length;if(2===h&&qC(f)&&qC(e[1])&&0===f.length){if(i(e[1],f))return f;f.splice(0,f.length)}for(var p=1;p<h;p++){o=e[p];for(s in o)l=f[s],u=o[s],r&&qC(u)?f[s]=u:t&&u&&(HC(u)||(c=qC(u)))?(c?(c=!1,d=l&&qC(l)?l:[]):d=l&&HC(l)?l:{},f[s]=a([d,u],t,n,r)):("undefined"!==typeof u||n)&&(f[s]=u)}return f}function o(e,t){if(e.apply)e.apply(e,t);else for(var n=0;n<t.length;n++)e(t[n])}function s(e){var t=e.name,n=e.categories,r=e.meta;if(rS.modules[t])return void YC.log("Type "+t+" already registered");rS.subplotsRegistry[e.basePlotModule.name]||l(e.basePlotModule);for(var i={},a=0;a<n.length;a++)i[n[a]]=!0,rS.allCategories[n[a]]=!0;rS.modules[t]={_module:e,categories:i},r&&Object.keys(r).length&&(rS.modules[t].meta=r),rS.allTypes.push(t);for(var o in rS.componentsRegistry)h(o,t);e.layoutAttributes&&iS(rS.traceLayoutAttributes,e.layoutAttributes)}function l(e){var t=e.name;if(rS.subplotsRegistry[t])return void YC.log("Plot type "+t+" already registered.");f(e),rS.subplotsRegistry[t]=e;for(var n in rS.componentsRegistry)m(n,e.name)}function u(e){if("string"!==typeof e.name)throw new Error("Component module *name* must be a string.");var t=e.name;rS.componentsRegistry[t]=e,e.layoutAttributes&&(e.layoutAttributes._isLinkedToArray&&JC(rS.layoutArrayContainers,t),f(e));for(var n in rS.modules)h(t,n);for(var r in rS.subplotsRegistry)m(t,r);for(var i in rS.transformsRegistry)p(t,i);e.schema&&e.schema.layout&&aS(nS,e.schema.layout)}function c(e){if("string"!==typeof e.name)throw new Error("Transform module *name* must be a string.");var t="Transform module "+e.name,n="function"===typeof e.transform,r="function"===typeof e.calcTransform;if(!n&&!r)throw new Error(t+" is missing a *transform* or *calcTransform* method.");n&&r&&YC.log([t+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),HC(e.attributes)||YC.log(t+" registered without an *attributes* object."),"function"!==typeof e.supplyDefaults&&YC.log(t+" registered without a *supplyDefaults* method."),rS.transformsRegistry[e.name]=e;for(var i in rS.componentsRegistry)p(i,e.name)}function d(e){var t=e.name,n=t.split("-")[0],r=e.dictionary,i=e.format,a=r&&Object.keys(r).length,o=i&&Object.keys(i).length,s=rS.localeRegistry,l=s[t];if(l||(s[t]=l={}),n!==t){var u=s[n];u||(s[n]=u={}),a&&u.dictionary===l.dictionary&&(u.dictionary=r),o&&u.format===l.format&&(u.format=i)}a&&(l.dictionary=r),o&&(l.format=i)}function f(e){if(e.layoutAttributes){var t=e.layoutAttributes._arrayAttrRegexps;if(t)for(var n=0;n<t.length;n++)JC(rS.layoutArrayRegexes,t[n])}}function h(e,t){var n=rS.componentsRegistry[e].schema;if(n&&n.traces){var r=n.traces[t];r&&aS(rS.modules[t]._module.attributes,r)}}function p(e,t){var n=rS.componentsRegistry[e].schema;if(n&&n.transforms){var r=n.transforms[t];r&&aS(rS.transformsRegistry[t].attributes,r)}}function m(e,t){var n=rS.componentsRegistry[e].schema;if(n&&n.subplots){var r=rS.subplotsRegistry[t],i=r.layoutAttributes,a="subplot"===r.attr?r.name:r.attr;Array.isArray(a)&&(a=a[0]);var o=n.subplots[a];i&&o&&aS(i,o)}}function g(e){return"object"===typeof e&&(e=e.type),e}function y(e,t){return function(){var n,r,i,a,o,s=e;for(a=0;a<t.length-1;a++){if(-1===(n=t[a])){for(r=!0,i=[],o=0;o<s.length;o++)i[o]=y(s[o],t.slice(a+1))(),i[o]!==i[0]&&(r=!1);return r?i[0]:i}if("number"===typeof n&&!sS(s))return;if("object"!==typeof(s=s[n])||null===s)return}if("object"===typeof s&&null!==s&&null!==(i=s[t[a]]))return i}}function v(e,t){if(!T(e)||HC(e)&&"]"===t.charAt(t.length-1)||t.match(cS)&&void 0!==e)return!1;if(!sS(e))return!0;if(t.match(uS))return!0;var n=oS(t);return n&&""===n.index}function _(e,t,n){return function(r){var i,a,o=e,s="",l=[[e,s]],u=v(r,n);for(a=0;a<t.length-1;a++){if("number"===typeof(i=t[a])&&!sS(o))throw"array index but container is not an array";if(-1===i){if(u=!x(o,t.slice(a+1),r,n))break;return}if(!w(o,i,t[a+1],u))break;if("object"!==typeof(o=o[i])||null===o)throw"container is not an object";s=b(s,i),l.push([o,s])}u?(a===t.length-1&&delete o[t[a]],k(l)):o[t[a]]=r}}function b(e,t){var n=t;return SC(t)?n="["+t+"]":e&&(n="."+t),e+n}function x(e,t,n,r){var i,a=sS(n),o=!0,s=n,l=r.replace("-1",0),u=!a&&v(n,l),c=t[0];for(i=0;i<e.length;i++)l=r.replace("-1",i),a&&(s=n[i%n.length],u=v(s,l)),u&&(o=!1),w(e,i,c,u)&&_(e[i],t,r.replace("-1",i))(s);return o}function w(e,t,n,r){if(void 0===e[t]){if(r)return!1;e[t]="number"===typeof n?[]:{}}return!0}function k(e){var t,n,r,i,a,o;for(t=e.length-1;t>=0;t--){if(r=e[t][0],i=e[t][1],o=!1,sS(r))for(n=r.length-1;n>=0;n--)v(r[n],b(i,n))?o?r[n]=void 0:r.pop():o=!0;else if("object"===typeof r&&null!==r)for(a=Object.keys(r),o=!1,n=a.length-1;n>=0;n--)v(r[a[n]],b(i,a[n]))?delete r[a[n]]:o=!0;if(o)return}}function T(e){return void 0===e||null===e||"object"===typeof e&&(sS(e)?!e.length:!Object.keys(e).length)}function M(e,t,n){return{set:function(){throw"bad container"},get:function(){},astr:t,parts:n,obj:e}}function A(e){return e&&rS.componentsRegistry.calendars&&"string"===typeof e&&"gregorian"!==e}function C(e,t){return String(e+Math.pow(10,t)).substr(1)}function S(e,t,n,r,i){if((t||n||r||i)&&(e+=" "+C(t,2)+":"+C(n,2),(r||i)&&(e+=":"+C(r,2),i))){for(var a=4;i%10===0;)a-=1,i/=10;e+="."+C(i,a)}return e}function E(e,t,n,r){e=e.replace(zS,function(e){var n=Math.min(+e.charAt(1)||6,6);return(t/1e3%1+2).toFixed(n).substr(2).replace(/0+$/,"")||"0"});var i=new Date(Math.floor(t+.05));if(A(r))try{e=rS.getComponentMethod("calendars","worldCalFmt")(e,t,r)}catch(e){return"Invalid"}return n(e)(i)}function P(e,t){var n=yS(e+.05,bS),r=C(Math.floor(n/xS),2)+":"+C(yS(Math.floor(n/wS),60),2);if("M"!==t){SC(t)||(t=0);var i=Math.min(yS(e/kS,60),RS[t]),a=(100+i).toFixed(t).substr(1);t>0&&(a=a.replace(/0+$/,"").replace(/[\.]$/,"")),r+=":"+a}return r}function I(e){return!0===e.visible}function L(e){return!0===e[0].trace.visible}function O(e){return Array.isArray(e)&&Array.isArray(e[0])&&e[0][0]&&e[0][0].trace}function z(e,t,n,r,i,a,o,s){var l=n-e,u=i-e,c=o-i,d=r-t,f=a-t,h=s-a,p=l*h-c*d;if(0===p)return null;var m=(u*h-c*f)/p,g=(u*d-l*f)/p;return g<0||g>1||m<0||m>1?null:{x:e+l*m,y:t+d*m}}function R(e,t,n,r,i){var a=r*e+i*t;if(a<0)return r*r+i*i;if(a>n){var o=r-e,s=i-t;return o*o+s*s}var l=r*t-i*e;return l*l/n}function D(e,t){return e<t}function N(e,t){return e<=t}function F(e,t){return e>t}function j(e,t){return e>=t}function B(e){e&&null!==e.timer&&(clearTimeout(e.timer),e.timer=null)}function U(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!1;return t}function V(e,t,n){var r=vE({},e);for(var i in r){var a=r[i];_E(a)&&(r[i]=H(a,t,n,i))}return"from-root"===n&&(r.editType=t),r}function H(e,t,n,r){if(e.valType){var i=vE({},e);if(i.editType=t,Array.isArray(e.items)){i.items=new Array(e.items.length);for(var a=0;a<e.items.length;a++)i.items[a]=H(e.items[a],t,"from-root")}return i}return V(e,t,"_"===r.charAt(0)?"nested":"from-root")}function W(e){if(SC(e)||"string"!==typeof e)return e;var t=e.trim();if("rgb"!==t.substr(0,3))return e;var n=t.match(/^rgba?\s*\(([^()]*)\)$/);if(!n)return e;var r=n[1].trim().split(/\s*[\s,]\s*/),i="a"===t.charAt(3)&&4===r.length;if(!i&&3!==r.length)return e;for(var a=0;a<r.length;a++){if(!r[a].length)return e;if(r[a]=Number(r[a]),!(r[a]>=0))return e;if(3===a)r[a]>1&&(r[a]=1);else if(r[a]>=1)return e}var o=Math.round(255*r[0])+", "+Math.round(255*r[1])+", "+Math.round(255*r[2]);return i?"rgba("+o+", "+r[3]+")":"rgb("+o+")"}function q(e){var t=["showexponent","showtickprefix","showticksuffix"],n=t.filter(function(t){return void 0!==e[t]}),r=function(t){return e[t]===e[n[0]]};if(n.every(r)||1===n.length)return e[n[0]]}function G(e,t){function n(e,t){return uE.coerce(a,o,LE.tickformatstops,e,t)}var r=e.tickformatstops,i=t.tickformatstops=[];if(Array.isArray(r))for(var a,o,s=0;s<r.length;s++)a=r[s],o={},n("dtickrange"),n("value"),i.push(o)}function Y(e){var t={r:e[0],g:e[1],b:e[2],a:e[3]};return zC(t).toRgbString()}function X(e,t){return e.node().getBoundingClientRect()[t]}function Z(e){return e.replace(cP,"\\lt ").replace(dP,"\\gt ")}function J(e,t,n){var r="math-output-"+uE.randstr([],64),i=CC.select("body").append("div").attr({id:r}).style({visibility:"hidden",position:"absolute"}).style({"font-size":t.fontSize+"px"}).text(Z(e));MathJax.Hub.Queue(["Typeset",MathJax.Hub,i.node()],function(){var t=CC.select("body").select("#MathJax_SVG_glyphs");if(i.select(".MathJax_SVG").empty()||!i.select("svg").node())uE.log("There was an error in the tex syntax.",e),n();else{var r=i.select("svg").node().getBoundingClientRect();n(i.select(".MathJax_SVG"),t,r)}i.remove()})}function K(e,t){if(!e)return null;var n=e.match(t);return n&&(n[3]||n[4])}function Q(e,t){if(!e)return"";for(var n=0;n<t.length;n++){var r=t[n];e=e.replace(r.regExp,r.sub)}return e}function $(e){return Q(e,vP)}function ee(e,t){function n(){l++;var t=document.createElementNS(aP.svg,"tspan");CC.select(t).attr({class:"line",dy:l*lP+"em"}),e.appendChild(t),a=t;var n=s;if(s=[{node:t}],n.length>1)for(var i=1;i<n.length;i++)r(n[i])}function r(e){var t,n=e.type,r={};if("a"===n){t="a";var o=e.target,l=e.href,u=e.popup;l&&(r={"xlink:xlink:show":"_blank"===o||"_"!==o.charAt(0)?"new":"replace",target:o,"xlink:xlink:href":l},u&&(r.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+u+'");return false;'))}else t="tspan";e.style&&(r.style=e.style);var c=document.createElementNS(aP.svg,t);if("sup"===n||"sub"===n){i(a,mP),a.appendChild(c);var d=document.createElementNS(aP.svg,"tspan");i(d,mP),CC.select(d).attr("dy",pP[n]),r.dy=hP[n],a.appendChild(c),a.appendChild(d)}else a.appendChild(c);CC.select(c).attr(r),a=e.node=c,s.push(e)}function i(e,t){e.appendChild(document.createTextNode(t))}t=$(t).replace(_P," ");var a,o=!1,s=[],l=-1;wP.test(t)?n():(a=e,s=[{node:e}]);for(var u=t.split(bP),c=0;c<u.length;c++){var d=u[c],f=d.match(xP),h=f&&f[2].toLowerCase(),p=fP[h];if("br"===h)n();else if(void 0===p)i(a,d);else if(f[1])!function(e){if(1===s.length)return void uE.log("Ignoring unexpected end tag </"+e+">.",t);var n=s.pop();e!==n.type&&uE.log("Start tag <"+n.type+"> doesnt match end tag <"+e+">. Pretending it did match.",t),a=s[s.length-1].node}(h);else{var m=f[4],g={type:h},y=K(m,kP);if(y?(y=y.replace(CP,"$1 fill:"),p&&(y+=";"+p)):p&&(y=p),y&&(g.style=y),"a"===h){o=!0;var v=K(m,TP);if(v){var _=document.createElement("a");_.href=v,-1!==gP.indexOf(_.protocol)&&(g.href=encodeURI(v),g.target=K(m,MP)||"_blank",g.popup=K(m,AP))}}r(g)}}return o}function te(e,t,n){var r,i,a,o=n.horizontalAlign,s=n.verticalAlign||"top",l=e.node().getBoundingClientRect(),u=t.node().getBoundingClientRect();return i="bottom"===s?function(){return l.bottom-r.height}:"middle"===s?function(){return l.top+(l.height-r.height)/2}:function(){return l.top},a="right"===o?function(){return l.right-r.width}:"center"===o?function(){return l.left+(l.width-r.width)/2}:function(){return l.left},function(){return r=this.node().getBoundingClientRect(),this.style({top:i()-u.top+"px",left:a()-u.left+"px","z-index":1e3}),this}}function ne(e,t){var n=e%100;return OP.symbolFuncs[n](t)+(e>=200?RP:"")}function re(e,t,n,r,i,a,o,s){if(rS.traceIs(n,"symbols")){var l=SP(n);t.attr("d",function(e){var t;t="various"===e.ms||"various"===a.size?3:EP.isBubble(n)?l(e.ms):(a.size||6)/2,e.mrc=t;var r=OP.symbolNumber(e.mx||a.symbol)||0;return e.om=r%200>=100,ne(r,t)})}t.style("opacity",function(e){return(e.mo+1||a.opacity+1)-1});var u,c,d,f=!1;if(e.so?(d=o.outlierwidth,c=o.outliercolor,u=a.outliercolor):(d=(e.mlw+1||o.width+1||(e.trace?e.trace.marker.line.width:0)+1)-1,c="mlc"in e?e.mlcc=i(e.mlc):uE.isArrayOrTypedArray(o.color)?jE.defaultLine:o.color,uE.isArrayOrTypedArray(a.color)&&(u=jE.defaultLine,f=!0),u="mc"in e?e.mcc=r(e.mc):a.color||"rgba(0,0,0,0)"),e.om)t.call(jE.stroke,u).style({"stroke-width":(d||1)+"px",fill:"none"});else{t.style("stroke-width",d+"px");var h=a.gradient,p=e.mgt;if(p?f=!0:p=h&&h.type,p&&"none"!==p){var m=e.mgc;m?f=!0:m=h.color;var g="g"+s._fullLayout._uid+"-"+n.uid;f&&(g+="-"+e.i),t.call(OP.gradient,s,g,p,u,m)}else t.call(jE.fill,u);d&&t.call(jE.stroke,c)}}function ie(e,t,n,r){var i=CC.select(e.node().parentNode),a=-1!==t.indexOf("top")?"top":-1!==t.indexOf("bottom")?"bottom":"middle",o=-1!==t.indexOf("left")?"end":-1!==t.indexOf("right")?"start":"middle",s=r?r/.8+1:0,l=(sP.lineCount(e)-1)*IP+1,u=FP[o]*s,c=.75*n+FP[a]*s+(FP[a]-1)*l*n/2;e.attr("text-anchor",o),i.attr("transform","translate("+u+","+c+")")}function ae(e,t){var n=e.ts||t.textfont.size;return SC(n)&&n>0?n:0}function oe(e,t,n,r){var i=e[0]-t[0],a=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],l=Math.pow(i*i+a*a,jP/2),u=Math.pow(o*o+s*s,jP/2),c=(u*u*i-l*l*o)*r,d=(u*u*a-l*l*s)*r,f=3*u*(l+u),h=3*l*(l+u);return[[CC.round(t[0]+(f&&c/f),2),CC.round(t[1]+(f&&d/f),2)],[CC.round(t[0]-(h&&c/h),2),CC.round(t[1]-(h&&d/h),2)]]}function se(e){var t=e.getAttribute("data-unformatted");if(null!==t)return t+e.getAttribute("data-math")+e.getAttribute("text-anchor")+e.getAttribute("style")}function le(e,t){return JP({},t,{showline:{valType:"boolean"},showticklabels:{valType:"boolean"},tickorientation:{valType:"enumerated",values:["horizontal","vertical"]},ticklen:{valType:"number",min:0},tickcolor:{valType:"color"},ticksuffix:{valType:"string"},endpadding:{valType:"number"},visible:{valType:"boolean"}})}function ue(e,t){var n,r,i,a,o=e._basePlotModules;if(o){var s;for(n=0;n<o.length;n++){if(i=o[n],i.attrRegex&&i.attrRegex.test(t)){if(i.layoutAttrOverrides)return i.layoutAttrOverrides;!s&&i.layoutAttributes&&(s=i.layoutAttributes)}var l=i.baseLayoutAttrOverrides;if(l&&t in l)return l[t]}if(s)return s}var u=e._modules;if(u)for(n=0;n<u.length;n++)if((a=u[n].layoutAttributes)&&t in a)return a[t];for(r in rS.componentsRegistry)if(i=rS.componentsRegistry[r],!i.schema&&t===i.name)return i.layoutAttributes;return t in nS?nS[t]:"radialaxis"===t||"angularaxis"===t?$P[t]:$P.layout[t]||!1}function ce(e,t,n){if(!e)return!1;if(e._isLinkedToArray)if(de(t[n]))n++;else if(n<t.length)return!1;for(;n<t.length;n++){var r=e[t[n]];if(!uE.isPlainObject(r))break;if(e=r,n===t.length-1)break;if(e._isLinkedToArray){if(n++,!de(t[n]))return!1}else if("info_array"===e.valType){n++;var i=t[n];if(!de(i))return!1;var a=e.items;if(Array.isArray(a)){if(i>=a.length)return!1;if(2===e.dimensions){if(n++,t.length===n)return e;var o=t[n];if(!de(o))return!1;e=a[i][o]}else e=a[i]}else e=a}}return e}function de(e){return e===Math.round(e)&&e>=0}function fe(e){var t,n;"area"===e?(t={attributes:ZP},n={}):(t=rS.modules[e]._module,n=t.basePlotModule);var r={};r.type=null,nI(r,$C),nI(r,t.attributes),n.attributes&&nI(r,n.attributes),r.type=e;var i={meta:t.meta||{},attributes:ge(r)};if(t.layoutAttributes){var a={};nI(a,t.layoutAttributes),i.layoutAttributes=ge(a)}return i}function he(){var e,t,n={};nI(n,nS);for(e in rS.subplotsRegistry)if(t=rS.subplotsRegistry[e],t.layoutAttributes)if("cartesian"===t.name)be(n,t,"xaxis"),be(n,t,"yaxis");else{var r="subplot"===t.attr?t.name:t.attr;be(n,t,r)}n=_e(n);for(e in rS.componentsRegistry){t=rS.componentsRegistry[e];var i=t.schema;if(i&&(i.subplots||i.layout)){var a=i.subplots;if(a&&a.xaxis&&!a.yaxis)for(var o in a.xaxis)delete n.yaxis[o]}else t.layoutAttributes&&xe(n,t.layoutAttributes,t.name)}return{layoutAttributes:ge(n)}}function pe(e){var t=rS.transformsRegistry[e],n=nI({},t.attributes);return Object.keys(rS.componentsRegistry).forEach(function(t){var r=rS.componentsRegistry[t];r.schema&&r.schema.transforms&&r.schema.transforms[e]&&Object.keys(r.schema.transforms[e]).forEach(function(t){xe(n,r.schema.transforms[e][t],t)})}),{attributes:ge(n)}}function me(){var e={frames:uE.extendDeepAll({},AE)};return ge(e),e.frames}function ge(e){return ye(e),ve(e),e}function ye(e){function t(e){return{valType:"string",editType:"none"}}function n(e,n,r){eI.isValObject(e)?"data_array"===e.valType?(e.role="data",r[n+"src"]=t(n)):!0===e.arrayOk&&(r[n+"src"]=t(n)):uE.isPlainObject(e)&&(e.role="object")}eI.crawl(e,n)}function ve(e){function t(e,t,n){if(e){var r=e[iI];r&&(delete e[iI],n[t]={items:{}},n[t].items[r]=e,n[t].role="object")}}eI.crawl(e,t)}function _e(e){return tI(e,{radialaxis:$P.radialaxis,angularaxis:$P.angularaxis}),tI(e,$P.layout),e}function be(e,t,n){var r=uE.nestedProperty(e,n),i=nI({},t.layoutAttributes);i[rI]=!0,r.set(i)}function xe(e,t,n){var r=uE.nestedProperty(e,n);r.set(nI(r.get()||{},t))}function we(e,t,n){var r,i,a,o=!1;if("data"===t.type)r=e._fullData[null!==t.traces?t.traces[0]:0];else{if("layout"!==t.type)return!1;r=e._fullLayout}return i=uE.nestedProperty(r,t.prop).get(),a=n[t.type]=n[t.type]||{},a.hasOwnProperty(t.prop)&&a[t.prop]!==i&&(o=!0),a[t.prop]=i,{changed:o,value:i}}function ke(e,t){return Array.isArray(t[0])&&1===t[0].length&&-1!==["string","number"].indexOf(typeof t[0][0])?[{type:"layout",prop:"_currentFrame",value:t[0][0].toString()}]:[]}function Te(e,t){var n=[],r=t[0],i={};if("string"===typeof r)i[r]=t[1];else{if(!uE.isPlainObject(r))return n;i=r}return Ae(i,function(e,t,r){n.push({type:"layout",prop:e,value:r})},"",0),n}function Me(e,t){var n,r,i,a,o=[];if(r=t[0],i=t[1],n=t[2],a={},"string"===typeof r)a[r]=i;else{if(!uE.isPlainObject(r))return o;a=r,void 0===n&&(n=i)}return void 0===n&&(n=null),Ae(a,function(t,r,i){var a;if(Array.isArray(i)){var s=Math.min(i.length,e.data.length);n&&(s=Math.min(s,n.length)),a=[];for(var l=0;l<s;l++)a[l]=n?n[l]:l}else a=n?n.slice(0):null;if(null===a)Array.isArray(i)&&(i=i[0]);else if(Array.isArray(a)){if(!Array.isArray(i)){var u=i;i=[];for(var c=0;c<a.length;c++)i[c]=u}i.length=Math.min(a.length,i.length)}o.push({type:"data",prop:t,traces:a,value:i})},"",0),o}function Ae(e,t,n,r){Object.keys(e).forEach(function(i){var a=e[i];if("_"!==i[0]){var o=n+(r>0?".":"")+i;uE.isPlainObject(a)?Ae(a,t,o,r+1):t(o,i,a)}})}function Ce(e,t){t.text("");var n=t.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(e._context.linkText+" "+String.fromCharCode(187));if(e._context.sendData)n.on("click",function(){dI.sendDataToCloud(e)});else{var r=window.location.pathname.split("/"),i=window.location.search;n.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+r[2].split(".")[0]+"/"+r[1]+i})}}function Se(){var e,t,n={};if(!gI){gI=[];var r=rS.subplotsRegistry;for(var i in r){var a=r[i],o=a.attr;if(o&&(gI.push(i),Array.isArray(o)))for(t=0;t<o.length;t++)uE.pushUnique(gI,o[t])}}for(e=0;e<gI.length;e++)n[gI[e]]=[];return n}function Ee(e,t){var n,r,i=e.trace,a=i._arrayAttrs,o={};for(n=0;n<a.length;n++)r=a[n],o[r]=uE.nestedProperty(i,r).get().slice();for(e.trace=t,n=0;n<a.length;n++)r=a[n],uE.nestedProperty(e.trace,r).set(o[r])}function Pe(e,t){function n(e){for(var n=!0,r=0;r<t.length;r++){var o=t[r];a[o]||(e[o]?a[o]=e[o]:n=!1)}n&&(i=!0)}for(var r=e._context.locale,i=!1,a={},o=0;o<2;o++){for(var s=e._context.locales,l=0;l<2;l++){var u=(s[r]||{}).format;if(u&&(n(u),i))break;s=rS.localeRegistry}var c=r.split("-")[0];if(i||c===r)break;r=c}return i||n(rS.localeRegistry.en.format),a}function Ie(e,t){return e.decimal=t.charAt(0),e.thousands=t.charAt(1),CC.locale(e)}function Le(e,t,n,r){for(var i=e.transforms,a=[e],o=0;o<i.length;o++){var s=i[o],l=hI[s.type];l&&l.transform&&(a=l.transform(a,{transform:s,fullTrace:e,fullData:t,layout:n,fullLayout:r,transformIndex:o}))}return a}function Oe(e){var t,n={left:0,right:0,bottom:0,top:0};if(e)for(t in e)e.hasOwnProperty(t)&&(n.left+=e[t].left||0,n.right+=e[t].right||0,n.bottom+=e[t].bottom||0,n.top+=e[t].top||0);return n}function ze(e){for(var t=0;t<e.length;t++)e[t].clearCalc()}function Re(e,t,n){function r(e){uE.syncOrAsync([i,a],e)}function i(t){var n;return h?(n="",h.rotate&&(n+="rotate("+[h.rotate,f.x,f.y]+")"),h.offset&&(n+="translate(0, "+h.offset+")")):n=null,t.attr("transform",n),t.style({"font-family":y,"font-size":CC.round(v,2)+"px",fill:jE.rgb(_),opacity:b*jE.opacity(_),"font-weight":lI.fontWeight}).attr(f).call(sP.convertToTspans,e),lI.previousPromises(e)}function a(e){var t=CC.select(e.node().parentNode);if(d&&d.selection&&d.side&&w){t.attr("transform",null);var n=0,r={left:"right",right:"left",top:"bottom",bottom:"top"}[d.side],i=-1!==["left","top"].indexOf(d.side)?-1:1,a=SC(d.pad)?d.pad:2,o=PP.bBox(t.node()),s={left:0,top:0,right:m.width,bottom:m.height},l=d.maxShift||(s[d.side]-o[d.side])*("left"===d.side||"top"===d.side?-1:1);if(l<0)n=l;else{var u=d.offsetLeft||0,c=d.offsetTop||0;o.left-=u,o.right-=u,o.top-=c,o.bottom-=c,d.selection.each(function(){var e=PP.bBox(this);uE.bBoxIntersect(o,e,a)&&(n=Math.max(n,i*(e[d.side]-o[r])+a))}),n=Math.min(l,n)}if(n>0||l<0){var f={left:[-n,0],right:[n,0],top:[0,-n],bottom:[0,n]}[d.side];t.attr("transform","translate("+f+")")}}}var o,s=n.propContainer,l=n.propName,u=n.placeholder,c=n.traceIndex,d=n.avoid||{},f=n.attributes,h=n.transform,p=n.containerGroup,m=e._fullLayout,g=s.titlefont||{},y=g.family,v=g.size,_=g.color,b=1,x=!1,w=(s.title||"").trim();"title"===l?o="titleText":-1!==l.indexOf("axis")?o="axisTitleText":l.indexOf(!0)&&(o="colorbarTitleText");var k=e._context.edits[o];""===w?b=0:w.replace(vI," % ")===u.replace(vI," % ")&&(b=.2,x=!0,k||(w=""));var T=w||k;p||(p=m._infolayer.selectAll(".g-"+t).data([0]),p.enter().append("g").classed("g-"+t,!0));var M=p.selectAll("text").data(T?[0]:[]);return M.enter().append("text"),M.text(w).attr("class",t),M.exit().remove(),T?(M.call(r),k&&(w?M.on(".opacity",null):function(){b=0,x=!0,M.text(u).on("mouseover.opacity",function(){CC.select(this).transition().duration(jC.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){CC.select(this).transition().duration(jC.HIDE_PLACEHOLDER).style("opacity",0)})}(),M.call(sP.makeEditable,{gd:e}).on("edit",function(t){void 0!==c?rS.call("restyle",e,l,t,c):rS.call("relayout",e,l,t)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(r)}).on("input",function(e){this.text(e||" ").call(sP.positionText,f.x,f.y)})),M.classed("js-placeholder",x),p):p}function De(e){var t,n,r,i,a,o,s,l,u=[],c=e._min[0].val,d=e._max[0].val,f=0,h=!1,p=Ne(e);for(t=1;t<e._min.length&&c===d;t++)c=Math.min(c,e._min[t].val);for(t=1;t<e._max.length&&c===d;t++)d=Math.max(d,e._max[t].val);if(e.range){var m=uE.simpleMap(e.range,e.r2l);h=m[1]<m[0]}for("reversed"===e.autorange&&(h=!0,e.autorange=!0),t=0;t<e._min.length;t++)for(r=e._min[t],n=0;n<e._max.length;n++)i=e._max[n],l=i.val-r.val,s=e._length-p(r)-p(i),l>0&&s>0&&l/s>f&&(a=r,o=i,f=l/s);if(c===d){var g=c-1,y=c+1;u="tozero"===e.rangemode?c<0?[g,0]:[0,y]:"nonnegative"===e.rangemode?[Math.max(0,g),Math.max(0,y)]:[g,y]}else f&&("linear"!==e.type&&"-"!==e.type||("tozero"===e.rangemode?(a.val>=0&&(a={val:0,pad:0}),o.val<=0&&(o={val:0,pad:0})):"nonnegative"===e.rangemode&&(a.val-f*p(a)<0&&(a={val:0,pad:0}),o.val<0&&(o={val:1,pad:0})),f=(o.val-a.val)/(e._length-p(a)-p(o))),u=[a.val-f*p(a),o.val+f*p(o)]);return u[0]===u[1]&&("tozero"===e.rangemode?u=u[0]<0?[u[0],0]:u[0]>0?[0,u[0]]:[0,1]:(u=[u[0]-1,u[0]+1],"nonnegative"===e.rangemode&&(u[0]=Math.max(0,u[0])))),h&&u.reverse(),uE.simpleMap(u,e.l2r||Number)}function Ne(e){var t=e._length/20;return"domain"===e.constrain&&e._inputDomain&&(t*=(e._inputDomain[1]-e._inputDomain[0])/(e.domain[1]-e.domain[0])),function(e){return e.pad+(e.extrapad?t:0)}}function Fe(e){e._length||e.setScale();var t,n=e._min&&e._max&&e._min.length&&e._max.length;if(e.autorange&&n&&(e.range=De(e),e._r=e.range.slice(),e._rl=uE.simpleMap(e._r,e.r2l),t=e._input,t.range=e.range.slice(),t.autorange=e.autorange),e._anchorAxis&&e._anchorAxis.rangeslider){var r=e._anchorAxis.rangeslider[e._name];r&&"auto"===r.rangemode&&(r.range=n?De(e):e._rangeInitial?e._rangeInitial.slice():e.range.slice()),t=e._anchorAxis._input,t.rangeslider[e._name]=uE.extendFlat({},r)}}function je(e){return e.autorange||e._rangesliderAutorange}function Be(e,t,n){function r(e){if(Array.isArray(e))return x=!0,function(t){return Math.max(Number(e[t]||0),0)};var t=Math.max(Number(e||0),0);return function(){return t}}function i(n){if(u=t[n],SC(u))for(f=w(n),h=k(n),m=u-M(n),g=u+T(n),b&&m<g/10&&(m=g/10),c=e.c2l(m),d=e.c2l(g),_&&(c=Math.min(0,c),d=Math.max(0,d)),s=0;s<2;s++){var r=s?d:c;if(Ue(r)){var i=s?e._max:e._min,a=s?f:h,y=s?He:Ve;for(p=!0,o=0;o<i.length&&p;o++){if(l=i[o],y(l.val,r)&&l.pad>=a&&(l.extrapad||!v)){p=!1;break}y(r,l.val)&&l.pad<=a&&(v||!l.extrapad)&&(i.splice(o,1),o--)}if(p){var x=_&&0===r;i.push({val:r,pad:x?0:a,extrapad:!x&&v})}}}}if(je(e)&&t){e._min||(e._min=[]),e._max||(e._max=[]),n||(n={}),e._m||e.setScale();var a,o,s,l,u,c,d,f,h,p,m,g,y=t.length,v=n.padded||!1,_=n.tozero&&("linear"===e.type||"-"===e.type),b="log"===e.type,x=!1,w=r((e._m>0?n.ppadplus:n.ppadminus)||n.ppad||0),k=r((e._m>0?n.ppadminus:n.ppadplus)||n.ppad||0),T=r(n.vpadplus||n.vpad),M=r(n.vpadminus||n.vpad);if(!x){if(m=1/0,g=-1/0,b)for(a=0;a<y;a++)l=t[a],l<m&&l>0&&(m=l),l>g&&l<_I&&(g=l);else for(a=0;a<y;a++)l=t[a],l<m&&l>-_I&&(m=l),l>g&&l<_I&&(g=l);t=[m,g],y=2}var A=Math.min(6,y);for(a=0;a<A;a++)i(a);for(a=y-1;a>=A;a--)i(a)}}function Ue(e){return SC(e)&&Math.abs(e)<_I}function Ve(e,t){return e<=t}function He(e,t){return e>=t}function We(e){if(!e)return!1;for(var t=0;t<e.length;t++)if(SC(e[t]))return!0;return!1}function qe(e,t){for(var n,r=0,i=0,a=Math.max(1,(e.length-1)/1e3),o=0;o<e.length;o+=a)n=e[Math.round(o)],uE.isDateTime(n,t)&&(r+=1),SC(n)&&(i+=1);return r>2*i}function Ge(e){for(var t,n=Math.max(1,(e.length-1)/1e3),r=0,i=0,a=0;a<e.length;a+=n)t=e[Math.round(a)],uE.cleanNumber(t)!==xI?r++:"string"===typeof t&&""!==t&&"None"!==t&&i++;return i>2*r}function Ye(e){return Math.pow(10,e)}function Xe(e){return+e}function Ze(e){return String(e)}function Je(e,t,n,r,i){function a(t){return(1+100*(t-e)/n.dtick)%100<2}for(var o=0,s=0,l=0,u=0,c=0;c<t.length;c++)t[c]%1===0?l++:SC(t[c])||u++,a(t[c])&&o++,a(t[c]+n.dtick/2)&&s++;var d=t.length-u;if(l===d&&"date"!==n.type)n.dtick<1?e=r-.5*n.dtick:(e-=.5)+n.dtick<r&&(e+=n.dtick);else if(s<.1*d&&(o>.3*d||a(r)||a(i))){var f=n.dtick/2;e+=e+f<r?f:-f}return e}function Ke(e,t,n,r,i){var a=uE.findExactDates(t,i);if(a.exactDays>.8){var o=Number(n.substr(1));a.exactYears>.8&&o%12===0?e=UI.tickIncrement(e,"M6","reverse")+1.5*OI:a.exactMonths>.8?e=UI.tickIncrement(e,"M1","reverse")+15.5*OI:e-=OI/2;var s=UI.tickIncrement(e,n);if(s<=r)return s}return e}function Qe(e){var t,n,r=e.tickvals,i=e.ticktext,a=new Array(r.length),o=uE.simpleMap(e.range,e.r2l),s=1.0001*o[0]-1e-4*o[1],l=1.0001*o[1]-1e-4*o[0],u=Math.min(s,l),c=Math.max(s,l),d=0;Array.isArray(i)||(i=[]);var f="category"===e.type?e.d2l_noadd:e.d2l;for("log"===e.type&&"L"!==String(e.dtick).charAt(0)&&(e.dtick="L"+Math.pow(10,Math.floor(Math.min(e.range[0],e.range[1]))-1)),n=0;n<r.length;n++)(t=f(r[n]))>u&&t<c&&(void 0===i[n]?a[d]=UI.tickText(e,t):a[d]=tt(e,t,String(i[n])),d++);return d<r.length&&a.splice(d,r.length-d),a}function $e(e,t,n){return t*uE.roundUp(e/t,n)}function et(e){var t=e.dtick;if(e._tickexponent=0,SC(t)||"string"===typeof t||(t=1),"category"===e.type&&(e._tickround=null),"date"===e.type){var n=e.r2l(e.tick0),r=e.l2r(n).replace(/(^-|i)/g,""),i=r.length;if("M"===String(t).charAt(0))i>10||"01-01"!==r.substr(5)?e._tickround="d":e._tickround=+t.substr(1)%12===0?"y":"m";else if(t>=OI&&i<=10||t>=15*OI)e._tickround="d";else if(t>=RI&&i<=16||t>=zI)e._tickround="M";else if(t>=DI&&i<=19||t>=RI)e._tickround="S";else{var a=e.l2r(n+t).replace(/^-/,"").length;e._tickround=Math.max(i,a)-20}}else if(SC(t)||"L"===t.charAt(0)){var o=e.range.map(e.r2d||Number);SC(t)||(t=Number(t.substr(1))),e._tickround=2-Math.floor(Math.log(t)/Math.LN10+.01);var s=Math.max(Math.abs(o[0]),Math.abs(o[1])),l=Math.floor(Math.log(s)/Math.LN10+.01);Math.abs(l)>3&&(lt(e.exponentformat)&&!ut(l)?e._tickexponent=3*Math.round((l-1)/3):e._tickexponent=l)}else e._tickround=null}function tt(e,t,n){var r=e.tickfont||{};return{x:t,dx:0,dy:0,text:n||"",fontSize:r.size,font:r.family,fontColor:r.color}}function nt(e,t,n,r){var i=e._tickround,a=n&&e.hoverformat||UI.getTickFormat(e);r&&(i=SC(i)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[i]);var o,s=uE.formatDate(t.x,a,i,e._dateFormat,e.calendar,e._extraFormat),l=s.indexOf("\n");-1!==l&&(o=s.substr(l+1),s=s.substr(0,l)),r&&("00:00:00"===s||"00:00"===s?(s=o,o=""):8===s.length&&(s=s.replace(/:00$/,""))),o&&(n?"d"===i?s+=", "+o:s=o+(s?", "+s:""):e._inCalcTicks&&o===e._prevDateHead||(s+="<br>"+o,e._prevDateHead=o)),t.text=s}function rt(e,t,n,r,i){var a=e.dtick,o=t.x,s=e.tickformat;if("never"===i&&(i=""),!r||"string"===typeof a&&"L"===a.charAt(0)||(a="L3"),s||"string"===typeof a&&"L"===a.charAt(0))t.text=ct(Math.pow(10,o),e,i,r);else if(SC(a)||"D"===a.charAt(0)&&uE.mod(o+.01,1)<.1){var l=Math.round(o);-1!==["e","E","power"].indexOf(e.exponentformat)||lt(e.exponentformat)&&ut(l)?(t.text=0===l?1:1===l?"10":l>1?"10<sup>"+l+"</sup>":"10<sup>"+NI+-l+"</sup>",t.fontSize*=1.25):(t.text=ct(Math.pow(10,o),e,"","fakehover"),"D1"===a&&"y"===e._id.charAt(0)&&(t.dy-=t.fontSize/6))}else{if("D"!==a.charAt(0))throw"unrecognized dtick "+String(a);t.text=String(Math.round(Math.pow(10,uE.mod(o,1)))),t.fontSize*=.75}if("D1"===e.dtick){var u=String(t.text).charAt(0);"0"!==u&&"1"!==u||("y"===e._id.charAt(0)?t.dx-=t.fontSize/4:(t.dy+=t.fontSize/2,t.dx+=(e.range[1]>e.range[0]?1:-1)*t.fontSize*(o<0?.5:.25)))}}function it(e,t){var n=e._categories[Math.round(t.x)];void 0===n&&(n=""),t.text=String(n)}function at(e,t,n,r,i){"never"===i?i="":"all"===e.showexponent&&Math.abs(t.x/e.dtick)<1e-6&&(i="hide"),t.text=ct(t.x,e,i,r)}function ot(e,t,n,r,i){if("radians"!==e.thetaunit||n)t.text=ct(t.x,e,i,r);else{var a=t.x/180;if(0===a)t.text="0";else{var o=st(a);if(o[1]>=100)t.text=ct(uE.deg2rad(t.x),e,i,r);else{var s=t.x<0;1===o[1]?1===o[0]?t.text="\u03c0":t.text=o[0]+"\u03c0":t.text=["<sup>",o[0],"</sup>","\u2044","<sub>",o[1],"</sub>","\u03c0"].join(""),s&&(t.text=NI+t.text)}}}}function st(e){function t(e,t){return Math.abs(e-t)<=1e-6}function n(e,r){return t(r,0)?e:n(r,e%r)}var r=function(e){for(var n=1;!t(Math.round(e*n)/n,e);)n*=10;return n}(e),i=e*r,a=Math.abs(n(i,r));return[Math.round(i/a),Math.round(r/a)]}function lt(e){return"SI"===e||"B"===e}function ut(e){return e>14||e<-15}function ct(e,t,n,r){var i=e<0,a=t._tickround,o=n||t.exponentformat||"B",s=t._tickexponent,l=UI.getTickFormat(t),u=t.separatethousands;if(r){var c={exponentformat:o,dtick:"none"===t.showexponent?t.dtick:SC(e)?Math.abs(e)||1:1,range:"none"===t.showexponent?t.range.map(t.r2d):[0,e||1]};et(c),a=(Number(c._tickround)||0)+4,s=c._tickexponent,t.hoverformat&&(l=t.hoverformat)}if(l)return t._numFormat(l)(e).replace(/-/g,NI);var d=Math.pow(10,-a)/2;if("none"===o&&(s=0),(e=Math.abs(e))<d)e="0",i=!1;else{if(e+=d,s&&(e*=Math.pow(10,-s),a+=s),0===a)e=String(Math.floor(e));else if(a<0){e=String(Math.round(e)),e=e.substr(0,e.length+a);for(var f=a;f<0;f++)e+="0"}else{e=String(e);var h=e.indexOf(".")+1;h&&(e=e.substr(0,h+a).replace(/\.?0+$/,""))}e=uE.numSeparate(e,t._separators,u)}if(s&&"hide"!==o){lt(o)&&ut(s)&&(o="power");var p;p=s<0?NI+-s:"power"!==o?"+"+s:String(s),"e"===o?e+="e"+p:"E"===o?e+="E"+p:"power"===o?e+="\xd710<sup>"+p+"</sup>":"B"===o&&9===s?e+="B":lt(o)&&(e+=JI[s/3+5])}return i?NI+e:e}function dt(e,t){var n,r,i=[];for(n=0;n<t.length;n++){var a=[],o=e._fullData[t[n]].xaxis,s=e._fullData[t[n]].yaxis;if(o&&s){for(r=0;r<i.length;r++)-1===i[r].x.indexOf(o)&&-1===i[r].y.indexOf(s)||a.push(r);if(a.length){var l,u=i[a[0]];if(a.length>1)for(r=1;r<a.length;r++)l=i[a[r]],ft(u.x,l.x),ft(u.y,l.y);ft(u.x,[o]),ft(u.y,[s])}else i.push({x:[o],y:[s]})}}return i}function ft(e,t){for(var n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n])}function ht(e,t,n){var r,i,a=[],o=[],s=e.layout;for(r=0;r<t.length;r++)a.push(UI.getFromId(e,t[r]));for(r=0;r<n.length;r++)o.push(UI.getFromId(e,n[r]));var l=Object.keys(a[0]),u=["anchor","domain","overlaying","position","side","tickangle"],c=["linear","log"];for(r=0;r<l.length;r++){var d=l[r],f=a[0][d],h=o[0][d],p=!0,m=!1,g=!1;if("_"!==d.charAt(0)&&"function"!==typeof f&&-1===u.indexOf(d)){for(i=1;i<a.length&&p;i++){var y=a[i][d];"type"===d&&-1!==c.indexOf(f)&&-1!==c.indexOf(y)&&f!==y?m=!0:y!==f&&(p=!1)}for(i=1;i<o.length&&p;i++){var v=o[i][d];"type"===d&&-1!==c.indexOf(h)&&-1!==c.indexOf(v)&&h!==v?g=!0:o[i][d]!==h&&(p=!1)}p&&(m&&(s[a[0]._name].type="linear"),g&&(s[o[0]._name].type="linear"),pt(s,d,a,o,e._fullLayout._dfltTitle))}}for(r=0;r<e._fullLayout.annotations.length;r++){var _=e._fullLayout.annotations[r];-1!==t.indexOf(_.xref)&&-1!==n.indexOf(_.yref)&&uE.swapAttrs(s.annotations[r],["?"])}}function pt(e,t,n,r,i){var a,o=uE.nestedProperty,s=o(e[n[0]._name],t).get(),l=o(e[r[0]._name],t).get();for("title"===t&&(s===i.x&&(s=i.y),l===i.y&&(l=i.x)),a=0;a<n.length;a++)o(e,n[a]._name+"."+t).set(l);for(a=0;a<r.length;a++)o(e,r[a]._name+"."+t).set(s)}function mt(e,t,n,r){if(r.enabled){for(var i=r.target,a=uE.nestedProperty(t,i),o=a.get(),s=PI.getDataConversions(e,t,i,o),l=gt(r,s),u=new Array(n.length),c=0;c<n.length;c++)u[c]=l(o,n[c]);a.set(u)}}function gt(e,t){var n=e.func,r=t.d2c,i=t.c2d;switch(n){case"count":return yt;case"first":return vt;case"last":return _t;case"sum":return function(e,t){for(var n=0,a=0;a<t.length;a++){var o=r(e[t[a]]);o!==eL&&(n+=o)}return i(n)};case"avg":return function(e,t){for(var n=0,a=0,o=0;o<t.length;o++){var s=r(e[t[o]]);s!==eL&&(n+=s,a++)}return a?i(n/a):eL};case"min":return function(e,t){for(var n=1/0,a=0;a<t.length;a++){var o=r(e[t[a]]);o!==eL&&(n=Math.min(n,o))}return n===1/0?eL:i(n)};case"max":return function(e,t){for(var n=-1/0,a=0;a<t.length;a++){var o=r(e[t[a]]);o!==eL&&(n=Math.max(n,o))}return n===-1/0?eL:i(n)};case"median":return function(e,t){for(var n=[],a=0;a<t.length;a++){var o=r(e[t[a]]);o!==eL&&n.push(o)}if(!n.length)return eL;n.sort();var s=(n.length-1)/2;return i((n[Math.floor(s)]+n[Math.ceil(s)])/2)};case"mode":return function(e,t){for(var n={},a=0,o=eL,s=0;s<t.length;s++){var l=r(e[t[s]]);if(l!==eL){var u=n[l]=(n[l]||0)+1;u>a&&(a=u,o=l)}}return a?i(o):eL};case"rms":return function(e,t){for(var n=0,a=0,o=0;o<t.length;o++){var s=r(e[t[o]]);s!==eL&&(n+=s*s,a++)}return a?i(Math.sqrt(n/a)):eL};case"stddev":return function(t,n){var i,a=0,o=0,s=1,l=eL;for(i=0;i<n.length&&l===eL;i++)l=r(t[n[i]]);if(l===eL)return eL;for(;i<n.length;i++){var u=r(t[n[i]]);if(u!==eL){var c=u-l;a+=c,o+=c*c,s++}}var d="sample"===e.funcmode?s-1:s;return d?Math.sqrt((o-a*a/s)/d):0}}}function yt(e,t){return t.length}function vt(e,t){return e[t[0]]}function _t(e,t){return e[t[t.length-1]]}function bt(e,t,n){var r,i,a,o,s,l=[],u=n.map(function(t){return t[e]}),c=CC.bisector(t).left;for(r=0;r<u.length;r++)for(a=u[r],i=0;i<a.length;i++)null!==(o=a[i])&&void 0!==o&&((s=c(l,o))<l.length&&l[s]===o||l.splice(s,0,o));return l}function xt(e,t,n,r){var i,a,o,s,l=r[dL(t)].type,u=[];for(a=0;a<n.length;a++)(o=n[a])!==t&&(s=r[dL(o)],s.type!==l||s.fixedrange||u.push(o));for(i=0;i<e.length;i++)if(e[i][t]){var c=e[i],d=[];for(a=0;a<u.length;a++)o=u[a],c[o]||d.push(o);return{linkableAxes:d,thisGroup:c}}return{linkableAxes:u,thisGroup:null}}function wt(e,t,n,r,i){var a,o,s,l,u;null===t?(t={},t[n]=1,u=e.length,e.push(t)):u=e.indexOf(t);var c=Object.keys(t);for(a=0;a<e.length;a++)if(s=e[a],a!==u&&s[r]){var d=s[r];for(o=0;o<c.length;o++)l=c[o],s[l]=d*i*t[l];return void e.splice(u,1)}if(1!==i)for(o=0;o<c.length;o++)t[c[o]]*=i;t[r]=1}function kt(e,t){if("-"===e.type){var n=e._id,r=n.charAt(0);-1!==n.indexOf("scene")&&(n=r);var i=Tt(t,n,r);if(i){if("histogram"===i.type&&r==={v:"y",h:"x"}[i.orientation||"v"])return void(e.type="linear");var a=r+"calendar",o=i[a];if(At(i,r)){for(var s,l=Mt(i),u=[],c=0;c<t.length;c++)s=t[c],rS.traceIs(s,"box-violin")&&(s[r+"axis"]||r)===n&&(void 0!==s[l]?u.push(s[l][0]):void 0!==s.name?u.push(s.name):u.push("text"),s[a]!==o&&(o=void 0));e.type=wI(u,o)}else e.type=wI(i[r]||[i[r+"0"]],o)}}}function Tt(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];if((i[n+"axis"]||n)===t){if(At(i,n))return i;if((i[n]||[]).length||i[n+"0"])return i}}}function Mt(e){return{v:"x",h:"y"}[e.orientation||"v"]}function At(e,t){var n=Mt(e),r=rS.traceIs(e,"box-violin"),i=rS.traceIs(e._fullInput||{},"candlestick");return r&&!i&&t===n&&void 0===e[n]&&void 0===e[n+"0"]}function Ct(e,t,n,r,i){var a=e._fullLayout,o=a._modules;t.plot&&t.plot.selectAll("g:not(.scatterlayer)").selectAll("g.trace").remove();for(var s=0;s<o.length;s++){var l=o[s];if("cartesian"===l.basePlotModule.name){var u=wL(n,l);l.plot&&l.plot(e,t,u,r,i)}}}function St(e){for(var t=e._fullLayout,n=Object.keys(t._plots),r=[],i=[],a=0;a<n.length;a++){var o=n[a],s=t._plots[o],l=s.xaxis,u=s.yaxis,c=l._mainAxis,d=u._mainAxis,f=c._id+d._id;f!==o&&-1!==n.indexOf(f)?(s.mainplot=f,s.mainplotinfo=t._plots[f],i.push(o)):r.push(o)}return r=r.concat(i)}function Et(e){var t=e.plotgroup,n=e.id,r=EE.layerValue2layerClass[e.xaxis.layer],i=EE.layerValue2layerClass[e.yaxis.layer];if(e.mainplot){var a=e.mainplotinfo,o=a.plotgroup,s=n+"-x",l=n+"-y";e.gridlayer=a.gridlayer,e.zerolinelayer=a.zerolinelayer,Lt(a.overlinesBelow,"path",s),Lt(a.overlinesBelow,"path",l),Lt(a.overaxesBelow,"g",s),Lt(a.overaxesBelow,"g",l),e.plot=Lt(a.overplot,"g",n),Lt(a.overlinesAbove,"path",s),Lt(a.overlinesAbove,"path",l),Lt(a.overaxesAbove,"g",s),Lt(a.overaxesAbove,"g",l),e.xlines=o.select(".overlines-"+r).select("."+s),e.ylines=o.select(".overlines-"+i).select("."+l),e.xaxislayer=o.select(".overaxes-"+r).select("."+s),e.yaxislayer=o.select(".overaxes-"+i).select("."+l)}else{var u=Lt(t,"g","layer-subplot");e.shapelayer=Lt(u,"g","shapelayer"),e.imagelayer=Lt(u,"g","imagelayer"),e.gridlayer=Lt(t,"g","gridlayer"),e.zerolinelayer=Lt(t,"g","zerolinelayer"),Lt(t,"path","xlines-below"),Lt(t,"path","ylines-below"),e.overlinesBelow=Lt(t,"g","overlines-below"),Lt(t,"g","xaxislayer-below"),Lt(t,"g","yaxislayer-below"),e.overaxesBelow=Lt(t,"g","overaxes-below"),e.plot=Lt(t,"g","plot"),e.overplot=Lt(t,"g","overplot"),Lt(t,"path","xlines-above"),Lt(t,"path","ylines-above"),e.overlinesAbove=Lt(t,"g","overlines-above"),Lt(t,"g","xaxislayer-above"),Lt(t,"g","yaxislayer-above"),e.overaxesAbove=Lt(t,"g","overaxes-above"),e.xlines=t.select(".xlines-"+r),e.ylines=t.select(".ylines-"+i),e.xaxislayer=t.select(".xaxislayer-"+r),e.yaxislayer=t.select(".yaxislayer-"+i)}Lt(e.gridlayer,"g",e.xaxis._id,e.xaxis._id),Lt(e.gridlayer,"g",e.yaxis._id,e.yaxis._id),e.gridlayer.selectAll("g").sort(oI.idSort);for(var c=0;c<EE.traceLayerClasses.length;c++)Lt(e.plot,"g",EE.traceLayerClasses[c]);e.xlines.style("fill","none").classed("crisp",!0),e.ylines.style("fill","none").classed("crisp",!0)}function Pt(e,t){if(e){var n={};e.each(function(e){CC.select(this).remove(),It(e,t),n[e]=!0});for(var r=t._plots,i=Object.keys(r),a=0;a<i.length;a++)for(var o=r[i[a]],s=o.overlays||[],l=0;l<s.length;l++){var u=s[l];n[u.id]&&u.plot.selectAll(".trace").remove()}}}function It(e,t){t._draggers.selectAll("g."+e).remove(),t._defs.select("#clip"+t._uid+e+"plot").remove()}function Lt(e,t,n,r){var i=e.selectAll("."+n).data([r||0]);return i.enter().append(t).classed(n,!0),i}function Ot(e,t,n){t=t||e.currentTarget||e.srcElement,Array.isArray(n)||(n=[0,0]);var r=e.clientX||0,i=e.clientY||0,a=zt(t);return n[0]=r-a.left,n[1]=i-a.top,n}function zt(e){return e===window||e===document||e===document.body?UL:e.getBoundingClientRect()}function Rt(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function Dt(e){return"function"===typeof e}function Nt(e){return"number"===typeof e}function Ft(e){return"object"===typeof e&&null!==e}function jt(e){return void 0===e}function Bt(){var e=document.createElement("div");e.className="dragcover";var t=e.style;return t.position="fixed",t.left=0,t.right=0,t.top=0,t.bottom=0,t.zIndex=999999999,t.background="none",document.body.appendChild(e),e}function Ut(e){e._dragging=!1,e._replotPending&&rS.call("plot",e)}function Vt(e){return VL(e.changedTouches?e.changedTouches[0]:e,document.body)}function Ht(e,t,n,r){r=r||uE.identity,Array.isArray(e)&&(t[0][n]=r(e))}function Wt(e){return rO[e]||e}function qt(e,t){return Array.isArray(t)?Array.isArray(e)&&Array.isArray(e[t[0]])?e[t[0]][t[1]]:void 0:e[t]}function Gt(e,t,n,r){function i(e,t){for(var n,r=null,i=1/0,a=0;a<e.length;a++)(n=e[a].spikeDistance)<i&&n<=t&&(r=e[a],i=n);return r}function a(e){return e?{xa:e.xa,ya:e.ya,x:void 0!==e.xSpike?e.xSpike:(e.x0+e.x1)/2,y:void 0!==e.ySpike?e.ySpike:(e.y0+e.y1)/2,distance:e.distance,spikeDistance:e.spikeDistance,curveNumber:e.trace.index,color:e.color,pointNumber:e.index}:null}n||(n="xy");var o=Array.isArray(n)?n:[n],s=e._fullLayout,l=s._plots||[],u=l[n],c=s._has("cartesian");if(u){var d=u.overlays.map(function(e){return e.id});o=o.concat(d)}for(var f=o.length,h=new Array(f),p=new Array(f),m=!1,g=0;g<f;g++){var y=o[g],v=l[y];if(v)m=!0,h[g]=PI.getFromId(e,v.xaxis._id),p[g]=PI.getFromId(e,v.yaxis._id);else{var _=s[y]._subplot;h[g]=_.xaxis,p[g]=_.yaxis}}var b=t.hovermode||s.hovermode;if(b&&!m&&(b="closest"),-1===["x","y","closest"].indexOf(b)||!e.calcdata||e.querySelector(".zoombox")||e._dragging)return $L.unhoverRaw(e,t);var x,w,k,T,M,A,C,S,E,P,I,L,O,z=-1===s.hoverdistance?1/0:s.hoverdistance,R=-1===s.spikedistance?1/0:s.spikedistance,D=[],N=[],F={hLinePoint:null,vLinePoint:null};if(Array.isArray(t))for(b="array",k=0;k<t.length;k++)M=e.calcdata[t[k].curveNumber||0],"skip"!==M[0].trace.hoverinfo&&N.push(M);else{for(T=0;T<e.calcdata.length;T++)M=e.calcdata[T],A=M[0].trace,"skip"!==A.hoverinfo&&-1!==o.indexOf(nO.getSubplot(A))&&N.push(M);var j,B,U=!t.target;if(U)j="xpx"in t?t.xpx:h[0]._length/2,t.pointerX=j+h[0]._offset,B="ypx"in t?t.ypx:p[0]._length/2,t.pointerY=B+p[0]._offset;else{if(!1===JL.triggerHandler(e,"plotly_beforehover",t))return;var V=t.target.getBoundingClientRect();if(j=t.clientX-V.left,B=t.clientY-V.top,j<0||j>V.width||B<0||B>V.height)return $L.unhoverRaw(e,t);t.pointerX=t.offsetX,t.pointerY=t.offsetY}if(x="xval"in t?nO.flat(o,t.xval):nO.p2c(h,j),w="yval"in t?nO.flat(o,t.yval):nO.p2c(p,B),!SC(x[0])||!SC(w[0]))return uE.warn("Fx.hover failed",t,e),$L.unhoverRaw(e,t)}var H=1/0;for(T=0;T<N.length;T++)if((M=N[T])&&M[0]&&M[0].trace&&!0===M[0].trace.visible&&(A=M[0].trace,-1===["carpet","contourcarpet"].indexOf(A._module.name))){if(C=nO.getSubplot(A),S=o.indexOf(C),E=b,L={cd:M,trace:A,xa:h[S],ya:p[S],maxHoverDistance:z,maxSpikeDistance:R,index:!1,distance:Math.min(H,z),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:jE.defaultLine,name:A.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},s[C]&&(L.subplot=s[C]._subplot),O=D.length,"array"===E){var W=t[T];"pointNumber"in W?(L.index=W.pointNumber,E="closest"):(E="","xval"in W&&(P=W.xval,E="x"),"yval"in W&&(I=W.yval,E=E?"closest":"y"))}else P=x[S],I=w[S];if(0!==z)if(A._module&&A._module.hoverPoints){var q=A._module.hoverPoints(L,P,I,E,s._hoverlayer);if(q)for(var G,Y=0;Y<q.length;Y++)G=q[Y],SC(G.x0)&&SC(G.y0)&&D.push(Jt(G,b))}else uE.log("Unrecognized trace type in hover:",A);if("closest"===b&&D.length>O&&(D.splice(0,O),H=D[0].distance),c&&0!==R&&0===D.length){L.distance=R,L.index=!1;var X=A._module.hoverPoints(L,P,I,"closest",s._hoverlayer);if(X&&(X=X.filter(function(e){return e.spikeDistance<=R})),X&&X.length){var Z,J=X.filter(function(e){return e.xa.showspikes});if(J.length){var K=J[0];SC(K.x0)&&SC(K.y0)&&(Z=a(K),(!F.vLinePoint||F.vLinePoint.spikeDistance>Z.spikeDistance)&&(F.vLinePoint=Z))}var Q=X.filter(function(e){return e.ya.showspikes});if(Q.length){var $=Q[0];SC($.x0)&&SC($.y0)&&(Z=a($),(!F.hLinePoint||F.hLinePoint.spikeDistance>Z.spikeDistance)&&(F.hLinePoint=Z))}}}}var ee={fullLayout:s,container:s._hoverlayer,outerContainer:s._paperdiv,event:t},te=e._spikepoints,ne={vLinePoint:F.vLinePoint,hLinePoint:F.hLinePoint};if(e._spikepoints=ne,c&&0!==R&&0!==D.length){var re=D.filter(function(e){return e.ya.showspikes}),ie=i(re,R);F.hLinePoint=a(ie);var ae=D.filter(function(e){return e.xa.showspikes}),oe=i(ae,R);F.vLinePoint=a(oe)}if(0===D.length){var se=$L.unhoverRaw(e,t);return!c||null===F.hLinePoint&&null===F.vLinePoint||$t(te)&&Kt(F,ee),se}c&&$t(te)&&Kt(F,ee),D.sort(function(e,t){return e.distance-t.distance});var le=e._hoverdata,ue=[];for(k=0;k<D.length;k++){var ce=D[k];ue.push(nO.makeEventData(ce,ce.trace,ce.cd))}e._hoverdata=ue;var de="y"===b&&N.length>1,fe=jE.combine(s.plot_bgcolor||jE.background,s.paper_bgcolor),he={hovermode:b,rotateLabels:de,bgColor:fe,container:s._hoverlayer,outerContainer:s._paperdiv,commonLabelOpts:s.hoverlabel,hoverdistance:s.hoverdistance},pe=Yt(D,he,e);if(Xt(D,de?"xa":"ya",s),Zt(pe,de),t.target&&t.target.tagName){var me=rS.getComponentMethod("annotations","hasClickToShow")(e,ue);oO(CC.select(t.target),me?"pointer":"")}t.target&&!r&&Qt(e,t,le)&&(le&&e.emit("plotly_unhover",{event:t,points:le}),e.emit("plotly_hover",{event:t,points:e._hoverdata,xaxes:h,yaxes:p,xvals:x,yvals:w}))}function Yt(e,t,n){var r=t.hovermode,i=t.rotateLabels,a=t.bgColor,o=t.container,s=t.outerContainer,l=t.commonLabelOpts||{},u=t.fontFamily||GL.HOVERFONT,c=t.fontSize||GL.HOVERFONTSIZE,d=e[0],f=d.xa,h=d.ya,p="y"===r?"yLabel":"xLabel",m=d[p],g=(String(m)||"").split(" ")[0],y=s.node().getBoundingClientRect(),v=y.top,_=y.width,b=y.height,x=void 0!==m&&d.distance<=t.hoverdistance&&("x"===r||"y"===r);if(x){var w,k,T=!0;for(w=0;w<e.length;w++){T&&void 0===e[w].zLabel&&(T=!1),k=e[w].hoverinfo||e[w].trace.hoverinfo;var M=Array.isArray(k)?k:k.split("+");if(-1===M.indexOf("all")&&-1===M.indexOf(r)){x=!1;break}}T&&(x=!1)}var A=o.selectAll("g.axistext").data(x?[0]:[]);A.enter().append("g").classed("axistext",!0),A.exit().remove(),A.each(function(){var t=CC.select(this),i=t.selectAll("path").data([0]),a=t.selectAll("text").data([0]);i.enter().append("path").style({"stroke-width":"1px"}),i.style({fill:l.bgcolor||jE.defaultLine,stroke:l.bordercolor||jE.background}),a.enter().append("text").attr("data-notex",1),a.text(m).call(PP.font,l.font.family||u,l.font.size||c,l.font.color||jE.background).call(sP.positionText,0,0).call(sP.convertToTspans,n),t.attr("transform","");var o=a.node().getBoundingClientRect();if("x"===r){a.attr("text-anchor","middle").call(sP.positionText,0,"top"===f.side?v-o.bottom-hO-pO:v-o.top+hO+pO);var s="top"===f.side?"-":"";i.attr("d","M0,0L"+hO+","+s+hO+"H"+(pO+o.width/2)+"v"+s+(2*pO+o.height)+"H-"+(pO+o.width/2)+"V"+s+hO+"H-"+hO+"Z"),t.attr("transform","translate("+(f._offset+(d.x0+d.x1)/2)+","+(h._offset+("top"===f.side?0:h._length))+")")}else{a.attr("text-anchor","right"===h.side?"start":"end").call(sP.positionText,("right"===h.side?1:-1)*(pO+hO),v-o.top-o.height/2);var y="right"===h.side?"":"-";i.attr("d","M0,0L"+y+hO+","+hO+"V"+(pO+o.height/2)+"h"+y+(2*pO+o.width)+"V-"+(pO+o.height/2)+"H"+y+hO+"V-"+hO+"Z"),t.attr("transform","translate("+(f._offset+("right"===h.side?f._length:0))+","+(h._offset+(d.y0+d.y1)/2)+")")}e=e.filter(function(e){return void 0!==e.zLabelVal||(e[p]||"").split(" ")[0]===g})});var C=o.selectAll("g.hovertext").data(e,function(e){return[e.trace.index,e.index,e.x0,e.y0,e.name,e.attr,e.xa,e.ya||""].join(",")});return C.enter().append("g").classed("hovertext",!0).each(function(){var e=CC.select(this);e.append("rect").call(jE.fill,jE.addOpacity(a,.8)),e.append("text").classed("name",!0),e.append("path").style("stroke-width","1px"),e.append("text").classed("nums",!0).call(PP.font,u,c)}),C.exit().remove(),C.each(function(e){var t=CC.select(this).attr("transform",""),o="",s="",l=jE.opacity(e.color)?e.color:jE.defaultLine,d=jE.combine(l,a),f=e.borderColor||jE.contrast(d);if(void 0!==e.nameOverride&&(e.name=e.nameOverride),e.name){o=sP.plainText(e.name||"");var h=Math.round(e.nameLength);h>-1&&o.length>h&&(o=h>3?o.substr(0,h-3)+"...":o.substr(0,h))}void 0!==e.extraText&&(s+=e.extraText),void 0!==e.zLabel?(void 0!==e.xLabel&&(s+="x: "+e.xLabel+"<br>"),void 0!==e.yLabel&&(s+="y: "+e.yLabel+"<br>"),s+=(s?"z: ":"")+e.zLabel):x&&e[r+"Label"]===m?s=e[("x"===r?"y":"x")+"Label"]||"":void 0===e.xLabel?void 0!==e.yLabel&&(s=e.yLabel):s=void 0===e.yLabel?e.xLabel:"("+e.xLabel+", "+e.yLabel+")",e.text&&!Array.isArray(e.text)&&(s+=(s?"<br>":"")+e.text),""===s&&(""===o&&t.remove(),s=o);var p=t.select("text.nums").call(PP.font,e.fontFamily||u,e.fontSize||c,e.fontColor||f).text(s).attr("data-notex",1).call(sP.positionText,0,0).call(sP.convertToTspans,n),g=t.select("text.name"),y=0;o&&o!==s?(g.call(PP.font,e.fontFamily||u,e.fontSize||c,d).text(o).attr("data-notex",1).call(sP.positionText,0,0).call(sP.convertToTspans,n),y=g.node().getBoundingClientRect().width+2*pO):(g.remove(),t.select("rect").remove()),t.select("path").style({fill:d,stroke:f});var w,k,T=p.node().getBoundingClientRect(),M=e.xa._offset+(e.x0+e.x1)/2,A=e.ya._offset+(e.y0+e.y1)/2,C=Math.abs(e.x1-e.x0),S=Math.abs(e.y1-e.y0),E=T.width+hO+pO+y;e.ty0=v-T.top,e.bx=T.width+2*pO,e.by=T.height+2*pO,e.anchor="start",e.txwidth=T.width,e.tx2width=y,e.offset=0,i?(e.pos=M,w=A+S/2+E<=b,k=A-S/2-E>=0,"top"!==e.idealAlign&&w||!k?w?(A+=S/2,e.anchor="start"):e.anchor="middle":(A-=S/2,e.anchor="end")):(e.pos=A,w=M+C/2+E<=_,k=M-C/2-E>=0,"left"!==e.idealAlign&&w||!k?w?(M+=C/2,e.anchor="start"):e.anchor="middle":(M-=C/2,e.anchor="end")),p.attr("text-anchor",e.anchor),y&&g.attr("text-anchor",e.anchor),t.attr("transform","translate("+M+","+A+")"+(i?"rotate("+lO+")":""))}),C}function Xt(e,t,n){function r(e){var t=e[0],n=e[e.length-1];if(a=t.pmin-t.pos-t.dp+t.size,o=n.pos+n.dp+n.size-t.pmax,a>.01){for(l=e.length-1;l>=0;l--)e[l].dp+=a;i=!1}if(!(o<.01)){if(a<-.01){for(l=e.length-1;l>=0;l--)e[l].dp-=o;i=!1}if(i){var r=0;for(s=0;s<e.length;s++)u=e[s],u.pos+u.dp+u.size>t.pmax&&r++;for(s=e.length-1;s>=0&&!(r<=0);s--)u=e[s],u.pos>t.pmax-1&&(u.del=!0,r--);for(s=0;s<e.length&&!(r<=0);s++)if(u=e[s],u.pos<t.pmin+1)for(u.del=!0,r--,o=2*u.size,l=e.length-1;l>=0;l--)e[l].dp-=o;for(s=e.length-1;s>=0&&!(r<=0);s--)u=e[s],u.pos+u.dp+u.size>t.pmax&&(u.del=!0,r--)}}}for(var i,a,o,s,l,u,c,d=0,f=e.map(function(e,r){var i=e[t];return[{i:r,dp:0,pos:e.pos,posref:e.posref,size:e.by*("x"===i._id.charAt(0)?cO:1)/2,pmin:0,pmax:"x"===i._id.charAt(0)?n.width:n.height}]}).sort(function(e,t){return e[0].posref-t[0].posref});!i&&d<=e.length;){for(d++,i=!0,s=0;s<f.length-1;){var h=f[s],p=f[s+1],m=h[h.length-1],g=p[0];if((a=m.pos+m.dp+m.size-g.pos-g.dp+g.size)>.01&&m.pmin===g.pmin&&m.pmax===g.pmax){for(l=p.length-1;l>=0;l--)p[l].dp+=a;for(h.push.apply(h,p),f.splice(s+1,1),c=0,l=h.length-1;l>=0;l--)c+=h[l].dp;for(o=c/h.length,l=h.length-1;l>=0;l--)h[l].dp-=o;i=!1}else s++}f.forEach(r)}for(s=f.length-1;s>=0;s--){var y=f[s];for(l=y.length-1;l>=0;l--){var v=y[l],_=e[v.i];_.offset=v.dp,_.del=v.del}}}function Zt(e,t){e.each(function(e){var n=CC.select(this);if(e.del)return void n.remove();var r="end"===e.anchor?-1:1,i=n.select("text.nums"),a={start:1,end:-1,middle:0}[e.anchor],o=a*(hO+pO),s=o+a*(e.txwidth+pO),l=0,u=e.offset;"middle"===e.anchor&&(o-=e.tx2width/2,s+=e.txwidth/2+pO),t&&(u*=-fO,l=e.offset*dO),n.select("path").attr("d","middle"===e.anchor?"M-"+(e.bx/2+e.tx2width/2)+","+(u-e.by/2)+"h"+e.bx+"v"+e.by+"h-"+e.bx+"Z":"M0,0L"+(r*hO+l)+","+(hO+u)+"v"+(e.by/2-hO)+"h"+r*e.bx+"v-"+e.by+"H"+(r*hO+l)+"V"+(u-hO)+"Z"),i.call(sP.positionText,o+l,u+e.ty0-e.by/2+pO),e.tx2width&&(n.select("text.name").call(sP.positionText,s+a*pO+l,u+e.ty0-e.by/2+pO),n.select("rect").call(PP.setRect,s+(a-1)*e.tx2width/2+l,u-e.by/2-1,e.tx2width,e.by+2))})}function Jt(e,t){function n(t,n,r){var i=s(n,r);i&&(e[t]=i)}var r=e.index,i=e.trace||{},a=e.cd[0],o=e.cd[r]||{},s=Array.isArray(r)?function(e,t){return uE.castOption(a,r,e)||uE.extractOption({},i,"",t)}:function(e,t){return uE.extractOption(o,i,e,t)};if(n("hoverinfo","hi","hoverinfo"),n("color","hbg","hoverlabel.bgcolor"),n("borderColor","hbc","hoverlabel.bordercolor"),n("fontFamily","htf","hoverlabel.font.family"),n("fontSize","hts","hoverlabel.font.size"),n("fontColor","htc","hoverlabel.font.color"),n("nameLength","hnl","hoverlabel.namelength"),e.posref="y"===t?e.xa._offset+(e.x0+e.x1)/2:e.ya._offset+(e.y0+e.y1)/2,e.x0=uE.constrain(e.x0,0,e.xa._length),e.x1=uE.constrain(e.x1,0,e.xa._length),e.y0=uE.constrain(e.y0,0,e.ya._length),e.y1=uE.constrain(e.y1,0,e.ya._length),void 0!==e.xLabelVal&&(e.xLabel="xLabel"in e?e.xLabel:PI.hoverLabelText(e.xa,e.xLabelVal),e.xVal=e.xa.c2d(e.xLabelVal)),void 0!==e.yLabelVal&&(e.yLabel="yLabel"in e?e.yLabel:PI.hoverLabelText(e.ya,e.yLabelVal),e.yVal=e.ya.c2d(e.yLabelVal)),void 0!==e.zLabelVal&&void 0===e.zLabel&&(e.zLabel=String(e.zLabelVal)),!isNaN(e.xerr)&&!("log"===e.xa.type&&e.xerr<=0)){var l=PI.tickText(e.xa,e.xa.c2l(e.xerr),"hover").text;void 0!==e.xerrneg?e.xLabel+=" +"+l+" / -"+PI.tickText(e.xa,e.xa.c2l(e.xerrneg),"hover").text:e.xLabel+=" \xb1 "+l,"x"===t&&(e.distance+=1)}if(!isNaN(e.yerr)&&!("log"===e.ya.type&&e.yerr<=0)){var u=PI.tickText(e.ya,e.ya.c2l(e.yerr),"hover").text;void 0!==e.yerrneg?e.yLabel+=" +"+u+" / -"+PI.tickText(e.ya,e.ya.c2l(e.yerrneg),"hover").text:e.yLabel+=" \xb1 "+u,"y"===t&&(e.distance+=1)}var c=e.hoverinfo||e.trace.hoverinfo;return"all"!==c&&(c=Array.isArray(c)?c:c.split("+"),-1===c.indexOf("x")&&(e.xLabel=void 0),-1===c.indexOf("y")&&(e.yLabel=void 0),-1===c.indexOf("z")&&(e.zLabel=void 0),-1===c.indexOf("text")&&(e.text=void 0),-1===c.indexOf("name")&&(e.name=void 0)),e}function Kt(e,t){var n,r,i=t.container,a=t.fullLayout,o=t.event,s=!!e.hLinePoint,l=!!e.vLinePoint;if(i.selectAll(".spikeline").remove(),l||s){var u=jE.combine(a.plot_bgcolor,a.paper_bgcolor);if(s){var c,d,f=e.hLinePoint;n=f&&f.xa,r=f&&f.ya;"cursor"===r.spikesnap?(c=o.pointerX,d=o.pointerY):(c=n._offset+f.x,d=r._offset+f.y);var h,p,m=zC.readability(f.color,u)<1.5?jE.contrast(u):f.color,g=r.spikemode,y=r.spikethickness,v=r.spikecolor||m,_=r._boundingBox,b=(_.left+_.right)/2<c?_.right:_.left;-1===g.indexOf("toaxis")&&-1===g.indexOf("across")||(-1!==g.indexOf("toaxis")&&(h=b,p=c),-1!==g.indexOf("across")&&(h=r._counterSpan[0],p=r._counterSpan[1]),i.insert("line",":first-child").attr({x1:h,x2:p,y1:d,y2:d,"stroke-width":y,stroke:v,"stroke-dasharray":PP.dashStyle(r.spikedash,y)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:h,x2:p,y1:d,y2:d,"stroke-width":y+2,stroke:u}).classed("spikeline",!0).classed("crisp",!0)),-1!==g.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:b+("right"!==r.side?y:-y),cy:d,r:y,fill:v}).classed("spikeline",!0)}if(l){var x,w,k=e.vLinePoint;n=k&&k.xa,r=k&&k.ya;"cursor"===n.spikesnap?(x=o.pointerX,w=o.pointerY):(x=n._offset+k.x,w=r._offset+k.y);var T,M,A=zC.readability(k.color,u)<1.5?jE.contrast(u):k.color,C=n.spikemode,S=n.spikethickness,E=n.spikecolor||A,P=n._boundingBox,I=(P.top+P.bottom)/2<w?P.bottom:P.top;-1===C.indexOf("toaxis")&&-1===C.indexOf("across")||(-1!==C.indexOf("toaxis")&&(T=I,M=w),-1!==C.indexOf("across")&&(T=n._counterSpan[0],M=n._counterSpan[1]),i.insert("line",":first-child").attr({x1:x,x2:x,y1:T,y2:M,"stroke-width":S,stroke:E,"stroke-dasharray":PP.dashStyle(n.spikedash,S)}).classed("spikeline",!0).classed("crisp",!0),i.insert("line",":first-child").attr({x1:x,x2:x,y1:T,y2:M,"stroke-width":S+2,stroke:u}).classed("spikeline",!0).classed("crisp",!0)),-1!==C.indexOf("marker")&&i.insert("circle",":first-child").attr({cx:x,cy:I-("top"!==n.side?S:-S),r:S,fill:E}).classed("spikeline",!0)}}}function Qt(e,t,n){if(!n||n.length!==e._hoverdata.length)return!0;for(var r=n.length-1;r>=0;r--){var i=n[r],a=e._hoverdata[r];if(i.curveNumber!==a.curveNumber||String(i.pointNumber)!==String(a.pointNumber))return!0}return!1}function $t(e,t){return!t||(t.vLinePoint!==e._spikepoints.vLinePoint||t.hLinePoint!==e._spikepoints.hLinePoint)}function en(e){for(var t=!0,n=0;n<e.length;n++){if("h"!==e[n].orientation){t=!1;break}}return t}function tn(e){var t=uE.isD3Selection(e)?e:CC.select(e);t.selectAll("g.hovertext").remove(),t.selectAll(".spikeline").remove()}function nn(e,t,n){return uE.castOption(e,t,"hoverlabel."+n)}function rn(e,t,n){function r(n){return uE.coerceHoverinfo({hoverinfo:n},{_module:e._module},t)}return uE.castOption(e,n,"hoverinfo",r)}function an(e){return e||0===e}function on(e,t,n,r,i,a,o,s){function l(t,n,r){return t.append("text").text(n).attr({class:"bartext bartext-"+u,transform:"","text-anchor":"middle","data-notex":1}).call(PP.font,r).call(sP.convertToTspans,e)}var u,c=n[0].trace,d=c.orientation,f=cn(c,r);if(f&&"none"!==(u=dn(c,r))){var h,p,m,g,y=fn(c,r,e._fullLayout.font),v=hn(c,r,y),_=pn(c,r,y),b=e._fullLayout.barmode,x="stack"===b,w="relative"===b,k=x||w,T=n[r],M=!k||T._outmost,A=Math.abs(a-i)-2*OO,C=Math.abs(s-o)-2*OO;if("outside"===u&&(M||(u="inside")),"auto"===u)if(M){u="inside",h=l(t,f,v),p=PP.bBox(h.node()),m=p.width,g=p.height;var S=m>0&&g>0,E=m<=A&&g<=C,P=m<=C&&g<=A,I="h"===d?A>=m*(C/g):C>=g*(A/m);S&&(E||P||I)?u="inside":(u="outside",h.remove(),h=null)}else u="inside";if(!h&&(h=l(t,f,"outside"===u?_:v),p=PP.bBox(h.node()),m=p.width,g=p.height,m<=0||g<=0))return void h.remove();var L,O;"outside"===u?(O="both"===c.constraintext||"outside"===c.constraintext,L=ln(i,a,o,s,p,d,O)):(O="both"===c.constraintext||"inside"===c.constraintext,L=sn(i,a,o,s,p,d,O)),h.attr("transform",L)}}function sn(e,t,n,r,i,a,o){var s,l,u,c,d,f=i.width,h=i.height,p=(i.left+i.right)/2,m=(i.top+i.bottom)/2,g=Math.abs(t-e),y=Math.abs(r-n);g>2*OO&&y>2*OO?(d=OO,g-=2*d,y-=2*d):d=0;var v,_;return f<=g&&h<=y?(v=!1,_=1):f<=y&&h<=g?(v=!0,_=1):f<h===g<y?(v=!1,_=o?Math.min(g/f,y/h):1):(v=!0,_=o?Math.min(y/f,g/h):1),v&&(v=90),v?(s=_*h,l=_*f):(s=_*f,l=_*h),"h"===a?t<e?(u=t+d+s/2,c=(n+r)/2):(u=t-d-s/2,c=(n+r)/2):r>n?(u=(e+t)/2,c=r-d-l/2):(u=(e+t)/2,c=r+d+l/2),un(p,m,u,c,_,v)}function ln(e,t,n,r,i,a,o){var s,l="h"===a?Math.abs(r-n):Math.abs(t-e);l>2*OO&&(s=OO);var u=1;o&&(u="h"===a?Math.min(1,l/i.height):Math.min(1,l/i.width));var c,d,f,h,p=(i.left+i.right)/2,m=(i.top+i.bottom)/2;return c=u*i.width,d=u*i.height,"h"===a?t<e?(f=t-s-c/2,h=(n+r)/2):(f=t+s+c/2,h=(n+r)/2):r>n?(f=(e+t)/2,h=r+s+d/2):(f=(e+t)/2,h=r-s-d/2),un(p,m,f,h,u,!1)}function un(e,t,n,r,i,a){var o,s;return i<1?o="scale("+i+") ":(i=1,o=""),s=a?"rotate("+a+" "+e+" "+t+") ":"","translate("+(n-i*e)+" "+(r-i*t)+")"+o+s}function cn(e,t){var n=gn(e.text,t);return yn(SO,n)}function dn(e,t){var n=gn(e.textposition,t);return vn(EO,n)}function fn(e,t,n){return mn(PO,e.textfont,t,n)}function hn(e,t,n){return mn(IO,e.insidetextfont,t,n)}function pn(e,t,n){return mn(LO,e.outsidetextfont,t,n)}function mn(e,t,n,r){t=t||{};var i=gn(t.family,n),a=gn(t.size,n),o=gn(t.color,n);return{family:yn(e.family,i,r.family),size:_n(e.size,a,r.size),color:bn(e.color,o,r.color)}}function gn(e,t){var n;return Array.isArray(e)?t<e.length&&(n=e[t]):n=e,n}function yn(e,t,n){if("string"===typeof t){if(t||!e.noBlank)return t}else if("number"===typeof t&&!e.strict)return String(t);return void 0!==n?n:e.dflt}function vn(e,t,n){return e.coerceNumber&&(t=+t),-1!==e.values.indexOf(t)?t:void 0!==n?n:e.dflt}function _n(e,t,n){if(SC(t)){t=+t;var r=e.min,i=e.max;if(!(void 0!==r&&t<r||void 0!==i&&t>i))return t}return void 0!==n?n:e.dflt}function bn(e,t,n){return zC(t).isValid()?t:void 0!==n?n:e.dflt}function xn(e,t,n){this.traces=e,this.separateNegativeValues=t,this.dontMergeOverlappingData=n;for(var r=1/0,i=[],a=0;a<e.length;a++){for(var o=e[a],s=0;s<o.length;s++){var l=o[s];l.p!==NO&&i.push(l.p)}o[0]&&o[0].width1&&(r=Math.min(o[0].width1,r))}this.positions=i;var u=uE.distinctVals(i);this.distinctPositions=u.vals,1===u.vals.length&&r!==1/0?this.minDiff=r:this.minDiff=Math.min(u.minDiff,r),this.binWidth=this.minDiff,this.bins={}}function wn(e,t,n,r){if(r.length){var i,a,o,s,l,u=e._fullLayout.barmode,c="overlay"===u,d="group"===u;if(c)kn(e,t,n,r);else if(d){for(i=[],a=[],o=0;o<r.length;o++)s=r[o],l=s[0].trace,void 0===l.offset?a.push(s):i.push(s);a.length&&Tn(e,t,n,a),i.length&&kn(e,t,n,i)}else{for(i=[],a=[],o=0;o<r.length;o++)s=r[o],l=s[0].trace,void 0===l.base?a.push(s):i.push(s);a.length&&Mn(e,t,n,a),i.length&&kn(e,t,n,i)}Nn(r,t)}}function kn(e,t,n,r){for(var i=e._fullLayout.barnorm,a=!i,o=0;o<r.length;o++){var s=r[o],l=new DO([s],!1,a);An(e,t,l),i?(zn(e,n,l),Rn(e,n,l)):Ln(e,n,l)}}function Tn(e,t,n,r){var i=e._fullLayout,a=i.barnorm,o=!a,s=new DO(r,!1,o);Cn(e,t,s),a?(zn(e,n,s),Rn(e,n,s)):Ln(e,n,s)}function Mn(e,t,n,r){var i=e._fullLayout,a=i.barmode,o="stack"===a,s="relative"===a,l=e._fullLayout.barnorm,u=s,c=!(l||o||s),d=new DO(r,u,c);An(e,t,d),On(e,n,d);for(var f=0;f<r.length;f++)for(var h=r[f],p=0;p<h.length;p++){var m=h[p];if(m.s!==jO){var g=m.b+m.s===d.get(m.p,m.s);g&&(m._outmost=!0)}}l&&Rn(e,n,d)}function An(e,t,n){var r,i,a,o,s=e._fullLayout,l=s.bargap,u=s.bargroupgap,c=n.minDiff,d=n.traces,f=c*(1-l),h=f,p=h*(1-u),m=-p/2;for(r=0;r<d.length;r++)i=d[r],a=i[0],o=a.t,o.barwidth=p,o.poffset=m,o.bargroupwidth=f,o.bardelta=c;n.binWidth=d[0][0].t.barwidth/100,Sn(n),En(e,t,n),Pn(e,t,n)}function Cn(e,t,n){var r,i,a,o,s=e._fullLayout,l=s.bargap,u=s.bargroupgap,c=n.positions,d=n.distinctPositions,f=n.minDiff,h=n.traces,p=c.length!==d.length,m=h.length,g=f*(1-l),y=p?g/m:g,v=y*(1-u);for(r=0;r<m;r++){i=h[r],a=i[0];var _=p?((2*r+1-m)*y-v)/2:-v/2;o=a.t,o.barwidth=v,o.poffset=_,o.bargroupwidth=g,o.bardelta=f}n.binWidth=h[0][0].t.barwidth/100,Sn(n),En(e,t,n),Pn(e,t,n,p)}function Sn(e){var t,n,r,i,a,o,s=e.traces;for(t=0;t<s.length;t++){n=s[t],r=n[0],i=r.trace,o=r.t;var l,u=i.offset,c=o.poffset;if(FO(u)){for(l=u.slice(0,n.length),a=0;a<l.length;a++)SC(l[a])||(l[a]=c);for(a=l.length;a<n.length;a++)l.push(c);o.poffset=l}else void 0!==u&&(o.poffset=u);var d=i.width,f=o.barwidth;if(FO(d)){var h=d.slice(0,n.length);for(a=0;a<h.length;a++)SC(h[a])||(h[a]=f);for(a=h.length;a<n.length;a++)h.push(f);if(o.barwidth=h,void 0===u){for(l=[],a=0;a<n.length;a++)l.push(c+(f-h[a])/2);o.poffset=l}}else void 0!==d&&(o.barwidth=d,void 0===u&&(o.poffset=c+(f-d)/2))}}function En(e,t,n){for(var r=n.traces,i=Dn(t),a=0;a<r.length;a++)for(var o=r[a],s=o[0].t,l=s.poffset,u=Array.isArray(l),c=s.barwidth,d=Array.isArray(c),f=0;f<o.length;f++){var h=o[f],p=h.w=d?c[f]:c;h[i]=h.p+(u?l[f]:l)+p/2}}function Pn(e,t,n,r){var i=n.traces,a=n.distinctPositions,o=a[0],s=n.minDiff,l=s/2;PI.minDtick(t,s,o,r);for(var u=Math.min.apply(Math,a)-l,c=Math.max.apply(Math,a)+l,d=0;d<i.length;d++){var f=i[d],h=f[0],p=h.trace;if(void 0!==p.width||void 0!==p.offset)for(var m=h.t,g=m.poffset,y=m.barwidth,v=Array.isArray(g),_=Array.isArray(y),b=0;b<f.length;b++){var x=f[b],w=v?g[b]:g,k=_?y[b]:y,T=x.p,M=T+w,A=M+k;u=Math.min(u,M),c=Math.max(c,A)}}PI.expand(t,[u,c],{padded:!1})}function In(e,t){SC(e[0])?e[0]=Math.min(e[0],t):e[0]=t,SC(e[1])?e[1]=Math.max(e[1],t):e[1]=t}function Ln(e,t,n){for(var r=n.traces,i=Dn(t),a=[null,null],o=0;o<r.length;o++)for(var s=r[o],l=0;l<s.length;l++){var u=s[l],c=u.b,d=c+u.s;u[i]=d,SC(t.c2l(d))&&In(a,d),u.hasB&&SC(t.c2l(c))&&In(a,c)}PI.expand(t,a,{tozero:!0,padded:!0})}function On(e,t,n){var r,i,a,o,s=e._fullLayout,l=s.barnorm,u=Dn(t),c=n.traces,d=[null,null];for(r=0;r<c.length;r++)for(i=c[r],a=0;a<i.length;a++)if(o=i[a],o.s!==jO){var f=n.put(o.p,o.b+o.s),h=f+o.b+o.s;o.b=f,o[u]=h,l||(SC(t.c2l(h))&&In(d,h),o.hasB&&SC(t.c2l(f))&&In(d,f))}l||PI.expand(t,d,{tozero:!0,padded:!0})}function zn(e,t,n){for(var r=n.traces,i=0;i<r.length;i++)for(var a=r[i],o=0;o<a.length;o++){var s=a[o];s.s!==jO&&n.put(s.p,s.b+s.s)}}function Rn(e,t,n){function r(e){SC(t.c2l(e))&&(e<l-s||e>u+s||!SC(l))&&(d=!0,In(c,e))}for(var i=n.traces,a=Dn(t),o="fraction"===e._fullLayout.barnorm?1:100,s=o/1e9,l=t.l2c(t.c2l(0)),u="stack"===e._fullLayout.barmode?o:l,c=[l,u],d=!1,f=0;f<i.length;f++)for(var h=i[f],p=0;p<h.length;p++){var m=h[p];if(m.s!==jO){var g=Math.abs(o/n.get(m.p,m.s));m.b*=g,m.s*=g;var y=m.b,v=y+m.s;m[a]=v,r(v),m.hasB&&r(y)}}PI.expand(t,c,{tozero:!0,padded:d})}function Dn(e){return e._id.charAt(0)}function Nn(e,t){var n,r,i,a=t._id.charAt(0),o={},s=1/0,l=-1/0;for(n=0;n<e.length;n++)for(i=e[n],r=0;r<i.length;r++){var u=i[r].p;SC(u)&&(s=Math.min(s,u),l=Math.max(l,u))}var c=1e4/(l-s),d=o.round=function(e){return String(Math.round(c*(e-s)))};for(n=0;n<e.length;n++)for(i=e[n],i[0].t.extents=o,r=0;r<i.length;r++){var f=i[r],h=f[a]-f.w/2;if(SC(h)){var p=f[a]+f.w/2,m=d(f.p);o[m]?o[m]=[Math.min(h,o[m][0]),Math.max(p,o[m][1])]:o[m]=[h,p]}}}function Fn(e,t,n,r,i){if(t in e)return n.makeCalcdata(e,t);var a;a=t+"0"in e?e[t+"0"]:"name"in e&&("category"===n.type||SC(e.name)&&-1!==["linear","log"].indexOf(n.type)||uE.isDateTime(e.name)&&"date"===n.type)?e.name:i;var o=n.d2c(a,0,e[t+"calendar"]);return r.map(function(){return o})}function jn(e,t){for(var n=e.length,r=new Array(n+1),i=0;i<n;i++)r[i]=e[i]-t;return r[n]=e[n-1]+t,r}function Bn(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=[];return t}function Un(e,t,n){var r={text:"tx"};for(var i in r)Array.isArray(t[i])&&(e[r[i]]=t[i][n])}function Vn(e,t){if(uE.isArrayOrTypedArray(t.selectedpoints))for(var n=0;n<e.length;n++){for(var r=e[n].pts||[],i={},a=0;a<r.length;a++)i[r[a].i]=a;uE.tagSelected(r,t,i)}}function Hn(e,t){return e.v-t.v}function Wn(e){return e.v}function qn(e,t,n,r){function i(n,r){return uE.coerce(e,t,ez,n,r)}if(Gn(e,t,i,r),!1!==t.visible){i("line.color",(e.marker||{}).color||n),i("line.width"),i("fillcolor",jE.addOpacity(t.line.color,.5)),i("whiskerwidth"),i("boxmean");i("notched",void 0!==e.notchwidth)&&i("notchwidth"),Yn(e,t,i,{prefix:"box"})}}function Gn(e,t,n,r){var i,a=n("y"),o=n("x");if(a&&a.length)i="v",o||n("x0");else{if(!o||!o.length)return void(t.visible=!1);i="h",n("y0")}rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),n("orientation",i)}function Yn(e,t,n,r){var i=r.prefix,a=uE.coerce2(e,t,ez,"marker.outliercolor"),o=n("marker.line.outliercolor"),s=n(i+"points",a||o?"suspectedoutliers":void 0);s?(n("jitter","all"===s?.3:0),n("pointpos","all"===s?-1.5:0),n("marker.symbol"),n("marker.opacity"),n("marker.size"),n("marker.color",t.line.color),n("marker.line.color"),n("marker.line.width"),"suspectedoutliers"===s&&(n("marker.line.outliercolor",t.marker.color),n("marker.line.outlierwidth")),n("selected.marker.color"),n("unselected.marker.color"),n("selected.marker.size"),n("unselected.marker.size"),n("text")):delete t.marker,n("hoveron"),uE.coerceSelectionMarkerOpacity(t,n)}function Xn(e,t,n,r){var i,a=e.cd,o=a[0].trace,s=o.hoveron,l=[];return-1!==s.indexOf("boxes")&&(l=l.concat(Zn(e,t,n,r))),-1!==s.indexOf("points")&&(i=Jn(e,t,n)),"closest"===r?i?[i]:l:i?(l.push(i),l):l}function Zn(e,t,n,r){function i(e){return(d(e)+f(e))/2}var a,o,s,l,u,c,d,f,h,p,m,g=e.cd,y=e.xa,v=e.ya,_=g[0].trace,b=g[0].t,x="violin"===_.type,w=[],k=b.bdPos,T=function(e){return e.pos+b.bPos-c};x&&"both"!==_.side?("positive"===_.side&&(h=function(e){var t=T(e);return kO.inbox(t,t+k,p)}),"negative"===_.side&&(h=function(e){var t=T(e);return kO.inbox(t-k,t,p)})):h=function(e){var t=T(e);return kO.inbox(t-k,t+k,p)};var M;M=x?function(e){return kO.inbox(e.span[0]-u,e.span[1]-u,p)}:function(e){return kO.inbox(e.min-u,e.max-u,p)},"h"===_.orientation?(u=t,c=n,d=M,f=h,a="y",s=v,o="x",l=y):(u=n,c=t,d=h,f=M,a="x",s=y,o="y",l=v);var A=Math.min(1,k/Math.abs(s.r2c(s.range[1])-s.r2c(s.range[0])));p=e.maxHoverDistance-A,m=e.maxSpikeDistance-A;var C=kO.getDistanceFunction(r,d,f,i);if(kO.getClosest(g,C,e),!1===e.index)return[];var S=g[e.index],E=_.line.color,P=(_.marker||{}).color;jE.opacity(E)&&_.line.width?e.color=E:jE.opacity(P)&&_.boxpoints?e.color=P:e.color=_.fillcolor,e[a+"0"]=s.c2p(S.pos+b.bPos-b.bdPos,!0),e[a+"1"]=s.c2p(S.pos+b.bPos+b.bdPos,!0),PI.tickText(s,s.c2l(S.pos),"hover").text,e[a+"LabelVal"]=S.pos;var I=a+"Spike";e.spikeDistance=i(S)*m/p,e[I]=s.c2p(S.pos,!0);var L={},O=["med","min","q1","q3","max"];(_.boxmean||(_.meanline||{}).visible)&&O.push("mean"),(_.boxpoints||_.points)&&O.push("lf","uf");for(var z=0;z<O.length;z++){var R=O[z];if(R in S&&!(S[R]in L)){L[S[R]]=!0;var D=S[R],N=l.c2p(D,!0),F=uE.extendFlat({},e);F[o+"0"]=F[o+"1"]=N,F[o+"LabelVal"]=D,F[o+"Label"]=(b.labels?b.labels[R]+" ":"")+PI.hoverLabelText(l,D),"mean"===R&&"sd"in S&&"sd"===_.boxmean&&(F[o+"err"]=S.sd),e.name="",e.spikeDistance=void 0,e[I]=void 0,w.push(F)}}return w}function Jn(e,t,n){for(var r,i,a,o=e.cd,s=e.xa,l=e.ya,u=o[0].trace,c=s.c2p(t),d=l.c2p(n),f=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(s.c2p(e.x)-c)-t,1-3/t)},h=function(e){var t=Math.max(3,e.mrc||0);return Math.max(Math.abs(l.c2p(e.y)-d)-t,1-3/t)},p=kO.quadrature(f,h),m=!1,g=0;g<o.length;g++){i=o[g];for(var y=0;y<(i.pts||[]).length;y++){a=i.pts[y];var v=p(a);v<=e.distance&&(e.distance=v,m=[g,y])}}if(!m)return!1;i=o[m[0]],a=i.pts[m[1]];var _=s.c2p(a.x,!0),b=l.c2p(a.y,!0),x=a.mrc||1;r=uE.extendFlat({},e,{index:a.i,color:(u.marker||{}).color,name:u.name,x0:_-x,x1:_+x,xLabelVal:a.x,y0:b-x,y1:b+x,yLabelVal:a.y,spikeDistance:e.distance});var w="h"===u.orientation?"y":"x",k="h"===u.orientation?l:s;return r[w+"Spike"]=k.c2p(i.pos,!0),TO(a,u,r),r}function Kn(e,t,n,r,i){for(var a,o=0;o<n.length;o++)if(n[o].type===i){a=!0;break}a&&(r(i+"mode"),r(i+"gap"),r(i+"groupgap"))}function Qn(e,t,n){function r(n,r){return uE.coerce(e,t,az,n,r)}Kn(e,t,n,r,"box")}function $n(e,t,n){var r=e._fullLayout,i=t.xaxis,a=t.yaxis;t.plot.select(".boxlayer").selectAll("g.trace.boxes").data(n).enter().append("g").attr("class","trace boxes").each(function(e){var t=e[0],n=t.t,o=t.trace,s=t.node3=CC.select(this),l=r._numBoxes,u="group"===r.boxmode&&l>1,c=n.dPos*(1-r.boxgap)*(1-r.boxgroupgap)/(u?l:1),d=u?2*n.dPos*((n.num+.5)/l-.5)*(1-r.boxgap):0,f=c*o.whiskerwidth;if(!0!==o.visible||n.empty)return void CC.select(this).remove();var h,p;"h"===o.orientation?(h=a,p=i):(h=i,p=a),n.bPos=d,n.bdPos=c,n.wdPos=f,er(s,{pos:h,val:p},o,n),o.boxpoints&&tr(s,{x:i,y:a},o,n),o.boxmean&&nr(s,{pos:h,val:p},o,n)})}function er(e,t,n,r){var i,a,o=t.pos,s=t.val,l=r.bPos,u=r.wdPos||0,c=r.bPosPxOffset||0,d=n.whiskerwidth||0,f=n.notched||!1,h=f?1-2*n.notchwidth:1;Array.isArray(r.bdPos)?(i=r.bdPos[0],a=r.bdPos[1]):(i=r.bdPos,a=r.bdPos),e.selectAll("path.box").data(uE.identity).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box").each(function(e){var t=e.pos,r=o.c2p(t+l,!0)+c,p=o.c2p(t+l-i,!0)+c,m=o.c2p(t+l+a,!0)+c,g=o.c2p(t+l-u,!0)+c,y=o.c2p(t+l+u,!0)+c,v=o.c2p(t+l-i*h,!0)+c,_=o.c2p(t+l+a*h,!0)+c,b=s.c2p(e.q1,!0),x=s.c2p(e.q3,!0),w=uE.constrain(s.c2p(e.med,!0),Math.min(b,x)+1,Math.max(b,x)-1),k=s.c2p(!1===n.boxpoints?e.min:e.lf,!0),T=s.c2p(!1===n.boxpoints?e.max:e.uf,!0),M=s.c2p(e.ln,!0),A=s.c2p(e.un,!0);"h"===n.orientation?CC.select(this).attr("d","M"+w+","+v+"V"+_+"M"+b+","+p+"V"+m+(f?"H"+M+"L"+w+","+_+"L"+A+","+m:"")+"H"+x+"V"+p+(f?"H"+A+"L"+w+","+v+"L"+M+","+p:"")+"ZM"+b+","+r+"H"+k+"M"+x+","+r+"H"+T+(0===d?"":"M"+k+","+g+"V"+y+"M"+T+","+g+"V"+y)):CC.select(this).attr("d","M"+v+","+w+"H"+_+"M"+p+","+b+"H"+m+(f?"V"+M+"L"+_+","+w+"L"+m+","+A:"")+"V"+x+"H"+p+(f?"V"+A+"L"+v+","+w+"L"+p+","+M:"")+"ZM"+r+","+b+"V"+k+"M"+r+","+x+"V"+T+(0===d?"":"M"+g+","+k+"H"+y+"M"+g+","+T+"H"+y))})}function tr(e,t,n,r){var i=t.x,a=t.y,o=r.bdPos,s=r.bPos,l=n.boxpoints||n.points;uE.seedPseudoRandom(),e.selectAll("g.points").data(function(e){return e.forEach(function(e){e.t=r,e.trace=n}),e}).enter().append("g").attr("class","points").selectAll("path").data(function(e){var t,r,i="all"===l?e.pts:e.pts.filter(function(t){return t.v<e.lf||t.v>e.uf}),a=Math.max((e.max-e.min)/10,e.q3-e.q1),u=1e-9*a,c=a*lz,d=[],f=0;if(n.jitter){if(0===a)for(f=1,d=new Array(i.length),t=0;t<i.length;t++)d[t]=1;else for(t=0;t<i.length;t++){var h=Math.max(0,t-sz),p=i[h].v,m=Math.min(i.length-1,t+sz),g=i[m].v;"all"!==l&&(i[t].v<e.lf?g=Math.min(g,e.lf):p=Math.max(p,e.uf));var y=Math.sqrt(c*(m-h)/(g-p+u))||0;y=uE.constrain(Math.abs(y),0,1),d.push(y),f=Math.max(y,f)}r=2*n.jitter/f}for(t=0;t<i.length;t++){var v=i[t],_=v.v,b=n.jitter?r*d[t]*(uE.pseudoRandom()-.5):0,x=e.pos+s+o*(n.pointpos+b);"h"===n.orientation?(v.y=x,v.x=_):(v.x=x,v.y=_),"suspectedoutliers"===l&&_<e.uo&&_>e.lo&&(v.so=!0)}return i}).enter().append("path").classed("point",!0).call(PP.translatePoints,i,a)}function nr(e,t,n,r){var i,a,o=t.pos,s=t.val,l=r.bPos,u=r.bPosPxOffset||0;Array.isArray(r.bdPos)?(i=r.bdPos[0],a=r.bdPos[1]):(i=r.bdPos,a=r.bdPos),e.selectAll("path.mean").data(uE.identity).enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}).each(function(e){var t=o.c2p(e.pos+l,!0)+u,r=o.c2p(e.pos+l-i,!0)+u,c=o.c2p(e.pos+l+a,!0)+u,d=s.c2p(e.mean,!0),f=s.c2p(e.mean-e.sd,!0),h=s.c2p(e.mean+e.sd,!0);"h"===n.orientation?CC.select(this).attr("d","M"+d+","+r+"V"+c+("sd"===n.boxmean?"m0,0L"+f+","+t+"L"+d+","+r+"L"+h+","+t+"Z":"")):CC.select(this).attr("d","M"+r+","+d+"H"+c+("sd"===n.boxmean?"m0,0L"+t+","+f+"L"+r+","+d+"L"+t+","+h+"Z":""))})}function rr(e,t){for(var n=e.calcdata,r=t.xaxis,i=t.yaxis,a=0;a<dz.length;a++){for(var o=dz[a],s="h"===o?i:r,l=[],u=0,c=0,d=0;d<n.length;d++){var f=n[d],h=f[0].t,p=f[0].trace;!0!==p.visible||"box"!==p.type||h.empty||p.orientation!==o||p.xaxis!==r._id||p.yaxis!==i._id||(l.push(d),!1!==p.boxpoints&&(u=Math.max(u,p.jitter-p.pointpos-1),c=Math.max(c,p.jitter+p.pointpos-1)))}ir("box",e,l,s,[u,c])}}function ir(e,t,n,r,i){var a,o,s,l=t.calcdata,u=t._fullLayout,c=[],d="violin"===e?"_numViolins":"_numBoxes";for(a=0;a<n.length;a++)for(s=l[n[a]],o=0;o<s.length;o++)c.push(s[o].pos);if(c.length){var f=uE.distinctVals(c),h=f.minDiff/2;for(c.length===f.vals.length&&(u[d]=1),PI.minDtick(r,f.minDiff,f.vals[0],!0),a=0;a<n.length;a++)s=l[n[a]],s[0].t.dPos=h;var p=u[e+"gap"],m=u[e+"groupgap"],g=(1-p)*(1-m)*h/u[d];PI.expand(r,f.vals,{vpadminus:h+i[0]*g,vpadplus:h+i[1]*g})}}function ar(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function or(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function sr(e,t,n,r){if(this._calendar=e,this._year=t,this._month=n,this._day=r,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(wz.local.invalidDate||wz.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function lr(e,t){return e=""+e,"000000".substring(0,t-e.length)+e}function ur(){this.shortYearCutoff="+10"}function cr(e){this.local=this.regionalOptions[e]||this.regionalOptions[""]}function dr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function fr(e,t,n,r){var i,a;if("object"===typeof e)i=e,a=t||{};else{if(!("number"===typeof e&&e>=1888&&e<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"===typeof t&&t>=1&&t<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"===typeof n&&n>=1&&n<=31))throw new Error("Solar day outside range 1 - 31");i={year:e,month:t,day:n},a=r||{}}var o=Ez[i.year-Ez[0]],s=i.year<<9|i.month<<5|i.day;a.year=s>=o?i.year:i.year-1,o=Ez[a.year-Ez[0]];var l,u=o>>9&4095,c=o>>5&15,d=31&o,f=new Date(u,c-1,d),h=new Date(i.year,i.month-1,i.day);l=Math.round((h-f)/864e5);var p,m=Sz[a.year-Sz[0]];for(p=0;p<13;p++){var g=m&1<<12-p?30:29;if(l<g)break;l-=g}var y=m>>13;return!y||p<y?(a.isIntercalary=!1,a.month=1+p):p===y?(a.isIntercalary=!0,a.month=p):(a.isIntercalary=!1,a.month=p),a.day=1+l,a}function hr(e,t,n,r,i){var a,o;if("object"===typeof e)o=e,a=t||{};else{if(!("number"===typeof e&&e>=1888&&e<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"===typeof t&&t>=1&&t<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"===typeof n&&n>=1&&n<=30))throw new Error("Lunar day outside range 1 - 30");var s;"object"===typeof r?(s=!1,a=r):(s=!!r,a=i||{}),o={year:e,month:t,day:n,isIntercalary:s}}var l;l=o.day-1;var u,c=Sz[o.year-Sz[0]],d=c>>13;u=d?o.month>d?o.month:o.isIntercalary?o.month:o.month-1:o.month-1;for(var f=0;f<u;f++){l+=c&1<<12-f?30:29}var h=Ez[o.year-Ez[0]],p=h>>9&4095,m=h>>5&15,g=31&h,y=new Date(p,m-1,g+l);return a.year=y.getFullYear(),a.month=1+y.getMonth(),a.day=y.getDate(),a}function pr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function mr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function gr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function yr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function vr(e,t){return e-t*Math.floor(e/t)}function _r(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function br(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function xr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function wr(e,t){return e-t*Math.floor(e/t)}function kr(e,t){return wr(e-1,t)+1}function Tr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function Mr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function Ar(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function Cr(e,t){return e-t*Math.floor(e/t)}function Sr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function Er(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function Pr(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function Ir(e,t,n){for(var r,i,a,o,s,l=Math.floor((t+.05)/Nz)+Dz,u=Lr(n).fromJD(l),c=0;-1!==(c=e.indexOf("%",c));)r=e.charAt(c+1),"0"===r||"-"===r||"_"===r?(a=3,i=e.charAt(c+2),"_"===r&&(r="-")):(i=r,r="0",a=2),o=qz[i],o?(s=o===Wz?Wz:u.formatDate(o[r]),e=e.substr(0,c)+s+e.substr(c+a),c+=s.length):c+=a;return e}function Lr(e){var t=Gz[e];return t||(t=Gz[e]=Rz.instance(e))}function Or(e){return uE.extendFlat({},Fz,{description:e})}function zr(e){return"Sets the calendar system to use with `"+e+"` date data."}function Rr(e){return{name:{valType:"string",editType:"style"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},line:{color:$z({},tR.color,{dflt:e}),width:tR.width,dash:eR,editType:"style"},editType:"style"}}function Dr(e){return{name:nR.increasing.name,showlegend:nR.increasing.showlegend,line:{color:rR({},ez.line.color,{dflt:e}),width:ez.line.width,editType:"style"},fillcolor:ez.fillcolor,editType:"style"}}function Nr(e){function t(e,t){return e===t?t>a?i=!0:t<a&&(i=!1):i=e<t,a=t,i}function n(e,n){return SC(e)&&SC(n)&&t(+e,+n)}function r(e,n){return SC(e)&&SC(n)&&!t(+e,+n)}var i=!0,a=null;return"increasing"===e?n:r}function Fr(e,t,n,r){aR(e,t,n,r),n(r+".line.color"),n(r+".line.width",t.line.width),n(r+".fillcolor")}function jr(e,t,n){var r={type:"box",boxpoints:!1,visible:e.visible,hoverinfo:e.hoverinfo,opacity:e.opacity,xaxis:e.xaxis,yaxis:e.yaxis,transforms:oR.makeTransform(e,t,n)},i=e[n];return i&&uE.extendFlat(r,{x:e.x||[0],xcalendar:e.xcalendar,y:[].concat(e.low).concat(e.high),whiskerwidth:e.whiskerwidth,text:e.text,name:i.name,showlegend:i.showlegend,line:i.line,fillcolor:i.fillcolor}),r}function Br(e,t){if(!gR(e)||t>=10)return null;for(var n=1/0,r=-1/0,i=e.length,a=0;a<i;a++){var o=e[a];if(gR(o)){var s=Br(o,t+1);s&&(n=Math.min(s[0],n),r=Math.max(s[1],r))}else n=Math.min(o,n),r=Math.max(o,r)}return[n,r]}function Ur(e,t){if("-"===e.type){var n=e._id,r=n.charAt(0),i=r+"calendar",a=e[i];e.type=wI(t,a)}}function Vr(e,t,n,r){["aaxis","baxis"].forEach(function(i){var a=i.charAt(0),o=e[i]||{},s={},l={tickfont:"x",id:a+"axis",letter:a,font:t.font,name:i,data:e[a],calendar:t.calendar,dfltColor:r,bgColor:n.paper_bgcolor,fullLayout:n};IR(o,s,l),s._categories=s._categories||[],t[i]=s,e[i]||"-"===o.type||(e[i]={type:o.type})})}function Hr(e,t,n){var r=-.5*n[0]+1.5*t[0],i=-.5*n[1]+1.5*t[1];return[(2*r+e[0])/3,(2*i+e[1])/3]}function Wr(e,t,n){var r=e.selectAll(t+"."+n).data([0]);return r.enter().append(t).classed(n,!0),r}function qr(e,t,n){var r=n[0],i=n[0].trace,a=t.xaxis,o=t.yaxis,s=i.aaxis,l=i.baxis,u=e._fullLayout,c=t.plot.selectAll(".carpetlayer"),d=u._clips,f=Wr(c,"g","carpet"+i.uid).classed("trace",!0),h=Wr(f,"g","minorlayer"),p=Wr(f,"g","majorlayer"),m=Wr(f,"g","boundarylayer"),g=Wr(f,"g","labellayer");f.style("opacity",i.opacity),Yr(a,o,p,s,"a",s._gridlines),Yr(a,o,p,l,"b",l._gridlines),Yr(a,o,h,s,"a",s._minorgridlines),Yr(a,o,h,l,"b",l._minorgridlines),Yr(a,o,m,s,"a-boundary",s._boundarylines),Yr(a,o,m,l,"b-boundary",l._boundarylines),Zr(e,g,i,r,a,o,Xr(e,a,o,i,r,g,s._labels,"a-label"),Xr(e,a,o,i,r,g,l._labels,"b-label")),Gr(i,r,d,a,o)}function Gr(e,t,n,r,i){var a,o,s,l,u=n.select("#"+e._clipPathId);u.size()||(u=n.append("clipPath").classed("carpetclip",!0));var c=Wr(u,"path","carpetboundary"),d=t.clipsegments,f=[];for(l=0;l<d.length;l++)a=d[l],o=JR([],a.x,r.c2p),s=JR([],a.y,i.c2p),f.push(XR(o,s,a.bicubic));var h="M"+f.join("L")+"Z";u.attr("id",e._clipPathId),c.attr("d",h)}function Yr(e,t,n,r,i,a){var o="const-"+i+"-lines",s=n.selectAll("."+o).data(a);s.enter().append("path").classed(o,!0).style("vector-effect","non-scaling-stroke"),s.each(function(n){var r=n,i=r.x,a=r.y,o=JR([],i,e.c2p),s=JR([],a,t.c2p),l="M"+XR(o,s,r.smoothing);CC.select(this).attr("d",l).style("stroke-width",r.width).style("stroke",r.color).style("fill","none")}),s.exit().remove()}function Xr(e,t,n,r,i,a,o,s){var l=a.selectAll("text."+s).data(o);l.enter().append("text").classed(s,!0);var u=0,c={};return l.each(function(i,a){var o;if("auto"===i.axis.tickangle)o=KR(r,t,n,i.xy,i.dxy);else{var s=(i.axis.tickangle+180)*Math.PI/180;o=KR(r,t,n,i.xy,[Math.cos(s),Math.sin(s)])}a||(c={angle:o.angle,flip:o.flip});var l=(i.endAnchor?-1:1)*o.flip,d=CC.select(this).attr({"text-anchor":l>0?"start":"end","data-notex":1}).call(PP.font,i.font).text(i.text).call(sP.convertToTspans,e),f=PP.bBox(this);d.attr("transform","translate("+o.p[0]+","+o.p[1]+") rotate("+o.angle+")translate("+i.axis.labelpadding*l+","+.3*f.height+")"),u=Math.max(u,f.width+i.axis.labelpadding)}),l.exit().remove(),c.maxExtent=u,c}function Zr(e,t,n,r,i,a,o,s){var l,u,c,d;l=.5*(n.a[0]+n.a[n.a.length-1]),u=n.b[0],c=n.ab2xy(l,u,!0),d=n.dxyda_rough(l,u),void 0===o.angle&&uE.extendFlat(o,KR(n,i,a,c,n.dxydb_rough(l,u))),Jr(e,t,n,r,c,d,n.aaxis,i,a,o,"a-title"),l=n.a[0],u=.5*(n.b[0]+n.b[n.b.length-1]),c=n.ab2xy(l,u,!0),d=n.dxydb_rough(l,u),void 0===s.angle&&uE.extendFlat(s,KR(n,i,a,c,n.dxyda_rough(l,u))),Jr(e,t,n,r,c,d,n.baxis,i,a,s,"b-title")}function Jr(e,t,n,r,i,a,o,s,l,u,c){var d=[];o.title&&d.push(o.title);var f=t.selectAll("text."+c).data(d),h=u.maxExtent;f.enter().append("text").classed(c,!0),f.each(function(){var t=KR(n,s,l,i,a);-1===["start","both"].indexOf(o.showticklabels)&&(h=0);var r=o.titlefont.size;h+=r+o.titleoffset;var c=u.angle+(u.flip<0?180:0),d=(c-t.angle+450)%360,f=d>90&&d<270,p=CC.select(this);p.text(o.title||"").call(sP.convertToTspans,e),f&&(h=(-sP.lineCount(p)+eD)*$R*r-h),p.attr("transform","translate("+t.p[0]+","+t.p[1]+") rotate("+t.angle+") translate(0,"+h+")").classed("user-select-none",!0).attr("text-anchor","middle").call(PP.font,o.titlefont)}),f.exit().remove()}function Kr(){function e(e,n){return t.list.push({type:e,data:n?JSON.parse(JSON.stringify(n)):void 0}),t}var t,n=0,r=!1;return t={list:[],segmentId:function(){return n++},checkIntersection:function(t,n){return e("check",{seg1:t,seg2:n})},segmentChop:function(t,n){return e("div_seg",{seg:t,pt:n}),e("chop",{seg:t,pt:n})},statusRemove:function(t){return e("pop_seg",{seg:t})},segmentUpdate:function(t){return e("seg_update",{seg:t})},segmentNew:function(t,n){return e("new_seg",{seg:t,primary:n})},segmentRemove:function(t){return e("rem_seg",{seg:t})},tempStatus:function(t,n,r){return e("temp_status",{seg:t,above:n,below:r})},rewind:function(t){return e("rewind",{seg:t})},status:function(t,n,r){return e("status",{seg:t,above:n,below:r})},vert:function(n){return n===r?t:(r=n,e("vert",{x:n}))},log:function(t){return"string"!==typeof t&&(t=JSON.stringify(t,!1,"  ")),e("log",{txt:t})},reset:function(){return e("reset")},selected:function(t){return e("selected",{segs:t})},chainStart:function(t){return e("chain_start",{seg:t})},chainRemoveHead:function(t,n){return e("chain_rem_head",{index:t,pt:n})},chainRemoveTail:function(t,n){return e("chain_rem_tail",{index:t,pt:n})},chainNew:function(t,n){return e("chain_new",{pt1:t,pt2:n})},chainMatch:function(t){return e("chain_match",{index:t})},chainClose:function(t){return e("chain_close",{index:t})},chainAddHead:function(t,n){return e("chain_add_head",{index:t,pt:n})},chainAddTail:function(t,n){return e("chain_add_tail",{index:t,pt:n})},chainConnect:function(t,n){return e("chain_con",{index1:t,index2:n})},chainReverse:function(t){return e("chain_rev",{index:t})},chainJoin:function(t,n){return e("chain_join",{index1:t,index2:n})},done:function(){return e("done")}}}function Qr(e){"number"!==typeof e&&(e=1e-10);var t={epsilon:function(t){return"number"===typeof t&&(e=t),e},pointAboveOrOnLine:function(t,n,r){var i=n[0],a=n[1],o=r[0],s=r[1],l=t[0];return(o-i)*(t[1]-a)-(s-a)*(l-i)>=-e},pointBetween:function(t,n,r){var i=t[1]-n[1],a=r[0]-n[0],o=t[0]-n[0],s=r[1]-n[1],l=o*a+i*s;return!(l<e)&&!(l-(a*a+s*s)>-e)},pointsSameX:function(t,n){return Math.abs(t[0]-n[0])<e},pointsSameY:function(t,n){return Math.abs(t[1]-n[1])<e},pointsSame:function(e,n){return t.pointsSameX(e,n)&&t.pointsSameY(e,n)},pointsCompare:function(e,n){return t.pointsSameX(e,n)?t.pointsSameY(e,n)?0:e[1]<n[1]?-1:1:e[0]<n[0]?-1:1},pointsCollinear:function(t,n,r){var i=t[0]-n[0],a=t[1]-n[1],o=n[0]-r[0],s=n[1]-r[1];return Math.abs(i*s-o*a)<e},linesIntersect:function(t,n,r,i){var a=n[0]-t[0],o=n[1]-t[1],s=i[0]-r[0],l=i[1]-r[1],u=a*l-o*s;if(Math.abs(u)<e)return!1;var c=t[0]-r[0],d=t[1]-r[1],f=(s*d-l*c)/u,h=(a*d-o*c)/u,p={alongA:0,alongB:0,pt:[t[0]+f*a,t[1]+f*o]};return p.alongA=f<=-e?-2:f<e?-1:f-1<=-e?0:f-1<e?1:2,p.alongB=h<=-e?-2:h<e?-1:h-1<=-e?0:h-1<e?1:2,p},pointInsideRegion:function(t,n){for(var r=t[0],i=t[1],a=n[n.length-1][0],o=n[n.length-1][1],s=!1,l=0;l<n.length;l++){var u=n[l][0],c=n[l][1];c-i>e!=o-i>e&&(a-u)*(i-c)/(o-c)+u-r>e&&(s=!s),a=u,o=c}return s}};return t}function $r(e,t,n){function r(e,t){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:null,below:null},otherFill:null}}function i(e,t,r){return{id:n?n.segmentId():-1,start:e,end:t,myFill:{above:r.myFill.above,below:r.myFill.below},otherFill:null}}function a(e,n,r,i,a,o){var s=t.pointsCompare(n,a);return 0!==s?s:t.pointsSame(r,o)?0:e!==i?e?1:-1:t.pointAboveOrOnLine(r,i?a:o,i?o:a)?1:-1}function o(e,t){h.insertBefore(e,function(n){return a(e.isStart,e.pt,t,n.isStart,n.pt,n.other.pt)<0})}function s(e,t){var n=gD.node({isStart:!0,pt:e.start,seg:e,primary:t,other:null,status:null});return o(n,e.end),n}function l(e,t,n){var r=gD.node({isStart:!1,pt:t.end,seg:t,primary:n,other:e,status:null});e.other=r,o(r,e.pt)}function u(e,t){var n=s(e,t);return l(n,e,t),n}function c(e,t){n&&n.segmentChop(e.seg,t),e.other.remove(),e.seg.end=t,e.other.pt=t,o(e.other,e.pt)}function d(e,t){var n=i(t,e.seg.end,e.seg);return c(e,t),u(n,e.primary)}function f(r,i){function a(e,n){var r=e.seg.start,i=e.seg.end,a=n.seg.start,o=n.seg.end;return t.pointsCollinear(r,a,o)?t.pointsCollinear(i,a,o)?1:t.pointAboveOrOnLine(i,a,o)?1:-1:t.pointAboveOrOnLine(r,a,o)?1:-1}function o(e,r){var i=e.seg,a=r.seg,o=i.start,s=i.end,l=a.start,u=a.end;n&&n.checkIntersection(i,a);var c=t.linesIntersect(o,s,l,u);if(!1===c){if(!t.pointsCollinear(o,s,l))return!1;if(t.pointsSame(o,u)||t.pointsSame(s,l))return!1;var f=t.pointsSame(o,l),h=t.pointsSame(s,u);if(f&&h)return r;var p=!f&&t.pointBetween(o,l,u),m=!h&&t.pointBetween(s,l,u);if(f)return m?d(r,s):d(e,u),r;p&&(h||(m?d(r,s):d(e,u)),d(r,o))}else 0===c.alongA&&(-1===c.alongB?d(e,l):0===c.alongB?d(e,c.pt):1===c.alongB&&d(e,u)),0===c.alongB&&(-1===c.alongA?d(r,o):0===c.alongA?d(r,c.pt):1===c.alongA&&d(r,s));return!1}for(var s=gD.create(),l=[];!h.isEmpty();){var u=h.getHead();if(n&&n.vert(u.pt[0]),u.isStart){n&&n.segmentNew(u.seg,u.primary);var c=function(e){return s.findTransition(function(t){return a(e,t.ev)>0})}(u),f=c.before?c.before.ev:null,p=c.after?c.after.ev:null;n&&n.tempStatus(u.seg,!!f&&f.seg,!!p&&p.seg);var m=function(){if(f){var e=o(u,f);if(e)return e}return!!p&&o(u,p)}();if(m){if(e){var g;g=null===u.seg.myFill.below||u.seg.myFill.above!==u.seg.myFill.below,g&&(m.seg.myFill.above=!m.seg.myFill.above)}else m.seg.otherFill=u.seg.myFill;n&&n.segmentUpdate(m.seg),u.other.remove(),u.remove()}if(h.getHead()!==u){n&&n.rewind(u.seg);continue}if(e){var g;g=null===u.seg.myFill.below||u.seg.myFill.above!==u.seg.myFill.below,u.seg.myFill.below=p?p.seg.myFill.above:r,u.seg.myFill.above=g?!u.seg.myFill.below:u.seg.myFill.below}else if(null===u.seg.otherFill){var y;y=p?u.primary===p.primary?p.seg.otherFill.above:p.seg.myFill.above:u.primary?i:r,u.seg.otherFill={above:y,below:y}}n&&n.status(u.seg,!!f&&f.seg,!!p&&p.seg),u.other.status=c.insert(gD.node({ev:u}))}else{var v=u.status;if(null===v)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(s.exists(v.prev)&&s.exists(v.next)&&o(v.prev.ev,v.next.ev),n&&n.statusRemove(v.ev.seg),v.remove(),!u.primary){var _=u.seg.myFill;u.seg.myFill=u.seg.otherFill,u.seg.otherFill=_}l.push(u.seg)}h.getHead().remove()}return n&&n.done(),l}var h=gD.create();return e?{addRegion:function(e){for(var n,i=e[e.length-1],a=0;a<e.length;a++){n=i,i=e[a];var o=t.pointsCompare(n,i);0!==o&&u(r(o<0?n:i,o<0?i:n),!0)}},calculate:function(e){return f(e,!1)}}:{calculate:function(e,t,n,r){return e.forEach(function(e){u(i(e.start,e.end,e),!0)}),n.forEach(function(e){u(i(e.start,e.end,e),!1)}),f(t,r)}}}function ei(e,t,n){var r=[],i=[];return e.forEach(function(e){function a(e,t,n){return f.index=e,f.matches_head=t,f.matches_pt1=n,f===c?(f=d,!1):(f=null,!0)}function o(e){n&&n.chainReverse(e),r[e].reverse()}function s(e,i){var a=r[e],o=r[i],s=a[a.length-1],l=a[a.length-2],u=o[0],c=o[1];t.pointsCollinear(l,s,u)&&(n&&n.chainRemoveTail(e,s),a.pop(),s=l),t.pointsCollinear(s,u,c)&&(n&&n.chainRemoveHead(i,u),o.shift()),n&&n.chainJoin(e,i),r[e]=a.concat(o),r.splice(i,1)}var l=e.start,u=e.end;if(t.pointsSame(l,u))return void console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");n&&n.chainStart(e);for(var c={index:0,matches_head:!1,matches_pt1:!1},d={index:0,matches_head:!1,matches_pt1:!1},f=c,h=0;h<r.length;h++){var p=r[h],m=p[0],g=(p[1],p[p.length-1]);p[p.length-2];if(t.pointsSame(m,l)){if(a(h,!0,!0))break}else if(t.pointsSame(m,u)){if(a(h,!0,!1))break}else if(t.pointsSame(g,l)){if(a(h,!1,!0))break}else if(t.pointsSame(g,u)&&a(h,!1,!1))break}if(f===c)return r.push([l,u]),void(n&&n.chainNew(l,u));if(f===d){n&&n.chainMatch(c.index);var y=c.index,v=c.matches_pt1?u:l,_=c.matches_head,p=r[y],b=_?p[0]:p[p.length-1],x=_?p[1]:p[p.length-2],w=_?p[p.length-1]:p[0],k=_?p[p.length-2]:p[1];return t.pointsCollinear(x,b,v)&&(_?(n&&n.chainRemoveHead(c.index,v),p.shift()):(n&&n.chainRemoveTail(c.index,v),p.pop()),b=x),t.pointsSame(w,v)?(r.splice(y,1),t.pointsCollinear(k,w,b)&&(_?(n&&n.chainRemoveTail(c.index,b),p.pop()):(n&&n.chainRemoveHead(c.index,b),p.shift())),n&&n.chainClose(c.index),void i.push(p)):void(_?(n&&n.chainAddHead(c.index,v),p.unshift(v)):(n&&n.chainAddTail(c.index,v),p.push(v)))}var T=c.index,M=d.index;n&&n.chainConnect(T,M);var A=r[T].length<r[M].length;c.matches_head?d.matches_head?A?(o(T),s(T,M)):(o(M),s(M,T)):s(M,T):d.matches_head?s(T,M):A?(o(T),s(M,T)):(o(M),s(T,M))}),i}function ti(e,t,n){var r=[];return e.forEach(function(e){var i=(e.myFill.above?8:0)+(e.myFill.below?4:0)+(e.otherFill&&e.otherFill.above?2:0)+(e.otherFill&&e.otherFill.below?1:0);0!==t[i]&&r.push({id:n?n.segmentId():-1,start:e.start,end:e.end,myFill:{above:1===t[i],below:2===t[i]},otherFill:null})}),n&&n.selected(r),r}function ni(e,t,n){var r=cD.segments(e),i=cD.segments(t),a=cD.combine(r,i),o=n(a);return cD.polygon(o)}function ri(e){return e._id}function ii(e,t,n){var r,i,a;if(n){var o=n.points||[];for(r=0;r<t.length;r++)a=t[r].cd[0].trace,a.selectedpoints=[],a._input.selectedpoints=[];for(r=0;r<o.length;r++){var s=o[r],l=s.data,u=s.fullData;s.pointIndices?([].push.apply(l.selectedpoints,s.pointIndices),[].push.apply(u.selectedpoints,s.pointIndices)):(l.selectedpoints.push(s.pointIndex),u.selectedpoints.push(s.pointIndex))}}else for(r=0;r<t.length;r++)a=t[r].cd[0].trace,delete a.selectedpoints,delete a._input.selectedpoints,t[r].cd[0].t&&t[r].cd[0].t.scene&&t[r].cd[0].t.scene.clearSelect();for(r=0;r<t.length;r++)i=t[r],i.style&&i.style(e,i.cd)}function ai(e,t,n){var r;return n?(r=kD.difference({regions:e,inverted:!1},{regions:[t],inverted:!1}),r.regions):(r=kD.union({regions:e,inverted:!1},{regions:[t],inverted:!1}),r.regions)}function oi(e,t){if(Array.isArray(e))for(var n=t.cd,r=t.cd[0].trace,i=0;i<e.length;i++)e[i]=ED(e[i],r,n);return e}function si(e){function t(e,t){return{type:"Feature",id:e.id,properties:e.properties,geometry:n(e.geometry,t)}}function n(t,r){if(!t)return null;if("GeometryCollection"===t.type)return{type:"GeometryCollection",geometries:object.geometries.map(function(e){return n(e,r)})};if(!C.hasOwnProperty(t.type))return null;var i=C[t.type];return e.geo.stream(t,r(i)),i.result()}function r(){}function i(e){if((t=e.length)<4)return!1;for(var t,n=0,r=e[t-1][1]*e[0][0]-e[t-1][0]*e[0][1];++n<t;)r+=e[n-1][1]*e[n][0]-e[n-1][0]*e[n][1];return r<=0}function a(e,t){for(var n=t[0],r=t[1],i=!1,a=0,o=e.length,s=o-1;a<o;s=a++){var l=e[a],u=l[0],c=l[1],d=e[s],f=d[0],h=d[1];c>r^h>r&&n<(f-u)*(r-c)/(h-c)+u&&(i=!i)}return i}function o(e){return e?e/Math.sin(e):1}function s(e){return e>1?I:e<-1?-I:Math.asin(e)}function l(e){return e>1?0:e<-1?P:Math.acos(e)}function u(e,t){var n=(2+I)*Math.sin(t);t/=2;for(var r=0,i=1/0;r<10&&Math.abs(i)>S;r++){var a=Math.cos(t);t-=i=(t+Math.sin(t)*(a+2)-n)/(2*a*(1+a))}return[2/Math.sqrt(P*(4+P))*e*(1+Math.cos(t)),2*Math.sqrt(P/(4+P))*Math.sin(t)]}function c(e,t){function n(n,r){var i=D(n/t,r);return i[0]*=e,i}return arguments.length<2&&(t=e),1===t?D:t===1/0?f:(n.invert=function(n,r){var i=D.invert(n/e,r);return i[0]*=t,i},n)}function d(){var e=2,t=R(c),n=t(e);return n.coefficient=function(n){return arguments.length?t(e=+n):e},n}function f(e,t){return[e*Math.cos(t)/Math.cos(t/=2),2*Math.sin(t)]}function h(e,t){return[3*e/(2*P)*Math.sqrt(P*P/3-t*t),t]}function p(e,t){return[e,1.25*Math.log(Math.tan(P/4+.4*t))]}function m(e){return function(t){var n,r=e*Math.sin(t),i=30;do{t-=n=(t+Math.sin(t)-r)/(1+Math.cos(t))}while(Math.abs(n)>S&&--i>0);return t/2}}function g(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function y(e,t){var n,r=Math.min(18,36*Math.abs(t)/P),i=Math.floor(r),a=r-i,o=(n=F[i])[0],s=n[1],l=(n=F[++i])[0],u=n[1],c=(n=F[Math.min(19,++i)])[0],d=n[1];return[e*(l+a*(c-o)/2+a*a*(c-2*l+o)/2),(t>0?I:-I)*(u+a*(d-s)/2+a*a*(d-2*u+s)/2)]}function v(e,t){return[e*Math.cos(t),t]}function _(e,t){var n=Math.cos(t),r=o(l(n*Math.cos(e/=2)));return[2*n*Math.sin(e)*r,Math.sin(t)*r]}function b(e,t){var n=_(e,t);return[(n[0]+e/I)/2,(n[1]+t)/2]}e.geo.project=function(e,t){var r=t.stream;if(!r)throw new Error("not yet supported");return(e&&x.hasOwnProperty(e.type)?x[e.type]:n)(e,r)};var x={Feature:t,FeatureCollection:function(e,n){return{type:"FeatureCollection",features:e.features.map(function(e){return t(e,n)})}}},w=[],k=[],T={point:function(e,t){w.push([e,t])},result:function(){var e=w.length?w.length<2?{type:"Point",coordinates:w[0]}:{type:"MultiPoint",coordinates:w}:null;return w=[],e}},M={lineStart:r,point:function(e,t){w.push([e,t])},lineEnd:function(){w.length&&(k.push(w),w=[])},result:function(){var e=k.length?k.length<2?{type:"LineString",coordinates:k[0]}:{type:"MultiLineString",coordinates:k}:null;return k=[],e}},A={polygonStart:r,lineStart:r,point:function(e,t){w.push([e,t])},lineEnd:function(){var e=w.length;if(e){do{w.push(w[0].slice())}while(++e<4);k.push(w),w=[]}},polygonEnd:r,result:function(){if(!k.length)return null;var e=[],t=[];return k.forEach(function(n){i(n)?e.push([n]):t.push(n)}),t.forEach(function(t){var n=t[0];e.some(function(e){if(a(e[0],n))return e.push(t),!0})||e.push([t])}),k=[],e.length?e.length>1?{type:"MultiPolygon",coordinates:e}:{type:"Polygon",coordinates:e[0]}:null}},C={Point:T,MultiPoint:T,LineString:M,MultiLineString:M,Polygon:A,MultiPolygon:A,Sphere:A},S=1e-6,E=S*S,P=Math.PI,I=P/2,L=(Math.sqrt(P),P/180),O=180/P,z=e.geo.projection,R=e.geo.projectionMutator;e.geo.interrupt=function(t){function n(e,n){for(var r=n<0?-1:1,i=l[+(n<0)],a=0,o=i.length-1;a<o&&e>i[a][2][0];++a);var s=t(e-i[a][1][0],n);return s[0]+=t(i[a][1][0],r*n>r*i[a][0][1]?i[a][0][1]:n)[0],s}function r(){s=l.map(function(e){return e.map(function(e){var n,r=t(e[0][0],e[0][1])[0],i=t(e[2][0],e[2][1])[0],a=t(e[1][0],e[0][1])[1],o=t(e[1][0],e[1][1])[1];return a>o&&(n=a,a=o,o=n),[[r,a],[i,o]]})})}function i(){for(var t=1e-6,n=[],r=0,i=l[0].length;r<i;++r){var o=l[0][r],s=180*o[0][0]/P,u=180*o[0][1]/P,c=180*o[1][1]/P,d=180*o[2][0]/P,f=180*o[2][1]/P;n.push(a([[s+t,u+t],[s+t,c-t],[d-t,c-t],[d-t,f+t]],30))}for(var r=l[1].length-1;r>=0;--r){var o=l[1][r],s=180*o[0][0]/P,u=180*o[0][1]/P,c=180*o[1][1]/P,d=180*o[2][0]/P,f=180*o[2][1]/P;n.push(a([[d-t,f-t],[d-t,c+t],[s+t,c+t],[s+t,u-t]],30))}return{type:"Polygon",coordinates:[e.merge(n)]}}function a(e,t){for(var n,r,i,a=-1,o=e.length,s=e[0],l=[];++a<o;){n=e[a],r=(n[0]-s[0])/t,i=(n[1]-s[1])/t;for(var u=0;u<t;++u)l.push([s[0]+u*r,s[1]+u*i]);s=n}return l.push(n),l}function o(e,t){return Math.abs(e[0]-t[0])<S&&Math.abs(e[1]-t[1])<S}var s,l=[[[[-P,0],[0,I],[P,0]]],[[[-P,0],[0,-I],[P,0]]]];t.invert&&(n.invert=function(e,r){for(var i=s[+(r<0)],a=l[+(r<0)],u=0,c=i.length;u<c;++u){var d=i[u];if(d[0][0]<=e&&e<d[1][0]&&d[0][1]<=r&&r<d[1][1]){var f=t.invert(e-t(a[u][1][0],0)[0],r);return f[0]+=a[u][1][0],o(n(f[0],f[1]),[e,r])?f:null}}});var u=e.geo.projection(n),c=u.stream;return u.stream=function(t){var n=u.rotate(),r=c(t),a=(u.rotate([0,0]),c(t));return u.rotate(n),r.sphere=function(){e.geo.stream(i(),a)},r},u.lobes=function(e){return arguments.length?(l=e.map(function(e){return e.map(function(e){return[[e[0][0]*P/180,e[0][1]*P/180],[e[1][0]*P/180,e[1][1]*P/180],[e[2][0]*P/180,e[2][1]*P/180]]})}),r(),u):l.map(function(e){return e.map(function(e){return[[180*e[0][0]/P,180*e[0][1]/P],[180*e[1][0]/P,180*e[1][1]/P],[180*e[2][0]/P,180*e[2][1]/P]]})})},u},u.invert=function(e,t){var n=.5*t*Math.sqrt((4+P)/P),r=s(n),i=Math.cos(r);return[e/(2/Math.sqrt(P*(4+P))*(1+i)),s((r+n*(i+2))/(2+I))]},(e.geo.eckert4=function(){return z(u)}).raw=u;var D=e.geo.azimuthalEqualArea.raw;f.invert=function(e,t){var n=2*s(t/2);return[e*Math.cos(n/2)/Math.cos(n),n]},(e.geo.hammer=d).raw=c,h.invert=function(e,t){return[2/3*P*e/Math.sqrt(P*P/3-t*t),t]},(e.geo.kavrayskiy7=function(){return z(h)}).raw=h,p.invert=function(e,t){return[e,2.5*Math.atan(Math.exp(.8*t))-.625*P]},(e.geo.miller=function(){return z(p)}).raw=p;var N=(m(P),function(e,t,n){function r(n,r){return[e*n*Math.cos(r=i(r)),t*Math.sin(r)]}var i=m(n);return r.invert=function(r,i){var a=s(i/t);return[r/(e*Math.cos(a)),s((2*a+Math.sin(2*a))/n)]},r}(Math.SQRT2/I,Math.SQRT2,P));(e.geo.mollweide=function(){return z(N)}).raw=N,g.invert=function(e,t){var n,r=t,i=25;do{var a=r*r,o=a*a;r-=n=(r*(1.007226+a*(.015085+o*(.028874*a-.044475-.005916*o)))-t)/(1.007226+a*(.045255+o*(.259866*a-.311325-.005916*11*o)))}while(Math.abs(n)>S&&--i>0);return[e/(.8707+(a=r*r)*(a*(a*a*a*(.003971-.001529*a)-.013791)-.131979)),r]},(e.geo.naturalEarth=function(){return z(g)}).raw=g;var F=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];F.forEach(function(e){e[1]*=1.0144}),y.invert=function(e,t){var n=t/I,r=90*n,i=Math.min(18,Math.abs(r/5)),a=Math.max(0,Math.floor(i));do{var o=F[a][1],s=F[a+1][1],l=F[Math.min(19,a+2)][1],u=l-o,c=l-2*s+o,d=2*(Math.abs(n)-s)/u,f=c/u,h=d*(1-f*d*(1-2*f*d));if(h>=0||1===a){r=(t>=0?5:-5)*(h+i);var p,m=50;do{i=Math.min(18,Math.abs(r)/5),a=Math.floor(i),h=i-a,o=F[a][1],s=F[a+1][1],l=F[Math.min(19,a+2)][1],r-=(p=(t>=0?I:-I)*(s+h*(l-o)/2+h*h*(l-2*s+o)/2)-t)*O}while(Math.abs(p)>E&&--m>0);break}}while(--a>=0);var g=F[a][0],y=F[a+1][0],v=F[Math.min(19,a+2)][0];return[e/(y+h*(v-g)/2+h*h*(v-2*y+g)/2),r*L]},(e.geo.robinson=function(){return z(y)}).raw=y,v.invert=function(e,t){return[e/Math.cos(t),t]},(e.geo.sinusoidal=function(){return z(v)}).raw=v,_.invert=function(e,t){if(!(e*e+4*t*t>P*P+S)){var n=e,r=t,i=25;do{var a,o=Math.sin(n),s=Math.sin(n/2),u=Math.cos(n/2),c=Math.sin(r),d=Math.cos(r),f=Math.sin(2*r),h=c*c,p=d*d,m=s*s,g=1-p*u*u,y=g?l(d*u)*Math.sqrt(a=1/g):a=0,v=2*y*d*s-e,_=y*c-t,b=a*(p*m+y*d*u*h),x=a*(.5*o*f-2*y*c*s),w=.25*a*(f*s-y*c*p*o),k=a*(h*u+y*m*d),T=x*w-k*b;if(!T)break;var M=(_*x-v*k)/T,A=(v*w-_*b)/T;n-=M,r-=A}while((Math.abs(M)>S||Math.abs(A)>S)&&--i>0);return[n,r]}},(e.geo.aitoff=function(){return z(_)}).raw=_,b.invert=function(e,t){var n=e,r=t,i=25;do{var a,o=Math.cos(r),s=Math.sin(r),u=Math.sin(2*r),c=s*s,d=o*o,f=Math.sin(n),h=Math.cos(n/2),p=Math.sin(n/2),m=p*p,g=1-d*h*h,y=g?l(o*h)*Math.sqrt(a=1/g):a=0,v=.5*(2*y*o*p+n/I)-e,_=.5*(y*s+r)-t,b=.5*a*(d*m+y*o*h*c)+.5/I,x=a*(f*u/4-y*s*p),w=.125*a*(u*p-y*s*d*f),k=.5*a*(c*h+y*m*o)+.5,T=x*w-k*b,M=(_*x-v*k)/T,A=(v*w-_*b)/T;n-=M,r-=A}while((Math.abs(M)>S||Math.abs(A)>S)&&--i>0);return[n,r]},(e.geo.winkel3=function(){return z(b)}).raw=b}function li(e,t){var n=e.projection;return(t._isScoped?di:t._isClipped?hi:fi)(e,n)}function ui(e,t){return CC.behavior.zoom().translate(t.translate()).scale(t.scale())}function ci(e,t,n){function r(e,t){var n=uE.nestedProperty(s,e);n.get()!==t&&(n.set(t),uE.nestedProperty(o,e).set(t),l[i+"."+e]=t)}var i=e.id,a=e.graphDiv,o=a.layout[i],s=a._fullLayout[i],l={};n(r),r("projection.scale",t.scale()/e.fitScale),a.emit("plotly_relayout",l)}function di(e,t){function n(){CC.select(this).style(FD)}function r(){t.scale(CC.event.scale).translate(CC.event.translate),e.render()}function i(n){var r=t.invert(e.midPt);n("center.lon",r[0]),n("center.lat",r[1])}function a(){CC.select(this).style(jD),ci(e,t,i)}var o=ui(e,t);return o.on("zoomstart",n).on("zoom",r).on("zoomend",a),o}function fi(e,t){function n(e){return t.invert(e)}function r(e){var r=t(n(e));return Math.abs(r[0]-e[0])>y||Math.abs(r[1]-e[1])>y}function i(){CC.select(this).style(FD),l=CC.mouse(this),u=t.rotate(),c=t.translate(),d=u,f=n(l)}function a(){if(h=CC.mouse(this),r(l))return g.scale(t.scale()),void g.translate(t.translate());t.scale(CC.event.scale),t.translate([c[0],CC.event.translate[1]]),f?n(h)&&(m=n(h),p=[d[0]+(m[0]-f[0]),u[1],u[2]],t.rotate(p),d=p):(l=h,f=n(l)),e.render()}function o(){CC.select(this).style(jD),ci(e,t,s)}function s(n){var r=t.rotate(),i=t.invert(e.midPt);n("projection.rotation.lon",-r[0]),n("center.lon",i[0]),n("center.lat",i[1])}var l,u,c,d,f,h,p,m,g=ui(e,t),y=2;return g.on("zoomstart",i).on("zoom",a).on("zoomend",o),g}function hi(e,t){function n(e){c++||e({type:"zoomstart"})}function r(e){e({type:"zoom"})}function i(e){--c||e({type:"zoomend"})}function a(e){var n=t.rotate();e("projection.rotation.lon",-n[0]),e("projection.rotation.lat",-n[1])}var o,s={r:t.rotate(),k:t.scale()},l=ui(e,t),u=Ai(l,"zoomstart","zoom","zoomend"),c=0,d=l.on;return l.on("zoomstart",function(){CC.select(this).style(FD);var e=CC.mouse(this),i=t.rotate(),a=i,c=t.translate(),f=mi(i);o=pi(t,e),d.call(l,"zoom",function(){var n=CC.mouse(this);if(t.scale(s.k=CC.event.scale),o){if(pi(t,n)){t.rotate(i).translate(c);var l=pi(t,n),d=yi(o,l),h=wi(gi(f,d)),p=s.r=vi(h,o,a);isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])||(p=a),t.rotate(p),a=p}}else e=n,o=pi(t,e);r(u.of(this,arguments))}),n(u.of(this,arguments))}).on("zoomend",function(){CC.select(this).style(jD),d.call(l,"zoom",null),i(u.of(this,arguments)),ci(e,t,a)}).on("zoom.redraw",function(){e.render()}),CC.rebind(l,u,"on")}function pi(e,t){var n=e.invert(t);return n&&isFinite(n[0])&&isFinite(n[1])&&ki(n)}function mi(e){var t=.5*e[0]*DD,n=.5*e[1]*DD,r=.5*e[2]*DD,i=Math.sin(t),a=Math.cos(t),o=Math.sin(n),s=Math.cos(n),l=Math.sin(r),u=Math.cos(r);return[a*s*u+i*o*l,i*s*u-a*o*l,a*o*u+i*s*l,a*s*l-i*o*u]}function gi(e,t){var n=e[0],r=e[1],i=e[2],a=e[3],o=t[0],s=t[1],l=t[2],u=t[3];return[n*o-r*s-i*l-a*u,n*s+r*o+i*u-a*l,n*l-r*u+i*o+a*s,n*u+r*l-i*s+a*o]}function yi(e,t){if(e&&t){var n=Mi(e,t),r=Math.sqrt(Ti(n,n)),i=.5*Math.acos(Math.max(-1,Math.min(1,Ti(e,t)))),a=Math.sin(i)/r;return r&&[Math.cos(i),n[2]*a,-n[1]*a,n[0]*a]}}function vi(e,t,n){var r=xi(t,2,e[0]);r=xi(r,1,e[1]),r=xi(r,0,e[2]-n[2]);var i,a,o=t[0],s=t[1],l=t[2],u=r[0],c=r[1],d=r[2],f=Math.atan2(s,o)*ND,h=Math.sqrt(o*o+s*s);Math.abs(c)>h?(a=(c>0?90:-90)-f,i=0):(a=Math.asin(c/h)*ND-f,i=Math.sqrt(h*h-c*c));var p=180-a-2*f,m=(Math.atan2(d,u)-Math.atan2(l,i))*ND,g=(Math.atan2(d,u)-Math.atan2(l,-i))*ND;return _i(n[0],n[1],a,m)<=_i(n[0],n[1],p,g)?[a,m,n[2]]:[p,g,n[2]]}function _i(e,t,n,r){var i=bi(n-e),a=bi(r-t);return Math.sqrt(i*i+a*a)}function bi(e){return(e%360+540)%360-180}function xi(e,t,n){var r=n*DD,i=e.slice(),a=0===t?1:0,o=2===t?1:2,s=Math.cos(r),l=Math.sin(r);return i[a]=e[a]*s-e[o]*l,i[o]=e[o]*s+e[a]*l,i}function wi(e){return[Math.atan2(2*(e[0]*e[1]+e[2]*e[3]),1-2*(e[1]*e[1]+e[2]*e[2]))*ND,Math.asin(Math.max(-1,Math.min(1,2*(e[0]*e[2]-e[3]*e[1]))))*ND,Math.atan2(2*(e[0]*e[3]+e[1]*e[2]),1-2*(e[2]*e[2]+e[3]*e[3]))*ND]}function ki(e){var t=e[0]*DD,n=e[1]*DD,r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function Ti(e,t){for(var n=0,r=0,i=e.length;r<i;++r)n+=e[r]*t[r];return n}function Mi(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function Ai(e){for(var t=0,n=arguments.length,r=[];++t<n;)r.push(arguments[t]);var i=CC.dispatch.apply(null,r);return i.of=function(t,n){return function(r){var a;try{a=r.sourceEvent=CC.event,r.target=e,CC.event=r,i[r.type].apply(t,n)}finally{CC.event=a}}},i}function Ci(e){this.id=e.id,this.graphDiv=e.graphDiv,this.container=e.container,this.topojsonURL=e.topojsonURL,this.isStatic=e.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}function Si(e){for(var t=e.projection,n=t.type,r=CC.geo[aD.projNames[n]](),i=e._isClipped?aD.lonaxisSpan[n]/2:null,a=["center","rotate","parallels","clipExtent"],o=function(e){return e?r:[]},s=0;s<a.length;s++){var l=a[s];"function"!==typeof r[l]&&(r[l]=o)}return r.isLonLatOverEdges=function(e){if(null===r(e))return!0;if(i){var t=r.rotate();return CC.geo.distance(e,[-t[0],-t[1]])>i*Math.PI/180}return!1},r.getPath=function(){return CC.geo.path().projection(r)},r.getBounds=function(e){return r.getPath().bounds(e)},r.fitExtent=function(e,t){var n=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=r.clipExtent&&r.clipExtent();r.scale(150).translate([0,0]),a&&r.clipExtent(null);var o=r.getBounds(t),s=Math.min(n/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),l=+e[0][0]+(n-s*(o[1][0]+o[0][0]))/2,u=+e[0][1]+(i-s*(o[1][1]+o[0][1]))/2;return a&&r.clipExtent(a),r.scale(150*s).translate([l,u])},r.precision(aD.precision),i&&r.clipAngle(i-aD.clipPad),r}function Ei(e,t){var n=t[e],r=n.dtick,i=aD.scopeDefaults[t.scope],a=i.lonaxisRange,o=i.lataxisRange,s="lonaxis"===e?[r]:[0,r];return CC.geo.graticule().extent([[a[0],o[0]],[a[1],o[1]]]).step(s)}function Pi(e,t){var n=aD.clipPad,r=e[0]+n,i=e[1]-n,a=t[0]+n,o=t[1]-n;r>0&&i<0&&(i+=360);var s=(i-r)/4;return{type:"Polygon",coordinates:[[[r,a],[r,o],[r+s,o],[r+2*s,o],[r+3*s,o],[i,o],[i,a],[i-s,a],[i-2*s,a],[i-3*s,a],[r,a]]]}}function Ii(e,t,n){var r,i=n("resolution"),a=n("scope"),o=aD.scopeDefaults[a],s=n("projection.type",o.projType),l=t._isAlbersUsa="albers usa"===s;l&&(a=t.scope="usa");var u=t._isScoped="world"!==a,c=t._isConic=-1!==s.indexOf("conic");t._isClipped=!!aD.lonaxisSpan[s];for(var d=0;d<$D.length;d++){var f,h=$D[d],p=[30,10][d];if(u)f=o[h+"Range"];else{var m=aD[h+"Span"],g=(m[s]||m["*"])/2,y=n("projection.rotation."+h.substr(0,3),o.projRotate[d]);f=[y-g,y+g]}n(h+".tick0",n(h+".range",f)[0]),n(h+".dtick",p),r=n(h+".showgrid"),r&&(n(h+".gridcolor"),n(h+".gridwidth"))}var v=t.lonaxis.range,_=t.lataxis.range,b=v[0],x=v[1];b>0&&x<0&&(x+=360);var w,k=(b+x)/2;if(!l){var T=u?o.projRotate:[k,0,0];w=n("projection.rotation.lon",T[0]),n("projection.rotation.lat",T[1]),n("projection.rotation.roll",T[2]),r=n("showcoastlines",!u),r&&(n("coastlinecolor"),n("coastlinewidth")),r=n("showocean"),r&&n("oceancolor")}var M,A;if(l?(M=-96.6,A=38.7):(M=u?k:w,A=(_[0]+_[1])/2),n("center.lon",M),n("center.lat",A),c){n("projection.parallels",o.projParallels||[0,60])}n("projection.scale"),r=n("showland"),r&&n("landcolor"),r=n("showlakes"),r&&n("lakecolor"),r=n("showrivers"),r&&(n("rivercolor"),n("riverwidth")),r=n("showcountries",u&&"usa"!==a),r&&(n("countrycolor"),n("countrywidth")),("usa"===a||"north america"===a&&50===i)&&(n("showsubunits",!0),n("subunitcolor"),n("subunitwidth")),u||(r=n("showframe",!0))&&(n("framecolor"),n("framewidth")),n("bgcolor")}function Li(e,t,n,r){var i=n.hi||t.hoverinfo,a="all"===i?mN.hoverinfo.flags:i.split("+"),o=-1!==a.indexOf("name"),s=-1!==a.indexOf("location"),l=-1!==a.indexOf("z"),u=-1!==a.indexOf("text"),c=!o&&s,d=[];c?e.nameOverride=n.loc:(o&&(e.nameOverride=t.name),s&&d.push(n.loc)),l&&d.push(function(e){return PI.tickText(r,r.c2l(e),"hover").text}(n.z)),u&&TO(n,t,d),e.extraText=d.join("<br>")}function Oi(e,t){return(0,MN[e])(t)}function zi(e){for(var t=0;t<TN.length;t++){var n=TN[t];if(new RegExp(wN[n]).test(e.trim().toLowerCase()))return n}return uE.log("Unrecognized country name: "+e+"."),!1}function Ri(e,t){var n=t[0].trace,r=t[0].node3,i=r.selectAll(".choroplethlocation"),a=n.marker||{},o=a.line||{},s=nP.makeColorScaleFunc(nP.extractScale(n.colorscale,n.zmin,n.zmax));i.each(function(e){CC.select(this).attr("fill",s(e.z)).call(jE.stroke,e.mlc||o.color).call(PP.dashLine,"",e.mlw||o.width||0).style("opacity",a.opacity)}),PP.selectedPointStyle(i,n)}function Di(e,t){for(var n=e[0].trace,r=e.length,i=CN(n,t),a=0;a<r;a++){var o=e[a],s=SN(n.locationmode,o.loc,i);s?(o.geojson=s,o.ct=s.properties.ct,o.index=a,o._polygons=Ni(s)):o.geojson=null}}function Ni(e){function t(e){for(var t=0;t<e.length-1;t++)if(e[t][0]>0&&e[t+1][0]<0)return t;return null}var n,r,i,a,o=e.geometry,s=o.coordinates,l=e.id,u=[];switch(n="RUS"===l||"FJI"===l?function(e){var n;if(null===t(e))n=e;else for(n=new Array(e.length),a=0;a<e.length;a++)n[a]=[e[a][0]<0?e[a][0]+360:e[a][0],e[a][1]];u.push(TD.tester(n))}:"ATA"===l?function(e){var n=t(e);if(null===n)return u.push(TD.tester(e));var r=new Array(e.length+1),i=0;for(a=0;a<e.length;a++)a>n?r[i++]=[e[a][0]+360,e[a][1]]:a===n?(r[i++]=e[a],r[i++]=[e[a][0],-90]):r[i++]=e[a];var o=TD.tester(r);o.pts.pop(),u.push(o)}:function(e){u.push(TD.tester(e))},o.type){case"MultiPolygon":for(r=0;r<s.length;r++)for(i=0;i<s[r].length;i++)n(s[r][i]);break;case"Polygon":for(r=0;r<s.length;r++)n(s[r])}return u}function Fi(e,t,n){var r={type:"linear",range:[e,t]};return PI.autoTicks(r,(t-e)/(n||15)),r}function ji(e){return.5-.25*Math.min(1,.5*e)}function Bi(e,t,n){var r,i,a,o,s,l,u,c,d,f,h,p,m,g=0;for(o=0;o<t.length;o++){for(r=t[o],i=r[0],a=r[1],h=e[i][a],f=0,d=0,s=0;s<4;s++)l=JN[s],(u=e[i+l[0]])&&void 0!==(c=u[a+l[1]])&&(0===f?p=m=c:(p=Math.min(p,c),m=Math.max(m,c)),d++,f+=c);if(0===d)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][a]=f/d,void 0===h?d<4&&(g=1):(e[i][a]=(1+n)*e[i][a]-n*h,m>p&&(g=Math.max(g,Math.abs(e[i][a]-h)/(m-p))))}return g}function Ui(e,t,n,r){if(e*t<=0)return 1/0;for(var i=Math.abs(t-e),a="date"===n.type,o=Vi(i,a),s=0;s<10;s++){var l=Vi(80*o,a);if(o===l)break;if(!Hi(l,e,t,a,n,r))break;o=l}return o}function Vi(e,t){return t&&e>sF?e>iF?e>1.1*nF?nF:e>1.1*rF?rF:iF:e>aF?aF:e>oF?oF:sF:Math.pow(10,Math.floor(Math.log(e)/Math.LN10))}function Hi(e,t,n,r,i,a){if(r&&e>iF){var o=Wi(t,i,a),s=Wi(n,i,a),l=e===nF?0:1;return o[l]!==s[l]}return Math.floor(n/e)-Math.floor(t/e)>.1}function Wi(e,t,n){var r=t.c2d(e,nF,n).split("-");return""===r[0]&&(r.unshift(),r[0]="-"+r[0]),r}function qi(e,t,n,r,i,a,o){var s=t+"bins",l="autobin"+t,u=e[s];hF(e,r,t),!e[l]&&u&&null!==u.start&&null!==u.end||(u=PI.autoBin(n,r,e["nbins"+t],"2d",o),"histogram2dcontour"===e.type&&(u.start=a(PI.tickIncrement(i(u.start),u.size,!0,o)),u.end=a(PI.tickIncrement(i(u.end),u.size,!1,o))),e._input[s]=e[s]=u,e._input[l]=e[l])}function Gi(e,t,n,r){var i,a=new Array(e);if(r)for(i=0;i<e;i++)a[i]=1/(t[i+1]-t[i]);else{var o=1/n;for(i=0;i<e;i++)a[i]=o}return a}function Yi(e,t){return{start:e(t.start),end:e(t.end),size:t.size}}function Xi(e,t,n,r,i,a){var o,s=e.length-1,l=new Array(s);if(t)for(o=0;o<s;o++)l[o]=[t[o],t[o]];else{var u=uF(n,r,e,i,a);for(o=0;o<s;o++)l[o]=[u(e[o]),u(e[o+1],!0)]}return l}function Zi(e,t){var n;-1===MF.indexOf(t.operation)?(e("contours.value",[0,1]),Array.isArray(t.value)?t.value.length>2?t.value=t.value.slice(2):0===t.length?t.value=[0,1]:t.length<2?(n=parseFloat(t.value[0]),t.value=[n,n+1]):t.value=[parseFloat(t.value[0]),parseFloat(t.value[1])]:SC(t.value)&&(n=parseFloat(t.value),t.value=[n,n+1])):(e("contours.value",0),SC(t.value)||(Array.isArray(t.value)?t.value=parseFloat(t.value[0]):t.value=0))}function Ji(e,t){var n=t(e);return"scaled"===(n?t(e+"type","array"):"scaled")&&(t(e+"0"),t("d"+e)),n}function Ki(e){for(var t,n=!0,r=!1,i=!1,a=0;a<e.length;a++){if(t=e[a],!EF(t)){n=!1;break}t.length>0&&(r=!0);for(var o=0;o<t.length;o++)if(SC(t[o])){i=!0;break}}return n&&r&&i}function Qi(e){return uE.extendFlat({},e,{edgepaths:uE.extendDeep([],e.edgepaths),paths:uE.extendDeep([],e.paths)})}function $i(e,t){function n(e){return SC(e)?+e:null}var r,i=Array.isArray(t);return-1!==RN.COMPARISON_OPS2.indexOf(e)?r=n(i?t[0]:t):-1!==RN.INTERVAL_OPS.indexOf(e)?r=i?[n(t[0]),n(t[1])]:[n(t),n(t)]:-1!==RN.SET_OPS.indexOf(e)&&(r=i?t.map(n):[n(t)]),r}function ea(e){return function(t){t=$i(e,t);var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]);return{start:n,end:r,size:r-n}}}function ta(e){return function(t){return t=$i(e,t),{start:t,end:1/0,size:1/0}}}function na(e,t,n,r){return Math.abs(e[0]-t[0])<n&&Math.abs(e[1]-t[1])<r}function ra(e,t){var n=e[2]-t[2],r=e[3]-t[3];return Math.sqrt(n*n+r*r)}function ia(e,t,n,r,i){function a(e){return d[e%d.length]}var o,s=t.join(","),l=s,u=e.crossings[l],c=aa(u,n,t),d=[oa(e,t,[-c[0],-c[1]])],f=c.join(","),h=e.z.length,p=e.z[0].length;for(o=0;o<1e4;o++){if(u>20?(u=RF.CHOOSESADDLE[u][(c[0]||c[1])<0?0:1],e.crossings[l]=RF.SADDLEREMAINDER[u]):delete e.crossings[l],!(c=RF.NEWDELTA[u])){uE.log("Found bad marching index:",u,t,e.level);break}d.push(oa(e,t,c)),t[0]+=c[0],t[1]+=c[1],na(d[d.length-1],d[d.length-2],r,i)&&d.pop(),l=t.join(",");var m=c[0]&&(t[0]<0||t[0]>p-2)||c[1]&&(t[1]<0||t[1]>h-2);if(l===s&&c.join(",")===f||n&&m)break;u=e.crossings[l]}1e4===o&&uE.log("Infinite loop in contour?");var g,y,v,_,b,x,w,k,T,M,A,C=na(d[0],d[d.length-1],r,i),S=0,E=.2*e.smoothing,P=[],I=0;for(o=1;o<d.length;o++)w=ra(d[o],d[o-1]),S+=w,P.push(w);var L=S/P.length*E;for(o=d.length-2;o>=I;o--)if((g=P[o])<L){for(v=0,y=o-1;y>=I&&g+P[y]<L;y--)g+=P[y];if(C&&o===d.length-2)for(v=0;v<y&&g+P[v]<L;v++)g+=P[v];b=o-y+v+1,x=Math.floor((o+y+v+2)/2),_=C||o!==d.length-2?C||-1!==y?b%2?a(x):[(a(x)[0]+a(x+1)[0])/2,(a(x)[1]+a(x+1)[1])/2]:d[0]:d[d.length-1],d.splice(y+1,o-y+1,_),o=y+1,v&&(I=v),C&&(o===d.length-2?d[v]=d[d.length-1]:0===o&&(d[d.length-1]=d[0]))}for(d.splice(0,I),o=0;o<d.length;o++)d[o].length=2;if(!(d.length<2))if(C)d.pop(),e.paths.push(d);else{n||uE.log("Unclosed interior contour?",e.level,s,d.join("L"));var O=!1;for(k=0;k<e.edgepaths.length;k++)if(M=e.edgepaths[k],!O&&na(M[0],d[d.length-1],r,i)){d.pop(),O=!0;var z=!1;for(T=0;T<e.edgepaths.length;T++)if(A=e.edgepaths[T],na(A[A.length-1],d[0],r,i)){z=!0,d.shift(),e.edgepaths.splice(k,1),T===k?e.paths.push(d.concat(A)):(T>k&&T--,e.edgepaths[T]=A.concat(d,M));break}z||(e.edgepaths[k]=d.concat(M))}for(k=0;k<e.edgepaths.length&&!O;k++)M=e.edgepaths[k],na(M[M.length-1],d[0],r,i)&&(d.shift(),e.edgepaths[k]=M.concat(d),O=!0);O||e.edgepaths.push(d)}}function aa(e,t,n){var r=0,i=0;return e>20&&t?208===e||1114===e?r=0===n[0]?1:-1:i=0===n[1]?1:-1:-1!==RF.BOTTOMSTART.indexOf(e)?i=1:-1!==RF.LEFTSTART.indexOf(e)?r=1:-1!==RF.TOPSTART.indexOf(e)?i=-1:r=-1,[r,i]}function oa(e,t,n){var r=t[0]+Math.max(n[0],0),i=t[1]+Math.max(n[1],0),a=e.z[i][r],o=e.xaxis,s=e.yaxis;if(n[1]){var l=(e.level-a)/(e.z[i][r+1]-a);return[o.c2p((1-l)*e.x[r]+l*e.x[r+1],!0),s.c2p(e.y[i],!0),r+l,i]}var u=(e.level-a)/(e.z[i+1][r]-a);return[o.c2p(e.x[r],!0),s.c2p((1-u)*e.y[i]+u*e.y[i+1],!0),r,i+u]}function sa(e,t){var n=(t[0][0]>e?0:1)+(t[0][1]>e?0:2)+(t[1][1]>e?0:4)+(t[1][0]>e?0:8);if(5===n||10===n){return e>(t[0][0]+t[0][1]+t[1][0]+t[1][1])/4?5===n?713:1114:5===n?104:208}return 15===n?0:n}function la(e,t,n){function r(e,t){if(void 0!==e){var n=j(e);return n[0]=Math.round(n[0]),n[1]=Math.round(n[1]),n[2]=Math.round(n[2]),J+=t,K+=n[0]*t,Q+=n[1]*t,$+=n[2]*t,n}return[0,0,0,0]}var i=n[0],a=i.trace,o=a.uid,s=t.xaxis,l=t.yaxis,u=e._fullLayout,c="hm"+o;if(u._paper.selectAll(".contour"+o).remove(),u._infolayer.selectAll("g.rangeslider-container").selectAll(".contour"+o).remove(),!0!==a.visible)return u._paper.selectAll("."+c).remove(),void u._infolayer.selectAll(".cb"+o).remove();var d,f,h,p,m,g,y=i.z,v=i.x,_=i.y,b=i.xCenter,x=i.yCenter,w=rS.traceIs(a,"contour"),k=w?"best":a.zsmooth,T=y.length,M=GN(y),A=!1,C=!1;for(g=0;void 0===d&&g<v.length-1;)d=s.c2p(v[g]),g++;for(g=v.length-1;void 0===f&&g>0;)f=s.c2p(v[g]),g--;for(f<d&&(h=f,f=d,d=h,A=!0),g=0;void 0===p&&g<_.length-1;)p=l.c2p(_[g]),g++;for(g=_.length-1;void 0===m&&g>0;)m=l.c2p(_[g]),g--;if(m<p&&(h=p,p=m,m=h,C=!0),w&&(b=v,x=_,v=i.xfill,_=i.yfill),"fast"!==k){var S="best"===k?0:.5;d=Math.max(-S*s._length,d),f=Math.min((1+S)*s._length,f),p=Math.max(-S*l._length,p),m=Math.min((1+S)*l._length,m)}var E=Math.round(f-d),P=Math.round(m-p),I=E<=0||P<=0,L=t.plot.select(".imagelayer").selectAll("g.hm."+c).data(I?[]:[0]);if(L.enter().append("g").classed("hm",!0).classed(c,!0),L.exit().remove(),!I){var O,z;"fast"===k?(O=M,z=T):(O=E,z=P);var R=document.createElement("canvas");R.width=O,R.height=z;var D,N,F=R.getContext("2d"),j=nP.makeColorScaleFunc(nP.extractScale(a.colorscale,a.zmin,a.zmax),{noNumericCheck:!0,returnArray:!0});"fast"===k?(D=A?function(e){return M-1-e}:uE.identity,N=C?function(e){return T-1-e}:uE.identity):(D=function(e){return uE.constrain(Math.round(s.c2p(v[e])-d),0,E)},N=function(e){return uE.constrain(Math.round(l.c2p(_[e])-p),0,P)});var B,U,V,H,W,q,G=N(0),Y=[G,G],X=A?0:1,Z=C?0:1,J=0,K=0,Q=0,$=0;if(k){var ee,te=0;try{ee=new Uint8Array(E*P*4)}catch(e){ee=new Array(E*P*4)}if("best"===k){var ne,re,ie,ae=b||v,oe=x||_,se=new Array(ae.length),le=new Array(oe.length),ue=new Array(E),ce=b?ca:ua,de=x?ca:ua;for(g=0;g<ae.length;g++)se[g]=Math.round(s.c2p(ae[g])-d);for(g=0;g<oe.length;g++)le[g]=Math.round(l.c2p(oe[g])-p);for(g=0;g<E;g++)ue[g]=ce(g,se);for(U=0;U<P;U++)for(ne=de(U,le),re=y[ne.bin0],ie=y[ne.bin1],g=0;g<E;g++,te+=4)q=function(e,t,n,i){var a=e[n.bin0];if(void 0===a)return r(void 0,1);var o,s=e[n.bin1],l=t[n.bin0],u=t[n.bin1],c=s-a||0,d=l-a||0;return o=void 0===s?void 0===u?0:void 0===l?2*(u-a):2*(2*u-l-a)/3:void 0===u?void 0===l?0:2*(2*a-s-l)/3:void 0===l?2*(2*u-s-a)/3:u+a-s-l,r(a+n.frac*c+i.frac*(d+n.frac*o))}(re,ie,ue[g],ne),da(ee,te,q)}else for(U=0;U<T;U++)for(W=y[U],Y=N(U),g=0;g<E;g++)q=r(W[g],1),te=4*(Y*E+D(g)),da(ee,te,q);var fe=F.createImageData(E,P);try{fe.data.set(ee)}catch(e){var he=fe.data,pe=he.length;for(U=0;U<pe;U++)he[U]=ee[U]}F.putImageData(fe,0,0)}else{var me=a.xgap,ge=a.ygap,ye=Math.floor(me/2),ve=Math.floor(ge/2);for(U=0;U<T;U++)if(W=y[U],Y.reverse(),Y[Z]=N(U+1),Y[0]!==Y[1]&&void 0!==Y[0]&&void 0!==Y[1])for(V=D(0),B=[V,V],g=0;g<M;g++)B.reverse(),B[X]=D(g+1),B[0]!==B[1]&&void 0!==B[0]&&void 0!==B[1]&&(H=W[g],q=r(H,(B[1]-B[0])*(Y[1]-Y[0])),F.fillStyle="rgba("+q.join(",")+")",F.fillRect(B[0]+ye,Y[0]+ve,B[1]-B[0]-me,Y[1]-Y[0]-ge))}K=Math.round(K/J),Q=Math.round(Q/J),$=Math.round($/J);var _e=zC("rgb("+K+","+Q+","+$+")");e._hmpixcount=(e._hmpixcount||0)+J,e._hmlumcount=(e._hmlumcount||0)+J*_e.getLuminance();var be=L.selectAll("image").data(n);be.enter().append("svg:image").attr({xmlns:aP.svg,preserveAspectRatio:"none"}),be.attr({height:P,width:E,x:d,y:p,"xlink:href":R.toDataURL("image/png")}),be.exit().remove()}}function ua(e,t){var n=t.length-2,r=uE.constrain(uE.findBin(e,t),0,n),i=t[r],a=t[r+1],o=uE.constrain(r+(e-i)/(a-i)-.5,0,n),s=Math.round(o),l=Math.abs(o-s);return o&&o!==n&&l?{bin0:s,frac:l,bin1:Math.round(s+l/(o-s))}:{bin0:s,bin1:s,frac:0}}function ca(e,t){var n=t.length-1,r=uE.constrain(uE.findBin(e,t),0,n),i=t[r],a=t[r+1],o=(e-i)/(a-i)||0;return o<=0?{bin0:r,bin1:r,frac:0}:o<.5?{bin0:r,bin1:r+1,frac:o}:{bin0:r+1,bin1:r,frac:1-o}}function da(e,t,n){e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=Math.round(255*n[3])}function fa(e,t,n){var r=n[0].trace,i=n[0].x,a=n[0].y,o=r.contours,s=r.uid,l=t.xaxis,u=t.yaxis,c=e._fullLayout,d="contour"+s,f=FF(o,t,n[0]);if(!0!==r.visible)return c._paper.selectAll("."+d+",.hm"+s).remove(),void c._infolayer.selectAll(".cb"+s).remove();"heatmap"===o.coloring?(r.zauto&&!1===r.autocontour&&(r._input.zmin=r.zmin=o.start-o.size/2,r._input.zmax=r.zmax=r.zmin+f.length*o.size),UF(e,t,[n])):(c._paper.selectAll(".hm"+s).remove(),c._infolayer.selectAll("g.rangeslider-container").selectAll(".hm"+s).remove()),BF(f),jF(f);var h=l.c2p(i[0],!0),p=l.c2p(i[i.length-1],!0),m=u.c2p(a[0],!0),g=u.c2p(a[a.length-1],!0),y=[[h,g],[p,g],[p,m],[h,m]],v=f;"constraint"===o.type&&(v=DF(f,o._operation),zF(v,o._operation,y,r));var _=VF.makeContourGroup(t,n,d);ha(_,y,o),pa(_,v,y,o),ya(_,f,e,n[0],o,y),_a(_,t,c._clips,n[0],y)}function ha(e,t,n){var r=e.selectAll("g.contourbg").data([0]);r.enter().append("g").classed("contourbg",!0);var i=r.selectAll("path").data("fill"===n.coloring?[0]:[]);i.enter().append("path"),i.exit().remove(),i.attr("d","M"+t.join("L")+"Z").style("stroke","none")}function pa(e,t,n,r){var i=e.selectAll("g.contourfill").data([0]);i.enter().append("g").classed("contourfill",!0);var a=i.selectAll("path").data("fill"===r.coloring||"constraint"===r.type&&"="!==r._operation?t:[]);a.enter().append("path"),a.exit().remove(),a.each(function(e){var t=ga(e,n);t?CC.select(this).attr("d",t).style("stroke","none"):CC.select(this).remove()})}function ma(e,t){var n=e.prefixBoundary;if(void 0===n){var r=Math.min(e.z[0][0],e.z[0][1]);n=!e.edgepaths.length&&r>e.level}return n?"M"+t.join("L")+"Z":""}function ga(e,t){function n(e){return Math.abs(e[0]-t[2][0])<.01}for(var r,i,a,o,s,l,u=ma(e,t),c=0,d=e.edgepaths.map(function(e,t){return t}),f=!0;d.length;){for(l=PP.smoothopen(e.edgepaths[c],e.smoothing),u+=f?l:l.replace(/^M/,"L"),d.splice(d.indexOf(c),1),r=e.edgepaths[c][e.edgepaths[c].length-1],o=-1,a=0;a<4;a++){if(!r){uE.log("Missing end?",c,e);break}for(!function(e){return Math.abs(e[1]-t[0][1])<.01}(r)||n(r)?!function(e){return Math.abs(e[0]-t[0][0])<.01}(r)?!function(e){return Math.abs(e[1]-t[2][1])<.01}(r)?n(r)&&(i=t[2]):i=t[3]:i=t[0]:i=t[1],s=0;s<e.edgepaths.length;s++){var h=e.edgepaths[s][0];Math.abs(r[0]-i[0])<.01?Math.abs(r[0]-h[0])<.01&&(h[1]-r[1])*(i[1]-h[1])>=0&&(i=h,o=s):Math.abs(r[1]-i[1])<.01?Math.abs(r[1]-h[1])<.01&&(h[0]-r[0])*(i[0]-h[0])>=0&&(i=h,o=s):uE.log("endpt to newendpt is not vert. or horz.",r,i,h)}if(r=i,o>=0)break;u+="L"+i}if(o===e.edgepaths.length){uE.log("unclosed perimeter path");break}c=o,f=-1===d.indexOf(c),f&&(c=d[0],u+="Z")}for(c=0;c<e.paths.length;c++)u+=PP.smoothclosed(e.paths[c],e.smoothing);return u}function ya(e,t,n,r,i,a){var o=e.selectAll("g.contourlines").data([0]);o.enter().append("g").classed("contourlines",!0);var s=!1!==i.showlines,l=i.showlabels,u=s&&l,c=VF.createLines(o,s||l,t),d=VF.createLineClip(o,u,n._fullLayout._clips,r.trace.uid),f=e.selectAll("g.contourlabels").data(l?[0]:[]);if(f.exit().remove(),f.enter().append("g").classed("contourlabels",!0),l){var h=[a],p=[];uE.clearLocationCache();var m=VF.labelFormatter(i,r.t.cb,n._fullLayout),g=PP.tester.append("text").attr("data-notex",1).call(PP.font,i.labelfont),y=t[0].xaxis._length,v=t[0].yaxis._length,_={left:Math.max(a[0][0],0),right:Math.min(a[2][0],y),top:Math.max(a[0][1],0),bottom:Math.min(a[2][1],v)};_.middle=(_.top+_.bottom)/2,_.center=(_.left+_.right)/2;var b=Math.sqrt(y*y+v*v),x=RF.LABELDISTANCE*b/Math.max(1,t.length/RF.LABELINCREASE);c.each(function(e){var t=VF.calcTextOpts(e.level,m,g,n);CC.select(this).selectAll("path").each(function(){var e=this,n=uE.getVisibleSegment(e,_,t.height/2);if(n&&!(n.len<(t.width+t.height)*RF.LABELMIN))for(var r=Math.min(Math.ceil(n.len/x),RF.LABELMAX),i=0;i<r;i++){var a=VF.findBestTextLocation(e,n,t,p,_);if(!a)break;VF.addLabelData(a,t,p,h)}})}),g.remove(),VF.drawLabels(f,p,n,d,u?h:null)}l&&!s&&c.remove()}function va(e,t,n,r){var i=t.width/2,a=t.height/2,o=e.x,s=e.y,l=e.theta,u=Math.cos(l)*i,c=Math.sin(l)*i,d=(o>r.center?r.right-o:o-r.left)/(u+Math.abs(Math.sin(l)*a)),f=(s>r.middle?r.bottom-s:s-r.top)/(Math.abs(c)+Math.cos(l)*a);if(d<1||f<1)return 1/0;var h=HF.EDGECOST*(1/(d-1)+1/(f-1));h+=HF.ANGLECOST*l*l;for(var p=o-u,m=s-c,g=o+u,y=s+c,v=0;v<n.length;v++){var _=n[v],b=Math.cos(_.theta)*_.width/2,x=Math.sin(_.theta)*_.width/2,w=2*uE.segmentDistance(p,m,g,y,_.x-b,_.y-x,_.x+b,_.y+x)/(t.height+_.height),k=_.level===t.level,T=k?HF.SAMELEVELDISTANCE:1;if(w<=T)return 1/0;h+=HF.NEIGHBORCOST*(k?HF.SAMELEVELFACTOR:1)/(w-T)}return h}function _a(e,t,n,r,i){var a="clip"+r.trace.uid,o=n.selectAll("#"+a).data(r.trace.connectgaps?[]:[0]);if(o.enter().append("clipPath").classed("contourclip",!0).attr("id",a),o.exit().remove(),!1===r.trace.connectgaps){var s={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:t.xaxis,yaxis:t.yaxis,x:r.x,y:r.y,z:ba(r),smoothing:0};BF([s]),jF([s]);var l=ga(s,i),u=o.selectAll("path").data([0]);u.enter().append("path"),u.attr("d",l)}else a=null;e.call(PP.setClipUrl,a),t.plot.selectAll(".hm"+r.trace.uid).call(PP.setClipUrl,a)}function ba(e){var t,n,r=e.trace._emptypoints,i=[],a=e.z.length,o=e.z[0].length,s=[];for(t=0;t<o;t++)s.push(1);for(t=0;t<a;t++)i.push(s.slice());for(t=0;t<r.length;t++)n=r[t],i[n[0]][n[1]]=0;return e.zmask=i,i}function xa(e,t){var n,r,i,a,o,s,l,u=t.carpetTrace,c=u.aaxis,d=u.baxis;c._minDtick=0,d._minDtick=0,ZN(t)&&qR(t,c,d,"a","b",["z"]),n=t.a?c.makeCalcdata(t,"a"):[],a=t.b?d.makeCalcdata(t,"b"):[],r=t.a0||0,i=t.da||1,o=t.b0||0,s=t.db||1,l=SR(t.z,t.transpose),t._emptypoints=YN(l),t._interpz=KN(l,t._emptypoints,t._interpz);var f=GN(l),h="scaled"===t.xtype?"":n,p=$N(t,h,r,i,f,c),m="scaled"===t.ytype?"":a,g=$N(t,m,o,s,l.length,d),y={a:p,b:g,z:l};return"levels"===t.contours.type&&WE(t,l,"","z"),[y]}function wa(e,t,n){function r(e){var t=a.ab2xy(e[0],e[1],!0);return[d.c2p(t[0]),f.c2p(t[1])]}var i=n[0].trace,a=i.carpetTrace=$F(e,i),o=e.calcdata[a.index][0];if(a.visible&&"legendonly"!==a.visible){var s=n[0].a,l=n[0].b,u=i.contours,c=i.uid,d=t.xaxis,f=t.yaxis,h=e._fullLayout,p="contour"+c,m=FF(u,t,n[0]),g="constraint"===u.type,y=u._operation,v=g?"="===y?"lines":"fill":u.coloring;if(!0!==i.visible)return void h._infolayer.selectAll(".cb"+c).remove();var _=[[s[0],l[l.length-1]],[s[s.length-1],l[l.length-1]],[s[s.length-1],l[0]],[s[0],l[0]]];BF(m);var b=1e-8*(s[s.length-1]-s[0]),x=1e-8*(l[l.length-1]-l[0]);jF(m,b,x);var w=m;"constraint"===u.type&&(w=DF(m,y),zF(w,y,_,i)),aj(m,r);var k,T,M,A,C=VF.makeContourGroup(t,n,p),S=[];for(A=o.clipsegments.length-1;A>=0;A--)k=o.clipsegments[A],T=JR([],k.x,d.c2p),M=JR([],k.y,f.c2p),T.reverse(),M.reverse(),S.push(XR(T,M,k.bicubic));var E="M"+S.join("L")+"Z";Sa(C,o.clipsegments,d,f,g,v),Ea(i,C,d,f,w,_,r,a,o,v,E),ka(C,m,e,n[0],u,t,a),PP.setClipUrl(C,a._clipPathId)}}function ka(e,t,n,r,i,a,o){var s=e.selectAll("g.contourlines").data([0]);s.enter().append("g").classed("contourlines",!0);var l=!1!==i.showlines,u=i.showlabels,c=l&&u,d=VF.createLines(s,l||u,t),f=VF.createLineClip(s,c,n._fullLayout._defs,r.trace.uid),h=e.selectAll("g.contourlabels").data(u?[0]:[]);if(h.exit().remove(),h.enter().append("g").classed("contourlabels",!0),u){var p=a.xaxis,m=a.yaxis,g=p._length,y=m._length,v=[[[0,0],[g,0],[g,y],[0,y]]],_=[];uE.clearLocationCache();var b=VF.labelFormatter(i,r.t.cb,n._fullLayout),x=PP.tester.append("text").attr("data-notex",1).call(PP.font,i.labelfont),w={left:0,right:g,center:g/2,top:0,bottom:y,middle:y/2},k=Math.sqrt(g*g+y*y),T=RF.LABELDISTANCE*k/Math.max(1,t.length/RF.LABELINCREASE);d.each(function(e){var t=VF.calcTextOpts(e.level,b,x,n);CC.select(this).selectAll("path").each(function(n){var r=this,i=uE.getVisibleSegment(r,w,t.height/2);if(i&&(Ta(r,n,e,i,o,t.height),!(i.len<(t.width+t.height)*RF.LABELMIN)))for(var a=Math.min(Math.ceil(i.len/T),RF.LABELMAX),s=0;s<a;s++){var l=VF.findBestTextLocation(r,i,t,_,w);if(!l)break;VF.addLabelData(l,t,_,v)}})}),x.remove(),VF.drawLabels(h,_,n,f,c?v:null)}u&&!l&&d.remove()}function Ta(e,t,n,r,i,a){function o(e,t){var n,r=0;return(Math.abs(e[0]-u)<.1||Math.abs(e[0]-c)<.1)&&(n=Aa(i.dxydb_rough(e[0],e[1],.1)),r=Math.max(r,a*Ca(t,n)/2)),(Math.abs(e[1]-d)<.1||Math.abs(e[1]-f)<.1)&&(n=Aa(i.dxyda_rough(e[0],e[1],.1)),r=Math.max(r,a*Ca(t,n)/2)),r}for(var s,l=0;l<n.pedgepaths.length;l++)t===n.pedgepaths[l]&&(s=n.edgepaths[l]);if(s){var u=i.a[0],c=i.a[i.a.length-1],d=i.b[0],f=i.b[i.b.length-1],h=Ma(e,0,1),p=Ma(e,r.total,r.total-1),m=o(s[0],h),g=r.total-o(s[s.length-1],p);r.min<m&&(r.min=m),r.max>g&&(r.max=g),r.len=r.max-r.min}}function Ma(e,t,n){var r=e.getPointAtLength(t),i=e.getPointAtLength(n),a=i.x-r.x,o=i.y-r.y,s=Math.sqrt(a*a+o*o);return[a/s,o/s]}function Aa(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]);return[e[0]/t,e[1]/t]}function Ca(e,t){var n=Math.abs(e[0]*t[0]+e[1]*t[1]);return Math.sqrt(1-n*n)/n}function Sa(e,t,n,r,i,a){var o,s,l,u,c=e.selectAll("g.contourbg").data([0]);c.enter().append("g").classed("contourbg",!0);var d=c.selectAll("path").data("fill"!==a||i?[]:[0]);d.enter().append("path"),d.exit().remove();var f=[];for(u=0;u<t.length;u++)o=t[u],s=JR([],o.x,n.c2p),l=JR([],o.y,r.c2p),f.push(XR(s,l,o.bicubic));d.attr("d","M"+f.join("L")+"Z").style("stroke","none")}function Ea(e,t,n,r,i,a,o,s,l,u,c){var d=t.selectAll("g.contourfill").data([0]);d.enter().append("g").classed("contourfill",!0);var f=d.selectAll("path").data("fill"===u?i:[]);f.enter().append("path"),f.exit().remove(),f.each(function(t){var i=ij(e,t,a,o,s,l,n,r);t.prefixBoundary&&(i=c+i),i?CC.select(this).attr("d",i).style("stroke","none"):CC.select(this).remove()})}function Pa(){throw new Error("setTimeout has not been defined")}function Ia(){throw new Error("clearTimeout has not been defined")}function La(e){if(hj===setTimeout)return setTimeout(e,0);if((hj===Pa||!hj)&&setTimeout)return hj=setTimeout,setTimeout(e,0);try{return hj(e,0)}catch(t){try{return hj.call(null,e,0)}catch(t){return hj.call(this,e,0)}}}function Oa(e){if(pj===clearTimeout)return clearTimeout(e);if((pj===Ia||!pj)&&clearTimeout)return pj=clearTimeout,clearTimeout(e);try{return pj(e)}catch(t){try{return pj.call(null,e)}catch(t){return pj.call(this,e)}}}function za(){bj&&vj&&(bj=!1,vj.length?_j=vj.concat(_j):xj=-1,_j.length&&Ra())}function Ra(){if(!bj){var e=La(za);bj=!0;for(var t=_j.length;t;){for(vj=_j,_j=[];++xj<t;)vj&&vj[xj].run();xj=-1,t=_j.length}vj=null,bj=!1,Oa(e)}}function Da(e,t){this.fun=e,this.array=t}function Na(){}function Fa(e){var t=e._fullLayout;t._infolayer.selectAll(".annotation").remove();for(var n=0;n<t.annotations.length;n++)t.annotations[n].visible&&ja(e,n);return lI.previousPromises(e)}function ja(e,t){var n=e._fullLayout,r=n.annotations[t]||{};Ba(e,r,t,!1,PI.getFromId(e,r.xref),PI.getFromId(e,r.yref))}function Ba(e,t,n,r,i,a){function o(n){return n.call(PP.font,C).attr({"text-anchor":{left:"start",right:"end"}[t.align]||"middle"}),sP.convertToTspans(n,e,s),n}function s(){function n(e,t){return"auto"===t&&(t=e<1/3?"left":e>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[t]}var o=S.selectAll("a");if(1===o.size()&&o.text()===S.text()){b.insert("a",":first-child").attr({"xlink:xlink:href":o.attr("xlink:href"),"xlink:xlink:show":o.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(T.node())}var s=b.select(".annotation-text-math-group"),l=!s.empty(),_=PP.bBox((l?s:S).node()),w=_.width,C=_.height,E=t.width||w,P=t.height||C,I=Math.round(E+2*k),L=Math.round(P+2*k);t._w=E,t._h=P;for(var O=!1,z=["x","y"],R=0;R<z.length;R++){var D,N,F,j,B,U=z[R],V=t[U+"ref"]||U,H=t["a"+U+"ref"],W={x:i,y:a}[U],q=(m+("x"===U?0:-90))*Math.PI/180,G=I*Math.cos(q),Y=L*Math.sin(q),X=Math.abs(G)+Math.abs(Y),Z=t[U+"anchor"],J=t[U+"shift"]*("x"===U?1:-1),K=p[U];if(W){var Q=W.r2fraction(t[U]);if((e._dragging||!W.autorange)&&(Q<0||Q>1)&&(H===V?((Q=W.r2fraction(t["a"+U]))<0||Q>1)&&(O=!0):O=!0,O))continue;D=W._offset+W.r2p(t[U]),j=.5}else"x"===U?(F=t[U],D=d.l+d.w*F):(F=1-t[U],D=d.t+d.h*F),j=t.showarrow?.5:F;if(t.showarrow){K.head=D;var $=t["a"+U];B=G*n(.5,t.xanchor)-Y*n(.5,t.yanchor),H===V?(K.tail=W._offset+W.r2p($),N=B):(K.tail=D+$,N=B+$),K.text=K.tail+B;var ee=c["x"===U?"width":"height"];if("paper"===V&&(K.head=uE.constrain(K.head,1,ee-1)),"pixel"===H){var te=-Math.max(K.tail-3,K.text),ne=Math.min(K.tail+3,K.text)-ee;te>0?(K.tail+=te,K.text+=te):ne>0&&(K.tail-=ne,K.text-=ne)}K.tail+=J,K.head+=J}else B=X*n(j,Z),N=B,K.text=D+B;K.text+=J,B+=J,N+=J,t["_"+U+"padplus"]=X/2+N,t["_"+U+"padminus"]=X/2-N,t["_"+U+"size"]=X,t["_"+U+"shift"]=B}if(O)return void b.remove();var re=0,ie=0;if("left"!==t.align&&(re=(E-w)*("center"===t.align?.5:1)),"top"!==t.valign&&(ie=(P-C)*("middle"===t.valign?.5:1)),l)s.select("svg").attr({x:k+re-1,y:k+ie}).call(PP.setClipUrl,M?h:null);else{var ae=k+ie-_.top,oe=k+re-_.left;S.call(sP.positionText,oe,ae).call(PP.setClipUrl,M?h:null)}A.select("rect").call(PP.setRect,k,k,E,P),T.call(PP.setRect,x/2,x/2,I-x,L-x),b.call(PP.setTranslate,Math.round(p.x.text-I/2),Math.round(p.y.text-L/2)),y.attr({transform:"rotate("+m+","+p.x.text+","+p.y.text+")"});var se=function(n,o){g.selectAll(".annotation-arrow-g").remove();var s=p.x.head,l=p.y.head,c=p.x.tail+n,h=p.y.tail+o,v=p.x.text+n,_=p.y.text+o,x=uE.rotationXYMatrix(m,v,_),w=uE.apply2DTransform(x),k=uE.apply2DTransform2(x),M=+T.attr("width"),A=+T.attr("height"),C=v-.5*M,S=C+M,E=_-.5*A,P=E+A,I=[[C,E,C,P],[C,P,S,P],[S,P,S,E],[S,E,C,E]].map(k);if(!I.reduce(function(e,t){return e^!!uE.segmentsIntersect(s,l,s+1e6,l+1e6,t[0],t[1],t[2],t[3])},!1)){I.forEach(function(e){var t=uE.segmentsIntersect(c,h,s,l,e[0],e[1],e[2],e[3]);t&&(c=t.x,h=t.y)});var L=t.arrowwidth,O=t.arrowcolor,z=t.arrowside,R=g.append("g").style({opacity:jE.opacity(O)}).classed("annotation-arrow-g",!0),D=R.append("path").attr("d","M"+c+","+h+"L"+s+","+l).style("stroke-width",L+"px").call(jE.stroke,jE.rgb(O));if(Mj(D,z,t),f.annotationPosition&&D.node().parentNode&&!r){var N=s,F=l;if(t.standoff){var j=Math.sqrt(Math.pow(s-c,2)+Math.pow(l-h,2));N+=t.standoff*(c-s)/j,F+=t.standoff*(h-l)/j}var B,U,V,H=R.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(c-N)+","+(h-F),transform:"translate("+N+","+F+")"}).style("stroke-width",L+6+"px").call(jE.stroke,"rgba(0,0,0,0)").call(jE.fill,"rgba(0,0,0,0)");$L.init({element:H.node(),gd:e,prepFn:function(){var e=PP.getTranslate(b);U=e.x,V=e.y,B={},i&&i.autorange&&(B[i._name+".autorange"]=!0),a&&a.autorange&&(B[a._name+".autorange"]=!0)},moveFn:function(e,n){var r=w(U,V),o=r[0]+e,s=r[1]+n;b.call(PP.setTranslate,o,s),B[u+".x"]=i?i.p2r(i.r2p(t.x)+e):t.x+e/d.w,B[u+".y"]=a?a.p2r(a.r2p(t.y)+n):t.y-n/d.h,t.axref===t.xref&&(B[u+".ax"]=i.p2r(i.r2p(t.ax)+e)),t.ayref===t.yref&&(B[u+".ay"]=a.p2r(a.r2p(t.ay)+n)),R.attr("transform","translate("+e+","+n+")"),y.attr({transform:"rotate("+m+","+o+","+s+")"})},doneFn:function(){rS.call("relayout",e,B);var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}};if(t.showarrow&&se(0,0),v){var le,ue;$L.init({element:b.node(),gd:e,prepFn:function(){ue=y.attr("transform"),le={}},moveFn:function(e,n){var o="pointer";if(t.showarrow)t.axref===t.xref?le[u+".ax"]=i.p2r(i.r2p(t.ax)+e):le[u+".ax"]=t.ax+e,t.ayref===t.yref?le[u+".ay"]=a.p2r(a.r2p(t.ay)+n):le[u+".ay"]=t.ay+n,se(e,n);else{if(r)return;if(i)le[u+".x"]=i.p2r(i.r2p(t.x)+e);else{var s=t._xsize/d.w,l=t.x+(t._xshift-t.xshift)/d.w-s/2;le[u+".x"]=$L.align(l+e/d.w,s,0,1,t.xanchor)}if(a)le[u+".y"]=a.p2r(a.r2p(t.y)+n);else{var c=t._ysize/d.h,f=t.y-(t._yshift+t.yshift)/d.h-c/2;le[u+".y"]=$L.align(f-n/d.h,c,0,1,t.yanchor)}i&&a||(o=$L.getCursor(i?.5:le[u+".x"],a?.5:le[u+".y"],t.xanchor,t.yanchor))}y.attr({transform:"translate("+e+","+n+")"+ue}),iO(b,o)},doneFn:function(){iO(b),rS.call("relayout",e,le);var t=document.querySelector(".js-notes-box-panel");t&&t.redraw(t.selectedObj)}})}}var l,u,c=e._fullLayout,d=e._fullLayout._size,f=e._context.edits;r?(l="annotation-"+r,u=r+".annotations["+n+"]"):(l="annotation",u="annotations["+n+"]"),c._infolayer.selectAll("."+l+'[data-index="'+n+'"]').remove();var h="clip"+c._uid+"_ann"+n;if(!t._input||!1===t.visible)return void CC.selectAll("#"+h).remove();var p={x:{},y:{}},m=+t.textangle||0,g=c._infolayer.append("g").classed(l,!0).attr("data-index",String(n)).style("opacity",t.opacity),y=g.append("g").classed("annotation-text-g",!0),v=f[t.showarrow?"annotationTail":"annotationPosition"],_=t.captureevents||f.annotationText||v,b=y.append("g").style("pointer-events",_?"all":null).call(iO,"default").on("click",function(){e._dragging=!1;var i={index:n,annotation:t._input,fullAnnotation:t,event:CC.event};r&&(i.subplotId=r),e.emit("plotly_clickannotation",i)});t.hovertext&&b.on("mouseover",function(){var n=t.hoverlabel,r=n.font,i=this.getBoundingClientRect(),a=e.getBoundingClientRect();kO.loneHover({x0:i.left-a.left,x1:i.right-a.left,y:(i.top+i.bottom)/2-a.top,text:t.hovertext,color:n.bgcolor,borderColor:n.bordercolor,fontFamily:r.family,fontSize:r.size,fontColor:r.color},{container:c._hoverlayer.node(),outerContainer:c._paper.node(),gd:e})}).on("mouseout",function(){kO.loneUnhover(c._hoverlayer.node())});var x=t.borderwidth,w=t.borderpad,k=x+w,T=b.append("rect").attr("class","bg").style("stroke-width",x+"px").call(jE.stroke,t.bordercolor).call(jE.fill,t.bgcolor),M=t.width||t.height,A=c._topclips.selectAll("#"+h).data(M?[0]:[]);A.enter().append("clipPath").classed("annclip",!0).attr("id",h).append("rect"),A.exit().remove();var C=t.font,S=b.append("text").classed("annotation-text",!0).text(t.text);f.annotationText?S.call(sP.makeEditable,{delegate:b,gd:e}).call(o).on("edit",function(n){t.text=n,this.call(o);var r={};r[u+".text"]=t.text,i&&i.autorange&&(r[i._name+".autorange"]=!0),a&&a.autorange&&(r[a._name+".autorange"]=!0),rS.call("relayout",e,r)}):S.call(o)}function Ua(e){var t=e._fullLayout;uE.filterVisible(t.annotations).forEach(function(t){var n,r,i,a,o=PI.getFromId(e,t.xref),s=PI.getFromId(e,t.yref),l=3*t.arrowsize*t.arrowwidth||0,u=3*t.startarrowsize*t.arrowwidth||0;o&&o.autorange&&(n=l+t.xshift,r=l-t.xshift,i=u+t.xshift,a=u-t.xshift,t.axref===t.xref?(PI.expand(o,[o.r2c(t.x)],{ppadplus:n,ppadminus:r}),PI.expand(o,[o.r2c(t.ax)],{ppadplus:Math.max(t._xpadplus,i),ppadminus:Math.max(t._xpadminus,a)})):(i=t.ax?i+t.ax:i,a=t.ax?a-t.ax:a,PI.expand(o,[o.r2c(t.x)],{ppadplus:Math.max(t._xpadplus,n,i),ppadminus:Math.max(t._xpadminus,r,a)}))),s&&s.autorange&&(n=l-t.yshift,r=l+t.yshift,i=u-t.yshift,a=u+t.yshift,t.ayref===t.yref?(PI.expand(s,[s.r2c(t.y)],{ppadplus:n,ppadminus:r}),PI.expand(s,[s.r2c(t.ay)],{ppadplus:Math.max(t._ypadplus,i),ppadminus:Math.max(t._ypadminus,a)})):(i=t.ay?i+t.ay:i,a=t.ay?a-t.ay:a,PI.expand(s,[s.r2c(t.y)],{ppadplus:Math.max(t._ypadplus,n,i),ppadminus:Math.max(t._ypadminus,r,a)})))})}function Va(e,t){var n=Wa(e,t);return n.on.length>0||n.explicitOff.length>0}function Ha(e,t){var n,r=Wa(e,t),i=r.on,a=r.off.concat(r.explicitOff),o={};if(i.length||a.length){for(n=0;n<i.length;n++)o["annotations["+i[n]+"].visible"]=!0;for(n=0;n<a.length;n++)o["annotations["+a[n]+"].visible"]=!1;return rS.call("update",e,{},o)}}function Wa(e,t){var n,r,i,a,o,s,l,u,c=e._fullLayout.annotations,d=[],f=[],h=[],p=(t||[]).length;for(n=0;n<c.length;n++)if(i=c[n],a=i.clicktoshow){for(r=0;r<p;r++)if(o=t[r],s=o.xaxis,l=o.yaxis,s._id===i.xref&&l._id===i.yref&&s.d2r(o.x)===qa(i._xclick,s)&&l.d2r(o.y)===qa(i._yclick,l)){u=i.visible?"onout"===a?f:h:d,u.push(n);break}r===p&&i.visible&&"onout"===a&&f.push(n)}return{on:d,off:f,explicitOff:h}}function qa(e,t){return"log"===t.type?t.l2r(e):t.d2r(e)}function Ga(e,t){var n=t.fullSceneLayout,r=n.domain,i=t.fullLayout._size,a={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};e._xa={},uE.extendFlat(e._xa,a),PI.setConvert(e._xa),e._xa._offset=i.l+r.x[0]*i.w,e._xa.l2p=function(){return.5*(1+e._pdata[0]/e._pdata[3])*i.w*(r.x[1]-r.x[0])},e._ya={},uE.extendFlat(e._ya,a),PI.setConvert(e._ya),e._ya._offset=i.t+(1-r.y[1])*i.h,e._ya.l2p=function(){return.5*(1-e._pdata[1]/e._pdata[3])*i.h*(r.y[1]-r.y[0])}}function Ya(e,t,n,r,i){function a(n,r){return uE.coerce(e,t,Fj,n,r)}function o(e){var r=e+"axis",i={_fullLayout:{}};return i._fullLayout[r]=n[r],PI.coercePosition(t,i,a,e,e,.5)}return a("visible",!i.itemIsNotPlainObject)?(Ij(e,t,r.fullLayout,a),o("x"),o("y"),o("z"),uE.noneOrAll(e,t,["x","y","z"]),t.xref="x",t.yref="y",t.zref="z",a("xanchor"),a("yanchor"),a("xshift"),a("yshift"),t.showarrow&&(t.axref="pixel",t.ayref="pixel",a("ax",-10),a("ay",-30),uE.noneOrAll(e,t,["ax","ay"])),t):t}function Xa(e,t){var n,r,i=[0,0,0,0];for(n=0;n<4;++n)for(r=0;r<4;++r)i[r]+=e[4*n+r]*t[n];return i}function Za(e,t){return Xa(e.projection,Xa(e.view,Xa(e.model,[t[0],t[1],t[2],1])))}function Ja(e,t){var n=rS.subplotsRegistry.gl3d;if(n)for(var r=n.attrRegex,i=Object.keys(e),a=0;a<i.length;a++){var o=i[a];r.test(o)&&(e[o].annotations||[]).length&&(uE.pushUnique(t._basePlotModules,n),uE.pushUnique(t._subplots.gl3d,o))}}function Ka(e,t){return"percent"===e?function(e){return Math.abs(e*t/100)}:"constant"===e?function(){return Math.abs(t)}:"sqrt"===e?function(e){return Math.sqrt(Math.abs(e))}:void 0}function Qa(e,t,n,r){var i=t["error_"+r]||{},a=i.visible&&-1!==["linear","log"].indexOf(n.type),o=[];if(a){for(var s=Yj(i),l=0;l<e.length;l++){var u=e[l],c=u[r];if(SC(n.c2l(c))){var d=s(c,l);if(SC(d[0])&&SC(d[1])){var f=u[r+"s"]=c-d[0],h=u[r+"h"]=c+d[1];o.push(f,h)}}}PI.expand(n,o,{padded:!0})}}function $a(e,t,n){var r={x:t.c2p(e.x),y:n.c2p(e.y)};return void 0!==e.yh&&(r.yh=n.c2p(e.yh),r.ys=n.c2p(e.ys),SC(r.ys)||(r.noYS=!0,r.ys=n.c2p(e.ys,!0))),void 0!==e.xh&&(r.xh=t.c2p(e.xh),r.xs=t.c2p(e.xs),SC(r.xs)||(r.noXS=!0,r.xs=t.c2p(e.xs,!0))),r}function eo(e,t){for(var n=e.x||[],r=e.y||[],i=n.length||r.length,a=new Array(i),o=0;o<i;o++)a[o]={x:n[o],y:r[o]};return a[0].trace=e,Xj({calcdata:[a],_fullLayout:t}),a}function to(e,t,n){(t.error_y||{}).visible&&(n.yerr=e.yh-e.y,t.error_y.symmetric||(n.yerrneg=e.y-e.ys)),(t.error_x||{}).visible&&(n.xerr=e.xh-e.x,t.error_x.symmetric||(n.xerrneg=e.x-e.xs))}function no(e,t){function n(e,t){return uE.coerce(r,u,aB,e,t)}var r=e.grid;if(r){var i,a,o=Array.isArray(r.subplots)&&Array.isArray(r.subplots[0]),s=Array.isArray(r.xaxes),l=Array.isArray(r.yaxes);o?(i=r.subplots.length,a=r.subplots[0].length):(l&&(i=r.yaxes.length),s&&(a=r.xaxes.length));var u=t.grid={},c=n("rows",i),d=n("columns",a);if(c*d>1){if(!o&&!s&&!l){"independent"===n("pattern")&&(o=!0)}u._hasSubplotGrid=o;var f=n("roworder"),h="top to bottom"===f;u._domains={x:ro("x",n,o?.2:.1,d),y:ro("y",n,o?.3:.1,c,h)}}}}function ro(e,t,n,r,i){var a=t(e+"gap",n),o=t("domain."+e);t(e+"side");for(var s=new Array(r),l=o[0],u=(o[1]-l)/(r-a),c=u*(1-a),d=0;d<r;d++){var f=l+u*d;s[i?r-1-d:d]=[f,f+c]}return s}function io(e,t){var n=t.grid;if(n&&n._domains){var r,i,a,o,s,l,u,c=e.grid,d=t._subplots,f=n._hasSubplotGrid,h=n.rows,p=n.columns,m="independent"===n.pattern,g=n._axisMap={};if(f){var y=c.subplots||[];l=n.subplots=new Array(h);var v=1;for(r=0;r<h;r++){var _=l[r]=new Array(p),b=y[r]||[];for(i=0;i<p;i++)if(m?(s=1===v?"xy":"x"+v+"y"+v,v++):s=b[i],_[i]="",-1!==d.cartesian.indexOf(s)){if(u=s.indexOf("y"),a=s.slice(0,u),o=s.slice(u),void 0!==g[a]&&g[a]!==i||void 0!==g[o]&&g[o]!==r)continue;_[i]=s,g[a]=i,g[o]=r}}}else n.xaxes=ao(c.xaxes,d.xaxis,p,g,"x"),n.yaxes=ao(c.yaxes,d.yaxis,h,g,"y");var x=n._anchors={},w="top to bottom"===n.roworder;for(var k in g){var T,M,A,C=k.charAt(0),S=n[C+"side"];if(S.length<8)x[k]="free";else if("x"===C){if("t"===S.charAt(0)===w?(T=0,M=1,A=h):(T=h-1,M=-1,A=-1),f){var E=g[k];for(r=T;r!==A;r+=M)if((s=l[r][E])&&(u=s.indexOf("y"),s.slice(0,u)===k)){x[k]=s.slice(u);break}}else for(r=T;r!==A;r+=M)if(o=n.yaxes[r],-1!==d.cartesian.indexOf(k+o)){x[k]=o;break}}else if("l"===S.charAt(0)?(T=0,M=1,A=p):(T=p-1,M=-1,A=-1),f){var P=g[k];for(r=T;r!==A;r+=M)if((s=l[P][r])&&(u=s.indexOf("y"),s.slice(u)===k)){x[k]=s.slice(0,u);break}}else for(r=T;r!==A;r+=M)if(a=n.xaxes[r],-1!==d.cartesian.indexOf(a+k)){x[k]=a;break}}}}function ao(e,t,n,r,i){function a(e,n){-1!==t.indexOf(n)&&void 0===r[n]?(s[e]=n,r[n]=e):s[e]=""}var o,s=new Array(n);if(Array.isArray(e))for(o=0;o<n;o++)a(o,e[o]);else for(a(0,i),o=1;o<n;o++)a(o,i+(o+1));return s}function oo(e,t,n){function r(n,r){return uE.coerce(e,t,sB,n,r)}if(!r("visible",!!r("source")))return t;r("layer"),r("xanchor"),r("yanchor"),r("sizex"),r("sizey"),r("sizing"),r("opacity");for(var i={_fullLayout:n},a=["x","y"],o=0;o<2;o++){var s=a[o],l=PI.coerceRef(e,t,i,s,"paper");PI.coercePosition(t,i,r,l,s,0)}return t}function so(e,t){function n(n){sP.convertToTspans(n,t,function(){uo(e,t)})}var r=e.data()[0][0],i=t._fullLayout,a=r.trace,o=rS.traceIs(a,"pie"),s=a.index,l=o?r.label:a.name,u=e.selectAll("text.legendtext").data([0]);u.enter().append("text").classed("legendtext",!0),u.attr("text-anchor","start").classed("user-select-none",!0).call(PP.font,i.legend.font).text(l),t._context.edits.legendText&&!o?u.call(sP.makeEditable,{gd:t}).call(n).on("edit",function(e){this.text(e).call(n);var i=e;this.text()||(e="    ");var a,o,l=r.trace._fullInput||{},u={};if(-1!==["ohlc","candlestick"].indexOf(l.type))a=r.trace.transforms,o=a[a.length-1].direction,u[o+".name"]=e;else if(rS.hasTransform(l,"groupby")){var c=rS.getTransformIndices(l,"groupby"),d=c[c.length-1],f=uE.keyedContainer(l,"transforms["+d+"].styles","target","value.name");""===i?f.remove(r.trace._group):f.set(r.trace._group,e),u=f.constructUpdate()}else u.name=e;return rS.call("restyle",t,u,s)}):n(u)}function lo(e,t){var n,r=1,i=e.selectAll("rect").data([0]);i.enter().append("rect").classed("legendtoggle",!0).style("cursor","pointer").attr("pointer-events","all").call(jE.fill,"rgba(0,0,0,0)"),i.on("mousedown",function(){n=(new Date).getTime(),n-t._legendMouseDownTime<SB?r+=1:(r=1,t._legendMouseDownTime=n)}),i.on("mouseup",function(){if(!t._dragged&&!t._editing){var n=t._fullLayout.legend;(new Date).getTime()-t._legendMouseDownTime>SB&&(r=Math.max(r-1,1)),1===r?n._clickTimeout=setTimeout(function(){bB(e,t,r)},SB):2===r&&(n._clickTimeout&&clearTimeout(n._clickTimeout),t._legendMouseDownTime=0,bB(e,t,r))}})}function uo(e,t){var n=e.data()[0][0];if(!n.trace.showlegend)return void e.remove();var r,i,a=e.select("g[class*=math-group]"),o=a.node(),s=t._fullLayout.legend,l=s.font.size*MB;if(o){var u=PP.bBox(o);r=u.height,i=u.width,PP.setTranslate(a,0,r/4)}else{var c=e.select(".legendtext"),d=sP.lineCount(c),f=c.node();r=l*d,i=f?PP.bBox(f).width:0;var h=l*(.3+(1-d)/2);sP.positionText(c,40,h)}r=Math.max(r,16)+3,n.height=r,n.width=i}function co(e,t,n){var r=e._fullLayout,i=r.legend,a=i.borderwidth,o=pB.isGrouped(i),s=0;if(i._width=0,i._height=0,pB.isVertical(i))o&&t.each(function(e,t){PP.setTranslate(this,0,t*i.tracegroupgap)}),n.each(function(e){var t=e[0],n=t.height,r=t.width;PP.setTranslate(this,a,5+a+i._height+n/2),i._height+=n,i._width=Math.max(i._width,r)}),i._width+=45+2*a,i._height+=10+2*a,o&&(i._height+=(i._lgroupsLength-1)*i.tracegroupgap),s=40;else if(o){for(var l=[i._width],u=t.data(),c=0,d=u.length;c<d;c++){var f=u[c].map(function(e){return e[0].width}),h=40+Math.max.apply(null,f);i._width+=i.tracegroupgap+h,l.push(i._width)}t.each(function(e,t){PP.setTranslate(this,l[t],0)}),t.each(function(){var e=CC.select(this),t=e.selectAll("g.traces"),n=0;t.each(function(e){var t=e[0],r=t.height;PP.setTranslate(this,0,5+a+n+r/2),n+=r}),i._height=Math.max(i._height,n)}),i._height+=10+2*a,i._width+=2*a}else{var p,m=0,g=0,y=0,v=0,_=0,b=i.tracegroupgap||5;n.each(function(e){y=Math.max(40+e[0].width,y),_+=40+e[0].width+b}),p=r.width-(r.margin.r+r.margin.l)>a+_-b,n.each(function(e){var t=e[0],n=p?40+e[0].width:y;a+v+b+n>r.width-(r.margin.r+r.margin.l)&&(v=0,m+=g,i._height=i._height+g,g=0),PP.setTranslate(this,a+v,5+a+t.height/2+m),i._width+=b+n,i._height=Math.max(i._height,t.height),v+=b+n,g=Math.max(t.height,g)}),i._width+=2*a,i._height+=10+2*a}i._width=Math.ceil(i._width),i._height=Math.ceil(i._height),n.each(function(t){var n=t[0],r=CC.select(this).select(".legendtoggle");PP.setRect(r,0,-n.height/2,(e._context.edits.legendText?0:i._width)+s,n.height)})}function fo(e){var t=e._fullLayout,n=t.legend,r="left";gB.isRightAnchor(n)?r="right":gB.isCenterAnchor(n)&&(r="center");var i="top";gB.isBottomAnchor(n)?i="bottom":gB.isMiddleAnchor(n)&&(i="middle"),lI.autoMargin(e,"legend",{x:n.x,y:n.y,l:n._width*AB[r],r:n._width*CB[r],b:n._height*CB[i],t:n._height*AB[i]})}function ho(e){var t=e._fullLayout,n=t.legend,r="left";gB.isRightAnchor(n)?r="right":gB.isCenterAnchor(n)&&(r="center"),lI.autoMargin(e,"legend",{x:n.x,y:.5,l:n._width*AB[r],r:n._width*CB[r],b:0,t:0})}function po(e,t,n){function r(e,t){return uE.coerce(i,a,IB,e,t)}for(var i,a,o=e.buttons||[],s=t.buttons=[],l=0;l<o.length;l++)if(i=o[l],a={},uE.isPlainObject(i)){var u=r("step");"all"!==u&&(!n||"gregorian"===n||"month"!==u&&"year"!==u?r("stepmode"):a.stepmode="backward",r("count")),r("label"),a._index=l,s.push(a)}return s}function mo(e,t,n){for(var r=n.filter(function(n){return t[n].anchor===e._id}),i=0,a=0;a<r.length;a++){var o=t[r[a]].domain;o&&(i=Math.max(o[1],i))}return[e.domain[0],i+zB.yPad]}function go(e,t){var n,r=e.range,i=new Date(e.r2l(r[1])),a=t.step,o=t.count;switch(t.stepmode){case"backward":n=e.l2r(+CC.time[a].utc.offset(i,-o));break;case"todate":var s=CC.time[a].utc.offset(i,-o);n=e.l2r(+CC.time[a].utc.ceil(s))}return[n,r[1]]}function yo(e){for(var t=oI.list(e,"x",!0),n=[],r=0;r<t.length;r++){var i=t[r];i.rangeselector&&i.rangeselector.visible&&n.push(i)}return n}function vo(e){return e._id}function _o(e,t,n){if("all"===t.step)return!0===e.autorange;var r=Object.keys(n);return e.range[0]===n[r[0]]&&e.range[1]===n[r[1]]}function bo(e,t,n){var r=e.selectAll("rect").data([0]);r.enter().append("rect").classed("selector-rect",!0),r.attr("shape-rendering","crispEdges"),r.attr({rx:zB.rx,ry:zB.ry}),r.call(jE.stroke,t.bordercolor).call(jE.fill,xo(t,n)).style("stroke-width",t.borderwidth+"px")}function xo(e,t){return t._isActive||t._isHovered?e.activecolor:e.bgcolor}function wo(e,t,n,r){function i(e){sP.convertToTspans(e,r)}var a=e.selectAll("text").data([0]);a.enter().append("text").classed("selector-text",!0).classed("user-select-none",!0),a.attr("text-anchor","middle"),a.call(PP.font,t.font).text(ko(n)).call(i)}function ko(e){return e.label?e.label:"all"===e.step?"all":e.count+e.step.charAt(0)}function To(e,t,n,r,i){var a=0,o=0,s=n.borderwidth;t.each(function(){var e=CC.select(this),t=e.select(".selector-text"),r=n.font.size*NB,i=Math.max(r*sP.lineCount(t),16)+3;o=Math.max(o,i)}),t.each(function(){var e=CC.select(this),t=e.select(".selector-rect"),r=e.select(".selector-text"),i=r.node()&&PP.bBox(r.node()).width,l=n.font.size*NB,u=sP.lineCount(r),c=Math.max(i+10,zB.minButtonWidth);e.attr("transform","translate("+(s+a)+","+s+")"),t.attr({x:0,y:0,width:c,height:o}),sP.positionText(r,c/2,o/2-(u-1)*l/2+3),a+=c+5});var l=e._fullLayout._size,u=l.l+l.w*n.x,c=l.t+l.h*(1-n.y),d="left";gB.isRightAnchor(n)&&(u-=a,d="right"),gB.isCenterAnchor(n)&&(u-=a/2,d="center");var f="top";gB.isBottomAnchor(n)&&(c-=o,f="bottom"),gB.isMiddleAnchor(n)&&(c-=o/2,f="middle"),a=Math.ceil(a),o=Math.ceil(o),u=Math.round(u),c=Math.round(c),lI.autoMargin(e,r+"-range-selector",{x:n.x,y:n.y,l:a*FB[d],r:a*jB[d],b:o*jB[f],t:o*FB[f]}),i.attr("transform","translate("+u+","+c+")")}function Mo(e){var t=PI.list({_fullLayout:e},"x",!0),n=HB.name,r=[];if(e._has("gl2d"))return r;for(var i=0;i<t.length;i++){var a=t[i];a[n]&&a[n].visible&&r.push(a)}return r}function Ao(e,t,n,r){var i=e.select("rect."+HB.slideBoxClassName).node(),a=e.select("rect."+HB.grabAreaMinClassName).node(),o=e.select("rect."+HB.grabAreaMaxClassName).node();e.on("mousedown",function(){function s(s){var l,u,g,y=+s.clientX-d;switch(c){case i:g="ew-resize",l=h+y,u=p+y;break;case a:g="col-resize",l=h+y,u=p;break;case o:g="col-resize",l=h,u=p+y;break;default:g="ew-resize",l=f,u=f+y}if(u<l){var v=u;u=l,l=v}r._pixelMin=l,r._pixelMax=u,iO(CC.select(m),g),Co(e,t,n,r)}function l(){m.removeEventListener("mousemove",s),m.removeEventListener("mouseup",l),uE.removeElement(m)}var u=CC.event,c=u.target,d=u.clientX,f=d-e.node().getBoundingClientRect().left,h=r.d2p(n._rl[0]),p=r.d2p(n._rl[1]),m=$L.coverSlip();m.addEventListener("mousemove",s),m.addEventListener("mouseup",l)})}function Co(e,t,n,r){function i(e){return n.l2r(uE.constrain(e,r._rl[0],r._rl[1]))}var a=i(r.p2d(r._pixelMin)),o=i(r.p2d(r._pixelMax));window.requestAnimationFrame(function(){rS.call("relayout",t,n._name+".range",[a,o])})}function So(e,t,n,r,i,a){function o(e){return uE.constrain(e,0,r._width)}function s(e){return uE.constrain(e,0,r._height)}function l(e){return uE.constrain(e,-u,r._width+u)}var u=HB.handleWidth/2,c=o(r.d2p(n._rl[0])),d=o(r.d2p(n._rl[1]));if(e.select("rect."+HB.slideBoxClassName).attr("x",c).attr("width",d-c),e.select("rect."+HB.maskMinClassName).attr("width",c),e.select("rect."+HB.maskMaxClassName).attr("x",d).attr("width",r._width-d),"match"!==a.rangemode){var f=r._height-s(r.d2pOppAxis(i._rl[1])),h=r._height-s(r.d2pOppAxis(i._rl[0]));e.select("rect."+HB.maskMinOppAxisClassName).attr("x",c).attr("height",f).attr("width",d-c),e.select("rect."+HB.maskMaxOppAxisClassName).attr("x",c).attr("y",h).attr("height",r._height-h).attr("width",d-c),e.select("rect."+HB.slideBoxClassName).attr("y",f).attr("height",h-f)}var p=Math.round(l(c-u))-.5,m=Math.round(l(d-u))+.5;e.select("g."+HB.grabberMinClassName).attr("transform","translate("+p+",0.5)"),e.select("g."+HB.grabberMaxClassName).attr("transform","translate("+m+",0.5)")}function Eo(e,t,n,r){var i=e.selectAll("rect."+HB.bgClassName).data([0]);i.enter().append("rect").classed(HB.bgClassName,!0).attr({x:0,y:0,"shape-rendering":"crispEdges"});var a=r.borderwidth%2===0?r.borderwidth:r.borderwidth-1,o=-r._offsetShift,s=PP.crispRound(t,r.borderwidth);i.attr({width:r._width+a,height:r._height+a,transform:"translate("+o+","+o+")",fill:r.bgcolor,stroke:r.bordercolor,"stroke-width":s})}function Po(e,t,n,r){var i=t._fullLayout,a=i._topdefs.selectAll("#"+r._clipId).data([0]);a.enter().append("clipPath").attr("id",r._clipId).append("rect").attr({x:0,y:0}),a.select("rect").attr({width:r._width,height:r._height})}function Io(e,t,n,r){var i=PI.getSubplots(t,n),a=t.calcdata,o=e.selectAll("g."+HB.rangePlotClassName).data(i,uE.identity);o.enter().append("g").attr("class",function(e){return HB.rangePlotClassName+" "+e}).call(PP.setClipUrl,r._clipId),o.order(),o.exit().remove();var s;o.each(function(e,i){var o=CC.select(this),l=0===i,u=PI.getFromId(t,e,"y"),c=u._name,d=r[c],f={data:[],layout:{xaxis:{type:n.type,domain:[0,1],range:r.range.slice(),calendar:n.calendar},width:r._width,height:r._height,margin:{t:0,b:0,l:0,r:0}},_context:t._context};f.layout[c]={type:u.type,domain:[0,1],range:"match"!==d.rangemode?d.range.slice():u.range.slice(),calendar:u.calendar},lI.supplyDefaults(f);var h=f._fullLayout.xaxis,p=f._fullLayout[c],m={id:e,plotgroup:o,xaxis:h,yaxis:p};l?s=m:(m.mainplot="xy",m.mainplotinfo=s),xL.rangePlot(t,m,Lo(a,e))})}function Lo(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i[0].trace;a.xaxis+a.yaxis===t&&n.push(i)}return n}function Oo(e,t,n,r,i){var a=e.selectAll("rect."+HB.maskMinClassName).data([0]);a.enter().append("rect").classed(HB.maskMinClassName,!0).attr({x:0,y:0}).attr("shape-rendering","crispEdges"),a.attr("height",r._height).call(jE.fill,HB.maskColor);var o=e.selectAll("rect."+HB.maskMaxClassName).data([0]);if(o.enter().append("rect").classed(HB.maskMaxClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),o.attr("height",r._height).call(jE.fill,HB.maskColor),"match"!==i.rangemode){var s=e.selectAll("rect."+HB.maskMinOppAxisClassName).data([0]);s.enter().append("rect").classed(HB.maskMinOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),s.attr("width",r._width).call(jE.fill,HB.maskOppAxisColor);var l=e.selectAll("rect."+HB.maskMaxOppAxisClassName).data([0]);l.enter().append("rect").classed(HB.maskMaxOppAxisClassName,!0).attr("y",0).attr("shape-rendering","crispEdges"),l.attr("width",r._width).style("border-top",HB.maskOppBorder).call(jE.fill,HB.maskOppAxisColor)}}function zo(e,t,n,r){if(!t._context.staticPlot){var i=e.selectAll("rect."+HB.slideBoxClassName).data([0]);i.enter().append("rect").classed(HB.slideBoxClassName,!0).attr("y",0).attr("cursor",HB.slideBoxCursor).attr("shape-rendering","crispEdges"),i.attr({height:r._height,fill:HB.slideBoxFill})}}function Ro(e,t,n,r){var i=e.selectAll("g."+HB.grabberMinClassName).data([0]);i.enter().append("g").classed(HB.grabberMinClassName,!0);var a=e.selectAll("g."+HB.grabberMaxClassName).data([0]);a.enter().append("g").classed(HB.grabberMaxClassName,!0);var o={x:0,width:HB.handleWidth,rx:HB.handleRadius,fill:jE.background,stroke:jE.defaultLine,"stroke-width":HB.handleStrokeWidth,"shape-rendering":"crispEdges"},s={y:Math.round(r._height/4),height:Math.round(r._height/2)},l=i.selectAll("rect."+HB.handleMinClassName).data([0]);l.enter().append("rect").classed(HB.handleMinClassName,!0).attr(o),l.attr(s);var u=a.selectAll("rect."+HB.handleMaxClassName).data([0]);if(u.enter().append("rect").classed(HB.handleMaxClassName,!0).attr(o),u.attr(s),!t._context.staticPlot){var c={width:HB.grabAreaWidth,x:0,y:0,fill:HB.grabAreaFill,cursor:HB.grabAreaCursor},d=i.selectAll("rect."+HB.grabAreaMinClassName).data([0]);d.enter().append("rect").classed(HB.grabAreaMinClassName,!0).attr(c),d.attr("height",r._height);var f=a.selectAll("rect."+HB.grabAreaMaxClassName).data([0]);f.enter().append("rect").classed(HB.grabAreaMaxClassName,!0).attr(c),f.attr("height",r._height)}}function Do(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];-1!==i.indexOf(HB.name)&&lI.autoMargin(e,i)}}function No(e,t,n,r,i){var a="category"===e.type?e.r2c:e.d2c;if(void 0!==t)return[a(t),a(n)];if(r){var o,s,l,u,c,d=1/0,f=-1/0,h=r.match(tU.segmentRE);for("date"===e.type&&(a=nU.decodeDate(a)),o=0;o<h.length;o++)s=h[o],void 0!==(l=i[s.charAt(0)].drawn)&&(!(u=h[o].substr(1).match(tU.paramRE))||u.length<l||(c=a(u[l]),c<d&&(d=c),c>f&&(f=c)));return f>=d?[d,f]:void 0}}function Fo(e){var t=e._fullLayout;t._shapeUpperLayer.selectAll("path").remove(),t._shapeLowerLayer.selectAll("path").remove(),t._shapeSubplotLayers.selectAll("path").remove();for(var n=0;n<t.shapes.length;n++)t.shapes[n].visible&&jo(e,n)}function jo(e,t){function n(n){var r={"data-index":t,"fill-rule":"evenodd",d:Uo(e,i)},a=i.line.width?i.line.color:"rgba(0,0,0,0)",o=n.append("path").attr(r).style("opacity",i.opacity).call(jE.stroke,a).call(jE.fill,i.fillcolor).call(PP.dashLine,i.line.dash,i.line.width),s=(i.xref+i.yref).replace(/paper/g,"");o.call(PP.setClipUrl,s?"clip"+e._fullLayout._uid+s:null),e._context.edits.shapePosition&&Bo(e,o,i,t)}e._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+t+'"]').remove();var r=(e.layout.shapes||[])[t],i=e._fullLayout.shapes[t];if(r&&!1!==i.visible)if("below"!==i.layer)n(e._fullLayout._shapeUpperLayer);else if("paper"===i.xref||"paper"===i.yref)n(e._fullLayout._shapeLowerLayer);else{var a=e._fullLayout._plots[i.xref+i.yref];if(a){var o=a.mainplotinfo||a;n(o.shapelayer)}else n(e._fullLayout._shapeLowerLayer)}}function Bo(e,t,n,r){function i(e){var n=V.right-V.left,r=V.bottom-V.top,i=e.clientX-V.left,a=e.clientY-V.top,o=n>j&&r>B&&!e.shiftKey?$L.getCursor(i/n,1-a/r):"move";iO(t,o),F=o.split("-")[0]}function a(t){L=PI.getFromId(e,n.xref),O=PI.getFromId(e,n.yref),z=nU.getDataToPixel(e,L),R=nU.getDataToPixel(e,O,!0),D=nU.getPixelToData(e,L),N=nU.getPixelToData(e,O,!0);var a="shapes["+r+"]";"path"===n.type?(P=n.path,I=a+".path"):(c=z(n.x0),d=R(n.y0),f=z(n.x1),h=R(n.y1),p=a+".x0",m=a+".y0",g=a+".x1",y=a+".y1"),c<f?(b=c,T=a+".x0",S="x0",x=f,M=a+".x1",E="x1"):(b=f,T=a+".x1",S="x1",x=c,M=a+".x0",E="x0"),d<h?(v=d,w=a+".y0",A="y0",_=h,k=a+".y1",C="y1"):(v=h,w=a+".y1",A="y1",_=d,k=a+".y0",C="y0"),u={},i(t),U.moveFn="move"===F?s:l}function o(){iO(t),rS.call("relayout",e,u)}function s(r,i){if("path"===n.type){var a=function(e){return D(z(e)+r)};L&&"date"===L.type&&(a=nU.encodeDate(a));var o=function(e){return N(R(e)+i)};O&&"date"===O.type&&(o=nU.encodeDate(o)),n.path=Ho(P,a,o),u[I]=n.path}else u[p]=n.x0=D(c+r),u[m]=n.y0=N(d+i),u[g]=n.x1=D(f+r),u[y]=n.y1=N(h+i);t.attr("d",Uo(e,n))}function l(r,i){if("path"===n.type){var a=function(e){return D(z(e)+r)};L&&"date"===L.type&&(a=nU.encodeDate(a));var o=function(e){return N(R(e)+i)};O&&"date"===O.type&&(o=nU.encodeDate(o)),n.path=Ho(P,a,o),u[I]=n.path}else{var s=~F.indexOf("n")?v+i:v,l=~F.indexOf("s")?_+i:_,c=~F.indexOf("w")?b+r:b,d=~F.indexOf("e")?x+r:x;l-s>B&&(u[w]=n[A]=N(s),u[k]=n[C]=N(l)),d-c>j&&(u[T]=n[S]=D(c),u[M]=n[E]=D(d))}t.attr("d",Uo(e,n))}var u,c,d,f,h,p,m,g,y,v,_,b,x,w,k,T,M,A,C,S,E,P,I,L,O,z,R,D,N,F,j=10,B=10,U={element:t.node(),gd:e,prepFn:a,doneFn:o},V=U.element.getBoundingClientRect();$L.init(U),t.node().onmousemove=i}function Uo(e,t){var n,r,i,a,o=t.type,s=PI.getFromId(e,t.xref),l=PI.getFromId(e,t.yref),u=e._fullLayout._size;if(s?(n=nU.shapePositionToRange(s),r=function(e){return s._offset+s.r2p(n(e,!0))}):r=function(e){return u.l+u.w*e},l?(i=nU.shapePositionToRange(l),a=function(e){return l._offset+l.r2p(i(e,!0))}):a=function(e){return u.t+u.h*(1-e)},"path"===o)return s&&"date"===s.type&&(r=nU.decodeDate(r)),l&&"date"===l.type&&(a=nU.decodeDate(a)),Vo(t.path,r,a);var c=r(t.x0),d=r(t.x1),f=a(t.y0),h=a(t.y1);if("line"===o)return"M"+c+","+f+"L"+d+","+h;if("rect"===o)return"M"+c+","+f+"H"+d+"V"+h+"H"+c+"Z";var p=(c+d)/2,m=(f+h)/2,g=Math.abs(p-c),y=Math.abs(m-f),v="A"+g+","+y,_=p+g+","+m;return"M"+_+v+" 0 1,1 "+p+","+(m-y)+v+" 0 0,1 "+_+"Z"}function Vo(e,t,n){return e.replace(tU.segmentRE,function(e){var r=0,i=e.charAt(0),a=tU.paramIsX[i],o=tU.paramIsY[i],s=tU.numParams[i],l=e.substr(1).replace(tU.paramRE,function(e){return a[r]?e=t(e):o[r]&&(e=n(e)),r++,r>s&&(e="X"),e});return r>s&&(l=l.replace(/[\s,]*X.*/,""),uE.log("Ignoring extra params in segment "+e)),i+l})}function Ho(e,t,n){return e.replace(tU.segmentRE,function(e){var r=0,i=e.charAt(0),a=tU.paramIsX[i],o=tU.paramIsY[i],s=tU.numParams[i];return i+e.substr(1).replace(tU.paramRE,function(e){return r>=s?e:(a[r]?e=t(e):o[r]&&(e=n(e)),r++,e)})})}function Wo(e,t,n){function r(n,r){return uE.coerce(e,t,hU,n,r)}r("visible",qo(e,t).length>0)&&(r("active"),r("x"),r("y"),uE.noneOrAll(e,t,["x","y"]),r("xanchor"),r("yanchor"),r("len"),r("lenmode"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),uE.coerceFont(r,"font",n.font),r("currentvalue.visible")&&(r("currentvalue.xanchor"),r("currentvalue.prefix"),r("currentvalue.suffix"),r("currentvalue.offset"),uE.coerceFont(r,"currentvalue.font",t.font)),r("transition.duration"),r("transition.easing"),r("bgcolor"),r("activebgcolor"),r("bordercolor"),r("borderwidth"),r("ticklen"),r("tickwidth"),r("tickcolor"),r("minorticklen"))}function qo(e,t){function n(e,t){return uE.coerce(r,i,mU,e,t)}for(var r,i,a=e.steps||[],o=t.steps=[],s=0;s<a.length;s++)r=a[s],i={},n("method"),uE.isPlainObject(r)&&("skip"===i.method||Array.isArray(r.args))&&(n("args"),n("label","step-"+s),n("value",i.label),n("execute"),o.push(i));return o}function Go(e,t){for(var n=e[lU.name],r=[],i=0;i<n.length;i++){var a=n[i];a.visible&&a.steps.length&&(a._gd=t,r.push(a))}return r}function Yo(e){return e._index}function Xo(e,t){var n=PP.tester.selectAll("g."+lU.labelGroupClass).data(t.steps);n.enter().append("g").classed(lU.labelGroupClass,!0);var r=0,i=0;n.each(function(e){var n=CC.select(this),a=Qo(n,{step:e},t),o=a.node();if(o){var s=PP.bBox(o);i=Math.max(i,s.height),r=Math.max(r,s.width)}}),n.remove();var a=t._dims={};a.inputAreaWidth=Math.max(lU.railWidth,lU.gripHeight);var o=e._fullLayout._size;a.lx=o.l+o.w*t.x,a.ly=o.t+o.h*(1-t.y),"fraction"===t.lenmode?a.outerLength=Math.round(o.w*t.len):a.outerLength=t.len,a.inputAreaStart=0,a.inputAreaLength=Math.round(a.outerLength-t.pad.l-t.pad.r);var s=a.inputAreaLength-2*lU.stepInset,l=s/(t.steps.length-1),u=r+lU.labelPadding;if(a.labelStride=Math.max(1,Math.ceil(u/l)),a.labelHeight=i,a.currentValueMaxWidth=0,a.currentValueHeight=0,a.currentValueTotalHeight=0,a.currentValueMaxLines=1,t.currentvalue.visible){var c=PP.tester.append("g");n.each(function(e){var n=Jo(c,t,e.label),r=n.node()&&PP.bBox(n.node())||{width:0,height:0},i=sP.lineCount(n);a.currentValueMaxWidth=Math.max(a.currentValueMaxWidth,Math.ceil(r.width)),a.currentValueHeight=Math.max(a.currentValueHeight,Math.ceil(r.height)),a.currentValueMaxLines=Math.max(a.currentValueMaxLines,i)}),a.currentValueTotalHeight=a.currentValueHeight+t.currentvalue.offset,c.remove()}a.height=a.currentValueTotalHeight+lU.tickOffset+t.ticklen+lU.labelOffset+a.labelHeight+t.pad.t+t.pad.b;var d="left";gB.isRightAnchor(t)&&(a.lx-=a.outerLength,d="right"),gB.isCenterAnchor(t)&&(a.lx-=a.outerLength/2,d="center");var f="top";gB.isBottomAnchor(t)&&(a.ly-=a.height,f="bottom"),gB.isMiddleAnchor(t)&&(a.ly-=a.height/2,f="middle"),a.outerLength=Math.ceil(a.outerLength),a.height=Math.ceil(a.height),a.lx=Math.round(a.lx),a.ly=Math.round(a.ly),lI.autoMargin(e,lU.autoMarginIdRoot+t._index,{x:t.x,y:t.y,l:a.outerLength*vU[d],r:a.outerLength*_U[d],b:a.height*_U[f],t:a.height*vU[f]})}function Zo(e,t,n){n.active>=n.steps.length&&(n.active=0),t.call(Jo,n).call(us,n).call($o,n).call(rs,n).call(ls,e,n).call(Ko,e,n);var r=n._dims;PP.setTranslate(t,r.lx+n.pad.l,r.ly+n.pad.t),t.call(as,n,n.active/(n.steps.length-1),!1),t.call(Jo,n)}function Jo(e,t,n){if(t.currentvalue.visible){var r,i,a=e.selectAll("text").data([0]),o=t._dims;switch(t.currentvalue.xanchor){case"right":r=o.inputAreaLength-lU.currentValueInset-o.currentValueMaxWidth,i="left";break;case"center":r=.5*o.inputAreaLength,i="middle";break;default:r=lU.currentValueInset,i="left"}a.enter().append("text").classed(lU.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":i,"data-notex":1});var s=t.currentvalue.prefix?t.currentvalue.prefix:"";if("string"===typeof n)s+=n;else{s+=t.steps[t.active].label}t.currentvalue.suffix&&(s+=t.currentvalue.suffix),a.call(PP.font,t.currentvalue.font).text(s).call(sP.convertToTspans,t._gd);var l=sP.lineCount(a),u=(o.currentValueMaxLines+1-l)*t.currentvalue.font.size*yU;return sP.positionText(a,r,u),a}}function Ko(e,t,n){var r=e.selectAll("rect."+lU.gripRectClass).data([0]);r.enter().append("rect").classed(lU.gripRectClass,!0).call(ns,t,e,n).style("pointer-events","all"),r.attr({width:lU.gripWidth,height:lU.gripHeight,rx:lU.gripRadius,ry:lU.gripRadius}).call(jE.stroke,n.bordercolor).call(jE.fill,n.bgcolor).style("stroke-width",n.borderwidth+"px")}function Qo(e,t,n){var r=e.selectAll("text").data([0]);return r.enter().append("text").classed(lU.labelClass,!0).classed("user-select-none",!0).attr({"text-anchor":"middle","data-notex":1}),r.call(PP.font,n.font).text(t.step.label).call(sP.convertToTspans,n._gd),r}function $o(e,t){var n=e.selectAll("g."+lU.labelsClass).data([0]),r=t._dims;n.enter().append("g").classed(lU.labelsClass,!0);var i=n.selectAll("g."+lU.labelGroupClass).data(r.labelSteps);i.enter().append("g").classed(lU.labelGroupClass,!0),i.exit().remove(),i.each(function(e){var n=CC.select(this);n.call(Qo,e,t),PP.setTranslate(n,os(t,e.fraction),lU.tickOffset+t.ticklen+t.font.size*yU+lU.labelOffset+r.currentValueTotalHeight)})}function es(e,t,n,r,i){var a=Math.round(r*(n.steps.length-1));a!==n.active&&ts(e,t,n,a,!0,i)}function ts(e,t,n,r,i,a){var o=n.active;n._input.active=n.active=r;var s=n.steps[n.active];t.call(as,n,n.active/(n.steps.length-1),a),t.call(Jo,n),e.emit("plotly_sliderchange",{slider:n,step:n.steps[n.active],interaction:i,previousActive:o}),s&&s.method&&i&&(t._nextMethod?(t._nextMethod.step=s,t._nextMethod.doCallback=i,t._nextMethod.doTransition=a):(t._nextMethod={step:s,doCallback:i,doTransition:a},t._nextMethodRaf=window.requestAnimationFrame(function(){var n=t._nextMethod.step;n.method&&(n.execute&&lI.executeAPICommand(e,n.method,n.args),t._nextMethod=null,t._nextMethodRaf=null)})))}function ns(e,t,n){function r(){return n.data()[0]}var i=n.node(),a=CC.select(t);e.on("mousedown",function(){var e=r();t.emit("plotly_sliderstart",{slider:e});var o=n.select("."+lU.gripRectClass);CC.event.stopPropagation(),CC.event.preventDefault(),o.call(jE.fill,e.activebgcolor);var s=ss(e,CC.mouse(i)[0]);es(t,n,e,s,!0),e._dragging=!0,a.on("mousemove",function(){var e=r(),a=ss(e,CC.mouse(i)[0]);es(t,n,e,a,!1)}),a.on("mouseup",function(){var e=r();e._dragging=!1,o.call(jE.fill,e.bgcolor),a.on("mouseup",null),a.on("mousemove",null),t.emit("plotly_sliderend",{slider:e,step:e.steps[e.active]})})})}function rs(e,t){var n=e.selectAll("rect."+lU.tickRectClass).data(t.steps),r=t._dims;n.enter().append("rect").classed(lU.tickRectClass,!0),n.exit().remove(),n.attr({width:t.tickwidth+"px","shape-rendering":"crispEdges"}),n.each(function(e,n){var i=n%r.labelStride===0,a=CC.select(this);a.attr({height:i?t.ticklen:t.minorticklen}).call(jE.fill,t.tickcolor),PP.setTranslate(a,os(t,n/(t.steps.length-1))-.5*t.tickwidth,(i?lU.tickOffset:lU.minorTickOffset)+r.currentValueTotalHeight)})}function is(e){var t=e._dims;t.labelSteps=[];for(var n=e.steps.length,r=0;r<n;r+=t.labelStride)t.labelSteps.push({fraction:r/(n-1),step:e.steps[r]})}function as(e,t,n,r){var i=e.select("rect."+lU.gripRectClass),a=os(t,n);if(!t._invokingCommand){var o=i;r&&t.transition.duration>0&&(o=o.transition().duration(t.transition.duration).ease(t.transition.easing)),o.attr("transform","translate("+(a-.5*lU.gripWidth)+","+t._dims.currentValueTotalHeight+")")}}function os(e,t){var n=e._dims;return n.inputAreaStart+lU.stepInset+(n.inputAreaLength-2*lU.stepInset)*Math.min(1,Math.max(0,t))}function ss(e,t){var n=e._dims;return Math.min(1,Math.max(0,(t-lU.stepInset-n.inputAreaStart)/(n.inputAreaLength-2*lU.stepInset-2*n.inputAreaStart)))}function ls(e,t,n){var r=e.selectAll("rect."+lU.railTouchRectClass).data([0]),i=n._dims;r.enter().append("rect").classed(lU.railTouchRectClass,!0).call(ns,t,e,n).style("pointer-events","all"),r.attr({width:i.inputAreaLength,height:Math.max(i.inputAreaWidth,lU.tickOffset+n.ticklen+i.labelHeight)}).call(jE.fill,n.bgcolor).attr("opacity",0),PP.setTranslate(r,0,i.currentValueTotalHeight)}function us(e,t){var n=e.selectAll("rect."+lU.railRectClass).data([0]),r=t._dims;n.enter().append("rect").classed(lU.railRectClass,!0);var i=r.inputAreaLength-2*lU.railInset;n.attr({width:i,height:lU.railWidth,rx:lU.railRadius,ry:lU.railRadius,"shape-rendering":"crispEdges"}).call(jE.stroke,t.bordercolor).call(jE.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px"),PP.setTranslate(n,lU.railInset,.5*(r.inputAreaWidth-lU.railWidth)+r.currentValueTotalHeight)}function cs(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];-1!==i.indexOf(lU.autoMarginIdRoot)&&lI.autoMargin(e,i)}}function ds(e,t,n){function r(n,r){return uE.coerce(e,t,MU,n,r)}r("visible",fs(e,t).length>0)&&(r("active"),r("direction"),r("type"),r("showactive"),r("x"),r("y"),uE.noneOrAll(e,t,["x","y"]),r("xanchor"),r("yanchor"),r("pad.t"),r("pad.r"),r("pad.b"),r("pad.l"),uE.coerceFont(r,"font",n.font),r("bgcolor",n.paper_bgcolor),r("bordercolor"),r("borderwidth"))}function fs(e,t){function n(e,t){return uE.coerce(r,i,SU,e,t)}for(var r,i,a=e.buttons||[],o=t.buttons=[],s=0;s<a.length;s++)r=a[s],i={},n("method"),uE.isPlainObject(r)&&("skip"===i.method||Array.isArray(r.args))&&(n("args"),n("label"),n("execute"),i._index=s,o.push(i));return o}function hs(e,t,n){this.gd=e,this.container=t,this.id=n,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}function ps(e){for(var t=e[AU.name],n=[],r=0;r<t.length;r++){var i=t[r];i.visible&&n.push(i)}return n}function ms(e){return e._index}function gs(e){return-1===+e.attr(AU.menuIndexAttrName)}function ys(e,t){return+e.attr(AU.menuIndexAttrName)===t._index}function vs(e,t,n,r,i,a,o,s){t._input.active=t.active=o,"buttons"===t.type?bs(e,r,null,null,t):"dropdown"===t.type&&(i.attr(AU.menuIndexAttrName,"-1"),_s(e,r,i,a,t),s||bs(e,r,i,a,t))}function _s(e,t,n,r,i){var a=t.selectAll("g."+AU.headerClassName).data([0]),o=i._dims;a.enter().append("g").classed(AU.headerClassName,!0).style("pointer-events","all");var s=i.active,l=i.buttons[s]||AU.blankHeaderOpts,u={y:i.pad.t,yPad:0,x:i.pad.l,xPad:0,index:0},c={width:o.headerWidth,height:o.headerHeight};a.call(ks,i,l,e).call(Ps,i,u,c);var d=t.selectAll("text."+AU.headerArrowClassName).data([0]);d.enter().append("text").classed(AU.headerArrowClassName,!0).classed("user-select-none",!0).attr("text-anchor","end").call(PP.font,i.font).text(AU.arrowSymbol[i.direction]),d.attr({x:o.headerWidth-AU.arrowOffsetX+i.pad.l,y:o.headerHeight/2+AU.textOffsetY+i.pad.t}),a.on("click",function(){n.call(Is),n.attr(AU.menuIndexAttrName,ys(n,i)?-1:String(i._index)),bs(e,t,n,r,i)}),a.on("mouseover",function(){a.call(Cs)}),a.on("mouseout",function(){a.call(Ss,i)}),PP.setTranslate(t,o.lx,o.ly)}function bs(e,t,n,r,i){n||(n=t,n.attr("pointer-events","all"));var a=gs(n)&&"buttons"!==i.type?[]:i.buttons,o="dropdown"===i.type?AU.dropdownButtonClassName:AU.buttonClassName,s=n.selectAll("g."+o).data(a),l=s.enter().append("g").classed(o,!0),u=s.exit();"dropdown"===i.type?(l.attr("opacity","0").transition().attr("opacity","1"),u.transition().attr("opacity","0").remove()):u.remove();var c=0,d=0,f=i._dims,h=-1!==["up","down"].indexOf(i.direction);"dropdown"===i.type&&(h?d=f.headerHeight+AU.gapButtonHeader:c=f.headerWidth+AU.gapButtonHeader),"dropdown"===i.type&&"up"===i.direction&&(d=-AU.gapButtonHeader+AU.gapButton-f.openHeight),"dropdown"===i.type&&"left"===i.direction&&(c=-AU.gapButtonHeader+AU.gapButton-f.openWidth);var p={x:f.lx+c+i.pad.l,y:f.ly+d+i.pad.t,yPad:AU.gapButton,xPad:AU.gapButton,index:0},m={l:p.x+i.borderwidth,t:p.y+i.borderwidth};s.each(function(a,o){var l=CC.select(this);l.call(ks,i,a,e).call(Ps,i,p),l.on("click",function(){CC.event.defaultPrevented||(vs(e,i,a,t,n,r,o),a.execute&&lI.executeAPICommand(e,a.method,a.args),e.emit("plotly_buttonclicked",{menu:i,button:a,active:i.active}))}),l.on("mouseover",function(){l.call(Cs)}),l.on("mouseout",function(){l.call(Ss,i),s.call(As,i)})}),s.call(As,i),h?(m.w=Math.max(f.openWidth,f.headerWidth),m.h=p.y-m.t):(m.w=p.x-m.l,m.h=Math.max(f.openHeight,f.headerHeight)),m.direction=i.direction,r&&(s.size()?xs(e,t,n,r,i,m):ws(r))}function xs(e,t,n,r,i,a){var o,s,l,u=i.direction,c="up"===u||"down"===u,d=i._dims,f=i.active;if(c)for(s=0,l=0;l<f;l++)s+=d.heights[l]+AU.gapButton;else for(o=0,l=0;l<f;l++)o+=d.widths[l]+AU.gapButton;r.enable(a,o,s),r.hbar&&r.hbar.attr("opacity","0").transition().attr("opacity","1"),r.vbar&&r.vbar.attr("opacity","0").transition().attr("opacity","1")}function ws(e){var t=!!e.hbar,n=!!e.vbar;t&&e.hbar.transition().attr("opacity","0").each("end",function(){t=!1,n||e.disable()}),n&&e.vbar.transition().attr("opacity","0").each("end",function(){n=!1,t||e.disable()})}function ks(e,t,n,r){e.call(Ts,t).call(Ms,t,n,r)}function Ts(e,t){var n=e.selectAll("rect").data([0]);n.enter().append("rect").classed(AU.itemRectClassName,!0).attr({rx:AU.rx,ry:AU.ry,"shape-rendering":"crispEdges"}),n.call(jE.stroke,t.bordercolor).call(jE.fill,t.bgcolor).style("stroke-width",t.borderwidth+"px")}function Ms(e,t,n,r){var i=e.selectAll("text").data([0]);i.enter().append("text").classed(AU.itemTextClassName,!0).classed("user-select-none",!0).attr({"text-anchor":"start","data-notex":1}),i.call(PP.font,t.font).text(n.label).call(sP.convertToTspans,r)}function As(e,t){var n=t.active;e.each(function(e,r){var i=CC.select(this);r===n&&t.showactive&&i.select("rect."+AU.itemRectClassName).call(jE.fill,AU.activeColor)})}function Cs(e){e.select("rect."+AU.itemRectClassName).call(jE.fill,AU.hoverColor)}function Ss(e,t){e.select("rect."+AU.itemRectClassName).call(jE.fill,t.bgcolor)}function Es(e,t){var n=t._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},r=PP.tester.selectAll("g."+AU.dropdownButtonClassName).data(t.buttons);r.enter().append("g").classed(AU.dropdownButtonClassName,!0);var i=-1!==["up","down"].indexOf(t.direction);r.each(function(r,a){var o=CC.select(this);o.call(ks,t,r,e);var s=o.select("."+AU.itemTextClassName),l=s.node()&&PP.bBox(s.node()).width,u=Math.max(l+AU.textPadX,AU.minWidth),c=t.font.size*IU,d=sP.lineCount(s),f=Math.max(c*d,AU.minHeight)+AU.textOffsetY;f=Math.ceil(f),u=Math.ceil(u),n.widths[a]=u,n.heights[a]=f,n.height1=Math.max(n.height1,f),n.width1=Math.max(n.width1,u),i?(n.totalWidth=Math.max(n.totalWidth,u),n.openWidth=n.totalWidth,n.totalHeight+=f+AU.gapButton,n.openHeight+=f+AU.gapButton):(n.totalWidth+=u+AU.gapButton,n.openWidth+=u+AU.gapButton,n.totalHeight=Math.max(n.totalHeight,f),n.openHeight=n.totalHeight)}),i?n.totalHeight-=AU.gapButton:n.totalWidth-=AU.gapButton,n.headerWidth=n.width1+AU.arrowPadX,n.headerHeight=n.height1,"dropdown"===t.type&&(i?(n.width1+=AU.arrowPadX,n.totalHeight=n.height1):n.totalWidth=n.width1,n.totalWidth+=AU.arrowPadX),r.remove();var a=n.totalWidth+t.pad.l+t.pad.r,o=n.totalHeight+t.pad.t+t.pad.b,s=e._fullLayout._size;n.lx=s.l+s.w*t.x,n.ly=s.t+s.h*(1-t.y);var l="left";gB.isRightAnchor(t)&&(n.lx-=a,l="right"),gB.isCenterAnchor(t)&&(n.lx-=a/2,l="center");var u="top";gB.isBottomAnchor(t)&&(n.ly-=o,u="bottom"),gB.isMiddleAnchor(t)&&(n.ly-=o/2,u="middle"),n.totalWidth=Math.ceil(n.totalWidth),n.totalHeight=Math.ceil(n.totalHeight),n.lx=Math.round(n.lx),n.ly=Math.round(n.ly),lI.autoMargin(e,AU.autoMarginIdRoot+t._index,{x:t.x,y:t.y,l:a*({right:1,center:.5}[l]||0),r:a*({left:1,center:.5}[l]||0),b:o*({top:1,middle:.5}[u]||0),t:o*({bottom:1,middle:.5}[u]||0)})}function Ps(e,t,n,r){r=r||{};var i=e.select("."+AU.itemRectClassName),a=e.select("."+AU.itemTextClassName),o=t.borderwidth,s=n.index,l=t._dims;PP.setTranslate(e,o+n.x,o+n.y);var u=-1!==["up","down"].indexOf(t.direction),c=r.height||(u?l.heights[s]:l.height1);i.attr({x:0,y:0,width:r.width||(u?l.width1:l.widths[s]),height:c});var d=t.font.size*IU,f=sP.lineCount(a),h=(f-1)*d/2;sP.positionText(a,AU.textOffsetX,c/2-h+AU.textOffsetY),u?n.y+=l.heights[s]+n.yPad:n.x+=l.widths[s]+n.xPad,n.index++}function Is(e){e.selectAll("g."+AU.dropdownButtonClassName).remove()}function Ls(e){for(var t=e._fullLayout._pushmargin||{},n=Object.keys(t),r=0;r<n.length;r++){var i=n[r];-1!==i.indexOf(AU.autoMarginIdRoot)&&lI.autoMargin(e,i)}}function Os(e,t){for(var n,r=[],i=0;i<t.length;i++)n=t[i],r[i]=n===e?n:"object"===typeof n?Array.isArray(n)?uE.extendDeep([],n):uE.extendDeepAll({},n):n;return r}function zs(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n+n,s=r+r,l=i+i,u=n*o,c=r*o,d=r*s,f=i*o,h=i*s,p=i*l,m=a*o,g=a*s,y=a*l;return e[0]=1-d-p,e[1]=c+y,e[2]=f-g,e[3]=0,e[4]=c-y,e[5]=1-u-p,e[6]=h+m,e[7]=0,e[8]=f+g,e[9]=h-m,e[10]=1-u-d,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Rs(e,t){var n=e[t],r=t.charAt(0);n&&"paper"!==n&&(e[t]=UU(n,r))}function Ds(e){var t="middle",n="center";return-1!==e.indexOf("top")?t="top":-1!==e.indexOf("bottom")&&(t="bottom"),-1!==e.indexOf("left")?n="left":-1!==e.indexOf("right")&&(n="right"),t+" "+n}function Ns(e,t){return t in e&&"object"===typeof e[t]&&0===Object.keys(e[t]).length}function Fs(e){var t=e.search(HU);if(t>0)return e.substr(0,t)}function js(e,t){var n,r,i=t.currentTarget,a=i.getAttribute("data-attr"),o=i.getAttribute("data-val")||!0,s=e._fullLayout,l={},u=oI.list(e,null,!0),c="on";if("zoom"===a){var d,f="in"===o?.5:2,h=(1+f)/2,p=(1-f)/2;for(r=0;r<u.length;r++)if(n=u[r],!n.fixedrange)if(d=n._name,"auto"===o)l[d+".autorange"]=!0;else if("reset"===o){if(void 0===n._rangeInitial)l[d+".autorange"]=!0;else{var m=n._rangeInitial.slice();l[d+".range[0]"]=m[0],l[d+".range[1]"]=m[1]}void 0!==n._showSpikeInitial&&(l[d+".showspikes"]=n._showSpikeInitial,"on"!==c||n._showSpikeInitial||(c="off"))}else{var g=[n.r2l(n.range[0]),n.r2l(n.range[1])],y=[h*g[0]+p*g[1],h*g[1]+p*g[0]];l[d+".range[0]"]=n.l2r(y[0]),l[d+".range[1]"]=n.l2r(y[1])}s._cartesianSpikesEnabled=c}else{if("hovermode"!==a||"x"!==o&&"y"!==o){if("hovermode"===a&&"closest"===o){for(r=0;r<u.length;r++)n=u[r],"on"!==c||n.showspikes||(c="off");s._cartesianSpikesEnabled=c}}else o=s._isHoriz?"y":"x",i.setAttribute("data-val",o);l[a]=o}rS.call("relayout",e,l)}function Bs(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,a=e._fullLayout._subplots.gl3d,o={},s=r.split("."),l=0;l<a.length;l++)o[a[l]+"."+s[1]]=i;var u="pan"===i?i:"zoom";o.dragmode=u,rS.call("relayout",e,o)}function Us(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),i=e._fullLayout,a=i._subplots.gl3d,o={},s=0;s<a.length;s++){var l=a[s],u=l+".camera",c=i[l]._scene;"resetDefault"===r?o[u]=null:"resetLastSave"===r&&(o[u]=uE.extendDeep({},c.cameraInitial))}rS.call("relayout",e,o)}function Vs(e,t){var n=t.currentTarget,r=n._previousVal||!1,i=e.layout,a=e._fullLayout,o=a._subplots.gl3d,s=["xaxis","yaxis","zaxis"],l=["showspikes","spikesides","spikethickness","spikecolor"],u={},c={},d={};if(r)d=uE.extendDeep(i,r),n._previousVal=null;else{d={"allaxes.showspikes":!1};for(var f=0;f<o.length;f++){var h=o[f],p=a[h],m=u[h]={};m.hovermode=p.hovermode,d[h+".hovermode"]=!1;for(var g=0;g<3;g++){var y=s[g];c=m[y]={};for(var v=0;v<l.length;v++){var _=l[v];c[_]=p[y][_]}}}n._previousVal=uE.extendDeep({},u)}rS.call("relayout",e,d)}function Hs(e,t){for(var n=t.currentTarget,r=n.getAttribute("data-attr"),i=n.getAttribute("data-val")||!0,a=e._fullLayout,o=a._subplots.geo,s=0;s<o.length;s++){var l=o[s],u=a[l];if("zoom"===r){var c=u.projection.scale,d="in"===i?2*c:.5*c;rS.call("relayout",e,l+".projection.scale",d)}else"reset"===r&&Gs(e,"geo")}}function Ws(e){var t,n=e._fullLayout;t=n._has("cartesian")?n._isHoriz?"y":"x":"closest";var r=!e._fullLayout.hovermode&&t;rS.call("relayout",e,"hovermode",r)}function qs(e){for(var t,n,r=e._fullLayout,i=oI.list(e,null,!0),a={},o=0;o<i.length;o++)t=i[o],n=t._name,a[n+".showspikes"]="on"===r._cartesianSpikesEnabled||t._showSpikeInitial;return a}function Gs(e,t){for(var n=e._fullLayout,r=n._subplots[t],i={},a=0;a<r.length;a++)for(var o=r[a],s=n[o]._subplot,l=s.viewInitial,u=Object.keys(l),c=0;c<u.length;c++){var d=u[c];i[o+"."+d]=l[d]}rS.call("relayout",e,i)}function Ys(e){this.container=e.container,this.element=document.createElement("div"),this.update(e.graphInfo,e.buttons),this.container.appendChild(this.element)}function Xs(e,t){var n=e._fullLayout,r=new Ys({graphInfo:e,container:n._paperdiv.node(),buttons:t});return n._privateplot&&CC.select(r.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),r}function Zs(e,t,n){function r(e){if(e.length){for(var n=[],r=0;r<e.length;r++){var i=e[r];-1===t.indexOf(i)&&n.push(ZU[i])}m.push(n)}}var i=e._fullLayout,a=e._fullData,o=i._has("cartesian"),s=i._has("gl3d"),l=i._has("geo"),u=i._has("pie"),c=i._has("gl2d"),d=i._has("ternary"),f=i._has("mapbox"),h=i._has("polar"),p=Js(i),m=[];r(["toImage","sendDataToCloud"]);var g=[],y=[],v=[],_=[];return(o||c||u||d)+l+s+f+h>1?(y=["toggleHover"],v=["resetViews"]):l?(g=["zoomInGeo","zoomOutGeo"],y=["hoverClosestGeo"],v=["resetGeo"]):s?(y=["hoverClosest3d"],v=["resetCameraDefault3d","resetCameraLastSave3d"]):f?(y=["toggleHover"],v=["resetViewMapbox"]):y=c?["hoverClosestGl2d"]:u?["hoverClosestPie"]:["toggleHover"],o&&(y=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),!o&&!c||p||(g=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==v[0]&&(v=["resetScale2d"])),s?_=["zoom3d","pan3d","orbitRotation","tableRotation"]:(o||c)&&!p||d?_=["zoom2d","pan2d"]:f||l?_=["pan2d"]:h&&(_=["zoom2d"]),Ks(a)&&_.push("select2d","lasso2d"),r(_),r(g.concat(v)),r(y),Qs(m,n)}function Js(e){for(var t=oI.list({_fullLayout:e},null,!0),n=0;n<t.length;n++)if(!t[n].fixedrange)return!1;return!0}function Ks(e){for(var t=!1,n=0;n<e.length&&!t;n++){var r=e[n];r._module&&r._module.selectPoints&&(rS.traceIs(r,"scatter-like")?(EP.hasMarkers(r)||EP.hasText(r))&&(t=!0):rS.traceIs(r,"box-violin")?"all"!==r.boxpoints&&"all"!==r.points||(t=!0):t=!0)}return t}function Qs(e,t){if(t.length)if(Array.isArray(t[0]))for(var n=0;n<t.length;n++)e.push(t[n]);else e.push(t);return e}function $s(e){for(var t=0;t<e.length;t++)for(var n=e[t],r=0;r<n.length;r++){var i=n[r];if("string"===typeof i){if(void 0===ZU[i])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));e[t][r]=ZU[i]}}return e}function el(e,t,n,r,i,a,o,s){function l(){_=[t.xaxis],b=[t.yaxis];var n=_[0],r=b[0];k=n._length,T=r._length;var i=I._axisConstraintGroups,a=[n._id],l=[r._id];v=[t].concat(o&&s?t.overlays:[]);for(var u=1;u<v.length;u++){var c=v[u].xaxis,d=v[u].yaxis;-1===_.indexOf(c)&&(_.push(c),a.push(c._id)),-1===b.indexOf(d)&&(b.push(d),l.push(d._id))}M=rl(_,s),A=rl(b,o),C=ll(A+M,I.dragmode),x=n._offset,w=r._offset;var f=xl(i,a,l);S=f.xy,E=[];for(var h in f.x)E.push(oV(e,h));P=[];for(var p in f.y)P.push(oV(e,p))}function u(t,n,r){var i=R.getBoundingClientRect();F=n-i.left,j=r-i.top,B={l:F,r:F,w:0,t:j,b:j,h:0},U=e._hmpixcount?e._hmlumcount/e._hmpixcount:zC(e._fullLayout.plot_bgcolor).getLuminance(),V="M0,0H"+k+"V"+T+"H0V0",H=!1,W="xy",q=ul(L,U,x,w,V),G=cl(L,x,w),dl(L)}function c(t,n){function r(){W="",B.r=B.l,B.t=B.b,G.attr("d","M0,0Z")}if(e._transitioningWithDuration)return!1;var i=Math.max(0,Math.min(k,t+F)),a=Math.max(0,Math.min(T,n+j)),o=Math.abs(i-F),s=Math.abs(a-j);B.l=Math.min(F,i),B.r=Math.max(F,i),B.t=Math.min(j,a),B.b=Math.max(j,a),S?o>lV||s>lV?(W="xy",o/k>s/T?(s=o*T/k,j>a?B.t=j-s:B.b=j+s):(o=s*k/T,F>i?B.l=F-o:B.r=F+o),G.attr("d",bl(B))):r():!A||s<Math.min(Math.max(.6*o,sV),lV)?o<sV?r():(B.t=0,B.b=T,W="x",G.attr("d",vl(B,j))):!M||o<Math.min(.6*s,lV)?(B.l=0,B.r=k,W="y",G.attr("d",_l(B,F))):(W="xy",G.attr("d",bl(B))),B.w=B.r-B.l,B.h=B.b-B.t,fl(q,G,B,V,H,U),H=!0}function d(){if(Math.min(B.h,B.w)<2*sV)return pl(e);"xy"!==W&&"x"!==W||al(_,B.l/k,B.r/k,Y,E),"xy"!==W&&"y"!==W||al(b,(T-B.b)/T,(T-B.t)/T,Y,P),pl(e),g(),ml(e)}function f(t){function n(e,t,n){function r(t){return e.l2r(a+(t-a)*n)}if(!e.fixedrange){var i=uE.simpleMap(e.range,e.r2l),a=i[0]+(i[1]-i[0])*t;e.range=i.map(r)}}if(e._context.scrollZoom||I._enablescrollzoom){if(null===Z&&dl(L),e._transitioningWithDuration)return t.preventDefault(),void t.stopPropagation();var r=e.querySelector(".plotly");if(l(),!(r.scrollHeight-r.clientHeight>10||r.scrollWidth-r.clientWidth>10)){clearTimeout(Z);var i=-t.deltaY;if(isFinite(i)||(i=t.wheelDelta/10),!isFinite(i))return void uE.log("Did not find wheel motion attributes: ",t);var a,u=Math.exp(-Math.min(Math.max(i,-20),20)/200),c=K.draglayer.select(".nsewdrag").node().getBoundingClientRect(),d=(t.clientX-c.left)/c.width,f=(c.bottom-t.clientY)/c.height;if(s||S){for(s||(d=.5),a=0;a<_.length;a++)n(_[a],d,u);X[2]*=u,X[0]+=X[2]*d*(1/u-1)}if(o||S){for(o||(f=.5),a=0;a<b.length;a++)n(b[a],f,u);X[3]*=u,X[1]+=X[3]*(1-f)*(1/u-1)}y(X),p(o,s),Z=setTimeout(function(){X=[0,0,k,T];g()},J),t.preventDefault()}}}function h(t,n){function r(e,t,n){for(var r,i,a=1-t,o=0;o<e.length;o++){var s=e[o];if(!s.fixedrange){r=s,i=s._rl[a]+(s._rl[t]-s._rl[a])/sl(n/s._length);var l=s.l2r(i);!1!==l&&void 0!==l&&(s.range[t]=l)}}return r._length*(r._rl[t]-i)/(r._rl[t]-r._rl[a])}if(!e._transitioningWithDuration){if(l(),"ew"===M||"ns"===A)return M&&ol(_,t),A&&ol(b,n),y([M?-t:0,A?-n:0,k,T]),void p(A,M);if(S&&M&&A){var i="w"===M===("n"===A)?1:-1,a=(t/k+i*n/T)/2;t=a*k,n=i*a*T}"w"===M?t=r(_,0,t):"e"===M?t=r(_,1,-t):M||(t=0),"n"===A?n=r(b,1,n):"s"===A?n=r(b,0,-n):A||(n=0);var o="w"===M?t:0,s="n"===A?n:0;if(S){var u;if(!M&&1===A.length){for(u=0;u<_.length;u++)_[u].range=_[u]._r.slice(),rV(_[u],1-n/T);t=n*k/T,o=t/2}if(!A&&1===M.length){for(u=0;u<b.length;u++)b[u].range=b[u]._r.slice(),rV(b[u],1-t/k);n=t*T/k,s=n/2}}y([o,s,k-t,T-n]),p(A,M)}}function p(t,n){function r(e){for(a=0;a<e.length;a++)e[a].fixedrange||o.push(e[a]._id)}function i(r,i,s){for(a=0;a<r.length;a++){var l=r[a];if((n&&-1!==o.indexOf(l.xref)||t&&-1!==o.indexOf(l.yref))&&(i(e,a),s))return}}var a,o=[];for((n||S)&&(r(_),r(E)),(t||S)&&(r(b),r(P)),Y={},a=0;a<o.length;a++){var s=o[a];aV(e,s,!0);var l=oV(e,s);Y[l._name+".range[0]"]=l.range[0],Y[l._name+".range[1]"]=l.range[1]}i(I.annotations||[],rS.getComponentMethod("annotations","drawOne")),i(I.shapes||[],rS.getComponentMethod("shapes","drawOne")),i(I.images||[],rS.getComponentMethod("images","draw"),!0)}function m(){if(!e._transitioningWithDuration){var t,n,r,i=e._context.doubleClick,a=(M?_:[]).concat(A?b:[]),o={};if("reset+autosize"===i)for(i="autosize",n=0;n<a.length;n++)if(t=a[n],t._rangeInitial&&(t.range[0]!==t._rangeInitial[0]||t.range[1]!==t._rangeInitial[1])||!t._rangeInitial&&!t.autorange){i="reset";break}if("autosize"===i)for(n=0;n<a.length;n++)t=a[n],t.fixedrange||(o[t._name+".autorange"]=!0);else if("reset"===i)for((M||S)&&(a=a.concat(E)),A&&!S&&(a=a.concat(P)),S&&(M?A||(a=a.concat(b)):a=a.concat(_)),n=0;n<a.length;n++)t=a[n],t._rangeInitial?(r=t._rangeInitial,o[t._name+".range[0]"]=r[0],o[t._name+".range[1]"]=r[1]):o[t._name+".autorange"]=!0;e.emit("plotly_doubleclick",null),rS.call("relayout",e,o)}}function g(){y([0,0,k,T]),uE.syncOrAsync([lI.previousPromises,function(){rS.call("relayout",e,Y)}],e)}function y(e){function t(e){return e.fixedrange?0:m&&-1!==E.indexOf(e)?h:g&&-1!==(S?E:P).indexOf(e)?p:0}function n(e,t){return t?(e.range=e._r.slice(),rV(e,t),r(e,t)):0}function r(e,t){return e._length*(1-t)*iV[e.constraintoward||"middle"]}var i,a,l,u,c,d=I._plots,f=Object.keys(d),h=e[2]/_[0]._length,p=e[3]/b[0]._length,m=s||S,g=o||S;for(I._glcanvas&&I._glcanvas.size()&&I._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0})}),i=0;i<f.length;i++){var y=d[f[i]],v=y.xaxis,x=y.yaxis,w=m&&!v.fixedrange&&-1!==_.indexOf(v),k=g&&!x.fixedrange&&-1!==b.indexOf(x);if(y._scene&&y._scene.update){var T=uE.simpleMap(v.range,v.r2l),M=uE.simpleMap(x.range,x.r2l);y._scene.update({range:[T[0],M[0],T[1],M[1]]})}if(w?(a=h,u=s?e[0]:r(v,a)):(a=t(v),u=n(v,a)),k?(l=p,c=o?e[1]:r(x,l)):(l=t(x),c=n(x,l)),a||l){a||(a=1),l||(l=1);var A=v._offset-u/a,C=x._offset-c/l;I._defs.select("#"+y.clipId+"> rect").call(PP.setTranslate,u,c).call(PP.setScale,a,l);var L=y.plot.selectAll(".scatterlayer .trace, .boxlayer .trace, .violinlayer .trace");y.plot.call(PP.setTranslate,A,C).call(PP.setScale,1/a,1/l),L.selectAll(".point").call(PP.setPointGroupScale,a,l),L.selectAll(".textpoint").call(PP.setTextPointsScale,a,l),L.call(PP.hideOutsideRangePoints,y),y.plot.selectAll(".barlayer .trace").call(PP.hideOutsideRangePoints,y,".bartext")}}}var v,_,b,x,w,k,T,M,A,C,S,E,P,I=e._fullLayout,L=e._fullLayout._zoomlayer,O=o+s==="nsew",z=1===(o+s).length;l();var R=nl(t,o+s+"drag",C,n,r,i,a),D=!A&&!M;if(D&&!O)return R.onmousedown=null,R.style.pointerEvents="none",R;var N={element:R,gd:e,plotinfo:t,prepFn:function(t,n,r){var i=e._fullLayout.dragmode;D||(O?t.shiftKey?"pan"===i?i="zoom":yl(i)||(i="pan"):t.ctrlKey&&(i="pan"):i="pan"),N.minDrag="lasso"===i?1:void 0,yl(i)?(N.xaxes=_,N.yaxes=b,zD(t,n,r,N,i)):D?dl(L):"zoom"===i?(N.moveFn=c,N.doneFn=d,N.minDrag=1,u(t,n,r)):"pan"===i&&(N.moveFn=h,N.doneFn=g,dl(L))},clickFn:function(n,r){if(pl(e),2!==n||z||m(),O)kO.click(e,r,t.id);else if(1===n&&z){var i=o?b[0]:_[0],a="s"===o||"w"===s?0:1,l=i._name+".range["+a+"]",u=il(i,a),c="left",d="middle";if(i.fixedrange)return;o?(d="n"===o?"top":"bottom","right"===i.side&&(c="right")):"e"===s&&(c="right"),e._context.showAxisRangeEntryBoxes&&CC.select(R).call(sP.makeEditable,{gd:e,immediate:!0,background:I.paper_bgcolor,text:String(u),fill:i.tickfont?i.tickfont.color:"#444",horizontalAlign:c,verticalAlign:d}).on("edit",function(t){var n=i.d2r(t);void 0!==n&&rS.call("relayout",e,l,n)})}}};$L.init(N);var F,j,B,U,V,H,W,q,G,Y={},X=[0,0,k,T],Z=null,J=EE.REDRAWDELAY,K=t.mainplot?I._plots[t.mainplot]:t;return o.length*s.length!==1&&wl(R,f),R}function tl(e,t,n,r){var i=e.draglayer.selectAll("."+n).data([0]);return i.enter().append(t).classed("drag",!0).classed(n,!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",e.id),i.call(iO,r),i.node()}function nl(e,t,n,r,i,a,o){var s=tl(e,"rect",t,n);return CC.select(s).call(PP.setRect,r,i,a,o),s}function rl(e,t){for(var n=0;n<e.length;n++)if(!e[n].fixedrange)return t;return""}function il(e,t){var n,r=e.range[t],i=Math.abs(r-e.range[1-t]);return"date"===e.type?r:"log"===e.type?(n=Math.ceil(Math.max(0,-Math.log(i)/Math.LN10))+3,CC.format("."+n+"g")(Math.pow(10,r))):(n=Math.floor(Math.log(Math.abs(r))/Math.LN10)-Math.floor(Math.log(i)/Math.LN10)+4,CC.format("."+String(n)+"g")(r))}function al(e,t,n,r,i){var a,o,s,l;for(a=0;a<e.length;a++)o=e[a],o.fixedrange||(s=o._rl[0],l=o._rl[1]-s,o.range=[o.l2r(s+l*t),o.l2r(s+l*n)],r[o._name+".range[0]"]=o.range[0],r[o._name+".range[1]"]=o.range[1]);if(i&&i.length){var u=(t+(1-n))/2;al(i,u,1-u,r)}}function ol(e,t){for(var n=0;n<e.length;n++){var r=e[n];r.fixedrange||(r.range=[r.l2r(r._rl[0]-t/r._m),r.l2r(r._rl[1]-t/r._m)])}}function sl(e){return 1-(e>=0?Math.min(e,.9):1/(1/Math.max(e,-.3)+3.222))}function ll(e,t){return e?"nsew"===e?"pan"===t?"move":"crosshair":e.toLowerCase()+"-resize":"pointer"}function ul(e,t,n,r,i){return e.append("path").attr("class","zoombox").style({fill:t>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform","translate("+n+", "+r+")").attr("d",i+"Z")}function cl(e,t,n){return e.append("path").attr("class","zoombox-corners").style({fill:jE.background,stroke:jE.defaultLine,"stroke-width":1,opacity:0}).attr("transform","translate("+t+", "+n+")").attr("d","M0,0Z")}function dl(e){e.selectAll(".select-outline").remove()}function fl(e,t,n,r,i,a){e.attr("d",r+"M"+n.l+","+n.t+"v"+n.h+"h"+n.w+"v-"+n.h+"h-"+n.w+"Z"),hl(e,t,i,a)}function hl(e,t,n,r){n||(e.transition().style("fill",r>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),t.transition().style("opacity",1).duration(200))}function pl(e){CC.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function ml(e){uV&&e.data&&e._context.showTips&&(uE.notifier(uE._(e,"Double-click to zoom back out"),"long"),uV=!1)}function yl(e){return"lasso"===e||"select"===e}function vl(e,t){return"M"+(e.l-.5)+","+(t-lV-.5)+"h-3v"+(2*lV+1)+"h3ZM"+(e.r+.5)+","+(t-lV-.5)+"h3v"+(2*lV+1)+"h-3Z"}function _l(e,t){return"M"+(t-lV-.5)+","+(e.t-.5)+"v-3h"+(2*lV+1)+"v3ZM"+(t-lV-.5)+","+(e.b+.5)+"v3h"+(2*lV+1)+"v-3Z"}function bl(e){var t=Math.floor(Math.min(e.b-e.t,e.r-e.l,lV)/2);return"M"+(e.l-3.5)+","+(e.t-.5+t)+"h3v"+-t+"h"+t+"v-3h-"+(t+3)+"ZM"+(e.r+3.5)+","+(e.t-.5+t)+"h-3v"+-t+"h"+-t+"v-3h"+(t+3)+"ZM"+(e.r+3.5)+","+(e.b+.5-t)+"h-3v"+t+"h"+-t+"v3h"+(t+3)+"ZM"+(e.l-3.5)+","+(e.b+.5-t)+"h3v"+t+"h"+t+"v3h-"+(t+3)+"Z"}function xl(e,t,n){var r,i,a,o,s,l,u=!1,c={},d={};for(r=0;r<e.length;r++){for(o=e[r],i=0;i<t.length;i++)if(o[t[i]]){for(s in o)-1===("x"===s.charAt(0)?t:n).indexOf(s)&&(c[s]=1);for(a=0;a<n.length;a++)o[n[a]]&&(u=!0)}for(i=0;i<n.length;i++)if(o[n[i]])for(l in o)-1===("x"===l.charAt(0)?t:n).indexOf(l)&&(d[l]=1)}return u&&(uE.extendFlat(c,d),d={}),{x:c,y:d,xy:u}}function wl(e,t){if(BL){var n=void 0!==e.onwheel?"wheel":"mousewheel";e._onwheel&&e.removeEventListener(n,e._onwheel),e._onwheel=t,e.addEventListener(n,t,{passive:!1})}else void 0!==e.onwheel?e.onwheel=t:void 0!==e.onmousewheel&&(e.onmousewheel=t)}function kl(e,t,n){for(var r=0;r<n.length;r++){var i=n[r][0],a=n[r][1];if(!(i[0]>=e[1]||i[1]<=e[0])&&(a[0]<t[1]&&a[1]>t[0]))return!0}return!1}function Tl(e,t){return(e.ticks||e.showline)&&(t===e._mainSubplot||"all"===e.mirror||"allticks"===e.mirror)}function Ml(e,t,n){if(!n.showline||!n._lw)return!1;if("all"===n.mirror||"allticks"===n.mirror)return!0;var r=n._anchorAxis;if(!r)return!1;var i=iP.FROM_BL[t];return n.side===t?r.domain[i]===e.domain[i]:n.mirror&&r.domain[1-i]===e.domain[1-i]}function Al(e,t,n,r){if(Ml(e,t,n))return n._lw;for(var i=0;i<r.length;i++){var a=r[i];if(a._mainAxis===n._mainAxis&&Ml(e,t,a))return a._lw}return 0}function Cl(e,t){var n=e._inputDomain,r=vV[e.constraintoward],i=n[0]+(n[1]-n[0])*r;e.domain=e._input.domain=[i+(n[0]-i)/t,i+(n[1]-i)/t]}function Sl(e,t){try{e._fullLayout._paper.style("background",t)}catch(e){uE.error(e)}}function El(e,t){Sl(e,jE.combine(t,"white"))}function Pl(e,t){e._context||(e._context=uE.extendDeep({},GC));var n,r,i,a=e._context;if(t){for(r=Object.keys(t),n=0;n<r.length;n++)"editable"!==(i=r[n])&&"edits"!==i&&i in a&&("setBackground"===i&&"opaque"===t[i]?a[i]=El:a[i]=t[i]);t.plot3dPixelRatio&&!a.plotGlPixelRatio&&(a.plotGlPixelRatio=a.plot3dPixelRatio);var o=t.editable;if(void 0!==o)for(a.editable=o,r=Object.keys(a.edits),n=0;n<r.length;n++)a.edits[r[n]]=o;if(t.edits)for(r=Object.keys(t.edits),n=0;n<r.length;n++)(i=r[n])in a.edits&&(a.edits[i]=t.edits[i])}a.staticPlot&&(a.editable=!1,a.edits={},a.autosizable=!1,a.scrollZoom=!1,a.doubleClick=!1,a.showTips=!1,a.showLink=!1,a.displayModeBar=!1),"hover"!==a.displayModeBar||jL||(a.displayModeBar=!0),"transparent"!==a.setBackground&&"function"===typeof a.setBackground||(a.setBackground=Sl)}function Il(e,t,n){var r=CC.select(e).selectAll(".plot-container").data([0]);r.enter().insert("div",":first-child").classed("plot-container plotly",!0);var i=r.selectAll(".svg-container").data([0]);i.enter().append("div").classed("svg-container",!0).style("position","relative"),i.html(""),t&&(e.data=t),n&&(e.layout=n),CV.manager.fillLayout(e),i.style({width:e._fullLayout.width+"px",height:e._fullLayout.height+"px"}),e.framework=CV.manager.framework(e),e.framework({data:e.data,layout:e.layout},i.node()),e.framework.setUndoPoint();var a=e.framework.svg(),o=1,s=e._fullLayout.title;""!==s&&s||(o=0);var l=function(){this.call(sP.convertToTspans,e)},u=a.select(".title-group text").call(l);if(e._context.edits.titleText){var c=uE._(e,"Click to enter Plot title");s&&s!==c||(o=.2,u.attr({"data-unformatted":c}).text(c).style({opacity:o}).on("mouseover.opacity",function(){CC.select(this).transition().duration(100).style("opacity",1)}).on("mouseout.opacity",function(){CC.select(this).transition().duration(1e3).style("opacity",0)}));var d=function(){this.call(sP.makeEditable,{gd:e}).on("edit",function(t){e.framework({layout:{title:t}}),this.text(t).call(l),this.call(d)}).on("cancel",function(){var e=this.attr("data-unformatted");this.text(e).call(l)})};u.call(d)}return e._context.setBackground(e,e._fullLayout.paper_bgcolor),lI.addLinks(e),Promise.resolve()}function Ll(e,t){var n,r,i=t+1,a=[];for(n=0;n<e.length;n++)r=e[n],r<0?a.push(i+r):a.push(r);return a}function Ol(e,t,n){var r,i;for(r=0;r<t.length;r++){if((i=t[r])!==parseInt(i,10))throw new Error("all values in "+n+" must be integers");if(i>=e.data.length||i<-e.data.length)throw new Error(n+" must be valid indices for gd.data.");if(t.indexOf(i,r+1)>-1||i>=0&&t.indexOf(-e.data.length+i)>-1||i<0&&t.indexOf(e.data.length+i)>-1)throw new Error("each index in "+n+" must be unique.")}}function zl(e,t,n){if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if("undefined"===typeof t)throw new Error("currentIndices is a required argument.");if(Array.isArray(t)||(t=[t]),Ol(e,t,"currentIndices"),"undefined"===typeof n||Array.isArray(n)||(n=[n]),"undefined"!==typeof n&&Ol(e,n,"newIndices"),"undefined"!==typeof n&&t.length!==n.length)throw new Error("current and new indices must be of equal length.")}function Rl(e,t,n){var r,i;if(!Array.isArray(e.data))throw new Error("gd.data must be an array.");if("undefined"===typeof t)throw new Error("traces must be defined.");for(Array.isArray(t)||(t=[t]),r=0;r<t.length;r++)if("object"!==typeof(i=t[r])||Array.isArray(i)||null===i)throw new Error("all values in traces array must be non-array objects");if("undefined"===typeof n||Array.isArray(n)||(n=[n]),"undefined"!==typeof n&&n.length!==t.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Dl(e,t,n,r){var i=uE.isPlainObject(r);if(!Array.isArray(e.data))throw new Error("gd.data must be an array");if(!uE.isPlainObject(t))throw new Error("update must be a key:value object");if("undefined"===typeof n)throw new Error("indices must be an integer or array of integers");Ol(e,n,"indices");for(var a in t){if(!Array.isArray(t[a])||t[a].length!==n.length)throw new Error("attribute "+a+" must be an array of length equal to indices array length");if(i&&(!(a in r)||!Array.isArray(r[a])||r[a].length!==t[a].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function Nl(e,t,n,r){var i,a,o,s,l,u=uE.isPlainObject(r),c=[];Array.isArray(n)||(n=[n]),n=Ll(n,e.data.length-1);for(var d in t)for(var f=0;f<n.length;f++){if(i=e.data[n[f]],o=uE.nestedProperty(i,d),a=o.get(),s=t[d][f],!uE.isArrayOrTypedArray(s))throw new Error("attribute: "+d+" index: "+f+" must be an array");if(!uE.isArrayOrTypedArray(a))throw new Error("cannot extend missing or non-array attribute: "+d);if(a.constructor!==s.constructor)throw new Error("cannot extend array with an array of a different type: "+d);l=u?r[d][f]:r,SC(l)||(l=-1),c.push({prop:o,target:a,insert:s,maxp:Math.floor(l)})}return c}function Fl(e,t,n,r,i){Dl(e,t,n,r);for(var a=Nl(e,t,n,r),o={},s={},l=0;l<a.length;l++){var u=a[l].prop,c=a[l].maxp,d=i(a[l].target,a[l].insert,c);u.set(d[0]),Array.isArray(o[u.astr])||(o[u.astr]=[]),o[u.astr].push(d[1]),Array.isArray(s[u.astr])||(s[u.astr]=[]),s[u.astr].push(a[l].target.length)}return{update:o,maxPoints:s}}function jl(e,t){var n=new e.constructor(e.length+t.length);return n.set(e),n.set(t,e.length),n}function Bl(e){return void 0===e?null:e}function Ul(e,t,n){function r(){return n.map(function(){})}function i(e){var t=PI.id2name(e);-1===u.indexOf(t)&&u.push(t)}function a(e){return"LAYOUT"+e+".autorange"}function o(e){return"LAYOUT"+e+".range"}function s(i,a,o){if(Array.isArray(i))return void i.forEach(function(e){s(e,a,o)});if(!(i in t||BU.hasParent(t,i))){var l;l="LAYOUT"===i.substr(0,6)?uE.nestedProperty(e.layout,i.replace("LAYOUT","")):uE.nestedProperty(f[n[o]],i),i in m||(m[i]=r()),void 0===m[i][o]&&(m[i][o]=Bl(l.get())),void 0!==a&&l.set(a)}}var l,u,c=e._fullLayout,d=e._fullData,f=e.data,h=TE.traceFlags(),p={},m={};for(var g in t){if(BU.hasParent(t,g))throw new Error("cannot set "+g+"and a parent attribute simultaneously");var y,v,_,b,x,w,k=t[g];if(p[g]=k,"LAYOUT"!==g.substr(0,6)){for(m[g]=r(),l=0;l<n.length;l++)if(y=f[n[l]],v=d[n[l]],_=uE.nestedProperty(y,g),b=_.get(),void 0!==(x=Array.isArray(k)?k[l%k.length]:k)){if((w=eI.getTraceValObject(v,_.parts))&&w.impliedEdits&&null!==x)for(var T in w.impliedEdits)s(uE.relativeAttr(g,T),w.impliedEdits[T],l);else if("colorbar.thicknessmode"===g&&_.get()!==x&&-1!==["fraction","pixels"].indexOf(x)&&v.colorbar){var M=-1!==["top","bottom"].indexOf(v.colorbar.orient)?c.height-c.margin.t-c.margin.b:c.width-c.margin.l-c.margin.r;s("colorbar.thickness",v.colorbar.thickness*("fraction"===x?1/M:M),l)}else if("colorbar.lenmode"===g&&_.get()!==x&&-1!==["fraction","pixels"].indexOf(x)&&v.colorbar){var A=-1!==["top","bottom"].indexOf(v.colorbar.orient)?c.width-c.margin.l-c.margin.r:c.height-c.margin.t-c.margin.b;s("colorbar.len",v.colorbar.len*("fraction"===x?1/A:A),l)}else"colorbar.tick0"!==g&&"colorbar.dtick"!==g||s("colorbar.tickmode","linear",l);if("type"===g&&"pie"===x!==("pie"===b)){var C="x",S="y";"bar"!==x&&"bar"!==b||"h"!==y.orientation||(C="y",S="x"),uE.swapAttrs(y,["?","?src"],"labels",C),uE.swapAttrs(y,["d?","?0"],"label",C),uE.swapAttrs(y,["?","?src"],"values",S),"pie"===b?(uE.nestedProperty(y,"marker.color").set(uE.nestedProperty(y,"marker.colors").get()),c._pielayer.selectAll("g.trace").remove()):rS.traceIs(y,"cartesian")&&uE.nestedProperty(y,"marker.colors").set(uE.nestedProperty(y,"marker.color").get())}m[g][l]=Bl(b);var E=["swapxy","swapxyaxes","orientation","orientationaxes"];if(-1!==E.indexOf(g)){if("orientation"===g){_.set(x);var P=y.x&&!y.y?"h":"v";if((_.get()||P)===v.orientation)continue}else"orientationaxes"===g&&(y.orientation={v:"h",h:"v"}[v.orientation]);BU.swapXYData(y),h.calc=h.clearAxisTypes=!0}else-1!==lI.dataArrayContainers.indexOf(_.parts[0])?(BU.manageArrayContainers(_,x,m),h.calc=!0):(w?w.arrayOk&&(uE.isArrayOrTypedArray(x)||uE.isArrayOrTypedArray(b))?h.calc=!0:TE.update(h,w):h.calc=!0,_.set(x))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(g)&&PI.swap(e,n),"orientationaxes"===g){var I=uE.nestedProperty(e.layout,"hovermode");"x"===I.get()?I.set("y"):"y"===I.get()&&I.set("x")}if(-1!==["orientation","type"].indexOf(g)){for(u=[],l=0;l<n.length;l++){var L=f[n[l]];rS.traceIs(L,"cartesian")&&(i(L.xaxis||"x"),i(L.yaxis||"y"),"type"===g&&s(["autobinx","autobiny"],!0,l))}s(u.map(a),!0,0),s(u.map(o),[0,1],0)}}else _=uE.nestedProperty(e.layout,g.replace("LAYOUT","")),m[g]=[Bl(_.get())],_.set(Array.isArray(k)?k[0]:k),h.calc=!0}var O=!1,z=PI.list(e);for(l=0;l<z.length;l++)if(z[l].autorange){O=!0;break}return(h.calc||h.calcIfAutorange&&O)&&(h.clearCalc=!0),(h.calc||h.plot||h.calcIfAutorange)&&(h.fullReplot=!0),{flags:h,undoit:m,redoit:p,traces:n,eventData:uE.extendDeepNoArrays([],[p,n])}}function Vl(e,t){function n(e,r){if(Array.isArray(e))return void e.forEach(function(e){n(e,r)});if(!(e in t||BU.hasParent(t,e))){var i=uE.nestedProperty(s,e);e in v||(v[e]=Bl(i.get())),void 0!==r&&i.set(r)}}function r(e){var t=PI.name2id(e.split(".")[0]);return _[t]=1,t}var i,a,o,s=e.layout,l=e._fullLayout,u=Object.keys(t),c=PI.list(e),d={};for(a=0;a<u.length;a++)if(0===u[a].indexOf("allaxes")){for(o=0;o<c.length;o++){var f=c[o]._id.substr(1),h=-1!==f.indexOf("scene")?f+".":"",p=u[a].replace("allaxes",h+c[o]._name);t[p]||(t[p]=t[u[a]])}delete t[u[a]]}var m,g=TE.layoutFlags(),y={},v={},_={};for(var b in t){if(BU.hasParent(t,b))throw new Error("cannot set "+b+"and a parent attribute simultaneously");for(var x=uE.nestedProperty(s,b),w=t[b],k=x.parts.length,T=k-1;T>0&&"string"!==typeof x.parts[k-1];)T--;var M=x.parts[T],A=x.parts[T-1]+"."+M,C=x.parts.slice(0,T).join("."),S=uE.nestedProperty(e.layout,C).get(),E=uE.nestedProperty(l,C).get(),P=x.get();if(void 0!==w){y[b]=w,v[b]="reverse"===M?w:Bl(P);var I=eI.getLayoutValObject(l,x.parts);if(I&&I.impliedEdits&&null!==w)for(var L in I.impliedEdits)n(uE.relativeAttr(b,L),I.impliedEdits[L]);if(-1!==["width","height"].indexOf(b)&&null===w)l[b]=e._initialAutoSize[b];else if(A.match(/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/))r(A),uE.nestedProperty(l,C+"._inputRange").set(null);else if(A.match(/^[xyz]axis[0-9]*\.autorange$/)){r(A),uE.nestedProperty(l,C+"._inputRange").set(null);var O=uE.nestedProperty(l,C).get();O._inputDomain&&(O._input.domain=O._inputDomain.slice())}else A.match(/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/)&&uE.nestedProperty(l,C+"._inputDomain").set(null);if("type"===M){var z=S,R="linear"===E.type&&"log"===w,D="log"===E.type&&"linear"===w;if(R||D){if(z&&z.range)if(E.autorange)R&&(z.range=z.range[1]>z.range[0]?[1,2]:[2,1]);else{var N=z.range[0],F=z.range[1];R?(N<=0&&F<=0&&n(C+".autorange",!0),N<=0?N=F/1e6:F<=0&&(F=N/1e6),n(C+".range[0]",Math.log(N)/Math.LN10),n(C+".range[1]",Math.log(F)/Math.LN10)):(n(C+".range[0]",Math.pow(10,N)),n(C+".range[1]",Math.pow(10,F)))}else n(C+".autorange",!0);Array.isArray(l._subplots.polar)&&l._subplots.polar.length&&l[x.parts[0]]&&"radialaxis"===x.parts[1]&&delete l[x.parts[0]]._subplot.viewInitial["radialaxis.range"],rS.getComponentMethod("annotations","convertCoords")(e,E,w,n),rS.getComponentMethod("images","convertCoords")(e,E,w,n)}else n(C+".autorange",!0),n(C+".range",null);uE.nestedProperty(l,C+"._inputRange").set(null)}else if(M.match(EE.AX_NAME_PATTERN)){var j=uE.nestedProperty(l,b).get(),B=(w||{}).type;B&&"-"!==B||(B="linear"),rS.getComponentMethod("annotations","convertCoords")(e,j,B,n),rS.getComponentMethod("images","convertCoords")(e,j,B,n)}var U=qU.containerArrayMatch(b);if(U){i=U.array,a=U.index;var V=U.property,H=uE.nestedProperty(s,i),W=(H||[])[a]||{},q=W,G=I||{editType:"calc"},Y=-1!==G.editType.indexOf("calcIfAutorange");""===a?(Y?g.calc=!0:TE.update(g,G),Y=!1):""===V&&(q=w,qU.isAddVal(w)?v[b]=null:qU.isRemoveVal(w)?(v[b]=W,q=W):uE.warn("unrecognized full object value",t)),Y&&(Wl(e,q,"x")||Wl(e,q,"y"))?g.calc=!0:TE.update(g,G),d[i]||(d[i]={});var X=d[i][a];X||(X=d[i][a]={}),X[V]=w,delete t[b]}else"reverse"===M?(S.range?S.range.reverse():(n(C+".autorange",!0),S.range=[1,0]),E.autorange?g.calc=!0:g.plot=!0):(l._has("scatter-like")&&l._has("regl")&&"dragmode"===b&&("lasso"===w||"select"===w)&&"lasso"!==P&&"select"!==P?g.plot=!0:I?TE.update(g,I):g.calc=!0,x.set(w))}}for(i in d){qU.applyContainerArrayChanges(e,uE.nestedProperty(s,i),d[i],g)||(g.plot=!0)}var Z=l._axisConstraintGroups||[];for(m in _)for(a=0;a<Z.length;a++){var J=Z[a];if(J[m]){g.calc=!0;for(var K in J)_[K]||(PI.getFromId(e,K)._constraintShrinkable=!0)}}return(Hl(e)||t.height||t.width)&&(g.plot=!0),(g.plot||g.calc)&&(g.layoutReplot=!0),{flags:g,undoit:v,redoit:y,eventData:uE.extendDeep({},y)}}function Hl(e){var t=e._fullLayout,n=t.width,r=t.height;return e.layout.autosize&&lI.plotAutoSize(e,e.layout,t),t.width!==n||t.height!==r}function Wl(e,t,n){if(!uE.isPlainObject(t))return!1;var r=t[n+"ref"]||n,i=PI.getFromId(e,r);return i||r.charAt(0)!==n||(i=PI.getFromId(e,n)),(i||{}).autorange}function ql(e,t,n,r){function i(e){return eI.getTraceValObject(s,e)}if(t.length!==n.length)return{fullReplot:!0,clearCalc:!0};var a=TE.traceFlags();a.arrays={};var o,s,l={getValObject:i,flags:a,immutable:r,gd:e};for(o=0;o<t.length;o++)s=n[o],l.autoranged=!!s.xaxis&&(PI.getFromId(e,s.xaxis).autorange||PI.getFromId(e,s.yaxis).autorange),Yl(t[o],s,[],l);return(a.calc||a.plot||a.calcIfAutorange)&&(a.fullReplot=!0),a}function Gl(e,t,n,r){function i(e){return eI.getLayoutValObject(n,e)}var a=TE.layoutFlags();return a.arrays={},Yl(t,n,[],{getValObject:i,flags:a,immutable:r,gd:e}),(a.plot||a.calc)&&(a.layoutReplot=!0),a}function Yl(e,t,n,r){function i(){var e=o.editType;return-1!==e.indexOf("calcIfAutorange")&&(p||void 0===p&&(Wl(h,t,"x")||Wl(h,t,"y")))?void(u.calc=!0):d&&-1!==e.indexOf("arraydraw")?void uE.pushUnique(u.arrays[d],f):void TE.update(u,o)}function a(e){return"data_array"===e.valType||e.arrayOk}var o,s,l=r.getValObject,u=r.flags,c=r.immutable,d=r.inArray,f=r.arrayIndex,h=r.gd,p=r.autoranged,m=t._fullInput,g=e._fullInput;m&&m!==t&&(t=m),g&&g!==e&&(e=g);for(s in e){if(u.calc)return;var y=e[s],v=t[s];if("_"!==s.charAt(0)&&"function"!==typeof y&&y!==v){if("tick0"===s||"dtick"===s){var _=t.tickmode;if("auto"===_||"array"===_||!_)continue}if(("range"!==s||!t.autorange)&&("zmin"!==s&&"zmax"!==s||"contourcarpet"!==t.type)){var b=n.concat(s);if(o=l(b)){var x,w=o.valType,k=a(o),T=Array.isArray(y),M=Array.isArray(v);if(T&&M){var A="_input_"+s,C=e[A],S=t[A];if(Array.isArray(C)&&C===S)continue}if(void 0===v)k&&T?u.calc=!0:i();else if(o._isLinkedToArray){var E=[],P=!1;d||(u.arrays[s]=E);var I=Math.min(y.length,v.length),L=Math.max(y.length,v.length);if(I!==L){if("arraydraw"!==o.editType){i();continue}P=!0}for(x=0;x<I;x++)Yl(y[x],v[x],b.concat(x),uE.extendFlat({inArray:s,arrayIndex:x},r));if(P)for(x=I;x<L;x++)E.push(x)}else!w&&uE.isPlainObject(y)?Yl(y,v,b,r):k?T&&M?c&&(u.calc=!0):T!==M?u.calc=!0:i():T&&M?y.length===v.length&&String(y)===String(v)||i():i()}}}}for(s in t)if(!(s in e||"_"===s.charAt(0)||"function"===typeof t[s])){if(o=l(n.concat(s)),a(o)&&Array.isArray(t[s]))return void(u.calc=!0);i()}}function Xl(e,t){var n;for(n in e){var r=e[n],i=t[n];if(r!==i)if(uE.isPlainObject(r)&&uE.isPlainObject(i)){if(Xl(r,i))return!0}else{if(!Array.isArray(r)||!Array.isArray(i))return!0;if(r.length!==i.length)return!0;for(var a=0;a<r.length;a++)if(r[a]!==i[a]){if(!uE.isPlainObject(r[a])||!uE.isPlainObject(i[a]))return!0;if(Xl(r[a],i[a]))return!0}}}}function Zl(e){var t=CC.select(e),n=e._fullLayout;if(n._container=t.selectAll(".plot-container").data([0]),n._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),n._paperdiv=n._container.selectAll(".svg-container").data([0]),n._paperdiv.enter().append("div").classed("svg-container",!0).style("position","relative"),n._glcontainer=n._paperdiv.selectAll(".gl-container").data([{}]),n._glcontainer.enter().append("div").classed("gl-container",!0),n._glcanvas=null,n._paperdiv.selectAll(".main-svg").remove(),n._paper=n._paperdiv.insert("svg",":first-child").classed("main-svg",!0),n._toppaper=n._paperdiv.append("svg").classed("main-svg",!0),!n._uid){var r=[];CC.selectAll("defs").each(function(){this.id&&r.push(this.id.split("-")[1])}),n._uid=uE.randstr(r)}n._paperdiv.selectAll(".main-svg").attr(aP.svgAttrs),n._defs=n._paper.append("defs").attr("id","defs-"+n._uid),n._clips=n._defs.append("g").classed("clips",!0),n._topdefs=n._toppaper.append("defs").attr("id","topdefs-"+n._uid),n._topclips=n._topdefs.append("g").classed("clips",!0),n._bgLayer=n._paper.append("g").classed("bglayer",!0),n._draggers=n._paper.append("g").classed("draglayer",!0);var i=n._paper.append("g").classed("layer-below",!0);n._imageLowerLayer=i.append("g").classed("imagelayer",!0),n._shapeLowerLayer=i.append("g").classed("shapelayer",!0),n._cartesianlayer=n._paper.append("g").classed("cartesianlayer",!0),n._polarlayer=n._paper.append("g").classed("polarlayer",!0),n._ternarylayer=n._paper.append("g").classed("ternarylayer",!0),n._geolayer=n._paper.append("g").classed("geolayer",!0),n._pielayer=n._paper.append("g").classed("pielayer",!0),n._glimages=n._paper.append("g").classed("glimages",!0);var a=n._toppaper.append("g").classed("layer-above",!0);n._imageUpperLayer=a.append("g").classed("imagelayer",!0),n._shapeUpperLayer=a.append("g").classed("shapelayer",!0),n._infolayer=n._toppaper.append("g").classed("infolayer",!0),n._menulayer=n._toppaper.append("g").classed("menulayer",!0),n._zoomlayer=n._toppaper.append("g").classed("zoomlayer",!0),n._hoverlayer=n._toppaper.append("g").classed("hoverlayer",!0),e.emit("plotly_framework")}function Jl(e){var t=e.emitter||new zV,n=new Promise(function(r,i){var a=window.Image,o=e.svg,s=e.format||"png";if(uE.isIE()&&"svg"!==s){var l=new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.");return i(l),e.promise?n:t.emit("error",l)}var u=e.canvas,c=e.scale||1,d=e.width||300,f=e.height||150,h=c*d,p=c*f,m=u.getContext("2d"),g=new a,y="data:image/svg+xml,"+encodeURIComponent(o);u.width=h,u.height=p,g.onload=function(){var n;switch("svg"!==s&&m.drawImage(g,0,0,h,p),s){case"jpeg":n=u.toDataURL("image/jpeg");break;case"png":n=u.toDataURL("image/png");break;case"webp":n=u.toDataURL("image/webp");break;case"svg":n=y;break;default:var a="Image format is not jpeg, png, svg or webp.";if(i(new Error(a)),!e.promise)return t.emit("error",a)}r(n),e.promise||t.emit("success",n)},g.onerror=function(n){if(i(n),!e.promise)return t.emit("error",n)},g.src=y});return e.promise?n:t}function Kl(e){var t=CC.select("body").append("div").style({display:"none"}).html(""),n=e.replace(/(&[^;]*;)/gi,function(e){return"&lt;"===e?"&#60;":"&rt;"===e?"&#62;":-1!==e.indexOf("<")||-1!==e.indexOf(">")?"":t.html(e).text()});return t.remove(),n}function Ql(e){return e.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}function $l(e,t){function n(e){return!(e in t)||uE.validate(t[e],jV[e])}function r(e,n){return uE.coerce(t,c,jV,e,n)}function i(){return new Promise(function(e){setTimeout(e,OV.getDelay(y._fullLayout))})}function a(){return new Promise(function(e,t){var n=FV(y,d,p),r=y._fullLayout.width,i=y._fullLayout.height;if(SV.purge(y),document.body.removeChild(y),"svg"===d)return e(g?n:"data:image/svg+xml,"+encodeURIComponent(n));var a=document.createElement("canvas");a.id=uE.randstr(),RV({format:d,width:r,height:i,scale:p,canvas:a,svg:n,promise:!0}).then(e).catch(t)})}function o(e){return g?e.replace(BV,""):e}t=t||{};var s,l,u;if(uE.isPlainObject(e)?(s=e.data||[],l=e.layout||{},u=e.config||{}):(e=uE.getGraphDiv(e),s=uE.extendDeep([],e.data),l=uE.extendDeep({},e.layout),u=e._context),!n("width")||!n("height"))throw new Error("Height and width should be pixel values.");if(!n("format"))throw new Error("Image format is not jpeg, png, svg or webp.");var c={},d=r("format"),f=r("width"),h=r("height"),p=r("scale"),m=r("setBackground"),g=r("imageDataOnly"),y=document.createElement("div");y.style.position="absolute",y.style.left="-5000px",document.body.appendChild(y);var v=uE.extendFlat({},l);f&&(v.width=f),h&&(v.height=h);var _=uE.extendFlat({},u,{staticPlot:!0,setBackground:m}),b=OV.getRedrawFunc(y);return new Promise(function(e,t){SV.plot(y,s,v,_).then(b).then(i).then(a).then(function(t){e(o(t))}).catch(function(e){t(e)})})}function eu(e,t,n,r,i,a){a=a||[];for(var o=Object.keys(e),s=0;s<o.length;s++){var l=o[s];if("transforms"!==l){var u=a.slice();u.push(l);var c=e[l],d=t[l],f=au(n,l),h="info_array"===(f||{}).valType,p="colorscale"===(f||{}).valType,m=(f||{}).items;if(iu(n,l))if(VV(c)&&VV(d))eu(c,d,f,r,i,u);else if(h&&HV(c)){c.length>d.length&&r.push(ru("unused",i,u.concat(d.length)));var g=d.length,y=Array.isArray(m);y&&(g=Math.min(g,m.length));var v,_,b,x,w;if(2===f.dimensions)for(_=0;_<g;_++)if(HV(c[_])){c[_].length>d[_].length&&r.push(ru("unused",i,u.concat(_,d[_].length)));var k=d[_].length;for(v=0;v<(y?Math.min(k,m[_].length):k);v++)b=y?m[_][v]:m,x=c[_][v],w=d[_][v],uE.validate(x,b)?w!==x&&w!==+x&&r.push(ru("dynamic",i,u.concat(_,v),x,w)):r.push(ru("value",i,u.concat(_,v),x))}else r.push(ru("array",i,u.concat(_),c[_]));else for(_=0;_<g;_++)b=y?m[_]:m,x=c[_],w=d[_],uE.validate(x,b)?w!==x&&w!==+x&&r.push(ru("dynamic",i,u.concat(_),x,w)):r.push(ru("value",i,u.concat(_),x))}else if(f.items&&!h&&HV(c)){var T,M,A=m[Object.keys(m)[0]],C=[];for(T=0;T<d.length;T++){var S=d[T]._index||T;M=u.slice(),M.push(S),VV(c[S])&&VV(d[T])&&(C.push(S),eu(c[S],d[T],A,r,i,M))}for(T=0;T<c.length;T++)M=u.slice(),M.push(T),VV(c[T])?-1===C.indexOf(T)&&r.push(ru("unused",i,M)):r.push(ru("object",i,M,c[T]))}else!VV(c)&&VV(d)?r.push(ru("object",i,u,c)):WV(c)||!WV(d)||h||p?l in t?uE.validate(c,f)?"enumerated"===f.valType&&(f.coerceNumber&&c!==+d||c!==d)&&r.push(ru("dynamic",i,u,c,d)):r.push(ru("value",i,u,c)):r.push(ru("unused",i,u,c)):r.push(ru("array",i,u,c));else r.push(ru("schema",i,u))}}return r}function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n].type,i=e.traces[r].layoutAttributes;i&&uE.extendFlat(e.layout.layoutAttributes,i)}return e.layout.layoutAttributes}function nu(e){return HV(e)?"In data trace "+e[1]+", ":"In "+e+", "}function ru(e,t,n,r,i){n=n||"";var a,o;HV(t)?(a=t[0],o=t[1]):(a=t,o=null);var s=su(n),l=GV[e](t,s,r,i);return uE.log(l),{code:e,container:a,trace:o,path:n,astr:s,msg:l}}function iu(e,t){var n=ou(t),r=n.keyMinusId,i=n.id;return!!(r in e&&e[r]._isSubplotObj&&i)||t in e}function au(e,t){return e[ou(t).keyMinusId]}function ou(e){var t=e.match(YV);return{keyMinusId:t&&t[1],id:t&&t[2]}}function su(e){if(!HV(e))return String(e);for(var t="",n=0;n<e.length;n++){var r=e[n];"number"===typeof r?t=t.substr(0,t.length-1)+"["+r+"]":t+=r,n<e.length-1&&(t+=".")}return t}function lu(e,t){return t=t||{},t.format=t.format||"png",new Promise(function(n,r){e._snapshotInProgress&&r(new Error("Snapshotting already in progress.")),uE.isIE()&&"svg"!==t.format&&r(new Error("Sorry IE does not support downloading from canvas. Try {format:'svg'} instead.")),e._snapshotInProgress=!0;var i=UV(e,t),a=t.filename||e.fn||"newplot";a+="."+t.format,i.then(function(t){return e._snapshotInProgress=!1,ZV(t,a)}).then(function(e){n(e)}).catch(function(t){e._snapshotInProgress=!1,r(t)})})}function uu(e){var t;switch(e){case"themes__thumb":t={autosize:!0,width:150,height:150,title:"",showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":t={title:"",hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:t={}}return t}function cu(e){return["xaxis","yaxis","zaxis"].indexOf(e.slice(0,5))>-1}function du(e,t){function n(){var e=OV.getDelay(a._fullLayout);setTimeout(function(){var e=FV(a),n=document.createElement("canvas");n.id=uE.randstr(),r=RV({format:t.format,width:a._fullLayout.width,height:a._fullLayout.height,canvas:n,emitter:r,svg:e}),r.clean=function(){a&&document.body.removeChild(a)}},e)}var r=new tH,i=eH(e,{format:"png"}),a=i.gd;a.style.position="absolute",a.style.left="-5000px",document.body.appendChild(a);var o=OV.getRedrawFunc(a);return rS.call("plot",a,i.data,i.layout,i.config).then(o).then(n).catch(function(e){r.emit("error",e)}),r}function fu(e,t){var n=PI.getFromId(e,t.xaxis||"x"),r=PI.getFromId(e,t.yaxis||"y"),i=n.makeCalcdata(t,"x"),a=r.makeCalcdata(t,"y"),o=t._length,s=new Array(o);hu(e,t,n,r,i,a,pu(t,o));for(var l=0;l<o;l++)s[l]=SC(i[l])&&SC(a[l])?{x:i[l],y:a[l]}:{x:sH,y:sH},t.ids&&(s[l].id=String(t.ids[l]));return gN(s,t),aH(t),OL(s,t),e.firstscatter=!1,s}function hu(e,t,n,r,i,a,o){var s=t._length;n._minDtick=0,r._minDtick=0;var l={padded:!0},u={padded:!0};o&&(l.ppad=u.ppad=o),!("tozerox"===t.fill||"tonextx"===t.fill&&e.firstscatter)||i[0]===i[s-1]&&a[0]===a[s-1]?t.error_y.visible||-1===["tonexty","tozeroy"].indexOf(t.fill)&&(EP.hasMarkers(t)||EP.hasText(t))||(l.padded=!1,l.ppad=0):l.tozero=!0,!("tozeroy"===t.fill||"tonexty"===t.fill&&e.firstscatter)||i[0]===i[s-1]&&a[0]===a[s-1]?-1!==["tonextx","tozerox"].indexOf(t.fill)&&(u.padded=!1):u.tozero=!0,PI.expand(n,i,l),PI.expand(r,a,u)}function pu(e,t){if(EP.hasMarkers(e)){var n,r=e.marker,i=1.6*(e.marker.sizeref||1);if(n="area"===e.marker.sizemode?function(e){return Math.max(Math.sqrt((e||0)/i),3)}:function(e){return Math.max((e||0)/i,3)},oH(r.size)){var a={type:"linear"};PI.setConvert(a);for(var o=a.makeCalcdata(e.marker,"size"),s=new Array(t),l=0;l<t;l++)s[l]=n(o[l]);return s}return n(r.size)}}function mu(e,t,n){var r;t.selectAll("g.trace").each(function(e){var t=CC.select(this);if(r=e[0].trace,r._nexttrace){if(r._nextFill=t.select(".js-fill.js-tonext"),!r._nextFill.size()){var i=":first-child";t.select(".js-fill.js-tozero").size()&&(i+=" + *"),r._nextFill=t.insert("path",i).attr("class","js-fill js-tonext")}}else t.selectAll(".js-fill.js-tonext").remove(),r._nextFill=null;r.fill&&("tozero"===r.fill.substr(0,6)||"toself"===r.fill||"to"===r.fill.substr(0,2)&&!r._prevtrace)?(r._ownFill=t.select(".js-fill.js-tozero"),r._ownFill.size()||(r._ownFill=t.insert("path",":first-child").attr("class","js-fill js-tozero"))):(t.selectAll(".js-fill.js-tozero").remove(),r._ownFill=null),t.selectAll(".js-fill").call(PP.setClipUrl,n.layerClipId)})}function gu(e,t,n,r,i,a,o){function s(e){return g?e.transition():e}function l(e){s(e).attr("d","M0,0Z")}function u(e){return e.filter(function(e){return e.vis})}function c(e){return e.id}function d(e){if(e.ids)return c}function f(){return!1}function h(t){var r,i,a,o=t[0].trace,l=CC.select(this),c=EP.hasMarkers(o),h=EP.hasText(o),p=d(o),m=f,_=f;c&&(m=o.marker.maxdisplayed||o._needsCull?u:uE.identity),h&&(_=o.marker.maxdisplayed||o._needsCull?u:uE.identity),i=l.selectAll("path.point"),r=i.data(m,p);var b=r.enter().append("path").classed("point",!0);g&&b.call(PP.pointStyle,o,e).call(PP.translatePoints,y,v).style("opacity",0).transition().style("opacity",1);var x=c&&PP.tryColorscale(o.marker,""),w=c&&PP.tryColorscale(o.marker,"line");r.order(),r.each(function(t){var r=CC.select(this),i=s(r);a=PP.translatePoint(t,i,y,v),a?(PP.singlePointStyle(t,i,o,x,w,e),n.layerClipId&&PP.hideOutsideRangePoint(t,i,y,v,o.xcalendar,o.ycalendar),o.customdata&&r.classed("plotly-customdata",null!==t.data&&void 0!==t.data)):i.remove()}),g?r.exit().transition().style("opacity",0).remove():r.exit().remove(),i=l.selectAll("g"),r=i.data(_,p),r.enter().append("g").classed("textpoint",!0).append("text"),r.order(),r.each(function(e){var t=CC.select(this),r=s(t.select("text"));a=PP.translatePoint(e,r,y,v),a?n.layerClipId&&PP.hideOutsideRangePoint(e,t,y,v,o.xcalendar,o.ycalendar):t.remove()}),r.selectAll("text").call(PP.textPointStyle,o,e).each(function(e){var t=y.c2p(e.x),n=v.c2p(e.y);CC.select(this).selectAll("tspan.line").each(function(){s(CC.select(this)).attr({x:t,y:n})})}),r.exit().remove()}var p,m;yu(e,t,n,r,i);var g=!!o&&o.duration>0,y=n.xaxis,v=n.yaxis,_=r[0].trace,b=_.line,x=CC.select(a);if(rS.getComponentMethod("errorbars","plot")(x,n,o),!0===_.visible){s(x).style("opacity",_.opacity);var w,k,T=_.fill.charAt(_.fill.length-1);"x"!==T&&"y"!==T&&(T=""),r[0].node3=x;var M="",A=[],C=_._prevtrace;C&&(M=C._prevRevpath||"",k=C._nextFill,A=C._polygons);var S,E,P,I,L,O,z,R,D,N="",F="",j=[],B=uE.noop;if(w=_._ownFill,EP.hasLines(_)||"none"!==_.fill){for(k&&k.datum(r),-1!==["hv","vh","hvh","vhv"].indexOf(b.shape)?(P=PP.steps(b.shape),I=PP.steps(b.shape.split("").reverse().join(""))):P=I="spline"===b.shape?function(e){var t=e[e.length-1];return e.length>1&&e[0][0]===t[0]&&e[0][1]===t[1]?PP.smoothclosed(e.slice(1),b.smoothing):PP.smoothopen(e,b.smoothing)}:function(e){return"M"+e.join("L")},L=function(e){return I(e.reverse())},j=kH(r,{xaxis:y,yaxis:v,connectGaps:_.connectgaps,baseTolerance:Math.max(b.width||1,3)/4,shape:b.shape,simplify:b.simplify}),D=_._polygons=new Array(j.length),m=0;m<j.length;m++)_._polygons[m]=MH(j[m]);j.length&&(O=j[0][0],z=j[j.length-1],R=z[z.length-1]),B=function(e){return function(t){if(S=P(t),E=L(t),N?T?(N+="L"+S.substr(1),F=E+"L"+F.substr(1)):(N+="Z"+S,F=E+"Z"+F):(N=S,F=E),EP.hasLines(_)&&t.length>1){var n=CC.select(this);if(n.datum(r),e)s(n.style("opacity",0).attr("d",S).call(PP.lineGroupStyle)).style("opacity",1);else{var i=s(n);i.attr("d",S),PP.singleLineStyle(r,i)}}}}}var U=x.selectAll(".js-line").data(j);s(U.exit()).style("opacity",0).remove(),U.each(B(!1)),U.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(PP.lineGroupStyle).each(B(!0)),PP.setClipUrl(U,n.layerClipId),j.length?(w?O&&R&&(T?("y"===T?O[1]=R[1]=v.c2p(0,!0):"x"===T&&(O[0]=R[0]=y.c2p(0,!0)),s(w).attr("d","M"+R+"L"+O+"L"+N.substr(1)).call(PP.singleFillStyle)):s(w).attr("d",N+"Z").call(PP.singleFillStyle)):k&&("tonext"===_.fill.substr(0,6)&&N&&M?("tonext"===_.fill?s(k).attr("d",N+"Z"+M+"Z").call(PP.singleFillStyle):s(k).attr("d",N+"L"+M.substr(1)+"Z").call(PP.singleFillStyle),_._polygons=_._polygons.concat(A)):(l(k),_._polygons=null)),_._prevRevpath=F,_._prevPolygons=D):(w?l(w):k&&l(k),_._polygons=_._prevRevpath=_._prevPolygons=null);var V=x.selectAll(".points");p=V.data([r]),V.each(h),p.enter().append("g").classed("points",!0).each(h),p.exit().remove(),p.each(function(e){var t=!1===e[0].trace.cliponaxis;PP.setClipUrl(CC.select(this),t?null:n.layerClipId)})}}function yu(e,t,n,r,i){var a=n.xaxis,o=n.yaxis,s=CC.extent(uE.simpleMap(a.range,a.r2c)),l=CC.extent(uE.simpleMap(o.range,o.r2c)),u=r[0].trace;if(EP.hasMarkers(u)){var c=u.marker.maxdisplayed;if(0!==c){var d=r.filter(function(e){return e.x>=s[0]&&e.x<=s[1]&&e.y>=l[0]&&e.y<=l[1]}),f=Math.ceil(d.length/c),h=0;i.forEach(function(e,n){var r=e[0].trace;EP.hasMarkers(r)&&r.marker.maxdisplayed>0&&n<t&&h++});var p=Math.round(h*f/3+Math.floor(h/3)*f/7.1);r.forEach(function(e){delete e.vis}),d.forEach(function(e,t){0===Math.round((t+p)%f)&&(e.vis=!0)})}}}function vu(e,t){var n=t?t[0].node3:CC.select(e).selectAll("g.trace.scatter");n.style("opacity",function(e){return e[0].trace.opacity}),n.selectAll("g.points").each(function(t){_u(CC.select(this),t.trace||t[0].trace,e)}),n.selectAll("g.trace path.js-line").call(PP.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(PP.fillGroupStyle),rS.getComponentMethod("errorbars","style")(n)}function _u(e,t,n){var r=e.selectAll("path.point"),i=e.selectAll("text");PP.pointStyle(r,t,n),PP.textPointStyle(i,t,n),PP.selectedPointStyle(r,t),PP.selectedTextStyle(i,t)}function bu(e,t,n){function r(e){return-1!==e.indexOf(a)}var i,a=e.operation,o=e.value,s=Array.isArray(o),l=function(n){return t(n,0,e.valuecalendar)},u=function(e){return t(e,0,n)};switch(r(jH)?i=l(s?o[0]:o):r(BH)?i=s?[l(o[0]),l(o[1])]:[l(o),l(o)]:r(UH)&&(i=s?o.map(l):[l(o)]),a){case"=":return function(e){return u(e)===i};case"!=":return function(e){return u(e)!==i};case"<":return function(e){return u(e)<i};case"<=":return function(e){return u(e)<=i};case">":return function(e){return u(e)>i};case">=":return function(e){return u(e)>=i};case"[]":return function(e){var t=u(e);return t>=i[0]&&t<=i[1]};case"()":return function(e){var t=u(e);return t>i[0]&&t<i[1]};case"[)":return function(e){var t=u(e);return t>=i[0]&&t<i[1]};case"(]":return function(e){var t=u(e);return t>i[0]&&t<=i[1]};case"][":return function(e){var t=u(e);return t<=i[0]||t>=i[1]};case")(":return function(e){var t=u(e);return t<i[0]||t>i[1]};case"](":return function(e){var t=u(e);return t<=i[0]||t>i[1]};case")[":return function(e){var t=u(e);return t<i[0]||t>=i[1]};case"{}":return function(e){return-1!==i.indexOf(u(e))};case"}{":return function(e){return-1===i.indexOf(u(e))}}}function xu(e,t){var n,r,i,a,o,s,l,u,c,d,f=t.transform,h=e.transforms[t.transformIndex].groups,p=WH(e.transforms,f);if(!Array.isArray(h)||0===h.length)return[e];var m=uE.filterUnique(h),g=new Array(m.length),y=h.length,v=eI.findArrayAttributes(e),_=f.styles||[],b={};for(n=0;n<_.length;n++)b[_[n].target]=_[n].value;f.styles&&(d=uE.keyedContainer(f,"styles","target","value.name"));var x={},w={};for(n=0;n<m.length;n++){s=m[n],x[s]=n,w[s]=0,l=g[n]=uE.extendDeepNoArrays({},e),l._group=s,l.transforms[t.transformIndex]._indexToPoints={};var k=null;for(d&&(k=d.get(s)),l.name=k||uE.templateString(f.nameformat,{trace:e.name,group:s}),u=l.transforms,l.transforms=[],r=0;r<u.length;r++)l.transforms[r]=uE.extendDeepNoArrays({},u[r]);for(r=0;r<v.length;r++)uE.nestedProperty(l,v[r]).set([])}for(i=0;i<v.length;i++){for(a=v[i],r=0,c=[];r<m.length;r++)c[r]=uE.nestedProperty(g[r],a).get();for(o=uE.nestedProperty(e,a).get(),r=0;r<y;r++)c[x[h[r]]].push(o[r])}for(r=0;r<y;r++){l=g[x[h[r]]];l.transforms[t.transformIndex]._indexToPoints[w[h[r]]]=p(r),w[h[r]]++}for(n=0;n<m.length;n++)s=m[n],l=g[n],lI.clearExpandedTraceDefaultColors(l),l=uE.extendDeepNoArrays(l,b[s]||{});return g}function wu(e,t){for(var n=1,r=e.length,i=e[0],a=e[0],o=1;o<r;++o)if(a=i,i=e[o],t(i,a)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}function ku(e){for(var t=1,n=e.length,r=e[0],i=e[0],a=1;a<n;++a,i=r)if(i=r,(r=e[a])!==i){if(a===t){t++;continue}e[t++]=r}return e.length=t,e}function Tu(e,t,n){return 0===e.length?e:t?(n||e.sort(t),wu(e,t)):(n||e.sort(),ku(e))}function Mu(e,t,n){var r,i,a=e.length,o=t.arrayArgs.length,s=t.indexArgs.length>0,l=[],u=[],c=0,d=0;for(r=0;r<a;++r)u.push(["i",r,"=0"].join(""));for(i=0;i<o;++i)for(r=0;r<a;++r)d=c,c=e[r],0===r?u.push(["d",i,"s",r,"=t",i,"p",c].join("")):u.push(["d",i,"s",r,"=(t",i,"p",c,"-s",d,"*t",i,"p",d,")"].join(""));for(u.length>0&&l.push("var "+u.join(",")),r=a-1;r>=0;--r)c=e[r],l.push(["for(i",r,"=0;i",r,"<s",c,";++i",r,"){"].join(""));for(l.push(n),r=0;r<a;++r){for(d=c,c=e[r],i=0;i<o;++i)l.push(["p",i,"+=d",i,"s",r].join(""));s&&(r>0&&l.push(["index[",d,"]-=s",d].join("")),l.push(["++index[",c,"]"].join(""))),l.push("}")}return l.join("\n")}function Au(e,t,n,r){for(var i=t.length,a=n.arrayArgs.length,o=n.blockSize,s=n.indexArgs.length>0,l=[],u=0;u<a;++u)l.push(["var offset",u,"=p",u].join(""));for(var u=e;u<i;++u)l.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),l.push(["if(j",u,"<",o,"){"].join("")),l.push(["s",t[u],"=j",u].join("")),l.push(["j",u,"=0"].join("")),l.push(["}else{s",t[u],"=",o].join("")),l.push(["j",u,"-=",o,"}"].join("")),s&&l.push(["index[",t[u],"]=j",u].join(""));for(var u=0;u<a;++u){for(var c=["offset"+u],d=e;d<i;++d)c.push(["j",d,"*t",u,"p",t[d]].join(""));l.push(["p",u,"=(",c.join("+"),")"].join(""))}l.push(Mu(t,n,r));for(var u=e;u<i;++u)l.push("}");return l.join("\n")}function Cu(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}function Su(e,t,n){for(var r=e.body,i=[],a=[],o=0;o<e.args.length;++o){var s=e.args[o];if(!(s.count<=0)){var l=new RegExp(s.name,"g"),u="",c=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var d=t.offsetArgIndex.indexOf(o);c=t.offsetArgs[d].array,u="+q"+d;case"array":u="p"+c+u;var f="l"+o,h="a"+c;if(0===t.arrayBlockIndices[c])1===s.count?"generic"===n[c]?s.lvalue?(i.push(["var ",f,"=",h,".get(",u,")"].join("")),r=r.replace(l,f),a.push([h,".set(",u,",",f,")"].join(""))):r=r.replace(l,[h,".get(",u,")"].join("")):r=r.replace(l,[h,"[",u,"]"].join("")):"generic"===n[c]?(i.push(["var ",f,"=",h,".get(",u,")"].join("")),r=r.replace(l,f),s.lvalue&&a.push([h,".set(",u,",",f,")"].join(""))):(i.push(["var ",f,"=",h,"[",u,"]"].join("")),r=r.replace(l,f),s.lvalue&&a.push([h,"[",u,"]=",f].join("")));else{for(var p=[s.name],m=[u],g=0;g<Math.abs(t.arrayBlockIndices[c]);g++)p.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+c+"b"+g);if(l=new RegExp(p.join(""),"g"),u=m.join("+"),"generic"===n[c])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(l,[h,"[",u,"]"].join(""))}break;case"scalar":r=r.replace(l,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(l,"index");break;case"shape":r=r.replace(l,"shape")}}}return[i.join("\n"),r,a.join("\n")].join("\n").trim()}function Eu(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],a=i.match(/\d+/);a=a?a[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+a:t[r]=i.charAt(0)+a,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}function Pu(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,r=new Array(e.arrayArgs.length),i=new Array(e.arrayArgs.length),a=0;a<e.arrayArgs.length;++a)i[a]=t[2*a],r[a]=t[2*a+1];for(var o=[],s=[],l=[],u=[],c=[],a=0;a<e.arrayArgs.length;++a){e.arrayBlockIndices[a]<0?(l.push(0),u.push(n),o.push(n),s.push(n+e.arrayBlockIndices[a])):(l.push(e.arrayBlockIndices[a]),u.push(e.arrayBlockIndices[a]+n),o.push(0),s.push(e.arrayBlockIndices[a]));for(var d=[],f=0;f<r[a].length;f++)l[a]<=r[a][f]&&r[a][f]<u[a]&&d.push(r[a][f]-l[a]);c.push(d)}for(var h=["SS"],p=["'use strict'"],m=[],f=0;f<n;++f)m.push(["s",f,"=SS[",f,"]"].join(""));for(var a=0;a<e.arrayArgs.length;++a){h.push("a"+a),h.push("t"+a),h.push("p"+a);for(var f=0;f<n;++f)m.push(["t",a,"p",f,"=t",a,"[",l[a]+f,"]"].join(""));for(var f=0;f<Math.abs(e.arrayBlockIndices[a]);++f)m.push(["t",a,"b",f,"=t",a,"[",o[a]+f,"]"].join(""))}for(var a=0;a<e.scalarArgs.length;++a)h.push("Y"+a);if(e.shapeArgs.length>0&&m.push("shape=SS.slice(0)"),e.indexArgs.length>0){for(var g=new Array(n),a=0;a<n;++a)g[a]="0";m.push(["index=[",g.join(","),"]"].join(""))}for(var a=0;a<e.offsetArgs.length;++a){for(var y=e.offsetArgs[a],v=[],f=0;f<y.offset.length;++f)0!==y.offset[f]&&(1===y.offset[f]?v.push(["t",y.array,"p",f].join("")):v.push([y.offset[f],"*t",y.array,"p",f].join("")));0===v.length?m.push("q"+a+"=0"):m.push(["q",a,"=",v.join("+")].join(""))}var _=KH([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));m=m.concat(_),m.length>0&&p.push("var "+m.join(","));for(var a=0;a<e.arrayArgs.length;++a)p.push("p"+a+"|=0");e.pre.body.length>3&&p.push(Su(e.pre,e,i));var b=Su(e.body,e,i),x=Cu(c);x<n?p.push(Au(x,c[0],e,b)):p.push(Mu(c[0],e,b)),e.post.body.length>3&&p.push(Su(e.post,e,i)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+p.join("\n")+"\n----------");var w=[e.funcName||"unnamed","_cwise_loop_",r[0].join("s"),"m",x,Eu(i)].join("");return new Function(["function ",w,"(",h.join(","),"){",p.join("\n"),"} return ",w].join(""))()}function Iu(e){var t=["'use strict'","var CACHED={}"],n=[],r=e.funcName+"_cwise_thunk";t.push(["return function ",r,"(",e.shimArgs.join(","),"){"].join(""));for(var i=[],a=[],o=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],s=[],l=[],u=0;u<e.arrayArgs.length;++u){var c=e.arrayArgs[u];n.push(["t",c,"=array",c,".dtype,","r",c,"=array",c,".order"].join("")),i.push("t"+c),i.push("r"+c),a.push("t"+c),a.push("r"+c+".join()"),o.push("array"+c+".data"),o.push("array"+c+".stride"),o.push("array"+c+".offset|0"),u>0&&(s.push("array"+e.arrayArgs[0]+".shape.length===array"+c+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+c+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}e.arrayArgs.length>1&&(t.push("if (!("+s.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}"));for(var u=0;u<e.scalarArgs.length;++u)o.push("scalar"+e.scalarArgs[u]);return n.push(["type=[",a.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",i.join(","),"])}","return proc(",o.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(QH.bind(void 0,e))}function Lu(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}function Ou(e){var t=new Lu;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var r=0;r<n.length;++r){var i=n[r];if("array"===i||"object"===typeof i&&i.blockIndices){if(t.argTypes[r]="array",t.arrayArgs.push(r),t.arrayBlockIndices.push(i.blockIndices?i.blockIndices:0),t.shimArgs.push("array"+r),r<t.pre.args.length&&t.pre.args[r].count>0)throw new Error("cwise: pre() block may not reference array args");if(r<t.post.args.length&&t.post.args[r].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===i)t.scalarArgs.push(r),t.shimArgs.push("scalar"+r);else if("index"===i){if(t.indexArgs.push(r),r<t.pre.args.length&&t.pre.args[r].count>0)throw new Error("cwise: pre() block may not reference array index");if(r<t.body.args.length&&t.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array index");if(r<t.post.args.length&&t.post.args[r].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===i){if(t.shapeArgs.push(r),r<t.pre.args.length&&t.pre.args[r].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(r<t.body.args.length&&t.body.args[r].lvalue)throw new Error("cwise: body() block may not write to array shape");if(r<t.post.args.length&&t.post.args[r].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!==typeof i||!i.offset)throw new Error("cwise: Unknown argument type "+n[r]);t.argTypes[r]="offset",t.offsetArgs.push({array:i.array,offset:i.offset}),t.offsetArgIndex.push(r)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,$H(t)}function zu(e){if(!e)return nW;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function Ru(e){return eW({args:e.args,pre:zu(e.pre),body:zu(e.body),post:zu(e.proc),funcName:e.funcName})}function Du(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(Ru(e))}function Nu(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}function Fu(e){return!!e.constructor&&"function"===typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}function ju(e){return"function"===typeof e.readFloatLE&&"function"===typeof e.slice&&Fu(e.slice(0,0))}function Bu(e,t){return e[0]-t[0]}function Uu(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(Bu);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function Vu(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var r="generic"===e;if(-1===t){var i="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}",a=new Function(i);return a()}if(0===t){var i="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(r?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(r?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}",a=new Function("TrivialArray",i);return a(fW[e][0])}var i=["'use strict'"],o=uW(t),s=o.map(function(e){return"i"+e}),l="this.offset+"+o.map(function(e){return"this.stride["+e+"]*i"+e}).join("+"),u=o.map(function(e){return"b"+e}).join(","),c=o.map(function(e){return"c"+e}).join(",");i.push("function "+n+"(a,"+u+","+c+",d){this.data=a","this.shape=["+u+"]","this.stride=["+c+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),i.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map(function(e){return"this.shape["+e+"]"}).join("*"),"}})"),1===t?i.push("proto.order=[0]"):(i.push("Object.defineProperty(proto,'order',{get:"),t<4?(i.push("function "+n+"_order(){"),2===t?i.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&i.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):i.push("ORDER})")),i.push("proto.set=function "+n+"_set("+s.join(",")+",v){"),r?i.push("return this.data.set("+l+",v)}"):i.push("return this.data["+l+"]=v}"),i.push("proto.get=function "+n+"_get("+s.join(",")+"){"),r?i.push("return this.data.get("+l+")}"):i.push("return this.data["+l+"]}"),i.push("proto.index=function "+n+"_index(",s.join(),"){return "+l+"}"),i.push("proto.hi=function "+n+"_hi("+s.join(",")+"){return new "+n+"(this.data,"+o.map(function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")}).join(",")+","+o.map(function(e){return"this.stride["+e+"]"}).join(",")+",this.offset)}");var d=o.map(function(e){return"a"+e+"=this.shape["+e+"]"}),f=o.map(function(e){return"c"+e+"=this.stride["+e+"]"});i.push("proto.lo=function "+n+"_lo("+s.join(",")+"){var b=this.offset,d=0,"+d.join(",")+","+f.join(","));for(var h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){d=i"+h+"|0;b+=c"+h+"*d;a"+h+"-=d}");i.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"c"+e}).join(",")+",b)}"),i.push("proto.step=function "+n+"_step("+s.join(",")+"){var "+o.map(function(e){return"a"+e+"=this.shape["+e+"]"}).join(",")+","+o.map(function(e){return"b"+e+"=this.stride["+e+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'){d=i"+h+"|0;if(d<0){c+=b"+h+"*(a"+h+"-1);a"+h+"=ceil(-a"+h+"/d)}else{a"+h+"=ceil(a"+h+"/d)}b"+h+"*=d}");i.push("return new "+n+"(this.data,"+o.map(function(e){return"a"+e}).join(",")+","+o.map(function(e){return"b"+e}).join(",")+",c)}");for(var p=new Array(t),m=new Array(t),h=0;h<t;++h)p[h]="a[i"+h+"]",m[h]="b[i"+h+"]";i.push("proto.transpose=function "+n+"_transpose("+s+"){"+s.map(function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+p.join(",")+","+m.join(",")+",this.offset)}"),i.push("proto.pick=function "+n+"_pick("+s+"){var a=[],b=[],c=this.offset");for(var h=0;h<t;++h)i.push("if(typeof i"+h+"==='number'&&i"+h+">=0){c=(c+this.stride["+h+"]*i"+h+")|0}else{a.push(this.shape["+h+"]);b.push(this.stride["+h+"])}");i.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),i.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map(function(e){return"shape["+e+"]"}).join(",")+","+o.map(function(e){return"stride["+e+"]"}).join(",")+",offset)}");var a=new Function("CTOR_LIST","ORDER",i.join("\n"));return a(fW[e],Uu)}function Hu(e){if(cW(e))return"buffer";if(dW)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped"}return Array.isArray(e)?"array":"generic"}function Wu(e,t,n,r){if(void 0===e){var i=fW.array[0];return i([])}"number"===typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var a=t.length;if(void 0===n){n=new Array(a);for(var o=a-1,s=1;o>=0;--o)n[o]=s,s*=t[o]}if(void 0===r){r=0;for(var o=0;o<a;++o)n[o]<0&&(r-=(t[o]-1)*n[o])}for(var l=Hu(e),u=fW[l];u.length<=a+1;)u.push(Vu(l,u.length-1));var i=u[a+1];return i(e,t,n,r)}function qu(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}function Gu(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[t-2]?2:"="===e[t-1]?1:0}function Yu(e){return 3*e.length/4-Gu(e)}function Xu(e){var t,n,r,i,a,o=e.length;i=Gu(e),a=new _W(3*o/4-i),n=i>0?o-4:o;var s=0;for(t=0;t<n;t+=4)r=vW[e.charCodeAt(t)]<<18|vW[e.charCodeAt(t+1)]<<12|vW[e.charCodeAt(t+2)]<<6|vW[e.charCodeAt(t+3)],a[s++]=r>>16&255,a[s++]=r>>8&255,a[s++]=255&r;return 2===i?(r=vW[e.charCodeAt(t)]<<2|vW[e.charCodeAt(t+1)]>>4,a[s++]=255&r):1===i&&(r=vW[e.charCodeAt(t)]<<10|vW[e.charCodeAt(t+1)]<<4|vW[e.charCodeAt(t+2)]>>2,a[s++]=r>>8&255,a[s++]=255&r),a}function Zu(e){return yW[e>>18&63]+yW[e>>12&63]+yW[e>>6&63]+yW[63&e]}function Ju(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(Zu(r));return i.join("")}function Ku(e){for(var t,n=e.length,r=n%3,i="",a=[],o=0,s=n-r;o<s;o+=16383)a.push(Ju(e,o,o+16383>s?s:o+16383));return 1===r?(t=e[n-1],i+=yW[t>>2],i+=yW[t<<4&63],i+="=="):2===r&&(t=(e[n-2]<<8)+e[n-1],i+=yW[t>>10],i+=yW[t>>4&63],i+=yW[t<<2&63],i+="="),a.push(i),a.join("")}function Qu(e){if(e>MW)throw new RangeError("Invalid typed array length");var t=new Uint8Array(e);return t.__proto__=$u.prototype,t}function $u(e,t,n){if("number"===typeof e){if("string"===typeof t)throw new Error("If encoding is specified then the first argument must be a string");return rc(e)}return ec(e,t,n)}function ec(e,t,n){if("number"===typeof e)throw new TypeError('"value" argument must not be a number');return Bc(e)||e&&Bc(e.buffer)?oc(e,t,n):"string"===typeof e?ic(e,t):sc(e)}function tc(e){if("number"!==typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('"size" argument must not be negative')}function nc(e,t,n){return tc(e),e<=0?Qu(e):void 0!==t?"string"===typeof n?Qu(e).fill(t,n):Qu(e).fill(t):Qu(e)}function rc(e){return tc(e),Qu(e<0?0:0|lc(e))}function ic(e,t){if("string"===typeof t&&""!==t||(t="utf8"),!$u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);var n=0|cc(e,t),r=Qu(n),i=r.write(e,t);return i!==n&&(r=r.slice(0,i)),r}function ac(e){for(var t=e.length<0?0:0|lc(e.length),n=Qu(t),r=0;r<t;r+=1)n[r]=255&e[r];return n}function oc(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');var r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),r.__proto__=$u.prototype,r}function sc(e){if($u.isBuffer(e)){var t=0|lc(e.length),n=Qu(t);return 0===n.length?n:(e.copy(n,0,0,t),n)}if(e){if(ArrayBuffer.isView(e)||"length"in e)return"number"!==typeof e.length||Uc(e.length)?Qu(0):ac(e);if("Buffer"===e.type&&Array.isArray(e.data))return ac(e.data)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object.")}function lc(e){if(e>=MW)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+MW.toString(16)+" bytes");return 0|e}function uc(e){return+e!=e&&(e=0),$u.alloc(+e)}function cc(e,t){if($u.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Bc(e))return e.byteLength;"string"!==typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return Rc(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return Fc(e).length;default:if(r)return Rc(e).length;t=(""+t).toLowerCase(),r=!0}}function dc(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return Ac(this,t,n);case"utf8":case"utf-8":return wc(this,t,n);case"ascii":return Tc(this,t,n);case"latin1":case"binary":return Mc(this,t,n);case"base64":return xc(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Cc(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function fc(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function hc(e,t,n,r,i){if(0===e.length)return-1;if("string"===typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Uc(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"===typeof t&&(t=$u.from(t,r)),$u.isBuffer(t))return 0===t.length?-1:pc(e,t,n,r,i);if("number"===typeof t)return t&=255,"function"===typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):pc(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function pc(e,t,n,r,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,l=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,l/=2,n/=2}var u;if(i){var c=-1;for(u=n;u<s;u++)if(a(e,u)===a(t,-1===c?0:u-c)){if(-1===c&&(c=u),u-c+1===l)return c*o}else-1!==c&&(u-=u-c),c=-1}else for(n+l>s&&(n=s-l),u=n;u>=0;u--){for(var d=!0,f=0;f<l;f++)if(a(e,u+f)!==a(t,f)){d=!1;break}if(d)return u}return-1}function mc(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(Uc(s))return o;e[n+o]=s}return o}function gc(e,t,n,r){return jc(Rc(t,e.length-n),e,n,r)}function yc(e,t,n,r){return jc(Dc(t),e,n,r)}function vc(e,t,n,r){return yc(e,t,n,r)}function _c(e,t,n,r){return jc(Fc(t),e,n,r)}function bc(e,t,n,r){return jc(Nc(t,e.length-n),e,n,r)}function xc(e,t,n){return 0===t&&n===e.length?gW.fromByteArray(e):gW.fromByteArray(e.slice(t,n))}function wc(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var l,u,c,d;switch(s){case 1:a<128&&(o=a);break;case 2:l=e[i+1],128===(192&l)&&(d=(31&a)<<6|63&l)>127&&(o=d);break;case 3:l=e[i+1],u=e[i+2],128===(192&l)&&128===(192&u)&&(d=(15&a)<<12|(63&l)<<6|63&u)>2047&&(d<55296||d>57343)&&(o=d);break;case 4:l=e[i+1],u=e[i+2],c=e[i+3],128===(192&l)&&128===(192&u)&&128===(192&c)&&(d=(15&a)<<18|(63&l)<<12|(63&u)<<6|63&c)>65535&&d<1114112&&(o=d)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return kc(r)}function kc(e){var t=e.length;if(t<=AW)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=AW));return n}function Tc(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function Mc(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function Ac(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=zc(e[a]);return i}function Cc(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function Sc(e,t,n){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function Ec(e,t,n,r,i,a){if(!$u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function Pc(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function Ic(e,t,n,r,i){return t=+t,n>>>=0,i||Pc(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),kW.write(e,t,n,r,23,4),n+4}function Lc(e,t,n,r,i){return t=+t,n>>>=0,i||Pc(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),kW.write(e,t,n,r,52,8),n+8}function Oc(e){if(e=e.split("=")[0],e=e.trim().replace(CW,""),e.length<2)return"";for(;e.length%4!==0;)e+="=";return e}function zc(e){return e<16?"0"+e.toString(16):e.toString(16)}function Rc(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function Dc(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Nc(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function Fc(e){return gW.toByteArray(Oc(e))}function jc(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function Bc(e){return e instanceof ArrayBuffer||null!=e&&null!=e.constructor&&"ArrayBuffer"===e.constructor.name&&"number"===typeof e.byteLength}function Uc(e){return e!==e}function Vc(e,t,n){var r=0|e[n];if(r<=0)return[];var i,a=new Array(r);if(n===e.length-1)for(i=0;i<r;++i)a[i]=t;else for(i=0;i<r;++i)a[i]=Vc(e,t,n+1);return a}function Hc(e,t){var n,r;for(n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function Wc(e,t){switch("undefined"===typeof t&&(t=0),typeof e){case"number":if(e>0)return Hc(0|e,t);break;case"object":if("number"===typeof e.length)return Vc(e,t,0)}return[]}function qc(e,t,n,r,i){this.gl=e,this.type=t,this.handle=n,this.length=r,this.usage=i}function Gc(e,t,n,r,i,a){var o=i.length*i.BYTES_PER_ELEMENT;if(a<0)return e.bufferData(t,i,r),o;if(o+a>n)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return e.bufferSubData(t,a,i),n}function Yc(e,t){for(var n=EW.malloc(e.length,t),r=e.length,i=0;i<r;++i)n[i]=e[i];return n}function Xc(e,t){for(var n=1,r=t.length-1;r>=0;--r){if(t[r]!==n)return!1;n*=e[r]}return!0}function Zc(e,t,n,r){if(n=n||e.ARRAY_BUFFER,r=r||e.DYNAMIC_DRAW,n!==e.ARRAY_BUFFER&&n!==e.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(r!==e.DYNAMIC_DRAW&&r!==e.STATIC_DRAW&&r!==e.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var i=e.createBuffer(),a=new qc(e,n,i,0,r);return a.update(t),a}function Jc(e,t,n){this.shortMessage=t||"",this.longMessage=n||"",this.rawError=e||"",this.message="gl-shader: "+(t||e||"")+(n?"\n"+n:""),this.stack=(new Error).stack}function Kc(e,t,n,r,i,a){this._gl=e,this._wrapper=t,this._index=n,this._locations=r,this._dimension=i,this._constFunc=a}function Qc(e,t,n,r,i,a,o){for(var s=["gl","v"],l=[],u=0;u<i;++u)s.push("x"+u),l.push("x"+u);s.push("if(x0.length===void 0){return gl.vertexAttrib"+i+"f(v,"+l.join()+")}else{return gl.vertexAttrib"+i+"fv(v,x0)}");var c=Function.apply(null,s),d=new Kc(e,t,n,r,i,c);Object.defineProperty(a,o,{set:function(t){return e.disableVertexAttribArray(r[n]),c(e,r[n],t),t},get:function(){return d},enumerable:!0})}function $c(e,t,n,r,i,a,o){for(var s=new Array(i),l=new Array(i),u=0;u<i;++u)Qc(e,t,n[u],r,i,s,u),l[u]=s[u];Object.defineProperty(s,"location",{set:function(e){if(Array.isArray(e))for(var t=0;t<i;++t)l[t].location=e[t];else for(var t=0;t<i;++t)l[t].location=e+t;return e},get:function(){for(var e=new Array(i),t=0;t<i;++t)e[t]=r[n[t]];return e},enumerable:!0}),s.pointer=function(t,a,o,s){t=t||e.FLOAT,a=!!a,o=o||i*i,s=s||0;for(var l=0;l<i;++l){var u=r[n[l]];e.vertexAttribPointer(u,i,t,a,o,s+l*i),e.enableVertexAttribArray(u)}};var c=new Array(i),d=e["vertexAttrib"+i+"fv"];Object.defineProperty(a,o,{set:function(t){for(var a=0;a<i;++a){var o=r[n[a]];if(e.disableVertexAttribArray(o),Array.isArray(t[0]))d.call(e,o,t[a]);else{for(var s=0;s<i;++s)c[s]=t[i*a+s];d.call(e,o,c)}}return t},get:function(){return s},enumerable:!0})}function ed(e,t,n,r){for(var i={},a=0,o=n.length;a<o;++a){var s=n[a],l=s.name,u=s.type,c=s.locations;switch(u){case"bool":case"int":case"float":Qc(e,t,c[0],r,1,i,l);break;default:if(u.indexOf("vec")>=0){var d=u.charCodeAt(u.length-1)-48;if(d<2||d>4)throw new DW("","Invalid data type for attribute "+l+": "+u);Qc(e,t,c[0],r,d,i,l)}else{if(!(u.indexOf("mat")>=0))throw new DW("","Unknown data type for attribute "+l+": "+u);var d=u.charCodeAt(u.length-1)-48;if(d<2||d>4)throw new DW("","Invalid data type for attribute "+l+": "+u);$c(e,t,c,r,d,i,l)}}}return i}function td(e,t){for(var n={},r=0;r<e.length;++r)for(var i=e[r].name,a=i.split("."),o=n,s=0;s<a.length;++s){var l=a[s].split("[");if(l.length>1){l[0]in o||(o[l[0]]=[]),o=o[l[0]];for(var u=1;u<l.length;++u){var c=parseInt(l[u]);u<l.length-1||s<a.length-1?(c in o||(u<l.length-1?o[c]=[]:o[c]={}),o=o[c]):o[c]=t?r:e[r].type}}else s<a.length-1?(l[0]in o||(o[l[0]]={}),o=o[l[0]]):o[l[0]]=t?r:e[r].type}return n}function nd(e){return new Function("y","return function(){return y}")(e)}function rd(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function id(e,t,n,r){function i(n){return new Function("gl","wrapper","locations","return function(){return gl.getUniform(wrapper.program,locations["+n+"])}")(e,t,r)}function a(e,t,n){switch(n){case"bool":case"int":case"sampler2D":case"samplerCube":return"gl.uniform1i(locations["+t+"],obj"+e+")";case"float":return"gl.uniform1f(locations["+t+"],obj"+e+")";default:var r=n.indexOf("vec");if(!(0<=r&&r<=1&&n.length===4+r)){if(0===n.indexOf("mat")&&4===n.length){var i=n.charCodeAt(n.length-1)-48;if(i<2||i>4)throw new DW("","Invalid uniform dimension type for matrix "+uB+": "+n);return"gl.uniformMatrix"+i+"fv(locations["+t+"],false,obj"+e+")"}throw new DW("","Unknown uniform data type for "+uB+": "+n)}var i=n.charCodeAt(n.length-1)-48;if(i<2||i>4)throw new DW("","Invalid data type");switch(n.charAt(0)){case"b":case"i":return"gl.uniform"+i+"iv(locations["+t+"],obj"+e+")";case"v":return"gl.uniform"+i+"fv(locations["+t+"],obj"+e+")";default:throw new DW("","Unrecognized data type for vector "+uB+": "+n)}}}function o(e,t){if("object"!==typeof t)return[[e,t]];var n=[];for(var r in t){var i=t[r],a=e;parseInt(r)+""===r?a+="["+r+"]":a+="."+r,"object"===typeof i?n.push.apply(n,o(a,i)):n.push([a,i])}return n}function s(t){for(var i=["return function updateProperty(obj){"],s=o("",t),l=0;l<s.length;++l){var u=s[l],c=u[0],d=u[1];r[d]&&i.push(a(c,d,n[d].type))}return i.push("return obj}"),new Function("gl","locations",i.join("\n"))(e,r)}function l(e){switch(e){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var t=e.indexOf("vec");if(0<=t&&t<=1&&e.length===4+t){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new DW("","Invalid data type");return"b"===e.charAt(0)?rd(n,!1):rd(n,0)}if(0===e.indexOf("mat")&&4===e.length){var n=e.charCodeAt(e.length-1)-48;if(n<2||n>4)throw new DW("","Invalid uniform dimension type for matrix "+uB+": "+e);return rd(n*n,0)}throw new DW("","Unknown uniform data type for "+uB+": "+e)}}function u(e,t,a){if("object"===typeof a){var o=c(a);Object.defineProperty(e,t,{get:nd(o),set:s(a),enumerable:!0,configurable:!1})}else r[a]?Object.defineProperty(e,t,{get:i(a),set:s(a),enumerable:!0,configurable:!1}):e[t]=l(n[a].type)}function c(e){var t;if(Array.isArray(e)){t=new Array(e.length);for(var n=0;n<e.length;++n)u(t,n,e[n])}else{t={};for(var r in e)u(t,r,e[r])}return t}var d=jW(n,!0);return{get:nd(c(d)),set:s(d),enumerable:!0,configurable:!0}}function ad(e,t){if(!WW){var n=Object.keys(HW);WW={};for(var r=0;r<n.length;++r){var i=n[r];WW[e[i]]=HW[i]}}return WW[t]}function od(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS),r=[],i=0;i<n;++i){var a=e.getActiveUniform(t,i);if(a){var o=ad(e,a.type);if(a.size>1)for(var s=0;s<a.size;++s)r.push({name:a.name.replace("[0]","["+s+"]"),type:o});else r.push({name:a.name,type:o})}}return r}function sd(e,t){for(var n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES),r=[],i=0;i<n;++i){var a=e.getActiveAttrib(t,i);a&&r.push({name:a.name,type:ad(e,a.type)})}return r}function ld(e,t){if("string"!==typeof e)throw new TypeError("expected a string");if(1===t)return e;if(2===t)return e+e;var n=e.length*t;if(VW!==e||"undefined"===typeof VW)VW=e,qW="";else if(qW.length>=n)return qW.substr(0,n);for(;n>qW.length&&t>1;)1&t&&(qW+=e),t>>=1,e+=e;return qW+=e,qW=qW.substr(0,n)}function ud(e,t,n){t="number"===typeof t?t:1,n=n||": ";var r=e.split(/\r?\n/),i=String(r.length+t-1).length;return r.map(function(e,r){var a=r+t,o=String(a).length;return YW(a,i-o)+n+e}).join("\n")}function cd(e){function t(e){e.length&&w.push({type:vq[b],data:e,position:M,line:k,column:T})}function n(e){v=0,S+=e,y=S.length;for(var t;m=S[v],v<y;){switch(t=v,b){case oq:v=l();break;case sq:v=s();break;case lq:v=o();break;case uq:v=u();break;case cq:v=f();break;case yq:v=d();break;case dq:v=h();break;case aq:v=p();break;case mq:v=a();break;case iq:v=i()}if(t!==v)switch(S[t]){case"\n":T=0,++k;break;default:++T}}return _+=v,S=S.slice(v),w}function r(e){return x.length&&t(x.join("")),b=gq,t("(eof)"),w}function i(){return x=x.length?[]:x,"/"===g&&"*"===m?(M=_+v-1,b=oq,g=m,v+1):"/"===g&&"/"===m?(M=_+v-1,b=sq,g=m,v+1):"#"===m?(b=lq,M=_+v,v):/\s/.test(m)?(b=mq,M=_+v,v):(A=/\d/.test(m),C=/[^\w_]/.test(m),M=_+v,b=A?cq:C?uq:aq,v)}function a(){return/[^\s]/g.test(m)?(t(x.join("")),b=iq,v):(x.push(m),g=m,v+1)}function o(){return"\r"!==m&&"\n"!==m||"\\"===g?(x.push(m),g=m,v+1):(t(x.join("")),b=iq,v)}function s(){return o()}function l(){return"/"===m&&"*"===g?(x.push(m),t(x.join("")),b=iq,v+1):(x.push(m),g=m,v+1)}function u(){if("."===g&&/\d/.test(m))return b=dq,v;if("/"===g&&"*"===m)return b=oq,v;if("/"===g&&"/"===m)return b=sq,v;if("."===m&&x.length){for(;c(x););return b=dq,v}if(";"===m||")"===m||"("===m){if(x.length)for(;c(x););return t(m),b=iq,v+1}var e=2===x.length&&"="!==m;if(/[\w_\d\s]/.test(m)||e){for(;c(x););return b=iq,v}return x.push(m),g=m,v+1}function c(e){for(var n,r,i=0;;){if(n=nq.indexOf(e.slice(0,e.length+i).join("")),r=nq[n],-1===n){if(i--+e.length>0)continue;r=e.slice(0,1).join("")}return t(r),M+=r.length,x=x.slice(r.length),x.length}}function d(){return/[^a-fA-F0-9]/.test(m)?(t(x.join("")),b=iq,v):(x.push(m),g=m,v+1)}function f(){return"."===m?(x.push(m),b=dq,g=m,v+1):/[eE]/.test(m)?(x.push(m),b=dq,g=m,v+1):"x"===m&&1===x.length&&"0"===x[0]?(b=yq,x.push(m),g=m,v+1):/[^\d]/.test(m)?(t(x.join("")),b=iq,v):(x.push(m),g=m,v+1)}function h(){return"f"===m&&(x.push(m),g=m,v+=1),/[eE]/.test(m)?(x.push(m),g=m,v+1):"-"===m&&/[eE]/.test(g)?(x.push(m),g=m,v+1):/[^\d]/.test(m)?(t(x.join("")),b=iq,v):(x.push(m),g=m,v+1)}function p(){if(/[^\d\w_]/.test(m)){var e=x.join("");return b=P.indexOf(e)>-1?pq:E.indexOf(e)>-1?hq:fq,t(x.join("")),b=iq,v}return x.push(m),g=m,v+1}var m,g,y,v=0,_=0,b=iq,x=[],w=[],k=1,T=0,M=0,A=!1,C=!1,S="";e=e||{};var E=QW,P=eq;return"300 es"===e.version&&(E=$W,P=tq),function(e){return w=[],null!==e?n(e.replace?e.replace(/\r\n/g,"\n"):e):r()}}function dd(e,t){var n=rq(t),r=[];return r=r.concat(n(e)),r=r.concat(n(null))}function fd(e){for(var t=Array.isArray(e)?e:_q(e),n=0;n<t.length;n++){var r=t[n];if("preprocessor"===r.type){var i=r.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(i&&i[2]){var a=i[1],o=i[2];return(a?KW(o):o).trim()}}}}function hd(e,t,n){"use strict";var r=bq(t)||"of unknown name (see npm glsl-shader-name)",i="unknown type";void 0!==n&&(i=n===JW.FRAGMENT_SHADER?"fragment":"vertex");for(var a=wq("Error compiling %s shader %s:\n",i,r),o=wq("%s%s",a,e),s=e.split("\n"),l={},u=0;u<s.length;u++){var c=s[u];if(""!==c&&"\0"!==c){var d=parseInt(c.split(":")[2]);if(isNaN(d))throw new Error(wq("Could not parse error: %s",c));l[d]=c}}for(var f=XW(t).split("\n"),u=0;u<f.length;u++)if(l[u+3]||l[u+2]||l[u+1]){var h=f[u];if(a+=h+"\n",l[u+1]){var p=l[u+1];p=p.substr(p.split(":",3).join(":").length+1).trim(),a+=wq("^^^ %s\n\n",p)}}return{long:a.trim(),short:o.trim()}}function pd(e,t){var n={identity:t},r=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(e){return e!==t?r.apply(this,arguments):n},writable:!0}),n}function md(){var e={};return function(t){if(("object"!==typeof t||null===t)&&"function"!==typeof t)throw new Error("Weakmap-shim: Key must be object");var n=t.valueOf(e);return n&&n.identity===e?n:Tq(t,e)}}function gd(){var e=Mq();return{get:function(t,n){var r=e(t);return r.hasOwnProperty("value")?r.value:n},set:function(t,n){return e(t).value=n,this},has:function(t){return"value"in e(t)},delete:function(t){return delete e(t).value}}}function yd(e,t,n,r,i,a,o){this.id=e,this.src=t,this.type=n,this.shader=r,this.count=a,this.programs=[],this.cache=o}function vd(e){this.gl=e,this.shaders=[{},{}],this.programs={}}function _d(e,t,n){var r=e.createShader(t);if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS)){var i=e.getShaderInfoLog(r);try{var a=kq(i,n,t)}catch(e){throw console.warn("Failed to format compiler error: "+e),new DW(i,"Error compiling shader:\n"+i)}throw new DW(i,a.short,a.long)}return r}function bd(e,t,n,r,i){var a=e.createProgram();e.attachShader(a,t),e.attachShader(a,n);for(var o=0;o<r.length;++o)e.bindAttribLocation(a,i[o],r[o]);if(e.linkProgram(a),!e.getProgramParameter(a,e.LINK_STATUS)){var s=e.getProgramInfoLog(a);throw new DW(s,"Error linking program: "+s)}return a}function xd(e){var t=Eq.get(e);return t||(t=new vd(e),Eq.set(e,t)),t}function wd(e,t,n){return xd(e).getShaderReference(t,n)}function kd(e,t,n,r,i){return xd(e).getProgram(t,n,r,i)}function Td(e){this.gl=e,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}function Md(e,t){return e.name<t.name?-1:1}function Ad(e,t,n,r,i){var a=new Td(e);return a.update(t,n,r,i),a}function Cd(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function Sd(e){var t=e.gl;return new Cd(e,LW(t,[0,0,0,1,1,0,1,1]),Oq(t,RW.boxVert,RW.lineFrag))}function Ed(e,t,n,r,i){var a=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),n?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),i?a.push("return -1};"):a.push("return i};"),a.join("")}function Pd(e,t,n,r){return new Function([Ed("A","x"+e+"y",t,["y"],r),Ed("P","c(x,y)"+e+"0",t,["y","c"],r),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""))()}function Id(e,t,n,r,i){var a=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),n?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),i?a.push("return -1};"):a.push("return i};"),a.join("")}function Ld(e,t,n,r){return new Function([Id("A","x"+e+"y",t,["y"],r),Id("P","c(x,y)"+e+"0",t,["y","c"],r),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""))()}function Od(e,t,n,r){this.plot=e,this.vbo=t,this.shader=n,this.tickShader=r,this.ticks=[[],[]]}function zd(e,t){return e-t}function Rd(e){var t=e.gl;return new Od(e,LW(t),Oq(t,RW.gridVert,RW.gridFrag),Oq(t,RW.tickVert,RW.gridFrag))}function Dd(e,t,n){this.plot=e,this.vbo=t,this.shader=n}function Nd(e){var t=e.gl;return new Dd(e,LW(t,[-1,-1,-1,1,1,-1,1,1]),Oq(t,RW.lineVert,RW.lineFrag))}function Fd(e,t,n){var r=e*t,i=Hq*e,a=i-e,o=i-a,s=e-o,l=Hq*t,u=l-t,c=l-u,d=t-c,f=r-o*c,h=f-s*c,p=h-o*d,m=s*d-p;return n?(n[0]=m,n[1]=r,n):[m,r]}function jd(e,t,n){var r=e+t,i=r-e,a=r-i,o=t-i,s=e-a;return n?(n[0]=s+o,n[1]=r,n):[s+o,r]}function Bd(e,t){var n=e.length;if(1===n){var r=Vq(e[0],t);return r[0]?r:[r[1]]}var i=new Array(2*n),a=[.1,.1],o=[.1,.1],s=0;Vq(e[0],t,a),a[0]&&(i[s++]=a[0]);for(var l=1;l<n;++l){Vq(e[l],t,o);var u=a[1];Wq(u,o[0],a),a[0]&&(i[s++]=a[0]);var c=o[1],d=a[1],f=c+d,h=f-c,p=d-h;a[1]=f,p&&(i[s++]=p)}return a[1]&&(i[s++]=a[1]),0===s&&(i[s++]=0),i.length=s,i}function Ud(e,t){var n=e+t,r=n-e,i=n-r,a=t-r,o=e-i,s=o+a;return s?[s,n]:[n]}function Vd(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return Ud(e[0],-t[0]);var i,a,o=n+r,s=new Array(o),l=0,u=0,c=0,d=Math.abs,f=e[u],h=d(f),p=-t[c],m=d(p);h<m?(a=f,(u+=1)<n&&(f=e[u],h=d(f))):(a=p,(c+=1)<r&&(p=-t[c],m=d(p))),u<n&&h<m||c>=r?(i=f,(u+=1)<n&&(f=e[u],h=d(f))):(i=p,(c+=1)<r&&(p=-t[c],m=d(p)));for(var g,y,v,_,b,x=i+a,w=x-i,k=a-w,T=k,M=x;u<n&&c<r;)h<m?(i=f,(u+=1)<n&&(f=e[u],h=d(f))):(i=p,(c+=1)<r&&(p=-t[c],m=d(p))),a=T,x=i+a,w=x-i,k=a-w,k&&(s[l++]=k),g=M+x,y=g-M,v=g-y,_=x-y,b=M-v,T=b+_,M=g;for(;u<n;)i=f,a=T,x=i+a,w=x-i,k=a-w,k&&(s[l++]=k),g=M+x,y=g-M,v=g-y,_=x-y,b=M-v,T=b+_,M=g,(u+=1)<n&&(f=e[u]);for(;c<r;)i=p,a=T,x=i+a,w=x-i,k=a-w,k&&(s[l++]=k),g=M+x,y=g-M,v=g-y,_=x-y,b=M-v,T=b+_,M=g,(c+=1)<r&&(p=-t[c]);return T&&(s[l++]=T),M&&(s[l++]=M),l||(s[l++]=0),s.length=l,s}function Hd(e,t){var n=e+t,r=n-e,i=n-r,a=t-r,o=e-i,s=o+a;return s?[s,n]:[n]}function Wd(e,t){var n=0|e.length,r=0|t.length;if(1===n&&1===r)return Hd(e[0],t[0]);var i,a,o=n+r,s=new Array(o),l=0,u=0,c=0,d=Math.abs,f=e[u],h=d(f),p=t[c],m=d(p);h<m?(a=f,(u+=1)<n&&(f=e[u],h=d(f))):(a=p,(c+=1)<r&&(p=t[c],m=d(p))),u<n&&h<m||c>=r?(i=f,(u+=1)<n&&(f=e[u],h=d(f))):(i=p,(c+=1)<r&&(p=t[c],m=d(p)));for(var g,y,v,_,b,x=i+a,w=x-i,k=a-w,T=k,M=x;u<n&&c<r;)h<m?(i=f,(u+=1)<n&&(f=e[u],h=d(f))):(i=p,(c+=1)<r&&(p=t[c],m=d(p))),a=T,x=i+a,w=x-i,k=a-w,k&&(s[l++]=k),g=M+x,y=g-M,v=g-y,_=x-y,b=M-v,T=b+_,M=g;for(;u<n;)i=f,a=T,x=i+a,w=x-i,k=a-w,k&&(s[l++]=k),g=M+x,y=g-M,v=g-y,_=x-y,b=M-v,T=b+_,M=g,(u+=1)<n&&(f=e[u]);for(;c<r;)i=p,a=T,x=i+a,w=x-i,k=a-w,k&&(s[l++]=k),g=M+x,y=g-M,v=g-y,_=x-y,b=M-v,T=b+_,M=g,(c+=1)<r&&(p=t[c]);return T&&(s[l++]=T),M&&(s[l++]=M),l||(s[l++]=0),s.length=l,s}function qd(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),a=0,o=0;a<e.length;++a)a!==t&&(i[o++]=e[r][a]);return n}function Gd(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-2,"]"].join("")}return t}function Yd(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",Yd(e.slice(0,t)),",",Yd(e.slice(t)),")"].join("")}function Xd(e,t){if("m"===e.charAt(0)){if("w"===t.charAt(0)){var n=e.split("[");return["w",t.substr(1),"m",n[0].substr(1)].join("")}return["prod(",e,",",t,")"].join("")}return Xd(t,e)}function Zd(e){return!0&e?"-":""}function Jd(e){if(2===e.length)return[["diff(",Xd(e[0][0],e[1][1]),",",Xd(e[1][0],e[0][1]),")"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",Yd(Jd(qd(e,n))),",",Zd(n),e[0][n],")"].join(""));return t}function Kd(e,t){for(var n=[],r=0;r<t-2;++r)n.push(["prod(m",e,"[",r,"],m",e,"[",r,"])"].join(""));return Yd(n)}function Qd(e){for(var t=[],n=[],r=Gd(e),i=0;i<e;++i)r[0][i]="1",r[e-1][i]="w"+i;for(var i=0;i<e;++i)0===(1&i)?t.push.apply(t,Jd(qd(r,i))):n.push.apply(n,Jd(qd(r,i)));for(var a=Yd(t),o=Yd(n),s="exactInSphere"+e,l=[],i=0;i<e;++i)l.push("m"+i);for(var u=["function ",s,"(",l.join(),"){"],i=0;i<e;++i){u.push("var w",i,"=",Kd(i,e),";");for(var c=0;c<e;++c)c!==i&&u.push("var w",i,"m",c,"=scale(w",i,",m",c,"[0]);")}return u.push("var p=",a,",n=",o,",d=diff(p,n);return d[d.length-1];}return ",s),new Function("sum","diff","prod","scale",u.join(""))(Yq,Gq,Vq,qq)}function $d(){return 0}function ef(){return 0}function tf(){return 0}function nf(e){var t=Jq[e.length];return t||(t=Jq[e.length]=Qd(e.length)),t.apply(void 0,e)}function rf(e,t,n,r,i,a){var o=t.opposite(r,i);if(!(o<0)){if(i<r){var s=r;r=i,i=s,s=a,a=o,o=s}t.isConstraint(r,i)||Kq(e[r],e[i],e[a],e[o])<0&&n.push(r,i)}}function af(e,t){for(var n=[],r=e.length,i=t.stars,a=0;a<r;++a)for(var o=i[a],s=1;s<o.length;s+=2){var l=o[s];if(!(l<a)&&!t.isConstraint(a,l)){for(var u=o[s-1],c=-1,d=1;d<o.length;d+=2)if(o[d-1]===l){c=o[d];break}c<0||Kq(e[a],e[l],e[u],e[c])<0&&n.push(a,l)}}for(;n.length>0;){for(var l=n.pop(),a=n.pop(),u=-1,c=-1,o=i[a],f=1;f<o.length;f+=2){var h=o[f-1],p=o[f];h===l?c=p:p===l&&(u=h)}u<0||c<0||(Kq(e[a],e[l],e[u],e[c])>=0||(t.flip(a,l),rf(e,t,n,u,a,c),rf(e,t,n,a,c,u),rf(e,t,n,c,l,u),rf(e,t,n,l,u,c)))}}function of(e,t,n,r,i,a,o){this.cells=e,this.neighbor=t,this.flags=r,this.constraint=n,this.active=i,this.next=a,this.boundary=o}function sf(e,t){return e[0]-t[0]||e[1]-t[1]||e[2]-t[2]}function lf(e,t){for(var n=e.cells(),r=n.length,i=0;i<r;++i){var a=n[i],o=a[0],s=a[1],l=a[2];s<l?s<o&&(a[0]=s,a[1]=l,a[2]=o):l<o&&(a[0]=l,a[1]=o,a[2]=s)}n.sort(sf);for(var u=new Array(r),i=0;i<u.length;++i)u[i]=0;var c=[],d=[],f=new Array(3*r),h=new Array(3*r),p=null;t&&(p=[]);for(var m=new of(n,f,h,u,c,d,p),i=0;i<r;++i)for(var a=n[i],g=0;g<3;++g){var o=a[g],s=a[(g+1)%3],y=f[3*i+g]=m.locate(s,o,e.opposite(s,o)),v=h[3*i+g]=e.isConstraint(o,s);y<0&&(v?d.push(i):(c.push(i),u[i]=1),t&&p.push([s,o,-1]))}return m}function uf(e,t,n){for(var r=0,i=0;i<e.length;++i)t[i]===n&&(e[r++]=e[i]);return e.length=r,e}function cf(e,t,n){var r=lf(e,n);if(0===t)return n?r.cells.concat(r.boundary):r.cells;for(var i=1,a=r.active,o=r.next,s=r.flags,l=r.cells,u=r.constraint,c=r.neighbor;a.length>0||o.length>0;){for(;a.length>0;){var d=a.pop();if(s[d]!==-i){s[d]=i;for(var f=(l[d],0);f<3;++f){var h=c[3*d+f];h>=0&&0===s[h]&&(u[3*d+f]?o.push(h):(a.push(h),s[h]=i))}}}var p=o;o=a,a=p,o.length=0,i=-i}var m=uf(l,s,t);return n?m.concat(r.boundary):m}function df(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),a=0,o=0;a<e.length;++a)a!==t&&(i[o++]=e[r][a]);return n}function ff(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m",r,"[",e-n-1,"]"].join("")}return t}function hf(e){return 1&e?"-":""}function pf(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",pf(e.slice(0,t)),",",pf(e.slice(t)),")"].join("")}function mf(e){if(2===e.length)return[["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("")];for(var t=[],n=0;n<e.length;++n)t.push(["scale(",pf(mf(df(e,n))),",",hf(n),e[0][n],")"].join(""));return t}function gf(e){for(var t=[],n=[],r=ff(e),i=[],a=0;a<e;++a)0===(1&a)?t.push.apply(t,mf(df(r,a))):n.push.apply(n,mf(df(r,a))),i.push("m"+a);var o=pf(t),s=pf(n),l="orientation"+e+"Exact",u=["function ",l,"(",i.join(),"){var p=",o,",n=",s,",d=sub(p,n);return d[d.length-1];};return ",l].join("");return new Function("sum","prod","scale","sub",u)(Yq,Vq,qq,Gq)}function yf(e){var t=iG[e.length];return t||(t=iG[e.length]=gf(e.length)),t.apply(void 0,e)}function vf(e,t,n,r,i){this.a=e,this.b=t,this.idx=n,this.lowerIds=r,this.upperIds=i}function _f(e,t,n,r){this.a=e,this.b=t,this.type=n,this.idx=r}function bf(e,t){var n=e.a[0]-t.a[0]||e.a[1]-t.a[1]||e.type-t.type;return n||(e.type!==oG&&(n=aG(e.a,e.b,t.b))?n:e.idx-t.idx)}function xf(e,t){return aG(e.a,e.b,t)}function wf(e,t,n,r,i){for(var a=Dq.lt(t,r,xf),o=Dq.gt(t,r,xf),s=a;s<o;++s){for(var l=t[s],u=l.lowerIds,c=u.length;c>1&&aG(n[u[c-2]],n[u[c-1]],r)>0;)e.push([u[c-1],u[c-2],i]),c-=1;u.length=c,u.push(i);for(var d=l.upperIds,c=d.length;c>1&&aG(n[d[c-2]],n[d[c-1]],r)<0;)e.push([d[c-2],d[c-1],i]),c-=1;d.length=c,d.push(i)}}function kf(e,t){var n;return(n=e.a[0]<t.a[0]?aG(e.a,e.b,t.a):aG(t.b,t.a,e.a))?n:(n=t.b[0]<e.b[0]?aG(e.a,e.b,t.b):aG(t.b,t.a,e.b))||e.idx-t.idx}function Tf(e,t,n){var r=Dq.le(e,n,kf),i=e[r],a=i.upperIds,o=a[a.length-1];i.upperIds=[o],e.splice(r+1,0,new vf(n.a,n.b,n.idx,[o],a))}function Mf(e,t,n){var r=n.a;n.a=n.b,n.b=r;var i=Dq.eq(e,n,kf),a=e[i];e[i-1].upperIds=a.upperIds,e.splice(i,1)}function Af(e,t){for(var n=e.length,r=t.length,i=[],a=0;a<n;++a)i.push(new _f(e[a],null,oG,a));for(var a=0;a<r;++a){var o=t[a],s=e[o[0]],l=e[o[1]];s[0]<l[0]?i.push(new _f(s,l,lG,a),new _f(l,s,sG,a)):s[0]>l[0]&&i.push(new _f(l,s,lG,a),new _f(s,l,sG,a))}i.sort(bf);for(var u=i[0].a[0]-(1+Math.abs(i[0].a[0]))*Math.pow(2,-52),c=[new vf([u,1],[u,0],-1,[],[],[],[])],d=[],a=0,f=i.length;a<f;++a){var h=i[a],p=h.type;p===oG?wf(d,c,e,h.a,h.idx):p===lG?Tf(c,e,h):Mf(c,e,h)}return d}function Cf(e,t){this.stars=e,this.edges=t}function Sf(e,t,n){for(var r=1,i=e.length;r<i;r+=2)if(e[r-1]===t&&e[r]===n)return e[r-1]=e[i-2],e[r]=e[i-1],void(e.length=i-2)}function Ef(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=[];return new Cf(n,t)}function Pf(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function If(e,t){return e[0]-t[0]||e[1]-t[1]}function Lf(e){return e.map(Pf).sort(If)}function Of(e,t,n){return t in e?e[t]:n}function zf(e,t,n){Array.isArray(t)?(n=n||{},t=t||[]):(n=t||{},t=[]);var r=!!Of(n,"delaunay",!0),i=!!Of(n,"interior",!0),a=!!Of(n,"exterior",!0),o=!!Of(n,"infinity",!1);if(!i&&!a||0===e.length)return[];var s=uG(e,t);if(r||i!==a||o){for(var l=cG(e.length,Lf(t)),u=0;u<s.length;++u){var c=s[u];l.addTriangle(c[0],c[1],c[2])}return r&&Qq(e,l),a?i?o?$q(l,0,o):l.cells():$q(l,1,o):$q(l,-1)}return s}function Rf(e,t){return e[0].mul(t[1]).cmp(t[0].mul(e[1]))}function Df(e){return e.cmp(new mG(0))}function Nf(e){var t=yG.exponent(e);return t<52?new mG(e):new mG(e*Math.pow(2,52-t)).ushln(t-52)}function Ff(e,t){var n=gG(e),r=gG(t);if(0===n)return[vG(0),vG(1)];if(0===r)return[vG(0),vG(0)];r<0&&(e=e.neg(),t=t.neg());var i=e.gcd(t);return i.cmpn(1)?[e.div(i),t.div(i)]:[e,t]}function jf(e,t){return _G(e[0].mul(t[1]),e[1].mul(t[0]))}function Bf(e){return e&&"object"===typeof e&&Boolean(e.words)}function Uf(e){return Array.isArray(e)&&2===e.length&&xG(e[0])&&xG(e[1])}function Vf(e){return new mG(e)}function Hf(e,t){if(wG(e))return t?bG(e,Hf(t)):[e[0].clone(),e[1].clone()];var n,r,i=0;if(xG(e))n=e.clone();else if("string"===typeof e)n=kG(e);else{if(0===e)return[vG(0),vG(1)];if(e===Math.floor(e))n=vG(e);else{for(;e!==Math.floor(e);)e*=Math.pow(2,256),i-=256;n=vG(e)}}if(wG(t))n.mul(t[1]),r=t[0].clone();else if(xG(t))r=t.clone();else if("string"===typeof t)r=kG(t);else if(t)if(t===Math.floor(t))r=vG(t);else{for(;t!==Math.floor(t);)t*=Math.pow(2,256),i+=256;r=vG(t)}else r=vG(1);return i>0?n=n.ushln(i):i<0&&(r=r.ushln(-i)),_G(n,r)}function Wf(e){var t=e.length,n=e.words,r=0;if(1===t)r=n[0];else if(2===t)r=n[0]+67108864*n[1];else for(var i=0;i<t;i++){var a=n[i];r+=a*Math.pow(67108864,i)}return gG(e)*r}function qf(e){var t=AG(yG.lo(e));if(t<32)return t;var n=AG(yG.hi(e));return n>20?52:n+32}function Gf(e){var t=e[0],n=e[1];if(0===t.cmpn(0))return 0;var r=t.abs().divmod(n.abs()),i=r.div,a=MG(i),o=r.mod,s=t.negative!==n.negative?-1:1;if(0===o.cmpn(0))return s*a;if(a){var l=CG(a)+4,u=MG(o.ushln(l).divRound(n));return s*(a+u*Math.pow(2,-l))}var c=n.bitLength()-o.bitLength()+53,u=MG(o.ushln(c).divRound(n));return c<1023?s*u*Math.pow(2,-c):(u*=Math.pow(2,-1023),s*u*Math.pow(2,1023-c))}function Yf(e,t,n){var r="bruteForce"+(e?"Red":"Blue")+(t?"Flip":"")+(n?"Full":""),i=["function ",r,"(",YG.join(),"){","var ",zG,"=2*",PG,";"],a="for(var i="+RG+","+jG+"="+zG+"*"+RG+";i<"+DG+";++i,"+jG+"+="+zG+"){var x0="+NG+"["+IG+"+"+jG+"],x1="+NG+"["+IG+"+"+jG+"+"+PG+"],xi="+FG+"[i];",o="for(var j="+BG+","+WG+"="+zG+"*"+BG+";j<"+UG+";++j,"+WG+"+="+zG+"){var y0="+VG+"["+IG+"+"+WG+"],"+(n?"y1="+VG+"["+IG+"+"+WG+"+"+PG+"],":"")+"yi="+HG+"[j];";return e?i.push(a,GG,":",o):i.push(o,GG,":",a),n?i.push("if(y1<x0||x1<y0)continue;"):t?i.push("if(y0<=x0||x1<y0)continue;"):i.push("if(y0<x0||x1<y0)continue;"),i.push("for(var k="+IG+"+1;k<"+PG+";++k){var r0="+NG+"[k+"+jG+"],r1="+NG+"[k+"+PG+"+"+jG+"],b0="+VG+"[k+"+WG+"],b1="+VG+"[k+"+PG+"+"+WG+"];if(r1<b0||b1<r0)continue "+GG+";}var "+qG+"="+LG+"("),t?i.push("yi,xi"):i.push("xi,yi"),i.push(");if("+qG+"!==void 0)return "+qG+";}}}"),{name:r,code:i.join("")}}function Xf(e){function t(t,n){var i=Yf(t,n,e);r.push(i.code),a.push("return "+i.name+"("+YG.join()+");")}var n="bruteForce"+(e?"Full":"Partial"),r=[],i=YG.slice();e||i.splice(3,0,OG);var a=["function "+n+"("+i.join()+"){"];a.push("if("+DG+"-"+RG+">"+UG+"-"+BG+"){"),e?(t(!0,!1),a.push("}else{"),t(!1,!1)):(a.push("if("+OG+"){"),t(!0,!0),a.push("}else{"),t(!0,!1),a.push("}}else{if("+OG+"){"),t(!1,!0),a.push("}else{"),t(!1,!1),a.push("}")),a.push("}}return "+n);var o=r.join("")+a.join("");return new Function(o)()}function Zf(e,t){var n="abcdef".split("").concat(t),r=[];return e.indexOf("lo")>=0&&r.push("lo=e[k+n]"),e.indexOf("hi")>=0&&r.push("hi=e[k+o]"),n.push(JG.replace("_",r.join()).replace("$",e)),Function.apply(void 0,n)}function Jf(e,t,n,r,i,a){for(var o=2*e,s=o*(n+1)+t,l=n+1;l<r;++l,s+=o)for(var u=i[s],c=l,d=o*(l-1);c>n&&i[d+t]>u;--c,d-=o){for(var f=d,h=d+o,p=0;p<o;++p,++f,++h){var m=i[f];i[f]=i[h],i[h]=m}var g=a[c];a[c]=a[c-1],a[c-1]=g}}function Kf(e,t,n,r,i,a){if(r<=n+1)return n;for(var o=n,s=r,l=r+n>>>1,u=2*e,c=l,d=i[u*l+t];o<s;){if(s-o<$G){Jf(e,t,o,s,i,a),d=i[u*l+t];break}var f=s-o,h=Math.random()*f+o|0,p=i[u*h+t],m=Math.random()*f+o|0,g=i[u*m+t],y=Math.random()*f+o|0,v=i[u*y+t];p<=g?v>=g?(c=m,d=g):p>=v?(c=h,d=p):(c=y,d=v):g>=v?(c=m,d=g):v>=p?(c=h,d=p):(c=y,d=v);for(var _=u*(s-1),b=u*c,x=0;x<u;++x,++_,++b){var w=i[_];i[_]=i[b],i[b]=w}var k=a[s-1];a[s-1]=a[c],a[c]=k,c=QG(e,t,o,s-1,i,a,d);for(var _=u*(s-1),b=u*c,x=0;x<u;++x,++_,++b){var w=i[_];i[_]=i[b],i[b]=w}var k=a[s-1];if(a[s-1]=a[c],a[c]=k,l<c){for(s=c-1;o<s&&i[u*(s-1)+t]===d;)s-=1;s+=1}else{if(!(c<l))break;for(o=c+1;o<s&&i[u*o+t]===d;)o+=1}}return QG(e,t,n,l,i,a,i[u*l+t])}function Qf(e,t){t<=4*tY?$f(0,t-1,e):oh(0,t-1,e)}function $f(e,t,n){for(var r=2*(e+1),i=e+1;i<=t;++i){for(var a=n[r++],o=n[r++],s=i,l=r-2;s-- >e;){var u=n[l-2],c=n[l-1];if(u<a)break;if(u===a&&c<o)break;n[l]=u,n[l+1]=c,l-=2}n[l]=a,n[l+1]=o}}function eh(e,t,n){e*=2,t*=2;var r=n[e],i=n[e+1];n[e]=n[t],n[e+1]=n[t+1],n[t]=r,n[t+1]=i}function th(e,t,n){e*=2,t*=2,n[e]=n[t],n[e+1]=n[t+1]}function nh(e,t,n,r){e*=2,t*=2,n*=2;var i=r[e],a=r[e+1];r[e]=r[t],r[e+1]=r[t+1],r[t]=r[n],r[t+1]=r[n+1],r[n]=i,r[n+1]=a}function rh(e,t,n,r,i){e*=2,t*=2,i[e]=i[t],i[t]=n,i[e+1]=i[t+1],i[t+1]=r}function ih(e,t,n){e*=2,t*=2;var r=n[e],i=n[t];return!(r<i)&&(r!==i||n[e+1]>n[t+1])}function ah(e,t,n,r){e*=2;var i=r[e];return i<t||i===t&&r[e+1]<n}function oh(e,t,n){var r=(t-e+1)/6|0,i=e+r,a=t-r,o=e+t>>1,s=o-r,l=o+r,u=i,c=s,d=o,f=l,h=a,p=e+1,m=t-1,g=0;ih(u,c,n)&&(g=u,u=c,c=g),ih(f,h,n)&&(g=f,f=h,h=g),ih(u,d,n)&&(g=u,u=d,d=g),ih(c,d,n)&&(g=c,c=d,d=g),ih(u,f,n)&&(g=u,u=f,f=g),ih(d,f,n)&&(g=d,d=f,f=g),ih(c,h,n)&&(g=c,c=h,h=g),ih(c,d,n)&&(g=c,c=d,d=g),ih(f,h,n)&&(g=f,f=h,h=g);for(var y=n[2*c],v=n[2*c+1],_=n[2*f],b=n[2*f+1],x=2*u,w=2*d,k=2*h,T=2*i,M=2*o,A=2*a,C=0;C<2;++C){var S=n[x+C],E=n[w+C],P=n[k+C];n[T+C]=S,n[M+C]=E,n[A+C]=P}th(s,e,n),th(l,t,n);for(var I=p;I<=m;++I)if(ah(I,y,v,n))I!==p&&eh(I,p,n),++p;else if(!ah(I,_,b,n))for(;;){if(ah(m,_,b,n)){ah(m,y,v,n)?(nh(I,p,m,n),++p,--m):(eh(I,m,n),--m);break}if(--m<I)break}rh(e,p-1,y,v,n),rh(t,m+1,_,b,n),p-2-e<=tY?$f(e,p-2,n):oh(e,p-2,n),t-(m+2)<=tY?$f(m+2,t,n):oh(m+2,t,n),m-p<=tY?$f(p,m,n):oh(p,m,n)}function sh(e){var t=pW.nextPow2(e);iY.length<t&&(EW.free(iY),iY=EW.mallocInt32(t)),aY.length<t&&(EW.free(aY),aY=EW.mallocInt32(t)),oY.length<t&&(EW.free(oY),oY=EW.mallocInt32(t)),sY.length<t&&(EW.free(sY),sY=EW.mallocInt32(t)),lY.length<t&&(EW.free(lY),lY=EW.mallocInt32(t)),uY.length<t&&(EW.free(uY),uY=EW.mallocInt32(t));var n=8*t;cY.length<n&&(EW.free(cY),cY=EW.mallocDouble(n))}function lh(e,t,n,r){var i=t[r],a=e[n-1];e[i]=a,t[a]=i}function uh(e,t,n,r){e[n]=r,t[r]=n}function ch(e,t,n,r,i,a,o,s,l,u){for(var c=0,d=2*e,f=e-1,h=d-1,p=n;p<r;++p){var m=a[p],g=d*p;cY[c++]=i[g+f],cY[c++]=-(m+1),cY[c++]=i[g+h],cY[c++]=m}for(var p=o;p<s;++p){var m=u[p]+rY,y=d*p;cY[c++]=l[y+f],cY[c++]=-m,cY[c++]=l[y+h],cY[c++]=m}var v=c>>>1;eY(cY,v);for(var _=0,b=0,p=0;p<v;++p){var x=0|cY[2*p+1];if(x>=rY)x=x-rY|0,lh(oY,sY,b--,x);else if(x>=0)lh(iY,aY,_--,x);else if(x<=-rY){x=-x-rY|0;for(var w=0;w<_;++w){var k=t(iY[w],x);if(void 0!==k)return k}uh(oY,sY,b++,x)}else{x=-x-1|0;for(var w=0;w<b;++w){var k=t(x,oY[w]);if(void 0!==k)return k}uh(iY,aY,_++,x)}}}function dh(e,t,n,r,i,a,o,s,l,u){for(var c=0,d=2*e,f=e-1,h=d-1,p=n;p<r;++p){var m=a[p]+1<<1,g=d*p;cY[c++]=i[g+f],cY[c++]=-m,cY[c++]=i[g+h],cY[c++]=m}for(var p=o;p<s;++p){var m=u[p]+1<<1,y=d*p;cY[c++]=l[y+f],cY[c++]=1|-m,cY[c++]=l[y+h],cY[c++]=1|m}var v=c>>>1;eY(cY,v);for(var _=0,b=0,x=0,p=0;p<v;++p){var w=0|cY[2*p+1],k=1&w;if(p<v-1&&w>>1===cY[2*p+3]>>1&&(k=2,p+=1),w<0){for(var T=-(w>>1)-1,M=0;M<x;++M){var A=t(lY[M],T);if(void 0!==A)return A}if(0!==k)for(var M=0;M<_;++M){var A=t(iY[M],T);if(void 0!==A)return A}if(1!==k)for(var M=0;M<b;++M){var A=t(oY[M],T);if(void 0!==A)return A}0===k?uh(iY,aY,_++,T):1===k?uh(oY,sY,b++,T):2===k&&uh(lY,uY,x++,T)}else{var T=(w>>1)-1;0===k?lh(iY,aY,_--,T):1===k?lh(oY,sY,b--,T):2===k&&lh(lY,uY,x--,T)}}}function fh(e,t,n,r,i,a,o,s,l,u,c,d){var f=0,h=2*e,p=t,m=t+e,g=1,y=1;r?y=rY:g=rY;for(var v=i;v<a;++v){var _=v+g,b=h*v;cY[f++]=o[b+p],cY[f++]=-_,cY[f++]=o[b+m],cY[f++]=_}for(var v=l;v<u;++v){var _=v+y,x=h*v;cY[f++]=c[x+p],cY[f++]=-_}var w=f>>>1;eY(cY,w);for(var k=0,v=0;v<w;++v){var T=0|cY[2*v+1];if(T<0){var _=-T,M=!1;if(_>=rY?(M=!r,_-=rY):(M=!!r,_-=1),M)uh(iY,aY,k++,_);else{var A=d[_],C=h*_,S=c[C+t+1],E=c[C+t+1+e];e:for(var P=0;P<k;++P){var I=iY[P],L=h*I;if(!(E<o[L+t+1]||o[L+t+1+e]<S)){for(var O=t+2;O<e;++O)if(c[C+O+e]<o[L+O]||o[L+O+e]<c[C+O])continue e;var z,R=s[I];if(void 0!==(z=r?n(A,R):n(R,A)))return z}}}}else lh(iY,aY,k--,T-g)}}function hh(e,t,n,r,i,a,o,s,l,u,c){for(var d=0,f=2*e,h=t,p=t+e,m=r;m<i;++m){var g=m+rY,y=f*m;cY[d++]=a[y+h],cY[d++]=-g,cY[d++]=a[y+p],cY[d++]=g}for(var m=s;m<l;++m){var g=m+1,v=f*m;cY[d++]=u[v+h],cY[d++]=-g}var _=d>>>1;eY(cY,_);for(var b=0,m=0;m<_;++m){var x=0|cY[2*m+1];if(x<0){var g=-x;if(g>=rY)iY[b++]=g-rY;else{g-=1;var w=c[g],k=f*g,T=u[k+t+1],M=u[k+t+1+e];e:for(var A=0;A<b;++A){var C=iY[A],S=o[C];if(S===w)break;var E=f*C;if(!(M<a[E+t+1]||a[E+t+1+e]<T)){for(var P=t+2;P<e;++P)if(u[k+P+e]<a[E+P]||a[E+P+e]<u[k+P])continue e;var I=n(S,w);if(void 0!==I)return I}}}}else{for(var g=x-rY,A=b-1;A>=0;--A)if(iY[A]===g){for(var P=A+1;P<b;++P)iY[P-1]=iY[P];break}--b}}}function ph(e,t){var n=8*pW.log2(t+1)*(e+1)|0,r=pW.nextPow2(kY*n);MY.length<r&&(EW.free(MY),MY=EW.mallocInt32(r));var i=pW.nextPow2(TY*n);AY<i&&(EW.free(AY),AY=EW.mallocDouble(i))}function mh(e,t,n,r,i,a,o,s,l){var u=kY*e;MY[u]=t,MY[u+1]=n,MY[u+2]=r,MY[u+3]=i,MY[u+4]=a,MY[u+5]=o;var c=TY*e;AY[c]=s,AY[c+1]=l}function gh(e,t,n,r,i,a,o,s,l,u,c){var d=2*e,f=l*d,h=u[f+t];e:for(var p=i,m=i*d;p<a;++p,m+=d){var g=o[m+t],y=o[m+t+e];if(!(h<g||y<h)&&(!r||h!==g)){for(var v=s[p],_=t+1;_<e;++_){var g=o[m+_],y=o[m+_+e],b=u[f+_],x=u[f+_+e];if(y<b||x<g)continue e}var w;if(void 0!==(w=r?n(c,v):n(v,c)))return w}}}function yh(e,t,n,r,i,a,o,s,l,u){var c=2*e,d=s*c,f=l[d+t];e:for(var h=r,p=r*c;h<i;++h,p+=c){var m=o[h];if(m!==u){var g=a[p+t],y=a[p+t+e];if(!(f<g||y<f)){for(var v=t+1;v<e;++v){var g=a[p+v],y=a[p+v+e],_=l[d+v],b=l[d+v+e];if(y<_||b<g)continue e}var x=n(m,u);if(void 0!==x)return x}}}}function vh(e,t,n,r,i,a,o,s,l){ph(e,r+o);var u,c=0,d=2*e;for(mh(c++,0,0,r,0,o,n?16:0,-1/0,1/0),n||mh(c++,0,0,o,0,r,1,-1/0,1/0);c>0;){c-=1;var f=c*kY,h=MY[f],p=MY[f+1],m=MY[f+2],g=MY[f+3],y=MY[f+4],v=MY[f+5],_=c*TY,b=AY[_],x=AY[_+1],w=1&v,k=!!(16&v),T=i,M=a,A=s,C=l;if(w&&(T=s,M=l,A=i,C=a),!(2&v&&(m=_Y(e,h,p,m,T,M,x),p>=m))&&!(4&v&&(p=bY(e,h,p,m,T,M,b))>=m)){var S=m-p,E=y-g;if(k){if(e*S*(S+E)<gY){if(void 0!==(u=nY.scanComplete(e,h,t,p,m,T,M,g,y,A,C)))return u;continue}}else{if(e*Math.min(S,E)<pY){if(void 0!==(u=fY(e,h,t,w,p,m,T,M,g,y,A,C)))return u;continue}if(e*S*E<mY){if(void 0!==(u=nY.scanBipartite(e,h,t,w,p,m,T,M,g,y,A,C)))return u;continue}}var P=yY(e,h,p,m,T,M,b,x);if(p<P)if(e*(P-p)<pY){if(void 0!==(u=hY(e,h+1,t,p,P,T,M,g,y,A,C)))return u}else if(h===e-2){if(void 0!==(u=w?nY.sweepBipartite(e,t,g,y,A,C,p,P,T,M):nY.sweepBipartite(e,t,p,P,T,M,g,y,A,C)))return u}else mh(c++,h+1,p,P,g,y,w,-1/0,1/0),mh(c++,h+1,g,y,p,P,1^w,-1/0,1/0);if(P<m){var I=KG(e,h,g,y,A,C),L=A[d*I+h],O=vY(e,h,I,y,A,C,L);if(O<y&&mh(c++,h,P,m,O,y,(4|w)+(k?16:0),L,x),g<I&&mh(c++,h,P,m,g,I,(2|w)+(k?16:0),b,L),I+1===O){if(void 0!==(u=k?yh(e,h,t,P,m,T,M,I,A,C[I]):gh(e,h,t,w,P,m,T,M,I,A,C[I])))return u}else if(I<O){var z;if(k){if(z=xY(e,h,P,m,T,M,L),P<z){var R=vY(e,h,P,z,T,M,L);if(h===e-2){if(P<R&&void 0!==(u=nY.sweepComplete(e,t,P,R,T,M,I,O,A,C)))return u;if(R<z&&void 0!==(u=nY.sweepBipartite(e,t,R,z,T,M,I,O,A,C)))return u}else P<R&&mh(c++,h+1,P,R,I,O,16,-1/0,1/0),R<z&&(mh(c++,h+1,R,z,I,O,0,-1/0,1/0),mh(c++,h+1,I,O,R,z,1,-1/0,1/0))}}else z=w?wY(e,h,P,m,T,M,L):xY(e,h,P,m,T,M,L),P<z&&(h===e-2?u=w?nY.sweepBipartite(e,t,I,O,A,C,P,z,T,M):nY.sweepBipartite(e,t,P,z,T,M,I,O,A,C):(mh(c++,h+1,P,z,I,O,w,-1/0,1/0),mh(c++,h+1,I,O,P,z,1^w,-1/0,1/0)))}}}}}function _h(e,t){for(var n=0;n<e;++n)if(!(t[n]<=t[n+e]))return!0;return!1}function bh(e,t,n,r){for(var i=0,a=0,o=0,s=e.length;o<s;++o){var l=e[o];if(!_h(t,l)){for(var u=0;u<2*t;++u)n[i++]=l[u];r[a++]=o}}return a}function xh(e,t,n,r){var i=e.length,a=t.length;if(!(i<=0||a<=0)){var o=e[0].length>>>1;if(!(o<=0)){var s,l=EW.mallocDouble(2*o*i),u=EW.mallocInt32(i);if((i=bh(e,o,l,u))>0){if(1===o&&r)nY.init(i),s=nY.sweepComplete(o,n,0,i,l,u,0,i,l,u);else{var c=EW.mallocDouble(2*o*a),d=EW.mallocInt32(a);a=bh(t,o,c,d),a>0&&(nY.init(i+a),s=1===o?nY.sweepBipartite(o,n,0,i,l,u,0,a,c,d):dY(o,n,r,i,l,u,a,c,d),EW.free(c),EW.free(d))}EW.free(l),EW.free(u)}return s}}}function wh(e,t){XG.push([e,t])}function kh(e){return XG=[],xh(e,e,wh,!0),XG}function Th(e,t){return XG=[],xh(e,t,wh,!1),XG}function Mh(e,t,n){switch(arguments.length){case 1:return kh(e);case 2:return"function"===typeof t?xh(e,e,t,!0):Th(e,t);case 3:return xh(e,t,n,!1);default:throw new Error("box-intersect: Invalid arguments")}}function Ah(e,t){return _G(e[0].mul(t[0]),e[1].mul(t[1]))}function Ch(e){return gG(e[0])*gG(e[1])}function Sh(e,t){return _G(e[0].mul(t[1]).sub(e[1].mul(t[0])),e[1].mul(t[1]))}function Eh(e,t){return _G(e[0].mul(t[1]).add(t[0].mul(e[1])),e[1].mul(t[1]))}function Ph(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=IY(e[i],t[i]);return r}function Ih(e,t){for(var n=TG(t),r=e.length,i=new Array(r),a=0;a<r;++a)i[a]=SY(e[a],n);return i}function Lh(e,t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=PY(e[i],t[i]);return r}function Oh(e,t){return PY(SY(e[0],t[1]),SY(e[1],t[0]))}function zh(e,t,n,r){var i=zY(t,e),a=zY(r,n),o=Oh(i,a);if(0===EY(o))return null;var s=zY(e,n),l=Oh(a,s),u=bG(l,o),c=OY(i,u);return LY(e,c)}function Rh(e,t){if(isNaN(e)||isNaN(t))return NaN;if(e===t)return e;if(0===e)return t<0?-DY:DY;var n=yG.hi(e),r=yG.lo(e);return t>e===e>0?r===NY?(n+=1,r=0):r+=1:0===r?(r=NY,n-=1):r-=1,yG.pack(r,n)}function Dh(e){for(var t=new Array(e.length),n=0;n<e.length;++n)t[n]=TG(e[n]);return t}function Nh(e,t,n,r){for(var i=0;i<2;++i){var a=e[i],o=t[i],s=Math.min(a,o),l=Math.max(a,o),u=n[i],c=r[i],d=Math.min(u,c);if(Math.max(u,c)<s||l<d)return!1}return!0}function Fh(e,t,n,r){var i=UY(e,n,r),a=UY(t,n,r);if(i>0&&a>0||i<0&&a<0)return!1;var o=UY(n,e,t),s=UY(r,e,t);return!(o>0&&s>0||o<0&&s<0)&&(0!==i||0!==a||0!==o||0!==s||Nh(e,t,n,r))}function jh(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}function Bh(e){var t=SG(e);return[FY(t,-1/0),FY(t,1/0)]}function Uh(e,t){for(var n=new Array(t.length),r=0;r<t.length;++r){var i=t[r],a=e[i[0]],o=e[i[1]];n[r]=[FY(Math.min(a[0],o[0]),-1/0),FY(Math.min(a[1],o[1]),-1/0),FY(Math.max(a[0],o[0]),1/0),FY(Math.max(a[1],o[1]),1/0)]}return n}function Vh(e){for(var t=new Array(e.length),n=0;n<e.length;++n){var r=e[n];t[n]=[FY(r[0],-1/0),FY(r[1],-1/0),FY(r[0],1/0),FY(r[1],1/0)]}return t}function Hh(e,t,n){var r=[];return CY(n,function(n,i){var a=t[n],o=t[i];if(a[0]!==o[0]&&a[0]!==o[1]&&a[1]!==o[0]&&a[1]!==o[1]){var s=e[a[0]],l=e[a[1]],u=e[o[0]],c=e[o[1]];BY(s,l,u,c)&&r.push([n,i])}}),r}function Wh(e,t,n,r){var i=[];return CY(n,r,function(n,r){var a=t[n];if(a[0]!==r&&a[1]!==r){var o=e[r],s=e[a[0]],l=e[a[1]];BY(s,l,o,o)&&i.push([n,r])}}),i}function qh(e,t,n,r,i){var a,o,s=e.map(function(e){return[TG(e[0]),TG(e[1])]});for(a=0;a<n.length;++a){var l=n[a];o=l[0];var u=l[1],c=t[o],d=t[u],f=RY(jY(e[c[0]]),jY(e[c[1]]),jY(e[d[0]]),jY(e[d[1]]));if(f){var h=e.length;e.push([SG(f[0]),SG(f[1])]),s.push(f),r.push([o,h],[u,h])}}for(r.sort(function(e,t){if(e[0]!==t[0])return e[0]-t[0];var n=s[e[1]],r=s[t[1]];return hG(n[0],r[0])||hG(n[1],r[1])}),a=r.length-1;a>=0;--a){var p=r[a];o=p[0];var m=t[o],g=m[0],y=m[1],v=e[g],_=e[y];if((v[0]-_[0]||v[1]-_[1])<0){var b=g;g=y,y=b}m[0]=g;var x,w=m[1]=p[1];for(i&&(x=m[2]);a>0&&r[a-1][0]===o;){var p=r[--a],k=p[1];i?t.push([w,k,x]):t.push([w,k]),w=k}i?t.push([w,y,x]):t.push([w,y])}return s}function Gh(e,t,n){for(var r=t.length,i=new VY(r),a=[],o=0;o<t.length;++o){var s=t[o],l=Bh(s[0]),u=Bh(s[1]);a.push([FY(l[0],-1/0),FY(u[0],-1/0),FY(l[1],1/0),FY(u[1],1/0)])}CY(a,function(e,t){i.link(e,t)});for(var c=!0,d=new Array(r),o=0;o<r;++o){var f=i.find(o);f!==o&&(c=!1,e[f]=[Math.min(e[o][0],e[f][0]),Math.min(e[o][1],e[f][1])])}if(c)return null;for(var h=0,o=0;o<r;++o){var f=i.find(o);f===o?(d[o]=h,e[h++]=e[o]):d[o]=-1}e.length=h;for(var o=0;o<r;++o)d[o]<0&&(d[o]=d[i.find(o)]);return d}function Yh(e,t){return e[0]-t[0]||e[1]-t[1]}function Xh(e,t){var n=e[0]-t[0]||e[1]-t[1];return n||(e[2]<t[2]?-1:e[2]>t[2]?1:0)}function Zh(e,t,n){if(0!==e.length){if(t)for(var r=0;r<e.length;++r){var i=e[r],a=t[i[0]],o=t[i[1]];i[0]=Math.min(a,o),i[1]=Math.max(a,o)}else for(var r=0;r<e.length;++r){var i=e[r],a=i[0],o=i[1];i[0]=Math.min(a,o),i[1]=Math.max(a,o)}n?e.sort(Xh):e.sort(Yh);for(var s=1,r=1;r<e.length;++r){var l=e[r-1],u=e[r];(u[0]!==l[0]||u[1]!==l[1]||n&&u[2]!==l[2])&&(e[s++]=u)}e.length=s}}function Jh(e,t,n){var r=Gh(e,[],Vh(e));return Zh(t,r,n),!!r}function Kh(e,t,n){var r=Uh(e,t),i=Hh(e,t,r),a=Vh(e),o=Wh(e,t,r,a),s=qh(e,t,i,o,n),l=Gh(e,s,a);return Zh(t,l,n),!!l||(i.length>0||o.length>0)}function Qh(e,t,n){var r;if(n){r=t;for(var i=new Array(t.length),a=0;a<t.length;++a){var o=t[a];i[a]=[o[0],o[1],n[a]]}t=i}for(var s=Jh(e,t,!!n);Kh(e,t,!!n);)s=!0;if(n&&s){r.length=0,n.length=0;for(var a=0;a<t.length;++a){var o=t[a];r.push([o[0],o[1]]),n.push(o[2])}}return s}function $h(e,t){var n=e.length;if("number"!==typeof t){t=0;for(var r=0;r<n;++r){var i=e[r];t=Math.max(t,i[0],i[1])}t=1+(0|t)}t|=0;for(var a=new Array(t),r=0;r<t;++r)a[r]=[];for(var r=0;r<n;++r){var i=e[r];a[i[0]].push(i[1]),a[i[1]].push(i[0])}for(var o=0;o<t;++o)KH(a[o],function(e,t){return e-t});return a}function ep(e,t){if(1===e.length)return qq(t,e[0]);if(1===t.length)return qq(e,t[0]);if(0===e.length||0===t.length)return[0];var n=[0];if(e.length<t.length)for(var r=0;r<e.length;++r)n=Yq(n,qq(t,e[r]));else for(var r=0;r<t.length;++r)n=Yq(n,qq(e,t[r]));return n}function tp(e,t,n){var r=Wq(e[0],-t[0]),i=Wq(e[1],-t[1]),a=Wq(n[0],-t[0]),o=Wq(n[1],-t[1]),s=Yq(GY(r,a),GY(i,o));return s[s.length-1]>=0}function np(e,t,n,r){var i=eG(t,n,r);if(0===i){var a=YY(eG(e,t,n)),o=YY(eG(e,t,r));if(a===o){if(0===a){var s=tp(e,t,n);return s===tp(e,t,r)?0:s?1:-1}return 0}return 0===o?a>0?-1:tp(e,t,r)?-1:1:0===a?o>0?1:tp(e,t,n)?1:-1:YY(o-a)}var l=eG(e,t,n);return l>0?i>0&&eG(e,t,r)>0?1:-1:l<0?i>0||eG(e,t,r)>0?1:-1:eG(e,t,r)>0?1:tp(e,t,n)?1:-1}function rp(e,t){function n(e,t){var n=o[t][e[t]];n.splice(n.indexOf(e),1)}function r(e,r,i){for(var a,s,l,u=0;u<2;++u)if(o[u][r].length>0){a=o[u][r][0],l=u;break}s=a[1^l];for(var c=0;c<2;++c)for(var d=o[c][r],f=0;f<d.length;++f){var h=d[f],p=h[1^c],m=XY(t[e],t[r],t[s],t[p]);m>0&&(a=h,s=p,l=c)}return i?s:(a&&n(a,l),s)}for(var i=0|t.length,a=e.length,o=[new Array(i),new Array(i)],s=0;s<i;++s)o[0][s]=[],o[1][s]=[];for(var s=0;s<a;++s){var l=e[s];o[0][l[0]].push(l),o[1][l[1]].push(l)}for(var u=[],s=0;s<i;++s)o[0][s].length+o[1][s].length===0&&u.push([s]);for(var s=0;s<i;++s)for(var c=0;c<2;++c){for(var d=[];o[c][s].length>0;){var f=(o[0][s].length,function(e,i){var a=o[i][e][0],s=[e];n(a,i);for(var l=a[1^i];;){for(;l!==e;)s.push(l),l=r(s[s.length-2],l,!1);if(o[0][e].length+o[1][e].length===0)break;var u=s[s.length-1],c=e,d=s[1],f=r(u,c,!0);if(XY(t[u],t[c],t[d],t[f])<0)break;s.push(e),l=r(u,c)}return s}(s,c));!function(e,t){return t[1]===t[t.length-1]}(d,f)?(d.length>0&&u.push(d),d=f):d.push.apply(d,f)}d.length>0&&u.push(d)}return u}function ip(e,t){for(var n=qY(e,t.length),r=new Array(t.length),i=new Array(t.length),a=[],o=0;o<t.length;++o){var s=n[o].length;i[o]=s,r[o]=!0,s<=1&&a.push(o)}for(;a.length>0;){var l=a.pop();r[l]=!1;for(var u=n[l],o=0;o<u.length;++o){var c=u[o];0===--i[c]&&a.push(c)}}for(var d=new Array(t.length),f=[],o=0;o<t.length;++o)if(r[o]){var l=f.length;d[o]=l,f.push(t[o])}else d[o]=-1;for(var h=[],o=0;o<e.length;++o){var p=e[o];r[p[0]]&&r[p[1]]&&h.push([d[p[0]],d[p[1]]])}return[h,f]}function ap(e,t,n,r,i,a){var o=["function ",e,"(a,l,h,",r.join(","),"){",a?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",i?".get(m)":"[m]"];return a?t.indexOf("c")<0?o.push(";if(x===y){return m}else if(x<=y){"):o.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):o.push(";if(",t,"){i=m;"),n?o.push("l=m+1}else{h=m-1}"):o.push("h=m-1}else{l=m+1}"),o.push("}"),a?o.push("return -1};"):o.push("return i};"),o.join("")}function op(e,t,n,r){return new Function([ap("A","x"+e+"y",t,["y"],!1,r),ap("B","x"+e+"y",t,["y"],!0,r),ap("P","c(x,y)"+e+"0",t,["y","c"],!1,r),ap("Q","c(x,y)"+e+"0",t,["y","c"],!0,r),"function dispatchBsearch",n,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",n].join(""))()}function sp(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}function lp(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function up(e,t){var n=vp(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function cp(e,t){var n=e.intervals([]);n.push(t),up(e,n)}function dp(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?QY:(n.splice(r,1),up(e,n),$Y)}function fp(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function hp(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function pp(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function mp(e,t){return e-t}function gp(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function yp(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function vp(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(mp);for(var r=t[t.length>>1],i=[],a=[],o=[],n=0;n<e.length;++n){var s=e[n];s[1]<r?i.push(s):r<s[0]?a.push(s):o.push(s)}var l=o,u=o.slice();return l.sort(gp),u.sort(yp),new sp(r,vp(i),vp(a),l,u)}function _p(e){this.root=e}function bp(e){return new _p(e&&0!==e.length?vp(e):null)}function xp(e,t,n,r,i,a){this._color=e,this.key=t,this.value=n,this.left=r,this.right=i,this._count=a}function wp(e){return new xp(e._color,e.key,e.value,e.left,e.right,e._count)}function kp(e,t){return new xp(e,t.key,t.value,t.left,t.right,t._count)}function Tp(e){e._count=1+(e.left?e.left._count:0)+(e.right?e.right._count:0)}function Mp(e,t){this._compare=e,this.root=t}function Ap(e,t){if(t.left){var n=Ap(e,t.left);if(n)return n}var n=e(t.key,t.value);return n||(t.right?Ap(e,t.right):void 0)}function Cp(e,t,n,r){if(t(e,r.key)<=0){if(r.left){var i=Cp(e,t,n,r.left);if(i)return i}var i=n(r.key,r.value);if(i)return i}if(r.right)return Cp(e,t,n,r.right)}function Sp(e,t,n,r,i){var a,o=n(e,i.key),s=n(t,i.key);if(o<=0){if(i.left&&(a=Sp(e,t,n,r,i.left)))return a;if(s>0&&(a=r(i.key,i.value)))return a}if(s>0&&i.right)return Sp(e,t,n,r,i.right)}function Ep(e,t){this.tree=e,this._stack=t}function Pp(e,t){e.key=t.key,e.value=t.value,e.left=t.left,e.right=t.right,e._color=t._color,e._count=t._count}function Ip(e){for(var t,n,r,i,a=e.length-1;a>=0;--a){if(t=e[a],0===a)return void(t._color=aX);if(n=e[a-1],n.left===t){if(r=n.right,r.right&&r.right._color===iX){if(r=n.right=wp(r),i=r.right=wp(r.right),n.right=r.left,r.left=n,r.right=i,r._color=n._color,t._color=aX,n._color=aX,i._color=aX,Tp(n),Tp(r),a>1){var o=e[a-2];o.left===n?o.left=r:o.right=r}return void(e[a-1]=r)}if(r.left&&r.left._color===iX){if(r=n.right=wp(r),i=r.left=wp(r.left),n.right=i.left,r.left=i.right,i.left=n,i.right=r,i._color=n._color,n._color=aX,r._color=aX,t._color=aX,Tp(n),Tp(r),Tp(i),a>1){var o=e[a-2];o.left===n?o.left=i:o.right=i}return void(e[a-1]=i)}if(r._color===aX){if(n._color===iX)return n._color=aX,void(n.right=kp(iX,r));n.right=kp(iX,r);continue}if(r=wp(r),n.right=r.left,r.left=n,r._color=n._color,n._color=iX,Tp(n),Tp(r),a>1){var o=e[a-2];o.left===n?o.left=r:o.right=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}else{if(r=n.left,r.left&&r.left._color===iX){if(r=n.left=wp(r),i=r.left=wp(r.left),n.left=r.right,r.right=n,r.left=i,r._color=n._color,t._color=aX,n._color=aX,i._color=aX,Tp(n),Tp(r),a>1){var o=e[a-2];o.right===n?o.right=r:o.left=r}return void(e[a-1]=r)}if(r.right&&r.right._color===iX){if(r=n.left=wp(r),i=r.right=wp(r.right),n.left=i.right,r.right=i.left,i.right=n,i.left=r,i._color=n._color,n._color=aX,r._color=aX,t._color=aX,Tp(n),Tp(r),Tp(i),a>1){var o=e[a-2];o.right===n?o.right=i:o.left=i}return void(e[a-1]=i)}if(r._color===aX){if(n._color===iX)return n._color=aX,void(n.left=kp(iX,r));n.left=kp(iX,r);continue}if(r=wp(r),n.left=r.right,r.right=n,r._color=n._color,n._color=iX,Tp(n),Tp(r),a>1){var o=e[a-2];o.right===n?o.right=r:o.left=r}e[a-1]=r,e[a]=n,a+1<e.length?e[a+1]=t:e.push(t),a+=2}}}function Lp(e,t){return e<t?-1:e>t?1:0}function Op(e){return new Mp(e||Lp,null)}function zp(e,t){var n,r;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0])){var i=Math.min(e[0][1],e[1][1]),a=Math.max(e[0][1],e[1][1]),o=Math.min(t[0][1],t[1][1]),s=Math.max(t[0][1],t[1][1]);return a<o?a-o:i>s?i-s:a-s}n=t[1],r=t[0]}var l,u;e[0][1]<e[1][1]?(l=e[0],u=e[1]):(l=e[1],u=e[0]);var c=eG(r,n,l);return c||((c=eG(r,n,u))||u-r)}function Rp(e,t){var n,r;if(t[0][0]<t[1][0])n=t[0],r=t[1];else{if(!(t[0][0]>t[1][0]))return zp(t,e);n=t[1],r=t[0]}var i,a;if(e[0][0]<e[1][0])i=e[0],a=e[1];else{if(!(e[0][0]>e[1][0]))return-zp(e,t);i=e[1],a=e[0]}var o=eG(n,r,a),s=eG(n,r,i);if(o<0){if(s<=0)return o}else if(o>0){if(s>=0)return o}else if(s)return s;if(o=eG(a,i,r),s=eG(a,i,n),o<0){if(s<=0)return o}else if(o>0){if(s>=0)return o}else if(s)return s;return r[0]-a[0]}function Dp(e,t,n){this.slabs=e,this.coordinates=t,this.horizontal=n}function Np(e,t){return e.y-t}function Fp(e,t){for(var n=null;e;){var r,i,a=e.key;a[0][0]<a[1][0]?(r=a[0],i=a[1]):(r=a[1],i=a[0]);var o=eG(r,i,t);if(o<0)e=e.left;else if(o>0)if(t[0]!==a[1][0])n=e,e=e.right;else{var s=Fp(e.right,t);if(s)return s;e=e.left}else{if(t[0]!==a[1][0])return e;var s=Fp(e.right,t);if(s)return s;e=e.left}}return n}function jp(e,t,n,r){this.y=e,this.index=t,this.start=n,this.closed=r}function Bp(e,t,n,r){this.x=e,this.segment=t,this.create=n,this.index=r}function Up(e){for(var t=e.length,n=2*t,r=new Array(n),i=0;i<t;++i){var a=e[i],o=a[0][0]<a[1][0];r[2*i]=new Bp(a[0][0],a,o,i),r[2*i+1]=new Bp(a[1][0],a,!o,i)}r.sort(function(e,t){var n=e.x-t.x;return n||((n=e.create-t.create)||Math.min(e.segment[0][1],e.segment[1][1])-Math.min(t.segment[0][1],t.segment[1][1]))});for(var s=rX(lX),l=[],u=[],c=[],i=0;i<n;){for(var d=r[i].x,f=[];i<n;){var h=r[i];if(h.x!==d)break;i+=1,h.segment[0][0]===h.x&&h.segment[1][0]===h.x?h.create&&(h.segment[0][1]<h.segment[1][1]?(f.push(new jp(h.segment[0][1],h.index,!0,!0)),f.push(new jp(h.segment[1][1],h.index,!1,!1))):(f.push(new jp(h.segment[1][1],h.index,!0,!1)),f.push(new jp(h.segment[0][1],h.index,!1,!0)))):s=h.create?s.insert(h.segment,h.index):s.remove(h.segment)}l.push(s.root),u.push(d),c.push(f)}return new Dp(l,u,c)}function Vp(){return!0}function Hp(e){return function(t,n){var r=e[t];return!!r&&!!r.queryPoint(n,Vp)}}function Wp(e){for(var t={},n=0;n<e.length;++n){var r=e[n],i=r[0][0],a=r[0][1],o=r[1][1],s=[Math.min(a,o),Math.max(a,o)];i in t?t[i].push(s):t[i]=[s]}for(var l={},u=Object.keys(t),n=0;n<u.length;++n){var c=t[u[n]];l[u[n]]=eX(c)}return Hp(l)}function qp(e,t){return function(n){var r=KY.le(t,n[0]);if(r<0)return 1;var i=e[r];if(!i){if(!(r>0&&t[r]===n[0]))return 1;i=e[r-1]}for(var a=1;i;){var o=i.key,s=dX(n,o[0],o[1]);if(o[0][0]<o[1][0])if(s<0)i=i.left;else{if(!(s>0))return 0;a=-1,i=i.right}else if(s>0)i=i.left;else{if(!(s<0))return 0;a=1,i=i.right}}return a}}function Gp(e){return 1}function Yp(e){return function(t){return e(t[0],t[1])?0:1}}function Xp(e,t){return function(n){return e(n[0],n[1])?0:t(n)}}function Zp(e){for(var t=e.length,n=[],r=[],i=0;i<t;++i)for(var a=e[i],o=a.length,s=o-1,l=0;l<o;s=l++){var u=a[s],c=a[l];u[0]===c[0]?r.push([u,c]):n.push([u,c])}if(0===n.length)return 0===r.length?Gp:Yp(Wp(r));var d=uX(n),f=qp(d.slabs,d.coordinates);return 0===r.length?f:Xp(Wp(r),f)}function Jp(e,t){for(var n=new Array(e),r=0;r<e;++r)n[r]=t;return n}function Kp(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=[];return t}function Qp(e,t){function n(e){for(var n=e.length,r=[0],i=0;i<n;++i){var a=t[e[i]],o=t[e[(i+1)%n]],s=Vq(-a[0],a[1]),l=Vq(-a[0],o[1]),u=Vq(o[0],a[1]),c=Vq(o[0],o[1]);r=Yq(r,Yq(Yq(s,l),Yq(u,c)))}return r[r.length-1]>0}function r(e){for(var t=e.length,n=0;n<t;++n)if(!M[e[n]])return!1;return!0}var i=JY(e,t);e=i[0],t=i[1];for(var a=t.length,o=(e.length,qY(e,t.length)),s=0;s<a;++s)if(o[s].length%2===1)throw new Error("planar-graph-to-polyline: graph must be manifold");var l=ZY(e,t);l=l.filter(n);for(var u=l.length,c=new Array(u),d=new Array(u),s=0;s<u;++s){c[s]=s;var f=new Array(u),h=l[s].map(function(e){return t[e]}),p=cX([h]),m=0;e:for(var g=0;g<u;++g)if(f[g]=0,s!==g){for(var y=l[g],v=y.length,_=0;_<v;++_){var b=p(t[y[_]]);if(0!==b){b<0&&(f[g]=1,m+=1);continue e}}f[g]=1,m+=1}d[s]=[m,s,f]}d.sort(function(e,t){return t[0]-e[0]});for(var s=0;s<u;++s)for(var f=d[s],x=f[1],w=f[2],g=0;g<u;++g)w[g]&&(c[g]=x);for(var k=Kp(u),s=0;s<u;++s)k[s].push(c[s]),k[c[s]].push(s);for(var T={},M=Jp(a,!1),s=0;s<u;++s)for(var y=l[s],v=y.length,g=0;g<v;++g){var A=y[g],C=y[(g+1)%v],S=Math.min(A,C)+":"+Math.max(A,C);if(S in T){var E=T[S];k[E].push(s),k[s].push(E),M[A]=M[C]=!0}else T[S]=s}for(var P=[],I=Jp(u,-1),s=0;s<u;++s)c[s]!==s||r(l[s])?I[s]=-1:(P.push(s),I[s]=0);for(var i=[];P.length>0;){var L=P.pop(),O=k[L];KH(O,function(e,t){return e-t});var z,R=O.length,D=I[L];if(0===D){var y=l[L];z=[y]}for(var s=0;s<R;++s){var N=O[s];if(!(I[N]>=0)&&(I[N]=1^D,P.push(N),0===D)){var y=l[N];r(y)||(y.reverse(),z.push(y))}}0===D&&i.push(z)}return i}function $p(e){for(var t=0,n=Math.max,r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1}function em(e){for(var t=-1,n=Math.max,r=0,i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)t=n(t,a[o]);return t+1}function tm(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t}function nm(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:var a=e[0]+e[1]-t[0]-t[1];return a||i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];if(a=o+e[2]-(s+t[2]))return a;var l=i(e[0],e[1]),u=i(t[0],t[1]),a=i(l,e[2])-i(u,t[2]);return a||i(l+e[2],o)-i(u+t[2],s);default:var c=e.slice(0);c.sort();var d=t.slice(0);d.sort();for(var f=0;f<n;++f)if(r=c[f]-d[f])return r;return 0}}function rm(e,t){return nm(e[0],t[0])}function im(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(rm);for(var i=0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(nm),e}function am(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var i=e[r];if(nm(i,e[r-1])){if(r===t){t++;continue}e[t++]=i}}return e.length=t,e}function om(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var a=n+r>>1,o=nm(e[a],t);o<=0?(0===o&&(i=a),n=a+1):o>0&&(r=a-1)}return i}function sm(e,t){for(var n=new Array(e.length),r=0,i=n.length;r<i;++r)n[r]=[];for(var a=[],r=0,o=t.length;r<o;++r)for(var s=t[r],l=s.length,u=1,c=1<<l;u<c;++u){a.length=pW.popCount(u);for(var d=0,f=0;f<l;++f)u&1<<f&&(a[d++]=s[f]);var h=om(e,a);if(!(h<0))for(;;)if(n[h++].push(r),h>=e.length||0!==nm(e[h],a))break}return n}function lm(e,t){if(!t)return sm(am(cm(e,0)),e,0);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];for(var r=0,i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)n[a[o]].push(r);return n}function um(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0|i.length,o=1,s=1<<a;o<s;++o){for(var l=[],u=0;u<a;++u)o>>>u&1&&l.push(i[u]);t.push(l)}return im(t)}function cm(e,t){if(t<0)return[];for(var n=[],r=(1<<t+1)-1,i=0;i<e.length;++i)for(var a=e[i],o=r;o<1<<a.length;o=pW.nextCombination(o)){for(var s=new Array(t+1),l=0,u=0;u<a.length;++u)o&1<<u&&(s[l++]=a[u]);n.push(s)}return im(n)}function dm(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;++a){for(var s=new Array(i.length-1),l=0,u=0;l<o;++l)l!==a&&(s[u++]=i[l]);t.push(s)}return im(t)}function fm(e,t){for(var n=new VY(t),r=0;r<e.length;++r)for(var i=e[r],a=0;a<i.length;++a)for(var o=a+1;o<i.length;++o)n.link(i[a],i[o]);for(var s=[],l=n.ranks,r=0;r<l.length;++r)l[r]=-1;for(var r=0;r<e.length;++r){var u=n.find(e[r][0]);l[u]<0?(l[u]=s.length,s.push([e[r].slice(0)])):s[l[u]].push(e[r].slice(0))}return s}function hm(e){for(var t=am(im(cm(e,0))),n=new VY(t.length),r=0;r<e.length;++r)for(var i=e[r],a=0;a<i.length;++a)for(var o=om(t,[i[a]]),s=a+1;s<i.length;++s)n.link(o,om(t,[i[s]]));for(var l=[],u=n.ranks,r=0;r<u.length;++r)u[r]=-1;for(var r=0;r<e.length;++r){var c=n.find(om(t,[e[r][0]]));u[c]<0?(u[c]=l.length,l.push([e[r].slice(0)])):l[u[c]].push(e[r].slice(0))}return l}function pm(e,t){return t?fm(e,t):hm(e)}function mm(e){var t=32;return e&=-e,e&&t--,65535&e&&(t-=16),16711935&e&&(t-=8),252645135&e&&(t-=4),858993459&e&&(t-=2),1431655765&e&&(t-=1),t}function gm(e){this.roots=new Array(e),this.ranks=new Array(e);for(var t=0;t<e;++t)this.roots[t]=t,this.ranks[t]=0}function ym(e){for(var t=0,n=Math.max,r=0,i=e.length;r<i;++r)t=n(t,e[r].length);return t-1}function vm(e){for(var t=-1,n=Math.max,r=0,i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)t=n(t,a[o]);return t+1}function _m(e){for(var t=new Array(e.length),n=0,r=e.length;n<r;++n)t[n]=e[n].slice(0);return t}function bm(e,t){var n=e.length,r=e.length-t.length,i=Math.min;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:var a=e[0]+e[1]-t[0]-t[1];return a||i(e[0],e[1])-i(t[0],t[1]);case 3:var o=e[0]+e[1],s=t[0]+t[1];if(a=o+e[2]-(s+t[2]))return a;var l=i(e[0],e[1]),u=i(t[0],t[1]),a=i(l,e[2])-i(u,t[2]);return a||i(l+e[2],o)-i(u+t[2],s);default:var c=e.slice(0);c.sort();var d=t.slice(0);d.sort();for(var f=0;f<n;++f)if(r=c[f]-d[f])return r;return 0}}function xm(e,t){return bm(e[0],t[0])}function wm(e,t){if(t){for(var n=e.length,r=new Array(n),i=0;i<n;++i)r[i]=[e[i],t[i]];r.sort(xm);for(var i=0;i<n;++i)e[i]=r[i][0],t[i]=r[i][1];return e}return e.sort(bm),e}function km(e){if(0===e.length)return[];for(var t=1,n=e.length,r=1;r<n;++r){var i=e[r];if(bm(i,e[r-1])){if(r===t){t++;continue}e[t++]=i}}return e.length=t,e}function Tm(e,t){for(var n=0,r=e.length-1,i=-1;n<=r;){var a=n+r>>1,o=bm(e[a],t);o<=0?(0===o&&(i=a),n=a+1):o>0&&(r=a-1)}return i}function Mm(e,t){for(var n=new Array(e.length),r=0,i=n.length;r<i;++r)n[r]=[];for(var a=[],r=0,o=t.length;r<o;++r)for(var s=t[r],l=s.length,u=1,c=1<<l;u<c;++u){a.length=pX.popCount(u);for(var d=0,f=0;f<l;++f)u&1<<f&&(a[d++]=s[f]);var h=Tm(e,a);if(!(h<0))for(;;)if(n[h++].push(r),h>=e.length||0!==bm(e[h],a))break}return n}function Am(e,t){if(!t)return Mm(km(Sm(e,0)),e,0);for(var n=new Array(t),r=0;r<t;++r)n[r]=[];for(var r=0,i=e.length;r<i;++r)for(var a=e[r],o=0,s=a.length;o<s;++o)n[a[o]].push(r);return n}function Cm(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0|i.length,o=1,s=1<<a;o<s;++o){for(var l=[],u=0;u<a;++u)o>>>u&1&&l.push(i[u]);t.push(l)}return wm(t)}function Sm(e,t){if(t<0)return[];for(var n=[],r=(1<<t+1)-1,i=0;i<e.length;++i)for(var a=e[i],o=r;o<1<<a.length;o=pX.nextCombination(o)){for(var s=new Array(t+1),l=0,u=0;u<a.length;++u)o&1<<u&&(s[l++]=a[u]);n.push(s)}return wm(n)}function Em(e){for(var t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;++a){for(var s=new Array(i.length-1),l=0,u=0;l<o;++l)l!==a&&(s[u++]=i[l]);t.push(s)}return wm(t)}function Pm(e,t){for(var n=new gX(t),r=0;r<e.length;++r)for(var i=e[r],a=0;a<i.length;++a)for(var o=a+1;o<i.length;++o)n.link(i[a],i[o]);for(var s=[],l=n.ranks,r=0;r<l.length;++r)l[r]=-1;for(var r=0;r<e.length;++r){var u=n.find(e[r][0]);l[u]<0?(l[u]=s.length,s.push([e[r].slice(0)])):s[l[u]].push(e[r].slice(0))}return s}function Im(e){for(var t=km(wm(Sm(e,0))),n=new gX(t.length),r=0;r<e.length;++r)for(var i=e[r],a=0;a<i.length;++a)for(var o=Tm(t,[i[a]]),s=a+1;s<i.length;++s)n.link(o,Tm(t,[i[s]]));for(var l=[],u=n.ranks,r=0;r<u.length;++r)u[r]=-1;for(var r=0;r<e.length;++r){var c=n.find(Tm(t,[e[r][0]]));u[c]<0?(u[c]=l.length,l.push([e[r].slice(0)])):l[u[c]].push(e[r].slice(0))}return l}function Lm(e,t){return t?Pm(e,t):Im(e)}function Om(e,t,n){return Math.abs(eG(e,t,n))/Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}function zm(e,t,n){function r(e){if(y[e])return 1/0;var n=p[e],r=m[e];return n<0||r<0?1/0:Om(t[e],t[n],t[r])}function i(e,t){var n=w[e],r=w[t];w[e]=r,w[t]=n,k[n]=t,k[r]=e}function a(e){return g[w[e]]}function o(e){return 1&e?e-1>>1:(e>>1)-1}function s(e){for(var t=a(e);;){var n=t,r=2*e+1,o=2*(e+1),s=e;if(r<T){var l=a(r);l<n&&(s=r,n=l)}if(o<T){a(o)<n&&(s=o)}if(s===e)return e;i(e,s),e=s}}function l(e){for(var t=a(e);e>0;){var n=o(e);if(n>=0){if(t<a(n)){i(e,n),e=n;continue}}return e}}function u(){if(T>0){var e=w[0];return i(0,T-1),T-=1,s(0),e}return-1}function c(e,t){var n=w[e];return g[n]===t?e:(g[n]=-1/0,l(e),u(),g[n]=t,T+=1,l(T-1))}function d(e,t){if(e[t]<0)return t;var n=t,r=t;do{var i=e[r];if(!y[r]||i<0||i===r)break;if(r=i,i=e[r],!y[r]||i<0||i===r)break;r=i,n=e[n]}while(n!==r);for(var a=t;a!==r;a=e[a])e[a]=r;return r}for(var f=t.length,h=e.length,p=new Array(f),m=new Array(f),g=new Array(f),y=new Array(f),v=0;v<f;++v)p[v]=m[v]=-1,g[v]=1/0,y[v]=!1;for(var v=0;v<h;++v){var _=e[v];if(2!==_.length)throw new Error("Input must be a graph");var b=_[1],x=_[0];-1!==m[x]?m[x]=-2:m[x]=b,-1!==p[b]?p[b]=-2:p[b]=x}for(var w=[],k=new Array(f),v=0;v<f;++v){(g[v]=r(v))<1/0?(k[v]=w.length,w.push(v)):k[v]=-1}for(var T=w.length,v=T>>1;v>=0;--v)s(v);for(;;){var M=u();if(M<0||g[M]>n)break;!function(e){if(!y[e]){y[e]=!0;var t=p[e],n=m[e];p[n]>=0&&(p[n]=t),m[t]>=0&&(m[t]=n),k[t]>=0&&c(k[t],r(t)),k[n]>=0&&c(k[n],r(n))}}(M)}for(var A=[],v=0;v<f;++v)y[v]||(k[v]=A.length,A.push(t[v].slice()));var C=(A.length,[]);return e.forEach(function(e){var t=d(p,e[0]),n=d(m,e[1]);if(t>=0&&n>=0&&t!==n){var r=k[t],i=k[n];r!==i&&C.push([r,i])}}),yX.unique(yX.normalize(C)),{positions:A,edges:C}}function Rm(e){return"a"+e}function Dm(e){return"d"+e}function Nm(e,t){return"c"+e+"_"+t}function Fm(e){return"s"+e}function jm(e,t){return"t"+e+"_"+t}function Bm(e){return"o"+e}function Um(e){return"x"+e}function Vm(e){return"p"+e}function Hm(e,t){return"d"+e+"_"+t}function Wm(e){return"i"+e}function qm(e,t){return"u"+e+"_"+t}function Gm(e){return"b"+e}function Ym(e){return"y"+e}function Xm(e){return"e"+e}function Zm(e){return"v"+e}function Jm(e,t,n){for(var r=0,i=0;i<e;++i)t&1<<i&&(r|=1<<n[i]);return r}function Km(e,t,n,r,i,a){function o(e,t){m.push("for(",Wm(i[e]),"=",t,";",Wm(i[e]),"<",Fm(i[e]),";","++",Wm(i[e]),"){")}function s(e){for(var t=0;t<f;++t)m.push(Vm(t),"+=",qm(t,i[e]),";");m.push("}")}function l(e){for(var t=e-1;t>=0;--t)o(t,0);for(var n=[],t=0;t<f;++t)a[t]?n.push(Dm(t)+".get("+Vm(t)+")"):n.push(Dm(t)+"["+Vm(t)+"]");for(var t=0;t<r;++t)n.push(Um(t));m.push(xX,"[",TX,"++]=phase(",n.join(),");");for(var t=0;t<e;++t)s(t);for(var l=0;l<f;++l)m.push(Vm(l),"+=",qm(l,i[e]),";")}function u(e){for(var t=0;t<f;++t)a[t]?m.push(Nm(t,0),"=",Dm(t),".get(",Vm(t),");"):m.push(Nm(t,0),"=",Dm(t),"[",Vm(t),"];");for(var n=[],t=0;t<f;++t)n.push(Nm(t,0));for(var t=0;t<r;++t)n.push(Um(t));m.push(Gm(0),"=",xX,"[",TX,"]=phase(",n.join(),");");for(var i=1;i<1<<h;++i)m.push(Gm(i),"=",xX,"[",TX,"+",Xm(i),"];");for(var o=[],i=1;i<1<<h;++i)o.push("("+Gm(0)+"!=="+Gm(i)+")");m.push("if(",o.join("||"),"){");for(var s=[],t=0;t<h;++t)s.push(Wm(t));for(var t=0;t<f;++t){s.push(Nm(t,0));for(var i=1;i<1<<h;++i)a[t]?m.push(Nm(t,i),"=",Dm(t),".get(",Vm(t),"+",Hm(t,i),");"):m.push(Nm(t,i),"=",Dm(t),"[",Vm(t),"+",Hm(t,i),"];"),s.push(Nm(t,i))}for(var t=0;t<1<<h;++t)s.push(Gm(t));for(var t=0;t<r;++t)s.push(Um(t));m.push("vertex(",s.join(),");",Zm(0),"=",bX,"[",TX,"]=",wX,"++;");for(var l=(1<<h)-1,u=Gm(l),i=0;i<h;++i)if(0===(e&~(1<<i))){for(var c=l^1<<i,d=Gm(c),p=[],g=c;g>0;g=g-1&c)p.push(bX+"["+TX+"+"+Xm(g)+"]");p.push(Zm(0));for(var g=0;g<f;++g)1&i?p.push(Nm(g,l),Nm(g,c)):p.push(Nm(g,c),Nm(g,l));1&i?p.push(u,d):p.push(d,u);for(var g=0;g<r;++g)p.push(Um(g));m.push("if(",u,"!==",d,"){","face(",p.join(),")}")}m.push("}",TX,"+=1;")}function c(){for(var e=1;e<1<<h;++e)m.push(MX,"=",Xm(e),";",Xm(e),"=",Ym(e),";",Ym(e),"=",MX,";")}function d(e,t){if(e<0)return void u(t);l(e),m.push("if(",Fm(i[e]),">0){",Wm(i[e]),"=1;"),d(e-1,t|1<<i[e]);for(var n=0;n<f;++n)m.push(Vm(n),"+=",qm(n,i[e]),";");e===h-1&&(m.push(TX,"=0;"),c()),o(e,2),d(e-1,t),e===h-1&&(m.push("if(",Wm(i[h-1]),"&1){",TX,"=0;}"),c()),s(e),m.push("}")}var f=a.length,h=i.length;if(h<2)throw new Error("ndarray-extract-contour: Dimension must be at least 2");for(var p="extractContour"+i.join("_"),m=[],g=[],y=[],v=0;v<f;++v)y.push(Rm(v));for(var v=0;v<r;++v)y.push(Um(v));for(var v=0;v<h;++v)g.push(Fm(v)+"="+Rm(0)+".shape["+v+"]|0");for(var v=0;v<f;++v){g.push(Dm(v)+"="+Rm(v)+".data",Bm(v)+"="+Rm(v)+".offset|0");for(var _=0;_<h;++_)g.push(jm(v,_)+"="+Rm(v)+".stride["+_+"]|0")}for(var v=0;v<f;++v){g.push(Vm(v)+"="+Bm(v)),g.push(Nm(v,0));for(var _=1;_<1<<h;++_){for(var b=[],x=0;x<h;++x)_&1<<x&&b.push("-"+jm(v,x));g.push(Hm(v,_)+"=("+b.join("")+")|0"),g.push(Nm(v,_)+"=0")}}for(var v=0;v<f;++v)for(var _=0;_<h;++_){var w=[jm(v,i[_])];_>0&&w.push(jm(v,i[_-1])+"*"+Fm(i[_-1])),g.push(qm(v,i[_])+"=("+w.join("-")+")|0")}for(var v=0;v<h;++v)g.push(Wm(v)+"=0");g.push(wX+"=0");for(var k=["2"],v=h-2;v>=0;--v)k.push(Fm(i[v]));g.push(kX+"=("+k.join("*")+")|0",xX+"=mallocUint32("+kX+")",bX+"=mallocUint32("+kX+")",TX+"=0"),g.push(Gm(0)+"=0");for(var _=1;_<1<<h;++_){for(var T=[],M=[],x=0;x<h;++x)_&1<<x&&(0===M.length?T.push("1"):T.unshift(M.join("*"))),M.push(Fm(i[x]));var A="";T[0].indexOf(Fm(i[h-2]))<0&&(A="-");var C=Jm(h,_,i);g.push(Xm(C)+"=(-"+T.join("-")+")|0",Ym(C)+"=("+A+T.join("-")+")|0",Gm(C)+"=0")}g.push(Zm(0)+"=0",MX+"=0"),d(h-1,0),m.push("freeUint32(",bX,");freeUint32(",xX,");");var S=["'use strict';","function ",p,"(",y.join(),"){","var ",g.join(),";",m.join(""),"}","return ",p].join("");return new Function("vertex","face","phase","mallocUint32","freeUint32",S)(e,t,n,EW.mallocUint32,EW.freeUint32)}function Qm(e){function t(e){throw new Error("ndarray-extract-contour: "+e)}"object"!==typeof e&&t("Must specify arguments");var n=e.order;Array.isArray(n)||t("Must specify order");var r=e.arrayArguments||1;r<1&&t("Must have at least one array argument");var i=e.scalarArguments||0;i<0&&t("Scalar arg count must be > 0"),"function"!==typeof e.vertex&&t("Must specify vertex creation function"),"function"!==typeof e.cell&&t("Must specify cell creation function"),"function"!==typeof e.phase&&t("Must specify phase function");for(var a=e.getters||[],o=new Array(r),s=0;s<r;++s)a.indexOf(s)>=0?o[s]=!0:o[s]=!1;return Km(e.vertex,e.cell,e.phase,i,n,o)}function $m(e){if(e<0)return Number("0/0");for(var t=EX[0],n=EX.length-1;n>0;--n)t+=EX[n]/(e+n);var r=e+SX+.5;return.5*Math.log(2*Math.PI)+(e+.5)*Math.log(r)-r+Math.log(t)-Math.log(e)}function eg(e){var t=e.length;if(t<IX){for(var n=1,r=0;r<t;++r)for(var i=0;i<r;++i)if(e[r]<e[i])n=-n;else if(e[r]===e[i])return 0;return n}for(var a=EW.mallocUint8(t),r=0;r<t;++r)a[r]=0;for(var n=1,r=0;r<t;++r)if(!a[r]){var o=1;a[r]=1;for(var i=e[r];i!==r;i=e[i]){if(a[i])return EW.freeUint8(a),0;o+=1,a[i]=1}1&o||(n=-n)}return EW.freeUint8(a),n}function tg(e,t){t=t||new Array(e.length);for(var n=0;n<e.length;++n)t[e[n]]=n;return t}function ng(e){var t=e.length;switch(t){case 0:case 1:return 0;case 2:return e[1]}var n,r,i,a=EW.mallocUint32(t),o=EW.mallocUint32(t),s=0;for(LX(e,o),i=0;i<t;++i)a[i]=e[i];for(i=t-1;i>0;--i)r=o[i],n=a[i],a[i]=a[r],a[r]=n,o[i]=o[n],o[n]=r,s=(s+n)*i;return EW.freeUint32(o),EW.freeUint32(a),s}function rg(e,t,n){switch(e){case 0:return n||[];case 1:return n?(n[0]=0,n):[0];case 2:return n?(t?(n[0]=0,n[1]=1):(n[0]=1,n[1]=0),n):t?[0,1]:[1,0]}n=n||new Array(e);var r,i,a,o=1;for(n[0]=0,a=1;a<e;++a)n[a]=a,o=o*a|0;for(a=e-1;a>0;--a)r=t/o|0,t=t-r*o|0,o=o/a|0,i=0|n[a],n[a]=0|n[r],n[r]=0|i;return n}function ig(e){if(e<0)return[];if(0===e)return[[0]];for(var t=0|Math.round(AX(e+1)),n=[],r=0;r<t;++r){for(var i=OX.unrank(e,r),a=[0],o=0,s=0;s<i.length;++s)o+=1<<i[s],a.push(o);PX(i)<1&&(a[0]=o,a[e]=0),n.push(a)}return n}function ag(e,t){var n=[];return t=+t||0,RX(e.hi(e.shape[0]-1),n,t),n}function og(e,t){var n=e.length,r=["'use strict';"],i="surfaceNets"+e.join("_")+"d"+t;r.push("var contour=genContour({","order:[",e.join(),"],","scalarArguments: 3,","phase:function phaseFunc(p,a,b,c) { return (p > c)|0 },"),"generic"===t&&r.push("getters:[0],");for(var a=[],o=[],s=0;s<n;++s)a.push("d"+s),o.push("d"+s);for(var s=0;s<1<<n;++s)a.push("v"+s),o.push("v"+s);for(var s=0;s<1<<n;++s)a.push("p"+s),o.push("p"+s);a.push("a","b","c"),o.push("a","c"),r.push("vertex:function vertexFunc(",a.join(),"){");for(var l=[],s=0;s<1<<n;++s)l.push("(p"+s+"<<"+s+")");r.push("var m=(",l.join("+"),")|0;if(m===0||m===",(1<<(1<<n))-1,"){return}");var u=[],c=[];1<<(1<<n)<=128?(r.push("switch(m){"),c=r):r.push("switch(m>>>7){");for(var s=0;s<1<<(1<<n);++s){if(1<<(1<<n)>128&&s%128===0){u.length>0&&c.push("}}");var d="vExtra"+u.length;r.push("case ",s>>>7,":",d,"(m&0x7f,",o.join(),");break;"),c=["function ",d,"(m,",o.join(),"){switch(m){"],u.push(c)}c.push("case ",127&s,":");for(var f=new Array(n),h=new Array(n),p=new Array(n),m=new Array(n),g=0,y=0;y<n;++y)f[y]=[],h[y]=[],p[y]=0,m[y]=0;for(var y=0;y<1<<n;++y)for(var v=0;v<n;++v){var _=y^1<<v;if(!(_>y)&&!(s&1<<_)!==!(s&1<<y)){var b=1;s&1<<_?h[v].push("v"+_+"-v"+y):(h[v].push("v"+y+"-v"+_),b=-b),b<0?(f[v].push("-v"+y+"-v"+_),p[v]+=2):(f[v].push("v"+y+"+v"+_),p[v]-=2),g+=1;for(var x=0;x<n;++x)x!==v&&(_&1<<x?m[x]+=1:m[x]-=1)}}for(var w=[],v=0;v<n;++v)if(0===f[v].length)w.push("d"+v+"-0.5");else{var k="";p[v]<0?k=p[v]+"*c":p[v]>0&&(k="+"+p[v]+"*c");var T=f[v].length/g*.5,M=.5+m[v]/g*.5;w.push("d"+v+"-"+M+"-"+T+"*("+f[v].join("+")+k+")/("+h[v].join("+")+")")}c.push("a.push([",w.join(),"]);","break;")}r.push("}},"),u.length>0&&c.push("}}");for(var A=[],s=0;s<1<<n-1;++s)A.push("v"+s);A.push("c0","c1","p0","p1","a","b","c"),r.push("cell:function cellFunc(",A.join(),"){");var C=zX(n-1);r.push("if(p0){b.push(",C.map(function(e){return"["+e.map(function(e){return"v"+e})+"]"}).join(),")}else{b.push(",C.map(function(e){var t=e.slice();return t.reverse(),"["+t.map(function(e){return"v"+e})+"]"}).join(),")}}});function ",i,"(array,level){var verts=[],cells=[];contour(array,verts,cells,level);return {positions:verts,cells:cells};} return ",i,";");for(var s=0;s<u.length;++s)r.push(u[s].join(""));return new Function("genContour",r.join(""))(_X)}function sg(e,t){for(var n=DX(e,t),r=n.length,i=new Array(r),a=new Array(r),o=0;o<r;++o)i[o]=[n[o]],a[o]=[o];return{positions:i,cells:a}}function lg(e,t){if(e.dimension<=0)return{positions:[],cells:[]};if(1===e.dimension)return sg(e,t);var n=e.order.join()+"-"+e.dtype,r=FX[n],t=+t||0;return r||(r=FX[n]=og(e.order,e.dtype)),r(e,t)}function ug(e,t,n){for(var r=t.textAlign||"start",i=t.textBaseline||"alphabetic",a=[1<<30,1<<30],o=[0,0],s=e.length,l=0;l<s;++l)for(var u=e[l],c=0;c<2;++c)a[c]=0|Math.min(a[c],u[c]),o[c]=0|Math.max(o[c],u[c]);var d=0;switch(r){case"center":d=-.5*(a[0]+o[0]);break;case"right":case"end":d=-o[0];break;case"left":case"start":d=-a[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+r+"'")}var f=0;switch(i){case"hanging":case"top":f=-a[1];break;case"middle":f=-.5*(a[1]+o[1]);break;case"alphabetic":case"ideographic":f=-3*n;break;case"bottom":f=-o[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+i+"'")}var h=1/n;return"lineHeight"in t?h*=+t.lineHeight:"width"in t?h=t.width/(o[0]-a[0]):"height"in t&&(h=t.height/(o[1]-a[1])),e.map(function(e){return[h*(e[0]+d),h*(e[1]+f)]})}function cg(e,t,n,r){var i=0|Math.ceil(t.measureText(n).width+2*r);if(i>8192)throw new Error("vectorize-text: String too long (sorry, this will get fixed later)");var a=3*r;e.height<a&&(e.height=a),t.fillStyle="#000",t.fillRect(0,0,e.width,e.height),t.fillStyle="#fff",t.fillText(n,r,2*r);var o=t.getImageData(0,0,i,a);return hW(o.data,[a,i,4]).pick(-1,-1,0).transpose(1,0)}function dg(e,t){var n=NX(e,128);return t?vX(n.cells,n.positions,.25):{edges:n.cells,positions:n.positions}}function fg(e,t,n,r){var i=dg(e,r),a=ug(i.positions,t,n),o=i.edges,s="ccw"===t.orientation;if(WY(a,o),t.polygons||t.polygon||t.polyline){for(var l=fX(o,a),u=new Array(l.length),c=0;c<l.length;++c){for(var d=l[c],f=new Array(d.length),h=0;h<d.length;++h){for(var p=d[h],m=new Array(p.length),g=0;g<p.length;++g)m[g]=a[p[g]].slice();s&&m.reverse(),f[h]=m}u[c]=f}return u}return t.triangles||t.triangulate||t.triangle?{cells:fG(a,o,{delaunay:!1,exterior:!1,interior:!0}),positions:a}:{edges:o,positions:a}}function hg(e,t,n){try{return fg(e,t,n,!0)}catch(e){}try{return fg(e,t,n,!1)}catch(e){}return t.polygons||t.polyline||t.polygon?[]:t.triangles||t.triangulate||t.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function pg(e,t,n,r){var i=r.size||64,a=r.font||"normal";return n.font=i+"px "+a,n.textAlign="start",n.textBaseline="alphabetic",n.direction="ltr",hg(cg(t,n,e,i),r,i)}function mg(e,t){return"object"===typeof t&&null!==t||(t={}),jX(e,t.canvas||UX,t.context||VX,t)}function gg(e,t,n){this.plot=e,this.vbo=t,this.shader=n,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}function yg(e){var t=e.gl;return new gg(e,LW(t),Oq(t,RW.textVert,RW.textFrag))}function vg(e){XX=[e.LINEAR,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_NEAREST],ZX=[e.NEAREST,e.LINEAR,e.NEAREST_MIPMAP_NEAREST,e.NEAREST_MIPMAP_LINEAR,e.LINEAR_MIPMAP_NEAREST,e.LINEAR_MIPMAP_LINEAR],JX=[e.REPEAT,e.CLAMP_TO_EDGE,e.MIRRORED_REPEAT]}function _g(e){return"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&e instanceof ImageData}function bg(e,t,n){var r=e.gl,i=r.getParameter(r.MAX_TEXTURE_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-texture2d: Invalid texture size");return e._shape=[t,n],e.bind(),r.texImage2D(r.TEXTURE_2D,0,e.format,t,n,0,e.format,e.type,null),e._mipLevels=[0],e}function xg(e,t,n,r,i,a){this.gl=e,this.handle=t,this.format=i,this.type=a,this._shape=[n,r],this._mipLevels=[0],this._magFilter=e.NEAREST,this._minFilter=e.NEAREST,this._wrapS=e.CLAMP_TO_EDGE,this._wrapT=e.CLAMP_TO_EDGE,this._anisoSamples=1;var o=this,s=[this._wrapS,this._wrapT];Object.defineProperties(s,[{get:function(){return o._wrapS},set:function(e){return o.wrapS=e}},{get:function(){return o._wrapT},set:function(e){return o.wrapT=e}}]),this._wrapVector=s;var l=[this._shape[0],this._shape[1]];Object.defineProperties(l,[{get:function(){return o._shape[0]},set:function(e){return o.width=e}},{get:function(){return o._shape[1]},set:function(e){return o.height=e}}]),this._shapeVector=l}function wg(e,t){return 3===e.length?1===t[2]&&t[1]===e[0]*e[2]&&t[0]===e[2]:1===t[0]&&t[1]===e[0]}function kg(e,t,n,r,i,a,o,s){var l=s.dtype,u=s.shape.slice();if(u.length<2||u.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var c=0,d=0,f=wg(u,s.stride.slice());"float32"===l?c=e.FLOAT:"float64"===l?(c=e.FLOAT,f=!1,l="float32"):"uint8"===l?c=e.UNSIGNED_BYTE:(c=e.UNSIGNED_BYTE,f=!1,l="uint8");if(2===u.length)d=e.LUMINANCE,u=[u[0],u[1],1],s=hW(s.data,u,[s.stride[0],s.stride[1],1],s.offset);else{if(3!==u.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===u[2])d=e.ALPHA;else if(2===u[2])d=e.LUMINANCE_ALPHA;else if(3===u[2])d=e.RGB;else{if(4!==u[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");d=e.RGBA}u[2]}if(d!==e.LUMINANCE&&d!==e.ALPHA||i!==e.LUMINANCE&&i!==e.ALPHA||(d=i),d!==i)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var h=s.size,p=o.indexOf(r)<0;if(p&&o.push(r),c===a&&f)0===s.offset&&s.data.length===h?p?e.texImage2D(e.TEXTURE_2D,r,i,u[0],u[1],0,i,a,s.data):e.texSubImage2D(e.TEXTURE_2D,r,t,n,u[0],u[1],i,a,s.data):p?e.texImage2D(e.TEXTURE_2D,r,i,u[0],u[1],0,i,a,s.data.subarray(s.offset,s.offset+h)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,u[0],u[1],i,a,s.data.subarray(s.offset,s.offset+h));else{var m;m=a===e.FLOAT?EW.mallocFloat32(h):EW.mallocUint8(h);var g=hW(m,u,[u[2],u[2]*u[0],1]);c===e.FLOAT&&a===e.UNSIGNED_BYTE?KX(g,s):tW.assign(g,s),p?e.texImage2D(e.TEXTURE_2D,r,i,u[0],u[1],0,i,a,m.subarray(0,h)):e.texSubImage2D(e.TEXTURE_2D,r,t,n,u[0],u[1],i,a,m.subarray(0,h)),a===e.FLOAT?EW.freeFloat32(m):EW.freeUint8(m)}}function Tg(e){var t=e.createTexture();return e.bindTexture(e.TEXTURE_2D,t),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),t}function Mg(e,t,n,r,i){var a=e.getParameter(e.MAX_TEXTURE_SIZE);if(t<0||t>a||n<0||n>a)throw new Error("gl-texture2d: Invalid texture shape");if(i===e.FLOAT&&!e.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var o=Tg(e);return e.texImage2D(e.TEXTURE_2D,0,r,t,n,0,r,i,null),new xg(e,o,t,n,r,i)}function Ag(e,t,n,r,i,a){var o=Tg(e);return e.texImage2D(e.TEXTURE_2D,0,i,i,a,t),new xg(e,o,n,r,i,a)}function Cg(e,t){var n=t.dtype,r=t.shape.slice(),i=e.getParameter(e.MAX_TEXTURE_SIZE);if(r[0]<0||r[0]>i||r[1]<0||r[1]>i)throw new Error("gl-texture2d: Invalid texture size");var a=wg(r,t.stride.slice()),o=0;"float32"===n?o=e.FLOAT:"float64"===n?(o=e.FLOAT,a=!1,n="float32"):"uint8"===n?o=e.UNSIGNED_BYTE:(o=e.UNSIGNED_BYTE,a=!1,n="uint8");var s=0;if(2===r.length)s=e.LUMINANCE,r=[r[0],r[1],1],t=hW(t.data,r,[t.stride[0],t.stride[1],1],t.offset);else{if(3!==r.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===r[2])s=e.ALPHA;else if(2===r[2])s=e.LUMINANCE_ALPHA;else if(3===r[2])s=e.RGB;else{if(4!==r[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");s=e.RGBA}}o!==e.FLOAT||e.getExtension("OES_texture_float")||(o=e.UNSIGNED_BYTE,a=!1);var l,u,c=t.size;if(a)l=0===t.offset&&t.data.length===c?t.data:t.data.subarray(t.offset,t.offset+c);else{var d=[r[2],r[2]*r[0],1];u=EW.malloc(c,n);var f=hW(u,r,d,0);"float32"!==n&&"float64"!==n||o!==e.UNSIGNED_BYTE?tW.assign(f,t):KX(f,t),l=u.subarray(0,c)}var h=Tg(e);return e.texImage2D(e.TEXTURE_2D,0,s,r[0],r[1],0,s,o,l),a||EW.free(u),new xg(e,h,r[0],r[1],s,o)}function Sg(e){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(XX||vg(e),"number"===typeof arguments[1])return Mg(e,arguments[1],arguments[2],arguments[3]||e.RGBA,arguments[4]||e.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return Mg(e,0|arguments[1][0],0|arguments[1][1],arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if("object"===typeof arguments[1]){var t=arguments[1],n=_g(t)?t:t.raw;if(n)return Ag(e,n,0|t.width,0|t.height,arguments[2]||e.RGBA,arguments[3]||e.UNSIGNED_BYTE);if(t.shape&&t.data&&t.stride)return Cg(e,t)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}function Eg(e){return[e.getParameter(e.FRAMEBUFFER_BINDING),e.getParameter(e.RENDERBUFFER_BINDING),e.getParameter(e.TEXTURE_BINDING_2D)]}function Pg(e,t){e.bindFramebuffer(e.FRAMEBUFFER,t[0]),e.bindRenderbuffer(e.RENDERBUFFER,t[1]),e.bindTexture(e.TEXTURE_2D,t[2])}function Ig(e,t){var n=e.getParameter(t.MAX_COLOR_ATTACHMENTS_WEBGL);iZ=new Array(n+1);for(var r=0;r<=n;++r){for(var i=new Array(n),a=0;a<r;++a)i[a]=e.COLOR_ATTACHMENT0+a;for(var a=r;a<n;++a)i[a]=e.NONE;iZ[r]=i}}function Lg(e){switch(e){case $X:throw new Error("gl-fbo: Framebuffer unsupported");case eZ:throw new Error("gl-fbo: Framebuffer incomplete attachment");case tZ:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case nZ:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function Og(e,t,n,r,i,a){if(!r)return null;var o=YX(e,t,n,i,r);return o.magFilter=e.NEAREST,o.minFilter=e.NEAREST,o.mipSamples=1,o.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,a,e.TEXTURE_2D,o.handle,0),o}function zg(e,t,n,r,i){var a=e.createRenderbuffer();return e.bindRenderbuffer(e.RENDERBUFFER,a),e.renderbufferStorage(e.RENDERBUFFER,r,t,n),e.framebufferRenderbuffer(e.FRAMEBUFFER,i,e.RENDERBUFFER,a),a}function Rg(e){var t=Eg(e.gl),n=e.gl,r=e.handle=n.createFramebuffer(),i=e._shape[0],a=e._shape[1],o=e.color.length,s=e._ext,l=e._useStencil,u=e._useDepth,c=e._colorType;n.bindFramebuffer(n.FRAMEBUFFER,r);for(var d=0;d<o;++d)e.color[d]=Og(n,i,a,c,n.RGBA,n.COLOR_ATTACHMENT0+d);0===o?(e._color_rb=zg(n,i,a,n.RGBA4,n.COLOR_ATTACHMENT0),s&&s.drawBuffersWEBGL(iZ[0])):o>1&&s.drawBuffersWEBGL(iZ[o]);var f=n.getExtension("WEBGL_depth_texture");f?l?e.depth=Og(n,i,a,f.UNSIGNED_INT_24_8_WEBGL,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):u&&(e.depth=Og(n,i,a,n.UNSIGNED_SHORT,n.DEPTH_COMPONENT,n.DEPTH_ATTACHMENT)):u&&l?e._depth_rb=zg(n,i,a,n.DEPTH_STENCIL,n.DEPTH_STENCIL_ATTACHMENT):u?e._depth_rb=zg(n,i,a,n.DEPTH_COMPONENT16,n.DEPTH_ATTACHMENT):l&&(e._depth_rb=zg(n,i,a,n.STENCIL_INDEX,n.STENCIL_ATTACHMENT));var h=n.checkFramebufferStatus(n.FRAMEBUFFER);if(h!==n.FRAMEBUFFER_COMPLETE){e._destroyed=!0,n.bindFramebuffer(n.FRAMEBUFFER,null),n.deleteFramebuffer(e.handle),e.handle=null,e.depth&&(e.depth.dispose(),e.depth=null),e._depth_rb&&(n.deleteRenderbuffer(e._depth_rb),e._depth_rb=null);for(var d=0;d<e.color.length;++d)e.color[d].dispose(),e.color[d]=null;e._color_rb&&(n.deleteRenderbuffer(e._color_rb),e._color_rb=null),Pg(n,t),Lg(h)}Pg(n,t)}function Dg(e,t,n,r,i,a,o,s){this.gl=e,this._shape=[0|t,0|n],this._destroyed=!1,this._ext=s,this.color=new Array(i);for(var l=0;l<i;++l)this.color[l]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=r,this._useDepth=a,this._useStencil=o;var u=this,c=[0|t,0|n];Object.defineProperties(c,{0:{get:function(){return u._shape[0]},set:function(e){return u.width=e}},1:{get:function(){return u._shape[1]},set:function(e){return u.height=e}}}),this._shapeVector=c,Rg(this)}function Ng(e,t,n){if(e._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(e._shape[0]!==t||e._shape[1]!==n){var r=e.gl,i=r.getParameter(r.MAX_RENDERBUFFER_SIZE);if(t<0||t>i||n<0||n>i)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");e._shape[0]=t,e._shape[1]=n;for(var a=Eg(r),o=0;o<e.color.length;++o)e.color[o].shape=e._shape;e._color_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._color_rb),r.renderbufferStorage(r.RENDERBUFFER,r.RGBA4,e._shape[0],e._shape[1])),e.depth&&(e.depth.shape=e._shape),e._depth_rb&&(r.bindRenderbuffer(r.RENDERBUFFER,e._depth_rb),e._useDepth&&e._useStencil?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e._shape[0],e._shape[1]):e._useDepth?r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,e._shape[0],e._shape[1]):e._useStencil&&r.renderbufferStorage(r.RENDERBUFFER,r.STENCIL_INDEX,e._shape[0],e._shape[1])),r.bindFramebuffer(r.FRAMEBUFFER,e.handle);var s=r.checkFramebufferStatus(r.FRAMEBUFFER);s!==r.FRAMEBUFFER_COMPLETE&&(e.dispose(),Pg(r,a),Lg(s)),Pg(r,a)}}function Fg(e,t,n,r){$X||($X=e.FRAMEBUFFER_UNSUPPORTED,eZ=e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,tZ=e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,nZ=e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var i=e.getExtension("WEBGL_draw_buffers");if(!iZ&&i&&Ig(e,i),Array.isArray(t)&&(r=n,n=0|t[1],t=0|t[0]),"number"!==typeof t)throw new Error("gl-fbo: Missing shape parameter");var a=e.getParameter(e.MAX_RENDERBUFFER_SIZE);if(t<0||t>a||n<0||n>a)throw new Error("gl-fbo: Parameters are too large for FBO");r=r||{};var o=1;if("color"in r){if((o=Math.max(0|r.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(o>1){if(!i)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(o>e.getParameter(i.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+o+" draw buffers")}}var s=e.UNSIGNED_BYTE,l=e.getExtension("OES_texture_float");if(r.float&&o>0){if(!l)throw new Error("gl-fbo: Context does not support floating point textures");s=e.FLOAT}else r.preferFloat&&o>0&&l&&(s=e.FLOAT);var u=!0;"depth"in r&&(u=!!r.depth);var c=!1;return"stencil"in r&&(c=!!r.stencil),new Dg(e,t,n,s,o,u,c,i)}function jg(e,t,n,r,i){this.coord=[e,t],this.id=n,this.value=r,this.distance=i}function Bg(e,t,n){this.gl=e,this.fbo=t,this.buffer=n,this._readTimeout=null;var r=this;this._readCallback=function(){r.gl&&(t.bind(),e.readPixels(0,0,t.shape[0],t.shape[1],e.RGBA,e.UNSIGNED_BYTE,r.buffer),r._readTimeout=null)}}function Ug(e,t){return new Bg(e,rZ(e,t),EW.mallocUint8(t[0]*t[1]*4))}function Vg(e,t){this.gl=e,this.pickBuffer=t,this.screenBox=[0,0,e.drawingBufferWidth,e.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}function Hg(e){for(var t=e.slice(),n=0;n<t.length;++n)t[n]=t[n].slice();return t}function Wg(e,t){return e.x-t.x}function qg(e){var t=e.gl,n=oZ(t,[t.drawingBufferWidth,t.drawingBufferHeight]),r=new Vg(t,n);return r.grid=Fq(r),r.text=WX(r),r.line=Bq(r),r.box=zq(r),r.update(e),r}function Gg(e,t,n){this.plot=e,this.boxBuffer=t,this.boxShader=n,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}function Yg(e,t){var n=e.gl,r=LW(n,[0,0,0,1,1,0,1,1]),i=Oq(n,fZ.boxVertex,fZ.boxFragment),a=new Gg(e,r,i);return a.update(t),e.addOverlay(a),a}function Xg(e){this.plot=e,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}function Zg(e,t){var n=new Xg(e);return n.update(t),e.addOverlay(n),n}function Jg(e,t){if("string"!==typeof e)throw new TypeError("must specify type string");if(t=t||{},"undefined"===typeof document&&!t.canvas)return null;var n=t.canvas||document.createElement("canvas");"number"===typeof t.width&&(n.width=t.width),"number"===typeof t.height&&(n.height=t.height);var r,i=t;try{var a=[e];0===e.indexOf("webgl")&&a.push("experimental-"+e);for(var o=0;o<a.length;o++)if(r=n.getContext(a[o],i))return r}catch(e){r=null}return r||null}function Kg(e){return e.split("").map(function(e){return e in bZ?bZ[e]:""}).join("")}function Qg(e){for(var t=0;(t=e.indexOf("<sup>",t))>=0;){var n=e.indexOf("</sup>",t);if(n<t)break;e=e.slice(0,t)+_Z(e.slice(t+5,n))+e.slice(n+6)}return e}function $g(e){return e.replace(/\<br\>/g,"\n")}function ey(e){return e.replace(/\<.*\>/g,"")}function ty(e){for(var t=oP.entityToUnicode,n=0;(n=e.indexOf("&",n))>=0;){var r=e.indexOf(";",n);if(r<n)n+=1;else{var i=t[e.slice(n+1,r)];e=i?e.slice(0,n)+i+e.slice(r+1):e.slice(0,n)+e.slice(r+1)}}return e}function ny(e){return""+ty(ey(Qg($g(e))))}function ry(e){if("object"===typeof e){if("buttons"in e)return e.buttons;if("which"in e){var t=e.which;if(2===t)return 4;if(3===t)return 2;if(t>0)return 1<<t-1}else if("button"in e){var t=e.button;if(1===t)return 4;if(2===t)return 2;if(t>=0)return 1<<t}}return 0}function iy(e){return e.target||e.srcElement||window}function ay(e){if("object"===typeof e){if("offsetX"in e)return e.offsetX;var t=iy(e),n=t.getBoundingClientRect();return e.clientX-n.left}return 0}function oy(e){if("object"===typeof e){if("offsetY"in e)return e.offsetY;var t=iy(e),n=t.getBoundingClientRect();return e.clientY-n.top}return 0}function sy(e,t){function n(e){var t=!1;return"altKey"in e&&(t=t||e.altKey!==m.alt,m.alt=!!e.altKey),"shiftKey"in e&&(t=t||e.shiftKey!==m.shift,m.shift=!!e.shiftKey),"ctrlKey"in e&&(t=t||e.ctrlKey!==m.control,m.control=!!e.ctrlKey),"metaKey"in e&&(t=t||e.metaKey!==m.meta,m.meta=!!e.metaKey),t}function r(e,r){var i=TZ.x(r),a=TZ.y(r);"buttons"in r&&(e=0|r.buttons),(e!==f||i!==h||a!==p||n(r))&&(f=0|e,h=i||0,p=a||0,t&&t(f,h,p,m))}function i(e){r(0,e)}function a(){(f||h||p||m.shift||m.alt||m.meta||m.control)&&(h=p=0,f=0,m.shift=m.alt=m.control=m.meta=!1,t&&t(0,0,0,m))}function o(e){n(e)&&t&&t(f,h,p,m)}function s(e){0===TZ.buttons(e)?r(0,e):r(f,e)}function l(e){r(f|TZ.buttons(e),e)}function u(e){r(f&~TZ.buttons(e),e)}function c(){g||(g=!0,e.addEventListener("mousemove",s),e.addEventListener("mousedown",l),e.addEventListener("mouseup",u),e.addEventListener("mouseleave",i),e.addEventListener("mouseenter",i),e.addEventListener("mouseout",i),e.addEventListener("mouseover",i),e.addEventListener("blur",a),e.addEventListener("keyup",o),e.addEventListener("keydown",o),e.addEventListener("keypress",o),e!==window&&(window.addEventListener("blur",a),window.addEventListener("keyup",o),window.addEventListener("keydown",o),window.addEventListener("keypress",o)))}function d(){g&&(g=!1,e.removeEventListener("mousemove",s),e.removeEventListener("mousedown",l),e.removeEventListener("mouseup",u),e.removeEventListener("mouseleave",i),e.removeEventListener("mouseenter",i),e.removeEventListener("mouseout",i),e.removeEventListener("mouseover",i),e.removeEventListener("blur",a),e.removeEventListener("keyup",o),e.removeEventListener("keydown",o),e.removeEventListener("keypress",o),e!==window&&(window.removeEventListener("blur",a),window.removeEventListener("keyup",o),window.removeEventListener("keydown",o),window.removeEventListener("keypress",o)))}t||(t=e,e=window);var f=0,h=0,p=0,m={shift:!1,alt:!1,control:!1,meta:!1},g=!1;c();var y={element:e};return Object.defineProperties(y,{enabled:{get:function(){return g},set:function(e){e?c():d()},enumerable:!0},buttons:{get:function(){return f},enumerable:!0},x:{get:function(){return h},enumerable:!0},y:{get:function(){return p},enumerable:!0},mods:{get:function(){return m},enumerable:!0}}),y}function ly(e,t){var n=AZ(getComputedStyle(e).getPropertyValue(t));return n[0]*cy(n[1],e)}function uy(e,t){var n=document.createElement("div");n.style["font-size"]="128"+e,t.appendChild(n);var r=ly(n,"font-size")/128;return t.removeChild(n),r}function cy(e,t){switch(t=t||document.body,e=(e||"px").trim().toLowerCase(),t!==window&&t!==document||(t=document.body),e){case"%":return t.clientHeight/100;case"ch":case"ex":return uy(e,t);case"em":return ly(t,"font-size");case"rem":return ly(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return SZ;case"cm":return SZ/2.54;case"mm":return SZ/25.4;case"pt":return SZ/72;case"pc":return SZ/6}return 1}function dy(e,t,n){"function"===typeof e&&(n=!!t,t=e,e=window);var r=CZ("ex",e),i=function(e){n&&e.preventDefault();var i=e.deltaX||0,a=e.deltaY||0,o=e.deltaZ||0,s=e.deltaMode,l=1;switch(s){case 1:l=r;break;case 2:l=window.innerHeight}if(i*=l,a*=l,o*=l,i||a||o)return t(i,a,o,e)};return e.addEventListener("wheel",i),i}function fy(e,t){this.element=e,this.plot=t,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function hy(e){function t(){e.xaxis.autorange=!1,e.yaxis.autorange=!1}function n(){for(var t=e.graphDiv._fullLayout._axisConstraintGroups,n=e.xaxis._id,r=e.yaxis._id,i=0;i<t.length;i++)if(-1!==t[i][n]){if(-1!==t[i][r])return!0;break}return!1}function r(r,i,s){function l(t,n,r){var i=Math.min(n,r),a=Math.max(n,r);i!==a?(d[t]=i,d[t+2]=a,o.dataBox=d,e.setRanges(d)):(e.selectBox.selectBox=[0,0,1,1],e.glplot.setDirty())}var u,c,d=e.calcDataBox(),f=a.viewBox,h=o.lastPos[0],p=o.lastPos[1],m=EE.MINDRAG*a.pixelRatio,g=EE.MINZOOM*a.pixelRatio;switch(i*=a.pixelRatio,s*=a.pixelRatio,s=f[3]-f[1]-s,e.fullLayout.dragmode){case"zoom":if(r){var y=i/(f[2]-f[0])*(d[2]-d[0])+d[0],v=s/(f[3]-f[1])*(d[3]-d[1])+d[1];o.boxInited||(o.boxStart[0]=y,o.boxStart[1]=v,o.dragStart[0]=i,o.dragStart[1]=s),o.boxEnd[0]=y,o.boxEnd[1]=v,o.boxInited=!0,o.boxEnabled||o.boxStart[0]===o.boxEnd[0]&&o.boxStart[1]===o.boxEnd[1]||(o.boxEnabled=!0);var _=Math.abs(o.dragStart[0]-i)<g,b=Math.abs(o.dragStart[1]-s)<g;if(!n()||_&&b)_&&(o.boxEnd[0]=o.boxStart[0]),b&&(o.boxEnd[1]=o.boxStart[1]);else{u=o.boxEnd[0]-o.boxStart[0],c=o.boxEnd[1]-o.boxStart[1];var x=(d[3]-d[1])/(d[2]-d[0]);Math.abs(u*x)>Math.abs(c)?(o.boxEnd[1]=o.boxStart[1]+Math.abs(u)*x*(c>=0?1:-1),o.boxEnd[1]<d[1]?(o.boxEnd[1]=d[1],o.boxEnd[0]=o.boxStart[0]+(d[1]-o.boxStart[1])/Math.abs(x)):o.boxEnd[1]>d[3]&&(o.boxEnd[1]=d[3],o.boxEnd[0]=o.boxStart[0]+(d[3]-o.boxStart[1])/Math.abs(x))):(o.boxEnd[0]=o.boxStart[0]+Math.abs(c)/x*(u>=0?1:-1),o.boxEnd[0]<d[0]?(o.boxEnd[0]=d[0],o.boxEnd[1]=o.boxStart[1]+(d[0]-o.boxStart[0])*Math.abs(x)):o.boxEnd[0]>d[2]&&(o.boxEnd[0]=d[2],o.boxEnd[1]=o.boxStart[1]+(d[2]-o.boxStart[0])*Math.abs(x)))}}else o.boxEnabled?(u=o.boxStart[0]!==o.boxEnd[0],c=o.boxStart[1]!==o.boxEnd[1],u||c?(u&&(l(0,o.boxStart[0],o.boxEnd[0]),e.xaxis.autorange=!1),c&&(l(1,o.boxStart[1],o.boxEnd[1]),e.yaxis.autorange=!1),e.relayoutCallback()):e.glplot.setDirty(),o.boxEnabled=!1,o.boxInited=!1):o.boxInited&&(o.boxInited=!1);break;case"pan":o.boxEnabled=!1,o.boxInited=!1,r?(o.panning||(o.dragStart[0]=i,o.dragStart[1]=s),Math.abs(o.dragStart[0]-i)<m&&(i=o.dragStart[0]),Math.abs(o.dragStart[1]-s)<m&&(s=o.dragStart[1]),u=(h-i)*(d[2]-d[0])/(a.viewBox[2]-a.viewBox[0]),c=(p-s)*(d[3]-d[1])/(a.viewBox[3]-a.viewBox[1]),d[0]+=u,d[2]+=u,d[1]+=c,d[3]+=c,e.setRanges(d),o.panning=!0,o.lastInputTime=Date.now(),t(),e.cameraChanged(),e.handleAnnotations()):o.panning&&(o.panning=!1,e.relayoutCallback())}o.lastPos[0]=i,o.lastPos[1]=s}var i=e.mouseContainer,a=e.glplot,o=new fy(i,a);return o.mouseListener=MZ(i,r),i.addEventListener("touchstart",function(e){var t=VL(e.changedTouches[0],i);r(0,t[0],t[1]),r(1,t[0],t[1]),e.preventDefault()},!!BL&&{passive:!1}),i.addEventListener("touchmove",function(e){e.preventDefault();var t=VL(e.changedTouches[0],i);r(1,t[0],t[1]),e.preventDefault()},!!BL&&{passive:!1}),i.addEventListener("touchend",function(e){r(0,o.lastPos[0],o.lastPos[1]),e.preventDefault()},!!BL&&{passive:!1}),o.wheelListener=EZ(i,function(n,r){if(!e.scrollZoom)return!1;var i=e.calcDataBox(),s=a.viewBox,l=o.lastPos[0],u=o.lastPos[1],c=Math.exp(5*r/(s[3]-s[1])),d=l/(s[2]-s[0])*(i[2]-i[0])+i[0],f=u/(s[3]-s[1])*(i[3]-i[1])+i[1];return i[0]=(i[0]-d)*c+d,i[2]=(i[2]-d)*c+d,i[1]=(i[1]-f)*c+f,i[3]=(i[3]-f)*c+f,e.setRanges(i),o.lastInputTime=Date.now(),t(),e.cameraChanged(),e.handleAnnotations(),e.relayoutCallback(),!0},!0),o}function py(e,t,n){return t<n?e<t?t:e>n?n:e:e<n?n:e>t?t:e}function my(e){return e?BZ(e):[0,0,0,1]}function gy(e){this.scene=e,this.gl=e.gl,this.pixelRatio=e.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=!1,this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}function yy(e){return new gy(e)}function vy(e,t){this.container=e.container,this.graphDiv=e.graphDiv,this.pixelRatio=e.plotGlPixelRatio||window.devicePixelRatio,this.id=e.id,this.staticPlot=!!e.staticPlot,this.scrollZoom=this.graphDiv._context.scrollZoom,this.fullData=null,this.updateRefs(t),this.makeFramework(),this.glplotOptions=GZ(this),this.glplotOptions.merge(t),this.glplot=cZ(this.glplotOptions),this.camera=PZ(this),this.traces={},this.spikes=mZ(this.glplot),this.selectBox=hZ(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw()}function _y(e,t){for(var n=0;n<2;++n){var r=e[n],i=t[n];if(r.length!==i.length)return!0;for(var a=0;a<r.length;++a)if(r[a].x!==i[a].x)return!0}return!1}function by(e,t,n,r,i){var a=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),n?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),i?a.push("return -1};"):a.push("return i};"),a.join("")}function xy(e,t,n,r){return new Function([by("A","x"+e+"y",t,["y"],r),by("P","c(x,y)"+e+"0",t,["y","c"],r),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""))()}function wy(e,t,n,r,i,a,o){this.plot=e,this.shader=t,this.pickShader=n,this.positionBuffer=r,this.weightBuffer=i,this.colorBuffer=a,this.idBuffer=o,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}function ky(e,t){var n=e.gl,r=Oq(n,cJ.vertex,cJ.fragment),i=Oq(n,cJ.pickVertex,cJ.pickFragment),a=LW(n),o=LW(n),s=LW(n),l=LW(n),u=new wy(e,r,i,a,o,s,l);return u.update(t),e.addObject(u),u}function Ty(e,t){this.scene=e,this.uid=t,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=fJ(e.glplot,this.options),this.heatmap._trace=this}function My(e){for(var t=e.colorscale,n=e.zmin,r=e.zmax,i=t.length,a=new Array(i),o=new Array(4*i),s=0;s<i;s++){var l=t[s],u=UZ(l[1]);a[s]=n+l[0]*(r-n);for(var c=0;c<4;c++)o[4*s+c]=u[c]}return{colorLevels:a,colorValues:o}}function Ay(e,t,n){var r=new Ty(e,t.uid);return r.update(t,n),r}function Cy(e){var t={};t["autobin"+e]=!1;var n={};return n["^autobin"+e]=!1,{start:{valType:"any",dflt:null,editType:"calc",impliedEdits:n},end:{valType:"any",dflt:null,editType:"calc",impliedEdits:n},size:{valType:"any",dflt:null,editType:"calc",impliedEdits:n},editType:"calc",impliedEdits:t}}function Sy(e,t,n,r,i){var a,o,s,l,u,c=r+"bins",d="overlay"===e._fullLayout.barmode;if(t._autoBinFinished)delete t._autoBinFinished;else{var f=d?[t]:Py(e,t),h=[],p=1/0,m=1/0,g=-1/0,y="autobin"+r;for(a=0;a<f.length;a++){o=f[a],u=o._pos0=n.makeCalcdata(o,r);var v=o[c];if(o[y]||!v||null===v.start||null===v.end){s=o[r+"calendar"];var _=o.cumulative;if(v=PI.autoBin(u,n,o["nbins"+r],!1,s),d&&0===v._dataSpan&&"category"!==n.type){if(i)return[v,u,!0];v=Ey(e,t,n,r,c)}_.enabled&&"include"!==_.currentbin&&("decreasing"===_.direction?m=Math.min(m,n.r2c(v.start,0,s)-v.size):g=Math.max(g,n.r2c(v.end,0,s)+v.size)),h.push(o)}else l||(l={size:v.size,start:n.r2c(v.start,0,s),end:n.r2c(v.end,0,s)});p=Iy(p,v.size),m=Math.min(m,n.r2c(v.start,0,s)),g=Math.max(g,n.r2c(v.end,0,s)),a&&(o._autoBinFinished=1)}if(l&&SC(l.size)&&SC(p)){p=p>l.size/1.9?l.size:l.size/Math.ceil(l.size/p);var b=l.start+(l.size-p)/2;m=b-p*Math.ceil((b-m)/p)}for(a=0;a<h.length;a++)o=h[a],s=o[r+"calendar"],o._input[c]=o[c]={start:n.c2r(m,0,s),end:n.c2r(g,0,s),size:p},o._input[y]=o[y]}return u=t._pos0,delete t._pos0,[t[c],u]}function Ey(e,t,n,r,i){var a,o,s=Py(e,t),l=!1,u=1/0,c=[t];for(a=0;a<s.length;a++)if((o=s[a])===t)l=!0;else if(l){var d=Sy(e,o,n,r,!0),f=d[0],h=d[2];o._autoBinFinished=1,o._pos0=d[1],h?c.push(o):u=Math.min(u,f.size)}else u=Math.min(u,o[i].size);var p=new Array(c.length);for(a=0;a<c.length;a++)for(var m=c[a]._pos0,g=0;g<m.length;g++)if(void 0!==m[g]){p[a]=m[g];break}for(isFinite(u)||(u=uE.distinctVals(p).minDiff),a=0;a<c.length;a++){o=c[a];var y=o[r+"calendar"];o._input[i]=o[i]={start:n.c2r(p[a]-u/2,0,y),end:n.c2r(p[a]+u/2,0,y),size:u}}return t[i]}function Py(e,t){for(var n=t.xaxis,r=t.yaxis,i=t.orientation,a=[],o=e._fullData,s=0;s<o.length;s++){var l=o[s];"histogram"===l.type&&l.orientation===i&&l.xaxis===n&&l.yaxis===r&&a.push(l)}return a}function Iy(e,t){if(e===1/0)return t;var n=Ly(e);return Ly(t)<n?t:e}function Ly(e){return SC(e)?e:"string"===typeof e&&"M"===e.charAt(0)?xJ*+e.substr(1):1/0}function Oy(e,t,n){function r(t){s=e[t],e[t]/=2}function i(t){o=e[t],e[t]=s+o/2,s+=o}var a,o,s;if("half"===n)if("increasing"===t)for(r(0),a=1;a<e.length;a++)i(a);else for(r(e.length-1),a=e.length-2;a>=0;a--)i(a);else if("increasing"===t){for(a=1;a<e.length;a++)e[a]+=e[a-1];"exclude"===n&&(e.unshift(0),e.pop())}else{for(a=e.length-2;a>=0;a--)e[a]+=e[a+1];"exclude"===n&&(e.push(0),e.shift())}}function zy(e,t,n){return{x:{valType:"number",dflt:e,editType:"camera"},y:{valType:"number",dflt:t,editType:"camera"},z:{valType:"number",dflt:n,editType:"camera"},editType:"camera"}}function Ry(e,t,n,r){for(var i=n("bgcolor"),a=jE.combine(i,r.paper_bgcolor),o=["up","center","eye"],s=0;s<o.length;s++)n("camera."+o[s]+".x"),n("camera."+o[s]+".y"),n("camera."+o[s]+".z");var l=!!n("aspectratio.x")&&!!n("aspectratio.y")&&!!n("aspectratio.z"),u=l?"manual":"auto",c=n("aspectmode",u);l||(e.aspectratio=t.aspectratio={x:1,y:1,z:1},"manual"===c&&(t.aspectmode="auto"),e.aspectmode=t.aspectmode),QJ(e,t,{font:r.font,scene:r.id,data:r.fullData,bgColor:a,calendar:r.calendar,fullLayout:r.fullLayout}),rS.getComponentMethod("annotations3d","handleDefaults")(e,t,r),n("dragmode",r.getDfltFromLayout("dragmode")),n("hovermode",r.getDfltFromLayout("hovermode"))}function Dy(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*o,_=n*l-i*o,b=n*u-a*o,x=r*l-i*s,w=r*u-a*s,k=i*u-a*l,T=c*m-d*p,M=c*g-f*p,A=c*y-h*p,C=d*g-f*m,S=d*y-h*m,E=f*y-h*g,P=v*E-_*S+b*C+x*A-w*M+k*T;return P?(P=1/P,e[0]=(s*E-l*S+u*C)*P,e[1]=(i*S-r*E-a*C)*P,e[2]=(m*k-g*w+y*x)*P,e[3]=(f*w-d*k-h*x)*P,e[4]=(l*A-o*E-u*M)*P,e[5]=(n*E-i*A+a*M)*P,e[6]=(g*b-p*k-y*_)*P,e[7]=(c*k-f*b+h*_)*P,e[8]=(o*S-s*A+u*T)*P,e[9]=(r*A-n*S-a*T)*P,e[10]=(p*w-m*b+y*v)*P,e[11]=(d*b-c*w-h*v)*P,e[12]=(s*M-o*C-l*T)*P,e[13]=(n*C-r*M+i*T)*P,e[14]=(m*_-p*x-g*v)*P,e[15]=(c*x-d*_+f*v)*P,e):null}function Ny(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Fy(e,t,n,r){var i,a,o,s,l,u,c,d,f,h,p=t[0],m=t[1],g=t[2],y=r[0],v=r[1],_=r[2],b=n[0],x=n[1],w=n[2];return Math.abs(p-b)<1e-6&&Math.abs(m-x)<1e-6&&Math.abs(g-w)<1e-6?aK(e):(c=p-b,d=m-x,f=g-w,h=1/Math.sqrt(c*c+d*d+f*f),c*=h,d*=h,f*=h,i=v*f-_*d,a=_*c-y*f,o=y*d-v*c,h=Math.sqrt(i*i+a*a+o*o),h?(h=1/h,i*=h,a*=h,o*=h):(i=0,a=0,o=0),s=d*o-f*a,l=f*i-c*o,u=c*a-d*i,h=Math.sqrt(s*s+l*l+u*u),h?(h=1/h,s*=h,l*=h,u*=h):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=a,e[5]=l,e[6]=d,e[7]=0,e[8]=o,e[9]=u,e[10]=f,e[11]=0,e[12]=-(i*p+a*m+o*g),e[13]=-(s*p+l*m+u*g),e[14]=-(c*p+d*m+f*g),e[15]=1,e)}function jy(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+d*r,e[7]=l*i+f*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=d*i-s*r,e[11]=f*i-l*r,e}function By(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i-u*r,e[1]=o*i-c*r,e[2]=s*i-d*r,e[3]=l*i-f*r,e[8]=a*r+u*i,e[9]=o*r+c*i,e[10]=s*r+d*i,e[11]=l*r+f*i,e}function Uy(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+c*r,e[2]=s*i+d*r,e[3]=l*i+f*r,e[4]=u*i-a*r,e[5]=c*i-o*r,e[6]=d*i-s*r,e[7]=f*i-l*r,e}function Vy(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Hy(e,t,n){var r,i,a,o,s,l,u,c,d,f,h,p,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=f,e[10]=h,e[11]=p,e[12]=r*m+s*g+d*y+t[12],e[13]=i*m+l*g+f*y+t[13],e[14]=a*m+u*g+h*y+t[14],e[15]=o*m+c*g+p*y+t[15]),e}function Wy(e,t){var n=t[0],r=t[1],i=t[2],a=n*n+r*r+i*i;return a>0&&(a=1/Math.sqrt(a),e[0]=t[0]*a,e[1]=t[1]*a,e[2]=t[2]*a),e}function qy(e){var t=e[0],n=e[1],r=e[2],i=e[3],a=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],d=e[10],f=e[11],h=e[12],p=e[13],m=e[14],g=e[15];return(t*o-n*a)*(d*g-f*m)-(t*s-r*a)*(c*g-f*p)+(t*l-i*a)*(c*m-d*p)+(n*s-r*o)*(u*g-f*h)-(n*l-i*o)*(u*m-d*h)+(r*l-i*s)*(u*p-c*h)}function Gy(e,t,n,r){var i=t[0],a=t[1],o=t[2];return e[0]=i+r*(n[0]-i),e[1]=a+r*(n[1]-a),e[2]=o+r*(n[2]-o),e}function Yy(e){var t=new Float32Array(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Xy(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Zy(e,t){if(e===t){var n=t[1],r=t[2],i=t[3],a=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=a,e[11]=t[14],e[12]=i,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Jy(e,t,n){var r=t[0],i=t[1],a=t[2],o=n[0],s=n[1],l=n[2];return e[0]=i*l-a*s,e[1]=a*o-r*l,e[2]=r*s-i*o,e}function Ky(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function Qy(e){var t=e[0],n=e[1],r=e[2];return Math.sqrt(t*t+n*n+r*r)}function $y(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function ev(e,t){e[0][0]=t[0],e[0][1]=t[1],e[0][2]=t[2],e[1][0]=t[4],e[1][1]=t[5],e[1][2]=t[6],e[2][0]=t[8],e[2][1]=t[9],e[2][2]=t[10]}function tv(e,t,n,r,i){e[0]=t[0]*r+n[0]*i,e[1]=t[1]*r+n[1]*i,e[2]=t[2]*r+n[2]*i}function nv(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=r+r,l=i+i,u=a+a,c=r*s,d=r*l,f=r*u,h=i*l,p=i*u,m=a*u,g=o*s,y=o*l,v=o*u;return e[0]=1-(h+m),e[1]=d+v,e[2]=f-y,e[3]=0,e[4]=d-v,e[5]=1-(c+m),e[6]=p+g,e[7]=0,e[8]=f+y,e[9]=p-g,e[10]=1-(c+h),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function rv(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*d+w*m,e[1]=_*i+b*l+x*f+w*g,e[2]=_*a+b*u+x*h+w*y,e[3]=_*o+b*c+x*p+w*v,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*d+w*m,e[5]=_*i+b*l+x*f+w*g,e[6]=_*a+b*u+x*h+w*y,e[7]=_*o+b*c+x*p+w*v,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*d+w*m,e[9]=_*i+b*l+x*f+w*g,e[10]=_*a+b*u+x*h+w*y,e[11]=_*o+b*c+x*p+w*v,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*d+w*m,e[13]=_*i+b*l+x*f+w*g,e[14]=_*a+b*u+x*h+w*y,e[15]=_*o+b*c+x*p+w*v,e}function iv(e,t,n,r){var i,a,o,s,l,u=t[0],c=t[1],d=t[2],f=t[3],h=n[0],p=n[1],m=n[2],g=n[3];return a=u*h+c*p+d*m+f*g,a<0&&(a=-a,h=-h,p=-p,m=-m,g=-g),1-a>1e-6?(i=Math.acos(a),o=Math.sin(i),s=Math.sin((1-r)*i)/o,l=Math.sin(r*i)/o):(s=1-r,l=r),e[0]=s*u+l*h,e[1]=s*c+l*p,e[2]=s*d+l*m,e[3]=s*f+l*g,e}function av(e,t,n,r){if(0===hK(t)||0===hK(n))return!1;var i=SK(t,DK.translate,DK.scale,DK.skew,DK.perspective,DK.quaternion),a=SK(n,NK.translate,NK.scale,NK.skew,NK.perspective,NK.quaternion);return!(!i||!a)&&(pK(FK.translate,DK.translate,NK.translate,r),pK(FK.skew,DK.skew,NK.skew,r),pK(FK.scale,DK.scale,NK.scale,r),pK(FK.perspective,DK.perspective,NK.perspective,r),RK(FK.quaternion,DK.quaternion,NK.quaternion,r),OK(e,FK.translate,FK.scale,FK.skew,FK.perspective,FK.quaternion),!0)}function ov(){return{translate:sv(),scale:sv(1),skew:sv(),perspective:lv(),quaternion:lv()}}function sv(e){return[e||0,e||0,e||0]}function lv(){return[0,0,0,1]}function uv(e){this._components=e.slice(),this._time=[0],this.prevMatrix=e.slice(),this.nextMatrix=e.slice(),this.computedMatrix=e.slice(),this.computedInverse=e.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}function cv(e){return e=e||{},new uv(e.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}function dv(e,t,n,r,i,a){var o=6*i*i-6*i,s=3*i*i-4*i+1,l=-6*i*i+6*i,u=3*i*i-2*i;if(e.length){a||(a=new Array(e.length));for(var c=e.length-1;c>=0;--c)a[c]=o*e[c]+s*t[c]+l*n[c]+u*r[c];return a}return o*e+s*t+l*n[c]+u*r}function fv(e,t,n,r,i,a){var o=i-1,s=i*i,l=o*o,u=(1+2*i)*l,c=i*l,d=s*(3-2*i),f=s*o;if(e.length){a||(a=new Array(e.length));for(var h=e.length-1;h>=0;--h)a[h]=u*e[h]+c*t[h]+d*n[h]+f*r[h];return a}return u*e+c*t+d*n+f*r}function hv(e,t,n){return Math.min(t,Math.max(e,n))}function pv(e,t,n){this.dimension=e.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var r=0;r<this.dimension;++r)this.bounds[0][r]=-1/0,this.bounds[1][r]=1/0;this._state=e.slice().reverse(),this._velocity=t.slice().reverse(),this._time=[n],this._scratch=[e.slice(),e.slice(),e.slice(),e.slice(),e.slice()]}function mv(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=0;return t}function gv(e,t,n){switch(arguments.length){case 0:return new pv([0],[0],0);case 1:if("number"===typeof e){var r=mv(e);return new pv(r,r,0)}return new pv(e,mv(e.length),0);case 2:if("number"===typeof t){var r=mv(e.length);return new pv(e,r,+t)}n=0;case 3:if(e.length!==t.length)throw new Error("state and velocity lengths must match");return new pv(e,t,n)}}function yv(e,t,n,r,i,a,o,s,l,u){var c=t+a+u;if(d>0){var d=Math.sqrt(c+1);e[0]=.5*(o-l)/d,e[1]=.5*(s-r)/d,e[2]=.5*(n-a)/d,e[3]=.5*d}else{var f=Math.max(t,a,u),d=Math.sqrt(2*f-c+1);t>=f?(e[0]=.5*d,e[1]=.5*(i+n)/d,e[2]=.5*(s+r)/d,e[3]=.5*(o-l)/d):a>=f?(e[0]=.5*(n+i)/d,e[1]=.5*d,e[2]=.5*(l+o)/d,e[3]=.5*(s-r)/d):(e[0]=.5*(r+s)/d,e[1]=.5*(o+l)/d,e[2]=.5*d,e[3]=.5*(n-i)/d)}return e}function vv(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function _v(e,t,n,r){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2)+Math.pow(r,2))}function bv(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=_v(n,r,i,a);o>1e-6?(e[0]=n/o,e[1]=r/o,e[2]=i/o,e[3]=a/o):(e[0]=e[1]=e[2]=0,e[3]=1)}function xv(e,t,n){this.radius=qK([n]),this.center=qK(t),this.rotation=qK(e),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}function wv(e){e=e||{};var t=e.center||[0,0,0],n=e.rotation||[0,0,0,1],r=e.radius||1;t=[].slice.call(t,0,3),n=[].slice.call(n,0,4),bv(n,n);var i=new xv(n,t,Math.log(r));return i.setDistanceLimits(e.zoomMin,e.zoomMax),("eye"in e||"up"in e)&&i.lookAt(0,e.eye,e.center,e.up),i}function kv(e,t,n,r){var i,a,o,s,l,u,c,d,f,h,p,m,g,y,v,_,b,x,w,k,T,M,A,C,S=r[0],E=r[1],P=r[2],I=Math.sqrt(S*S+E*E+P*P);return Math.abs(I)<1e-6?null:(I=1/I,S*=I,E*=I,P*=I,i=Math.sin(n),a=Math.cos(n),o=1-a,s=t[0],l=t[1],u=t[2],c=t[3],d=t[4],f=t[5],h=t[6],p=t[7],m=t[8],g=t[9],y=t[10],v=t[11],_=S*S*o+a,b=E*S*o+P*i,x=P*S*o-E*i,w=S*E*o-P*i,k=E*E*o+a,T=P*E*o+S*i,M=S*P*o+E*i,A=E*P*o-S*i,C=P*P*o+a,e[0]=s*_+d*b+m*x,e[1]=l*_+f*b+g*x,e[2]=u*_+h*b+y*x,e[3]=c*_+p*b+v*x,e[4]=s*w+d*k+m*T,e[5]=l*w+f*k+g*T,e[6]=u*w+h*k+y*T,e[7]=c*w+p*k+v*T,e[8]=s*M+d*A+m*C,e[9]=l*M+f*A+g*C,e[10]=u*M+h*A+y*C,e[11]=c*M+p*A+v*C,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Tv(e,t,n){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2)+Math.pow(n,2))}function Mv(e){return Math.min(1,Math.max(-1,e))}function Av(e){var t=Math.abs(e[0]),n=Math.abs(e[1]),r=Math.abs(e[2]),i=[0,0,0];t>Math.max(n,r)?i[2]=1:n>Math.max(t,r)?i[0]=1:i[1]=1;for(var a=0,o=0,s=0;s<3;++s)a+=e[s]*e[s],o+=i[s]*e[s];for(var s=0;s<3;++s)i[s]-=o/a*e[s];return fK(i,i),i}function Cv(e,t,n,r,i,a,o,s){this.center=qK(n),this.up=qK(r),this.right=qK(i),this.radius=qK([a]),this.angle=qK([o,s]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(e,t),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var l=0;l<16;++l)this.computedMatrix[l]=.5;this.recalcMatrix(0)}function Sv(e){e=e||{};var t=e.center||[0,0,0],n=e.up||[0,1,0],r=e.right||Av(n),i=e.radius||1,a=e.theta||0,o=e.phi||0;if(t=[].slice.call(t,0,3),n=[].slice.call(n,0,3),fK(n,n),r=[].slice.call(r,0,3),fK(r,r),"eye"in e){var s=e.eye,l=[s[0]-t[0],s[1]-t[1],s[2]-t[2]];vK(r,l,n),Tv(r[0],r[1],r[2])<1e-6?r=Av(n):fK(r,r),i=Tv(l[0],l[1],l[2]);var u=_K(n,l)/i,c=_K(r,l)/i;o=Math.acos(u),a=Math.acos(c)}return i=Math.log(i),new Cv(e.zoomMin,e.zoomMax,t,n,r,i,a,o)}function Ev(e,t){this._controllerNames=Object.keys(e),this._controllerList=this._controllerNames.map(function(t){return e[t]}),this._mode=t,this._active=e[t],this._active||(this._mode="turntable",this._active=e.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}function Pv(e){e=e||{};var t=e.eye||[0,0,1],n=e.center||[0,0,0],r=e.up||[0,1,0],i=e.distanceLimits||[0,1/0],a=e.mode||"turntable",o=KK(),s=XK(),l=UK();return o.setDistanceLimits(i[0],i[1]),o.lookAt(0,t,n,r),s.setDistanceLimits(i[0],i[1]),s.lookAt(0,t,n,r),l.setDistanceLimits(i[0],i[1]),l.lookAt(0,t,n,r),new Ev({turntable:o,orbit:s,matrix:l},a)}function Iv(e,t){function n(t,n,r,a){var s=1/e.clientHeight,l=s*(n-c),h=s*(r-d),p=u.flipX?1:-1,m=u.flipY?1:-1,g=Math.PI*u.rotateSpeed,y=nQ();if(1&t)a.shift?i.rotate(y,0,0,-l*g):i.rotate(y,p*g*l,-m*g*h,0);else if(2&t)i.pan(y,-u.translateSpeed*l*o,u.translateSpeed*h*o,0);else if(4&t){var v=u.zoomSpeed*h/window.innerHeight*(y-i.lastT())*50;i.pan(y,0,0,o*(Math.exp(v)-1))}c=n,d=r,f=a}e=e||document.body,t=t||{};var r=[.01,1/0];"distanceLimits"in t&&(r[0]=t.distanceLimits[0],r[1]=t.distanceLimits[1]),"zoomMin"in t&&(r[0]=t.zoomMin),"zoomMax"in t&&(r[1]=t.zoomMax);var i=eQ({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:r}),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0,s=e.clientWidth,l=e.clientHeight,u={view:i,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:i.modes,tick:function(){var t=nQ(),n=this.delay;i.idle(t-n),i.flush(t-(100+2*n));var r=t-2*n;i.recalcMatrix(r);for(var u=!0,c=i.computedMatrix,d=0;d<16;++d)u=u&&a[d]===c[d],a[d]=c[d];var f=e.clientWidth===s&&e.clientHeight===l;return s=e.clientWidth,l=e.clientHeight,u?!f:(o=Math.exp(i.computedRadius[0]),!0)},lookAt:function(e,t,n){i.lookAt(i.lastT(),e,t,n)},rotate:function(e,t,n){i.rotate(i.lastT(),e,t,n)},pan:function(e,t,n){i.pan(i.lastT(),e,t,n)},translate:function(e,t,n){i.translate(i.lastT(),e,t,n)}};Object.defineProperties(u,{matrix:{get:function(){return i.computedMatrix},set:function(e){return i.setMatrix(i.lastT(),e),i.computedMatrix},enumerable:!0},mode:{get:function(){return i.getMode()},set:function(e){return i.setMode(e),i.getMode()},enumerable:!0},center:{get:function(){return i.computedCenter},set:function(e){return i.lookAt(i.lastT(),e),i.computedCenter},enumerable:!0},eye:{get:function(){return i.computedEye},set:function(e){return i.lookAt(i.lastT(),null,e),i.computedEye},enumerable:!0},up:{get:function(){return i.computedUp},set:function(e){return i.lookAt(i.lastT(),null,null,e),i.computedUp},enumerable:!0},distance:{get:function(){return o},set:function(e){return i.setDistance(i.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return i.getDistanceLimits(r)},set:function(e){return i.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var c=0,d=0,f={shift:!1,control:!1,alt:!1,meta:!1};return MZ(e,n),e.addEventListener("touchstart",function(t){var r=VL(t.changedTouches[0],e);n(0,r[0],r[1],f),n(1,r[0],r[1],f),t.preventDefault()},!!BL&&{passive:!1}),e.addEventListener("touchmove",function(t){var r=VL(t.changedTouches[0],e);n(1,r[0],r[1],f),t.preventDefault()},!!BL&&{passive:!1}),e.addEventListener("touchend",function(t){VL(t.changedTouches[0],e);n(0,c,d,f),t.preventDefault()},!!BL&&{passive:!1}),EZ(e,function(e,t,n){var r=u.flipX?1:-1,a=u.flipY?1:-1,s=nQ();if(Math.abs(e)>Math.abs(t))i.rotate(s,0,0,-e*r*Math.PI*u.rotateSpeed/window.innerWidth);else{var l=u.zoomSpeed*a*t/window.innerHeight*(s-i.lastT())/100;i.pan(s,0,0,o*(Math.exp(l)-1))}},!0),u}function Lv(e,t,n){t?t.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var r=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(n){if(n.length>r)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<n.length;++i){var a=n[i];if(a.buffer){var o=a.buffer,s=a.size||4,l=a.type||e.FLOAT,u=!!a.normalized,c=a.stride||0,d=a.offset||0;o.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,l,u,c,d)}else{if("number"===typeof a)e.vertexAttrib1f(i,a);else if(1===a.length)e.vertexAttrib1f(i,a[0]);else if(2===a.length)e.vertexAttrib2f(i,a[0],a[1]);else if(3===a.length)e.vertexAttrib3f(i,a[0],a[1],a[2]);else{if(4!==a.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,a[0],a[1],a[2],a[3])}e.disableVertexAttribArray(i)}}for(;i<r;++i)e.disableVertexAttribArray(i)}else{e.bindBuffer(e.ARRAY_BUFFER,null);for(var i=0;i<r;++i)e.disableVertexAttribArray(i)}}function Ov(e){this.gl=e,this._elements=null,this._attributes=null,this._elementsType=e.UNSIGNED_SHORT}function zv(e){return new Ov(e)}function Rv(e,t,n,r,i,a){this.location=e,this.dimension=t,this.a=n,this.b=r,this.c=i,this.d=a}function Dv(e,t,n){this.gl=e,this._ext=t,this.handle=n,this._attribs=[],this._useElements=!1,this._elementsType=e.UNSIGNED_SHORT}function Nv(e,t){return new Dv(e,t,t.createVertexArrayOES())}function Fv(e){this.bindVertexArrayOES=e.bindVertexArray.bind(e),this.createVertexArrayOES=e.createVertexArray.bind(e),this.deleteVertexArrayOES=e.deleteVertexArray.bind(e)}function jv(e,t,n,r){var i,a=e.createVertexArray?new Fv(e):e.getExtension("OES_vertex_array_object");return i=a?oQ(e,a):aQ(e),i.update(t,n,r),i}function Bv(e){var t=cQ.get(e),n=t&&(t._triangleBuffer.handle||t._triangleBuffer.buffer);if(!n||!e.isBuffer(n)){var r=LW(e,new Float32Array([-1,-1,-1,4,4,-1]));t=sQ(e,[{buffer:r,type:e.FLOAT,size:2}]),t._triangleBuffer=r,cQ.set(e,t)}t.bind(),e.drawArrays(e.TRIANGLES,0,3),t.unbind()}function Uv(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r}function Vv(e){for(var t=[],n=[],r=0,i=0;i<3;++i)for(var a=(i+1)%3,o=(i+2)%3,s=[0,0,0],l=[0,0,0],u=-1;u<=1;u+=2){n.push(r,r+2,r+1,r+1,r+2,r+3),s[i]=u,l[i]=u;for(var c=-1;c<=1;c+=2){s[a]=c;for(var d=-1;d<=1;d+=2)s[o]=d,t.push(s[0],s[1],s[2],l[0],l[1],l[2]),r+=1}var f=a;a=o,o=f}var h=LW(e,new Float32Array(t)),p=LW(e,new Uint16Array(n),e.ELEMENT_ARRAY_BUFFER),m=sQ(e,[{buffer:h,type:e.FLOAT,size:3,offset:0,stride:24},{buffer:h,type:e.FLOAT,size:3,offset:12,stride:24}],p),g=bQ(e);return g.attributes.position.location=0,g.attributes.normal.location=1,new Uv(e,h,m,g)}function Hv(e,t){for(var n=Vq(e[0],t[0]),r=1;r<e.length;++r)n=Yq(n,Vq(e[r],t[r]));return n}function Wv(e,t){var n=Yq(wQ(e,t),[t[t.length-1]]);return n[n.length-1]}function qv(e,t,n,r){var i=r-t,a=-t/i;a<0?a=0:a>1&&(a=1);for(var o=1-a,s=e.length,l=new Array(s),u=0;u<s;++u)l[u]=a*e[u]+o*n[u];return l}function Gv(e,t){for(var n=[],r=[],i=Wv(e[e.length-1],t),a=e[e.length-1],o=e[0],s=0;s<e.length;++s,a=o){o=e[s];var l=Wv(o,t);if(i<0&&l>0||i>0&&l<0){var u=qv(a,l,o,i);n.push(u),r.push(u.slice())}l<0?r.push(o.slice()):l>0?n.push(o.slice()):(n.push(o.slice()),r.push(o.slice())),i=l}return{positive:n,negative:r}}function Yv(e,t){for(var n=[],r=Wv(e[e.length-1],t),i=e[e.length-1],a=e[0],o=0;o<e.length;++o,i=a){a=e[o];var s=Wv(a,t);(r<0&&s>0||r>0&&s<0)&&n.push(qv(i,s,a,r)),s>=0&&n.push(a.slice()),r=s}return n}function Xv(e,t){for(var n=[],r=Wv(e[e.length-1],t),i=e[e.length-1],a=e[0],o=0;o<e.length;++o,i=a){a=e[o];var s=Wv(a,t);(r<0&&s>0||r>0&&s<0)&&n.push(qv(i,s,a,r)),s<=0&&n.push(a.slice()),r=s}return n}function Zv(e,t,n){for(var r=0;r<4;++r){e[r]=n[12+r];for(var i=0;i<3;++i)e[r]+=t[i]*n[4*i+r]}}function Jv(e){for(var t=0;t<PQ.length;++t)if(e=kQ.positive(e,PQ[t]),e.length<3)return 0;for(var n=e[0],r=n[0]/n[3],i=n[1]/n[3],a=0,t=1;t+1<e.length;++t){var o=e[t],s=e[t+1],l=o[0]/o[3],u=o[1]/o[3],c=s[0]/s[3],d=s[1]/s[3],f=l-r,h=u-i,p=c-r,m=d-i;a+=Math.abs(f*m-h*p)}return a}function Kv(e,t,n,r){PK(MQ,t,e),PK(MQ,n,MQ);for(var i=0,a=0;a<2;++a){SQ[2]=r[a][2];for(var o=0;o<2;++o){SQ[1]=r[o][1];for(var s=0;s<2;++s)SQ[0]=r[s][0],Zv(AQ[i],SQ,MQ),i+=1}}for(var l=-1,a=0;a<8;++a){for(var u=AQ[a][3],c=0;c<3;++c)CQ[a][c]=AQ[a][c]/u;u<0&&(l<0?l=a:CQ[a][2]<CQ[l][2]&&(l=a))}if(l<0){l=0;for(var d=0;d<3;++d){for(var f=(d+2)%3,h=(d+1)%3,p=-1,m=-1,g=0;g<2;++g){var y=g<<d,v=y+(g<<f)+(1-g<<h),_=y+(1-g<<f)+(g<<h);eG(CQ[y],CQ[v],CQ[_],EQ)<0||(g?p=1:m=1)}if(p<0||m<0)m>p&&(l|=1<<d);else{for(var g=0;g<2;++g){var y=g<<d,v=y+(g<<f)+(1-g<<h),_=y+(1-g<<f)+(g<<h),b=Jv([AQ[y],AQ[v],AQ[_],AQ[y+(1<<f)+(1<<h)]]);g?p=b:m=b}m>p&&(l|=1<<d)}}}for(var x=7^l,w=-1,a=0;a<8;++a)a!==l&&a!==x&&(w<0?w=a:CQ[w][1]>CQ[a][1]&&(w=a));for(var k=-1,a=0;a<3;++a){var T=w^1<<a;if(T!==l&&T!==x){k<0&&(k=T);var h=CQ[T];h[0]<CQ[k][0]&&(k=T)}}for(var M=-1,a=0;a<3;++a){var T=w^1<<a;if(T!==l&&T!==x&&T!==k){M<0&&(M=T);var h=CQ[T];h[0]>CQ[M][0]&&(M=T)}}var A=IQ;A[0]=A[1]=A[2]=0,A[pW.log2(k^w)]=w&k,A[pW.log2(w^M)]=w&M;var C=7^M;C===l||C===x?(C=7^k,A[pW.log2(M^C)]=C&M):A[pW.log2(k^C)]=C&k;for(var S=LQ,E=l,d=0;d<3;++d)S[d]=E&1<<d?-1:1;return OQ}function Qv(e){return e[0]=e[1]=e[2]=0,e}function $v(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function e_(e,t,n,r,i,a,o,s){this.gl=e,this.vertBuffer=t,this.vao=n,this.shader=r,this.tickCount=i,this.tickOffset=a,this.gridCount=o,this.gridOffset=s}function t_(e,t,n){var r=[],i=[0,0,0],a=[0,0,0],o=[0,0,0],s=[0,0,0];r.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var l=0;l<3;++l){for(var u=r.length/3|0,c=0;c<n[l].length;++c){var d=+n[l][c].x;r.push(d,0,1,d,1,1,d,0,-1,d,0,-1,d,1,1,d,1,-1)}var f=r.length/3|0;i[l]=u,a[l]=f-u;for(var u=r.length/3|0,h=0;h<n[l].length;++h){var d=+n[l][h].x;r.push(d,0,1,d,1,1,d,0,-1,d,0,-1,d,1,1,d,1,-1)}var f=r.length/3|0;o[l]=u,s[l]=f-u}var p=LW(e,new Float32Array(r)),m=sQ(e,[{buffer:p,type:e.FLOAT,size:3,stride:0,offset:0}]),g=RQ(e);return g.attributes.position.location=0,new e_(e,p,m,g,a,i,s,o)}function n_(e,t){var n=e+"",r=n.indexOf("."),i=0;r>=0&&(i=n.length-r-1);var a=Math.pow(10,i),o=Math.round(e*t*a),s=o+"";if(s.indexOf("e")>=0)return s;var l=o/a,u=o%a;o<0?(l=0|-Math.ceil(l),u=0|-u):(l=0|Math.floor(l),u|=0);var c=""+l;if(o<0&&(c="-"+c),i){for(var d=""+u;d.length<i;)d="0"+d;return c+"."+d}return c}function r_(e,t){for(var n=[],r=0;r<3;++r){for(var i=[],a=(e[0][r],e[1][r],0);a*t[r]<=e[1][r];++a)i.push({x:a*t[r],text:n_(t[r],a)});for(var a=-1;a*t[r]>=e[0][r];--a)i.push({x:a*t[r],text:n_(t[r],a)});n.push(i)}return n}function i_(e,t){for(var n=0;n<3;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;++r){var i=e[n][r],a=t[n][r];if(i.x!==a.x||i.text!==a.text||i.font!==a.font||i.fontColor!==a.fontColor||i.fontSize!==a.fontSize||i.dx!==a.dx||i.dy!==a.dy)return!1}}return!0}function a_(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function o_(e){this.gl=e,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=_Q(e)}function s_(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}function l_(e,t,n,r,i){for(var a=e.primalOffset,o=e.primalMinor,s=e.mirrorOffset,l=e.mirrorMinor,u=r[t],c=0;c<3;++c)if(t!==c){var d=a,f=s,h=o,p=l;u&1<<c&&(d=s,f=a,h=l,p=o),d[c]=n[0][c],f[c]=n[1][c],i[c]>0?(h[c]=-1,p[c]=0):(h[c]=0,p[c]=1)}}function u_(e,t){var n=new o_(e);return n.update(t),n}function c_(e,t,n){var r=t||0,i=n||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[r*e[12]+e[8],r*e[13]+e[9],r*e[14]+e[10],r*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}function d_(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function f_(e,t,n){this.lo=e,this.hi=t,this.pixelsPerDataUnit=n}function h_(e,t,n,r,i){for(var a=0;a<3;++a){for(var o=i$,s=a$,l=0;l<3;++l)s[l]=o[l]=n[l];s[3]=o[3]=1,s[a]+=1,e$(s,s,t),s[3]<0&&(e[a]=1/0),o[a]-=1,e$(o,o,t),o[3]<0&&(e[a]=1/0);var u=(o[0]/o[3]-s[0]/s[3])*r,c=(o[1]/o[3]-s[1]/s[3])*i;e[a]=.25*Math.sqrt(u*u+c*c)}return e}function p_(e,t,n,r,i){var a=t.model||n$,o=t.view||n$,s=t.projection||n$,l=e.bounds,i=i||TQ(a,o,s,l),u=i.axis;i.edges;PK(r$,o,a),PK(r$,s,r$);for(var c=o$,d=0;d<3;++d)c[d].lo=1/0,c[d].hi=-1/0,c[d].pixelsPerDataUnit=1/0;var f=$Q(yK(r$,r$));yK(r$,r$);for(var h=0;h<3;++h){var p=(h+1)%3,m=(h+2)%3,g=s$;e:for(var d=0;d<2;++d){var y=[];if(u[h]<0!==!!d){g[h]=l[d][h];for(var v=0;v<2;++v){g[p]=l[v^d][p];for(var _=0;_<2;++_)g[m]=l[_^v^d][m],y.push(g.slice())}for(var v=0;v<f.length;++v){if(0===y.length)continue e;y=kQ.positive(y,f[v])}for(var v=0;v<y.length;++v)for(var m=y[v],b=h_(s$,r$,m,n,r),_=0;_<3;++_)c[_].lo=Math.min(c[_].lo,m[_]),c[_].hi=Math.max(c[_].hi,m[_]),_!==h&&(c[_].pixelsPerDataUnit=Math.min(c[_].pixelsPerDataUnit,Math.abs(b[_])))}}}return c}function m_(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}function g_(e,t,n,r){this.gl=e,this.buffer=t,this.vao=n,this.shader=r,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}function y_(e,t){function n(e,t,n,i,a,o){var s=[e,t,n,0,0,0,1];s[i+3]=1,s[i]=a,r.push.apply(r,s),s[6]=-1,r.push.apply(r,s),s[i]=o,r.push.apply(r,s),r.push.apply(r,s),s[6]=1,r.push.apply(r,s),s[i]=a,r.push.apply(r,s)}var r=[];n(0,0,0,0,0,1),n(0,0,0,1,0,1),n(0,0,0,2,0,1),n(1,0,0,1,-1,1),n(1,0,0,2,-1,1),n(0,1,0,0,-1,1),n(0,1,0,2,-1,1),n(0,0,1,0,-1,1),n(0,0,1,1,-1,1);var i=LW(e,r),a=sQ(e,[{type:e.FLOAT,buffer:i,size:3,offset:0,stride:28},{type:e.FLOAT,buffer:i,size:3,offset:12,stride:28},{type:e.FLOAT,buffer:i,size:1,offset:24,stride:28}]),o=p$(e);o.attributes.position.location=0,o.attributes.color.location=1,o.attributes.weight.location=2;var s=new g_(e,i,a,o);return s.update(t),s}function v_(e){return e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"==typeof e&&(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))}function __(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function b_(e,t){var n=null;try{n=e.getContext("webgl",t),n||(n=e.getContext("experimental-webgl",t))}catch(e){return null}return n}function x_(e){var t=Math.round(Math.log(Math.abs(e))/Math.log(10));if(t<0){var n=Math.round(Math.pow(10,-t));return Math.ceil(e*n)/n}if(t>0){var n=Math.round(Math.pow(10,t));return Math.ceil(e/n)*n}return Math.ceil(e)}function w_(e){return"boolean"!==typeof e||e}function k_(e){function t(){if(!s&&P.autoResize){var e=l.parentNode,t=1,n=1;e&&e!==document.body?(t=e.clientWidth,n=e.clientHeight):(t=window.innerWidth,n=window.innerHeight);var r=0|Math.ceil(t*P.pixelRatio),i=0|Math.ceil(n*P.pixelRatio);if(r!==l.width||i!==l.height){l.width=r,l.height=i;var a=l.style;a.position=a.position||"absolute",a.left="0px",a.top="0px",a.width=t+"px",a.height=n+"px",T=!0}}}function n(){for(var e=b.length,t=k.length,n=0;n<t;++n)w[n]=0;e:for(var n=0;n<e;++n){var r=b[n],i=r.pickSlots;if(i){for(var a=0;a<t;++a)if(w[a]+i<255){x[n]=a,r.setPickBase(w[a]+1),w[a]+=i;continue e}var o=oZ(c,E);x[n]=t,k.push(o),w.push(i),r.setPickBase(1),t+=1}else x[n]=-1}for(;t>0&&0===w[t-1];)w.pop(),k.pop().dispose()}function r(){if(P.contextLost)return!0;c.isContextLost()&&(P.contextLost=!0,P.mouseListener.enabled=!1,P.selection.object=null,P.oncontextloss&&P.oncontextloss())}function i(){if(!r()){c.colorMask(!0,!0,!0,!0),c.depthMask(!0),c.disable(c.BLEND),c.enable(c.DEPTH_TEST);for(var e=b.length,t=k.length,n=0;n<t;++n){var i=k[n];i.shape=I,i.begin();for(var a=0;a<e;++a)if(x[a]===n){var o=b[a];o.drawPick&&(o.pixelRatio=1,o.drawPick(S))}i.end()}}}function a(){if(!r()){t();var e=P.camera.tick();S.view=P.camera.matrix,T=T||e,M=M||e,y.pixelRatio=P.pixelRatio,_.pixelRatio=P.pixelRatio;var n=b.length,a=z[0],o=z[1];a[0]=a[1]=a[2]=1/0,o[0]=o[1]=o[2]=-1/0;for(var s=0;s<n;++s){var l=b[s];l.pixelRatio=P.pixelRatio,l.axes=P.axes,T=T||!!l.dirty,M=M||!!l.dirty;var u=l.bounds;if(u)for(var d=u[0],m=u[1],g=0;g<3;++g)a[g]=Math.min(a[g],d[g]),o[g]=Math.max(o[g],m[g])}var v=P.bounds;if(P.autoBounds)for(var g=0;g<3;++g){if(o[g]<a[g])a[g]=-1,o[g]=1;else{a[g]===o[g]&&(a[g]-=1,o[g]+=1);var x=.05*(o[g]-a[g]);a[g]=a[g]-x,o[g]=o[g]+x}v[0][g]=a[g],v[1][g]=o[g]}for(var w=!1,g=0;g<3;++g)w=w||R[0][g]!==v[0][g]||R[1][g]!==v[1][g],R[0][g]=v[0][g],R[1][g]=v[1][g];if(M=M||w,T=T||w){if(w){for(var k=[0,0,0],s=0;s<3;++s)k[s]=x_((v[1][s]-v[0][s])/10);y.autoTicks?y.update({bounds:v,tickSpacing:k}):y.update({bounds:v})}var L=c.drawingBufferWidth,O=c.drawingBufferHeight;E[0]=L,E[1]=O,I[0]=0|Math.max(L/P.pixelRatio,1),I[1]=0|Math.max(O/P.pixelRatio,1),l$(A,P.fovy,L/O,P.zNear,P.zFar);for(var s=0;s<16;++s)C[s]=0;C[15]=1;for(var D=0,s=0;s<3;++s)D=Math.max(D,v[1][s]-v[0][s]);for(var s=0;s<3;++s)P.autoScale?C[5*s]=P.aspect[s]/(v[1][s]-v[0][s]):C[5*s]=1/D,P.autoCenter&&(C[12+s]=.5*-C[5*s]*(v[0][s]+v[1][s]));for(var s=0;s<n;++s){var l=b[s];l.axesBounds=v,P.clipToBounds&&(l.clipBounds=v)}f.object&&(P.snapToData?_.position=f.dataCoordinate:_.position=f.dataPosition,_.bounds=v),M&&(M=!1,i()),P.axesPixels=t$(P.axes,S,L,O),P.onrender&&P.onrender(),c.bindFramebuffer(c.FRAMEBUFFER,null),c.viewport(0,0,L,O);var N=P.clearColor;c.clearColor(N[0],N[1],N[2],N[3]),c.clear(c.COLOR_BUFFER_BIT|c.DEPTH_BUFFER_BIT),c.depthMask(!0),c.colorMask(!0,!0,!0,!0),c.enable(c.DEPTH_TEST),c.depthFunc(c.LEQUAL),c.disable(c.BLEND),c.disable(c.CULL_FACE);var F=!1;y.enable&&(F=F||y.isTransparent(),y.draw(S)),_.axes=y,f.object&&_.draw(S),c.disable(c.CULL_FACE);for(var s=0;s<n;++s){var l=b[s];l.axes=y,l.pixelRatio=P.pixelRatio,l.isOpaque&&l.isOpaque()&&l.draw(S),l.isTransparent&&l.isTransparent()&&(F=!0)}if(F){h.shape=E,h.bind(),c.clear(c.DEPTH_BUFFER_BIT),c.colorMask(!1,!1,!1,!1),c.depthMask(!0),c.depthFunc(c.LESS),y.enable&&y.isTransparent()&&y.drawTransparent(S);for(var s=0;s<n;++s){var l=b[s];l.isOpaque&&l.isOpaque()&&l.draw(S)}c.enable(c.BLEND),c.blendEquation(c.FUNC_ADD),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),c.colorMask(!0,!0,!0,!0),c.depthMask(!1),c.clearColor(0,0,0,0),c.clear(c.COLOR_BUFFER_BIT),y.isTransparent()&&y.drawTransparent(S);for(var s=0;s<n;++s){var l=b[s];l.isTransparent&&l.isTransparent()&&l.drawTransparent(S)}c.bindFramebuffer(c.FRAMEBUFFER,null),c.blendFunc(c.ONE,c.ONE_MINUS_SRC_ALPHA),c.disable(c.DEPTH_TEST),p.bind(),h.color[0].bind(0),p.uniforms.accumBuffer=0,dQ(c),c.disable(c.BLEND)}T=!1;for(var s=0;s<n;++s)b[s].dirty=!1}}}function o(){s||P.contextLost||(requestAnimationFrame(o),a())}e=e||{};var s=!1,l=(e.pixelRatio||parseFloat(window.devicePixelRatio),e.canvas);if(!l)if(l=document.createElement("canvas"),e.container){var u=e.container;u.appendChild(l)}else document.body.appendChild(l);var c=e.gl;if(c||(c=b_(l,e.glOptions||{premultipliedAlpha:!0,antialias:!0})),!c)throw new Error("webgl not supported");var d=e.bounds||[[-10,-10,-10],[10,10,10]],f=new __,h=rZ(c,[c.drawingBufferWidth,c.drawingBufferHeight],{preferFloat:!k$}),p=d$(c),m=e.camera||{eye:[2,0,0],center:[0,0,0],up:[0,1,0],zoomMin:.1,zoomMax:100,mode:"turntable"},g=e.axes||{},y=WQ(c,g);y.enable=!g.disable;var v=e.spikes||{},_=m$(c,v),b=[],x=[],w=[],k=[],T=!0,M=!0,A=new Array(16),C=new Array(16),S={view:null,projection:A,model:C},M=!0,E=[c.drawingBufferWidth,c.drawingBufferHeight],P={gl:c,contextLost:!1,pixelRatio:e.pixelRatio||parseFloat(window.devicePixelRatio),canvas:l,selection:f,camera:rQ(l,m),axes:y,axesPixels:null,spikes:_,bounds:d,objects:b,shape:E,aspect:e.aspectRatio||[1,1,1],pickRadius:e.pickRadius||10,zNear:e.zNear||.01,zFar:e.zFar||1e3,fovy:e.fovy||Math.PI/4,clearColor:e.clearColor||[0,0,0,0],autoResize:w_(e.autoResize),autoBounds:w_(e.autoBounds),autoScale:!!e.autoScale,autoCenter:w_(e.autoCenter),clipToBounds:w_(e.clipToBounds),snapToData:!!e.snapToData,onselect:e.onselect||null,onrender:e.onrender||null,onclick:e.onclick||null,cameraParams:S,oncontextloss:null,mouseListener:null},I=[c.drawingBufferWidth/P.pixelRatio|0,c.drawingBufferHeight/P.pixelRatio|0];P.autoResize&&t(),window.addEventListener("resize",t),P.update=function(e){s||(e=e||{},T=!0,M=!0)},P.add=function(e){s||(e.axes=y,b.push(e),x.push(-1),T=!0,M=!0,n())},P.remove=function(e){if(!s){var t=b.indexOf(e);t<0||(b.splice(t,1),x.pop(),T=!0,M=!0,n())}},P.dispose=function(){if(!s&&(s=!0,window.removeEventListener("resize",t),l.removeEventListener("webglcontextlost",r),P.mouseListener.enabled=!1,!P.contextLost)){y.dispose(),_.dispose();for(var e=0;e<b.length;++e)b[e].dispose();h.dispose();for(var e=0;e<k.length;++e)k[e].dispose();p.dispose(),c=null,y=null,_=null,b=[]}};var L=!1,O=0;P.mouseListener=MZ(l,function(e,t,n){if(!s){var r=k.length,i=b.length,a=f.object;f.distance=1/0,f.mouse[0]=t,f.mouse[1]=n,f.object=null,f.screen=null,f.dataCoordinate=f.dataPosition=null;var o=!1;if(e&&O)L=!0;else{L&&(M=!0),L=!1;for(var l=0;l<r;++l){var u=k[l].query(t,I[1]-n-1,P.pickRadius);if(u){if(u.distance>f.distance)continue;for(var c=0;c<i;++c){var d=b[c];if(x[c]===l){var h=d.pick(u);h&&(f.buttons=e,f.screen=u.coord,f.distance=u.distance,f.object=d,f.index=h.distance,f.dataPosition=h.position,f.dataCoordinate=h.dataCoordinate,f.data=h,o=!0)}}}}}a&&a!==f.object&&(a.highlight&&a.highlight(null),T=!0),f.object&&(f.object.highlight&&f.object.highlight(f.data),T=!0),o=o||f.object!==a,o&&P.onselect&&P.onselect(f),1&e&&!(1&O)&&P.onclick&&P.onclick(f),O=e}}),l.addEventListener("webglcontextlost",r);var z=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],R=[z[0].slice(),z[1].slice()];return o(),P.redraw=function(){s||(T=!0,a())},P}function T_(e,t){function n(t,n,r,a){var s=u.keyBindingMode;if(!1!==s){var l="rotate"===s,h="pan"===s,p="zoom"===s,m=!!a.control,g=!!a.alt,y=!!a.shift,v=!!(1&t),_=!!(2&t),b=!!(4&t),x=1/e.clientHeight,w=x*(n-c),k=x*(r-d),T=u.flipX?1:-1,M=u.flipY?1:-1,A=nQ(),C=Math.PI*u.rotateSpeed;if((l&&v&&!m&&!g&&!y||v&&!m&&!g&&y)&&i.rotate(A,T*C*w,-M*C*k,0),(h&&v&&!m&&!g&&!y||_||v&&m&&!g&&!y)&&i.pan(A,-u.translateSpeed*w*o,u.translateSpeed*k*o,0),p&&v&&!m&&!g&&!y||b||v&&!m&&g&&!y){var S=-u.zoomSpeed*k/window.innerHeight*(A-i.lastT())*100;i.pan(A,0,0,o*(Math.exp(S)-1))}return c=n,d=r,f=a,!0}}e=e||document.body,t=t||{};var r=[.01,1/0];"distanceLimits"in t&&(r[0]=t.distanceLimits[0],r[1]=t.distanceLimits[1]),"zoomMin"in t&&(r[0]=t.zoomMin),"zoomMax"in t&&(r[1]=t.zoomMax);var i=eQ({center:t.center||[0,0,0],up:t.up||[0,1,0],eye:t.eye||[0,0,10],mode:t.mode||"orbit",distanceLimits:r}),a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],o=0,s=e.clientWidth,l=e.clientHeight,u={keyBindingMode:"rotate",view:i,element:e,delay:t.delay||16,rotateSpeed:t.rotateSpeed||1,zoomSpeed:t.zoomSpeed||1,translateSpeed:t.translateSpeed||1,flipX:!!t.flipX,flipY:!!t.flipY,modes:i.modes,tick:function(){var t=nQ(),n=this.delay,r=t-2*n;i.idle(t-n),i.recalcMatrix(r),i.flush(t-(100+2*n));for(var u=!0,c=i.computedMatrix,d=0;d<16;++d)u=u&&a[d]===c[d],a[d]=c[d];var f=e.clientWidth===s&&e.clientHeight===l;return s=e.clientWidth,l=e.clientHeight,u?!f:(o=Math.exp(i.computedRadius[0]),!0)},lookAt:function(e,t,n){i.lookAt(i.lastT(),e,t,n)},rotate:function(e,t,n){i.rotate(i.lastT(),e,t,n)},pan:function(e,t,n){i.pan(i.lastT(),e,t,n)},translate:function(e,t,n){i.translate(i.lastT(),e,t,n)}};Object.defineProperties(u,{matrix:{get:function(){return i.computedMatrix},set:function(e){return i.setMatrix(i.lastT(),e),i.computedMatrix},enumerable:!0},mode:{get:function(){return i.getMode()},set:function(e){var t=i.computedUp.slice(),n=i.computedEye.slice(),r=i.computedCenter.slice();if(i.setMode(e),"turntable"===e){var a=nQ();i._active.lookAt(a,n,r,t),i._active.lookAt(a+500,n,r,[0,0,1]),i._active.flush(a)}return i.getMode()},enumerable:!0},center:{get:function(){return i.computedCenter},set:function(e){return i.lookAt(i.lastT(),null,e),i.computedCenter},enumerable:!0},eye:{get:function(){return i.computedEye},set:function(e){return i.lookAt(i.lastT(),e),i.computedEye},enumerable:!0},up:{get:function(){return i.computedUp},set:function(e){return i.lookAt(i.lastT(),null,null,e),i.computedUp},enumerable:!0},distance:{get:function(){return o},set:function(e){return i.setDistance(i.lastT(),e),e},enumerable:!0},distanceLimits:{get:function(){return i.getDistanceLimits(r)},set:function(e){return i.setDistanceLimits(e),e},enumerable:!0}}),e.addEventListener("contextmenu",function(e){return e.preventDefault(),!1});var c=0,d=0,f={shift:!1,control:!1,alt:!1,meta:!1};return u.mouseListener=MZ(e,n),e.addEventListener("touchstart",function(t){var r=VL(t.changedTouches[0],e);n(0,r[0],r[1],f),n(1,r[0],r[1],f),t.preventDefault()},!!BL&&{passive:!1}),e.addEventListener("touchmove",function(t){var r=VL(t.changedTouches[0],e);n(1,r[0],r[1],f),t.preventDefault()},!!BL&&{passive:!1}),e.addEventListener("touchend",function(e){n(0,c,d,f),e.preventDefault()},!!BL&&{passive:!1}),u.wheelListener=EZ(e,function(e,t){if(!1!==u.keyBindingMode){var n=u.flipX?1:-1,r=u.flipY?1:-1,a=nQ();if(Math.abs(e)>Math.abs(t))i.rotate(a,0,0,-e*n*Math.PI*u.rotateSpeed/window.innerWidth);else{var s=-u.zoomSpeed*r*t/window.innerHeight*(a-i.lastT())/20;i.pan(a,0,0,o*(Math.exp(s)-1))}}},!0),u}function M_(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}function A_(e){var t=new M_;return t.merge(e),t}function C_(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}function S_(e){var t=new C_;return t.merge(e),t}function E_(e){for(var t=new Array(3),n=0;n<3;++n){for(var r=e[n],i=new Array(r.length),a=0;a<r.length;++a)i[a]=r[a].x;t[n]=i}return t}function P_(e){for(var t=e.axesOptions,n=e.glplot.axesPixels,r=e.fullSceneLayout,i=[[],[],[]],a=0;a<3;++a){var o=r[L$[a]];if(o._length=(n[a].hi-n[a].lo)*n[a].pixelsPerDataUnit/e.dataScale[a],Math.abs(o._length)===1/0)i[a]=[];else{o._input_range=o.range.slice(),o.range[0]=n[a].lo/e.dataScale[a],o.range[1]=n[a].hi/e.dataScale[a],o._m=1/(e.dataScale[a]*n[a].pixelsPerDataUnit),o.range[0]===o.range[1]&&(o.range[0]-=1,o.range[1]+=1);var s=o.tickmode;if("auto"===o.tickmode){o.tickmode="linear";var l=o.nticks||uE.constrain(o._length/40,4,9);PI.autoTicks(o,Math.abs(o.range[1]-o.range[0])/l)}for(var u=PI.calcTicks(o),c=0;c<u.length;++c)u[c].x=u[c].x*e.dataScale[a],u[c].text=xZ(u[c].text);i[a]=u,o.tickmode=s}}t.ticks=i;for(var a=0;a<3;++a){O$[a]=.5*(e.glplot.bounds[0][a]+e.glplot.bounds[1][a]);for(var c=0;c<2;++c)t.bounds[c][a]=e.glplot.bounds[c][a]}e.contourLevels=E_(i)}function I_(e){function t(t,n){var r=e.fullSceneLayout[t];return PI.tickText(r,r.d2l(n),"hover").text}var n,r=e.svgContainer,i=e.container.getBoundingClientRect(),a=i.width,o=i.height;r.setAttributeNS(null,"viewBox","0 0 "+a+" "+o),r.setAttributeNS(null,"width",a),r.setAttributeNS(null,"height",o),I$(e),e.glplot.axes.update(e.axesOptions);for(var s=Object.keys(e.traces),l=null,u=e.glplot.selection,c=0;c<s.length;++c)n=e.traces[s[c]],"skip"!==n.data.hoverinfo&&n.handlePick(u)&&(l=n),n.setContourLevels&&n.setContourLevels();var d;if(null!==l){var f=Uj(e.glplot.cameraParams,u.dataCoordinate);n=l.data;var h=u.index,p=kO.castHoverinfo(n,e.fullLayout,h),m=t("xaxis",u.traceCoordinate[0]),g=t("yaxis",u.traceCoordinate[1]),y=t("zaxis",u.traceCoordinate[2]);if("all"!==p){var v=p.split("+");-1===v.indexOf("x")&&(m=void 0),-1===v.indexOf("y")&&(g=void 0),-1===v.indexOf("z")&&(y=void 0),-1===v.indexOf("text")&&(u.textLabel=void 0),-1===v.indexOf("name")&&(l.name=void 0)}e.fullSceneLayout.hovermode&&kO.loneHover({x:(.5+.5*f[0]/f[3])*a,y:(.5-.5*f[1]/f[3])*o,xLabel:m,yLabel:g,zLabel:y,text:u.textLabel,name:l.name,color:kO.castHoverOption(n,h,"bgcolor")||l.color,borderColor:kO.castHoverOption(n,h,"bordercolor"),fontFamily:kO.castHoverOption(n,h,"font.family"),fontSize:kO.castHoverOption(n,h,"font.size"),fontColor:kO.castHoverOption(n,h,"font.color")},{container:r,gd:e.graphDiv});var _={x:u.traceCoordinate[0],y:u.traceCoordinate[1],z:u.traceCoordinate[2],data:n._input,fullData:n,curveNumber:n.index,pointNumber:h};kO.appendArrayPointValue(_,n,h);var b={points:[_]};u.buttons&&u.distance<5?e.graphDiv.emit("plotly_click",b):e.graphDiv.emit("plotly_hover",b),d=b}else kO.loneUnhover(r),e.graphDiv.emit("plotly_unhover",d);e.drawAnnotations(e)}function L_(e,t,n,r){var i={canvas:n,gl:r,container:e.container,axes:e.axesOptions,spikes:e.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1};if(e.staticMode){if(!E$&&(S$=document.createElement("canvas"),!(E$=vZ({canvas:S$,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");i.pixelRatio=e.pixelRatio,i.gl=E$,i.canvas=S$}try{e.glplot=w$(i)}catch(t){kZ(e)}var a=function(e){if(!1!==e.fullSceneLayout.dragmode){var t={};t[e.id+".camera"]=N_(e.camera),e.saveCamera(e.graphDiv.layout),e.graphDiv.emit("plotly_relayout",t)}};if(e.glplot.canvas.addEventListener("mouseup",a.bind(null,e)),e.glplot.canvas.addEventListener("wheel",a.bind(null,e),!!BL&&{passive:!1}),e.staticMode||e.glplot.canvas.addEventListener("webglcontextlost",function(e){uE.warn("Lost WebGL context."),e.preventDefault()}),!e.camera){var o=e.fullSceneLayout.camera;e.camera=T$(e.container,{center:[o.center.x,o.center.y,o.center.z],eye:[o.eye.x,o.eye.y,o.eye.z],up:[o.up.x,o.up.y,o.up.z],zoomMin:.1,zoomMax:100,mode:"orbit"})}return e.glplot.camera=e.camera,e.glplot.oncontextloss=function(){e.recoverContext()},e.glplot.onrender=I_.bind(null,e),e.traces={},!0}function O_(e,t){var n=document.createElement("div"),r=e.container;this.graphDiv=e.graphDiv;var i=document.createElementNS("http://www.w3.org/2000/svg","svg");i.style.position="absolute",i.style.top=i.style.left="0px",i.style.width=i.style.height="100%",i.style["z-index"]=20,i.style["pointer-events"]="none",n.appendChild(i),this.svgContainer=i,n.id=e.id,n.style.position="absolute",n.style.top=n.style.left="0px",n.style.width=n.style.height="100%",r.appendChild(n),this.fullLayout=t,this.id=e.id||"scene",this.fullSceneLayout=t[this.id],this.plotArgs=[[],{},{}],this.axesOptions=A$(t[this.id]),this.spikeOptions=P$(t[this.id]),this.container=n,this.staticMode=!!e.staticPlot,this.pixelRatio=e.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=rS.getComponentMethod("annotations3d","convert"),this.drawAnnotations=rS.getComponentMethod("annotations3d","draw"),L_(this,t)}function z_(e,t,n,r,i,a){var o;if(!uE.isArrayOrTypedArray(t))return i[0][r]=Math.min(i[0][r],0),void(i[1][r]=Math.max(i[1][r],n-1));for(var s=0;s<(n||t.length);++s)if(uE.isArrayOrTypedArray(t[s]))for(var l=0;l<t[s].length;++l)o=e.d2l(t[s][l],0,a),!isNaN(o)&&isFinite(o)&&(i[0][r]=Math.min(i[0][r],o),i[1][r]=Math.max(i[1][r],o));else o=e.d2l(t[s],0,a),!isNaN(o)&&isFinite(o)&&(i[0][r]=Math.min(i[0][r],o),i[1][r]=Math.max(i[1][r],o))}function R_(e,t,n){var r=e.fullSceneLayout;z_(r.xaxis,t.x,t._xlength,0,n,t.xcalendar),z_(r.yaxis,t.y,t._ylength,1,n,t.ycalendar),z_(r.zaxis,t.z,t._zlength,2,n,t.zcalendar)}function D_(e){return[[e.eye.x,e.eye.y,e.eye.z],[e.center.x,e.center.y,e.center.z],[e.up.x,e.up.y,e.up.z]]}function N_(e){return{up:{x:e.up[0],y:e.up[1],z:e.up[2]},center:{x:e.center[0],y:e.center[1],z:e.center[2]},eye:{x:e.eye[0],y:e.eye[1],z:e.eye[2]}}}function F_(e){return{valType:"boolean",dflt:!1}}function j_(e){return{show:{valType:"boolean",dflt:!1},project:{x:F_("x"),y:F_("y"),z:F_("z")},color:{valType:"color",dflt:jE.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:jE.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}function B_(e){for(var t=e.length,n=e[e.length-1],r=t,i=t-2;i>=0;--i){var a=n,o=e[i];n=a+o;var s=n-a,l=o-s;l&&(e[--r]=n,n=l)}for(var u=0,i=r;i<t;++i){var a=e[i],o=n;n=a+o;var s=n-a,l=o-s;l&&(e[u++]=l)}return e[u++]=n,e.length=u,e}function U_(e,t){for(var n=new Array(e.length-1),r=1;r<e.length;++r)for(var i=n[r-1]=new Array(e.length-1),a=0,o=0;a<e.length;++a)a!==t&&(i[o++]=e[r][a]);return n}function V_(e){for(var t=new Array(e),n=0;n<e;++n){t[n]=new Array(e);for(var r=0;r<e;++r)t[n][r]=["m[",n,"][",r,"]"].join("")}return t}function H_(e){return 1&e?"-":""}function W_(e){if(1===e.length)return e[0];if(2===e.length)return["sum(",e[0],",",e[1],")"].join("");var t=e.length>>1;return["sum(",W_(e.slice(0,t)),",",W_(e.slice(t)),")"].join("")}function q_(e){if(2===e.length)return["sum(prod(",e[0][0],",",e[1][1],"),prod(-",e[0][1],",",e[1][0],"))"].join("");for(var t=[],n=0;n<e.length;++n)t.push(["scale(",q_(U_(e,n)),",",H_(n),e[0][n],")"].join(""));return W_(t)}function G_(e){return new Function("sum","scale","prod","compress",["function robustDeterminant",e,"(m){return compress(",q_(V_(e)),")};return robustDeterminant",e].join(""))(Yq,qq,Vq,X$)}function Y_(e){for(var t="robustLinearSolve"+e+"d",n=["function ",t,"(A,b){return ["],r=0;r<e;++r){n.push("det([");for(var i=0;i<e;++i){i>0&&n.push(","),n.push("[");for(var a=0;a<e;++a)a>0&&n.push(","),a===r?n.push("+b[",i,"]"):n.push("+A[",i,"][",a,"]");n.push("]")}n.push("]),")}n.push("det(A)]}return ",t);var o=new Function("det",n.join(""));return o(e<6?Z$[e]:Z$)}function X_(){return[0]}function Z_(e,t){return[[t[0]],[e[0][0]]]}function J_(e,t){for(var n=0,r=e.length,i=0;i<r;++i)n+=e[i]*t[i];return n}function K_(e){var t=e.length;if(0===t)return[];var n=(e[0].length,SW([e.length+1,e.length+1],1)),r=SW([e.length+1],1);n[t][t]=0;for(var i=0;i<t;++i){for(var a=0;a<=i;++a)n[a][i]=n[i][a]=2*J_(e[i],e[a]);r[i]=J_(e[i],e[i])}for(var o=Q$(n,r),s=0,l=o[t+1],i=0;i<l.length;++i)s+=l[i];for(var u=new Array(t),i=0;i<t;++i){for(var l=o[i],c=0,a=0;a<l.length;++a)c+=l[a];u[i]=c/s}return u}function Q_(e){if(0===e.length)return[];for(var t=e[0].length,n=SW([t]),r=K_(e),i=0;i<e.length;++i)for(var a=0;a<t;++a)n[a]+=e[i][a]*r[i];return n}function $_(e){for(var t=t0(e),n=0,r=0;r<e.length;++r)for(var i=e[r],a=0;a<t.length;++a)n+=Math.pow(i[a]-t[a],2);return Math.sqrt(n/e.length)}function eb(e,t,n){this.vertices=e,this.adjacent=t,this.boundary=n,this.lastVisited=-1}function tb(e,t,n){this.vertices=e,this.cell=t,this.index=n}function nb(e,t){return i0(e.vertices,t.vertices)}function rb(e){for(var t=["function orient(){var tuple=this.tuple;return test("],n=0;n<=e;++n)n>0&&t.push(","),t.push("tuple[",n,"]");t.push(")}return orient");var r=new Function("test",t.join("")),i=eG[e+1];return i||(i=eG),r(i)}function ib(e,t,n){this.dimension=e,this.vertices=t,this.simplices=n,this.interior=n.filter(function(e){return!e.boundary}),this.tuple=new Array(e+1);for(var r=0;r<=e;++r)this.tuple[r]=this.vertices[r];var i=a0[e];i||(i=a0[e]=rb(e)),this.orient=i}function ab(e,t){var n=e.length;if(0===n)throw new Error("Must have at least d+1 points");var r=e[0].length;if(n<=r)throw new Error("Must input at least d+1 points");var i=e.slice(0,r+1),a=eG.apply(void 0,i);if(0===a)throw new Error("Input not in general position");for(var o=new Array(r+1),s=0;s<=r;++s)o[s]=s;a<0&&(o[0]=1,o[1]=0);for(var l=new eb(o,new Array(r+1),!1),u=l.adjacent,c=new Array(r+2),s=0;s<=r;++s){for(var d=o.slice(),f=0;f<=r;++f)f===s&&(d[f]=-1);var h=d[0];d[0]=d[1],d[1]=h;var p=new eb(d,new Array(r+1),!0);u[s]=p,c[s]=p}c[r+1]=l;for(var s=0;s<=r;++s)for(var d=u[s].vertices,m=u[s].adjacent,f=0;f<=r;++f){var g=d[f];if(g<0)m[f]=l;else for(var y=0;y<=r;++y)u[y].vertices.indexOf(g)<0&&(m[f]=u[y])}for(var v=new ib(r,i,c),_=!!t,s=r+1;s<n;++s)v.insert(e[s],_);return v.boundary()}function ob(e,t){this.point=e,this.index=t}function sb(e,t){for(var n=e.point,r=t.point,i=n.length,a=0;a<i;++a){var o=r[a]-n[a];if(o)return o}return 0}function lb(e,t,n){if(1===e)return n?[[-1,0]]:[];var r=t.map(function(e,t){return[e[0],t]});r.sort(function(e,t){return e[0]-t[0]});for(var i=new Array(e-1),a=1;a<e;++a){var o=r[a-1],s=r[a];i[a-1]=[o[1],s[1]]}return n&&i.push([-1,i[0][1]],[i[e-1][1],-1]),i}function ub(e,t){var n=e.length;if(0===n)return[];var r=e[0].length;if(r<1)return[];if(1===r)return lb(n,e,t);for(var i=new Array(n),a=1,o=0;o<n;++o){for(var s=e[o],l=new Array(r+1),u=0,c=0;c<r;++c){var d=s[c];l[c]=d,u+=d*d}l[r]=u,i[o]=new ob(l,o),a=Math.max(u,a)}KH(i,sb),n=i.length;for(var f=new Array(n+r+1),h=new Array(n+r+1),p=(r+1)*(r+1)*a,m=new Array(r+1),o=0;o<=r;++o)m[o]=0;m[r]=p,f[0]=m.slice(),h[0]=-1;for(var o=0;o<=r;++o){var l=m.slice();l[o]=1,f[o+1]=l,h[o+1]=-1}for(var o=0;o<n;++o){var g=i[o];f[o+r+1]=g.point,h[o+r+1]=g.index}var y=r0(f,!1);if(y=t?y.filter(function(e){for(var t=0,n=0;n<=r;++n){var i=h[e[n]];if(i<0&&++t>=2)return!1;e[n]=i}return!0}):y.filter(function(e){for(var t=0;t<=r;++t){var n=h[e[t]];if(n<0)return!1;e[t]=n}return!0}),1&r)for(var o=0;o<y.length;++o){var g=y[o],l=g[0];g[0]=g[1],g[1]=l}return y}function cb(e,t){return s0(t).filter(function(n){for(var r=new Array(n.length),i=0;i<n.length;++i)r[i]=t[n[i]];return n0(r)*e<1})}function db(e){var t,n,r,i=e.length,a=0;for(t=0;t<i;++t)a+=e[t].length;var o=new Array(a),s=0;for(t=0;t<i;++t){var l=e[t],u=l.length;for(n=0;n<u;++n){var c=o[s++]=new Array(u-1),d=0;for(r=0;r<u;++r)r!==n&&(c[d++]=l[r]);if(1&n){var f=c[1];c[1]=c[0],c[0]=f}}}return o}function fb(e){for(var t=1,n=1;n<e.length;++n)for(var r=0;r<n;++r)if(e[n]<e[r])t=-t;else if(e[r]===e[n])return 0;return t}function hb(e,t){return e-t}function pb(e,t){var n=e.length,r=e.length-t.length;if(r)return r;switch(n){case 0:return 0;case 1:return e[0]-t[0];case 2:return e[0]+e[1]-t[0]-t[1]||f0(e[0],e[1])-f0(t[0],t[1]);case 3:var i=e[0]+e[1],a=t[0]+t[1];if(r=i+e[2]-(a+t[2]))return r;var o=f0(e[0],e[1]),s=f0(t[0],t[1]);return f0(o,e[2])-f0(s,t[2])||f0(o+e[2],i)-f0(s+t[2],a);case 4:var l=e[0],u=e[1],c=e[2],d=e[3],f=t[0],h=t[1],p=t[2],m=t[3];return l+u+c+d-(f+h+p+m)||f0(l,u,c,d)-f0(f,h,p,m,f)||f0(l+u,l+c,l+d,u+c,u+d,c+d)-f0(f+h,f+p,f+m,h+p,h+m,p+m)||f0(l+u+c,l+u+d,l+c+d,u+c+d)-f0(f+h+p,f+h+m,f+p+m,h+p+m);default:for(var g=e.slice().sort(hb),y=t.slice().sort(hb),v=0;v<n;++v)if(r=g[v]-y[v])return r;return 0}}function mb(e,t){return d0(e,t)||c0(e)-c0(t)}function gb(e){e.sort(h0);for(var t=e.length,n=0,r=0;r<t;++r){var i=e[r],a=c0(i);if(0!==a){if(n>0){var o=e[n-1];if(0===d0(i,o)&&c0(o)!==a){n-=1;continue}}e[n++]=i}}return e.length=n,e}function yb(e){return p0(u0(e))}function vb(e,t){return m0(l0(e,t))}function _b(e){for(var t=0,n=0,r=1;r<e.length;++r)e[r][0]<e[t][0]&&(t=r),e[r][0]>e[n][0]&&(n=r);return t<n?[[t],[n]]:t>n?[[n],[t]]:[[t]]}function bb(e){var t=e.length;if(t<3){for(var n=new Array(t),r=0;r<t;++r)n[r]=r;return 2===t&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]?[0]:n}for(var i=new Array(t),r=0;r<t;++r)i[r]=r;i.sort(function(t,n){var r=e[t][0]-e[n][0];return r||e[t][1]-e[n][1]});for(var a=[i[0],i[1]],o=[i[0],i[1]],r=2;r<t;++r){for(var s=i[r],l=e[s],u=a.length;u>1&&_0(e[a[u-2]],e[a[u-1]],l)<=0;)u-=1,a.pop();for(a.push(s),u=o.length;u>1&&_0(e[o[u-2]],e[o[u-1]],l)>=0;)u-=1,o.pop();o.push(s)}for(var n=new Array(o.length+a.length-2),c=0,r=0,d=a.length;r<d;++r)n[c++]=a[r];for(var f=o.length-2;f>0;--f)n[c++]=o[f];return n}function xb(e){var t=v0(e),n=t.length;if(n<=2)return[];for(var r=new Array(n),i=t[n-1],a=0;a<n;++a){var o=t[a];r[a]=[i,o],i=o}return r}function wb(e,t){for(var n=new Array(t+1),r=0;r<e.length;++r)n[r]=e[r];for(var r=0;r<=e.length;++r){for(var i=e.length;i<=t;++i){for(var a=new Array(t),o=0;o<t;++o)a[o]=Math.pow(i+1-r,o);n[i]=a}if(eG.apply(void 0,n))return!0}return!1}function kb(e){var t=e.length;if(0===t)return[];if(1===t)return[0];for(var n=e[0].length,r=[e[0]],i=[0],a=1;a<t;++a)if(r.push(e[a]),wb(r,n)){if(i.push(a),i.length===n+1)return i}else r.pop();return i}function Tb(e,t){for(var n=e.length,r=new Array(n),i=0;i<t.length;++i)r[i]=e[t[i]];for(var a=t.length,i=0;i<n;++i)t.indexOf(i)<0&&(r[a++]=e[i]);return r}function Mb(e,t){for(var n=e.length,r=t.length,i=0;i<n;++i)for(var a=e[i],o=0;o<a.length;++o){var s=a[o];if(s<r)a[o]=t[s];else{s-=r;for(var l=0;l<r;++l)s>=t[l]&&(s+=1);a[o]=s}}return e}function Ab(e,t){try{return r0(e,!0)}catch(a){var n=x0(e);if(n.length<=t)return[];var r=Tb(e,n),i=r0(r,!0);return Mb(i,n)}}function Cb(e){var t=e.length;if(0===t)return[];if(1===t)return[[0]];var n=e[0].length;return 0===n?[]:1===n?y0(e):2===n?b0(e):w0(e,n)}function Sb(e,t,n){return e*(1-n)+t*n}function Eb(e){var t,n,r,i,a,o,s,l,u,c,d;if(e||(e={}),l=(e.nshades||72)-1,s=e.format||"hex",o=e.colormap,o||(o="jet"),"string"===typeof o){if(o=o.toLowerCase(),!T0[o])throw Error(o+" not a supported colorscale");a=T0[o]}else{if(!Array.isArray(o))throw Error("unsupported colormap option",o);a=o.slice()}if(a.length>l)throw new Error(o+" map requires nshades to be at least size "+a.length);c=Array.isArray(e.alpha)?2!==e.alpha.length?[1,1]:e.alpha.slice():"number"===typeof e.alpha?[e.alpha,e.alpha]:[1,1],t=a.map(function(e){return Math.round(e.index*l)}),c[0]=Math.min(Math.max(c[0],0),1),c[1]=Math.min(Math.max(c[1],0),1);var f=a.map(function(e,t){var n=a[t].index,r=a[t].rgb.slice();return 4===r.length&&r[3]>=0&&r[3]<=1?r:(r[3]=c[0]+(c[1]-c[0])*n,r)}),u=[];for(d=0;d<t.length-1;++d){i=t[d+1]-t[d],n=f[d],r=f[d+1];for(var h=0;h<i;h++){var p=h/i;u.push([Math.round(M0(n[0],r[0],p)),Math.round(M0(n[1],r[1],p)),Math.round(M0(n[2],r[2],p)),M0(n[3],r[3],p)])}}return u.push(a[a.length-1].rgb.concat(c[1])),"hex"===s?u=u.map(Ib):"rgbaString"===s?u=u.map(Lb):"float"===s&&(u=u.map(Pb)),u}function Pb(e){return[e[0]/255,e[1]/255,e[2]/255,e[3]]}function Ib(e){for(var t,n="#",r=0;r<3;++r)t=e[r],t=t.toString(16),n+=("00"+t).substr(t.length);return n}function Lb(e){return"rgba("+e.join(",")+")"}function Ob(e){for(var t=0,n=0;n<e.length;++n)t+=e[n];return t}function zb(e,t){for(var n=t.length,r=new Array(n+1),i=0;i<n;++i){for(var a=new Array(n+1),o=0;o<=n;++o)a[o]=e[o][i];r[i]=a}r[n]=new Array(n+1);for(var i=0;i<=n;++i)r[n][i]=1;for(var s=new Array(n+1),i=0;i<n;++i)s[i]=t[i];s[n]=1;var l=Q$(r,s),u=Ob(l[n+1]);0===u&&(u=1);for(var c=new Array(n+1),i=0;i<=n;++i)c[i]=Ob(l[i])/u;return c}function Rb(e,t,n,r,i){S0.length<r.length&&(S0=new Float64Array(r.length),E0=new Float64Array(r.length),P0=new Float64Array(r.length));for(var a=0;a<r.length;++a)S0[a]=e[a]-r[a],E0[a]=t[a]-e[a],P0[a]=n[a]-e[a];for(var o=0,s=0,l=0,u=0,c=0,d=0,a=0;a<r.length;++a){var f=E0[a],h=P0[a],p=S0[a];o+=f*f,s+=f*h,l+=h*h,u+=p*f,c+=p*h,d+=p*p}var m,g=Math.abs(o*l-s*s),y=s*c-l*u,v=s*u-o*c;if(y+v<=g)if(y<0)v<0&&u<0?(v=0,-u>=o?(y=1,m=o+2*u+d):(y=-u/o,m=u*y+d)):(y=0,c>=0?(v=0,m=d):-c>=l?(v=1,m=l+2*c+d):(v=-c/l,m=c*v+d));else if(v<0)v=0,u>=0?(y=0,m=d):-u>=o?(y=1,m=o+2*u+d):(y=-u/o,m=u*y+d);else{var _=1/g;y*=_,v*=_,m=y*(o*y+s*v+2*u)+v*(s*y+l*v+2*c)+d}else{var b,x,w,k;y<0?(b=s+u,x=l+c,x>b?(w=x-b,k=o-2*s+l,w>=k?(y=1,v=0,m=o+2*u+d):(y=w/k,v=1-y,m=y*(o*y+s*v+2*u)+v*(s*y+l*v+2*c)+d)):(y=0,x<=0?(v=1,m=l+2*c+d):c>=0?(v=0,m=d):(v=-c/l,m=c*v+d))):v<0?(b=s+c,x=o+u,x>b?(w=x-b,k=o-2*s+l,w>=k?(v=1,y=0,m=l+2*c+d):(v=w/k,y=1-v,m=y*(o*y+s*v+2*u)+v*(s*y+l*v+2*c)+d)):(v=0,x<=0?(y=1,m=o+2*u+d):u>=0?(y=0,m=d):(y=-u/o,m=u*y+d))):(w=l+c-s-u,w<=0?(y=0,v=1,m=l+2*c+d):(k=o-2*s+l,w>=k?(y=1,v=0,m=o+2*u+d):(y=w/k,v=1-y,m=y*(o*y+s*v+2*u)+v*(s*y+l*v+2*c)+d)))}for(var T=1-y-v,a=0;a<r.length;++a)i[a]=T*e[a]+y*t[a]+v*n[a];return m<0?0:m}function Db(e,t){for(var n=[0,0,0,0],r=0;r<4;++r)for(var i=0;i<4;++i)n[i]+=e[4*r+i]*t[r];return n}function Nb(e,t,n,r,i){for(var a=Db(r,Db(n,Db(t,[e[0],e[1],e[2],1]))),o=0;o<3;++o)a[o]/=a[3];return[.5*i[0]*(1+a[0]),.5*i[1]*(1-a[1])]}function Fb(e,t){if(2===e.length){for(var n=0,r=0,i=0;i<2;++i)n+=Math.pow(t[i]-e[0][i],2),r+=Math.pow(t[i]-e[1][i],2);return n=Math.sqrt(n),r=Math.sqrt(r),n+r<1e-6?[1,0]:[r/(n+r),n/(r+n)]}if(3===e.length){var a=[0,0];return I0(e[0],e[1],e[2],t,a),C0(e,a)}return[]}function jb(e,t){for(var n=[0,0,0],r=0;r<e.length;++r)for(var i=e[r],a=t[r],o=0;o<3;++o)n[o]+=a*i[o];return n}function Bb(e,t,n,r,i,a){if(1===e.length)return[0,e[0].slice()];for(var o=new Array(e.length),s=0;s<e.length;++s)o[s]=Nb(e[s],n,r,i,a);for(var l=0,u=1/0,s=0;s<o.length;++s){for(var c=0,d=0;d<2;++d)c+=Math.pow(o[s][d]-t[d],2);c<u&&(u=c,l=s)}for(var f=Fb(o,t),h=0,s=0;s<3;++s){if(f[s]<-.001||f[s]>1.0001)return null;h+=f[s]}return Math.abs(h-1)>.001?null:[l,jb(e,f),f]}function Ub(e){switch(e){case"uint8":return[EW.mallocUint8,EW.freeUint8];case"uint16":return[EW.mallocUint16,EW.freeUint16];case"uint32":return[EW.mallocUint32,EW.freeUint32];case"int8":return[EW.mallocInt8,EW.freeInt8];case"int16":return[EW.mallocInt16,EW.freeInt16];case"int32":return[EW.mallocInt32,EW.freeInt32];case"float32":return[EW.mallocFloat,EW.freeFloat];case"float64":return[EW.mallocDouble,EW.freeDouble];default:return null}}function Vb(e){for(var t=[],n=0;n<e;++n)t.push("s"+n);for(var n=0;n<e;++n)t.push("n"+n);for(var n=1;n<e;++n)t.push("d"+n);for(var n=1;n<e;++n)t.push("e"+n);for(var n=1;n<e;++n)t.push("f"+n);return t}function Hb(e,t){function n(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function r(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}var i=["'use strict'"],a=["ndarrayInsertionSort",e.join("d"),t].join(""),o=["left","right","data","offset"].concat(Vb(e.length)),s=Ub(t),l=["i,j,cptr,ptr=left*s0+offset"];if(e.length>1){for(var u=[],c=1;c<e.length;++c)l.push("i"+c),u.push("n"+c);s?l.push("scratch=malloc("+u.join("*")+")"):l.push("scratch=new Array("+u.join("*")+")"),l.push("dptr","sptr","a","b")}else l.push("scratch");if(i.push(["function ",a,"(",o.join(","),"){var ",l.join(",")].join(""),"for(i=left+1;i<=right;++i){","j=i;ptr+=s0","cptr=ptr"),e.length>1){i.push("dptr=0;sptr=ptr");for(var c=e.length-1;c>=0;--c){var d=e[c];0!==d&&i.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""))}i.push("scratch[dptr++]=",n("sptr"));for(var c=0;c<e.length;++c){var d=e[c];0!==d&&i.push("sptr+=d"+d,"}")}i.push("__g:while(j--\x3eleft){","dptr=0","sptr=cptr-s0");for(var c=1;c<e.length;++c)1===c&&i.push("__l:"),i.push(["for(i",c,"=0;i",c,"<n",c,";++i",c,"){"].join(""));i.push(["a=",n("sptr"),"\nb=scratch[dptr]\nif(a<b){break __g}\nif(a>b){break __l}"].join(""));for(var c=e.length-1;c>=1;--c)i.push("sptr+=e"+c,"dptr+=f"+c,"}");i.push("dptr=cptr;sptr=cptr-s0");for(var c=e.length-1;c>=0;--c){var d=e[c];0!==d&&i.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""))}i.push(r("dptr",n("sptr")));for(var c=0;c<e.length;++c){var d=e[c];0!==d&&i.push(["dptr+=d",d,";sptr+=d",d].join(""),"}")}i.push("cptr-=s0\n}"),i.push("dptr=cptr;sptr=0");for(var c=e.length-1;c>=0;--c){var d=e[c];0!==d&&i.push(["for(i",d,"=0;i",d,"<n",d,";++i",d,"){"].join(""))}i.push(r("dptr","scratch[sptr++]"));for(var c=0;c<e.length;++c){var d=e[c];0!==d&&i.push("dptr+=d"+d,"}")}}else i.push("scratch="+n("ptr"),"while((j--\x3eleft)&&("+n("cptr-s0")+">scratch)){",r("cptr",n("cptr-s0")),"cptr-=s0","}",r("cptr","scratch"));if(i.push("}"),e.length>1&&s&&i.push("free(scratch)"),i.push("} return "+a),s){var f=new Function("malloc","free",i.join("\n"));return f(s[0],s[1])}var f=new Function(i.join("\n"));return f()}function Wb(e,t,n){function r(e){return["(offset+",e,"*s0)"].join("")}function i(e){return"generic"===t?["data.get(",e,")"].join(""):["data[",e,"]"].join("")}function a(e,n){return"generic"===t?["data.set(",e,",",n,")"].join(""):["data[",e,"]=",n].join("")}function o(t,n,i){if(1===t.length)v.push("ptr0="+r(t[0]));else for(var a=0;a<t.length;++a)v.push(["b_ptr",a,"=s0*",t[a]].join(""));n&&v.push("pivot_ptr=0"),v.push("ptr_shift=offset");for(var a=e.length-1;a>=0;--a){var o=e[a];0!==o&&v.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""))}if(t.length>1)for(var a=0;a<t.length;++a)v.push(["ptr",a,"=b_ptr",a,"+ptr_shift"].join(""));v.push(i),n&&v.push("++pivot_ptr");for(var a=0;a<e.length;++a){var o=e[a];0!==o&&(t.length>1?v.push("ptr_shift+=d"+o):v.push("ptr0+=d"+o),v.push("}"))}}function s(t,n,i,a){if(1===n.length)v.push("ptr0="+r(n[0]));else{for(var o=0;o<n.length;++o)v.push(["b_ptr",o,"=s0*",n[o]].join(""));v.push("ptr_shift=offset")}i&&v.push("pivot_ptr=0"),t&&v.push(t+":");for(var o=1;o<e.length;++o)v.push(["for(i",o,"=0;i",o,"<n",o,";++i",o,"){"].join(""));if(n.length>1)for(var o=0;o<n.length;++o)v.push(["ptr",o,"=b_ptr",o,"+ptr_shift"].join(""));v.push(a);for(var o=e.length-1;o>=1;--o)i&&v.push("pivot_ptr+=f"+o),n.length>1?v.push("ptr_shift+=e"+o):v.push("ptr0+=e"+o),v.push("}")}function l(){e.length>1&&x&&v.push("free(pivot1)","free(pivot2)")}function u(t,n){var a="el"+t,o="el"+n;if(e.length>1){var l="__l"+ ++w;s(l,[a,o],!1,["comp=",i("ptr0"),"-",i("ptr1"),"\n","if(comp>0){tmp0=",a,";",a,"=",o,";",o,"=tmp0;break ",l,"}\n","if(comp<0){break ",l,"}"].join(""))}else v.push(["if(",i(r(a)),">",i(r(o)),"){tmp0=",a,";",a,"=",o,";",o,"=tmp0}"].join(""))}function c(t,n){e.length>1?o([t,n],!1,a("ptr0",i("ptr1"))):v.push(a(r(t),i(r(n))))}function d(t,n,a){if(e.length>1){var o="__l"+ ++w;s(o,[n],!0,[t,"=",i("ptr0"),"-pivot",a,"[pivot_ptr]\n","if(",t,"!==0){break ",o,"}"].join(""))}else v.push([t,"=",i(r(n)),"-pivot",a].join(""))}function f(t,n){e.length>1?o([t,n],!1,["tmp=",i("ptr0"),"\n",a("ptr0",i("ptr1")),"\n",a("ptr1","tmp")].join("")):v.push(["ptr0=",r(t),"\n","ptr1=",r(n),"\n","tmp=",i("ptr0"),"\n",a("ptr0",i("ptr1")),"\n",a("ptr1","tmp")].join(""))}function h(t,n,s){e.length>1?(o([t,n,s],!1,["tmp=",i("ptr0"),"\n",a("ptr0",i("ptr1")),"\n",a("ptr1",i("ptr2")),"\n",a("ptr2","tmp")].join("")),v.push("++"+n,"--"+s)):v.push(["ptr0=",r(t),"\n","ptr1=",r(n),"\n","ptr2=",r(s),"\n","++",n,"\n","--",s,"\n","tmp=",i("ptr0"),"\n",a("ptr0",i("ptr1")),"\n",a("ptr1",i("ptr2")),"\n",a("ptr2","tmp")].join(""))}function p(e,t){f(e,t),v.push("--"+t)}function m(t,n,s){e.length>1?o([t,n],!0,[a("ptr0",i("ptr1")),"\n",a("ptr1",["pivot",s,"[pivot_ptr]"].join(""))].join("")):v.push(a(r(t),i(r(n))),a(r(n),"pivot"+s))}function g(t,n){v.push(["if((",n,"-",t,")<=",G0,"){\n","insertionSort(",t,",",n,",data,offset,",Vb(e.length).join(","),")\n","}else{\n",_,"(",t,",",n,",data,offset,",Vb(e.length).join(","),")\n","}"].join(""))}function y(t,n,a){e.length>1?(v.push(["__l",++w,":while(true){"].join("")),o([t],!0,["if(",i("ptr0"),"!==pivot",n,"[pivot_ptr]){break __l",w,"}"].join("")),v.push(a,"}")):v.push(["while(",i(r(t)),"===pivot",n,"){",a,"}"].join(""))}var v=["'use strict'"],_=["ndarrayQuickSort",e.join("d"),t].join(""),b=["left","right","data","offset"].concat(Vb(e.length)),x=Ub(t),w=0;v.push(["function ",_,"(",b.join(","),"){"].join(""));var k=["sixth=((right-left+1)/6)|0","index1=left+sixth","index5=right-sixth","index3=(left+right)>>1","index2=index3-sixth","index4=index3+sixth","el1=index1","el2=index2","el3=index3","el4=index4","el5=index5","less=left+1","great=right-1","pivots_are_equal=true","tmp","tmp0","x","y","z","k","ptr0","ptr1","ptr2","comp_pivot1=0","comp_pivot2=0","comp=0"];if(e.length>1){for(var T=[],M=1;M<e.length;++M)T.push("n"+M),k.push("i"+M);for(var M=0;M<8;++M)k.push("b_ptr"+M);k.push("ptr3","ptr4","ptr5","ptr6","ptr7","pivot_ptr","ptr_shift","elementSize="+T.join("*")),x?k.push("pivot1=malloc(elementSize)","pivot2=malloc(elementSize)"):k.push("pivot1=new Array(elementSize),pivot2=new Array(elementSize)")}else k.push("pivot1","pivot2");if(v.push("var "+k.join(",")),u(1,2),u(4,5),u(1,3),u(2,3),u(1,4),u(3,4),u(2,5),u(2,3),u(4,5),e.length>1?o(["el1","el2","el3","el4","el5","index1","index3","index5"],!0,["pivot1[pivot_ptr]=",i("ptr1"),"\n","pivot2[pivot_ptr]=",i("ptr3"),"\n","pivots_are_equal=pivots_are_equal&&(pivot1[pivot_ptr]===pivot2[pivot_ptr])\n","x=",i("ptr0"),"\n","y=",i("ptr2"),"\n","z=",i("ptr4"),"\n",a("ptr5","x"),"\n",a("ptr6","y"),"\n",a("ptr7","z")].join("")):v.push(["pivot1=",i(r("el2")),"\n","pivot2=",i(r("el4")),"\n","pivots_are_equal=pivot1===pivot2\n","x=",i(r("el1")),"\n","y=",i(r("el3")),"\n","z=",i(r("el5")),"\n",a(r("index1"),"x"),"\n",a(r("index3"),"y"),"\n",a(r("index5"),"z")].join("")),c("index2","left"),c("index4","right"),v.push("if(pivots_are_equal){"),v.push("for(k=less;k<=great;++k){"),d("comp","k",1),v.push("if(comp===0){continue}"),v.push("if(comp<0){"),v.push("if(k!==less){"),f("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),v.push("while(true){"),d("comp","great",1),v.push("if(comp>0){"),v.push("great--"),v.push("}else if(comp<0){"),h("k","less","great"),v.push("break"),v.push("}else{"),p("k","great"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}else{"),v.push("for(k=less;k<=great;++k){"),d("comp_pivot1","k",1),v.push("if(comp_pivot1<0){"),v.push("if(k!==less){"),f("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),d("comp_pivot2","k",2),v.push("if(comp_pivot2>0){"),v.push("while(true){"),d("comp","great",2),v.push("if(comp>0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),d("comp","great",1),v.push("if(comp<0){"),h("k","less","great"),v.push("}else{"),p("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),m("left","(less-1)",1),m("right","(great+1)",2),g("left","(less-2)"),g("(great+2)","right"),v.push("if(pivots_are_equal){"),l(),v.push("return"),v.push("}"),v.push("if(less<index1&&great>index5){"),y("less",1,"++less"),y("great",2,"--great"),v.push("for(k=less;k<=great;++k){"),d("comp_pivot1","k",1),v.push("if(comp_pivot1===0){"),v.push("if(k!==less){"),f("k","less"),v.push("}"),v.push("++less"),v.push("}else{"),d("comp_pivot2","k",2),v.push("if(comp_pivot2===0){"),v.push("while(true){"),d("comp","great",2),v.push("if(comp===0){"),v.push("if(--great<k){break}"),v.push("continue"),v.push("}else{"),d("comp","great",1),v.push("if(comp<0){"),h("k","less","great"),v.push("}else{"),p("k","great"),v.push("}"),v.push("break"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),v.push("}"),l(),g("less","great"),v.push("}return "+_),e.length>1&&x){var A=new Function("insertionSort","malloc","free",v.join("\n"));return A(n,x[0],x[1])}var A=new Function("insertionSort",v.join("\n"));return A(n)}function qb(e,t){var n=["'use strict'"],r=["ndarraySortWrapper",e.join("d"),t].join(""),i=["array"];n.push(["function ",r,"(",i.join(","),"){"].join(""));for(var a=["data=array.data,offset=array.offset|0,shape=array.shape,stride=array.stride"],o=0;o<e.length;++o)a.push(["s",o,"=stride[",o,"]|0,n",o,"=shape[",o,"]|0"].join(""));for(var s=new Array(e.length),l=[],o=0;o<e.length;++o){var u=e[o];0!==u&&(0===l.length?s[u]="1":s[u]=l.join("*"),l.push("n"+u))}for(var c=-1,d=-1,o=0;o<e.length;++o){var f=e[o];0!==f&&(c>0?a.push(["d",f,"=s",f,"-d",c,"*n",c].join("")):a.push(["d",f,"=s",f].join("")),c=f);var u=e.length-1-o;0!==u&&(d>0?a.push(["e",u,"=s",u,"-e",d,"*n",d,",f",u,"=",s[u],"-f",d,"*n",d].join("")):a.push(["e",u,"=s",u,",f",u,"=",s[u]].join("")),d=u)}n.push("var "+a.join(","));var h=["0","n0-1","data","offset"].concat(Vb(e.length));n.push(["if(n0<=",G0,"){","insertionSort(",h.join(","),")}else{","quickSort(",h.join(","),")}"].join("")),n.push("}return "+r);var p=new Function("insertionSort","quickSort",n.join("\n")),m=Hb(e,t);return p(m,Wb(e,t,m))}function Gb(e){var t=e.order,n=e.dtype,r=[t,n],i=r.join(":"),a=X0[i];return a||(X0[i]=a=Y0(t,n)),a(e),e}function Yb(e,t,n){for(var r=new Array(e),i=0;i<e;++i)r[i]=0,i===t&&(r[i]+=.5),i===n&&(r[i]+=.5);return r}function Xb(e,t){if(0===t||t===(1<<e+1)-1)return[];for(var n=[],r=[],i=0;i<=e;++i)if(t&1<<i){n.push(Yb(e,i-1,i-1)),r.push(null);for(var a=0;a<=e;++a)~t&1<<a&&(n.push(Yb(e,i-1,a-1)),r.push([i,a]))}var o=k0(n),s=[];e:for(var i=0;i<o.length;++i){for(var l=o[i],u=[],a=0;a<l.length;++a){if(!r[l[a]])continue e;u.push(r[l[a]].slice())}s.push(u)}return s}function Zb(e){for(var t=1<<e+1,n=new Array(t),r=0;r<t;++r)n[r]=Xb(e,r);return n}function Jb(e){var t=0,n=new Array(e+1);n[0]=[[]];for(var r=1;r<=e;++r)for(var i=n[r]=J0(r),a=0;a<i.length;++a)t=Math.max(t,i[r].length);for(var o=["function B(C,E,i,j){","var a=Math.min(i,j)|0,b=Math.max(i,j)|0,l=C[2*a],h=C[2*a+1];","while(l<h){","var m=(l+h)>>1,v=E[2*m+1];","if(v===b){return m}","if(b<v){h=m}else{l=m+1}","}","return l;","};","function getContour",e,"d(F,E,C,S){","var n=F.length,R=[];","for(var i=0;i<n;++i){var c=F[i],l=c.length;"],r=e+1;r>1;--r){r<e+1&&o.push("else "),o.push("if(l===",r,"){");for(var s=[],a=0;a<r;++a)s.push("(S[c["+a+"]]<<"+a+")");o.push("var M=",s.join("+"),";if(M===0||M===",(1<<r)-1,"){continue}switch(M){");for(var i=n[r-1],a=0;a<i.length;++a)o.push("case ",a,":"),function(e){if(!(e.length<=0)){o.push("R.push(");for(var t=0;t<e.length;++t){var n=e[t];t>0&&o.push(","),o.push("[");for(var r=0;r<n.length;++r){var i=n[r];r>0&&o.push(","),o.push("B(C,E,c[",i[0],"],c[",i[1],"])")}o.push("]")}o.push(");")}}(i[a]),o.push("break;");o.push("}}")}return o.push("}return R;};return getContour",e,"d"),new Function("pool",o.join(""))(EW)}function Kb(e){var t=Q0[e];return t||(t=Q0[e]=Jb(e)),t}function Qb(e){for(var t=e.length,n=0,r=0;r<t;++r)n=0|Math.max(n,e[r].length);return n-1}function $b(e,t){for(var n=e.length,r=EW.mallocUint8(n),i=0;i<n;++i)r[i]=e[i]<t|0;return r}function ex(e,t){for(var n=e.length,r=t*(t+1)/2*n|0,i=EW.mallocUint32(2*r),a=0,o=0;o<n;++o)for(var s=e[o],t=s.length,l=0;l<t;++l)for(var u=0;u<l;++u){var c=s[u],d=s[l];i[a++]=0|Math.min(c,d),i[a++]=0|Math.max(c,d)}Z0(hW(i,[a/2|0,2]));for(var f=2,o=2;o<a;o+=2)i[o-2]===i[o]&&i[o-1]===i[o+1]||(i[f++]=i[o],i[f++]=i[o+1]);return hW(i,[f/2|0,2])}function tx(e,t,n,r){for(var i=e.data,a=e.shape[0],o=EW.mallocDouble(a),s=0,l=0;l<a;++l){var u=i[2*l],c=i[2*l+1];if(n[u]!==n[c]){var d=t[u],f=t[c];i[2*s]=u,i[2*s+1]=c,o[s++]=(f-r)/(f-d)}}return e.shape[0]=s,hW(o,[s])}function nx(e,t){var n=EW.mallocInt32(2*t),r=e.shape[0],i=e.data;n[0]=0;for(var a=0,o=0;o<r;++o){var s=i[2*o];if(s!==a){for(n[2*a+1]=o;++a<s;)n[2*a]=o,n[2*a+1]=o;n[2*a]=o}}for(n[2*a+1]=r;++a<t;)n[2*a]=n[2*a+1]=r;return n}function rx(e){for(var t=0|e.shape[0],n=e.data,r=new Array(t),i=0;i<t;++i)r[i]=[n[2*i],n[2*i+1]];return r}function ix(e,t,n,r){if(n=n||0,"undefined"===typeof r&&(r=Qb(e)),0===e.length||r<1)return{cells:[],vertexIds:[],vertexWeights:[]};var i=$b(t,+n),a=ex(e,r),o=tx(a,t,i,+n),s=nx(a,0|t.length),l=K0(r)(e,a.data,s,i),u=rx(a),c=[].slice.call(o.data,0,o.shape[0]);return EW.free(i),EW.free(a.data),EW.free(o.data),EW.free(s),{cells:l,vertexIds:u,vertexWeights:c}}function ax(e,t,n,r,i,a,o,s,l,u,c,d,f,h,p,m,g,y,v,_,b,x,w,k,T,M,A){this.gl=e,this.cells=[],this.positions=[],this.intensity=[],this.texture=t,this.dirty=!0,this.triShader=n,this.lineShader=r,this.pointShader=i,this.pickShader=a,this.pointPickShader=o,this.contourShader=s,this.trianglePositions=l,this.triangleColors=c,this.triangleNormals=f,this.triangleUVs=d,this.triangleIds=u,this.triangleVAO=h,this.triangleCount=0,this.lineWidth=1,this.edgePositions=p,this.edgeColors=g,this.edgeUVs=y,this.edgeIds=m,this.edgeVAO=v,this.edgeCount=0,this.pointPositions=_,this.pointColors=x,this.pointUVs=w,this.pointSizes=k,this.pointIds=b,this.pointVAO=T,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=M,this.contourVAO=A,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this._model=o1,this._view=o1,this._projection=o1,this._resolution=[1,1]}function ox(e){for(var t=A0({colormap:e,nshades:256,format:"rgba"}),n=new Uint8Array(1024),r=0;r<256;++r){for(var i=t[r],a=0;a<3;++a)n[4*r+a]=i[a];n[4*r+3]=255*i[3]}return hW(n,[256,256,4],[4,0,1])}function sx(e,t,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=0;for(var a=e.length,i=0;i<a;++i)for(var o=e[i],s=0;s<o.length;++s)r[o[s]]=n[i];return r}function lx(e){for(var t=e.length,n=new Array(t),r=0;r<t;++r)n[r]=e[r][2];return n}function ux(e){var t=Oq(e,e1.vertex,e1.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.normal.location=4,t}function cx(e){var t=Oq(e,t1.vertex,t1.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t}function dx(e){var t=Oq(e,n1.vertex,n1.fragment);return t.attributes.position.location=0,t.attributes.color.location=2,t.attributes.uv.location=3,t.attributes.pointSize.location=4,t}function fx(e){var t=Oq(e,r1.vertex,r1.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t}function hx(e){var t=Oq(e,i1.vertex,i1.fragment);return t.attributes.position.location=0,t.attributes.id.location=1,t.attributes.pointSize.location=4,t}function px(e){var t=Oq(e,a1.vertex,a1.fragment);return t.attributes.position.location=0,t}function mx(e,t){1===arguments.length&&(t=e,e=t.gl);var n=ux(e),r=cx(e),i=dx(e),a=fx(e),o=hx(e),s=px(e),l=YX(e,hW(new Uint8Array([255,255,255,255]),[1,1,4]));l.generateMipmap(),l.minFilter=e.LINEAR_MIPMAP_LINEAR,l.magFilter=e.LINEAR;var u=LW(e),c=LW(e),d=LW(e),f=LW(e),h=LW(e),p=sQ(e,[{buffer:u,type:e.FLOAT,size:3},{buffer:h,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:c,type:e.FLOAT,size:4},{buffer:d,type:e.FLOAT,size:2},{buffer:f,type:e.FLOAT,size:3}]),m=LW(e),g=LW(e),y=LW(e),v=LW(e),_=sQ(e,[{buffer:m,type:e.FLOAT,size:3},{buffer:v,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:g,type:e.FLOAT,size:4},{buffer:y,type:e.FLOAT,size:2}]),b=LW(e),x=LW(e),w=LW(e),k=LW(e),T=LW(e),M=sQ(e,[{buffer:b,type:e.FLOAT,size:3},{buffer:T,type:e.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:x,type:e.FLOAT,size:4},{buffer:w,type:e.FLOAT,size:2},{buffer:k,type:e.FLOAT,size:1}]),A=LW(e),C=sQ(e,[{buffer:A,type:e.FLOAT,size:3}]),S=new ax(e,l,n,r,i,a,o,s,u,h,c,d,f,p,m,v,g,y,_,b,T,x,w,k,M,A,C);return S.update(t),S}function gx(e,t,n){this.scene=e,this.uid=n,this.mesh=t,this.name="",this.color="#fff",this.data=null,this.showContour=!1}function yx(e){return e.map(function(e){var t=e[0],n=zC(e[1]),r=n.toRgb();return{index:t,rgb:[r.r,r.g,r.b,1]}})}function vx(e){return e.map(UZ)}function _x(e,t,n){for(var r=new Array(e.length),i=0;i<e.length;++i)r[i]=[e[i],t[i],n[i]];return r}function bx(e,t){var n=e.glplot.gl,r=l1({gl:n}),i=new gx(e,r,t.uid);return r._trace=i,i.update(t),e.glplot.add(r),i}function xx(e,t,n,r){aR(e,t,n,r),n(r+".line.color"),n(r+".line.width",t.line.width),n(r+".line.dash",t.line.dash)}function wx(e,t,n){var r={type:"scatter",mode:"lines",connectgaps:!1,visible:e.visible,opacity:e.opacity,xaxis:e.xaxis,yaxis:e.yaxis,hoverinfo:kx(e),transforms:oR.makeTransform(e,t,n)},i=e[n];return i&&uE.extendFlat(r,{x:e.x||[0],xcalendar:e.xcalendar,y:[].concat(e.low).concat(e.high),text:e.text,name:i.name,showlegend:i.showlegend,line:i.line}),r}function kx(e){var t=e.hoverinfo;if("all"===t)return"x+text+name";var n=t.split("+"),r=n.indexOf("y"),i=n.indexOf("text");return-1!==r&&(n.splice(r,1),-1===i&&n.push("text")),n.join("+")}function Tx(e,t,n){var r=n._fullInput,i=r.tickwidth,a=r._minDiff;if(!a){var o=e._fullData,s=[];a=1/0;var l;for(l=0;l<o.length;l++){var u=o[l]._fullInput;if("ohlc"===u.type&&!0===u.visible&&u.xaxis===t._id&&(s.push(u),u.x&&u.x.length>1)){var c=uE.simpleMap(u.x,t.d2c,0,n.xcalendar),d=uE.distinctVals(c).minDiff;a=Math.min(a,d)}}for(a===1/0&&(a=1),l=0;l<s.length;l++)s[l]._minDiff=a}return a*i}function Mx(e){return[e]}function Ax(e){e.read({x:0,y:0,width:1,height:1,data:R1})}function Cx(e,t,n,r,i){var a=e._gl;a.enable(a.SCISSOR_TEST),a.scissor(t,n,r,i),e.clear({color:[0,0,0,0],depth:1})}function Sx(e,t,n,r,i,a){function o(l){var u;u=Math.min(r,i-l*r),a.offset=L1*l*r,a.count=L1*u,0===l&&(window.cancelAnimationFrame(n.currentRafs[s]),delete n.currentRafs[s],Cx(e,a.scissorX,a.scissorY,a.scissorWidth,a.viewBoxSize[1])),n.clearOnly||(t(a),l*r+u<i&&(n.currentRafs[s]=window.requestAnimationFrame(function(){o(l+1)})),n.drawCompleted=!1)}var s=a.key;n.drawCompleted||(Ax(e),n.drawCompleted=!0),o(0)}function Ex(e){return Math.max(P1,Math.min(1-P1,e))}function Px(e,t,n){for(var r=[],i=0;i<256;i++){var a=e(i/255);r.push((t?z1:a).concat(n))}return r}function Ix(e,t){return(e>>>8*t)%256/255}function Lx(e,t,n,r){for(var i=[],a=0;a<e;a++)for(var o=0;o<I1;o++)i.push(o<t?n[o].paddedUnitValues[a]:o===I1-1?Ex(r[a]):o>=I1-4?Ix(a,I1-2-o):.5);return i}function Ox(e,t,n){var r,i,a,o=[];for(i=0;i<e;i++)for(a=0;a<L1;a++)for(r=0;r<O1;r++)o.push(t[i*I1+n*O1+r]),n*O1+r===I1-1&&a%2===0&&(o[o.length-1]*=-1);return o}function zx(e,t){var n=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15],r=n.map(function(n){return Ox(e,t,n)}),i={};return r.forEach(function(e,t){i["p"+t.toString(16)]=e}),i}function Rx(e,t,n){return e+t<=n}function Dx(e){return!("visible"in e)||e.visible}function Nx(e){var t=e.range?e.range[0]:uE.aggNums(Math.min,null,e.values,e._length),n=e.range?e.range[1]:uE.aggNums(Math.max,null,e.values,e._length);return!isNaN(t)&&isFinite(t)||(t=0),!isNaN(n)&&isFinite(n)||(n=0),t===n&&(void 0===t?(t=0,n=1):0===t?(t-=1,n+=1):(t*=.9,n*=1.1)),[t,n]}function Fx(e,t){var n,r,i,a,o;for(n=0,r=e.range(),i=1/0,a=r[0],o;n<r.length;n++){if((o=Math.abs(r[n]-t))>i)return a;i=o,a=r[n]}return r[r.length-1]}function jx(e,t){return function(n,r){if(t){var i=t[r];return null===i||void 0===i?e(n):i}return e(n)}}function Bx(e,t,n){var r=Nx(n),i=n.ticktext;return n.tickvals?CC.scale.ordinal().domain(n.tickvals.map(jx(CC.format(n.tickformat),i))).range(n.tickvals.map(function(e){return(e-r[0])/(r[1]-r[0])}).map(function(n){return e-t+n*(t-(e-t))})):CC.scale.linear().domain(r).range([e-t,t])}function Ux(e,t){return CC.scale.linear().range([e-t,t])}function Vx(e){return CC.scale.linear().domain(Nx(e))}function Hx(e){var t=Nx(e);return e.tickvals&&CC.scale.ordinal().domain(e.tickvals).range(e.tickvals.map(function(e){return(e-t[0])/(t[1]-t[0])}))}function Wx(e){var t=e.map(function(e){return e[0]}),n=e.map(function(e){return e[1]}),r=n.map(function(e){return CC.rgb(e)}),i=function(e){return function(t){return t[e]}},a="rgb".split("").map(function(e){return CC.scale.linear().clamp(!0).domain(t).range(r.map(i(e)))});return function(e){return a.map(function(t){return t(e)})}}function qx(e,t,n){var r=B1(t),i=r.trace,a=r.lineColor,o=r.cscale,s=i.line,l=i.domain,u=i.dimensions,c=e.width,d=i.labelfont,f=i.tickfont,h=i.rangefont,p=uE.extendDeep({},s,{color:a.map(Vx({values:a,range:[s.cmin,s.cmax],_length:i._commonLength})),blockLineCount:A1.blockLineCount,canvasOverdrag:A1.overdrag*A1.canvasPixelRatio}),m=Math.floor(c*(l.x[1]-l.x[0])),g=Math.floor(e.height*(l.y[1]-l.y[0])),y=e.margin||{l:80,r:80,t:100,b:80},v=m,_=g;return{key:n,colCount:u.filter(Dx).length,dimensions:u,tickDistance:A1.tickDistance,unitToColor:Wx(o),lines:p,labelFont:d,tickFont:f,rangeFont:h,layoutWidth:c,layoutHeight:e.height,domain:l,translateX:l.x[0]*c,translateY:e.height-l.y[1]*e.height,pad:y,canvasWidth:v*A1.canvasPixelRatio+2*p.canvasOverdrag,canvasHeight:_*A1.canvasPixelRatio,width:v,height:_,canvasPixelRatio:A1.canvasPixelRatio}}function Gx(e){var t=e.width,n=e.height,r=e.dimensions,i=e.canvasPixelRatio,a=function(n){return t*n/Math.max(1,e.colCount-1)},o=A1.verticalPadding/(n*i),s=1-2*o,l=function(e){return o+s*e},u={key:e.key,xScale:a,model:e},c={};return u.dimensions=r.filter(Dx).map(function(t,r){var o=Vx(t),s=c[t.label];c[t.label]=(s||0)+1;var d=t.label+(s?"__"+s:""),f=t.values;return f.length>t._length&&(f=f.slice(0,t._length)),{key:d,label:t.label,tickFormat:t.tickformat,tickvals:t.tickvals,ticktext:t.ticktext,ordinal:!!t.tickvals,scatter:A1.scatter||t.scatter,xIndex:r,crossfilterDimensionIndex:r,visibleIndex:t._index,height:n,values:f,paddedUnitValues:f.map(o).map(l),xScale:a,x:a(r),canvasX:a(r)*i,unitScale:Ux(n,A1.verticalPadding),domainScale:Bx(n,A1.verticalPadding,t),ordinalScale:Hx(t),domainToUnitScale:o,filter:t.constraintrange?t.constraintrange.map(o):[0,1],parent:u,model:e}}),u}function Yx(e){e.classed(A1.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default").style("user-select","none")}function Xx(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=.5;return t}function Zx(e,t,n,r,i){var a=i("line.color",n);eP(e,"line")&&uE.isArrayOrTypedArray(a)&&(a.length?(i("line.colorscale"),QE(e,t,r,i,{prefix:"line.",cLetter:"c"}),t._commonLength=Math.min(t._commonLength,a.length)):t.line.color=n)}function Jx(e,t){function n(e,t){return uE.coerce(r,i,k1.dimensions,e,t)}var r,i,a,o=e.dimensions||[],s=t.dimensions=[],l=1/0;for(o.length>X1&&(uE.log("parcoords traces support up to "+X1+" dimensions at the moment"),o.splice(X1)),a=0;a<o.length;a++)if(r=o[a],i={},uE.isPlainObject(r)){var u=n("values"),c=n("visible");u&&u.length||(c=i.visible=!1),c&&(n("label"),n("tickvals"),n("ticktext"),n("tickformat"),n("range"),n("constraintrange"),l=Math.min(l,u.length)),i._index=a,s.push(i)}return t._commonLength=l,s}function Kx(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],a=i[0].trace;a._module===t&&!0===a.visible&&n.push(i)}return n}function Qx(e,t){if(!a2){var n=jE.defaults;a2=$x(n)}var r=t||a2;return r[e%r.length]}function $x(e){var t,n=e.slice();for(t=0;t<e.length;t++)n.push(zC(e[t]).lighten(20).toHexString());for(t=0;t<e.length;t++)n.push(zC(e[t]).darken(20).toHexString());return n}function ew(e,t,n){var r=Math.sqrt(e.width*e.width+e.height*e.height),i=e.width/e.height,a=Math.PI*Math.min(t.v/n.vTotal,.5),o=1-n.trace.hole,s=tw(t,n),l={scale:s*n.r*2/r,rCenter:1-s,rotate:0};if(l.scale>=1)return l;var u=i+1/(2*Math.tan(a)),c=n.r*Math.min(1/(Math.sqrt(u*u+.5)+u),o/(Math.sqrt(i*i+o/2)+i)),d={scale:2*c/e.height,rCenter:Math.cos(c/n.r)-c*i/n.r,rotate:(180/Math.PI*t.midangle+720)%180-90},f=1/i,h=f+1/(2*Math.tan(a)),p=n.r*Math.min(1/(Math.sqrt(h*h+.5)+h),o/(Math.sqrt(f*f+o/2)+f)),m={scale:2*p/e.width,rCenter:Math.cos(p/n.r)-p/i/n.r,rotate:(180/Math.PI*t.midangle+810)%180-90},g=m.scale>d.scale?m:d;return l.scale<1&&g.scale>l.scale?g:l}function tw(e,t){if(e.v===t.vTotal&&!t.trace.hole)return 1;var n=Math.PI*Math.min(e.v/t.vTotal,.5);return Math.min(1/(1+1/Math.sin(n)),(1-t.trace.hole)/2)}function nw(e,t){var n=t.pxmid[0],r=t.pxmid[1],i=e.width/2,a=e.height/2;return n<0&&(i*=-1),r<0&&(a*=-1),{scale:1,rCenter:1,rotate:0,x:i+Math.abs(a)*(i>0?1:-1)/2,y:a/(1+n*n/(r*r)),outside:!0}}function rw(e,t){function n(e,t){return e.pxmid[1]-t.pxmid[1]}function r(e,t){return t.pxmid[1]-e.pxmid[1]}var i,a,o,s,l,u,c,d,f,h,p,m,g;for(a=0;a<2;a++)for(o=a?n:r,l=a?Math.max:Math.min,c=a?1:-1,i=0;i<2;i++){for(s=i?Math.max:Math.min,u=i?1:-1,d=e[a][i],d.sort(o),f=e[1-a][i],h=f.concat(d),m=[],p=0;p<d.length;p++)void 0!==d[p].yLabelMid&&m.push(d[p]);for(g=!1,p=0;a&&p<f.length;p++)if(void 0!==f[p].yLabelMid){g=f[p];break}for(p=0;p<m.length;p++){var y=p&&m[p-1];g&&!p&&(y=g),function(e,n){n||(n={});var r,i,o,d,f,p,m=n.labelExtraY+(a?n.yLabelMax:n.yLabelMin),g=a?e.yLabelMin:e.yLabelMax,y=a?e.yLabelMax:e.yLabelMin,v=e.cyFinal+l(e.px0[1],e.px1[1]),_=m-g;if(_*c>0&&(e.labelExtraY=_),Array.isArray(t.pull))for(i=0;i<h.length;i++)(o=h[i])===e||(xB.castOption(t.pull,e.pts)||0)>=(xB.castOption(t.pull,o.pts)||0)||((e.pxmid[1]-o.pxmid[1])*c>0?(d=o.cyFinal+l(o.px0[1],o.px1[1]),(_=d-g-e.labelExtraY)*c>0&&(e.labelExtraY+=_)):(y+e.labelExtraY-v)*c>0&&(r=3*u*Math.abs(i-h.indexOf(e)),f=o.cxFinal+s(o.px0[0],o.px1[0]),(p=f+r-(e.cxFinal+e.pxmid[0])-e.labelExtraX)*u>0&&(e.labelExtraX+=p)))}(m[p],y)}}}function iw(e,t){var n,r,i,a,o,s,l,u,c,d=[];for(i=0;i<e.length;i++){if(o=e[i][0],s=o.trace,n=t.w*(s.domain.x[1]-s.domain.x[0]),r=t.h*(s.domain.y[1]-s.domain.y[0]),l=s.pull,Array.isArray(l))for(l=0,a=0;a<s.pull.length;a++)s.pull[a]>l&&(l=s.pull[a]);o.r=Math.min(n,r)/(2+2*l),o.cx=t.l+t.w*(s.domain.x[1]+s.domain.x[0])/2,o.cy=t.t+t.h*(2-s.domain.y[1]-s.domain.y[0])/2,s.scalegroup&&-1===d.indexOf(s.scalegroup)&&d.push(s.scalegroup)}for(a=0;a<d.length;a++){for(c=1/0,u=d[a],i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===u&&(c=Math.min(c,o.r*o.r/o.vTotal));for(i=0;i<e.length;i++)o=e[i][0],o.trace.scalegroup===u&&(o.r=Math.sqrt(c*o.vTotal))}}function aw(e){function t(e){return[a.r*Math.sin(e),-a.r*Math.cos(e)]}var n,r,i,a=e[0],o=a.trace,s=o.rotation*Math.PI/180,l=2*Math.PI/a.vTotal,u="px0",c="px1";if("counterclockwise"===o.direction){for(n=0;n<e.length&&e[n].hidden;n++);if(n===e.length)return;s+=l*e[n].v,l*=-1,u="px1",c="px0"}for(i=t(s),n=0;n<e.length;n++)r=e[n],r.hidden||(r[u]=i,s+=l*r.v/2,r.pxmid=t(s),r.midangle=s,s+=l*r.v/2,i=t(s),r[c]=i,r.largeArc=r.v>a.vTotal/2?1:0)}function ow(e,t,n,r,i){this.plot=e,this.offsetBuffer=t,this.pickBuffer=n,this.shader=r,this.pickShader=i,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}function sw(e,t){var n,r=0,i=e.length>>>1;for(n=0;n<i;n++){var a=e[2*n],o=e[2*n+1];a>=t[0]&&a<=t[2]&&o>=t[1]&&o<=t[3]&&r++}return r}function lw(e,t){var n=e.gl,r=LW(n),i=LW(n),a=Oq(n,b2.pointVertex,b2.pointFragment),o=Oq(n,b2.pickVertex,b2.pickFragment),s=new ow(e,r,i,a,o);return s.update(t),e.addObject(s),s}function uw(e,t){this.scene=e,this.uid=t,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=x2(e.glplot,this.pointcloudOptions),this.pointcloud._trace=this}function cw(e,t){var n=new uw(e,t.uid);return n.update(t),n}function dw(e){var t,n=[];for(t=0;t<e.length;t++)e[t].originalX=e[t].x,e[t].originalY=e[t].y,-1===n.indexOf(e[t].x)&&n.push(e[t].x);for(n.sort(function(e,t){return e-t}),t=0;t<e.length;t++)e[t].originalLayerIndex=n.indexOf(e[t].originalX),e[t].originalLayer=e[t].originalLayerIndex/(n.length-1)}function fw(e){e.lastDraggedX=e.x,e.lastDraggedY=e.y}function hw(e){return function(t){return t.node.originalX===e.node.originalX}}function pw(e){for(var t=0;t<e.length;t++)e[t].y=e[t].y+e[t].dy/2}function mw(e){for(var t=0;t<e.length;t++)e[t].y=e[t].y-e[t].dy/2}function gw(e,t,n){for(var r,i=X2(t).trace,a=i.domain,o=i.node,s=i.link,l=i.arrangement,u="h"===i.orientation,c=i.node.pad,d=i.node.thickness,f=i.node.line.color,h=i.node.line.width,p=i.link.line.color,m=i.link.line.width,g=i.valueformat,y=i.valuesuffix,v=i.textfont,_=e.width*(a.x[1]-a.x[0]),b=e.height*(a.y[1]-a.y[0]),x=o.label.map(function(e,t){return{pointNumber:t,label:e,color:uE.isArrayOrTypedArray(o.color)?o.color[t]:o.color}}),w=s.value.map(function(e,t){return{pointNumber:t,label:s.label[t],color:uE.isArrayOrTypedArray(s.color)?s.color[t]:s.color,source:s.source[t],target:s.target[t],value:e}}),k=q2().size(u?[_,b]:[b,_]).nodeWidth(d).nodePadding(c).nodes(x).links(w).layout(R2.sankeyIterations),T=k.nodes(),M=0;M<T.length;M++)r=T[M],r.width=_,r.height=b;return pw(x),{key:n,trace:i,guid:Math.floor(1e12*(1+Math.random())),horizontal:u,width:_,height:b,nodePad:c,nodeLineColor:f,nodeLineWidth:h,linkLineColor:p,linkLineWidth:m,valueFormat:g,valueSuffix:y,textFont:v,translateX:a.x[0]*_+e.margin.l,translateY:e.height-a.y[1]*e.height+e.margin.t,dragParallel:u?b:_,dragPerpendicular:u?_:b,nodes:x,links:w,arrangement:l,sankey:k,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function yw(e,t,n){var r=zC(n.color),i=n.source.label+"|"+n.target.label,a=e[i];e[i]=(a||0)+1;var o=i+"__"+e[i];return n.trace=t.trace,n.curveNumber=t.trace.index,{key:o,traceId:t.key,link:n,tinyColorHue:jE.tinyRGB(r),tinyColorAlpha:r.getAlpha(),linkLineColor:t.linkLineColor,linkLineWidth:t.linkLineWidth,valueFormat:t.valueFormat,valueSuffix:t.valueSuffix,sankey:t.sankey,interactionState:t.interactionState}}function vw(e,t,n){var r=zC(n.color),i=R2.nodePadAcross,a=t.nodePad/2,o=n.dx,s=Math.max(.5,n.dy),l=n.label,u=e[l];e[l]=(u||0)+1;var c=l+"__"+e[l];return n.trace=t.trace,n.curveNumber=t.trace.index,{key:c,traceId:t.key,node:n,nodePad:t.nodePad,nodeLineColor:t.nodeLineColor,nodeLineWidth:t.nodeLineWidth,textFont:t.textFont,size:t.horizontal?t.height:t.width,visibleWidth:Math.ceil(o),visibleHeight:s,zoneX:-i,zoneY:-a,zoneWidth:o+2*i,zoneHeight:s+2*a,labelY:t.horizontal?n.dy/2+1:n.dx/2+1,left:1===n.originalLayer,sizeAcross:t.width,forceLayouts:t.forceLayouts,horizontal:t.horizontal,darkBackground:r.getBrightness()<=128,tinyColorHue:jE.tinyRGB(r),tinyColorAlpha:r.getAlpha(),valueFormat:t.valueFormat,valueSuffix:t.valueSuffix,sankey:t.sankey,arrangement:t.arrangement,uniqueNodeLabelPathId:[t.guid,t.key,c].join(" "),interactionState:t.interactionState}}function _w(e){e.attr("transform",function(e){return"translate("+e.node.x.toFixed(3)+", "+(e.node.y-e.node.dy/2).toFixed(3)+")"})}function bw(e){var t=e.sankey.nodes();mw(t);var n=e.sankey.link()(e.link);return pw(t),n}function xw(e){e.call(_w)}function ww(e,t){e.call(xw),t.attr("d",bw)}function kw(e){e.attr("width",function(e){return e.visibleWidth}).attr("height",function(e){return e.visibleHeight})}function Tw(e){return e.link.dy>1||e.linkLineWidth>0}function Mw(e){return"translate("+e.translateX+","+e.translateY+")"+(e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function Aw(e){return"translate("+(e.horizontal?0:e.labelY)+" "+(e.horizontal?e.labelY:0)+")"}function Cw(e){return CC.svg.line()([[e.horizontal?e.left?-e.sizeAcross:e.visibleWidth+R2.nodeTextOffsetHorizontal:R2.nodeTextOffsetHorizontal,0],[e.horizontal?e.left?-R2.nodeTextOffsetHorizontal:e.sizeAcross:e.visibleHeight-R2.nodeTextOffsetHorizontal,0]])}function Sw(e){return e.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)"}function Ew(e){return e.horizontal?"scale(1 1)":"scale(-1 1)"}function Pw(e){return e.darkBackground&&!e.horizontal?"rgb(255,255,255)":"rgb(0,0,0)"}function Iw(e){return e.horizontal&&e.left?"100%":"0%"}function Lw(e,t,n){e.on(".basic",null).on("mouseover.basic",function(e){e.interactionState.dragInProgress||(n.hover(this,e,t),e.interactionState.hovered=[this,e])}).on("mousemove.basic",function(e){e.interactionState.dragInProgress||(n.follow(this,e),e.interactionState.hovered=[this,e])}).on("mouseout.basic",function(e){e.interactionState.dragInProgress||(n.unhover(this,e,t),e.interactionState.hovered=!1)}).on("click.basic",function(e){e.interactionState.hovered&&(n.unhover(this,e,t),e.interactionState.hovered=!1),e.interactionState.dragInProgress||n.select(this,e,t)})}function Ow(e,t,n){var r=CC.behavior.drag().origin(function(e){return e.node}).on("dragstart",function(r){if("fixed"!==r.arrangement&&(uE.raiseToTop(this),r.interactionState.dragInProgress=r.node,fw(r.node),r.interactionState.hovered&&(n.nodeEvents.unhover.apply(0,r.interactionState.hovered),r.interactionState.hovered=!1),"snap"===r.arrangement)){var i=r.traceId+"|"+Math.floor(r.node.originalX);r.forceLayouts[i]?r.forceLayouts[i].alpha(1):zw(e,i,r),Rw(e,t,r,i)}}).on("drag",function(n){if("fixed"!==n.arrangement){var r=CC.event.x,i=CC.event.y;"snap"===n.arrangement?(n.node.x=r,n.node.y=i):("freeform"===n.arrangement&&(n.node.x=r),n.node.y=Math.max(n.node.dy/2,Math.min(n.size-n.node.dy/2,i))),fw(n.node),"snap"!==n.arrangement&&(n.sankey.relayout(),ww(e.filter(hw(n)),t))}}).on("dragend",function(e){e.interactionState.dragInProgress=!1});e.on(".drag",null).call(r)}function zw(e,t,n){var r=n.sankey.nodes().filter(function(e){return e.originalX===n.node.originalX});n.forceLayouts[t]=W2.forceSimulation(r).alphaDecay(0).force("collide",W2.forceCollide().radius(function(e){return e.dy/2+n.nodePad/2}).strength(1).iterations(R2.forceIterations)).force("constrain",Dw(e,t,r,n)).stop()}function Rw(e,t,n,r){window.requestAnimationFrame(function i(){for(var a=0;a<R2.forceTicksPerFrame;a++)n.forceLayouts[r].tick();n.sankey.relayout(),ww(e.filter(hw(n)),t),n.forceLayouts[r].alpha()>0&&window.requestAnimationFrame(i)})}function Dw(e,t,n,r){return function(){for(var e=0,i=0;i<n.length;i++){var a=n[i];a===r.interactionState.dragInProgress?(a.x=a.lastDraggedX,a.y=a.lastDraggedY):(a.vx=(a.originalX-a.x)/R2.forceTicksPerFrame,a.y=Math.min(r.size-a.dy/2,Math.max(a.dy/2,a.y))),e=Math.max(e,Math.abs(a.vx),Math.abs(a.vy))}!r.interactionState.dragInProgress&&e<.1&&r.forceLayouts[t].alpha()>0&&r.forceLayouts[t].alpha(0)}}function Nw(e){return""!==e}function Fw(e,t){return e.filter(function(e){return e.key===t.traceId})}function jw(e,t){CC.select(e).select("path").style("fill-opacity",t),CC.select(e).select("rect").style("fill-opacity",t)}function Bw(e){CC.select(e).select("text.name").style("fill","black")}function Uw(e){return function(t){return-1!==e.node.sourceLinks.indexOf(t.link)||-1!==e.node.targetLinks.indexOf(t.link)}}function Vw(e){return function(t){return-1!==t.node.sourceLinks.indexOf(e.link)||-1!==t.node.targetLinks.indexOf(e.link)}}function Hw(e,t,n){t&&n&&Fw(n,t).selectAll("."+J2.sankeyLink).filter(Uw(t)).call(qw.bind(0,t,n,!1))}function Ww(e,t,n){t&&n&&Fw(n,t).selectAll("."+J2.sankeyLink).filter(Uw(t)).call(Gw.bind(0,t,n,!1))}function qw(e,t,n,r){var i=r.datum().link.label;r.style("fill-opacity",.4),i&&Fw(t,e).selectAll("."+J2.sankeyLink).filter(function(e){return e.link.label===i}).style("fill-opacity",.4),n&&Fw(t,e).selectAll("."+J2.sankeyNode).filter(Vw(e)).call(Hw)}function Gw(e,t,n,r){var i=r.datum().link.label;r.style("fill-opacity",function(e){return e.tinyColorAlpha}),i&&Fw(t,e).selectAll("."+J2.sankeyLink).filter(function(e){return e.link.label===i}).style("fill-opacity",function(e){return e.tinyColorAlpha}),n&&Fw(t,e).selectAll(J2.sankeyNode).filter(Vw(e)).call(Ww)}function Yw(e,t){var n=e.hoverlabel||{},r=uE.nestedProperty(n,t).get();return!Array.isArray(r)&&r}function Xw(e){for(var t=e.length,n=new Array(t),r=new Array(t),i=new Array(t),a=new Array(t),o=new Array(t),s=new Array(t),l=0;l<t;++l)n[l]=-1,r[l]=0,i[l]=!1,a[l]=0,o[l]=-1,s[l]=[];for(var u=0,c=[],d=[],l=0;l<t;++l)n[l]<0&&function(t){var l=[t],f=[t];for(n[t]=r[t]=u,i[t]=!0,u+=1;f.length>0;){t=f[f.length-1];var h=e[t];if(a[t]<h.length){for(var p=a[t];p<h.length;++p){var m=h[p];if(n[m]<0){n[m]=r[m]=u,i[m]=!0,u+=1,l.push(m),f.push(m);break}i[m]&&(r[t]=0|Math.min(r[t],r[m])),o[m]>=0&&s[t].push(o[m])}a[t]=p}else{if(r[t]===n[t]){for(var g=[],y=[],v=0,p=l.length-1;p>=0;--p){var _=l[p];if(i[_]=!1,g.push(_),y.push(s[_]),v+=s[_].length,o[_]=c.length,_===t){l.length=p;break}}c.push(g);for(var b=new Array(v),p=0;p<y.length;p++)for(var x=0;x<y[p].length;x++)b[--v]=y[p][x];d.push(b)}f.pop()}}}(l);for(var f,l=0;l<d.length;l++){var h=d[l];if(0!==h.length){h.sort(function(e,t){return e-t}),f=[h[0]];for(var p=1;p<h.length;p++)h[p]!==h[p-1]&&f.push(h[p]);d[l]=f}}return{components:c,adjacencyList:d}}function Zw(e,t,n){for(var r=e.map(function(){return[]}),i=0;i<Math.min(t.length,n.length);i++){if(t[i]===n[i])return!0;r[t[i]].push(n[i])}return n3(r).components.some(function(e){return e.length>1})}function Jw(e){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}function Kw(e,t,n,r){this.gl=e,this.shader=r,this.buffer=t,this.vao=n,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1}function Qw(e,t){for(var n=0;n<3;++n)e[0][n]=Math.min(e[0][n],t[n]),e[1][n]=Math.max(e[1][n],t[n])}function $w(e,t,n,r){for(var i=M3[r],a=0;a<i.length;++a){var o=i[a];e.push(t[0],t[1],t[2],n[0],n[1],n[2],n[3],o[0],o[1],o[2])}return i.length}function ek(e){var t=e.gl,n=LW(t),r=sQ(t,[{buffer:n,type:t.FLOAT,size:3,offset:0,stride:40},{buffer:n,type:t.FLOAT,size:4,offset:12,stride:40},{buffer:n,type:t.FLOAT,size:3,offset:28,stride:40}]),i=x3(t);i.attributes.position.location=0,i.attributes.color.location=1,i.attributes.offset.location=2;var a=new Kw(t,n,r,i);return a.update(e),a}function tk(e,t,n,r){return L3[0]=r,L3[1]=n,L3[2]=t,L3[3]=e,O3[0]}function nk(e,t){for(var n=0,r=0;r<3;++r){var i=e[r]-t[r];n+=i*i}return Math.sqrt(n)}function rk(e){for(var t=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],n=0;n<3;++n)t[0][n]=Math.max(e[0][n],t[0][n]),t[1][n]=Math.min(e[1][n],t[1][n]);return t}function ik(e,t,n,r){this.arcLength=e,this.position=t,this.index=n,this.dataCoordinate=r}function ak(e,t,n,r,i,a){this.gl=e,this.shader=t,this.pickShader=n,this.buffer=r,this.vao=i,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=a,this.dashScale=1,this.opacity=1,this.dirty=!0,this.pixelRatio=1}function ok(e){var t=e.gl||e.scene&&e.scene.gl,n=R3(t);n.attributes.position.location=0,n.attributes.nextPosition.location=1,n.attributes.arcLength.location=2,n.attributes.lineWidth.location=3,n.attributes.color.location=4;var r=D3(t);r.attributes.position.location=0,r.attributes.nextPosition.location=1,r.attributes.arcLength.location=2,r.attributes.lineWidth.location=3,r.attributes.color.location=4;for(var i=LW(t),a=sQ(t,[{buffer:i,size:3,offset:0,stride:48},{buffer:i,size:3,offset:12,stride:48},{buffer:i,size:1,offset:24,stride:48},{buffer:i,size:1,offset:28,stride:48},{buffer:i,size:4,offset:32,stride:48}]),o=hW(new Array(1024),[256,1,4]),s=0;s<1024;++s)o.data[s]=255;var l=YX(t,o);l.wrap=t.REPEAT;var u=new ak(t,n,r,i,a,l);return u.update(e),u}function sk(e,t){var n=B3[t];if(n||(n=B3[t]={}),e in n)return n[e];for(var r=BX(e,{textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),i=BX(e,{triangles:!0,textAlign:"center",textBaseline:"middle",lineHeight:1,font:t}),a=[[1/0,1/0],[-1/0,-1/0]],o=0;o<r.positions.length;++o)for(var s=r.positions[o],l=0;l<2;++l)a[0][l]=Math.min(a[0][l],s[l]),a[1][l]=Math.max(a[1][l],s[l]);return n[e]=[i,r,a]}function lk(e,t){var n=Oq(e,t),r=n.attributes;return r.position.location=0,r.color.location=1,r.glyph.location=2,r.id.location=3,n}function uk(e,t){var n=e[0],r=e[1],i=e[2],a=e[3];return e[0]=t[0]*n+t[4]*r+t[8]*i+t[12]*a,e[1]=t[1]*n+t[5]*r+t[9]*i+t[13]*a,e[2]=t[2]*n+t[6]*r+t[10]*i+t[14]*a,e[3]=t[3]*n+t[7]*r+t[11]*i+t[15]*a,e}function ck(e,t,n,r){return uk(r,r,n),uk(r,r,t),uk(r,r,e)}function dk(e,t){this.index=e,this.dataCoordinate=this.position=t}function fk(e,t,n,r,i,a,o,s,l,u,c,d){this.gl=e,this.pixelRatio=1,this.shader=t,this.orthoShader=n,this.projectShader=r,this.pointBuffer=i,this.colorBuffer=a,this.glyphBuffer=o,this.idBuffer=s,this.vao=l,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.pickId=0,this.pickPerspectiveShader=u,this.pickOrthoShader=c,this.pickProjectShader=d,this.points=[],this._selectResult=new dk(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}function hk(e){return e[0]=e[1]=e[2]=0,e}function pk(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1,e}function mk(e,t,n,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[n]=r,e}function gk(e){for(var t=c5,n=0;n<2;++n)for(var r=0;r<3;++r)t[n][r]=Math.max(Math.min(e[n][r],1e8),-1e8);return t}function yk(e,t,n,r,i){var a,o=t.axesProject,s=t.gl,l=e.uniforms,u=n.model||e5,c=n.view||e5,d=n.projection||e5,f=t.axesBounds,h=gk(t.clipBounds);a=t.axes&&t.axes.lastCubeProps?t.axes.lastCubeProps.axis:[1,1,1],r5[0]=2/s.drawingBufferWidth,r5[1]=2/s.drawingBufferHeight,e.bind(),l.view=c,l.projection=d,l.screenSize=r5,l.highlightId=t.highlightId,l.highlightScale=t.highlightScale,l.clipBounds=h,l.pickGroup=t.pickId/255,l.pixelRatio=t.pixelRatio;for(var p=0;p<3;++p)if(o[p]&&t.projectOpacity[p]<1===r){l.scale=t.projectScale[p],l.opacity=t.projectOpacity[p];for(var m=l5,g=0;g<16;++g)m[g]=0;for(var g=0;g<4;++g)m[5*g]=1;m[5*p]=0,a[p]<0?m[12+p]=f[0][p]:m[12+p]=f[1][p],PK(m,u,m),l.model=m;var y=(p+1)%3,v=(p+2)%3,_=hk(i5),b=hk(a5);_[y]=1,b[v]=1;var x=ck(d,c,u,pk(o5,_)),w=ck(d,c,u,pk(s5,b));if(Math.abs(x[1])>Math.abs(w[1])){var k=x;x=w,w=k,k=_,_=b,b=k;var T=y;y=v,v=T}x[0]<0&&(_[y]=-1),w[1]>0&&(b[v]=-1);for(var M=0,A=0,g=0;g<4;++g)M+=Math.pow(u[4*y+g],2),A+=Math.pow(u[4*v+g],2);_[y]/=Math.sqrt(M),b[v]/=Math.sqrt(A),l.axes[0]=_,l.axes[1]=b,l.fragClipBounds[0]=mk(u5,h[0],p,-1e8),l.fragClipBounds[1]=mk(u5,h[1],p,1e8),t.vao.draw(s.TRIANGLES,t.vertexCount),t.lineWidth>0&&(s.lineWidth(t.lineWidth),t.vao.draw(s.LINES,t.lineVertexCount,t.vertexCount))}}function vk(e,t,n,r,i,a){var o=n.gl;if(n.vao.bind(),i===n.opacity<1||a){e.bind();var s=e.uniforms;s.model=r.model||e5,s.view=r.view||e5,s.projection=r.projection||e5,r5[0]=2/o.drawingBufferWidth,r5[1]=2/o.drawingBufferHeight,s.screenSize=r5,s.highlightId=n.highlightId,s.highlightScale=n.highlightScale,s.fragClipBounds=h5,s.clipBounds=n.axes.bounds,s.opacity=n.opacity,s.pickGroup=n.pickId/255,s.pixelRatio=n.pixelRatio,n.vao.draw(o.TRIANGLES,n.vertexCount),n.lineWidth>0&&(o.lineWidth(n.lineWidth),n.vao.draw(o.LINES,n.lineVertexCount,n.vertexCount))}yk(t,n,r,i,a),n.vao.unbind()}function _k(e){var t=e.gl,n=U3.createPerspective(t),r=U3.createOrtho(t),i=U3.createProject(t),a=U3.createPickPerspective(t),o=U3.createPickOrtho(t),s=U3.createPickProject(t),l=LW(t),u=LW(t),c=LW(t),d=LW(t),f=sQ(t,[{buffer:l,size:3,type:t.FLOAT},{buffer:u,size:4,type:t.FLOAT},{buffer:c,size:2,type:t.FLOAT},{buffer:d,size:4,type:t.UNSIGNED_BYTE,normalized:!0}]),h=new fk(t,n,r,i,l,u,c,d,f,a,o,s);return h.update(e),h}function bk(e,t){var n=e;return n[3]*=t,n}function xk(e){if(SC(e))return m5;var t=BZ(e);return t.length?t:m5}function wk(e){return SC(e)?e:g5}function kk(e,t,n){var r,i,a,o,s,l=e.color,u=Array.isArray(l),c=Array.isArray(t),d=[];if(r=void 0!==e.colorscale?nP.makeColorScaleFunc(nP.extractScale(e.colorscale,e.cmin,e.cmax)):xk,i=u?function(e,t){return void 0===e[t]?m5:BZ(r(e[t]))}:xk,a=c?function(e,t){return void 0===e[t]?g5:wk(e[t])}:wk,u||c)for(var f=0;f<n;f++)o=i(l,f),s=a(t,f),d[f]=bk(o,s);else d=bk(BZ(l),t);return d}function Tk(e,t,n){if(!t||!t.visible)return null;for(var r=Yj(t),i=new Array(e.length),a=0;a<e.length;a++){var o=r(+e[a],a);i[a]=[-o[0]*n,o[1]*n]}return i}function Mk(e){for(var t=0;t<e.length;t++)if(e[t])return e[t].length;return 0}function Ak(e,t){var n=[Tk(e.x,e.error_x,t[0]),Tk(e.y,e.error_y,t[1]),Tk(e.z,e.error_z,t[2])],r=Mk(n);if(0===r)return null;for(var i=new Array(r),a=0;a<r;a++){for(var o=[[0,0,0],[0,0,0]],s=0;s<3;s++)if(n[s])for(var l=0;l<2;l++)o[l][s]=n[s][a][l];i[a]=o}return i}function Ck(e,t){this.scene=e,this.uid=t,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}function Sk(e,t,n){var r,i=(n+1)%3,a=(n+2)%3,o=[],s=[];for(r=0;r<e.length;++r){var l=e[r];!isNaN(l[i])&&isFinite(l[i])&&!isNaN(l[a])&&isFinite(l[a])&&(o.push([l[i],l[a]]),s.push(r))}var u=s0(o);for(r=0;r<u.length;++r)for(var c=u[r],d=0;d<c.length;++d)c[d]=s[c[d]];return{positions:e,cells:u,meshColor:t}}function Ek(e){for(var t=[0,0,0],n=[[0,0,0],[0,0,0],[0,0,0]],r=[0,0,0],i=0;i<3;i++){var a=e[i];a&&!1!==a.copy_zstyle&&(a=e[2]),a&&(t[i]=a.width/2,n[i]=UZ(a.color),r=a.thickness)}return{capSize:t,color:n,lineWidth:r}}function Pk(e){var t=[0,0];return Array.isArray(e)?[0,-1]:(e.indexOf("bottom")>=0&&(t[1]+=1),e.indexOf("top")>=0&&(t[1]-=1),e.indexOf("left")>=0&&(t[0]-=1),e.indexOf("right")>=0&&(t[0]+=1),t)}function Ik(e,t){return t(4*e)}function Lk(e){return c3[e]}function Ok(e,t,n,r,i){var a=null;if(uE.isArrayOrTypedArray(e)){a=[];for(var o=0;o<t;o++)void 0===e[o]?a[o]=r:a[o]=n(e[o],i)}else a=n(e,uE.identity);return a}function zk(e,t){var n,r,i,a,o,s,l=[],u=e.fullSceneLayout,c=e.dataScale,d=u.xaxis,f=u.yaxis,h=u.zaxis,p=t.marker,m=t.line,g=t.x||[],y=t.y||[],v=t.z||[],_=g.length,b=t.xcalendar,x=t.ycalendar,w=t.zcalendar;for(r=0;r<_;r++)i=d.d2l(g[r],0,b)*c[0],a=f.d2l(y[r],0,x)*c[1],o=h.d2l(v[r],0,w)*c[2],l[r]=[i,a,o];if(Array.isArray(t.text))s=t.text;else if(void 0!==t.text)for(s=new Array(_),r=0;r<_;r++)s[r]=t.text;if(n={position:l,mode:t.mode,text:s},"line"in t&&(n.lineColor=y5(m,1,_),n.lineWidth=m.width,n.lineDashes=m.dash),"marker"in t){var k=SP(t);n.scatterColor=y5(p,1,_),n.scatterSize=Ok(p.size,_,Ik,20,k),n.scatterMarker=Ok(p.symbol,_,Lk,"\u25cf"),n.scatterLineWidth=p.line.width,n.scatterLineColor=y5(p.line,1,_),n.scatterAngle=0}"textposition"in t&&(n.textOffset=Pk(t.textposition),n.textColor=y5(t.textfont,1,_),n.textSize=Ok(t.textfont.size,_,uE.identity,12),n.textFont=t.textfont.family,n.textAngle=0);var T=["x","y","z"];for(n.project=[!1,!1,!1],n.projectScale=[1,1,1],n.projectOpacity=[1,1,1],r=0;r<3;++r){var M=t.projection[T[r]];(n.project[r]=M.show)&&(n.projectOpacity[r]=M.opacity,n.projectScale[r]=M.scale)}n.errorBounds=v5(t,c);var A=Ek([t.error_x,t.error_y,t.error_z]);return n.errorColor=A.color,n.errorLineWidth=A.lineWidth,n.errorCapSize=A.capSize,n.delaunayAxis=t.surfaceaxis,n.delaunayColor=UZ(t.surfacecolor),n}function Rk(e){if(Array.isArray(e)){var t=e[0];return Array.isArray(t)&&(e=t),"rgb("+e.slice(0,3).map(function(e){return Math.round(255*e)})+")"}return null}function Dk(e,t){var n=new Ck(e,t.uid);return n.update(t),n}function Nk(e,t,n,r){var i=0,a=n("x"),o=n("y"),s=n("z");return rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],r),a&&o&&s&&(i=Math.min(a.length,o.length,s.length),t._xlength=t._ylength=t._zlength=i),i}function Fk(e,t,n){var r,i,a=0,o=n("locations");return o?(n("locationmode"),a=o.length):(r=n("lon")||[],i=n("lat")||[],a=Math.min(r.length,i.length),t._length=a,a)}function jk(e,t,n,r){function i(e){return PI.tickText(n,n.c2l(e),"hover").text+"\xb0"}var a=t.hi||e.hoverinfo,o="all"===a?dN.hoverinfo.flags:a.split("+"),s=-1!==o.indexOf("location")&&Array.isArray(e.locations),l=-1!==o.indexOf("lon"),u=-1!==o.indexOf("lat"),c=-1!==o.indexOf("text"),d=[];return s?d.push(t.loc):l&&u?d.push("("+i(t.lonlat[0])+", "+i(t.lonlat[1])+")"):l?d.push(r.lon+i(t.lonlat[0])):u&&d.push(r.lat+i(t.lonlat[1])),c&&TO(t,e,d),d.join("<br>")}function Bk(e,t){var n=t[0].trace,r=t[0].node3;r.style("opacity",t[0].trace.opacity),X5(r,n,e),r.selectAll("path.js-line").style("fill","none").each(function(e){var t=CC.select(this),n=e.trace,r=n.line||{};t.call(jE.stroke,r.color).call(PP.dashLine,r.dash||"",r.width||0),"none"!==n.fill&&t.call(jE.fill,n.fillcolor)})}function Uk(e,t){var n=e[0].trace;if(Array.isArray(n.locations))for(var r=K5(n,t),i=n.locationmode,a=0;a<e.length;a++){var o=e[a],s=Q5(i,o.loc,r);o.lonlat=s?s.properties.ct:[J5,J5]}}function Vk(e,t){if(!(this instanceof Vk))return new Vk(e,t);this.nodeSize=t||64,this.coords=e.slice();var n=Math.floor(e.length/2);this.ids=Array(n);for(var r=0;r<n;r++)this.ids[r]=r;Wk(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function Hk(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}function Wk(e,t,n,r,i,a){if(!(i-r<=n)){var o=Math.floor((r+i)/2);qk(e,t,o,r,i,a%2),Wk(e,t,n,r,o-1,a+1),Wk(e,t,n,o+1,i,a+1)}}function qk(e,t,n,r,i,a){for(;i>r;){if(i-r>600){var o=i-r+1,s=n-r+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1);qk(e,t,n,Math.max(r,Math.floor(n-s*u/o+c)),Math.min(i,Math.floor(n+(o-s)*u/o+c)),a)}var d=t[2*n+a],f=r,h=i;for(Gk(e,t,r,n),t[2*i+a]>d&&Gk(e,t,r,i);f<h;){for(Gk(e,t,f,h),f++,h--;t[2*f+a]<d;)f++;for(;t[2*h+a]>d;)h--}t[2*r+a]===d?Gk(e,t,r,h):(h++,Gk(e,t,h,i)),h<=n&&(r=h+1),n<=h&&(i=h-1)}}function Gk(e,t,n,r){Yk(e,n,r),Yk(t,2*n,2*r),Yk(t,2*n+1,2*r+1)}function Yk(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function Xk(e,t){if(!e||null==e.length)throw Error("Argument should be an array");t=null==t?1:Math.floor(t);for(var n=Array(2*t),r=0;r<t;r++){for(var i=-1/0,a=1/0,o=r,s=e.length;o<s;o+=t)e[o]>i&&(i=e[o]),e[o]<a&&(a=e[o]);n[r]=a,n[t+r]=i}return n}function Zk(e,t,n){if(!e)throw new TypeError("must specify data as first parameter");if(n=0|+(n||0),Array.isArray(e)&&Array.isArray(e[0])){var r=e[0].length,i=e.length*r;t&&"string"!==typeof t||(t=new(jZ(t||"float32"))(i+n));var a=t.length-n;if(i!==a)throw new Error("source length "+i+" ("+r+"x"+e.length+") does not match destination length "+a);for(var o=0,s=n;o<e.length;o++)for(var l=0;l<r;l++)t[s++]=e[o][l]}else if(t&&"string"!==typeof t)t.set(e,n);else{var u=jZ(t||"float32");0===n?t=new u(e):(t=new u(e.length+n),t.set(e,n))}return t}function Jk(e){return u4[e]?u4[e]:("string"===typeof e&&(e=u4[e]=e.split(/\s*,\s*|\s+/)),e)}function Kk(e){if("number"===typeof e)return Qk(e-Qk(e));for(var t=Qk(e),n=0,r=t.length;n<r;n++)t[n]=e[n]-t[n];return t}function Qk(e){if(e instanceof Float32Array)return e;if("number"===typeof e)return new Float32Array([e])[0];var t=new Float32Array(e);return t.set(e),t}function $k(e,t){function n(e){e?a(e):null===e&&o(),r()}function r(t){if("number"===typeof t)return i(t);t&&!Array.isArray(t)&&(t=[t]),e._refresh(),m.forEach(function(e,n){if(e){if(t&&(t[n]?e.draw=!0:e.draw=!1),!e.draw)return void(e.draw=!0);i(n)}})}function i(e){"number"===typeof e&&(e=m[e]),null!=e&&e&&e.count&&e.color&&e.opacity&&e.positions&&e.positions.length>1&&(e.scaleRatio=[e.scale[0]*e.viewport.width,e.scale[1]*e.viewport.height],s(e),e.after&&e.after(e))}function a(e){if(e){null!=e.length?"number"===typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var t=0,n=0;if(m=e.map(function(e,r){var i=m[r];return e?("function"===typeof e?e={after:e}:"number"===typeof e[0]&&(e={positions:e}),e=l4(e,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),i||(m[r]=i={id:r,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},e=bz({},p,e)),d4(i,e,[{lineWidth:function(e){return.5*+e},capSize:function(e){return.5*+e},opacity:parseFloat,errors:function(e){return e=s4(e),n+=e.length,e},positions:function(e,n){return e=s4(e,"float64"),n.count=Math.floor(e.length/2),n.bounds=o4(e,2),n.offset=t,t+=n.count,e}},{color:function(e,t){var n=t.count;if(e||(e="transparent"),!Array.isArray(e)||"number"===typeof e[0]){var r=e;e=Array(n);for(var i=0;i<n;i++)e[i]=r}if(e.length<n)throw Error("Not enough colors");for(var a=new Uint8Array(4*n),o=0;o<n;o++){var s=BZ(e[o],"uint8");a.set(s,4*o)}return a},range:function(e,t,n){var r=t.bounds;return e||(e=r),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=h4(t.scale),t.translateFract=h4(t.translate),e},viewport:function(e){var t;return Array.isArray(e)?t={x:e[0],y:e[1],width:e[2]-e[0],height:e[3]-e[1]}:e?(t={x:e.x||e.left||0,y:e.y||e.top||0},e.right?t.width=e.right-t.x:t.width=e.w||e.width||0,e.bottom?t.height=e.bottom-t.y:t.height=e.h||e.height||0):t={x:0,y:0,width:h.drawingBufferWidth,height:h.drawingBufferHeight},t}}]),i):i}),t||n){var r=m.reduce(function(e,t,n){return e+(t?t.count:0)},0),i=new Float64Array(2*r),a=new Uint8Array(4*r),o=new Float32Array(4*r);m.forEach(function(e,t){if(e){var n=e.positions,r=e.count,s=e.offset,l=e.color,u=e.errors;r&&(a.set(l,4*s),o.set(u,4*s),i.set(n,2*s))}}),l(f4(i)),u(h4(i)),c(a),d(o)}}}function o(){l.destroy(),u.destroy(),c.destroy(),d.destroy(),f.destroy()}if("function"===typeof e?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,l,u,c,d,f,h=e._gl,p={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},m=[];return c=e.buffer({usage:"dynamic",type:"uint8",data:null}),l=e.buffer({usage:"dynamic",type:"float",data:null}),u=e.buffer({usage:"dynamic",type:"float",data:null}),d=e.buffer({usage:"dynamic",type:"float",data:null}),f=e.buffer({usage:"static",type:"float",data:m4}),a(t),s=e({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision mediump float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:e.prop("range"),lineWidth:e.prop("lineWidth"),capSize:e.prop("capSize"),opacity:e.prop("opacity"),scale:e.prop("scale"),translate:e.prop("translate"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{color:{buffer:c,offset:function(e,t){return 4*t.offset},divisor:1},position:{buffer:l,offset:function(e,t){return 8*t.offset},divisor:1},positionFract:{buffer:u,offset:function(e,t){return 8*t.offset},divisor:1},error:{buffer:d,offset:function(e,t){return 16*t.offset},divisor:1},direction:{buffer:f,stride:24,offset:0},lineOffset:{buffer:f,stride:24,offset:8},capOffset:{buffer:f,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:!1,instances:e.prop("count"),count:m4.length}),bz(n,{update:a,draw:r,destroy:o,regl:e,gl:h,canvas:h.canvas,groups:m}),n}function eT(e,t,n){if(!e||null==e.length)throw Error("Argument should be an array");null==t&&(t=1),null==n&&(n=o4(e,t));for(var r=0;r<t;r++){var i=n[t+r],a=n[r],o=r,s=e.length;if(i===1/0&&a===-1/0)for(o=r;o<s;o+=t)e[o]=e[o]===i?1:e[o]===a?0:.5;else if(i===1/0)for(o=r;o<s;o+=t)e[o]=e[o]===i?1:0;else if(a===-1/0)for(o=r;o<s;o+=t)e[o]=e[o]===a?0:1;else{var l=i-a;for(o=r;o<s;o+=t)e[o]=0===l?.5:(e[o]-a)/l}}return e}function tT(e,t,n){n=n||2;var r=t&&t.length,i=r?t[0]*n:e.length,a=nT(e,0,i,n,!0),o=[];if(!a)return o;var s,l,u,c,d,f,h;if(r&&(a=uT(e,t,a,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(var p=n;p<i;p+=n)d=e[p],f=e[p+1],d<s&&(s=d),f<l&&(l=f),d>u&&(u=d),f>c&&(c=f);h=Math.max(u-s,c-l),h=0!==h?1/h:0}return iT(a,o,n,s,l,h),o}function nT(e,t,n,r,i){var a,o;if(i===ET(e,t,n,r)>0)for(a=t;a<n;a+=r)o=AT(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=AT(a,e[a],e[a+1],o);return o&&bT(o,o.next)&&(CT(o),o=o.next),o}function rT(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!bT(r,r.next)&&0!==_T(r.prev,r,r.next))r=r.next;else{if(CT(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function iT(e,t,n,r,i,a,o){if(e){!o&&a&&hT(e,r,i,a);for(var s,l,u=e;e.prev!==e.next;)if(s=e.prev,l=e.next,a?oT(e,r,i,a):aT(e))t.push(s.i/n),t.push(e.i/n),t.push(l.i/n),CT(e),e=l.next,u=l.next;else if((e=l)===u){o?1===o?(e=sT(e,t,n),iT(e,t,n,r,i,a,2)):2===o&&lT(e,t,n,r,i,a):iT(rT(e),t,n,r,i,a,1);break}}}function aT(e){var t=e.prev,n=e,r=e.next;if(_T(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(yT(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&_T(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function oT(e,t,n,r){var i=e.prev,a=e,o=e.next;if(_T(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=mT(s,l,t,n,r),f=mT(u,c,t,n,r),h=e.prevZ,p=e.nextZ;h&&h.z>=d&&p&&p.z<=f;){if(h!==e.prev&&h!==e.next&&yT(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&_T(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&yT(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&_T(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=d;){if(h!==e.prev&&h!==e.next&&yT(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&_T(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&yT(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&_T(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function sT(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!bT(i,a)&&xT(i,r,r.next,a)&&kT(i,a)&&kT(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),CT(r),CT(r.next),r=e=a),r=r.next}while(r!==e);return r}function lT(e,t,n,r,i,a){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&vT(o,s)){var l=MT(o,s);return o=rT(o,o.next),l=rT(l,l.next),iT(o,t,n,r,i,a),void iT(l,t,n,r,i,a)}s=s.next}o=o.next}while(o!==e)}function uT(e,t,n,r){var i,a,o,s,l,u=[];for(i=0,a=t.length;i<a;i++)o=t[i]*r,s=i<a-1?t[i+1]*r:e.length,l=nT(e,o,s,r,!1),l===l.next&&(l.steiner=!0),u.push(gT(l));for(u.sort(cT),i=0;i<u.length;i++)dT(u[i],n),n=rT(n,n.next);return n}function cT(e,t){return e.x-t.x}function dT(e,t){if(t=fT(e,t)){var n=MT(t,e);rT(n,n.next)}}function fT(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n.prev;var l,u=n,c=n.x,d=n.y,f=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&yT(a<d?i:o,a,c,d,a<d?o:i,a,r.x,r.y)&&((l=Math.abs(a-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&kT(r,e)&&(n=r,f=l),r=r.next;return n}function hT(e,t,n,r){var i=e;do{null===i.z&&(i.z=mT(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,pT(i)}function pT(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1);return e}function mT(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function gT(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function yT(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function vT(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!wT(e,t)&&kT(e,t)&&kT(t,e)&&TT(e,t)}function _T(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function bT(e,t){return e.x===t.x&&e.y===t.y}function xT(e,t,n,r){return!!(bT(e,t)&&bT(n,r)||bT(e,r)&&bT(n,t))||_T(e,t,n)>0!==_T(e,t,r)>0&&_T(n,r,e)>0!==_T(n,r,t)>0}function wT(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&xT(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function kT(e,t){return _T(e.prev,e,e.next)<0?_T(e,t,e.next)>=0&&_T(e,e.prev,t)>=0:_T(e,t,e.prev)<0||_T(e,e.next,t)<0}function TT(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!==n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function MT(e,t){var n=new ST(e.i,e.x,e.y),r=new ST(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function AT(e,t,n,r){var i=new ST(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function CT(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function ST(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function ET(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}function PT(e,t){function n(e){e?a(e):null===e&&o(),r()}function r(e){if("number"===typeof e)return i(e);e&&!Array.isArray(e)&&(e=[e]),y.forEach(function(e,t){i(t)})}function i(t){"number"===typeof t&&(t=y[t]),t&&t.count&&t.opacity&&t.positions&&t.positions.length>2&&(e._refresh(),t.fill&&t.triangles&&t.triangles.length>2&&u(t),t.thickness&&t.color&&(t.scaleRatio=[t.scale[0]*t.viewport.width,t.scale[1]*t.viewport.height],t.scaleRatio[0]>_||t.scaleRatio[1]>_?l(t):"rect"===t.join||!t.join&&(t.thickness<=2||t.positions.length>=b)?l(t):s(t),t.after&&t.after(t)))}function a(e){if(e){null!=e.length?"number"===typeof e[0]&&(e=[{positions:e}]):Array.isArray(e)||(e=[e]);var t=0;if(n.lines=y=e.map(function(e,n){var r=y[n];return void 0===e?r:(null===e?e={positions:null}:"function"===typeof e?e={after:e}:"number"===typeof e[0]&&(e={positions:e}),e=l4(e,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color stroke colors stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",after:"after callback done pass"}),null===e.positions&&(e.positions=[]),r||(y[n]=r={id:n,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,offset:0,dashLength:0,hole:!0},e=bz({},g,e)),d4(r,e,[{thickness:parseFloat,opacity:parseFloat,miterLimit:parseFloat,overlay:Boolean,join:function(e){return e},after:function(e){return e},hole:function(e){return e||[]},positions:function(e,n,r){e=s4(e,"float64");var i=Math.floor(e.length/2),a=o4(e,2);return n.range||r.range||(r.range=a),n.count=i,n.bounds=a,t+=i,e},fill:function(e){return e?BZ(e,"uint8"):null},dashes:function(e,t,n){var r,i=t.dashLength;if(!e||e.length<2)i=1,r=new Uint8Array([255,255,255,255,255,255,255,255]);else{i=0;for(var a=0;a<e.length;++a)i+=e[a];r=new Uint8Array(i*v);for(var o=0,s=255,l=0;l<2;l++)for(var u=0;u<e.length;++u){for(var c=0,d=e[u]*v*.5;c<d;++c)r[o++]=s;s^=255}}return p.subimage({data:r,width:r.length,height:1},0,t.id),t.dashLength=i,r}},{close:function(e,t,n){return null!=e?e:t.positions.length>=4&&t.positions[0]===t.positions[t.positions.length-2]&&t.positions[1]===t.positions[t.positions.length-1]},positions:function(e,t,n){if(t.fill&&e.length){for(var r=[],i={},a=0,o=0,s=0,l=t.count;o<l;o++){var u=t.positions[2*o],c=t.positions[2*o+1];Number.isNaN(u)||Number.isNaN(c)?(u=t.positions[2*a],c=t.positions[2*a+1],i[o]=a):a=o,r[s++]=u,r[s++]=c}for(var d=y4(r,t.hole),f=0,h=d.length;f<h;f++)null!=i[d[f]]&&(d[f]=i[d[f]]);t.triangles=d}return t.positions},color:function(e,t,n){var r=t.count;if(e||(e="transparent"),!Array.isArray(e)||"number"===typeof e[0]){var i=e;e=Array(r);for(var a=0;a<r;a++)e[a]=i}if(e.length<r)throw Error("Not enough colors");for(var o=new Uint8Array(4*r+4),s=0;s<r;s++){var l=BZ(e[s],"uint8");o.set(l,4*s)}return o},range:function(e,t,n){if(!t.count)return null;var r=t.bounds;e||(e=r);var i=r[2]-r[0],a=r[3]-r[1],o=e[2]-e[0],s=e[3]-e[1];return t.scale=[i/o,a/s],t.translate=[-e[0]/o+r[0]/o||0,-e[1]/s+r[1]/s||0],t.scaleFract=IT(t.scale),t.translateFract=IT(t.translate),e},viewport:function(e){var t;return Array.isArray(e)?t={x:e[0],y:e[1],width:e[2]-e[0],height:e[3]-e[1]}:e?(t={x:e.x||e.left||0,y:e.y||e.top||0},e.right?t.width=e.right-t.x:t.width=e.w||e.width||0,e.bottom?t.height=e.bottom-t.y:t.height=e.h||e.height||0):t={x:0,y:0,width:m.drawingBufferWidth,height:m.drawingBufferHeight},t}}]),r)}),t){var r=2*t+6*y.length,i=new Float64Array(r),a=0,o=new Uint8Array(2*r);y.forEach(function(e,t){if(e){var n=e.positions,r=e.count,s=e.color;if(e.offset=a,r){var l=new Float64Array(n.length);l.set(n),g4(l,2,e.bounds),e.close?n[0]===n[2*r-2]&&n[1]===n[2*r-1]?(i[2*a+0]=l[2*r-4],i[2*a+1]=l[2*r-3]):(i[2*a+0]=l[2*r-2],i[2*a+1]=l[2*r-1]):(i[2*a+0]=l[0],i[2*a+1]=l[1]),o[4*a+0]=s[0],o[4*a+1]=s[1],o[4*a+2]=s[2],o[4*a+3]=s[3],i.set(l,2*a+2),o.set(s,4*a+4),e.close?n[0]===n[2*r-2]&&n[1]===n[2*r-1]?(i[2*a+2*r+2]=l[2],i[2*a+2*r+3]=l[3],a+=r+2,e.count-=1):(i[2*a+2*r+2]=l[0],i[2*a+2*r+3]=l[1],i[2*a+2*r+4]=l[2],i[2*a+2*r+5]=l[3],a+=r+3):(i[2*a+2*r+2]=l[2*r-2],i[2*a+2*r+3]=l[2*r-1],i[2*a+2*r+4]=l[2*r-2],i[2*a+2*r+5]=l[2*r-1],a+=r+3)}}}),c(o),f(LT(i)),h(IT(i))}return n}}function o(){y.length=0,c.destroy(),d.destroy(),f.destroy(),p.destroy()}if("function"===typeof e?(t||(t={}),t.regl=e):t=e,t.length&&(t.positions=t),e=t.regl,!e.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var s,l,u,c,d,f,h,p,m=e._gl,g={positions:[],dashes:null,join:null,miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:null,fill:null},y=[],v=2,_=3e6,b=1e4;c=e.buffer({usage:"dynamic",type:"uint8",data:null}),d=e.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),f=e.buffer({usage:"dynamic",type:"float",data:null}),h=e.buffer({usage:"dynamic",type:"float",data:null}),p=e.texture({channels:1,data:new Uint8Array(524288),width:256,height:2048,mag:"linear",min:"linear"}),a(t);var x={primitive:"triangle strip",instances:e.prop("count"),count:4,offset:0,uniforms:{miterMode:function(e,t){return"round"===t.join?2:1},miterLimit:e.prop("miterLimit"),scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),thickness:e.prop("thickness"),dashPattern:p,dashLength:e.prop("dashLength"),dashShape:[256,2048],opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),scaleRatio:e.prop("scaleRatio"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(e,t){return!t.overlay}},scissor:{enable:!0,box:e.prop("viewport")},stencil:!1,viewport:e.prop("viewport")};return s=e(bz({cull:{enable:!0,face:"back"},vert:OW(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\nuniform float miterLimit, dashLength, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float MAX_LINES = 256.;\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIST = 1.;\n\n//TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n//TODO: precalculate dot products, normalize things beforehead etc.\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\tfloat depth = (MAX_LINES - 1. - id) / MAX_LINES;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevDirection = normalize(prevDiff);\n\tvec2 currDirection = normalize(currDiff);\n\tvec2 nextDirection = normalize(nextDiff);\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t//collapsed/unidirectional segment cases\n\tif (prevDirection == currDirection) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (nextDirection == currDirection) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * scale + translate;\n\tvec2 aBotPosition = (aBotCoord) * scale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * scale + translate;\n\tvec2 bBotPosition = (bBotCoord) * scale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:OW(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:d,divisor:0,stride:8,offset:0},lineTop:{buffer:d,divisor:0,stride:8,offset:4},aColor:{buffer:c,stride:4,offset:function(e,t){return 4*t.offset},divisor:1},bColor:{buffer:c,stride:4,offset:function(e,t){return 4*t.offset+4},divisor:1},prevCoord:{buffer:f,stride:8,offset:function(e,t){return 8*t.offset},divisor:1},aCoord:{buffer:f,stride:8,offset:function(e,t){return 8+8*t.offset},divisor:1},bCoord:{buffer:f,stride:8,offset:function(e,t){return 16+8*t.offset},divisor:1},nextCoord:{buffer:f,stride:8,offset:function(e,t){return 24+8*t.offset},divisor:1}}},x)),l=e(bz({vert:OW(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float thickness, pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nconst float MAX_LINES = 256.;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\t// vec2 scaleRatio = scale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\tfloat depth = (MAX_LINES - 1. - id) / (MAX_LINES);\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scaleRatio);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:OW(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D dashPattern;\nuniform vec2 dashShape;\nuniform float dashLength, pixelRatio, thickness, opacity, id;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashPattern, vec2(t * dashLength * 2. / dashShape.x, (id + .5) / dashShape.y)).r;\n\n\tgl_FragColor = fragColor * dash;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:d,divisor:0,stride:8,offset:0},lineTop:{buffer:d,divisor:0,stride:8,offset:4},aCoord:{buffer:f,stride:8,offset:function(e,t){return 8+8*t.offset},divisor:1},bCoord:{buffer:f,stride:8,offset:function(e,t){return 16+8*t.offset},divisor:1},aCoordFract:{buffer:h,stride:8,offset:function(e,t){return 8+8*t.offset},divisor:1},bCoordFract:{buffer:h,stride:8,offset:function(e,t){return 16+8*t.offset},divisor:1},color:{buffer:c,stride:4,offset:function(e,t){return 4*t.offset},divisor:1}}},x)),u=e({primitive:"triangle",elements:function(e,t){return t.triangles},offset:0,vert:OW(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract, scaleRatio;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:OW(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= opacity;\n}\n"]),uniforms:{scale:e.prop("scale"),color:e.prop("fill"),scaleFract:e.prop("scaleFract"),translateFract:e.prop("translateFract"),translate:e.prop("translate"),opacity:e.prop("opacity"),pixelRatio:e.context("pixelRatio"),id:e.prop("id"),viewport:function(e,t){return[t.viewport.x,t.viewport.y,e.viewportWidth,e.viewportHeight]}},attributes:{position:{buffer:f,stride:8,offset:function(e,t){return 8+8*t.offset}},positionFract:{buffer:h,stride:8,offset:function(e,t){return 8+8*t.offset}}},blend:x.blend,depth:{enable:!1},scissor:x.scissor,stencil:x.stencil,viewport:x.viewport}),bz(n,{update:a,draw:r,destroy:o,regl:e,gl:m,canvas:m.canvas,lines:y}),n}function IT(e){var t=new Float32Array(e.length);t.set(e);for(var n=0,r=t.length;n<r;n++)t[n]=e[n]-t[n];return t}function LT(e){if(e instanceof Float32Array)return e;var t=new Float32Array(e);return t.set(e),t}function OT(e,t){null==t&&(t=!0);var n=e[0],r=e[1],i=e[2],a=e[3];return null==a&&(a=t?1:255),t&&(n*=255,r*=255,i*=255,a*=255),n=255&IZ(n,0,255),r=255&IZ(r,0,255),i=255&IZ(i,0,255),a=255&IZ(a,0,255),16777216*n+(r<<16)+(i<<8)+a}function zT(e,t){e=+e;var n=e>>>24,r=(16711680&e)>>>16,i=(65280&e)>>>8,a=255&e;return!1===t?[n,r,i,a]:[n/255,r/255,i/255,a/255]}function RT(e){var t;return arguments.length>1&&(e=arguments),"string"===typeof e&&(e=e.split(/\s/).map(parseFloat)),e.length&&"number"===typeof e[0]?t=2===e.length?{width:e[0],height:e[1],x:0,y:0}:{x:e[0],y:e[1],width:e[2]-e[0]||0,height:e[3]-e[1]||0}:e&&(e=l4(e,{left:"x l left Left",top:"y t top Top",width:"w width",height:"h height",bottom:"b bottom",right:"r right"}),t={x:e.left||0,y:e.top||0},null==e.width?e.right?t.width=e.right-t.x:t.width=0:t.width=e.width,null==e.height?e.bottom?t.height=e.bottom-t.y:t.height=0:t.height=e.height),t}function DT(e,t,n,r,i){var a=["function ",e,"(a,l,h,",r.join(","),"){",i?"":"var i=",n?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];return i?t.indexOf("c")<0?a.push(";if(x===y){return m}else if(x<=y){"):a.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):a.push(";if(",t,"){i=m;"),n?a.push("l=m+1}else{h=m-1}"):a.push("h=m-1}else{l=m+1}"),a.push("}"),i?a.push("return -1};"):a.push("return i};"),a.join("")}function NT(e,t,n,r){return new Function([DT("A","x"+e+"y",t,["y"],r),DT("P","c(x,y)"+e+"0",t,["y","c"],r),"function dispatchBsearch",n,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",n].join(""))()}function FT(e,t,n,r,i){i<=4*T4?jT(0,i-1,e,t,n,r):GT(0,i-1,e,t,n,r)}function jT(e,t,n,r,i,a){for(var o=e+1;o<=t;++o){for(var s=n[o],l=r[2*o],u=r[2*o+1],c=i[o],d=a[o],f=o;f>e;){var h=n[f-1],p=r[2*(f-1)];if((h-s||l-p)>=0)break;n[f]=h,r[2*f]=p,r[2*f+1]=r[2*f-1],i[f]=i[f-1],a[f]=a[f-1],f-=1}n[f]=s,r[2*f]=l,r[2*f+1]=u,i[f]=c,a[f]=d}}function BT(e,t,n,r,i,a){var o=n[e],s=r[2*e],l=r[2*e+1],u=i[e],c=a[e];n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],a[e]=a[t],n[t]=o,r[2*t]=s,r[2*t+1]=l,i[t]=u,a[t]=c}function UT(e,t,n,r,i,a){n[e]=n[t],r[2*e]=r[2*t],r[2*e+1]=r[2*t+1],i[e]=i[t],a[e]=a[t]}function VT(e,t,n,r,i,a,o){var s=r[e],l=i[2*e],u=i[2*e+1],c=a[e],d=o[e];r[e]=r[t],i[2*e]=i[2*t],i[2*e+1]=i[2*t+1],a[e]=a[t],o[e]=o[t],r[t]=r[n],i[2*t]=i[2*n],i[2*t+1]=i[2*n+1],a[t]=a[n],o[t]=o[n],r[n]=s,i[2*n]=l,i[2*n+1]=u,a[n]=c,o[n]=d}function HT(e,t,n,r,i,a,o,s,l,u,c){s[e]=s[t],l[2*e]=l[2*t],l[2*e+1]=l[2*t+1],u[e]=u[t],c[e]=c[t],s[t]=n,l[2*t]=r,l[2*t+1]=i,u[t]=a,c[t]=o}function WT(e,t,n,r,i){return(n[e]-n[t]||r[2*t]-r[2*e]||i[e]-i[t])<0}function qT(e,t,n,r,i,a,o,s){return(t-a[e]||o[2*e]-n||i-s[e])<0}function GT(e,t,n,r,i,a){var o=(t-e+1)/6|0,s=e+o,l=t-o,u=e+t>>1,c=u-o,d=u+o,f=s,h=c,p=u,m=d,g=l,y=e+1,v=t-1,_=0;WT(f,h,n,r,i,a)&&(_=f,f=h,h=_),WT(m,g,n,r,i,a)&&(_=m,m=g,g=_),WT(f,p,n,r,i,a)&&(_=f,f=p,p=_),WT(h,p,n,r,i,a)&&(_=h,h=p,p=_),WT(f,m,n,r,i,a)&&(_=f,f=m,m=_),WT(p,m,n,r,i,a)&&(_=p,p=m,m=_),WT(h,g,n,r,i,a)&&(_=h,h=g,g=_),WT(h,p,n,r,i,a)&&(_=h,h=p,p=_),WT(m,g,n,r,i,a)&&(_=m,m=g,g=_);var b=n[h],x=r[2*h],w=r[2*h+1],k=i[h],T=a[h],M=n[m],A=r[2*m],C=r[2*m+1],S=i[m],E=a[m],P=f,I=p,L=g,O=s,z=u,R=l,D=n[P],N=n[I],F=n[L];n[O]=D,n[z]=N,n[R]=F;for(var j=0;j<2;++j){var B=r[2*P+j],U=r[2*I+j],V=r[2*L+j];r[2*O+j]=B,r[2*z+j]=U,r[2*R+j]=V}var H=i[P],W=i[I],q=i[L];i[O]=H,i[z]=W,i[R]=q;var G=a[P],Y=a[I],X=a[L];a[O]=G,a[z]=Y,a[R]=X,UT(c,e,n,r,i,a),UT(d,t,n,r,i,a);for(var Z=y;Z<=v;++Z)if(qT(Z,b,x,w,k,n,r,i))Z!==y&&BT(Z,y,n,r,i,a),++y;else if(!qT(Z,M,A,C,S,n,r,i))for(;;){if(qT(v,M,A,C,S,n,r,i)){qT(v,b,x,w,k,n,r,i)?(VT(Z,y,v,n,r,i,a),++y,--v):(BT(Z,v,n,r,i,a),--v);break}if(--v<Z)break}HT(e,y-1,b,x,w,k,T,n,r,i,a),HT(t,v+1,M,A,C,S,E,n,r,i,a),y-2-e<=T4?jT(e,y-2,n,r,i,a):GT(e,y-2,n,r,i,a),t-(v+2)<=T4?jT(v+2,t,n,r,i,a):GT(v+2,t,n,r,i,a),v-y<=T4?jT(y,v,n,r,i,a):GT(y,v,n,r,i,a)}function YT(e,t,n,r,i,a,o,s){for(var l=n,u=n;u<r;++u){var c=e[2*u],d=e[2*u+1],f=t[u];i<=c&&c<=o&&a<=d&&d<=s&&(u===l?l+=1:(e[2*u]=e[2*l],e[2*u+1]=e[2*l+1],t[u]=t[l],e[2*l]=c,e[2*l+1]=d,t[l]=f,l+=1))}return l}function XT(e,t,n){this.pixelSize=e,this.offset=t,this.count=n}function ZT(e,t,n,r){function i(r,a,o,s,l,u){var c=.5*o,d=s+1,f=l-s;n[g]=f,m[g++]=u;for(var h=0;h<2;++h)for(var p=0;p<2;++p){var y=r+h*c,v=a+p*c,_=YT(e,t,d,l,y,v,y+c,v+c);if(_!==d){if(_-d>=Math.max(.9*f,32)){var b=l+s>>>1;i(y,v,c,d,b,u+1),d=b}i(y,v,c,d,_,u+1),d=_}}}var a=e.length>>>1;if(a<1)return[];t||(t=Array(a)),n||(n=Array(a)),r||(r=[]);for(var o=0;o<a;++o)t[o]=o;if(!r.length||r.length<4||r[0]>=r[2]||r[1]>=r[3]){var s=o4(e,2);s[0]===s[2]&&(s[2]+=1),s[1]===s[3]&&(s[3]+=1),r[0]=s[0],r[1]=s[1],r[2]=s[2],r[3]=s[3]}var l=r[0],u=r[1],c=r[2],d=r[3],f=1/(c-l),h=1/(d-u),p=Math.max(c-l,d-u),m=new Int32Array(a),g=0;i(l,u,p,0,a,0),k4(m,e,t,n,a);for(var y=[],v=0,_=a,g=a-1;g>=0;--g){e[2*g]=(e[2*g]-l)*f,e[2*g+1]=(e[2*g+1]-u)*h;var b=m[g];b!==v&&(y.push(new XT(p*Math.pow(.5,b),g+1,_-(g+1))),_=g+1,v=b)}return y.push(new XT(p*Math.pow(.5,b+1),0,_)),y}function JT(e,t){function n(e){e?o(e):null===e&&d(),r()}function r(e){return"number"===typeof e?i(e):Array.isArray(e)?void e.forEach(function(e,t){if(null!=e)return e.length?i(e,t):i(e)}):void k.forEach(function(e,t){e&&i(t)})}function i(t,n){"number"===typeof t&&(t=k[t]);var r;if(Array.isArray(t)&&(r=t,t=k[n]),t&&t.count&&t.opacity){var i;if(r){i=Array(t.count);for(var o=0;o<r.length;o++)i[r[o]]=!0}if(t.markerIds[0]){e._refresh();var s=a(t.markerIds[0],t,i);h(s)}for(var l=[],u=1;u<t.markerIds.length;u++){var c=t.markerIds[u];c&&c.length&&[].push.apply(l,a(c,t,i))}l.length&&(e._refresh(),f(l))}}function a(e,t,n){function r(e,t){for(var n=[],r=0,i=e.length;r<i;r++){var o=e[r];t[o-a]&&n.push(o)}return n}var i=t.range,a=t.offset;if(!e.snap){var o=n?r(e.data,n):e.elements;return[bz({},t,{elements:o,offset:0,count:n?o.length:e.length,marker:T[e.id]})]}for(var s=[],l=e.lod,u=e.x,c=e.id,d=Math.min((i[2]-i[0])/t.viewport.width,(i[3]-i[1])/t.viewport.height),f=l.length;f--;){var h=l[f];if(!(h.pixelSize&&h.pixelSize<d&&f>1)){var p=h.offset,m=h.count+p,g=w4.ge(u,i[0],p,m-1),y=w4.lt(u,i[2],g,m-1)+1;if(!(y<=g))if(n){var v=r(e.data.subarray(g,y),n);s.push(bz({},t,{elements:v,marker:T[c],offset:0,count:v.length}))}else s.push(bz({},t,{elements:e.elements,marker:T[c],offset:g,count:y-g}))}}return s}function o(t){if(t){null!=t.length?"number"===typeof t[0]&&(t=[{positions:t}]):Array.isArray(t)||(t=[t]);var r=0,i=0,a=0;n.groups=k=t.map(function(t,n){var o=k[n];return void 0===t?o:(null===t?t={positions:null}:"function"===typeof t?t={after:t}:"number"===typeof t[0]&&(t={positions:t}),t=l4(t,{positions:"positions data points",snap:"snap cluster",size:"sizes size radius",borderSize:"borderSizes borderSize stroke-width strokeWidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",palette:"palette swatch",marker:"markers marker shape",range:"range dataBox",viewport:"viewport viewBox",opacity:"opacity alpha"}),null===t.positions&&(t.positions=[]),o||(k[n]=o={id:n,scale:null,translate:null,scaleFract:null,translateFract:null,markerIds:[]},t=bz({},w,t)),!t.positions||"marker"in t||(t.marker=o.marker,delete o.marker),!t.marker||"positions"in t||(t.positions=o.positions,delete o.positions),d4(o,t,[{snap:!0,size:function(e){return i+=e.length?1:0,e},borderSize:function(e){return i+=e.length?1:0,e},opacity:parseFloat,color:function(e){return e=u(e),a++,e},borderColor:function(e){return e=u(e),a++,e},positions:function(e,t,n){e=s4(e,"float64");var i=t.count=Math.floor(e.length/2),a=t.bounds=i?o4(e,2):null;return n.range||t.range||(delete t.range,n.range=a),t.offset=r,r+=i,n.marker||t.marker||(delete t.marker,n.marker=null),e}},{marker:function(e,t,n){if(t.markerIds.length=0,e&&"number"!==typeof e[0])for(var r=0,i=e.length;r<i;r++){var a=l(e[r]);t.markerIds[a]||(t.markerIds[a]=[]),t.markerIds[a].push(r)}else{var o=l(e),s=i4(t.count);t.markerIds[o]=s}return e}},{positions:function(t,n){for(var r=n.markerIds,i=n.snap,a=n.bounds,o=n.offset,s=0;s<r.length;s++){var l=r[s];if(l&&l.length){var u=l.length,c=void 0;if(l.id=s,i&&(!0===i||u>i)){l.snap=!0;var d=l.x=Array(u),f=l.w=Array(u),h=void 0;if(r.length>1){h=Array(2*u);for(var p=0;p<u;p++){var m=l[p];h[2*p]=t[2*m],h[2*p+1]=t[2*m+1]}}else h=new Float64Array(t.length),h.set(t);var g=new Uint32Array(u);l.lod=M4(h,g,f,a),c=new Uint32Array(u);for(var y=0;y<u;y++){var v=g[y],_=l[v];c[y]=_+o,d[y]=t[2*_]}}else{c=new Uint32Array(u);for(var b=0;b<u;b++)c[b]=l[b]+o}l.data=c,l.elements=e.elements({primitive:"points",type:"uint32",data:c})}}},range:function(e,t,n){var r=t.bounds;if(r)return e||(e=r),t.scale=[1/(e[2]-e[0]),1/(e[3]-e[1])],t.translate=[-e[0],-e[1]],t.scaleFract=C4(t.scale),t.translateFract=C4(t.translate),e},viewport:function(e){return x4(e||[_.drawingBufferWidth,_.drawingBufferHeight])}}]),o)}),s({point:r,size:i,color:a})}}function s(e){var t=e.point,n=e.size,r=e.color,i=k.reduce(function(e,t,n){return e+(t?t.count:0)},0);if(t){var a=new Float32Array(2*i),o=new Float32Array(2*i);k.forEach(function(e,t){if(e){var n=e.positions,r=e.count,i=e.offset;r&&(a.set(A4(n),2*i),o.set(C4(n),2*i))}}),m(a),g(o)}if(n){var s=new Uint8Array(2*i);k.forEach(function(e,t){if(e){var n=e.count,r=e.offset,i=e.size,a=e.borderSize;if(n&&(i.length||a.length)){for(var o=new Uint8Array(2*n),l=0;l<n;l++)o[2*l]=Math.round(255*(null==i[l]?i:i[l])/C),o[2*l+1]=Math.round(255*(null==a[l]?a:a[l])/C);s.set(o,2*r)}}}),p(s)}if(r){var l=new Uint16Array(4*i);k.forEach(function(e,t){if(e){var n=e.count,r=e.offset,i=e.color,a=e.borderColor;if(n&&(i.length||a.length)){for(var o=new Uint16Array(4*n),s=0;s<n;s++)null!=i[s]&&(o[4*s]=i[s]%A,o[4*s+1]=Math.floor(i[s]/A)),null!=a[s]&&(o[4*s+2]=a[s]%A,o[4*s+3]=Math.floor(a[s]/A));l.set(o,4*r)}}}),y(l)}}function l(t){var n=null==t?0:M.indexOf(t);if(n>=0)return n;var r;if(t instanceof Uint8Array||t instanceof Uint8ClampedArray)r=t;else{r=new Uint8Array(t.length);for(var i=0,a=t.length;i<a;i++)r[i]=255*t[i]}var o=Math.floor(Math.sqrt(r.length));return n=T.length,M.push(t),T.push(e.texture({channels:1,data:r,radius:o,mag:"linear",min:"linear"})),n}function u(e){Array.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++){var r=e[n];if("number"!==typeof r){r=BZ(r,"uint8");var i=_4(r,!1);if(null==x[i]){var a=b.length;x[i]=Math.floor(a/4),b[a]=r[0],b[a+1]=r[1],b[a+2]=r[2],b[a+3]=r[3]}t[n]=x[i]}else t[n]=r}return c(b),1===t.length?t[0]:t}function c(e){var t=Math.ceil(.25*e.length/A);if(t>1){e=e.slice();for(var n=.25*e.length%A;n<t*A;n++)e.push(0,0,0,0)}v.height<t&&v.resize(A,t),v.subimage({width:Math.min(.25*e.length,A),height:t,data:e},0,0)}function d(){k.length=0,p.destroy(),m.destroy(),g.destroy(),y.destroy(),v.destroy()}"function"===typeof e?(t||(t={}),t.regl=e):(t=e,e=null),t&&t.length&&(t.positions=t),e=t.regl;var f,h,p,m,g,y,v,_=e._gl,b=[],x={},w={color:"black",borderColor:"transparent",borderSize:1,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,offset:0,count:0,bounds:null,positions:[],snap:1e4},k=[],T=[null],M=[null],A=4096,C=100;v=e.texture({data:new Uint8Array(4*A),width:A,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),p=e.buffer({usage:"dynamic",type:"float",data:null}),y=e.buffer({usage:"dynamic",type:"uint16",data:null}),m=e.buffer({usage:"dynamic",type:"float",data:null}),g=e.buffer({usage:"dynamic",type:"float",data:null}),t.clone?(k=t.clone.groups.map(function(t){return t=bz({},t),t.markerIds&&(t.markerIds=t.markerIds.map(function(t){var n=t.slice();return n.lod=t.lod,n.snap=t.snap,n.data=t.data,n.id=t.id,n.x=t.x,n.w=t.w,n.elements=e.elements({primitive:"points",type:"uint32",data:t.data}),n})),t}),t.clone.markers.forEach(function(e){l(e)}),c(t.clone.palette),s({point:!0,color:!0,size:!0})):o(t);var S={uniforms:{pixelRatio:e.context("pixelRatio"),palette:v,paletteSize:function(e,t){return[A,v.height]},scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),opacity:e.prop("opacity"),marker:e.prop("marker")},attributes:{position:m,positionFract:g,size:function(e,t){return t.size.length?{buffer:p,stride:2,offset:0}:{constant:[Math.round(255*t.size/C)]}},borderSize:function(e,t){return t.borderSize.length?{buffer:p,stride:2,offset:1}:{constant:[Math.round(255*t.borderSize/C)]}},colorId:function(e,t){return t.color.length?{buffer:y,stride:8,offset:0}:{constant:[t.color]}},borderColorId:function(e,t){return t.borderColor.length?{buffer:y,stride:8,offset:4}:{constant:[t.borderColor]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:e.prop("viewport")},viewport:e.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:e.prop("elements"),count:e.prop("count"),offset:e.prop("offset"),primitive:"points"};if(b4)h=e(bz({},S,{frag:OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth, fragBorderSize, fragSize;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float radius = length(2.0*gl_PointCoord.xy-1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n\n  float centerFraction = fragBorderSize == 0. ? 2. : fragSize / (fragSize + fragBorderSize + 1.25);\n\n  vec4 baseColor = mix(borderColor, color, smoothStep(radius, centerFraction));\n  float alpha = 1.0 - pow(1.0 - baseColor.a, 1.);\n  gl_FragColor = vec4(baseColor.rgb * alpha, alpha);\n}\n"]),vert:OW(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth, fragBorderSize, fragSize;\n\nvoid main() {\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n  fragBorderSize = borderSize;\n  fragSize = size;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t+ (position + translate) * scaleFract\n\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = borderSize == 0. ? 2. : 1. - 2. * borderSize / (size + borderSize);\n  fragWidth = 1. / gl_PointSize;\n}\n"]),uniforms:{color:function(e,t){var n=t.color.length?t.color[0]:t.color;return b.slice(4*n,4*n+4).map(function(e){return e/255})},borderColor:function(e,t){var n=t.borderColor.length?t.borderColor[0]:t.borderColor;return b.slice(4*n,4*n+4).map(function(e){return e/255})},pixelRatio:e.context("pixelRatio"),palette:v,paletteSize:function(e,t){return[A,v.height]},scale:e.prop("scale"),scaleFract:e.prop("scaleFract"),translate:e.prop("translate"),translateFract:e.prop("translateFract"),opacity:e.prop("opacity"),marker:e.prop("marker")},attributes:{position:m,positionFract:g,size:S.attributes.size,borderSize:S.attributes.borderSize}}));else{var E=bz({},S);E.frag=OW(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nuniform sampler2D marker;\nuniform float pixelRatio, opacity;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(marker, gl_PointCoord).r, delta = fragWidth;\n\n  //max-distance alpha\n  if (dist < 0.003) discard;\n\n  //null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a);\n    return;\n  }\n\n  float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n  float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n  vec4 color = fragBorderColor;\n  color.a *= borderColorAmt;\n  color = mix(color, fragColor, colorAmt);\n  color.a *= opacity;\n\n  gl_FragColor = color;\n}\n"]),E.vert=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\nattribute vec2 colorId, borderColorId;\n\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform float pixelRatio;\nuniform sampler2D palette;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius,\n\t\tfragWidth, fragBorderColorLevel, fragColorLevel;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\n\nvoid main() {\n  vec4 color = texture2D(palette, paletteCoord(colorId));\n  vec4 borderColor = texture2D(palette, paletteCoord(borderColorId));\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pixelRatio;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}\n"]),f=e(E);var P=bz({},S);P.frag=OW(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\n\nuniform float opacity;\nvarying float fragBorderRadius, fragWidth;\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif(radius > 1.0 + delta) {\n\t\tdiscard;\n\t\treturn;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),P.vert=OW(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\nattribute float size, borderSize;\nattribute vec2 colorId, borderColorId;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio;\nuniform sampler2D palette;\nuniform vec2 paletteSize;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nvec2 paletteCoord(float id) {\n  return vec2(\n    (mod(id, paletteSize.x) + .5) / paletteSize.x,\n    (floor(id / paletteSize.x) + .5) / paletteSize.y\n  );\n}\nvec2 paletteCoord(vec2 id) {\n  return vec2(\n    (id.x + .5) / paletteSize.x,\n    (id.y + .5) / paletteSize.y\n  );\n}\n\nvoid main() {\n  vec4 color = texture2D(palette, paletteCoord(colorId));\n  vec4 borderColor = texture2D(palette, paletteCoord(borderColorId));\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t+ (position + translate) * scaleFract\n\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0, 1);\n\n  fragBorderRadius = borderSize == 0. ? 2. : 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),h=e(P)}return bz(n,{update:o,draw:r,destroy:d,regl:e,gl:_,canvas:_.canvas,groups:k,markers:M,palette:b}),n}function KT(e,t){t||(t={});var n,r,i,a,o,s,l,u,c,d,f,h=null==t.cutoff?.25:t.cutoff,p=null==t.radius?8:t.radius,m=t.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!t.width||!t.height)throw Error("For raw data width and height should be provided by options");n=t.width,r=t.height,a=e,s=t.stride?t.stride:Math.floor(e.length/n/r)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(u=e,l=u.getContext("2d"),n=u.width,r=u.height,c=l.getImageData(0,0,n,r),a=c.data,s=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(u=e.canvas,l=e,n=u.width,r=u.height,c=l.getImageData(0,0,n,r),a=c.data,s=4):window.ImageData&&e instanceof window.ImageData&&(c=e,n=e.width,r=e.height,a=c.data,s=4);if(i=Math.max(n,r),window.Uint8ClampedArray&&a instanceof window.Uint8ClampedArray||window.Uint8Array&&a instanceof window.Uint8Array)for(o=a,a=Array(n*r),d=0,f=o.length;d<f;d++)a[d]=o[d*s+m]/255;else if(1!==s)throw Error("Raw data can have only 1 value per pixel");var g=Array(n*r),y=Array(n*r),v=Array(i),_=Array(i),b=Array(i+1),x=Array(i);for(d=0,f=n*r;d<f;d++){var w=a[d];g[d]=1===w?0:0===w?P4:Math.pow(Math.max(0,.5-w),2),y[d]=1===w?P4:0===w?0:Math.pow(Math.max(0,w-.5),2)}QT(g,n,r,v,_,x,b),QT(y,n,r,v,_,x,b);var k=window.Float32Array?new Float32Array(n*r):new Array(n*r);for(d=0,f=n*r;d<f;d++)k[d]=IZ(1-((g[d]-y[d])/p+h),0,1);return k}function QT(e,t,n,r,i,a,o){for(var s=0;s<t;s++){for(var l=0;l<n;l++)r[l]=e[l*t+s];for($T(r,i,a,o,n),l=0;l<n;l++)e[l*t+s]=i[l]}for(l=0;l<n;l++){for(s=0;s<t;s++)r[s]=e[l*t+s];for($T(r,i,a,o,t),s=0;s<t;s++)e[l*t+s]=Math.sqrt(i[s])}}function $T(e,t,n,r,i){n[0]=0,r[0]=-P4,r[1]=+P4;for(var a=1,o=0;a<i;a++){for(var s=(e[a]+a*a-(e[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);s<=r[o];)o--,s=(e[a]+a*a-(e[n[o]]+n[o]*n[o]))/(2*a-2*n[o]);o++,n[o]=a,r[o]=s,r[o+1]=+P4}for(a=0,o=0;a<i;a++){for(;r[o+1]<a;)o++;t[a]=(a-n[o])*(a-n[o])+e[n[o]]}}function eM(e){var t=0,n=0,r=0,i=0;return e.map(function(e){e=e.slice();var a=e[0],o=a.toUpperCase();if(a!=o)switch(e[0]=o,a){case"a":e[6]+=r,e[7]+=i;break;case"v":e[1]+=i;break;case"h":e[1]+=r;break;default:for(var s=1;s<e.length;)e[s++]+=r,e[s++]+=i}switch(o){case"Z":r=t,i=n;break;case"H":r=e[1];break;case"V":i=e[1];break;case"M":r=t=e[1],i=n=e[2];break;default:r=e[e.length-2],i=e[e.length-1]}return e})}function tM(e){for(var t,n=[],r=0,i=0,a=0,o=0,s=null,l=null,u=0,c=0,d=0,f=e.length;d<f;d++){var h=e[d],p=h[0];switch(p){case"M":a=h[1],o=h[2];break;case"A":h=iM(u,c,h[1],h[2],oM(h[3]),h[4],h[5],h[6],h[7]),h.unshift("C"),h.length>7&&(n.push(h.splice(0,7)),h.unshift("C"));break;case"S":var m=u,g=c;"C"!=t&&"S"!=t||(m+=m-r,g+=g-i),h=["C",m,g,h[1],h[2],h[3],h[4]];break;case"T":"Q"==t||"T"==t?(s=2*u-s,l=2*c-l):(s=u,l=c),h=rM(u,c,s,l,h[1],h[2]);break;case"Q":s=h[1],l=h[2],h=rM(u,c,h[1],h[2],h[3],h[4]);break;case"L":h=nM(u,c,h[1],h[2]);break;case"H":h=nM(u,c,h[1],c);break;case"V":h=nM(u,c,u,h[1]);break;case"Z":h=nM(u,c,a,o)}t=p,u=h[h.length-2],c=h[h.length-1],h.length>4?(r=h[h.length-4],i=h[h.length-3]):(r=u,i=c),n.push(h)}return n}function nM(e,t,n,r){return["C",e,t,n,r,n,r]}function rM(e,t,n,r,i,a){return["C",e/3+2/3*n,t/3+2/3*r,i/3+2/3*n,a/3+2/3*r,i,a]}function iM(e,t,n,r,i,a,o,s,l,u){if(u)_=u[0],b=u[1],y=u[2],v=u[3];else{var c=aM(e,t,-i);e=c.x,t=c.y,c=aM(s,l,-i),s=c.x,l=c.y;var d=(e-s)/2,f=(t-l)/2,h=d*d/(n*n)+f*f/(r*r);h>1&&(h=Math.sqrt(h),n*=h,r*=h);var p=n*n,m=r*r,g=(a==o?-1:1)*Math.sqrt(Math.abs((p*m-p*f*f-m*d*d)/(p*f*f+m*d*d)));g==1/0&&(g=1);var y=g*n*f/r+(e+s)/2,v=g*-r*d/n+(t+l)/2,_=Math.asin(((t-v)/r).toFixed(9)),b=Math.asin(((l-v)/r).toFixed(9));_=e<y?L4-_:_,b=s<y?L4-b:b,_<0&&(_=2*L4+_),b<0&&(b=2*L4+b),o&&_>b&&(_-=2*L4),!o&&b>_&&(b-=2*L4)}if(Math.abs(b-_)>O4){var x=b,w=s,k=l;b=_+O4*(o&&b>_?1:-1),s=y+n*Math.cos(b),l=v+r*Math.sin(b);var T=iM(s,l,n,r,i,0,o,w,k,[b,x,y,v])}var M=Math.tan((b-_)/4),A=4/3*n*M,C=4/3*r*M,S=[2*e-(e+A*Math.sin(_)),2*t-(t-C*Math.cos(_)),s+A*Math.sin(b),l-C*Math.cos(b),s,l];if(u)return S;T&&(S=S.concat(T));for(var E=0;E<S.length;){var P=aM(S[E],S[E+1],i);S[E++]=P.x,S[E++]=P.y}return S}function aM(e,t,n){return{x:e*Math.cos(n)-t*Math.sin(n),y:e*Math.sin(n)+t*Math.cos(n)}}function oM(e){return e*(L4/180)}function sM(e){var t=[];return e.replace(B4,function(e,n,r){var i=n.toLowerCase();for(r=lM(r),"m"==i&&r.length>2&&(t.push([n].concat(r.splice(0,2))),i="l",n="m"==n?"l":"L");;){if(r.length==j4[i])return r.unshift(n),t.push(r);if(r.length<j4[i])throw new Error("malformed path data");t.push([n].concat(r.splice(0,j4[i])))}}),t}function lM(e){var t=e.match(U4);return t?t.map(Number):[]}function uM(e){for(var t,n=[],r=0,i=0,a=0,o=0,s=null,l=null,u=0,c=0,d=0,f=e.length;d<f;d++){var h=e[d],p=h[0];switch(p){case"M":a=h[1],o=h[2];break;case"A":var m=G4({px:u,py:c,cx:h[6],cy:h[7],rx:h[1],ry:h[2],xAxisRotation:h[3],largeArcFlag:h[4],sweepFlag:h[5]});if(!m.length)continue;for(var g,y=0;y<m.length;y++)g=m[y],h=["C",g.x1,g.y1,g.x2,g.y2,g.x,g.y],y<m.length-1&&n.push(h);break;case"S":var v=u,_=c;"C"!=t&&"S"!=t||(v+=v-r,_+=_-i),h=["C",v,_,h[1],h[2],h[3],h[4]];break;case"T":"Q"==t||"T"==t?(s=2*u-s,l=2*c-l):(s=u,l=c),h=dM(u,c,s,l,h[1],h[2]);break;case"Q":s=h[1],l=h[2],h=dM(u,c,h[1],h[2],h[3],h[4]);break;case"L":h=cM(u,c,h[1],h[2]);break;case"H":h=cM(u,c,h[1],c);break;case"V":h=cM(u,c,u,h[1]);break;case"Z":h=cM(u,c,a,o)}t=p,u=h[h.length-2],c=h[h.length-1],h.length>4?(r=h[h.length-4],i=h[h.length-3]):(r=u,i=c),n.push(h)}return n}function cM(e,t,n,r){return["C",e,t,n,r,n,r]}function dM(e,t,n,r,i,a){return["C",e/3+2/3*n,t/3+2/3*r,i/3+2/3*n,a/3+2/3*r,i,a]}function fM(e){if(Array.isArray(e)&&1===e.length&&"string"===typeof e[0]&&(e=e[0]),"string"===typeof e&&(q4(N4(e),"String is not an SVG path."),e=F4(e)),q4(Array.isArray(e),"Argument should be a string or an array of path segments."),e=I4(e),e=e6(e),!e.length)return[0,0,0,0];for(var t=[1/0,1/0,-1/0,-1/0],n=0,r=e.length;n<r;n++)for(var i=e[n].slice(1),a=0;a<i.length;a+=2)i[a+0]<t[0]&&(t[0]=i[a+0]),i[a+1]<t[1]&&(t[1]=i[a+1]),i[a+0]>t[2]&&(t[2]=i[a+0]),i[a+1]>t[3]&&(t[3]=i[a+1]);return t}function hM(e,t,n,r){n("accesstoken",r.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),pM(e,t),t._input=e}function pM(e,t){function n(e,t){return uE.coerce(r,i,x6.layers,e,t)}for(var r,i,a=e.layers||[],o=t.layers=[],s=0;s<a.length;s++)if(r=a[s],i={},uE.isPlainObject(r)){var l=n("sourcetype");n("source"),"vector"===l&&n("sourcelayer");var u=n("type");n("below"),n("color"),n("opacity"),"circle"===u&&n("circle.radius"),"line"===u&&n("line.width"),"fill"===u&&n("fill.outlinecolor"),"symbol"===u&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),uE.coerceFont(n,"symbol.textfont"),n("symbol.textposition")),i._index=s,o.push(i)}}function mM(e,t){this.mapbox=e,this.map=e.map,this.uid=e.uid+"-layer"+t,this.idSource=this.uid+"-source",this.idLayer=this.uid+"-layer",this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}function gM(e){var t=e.source;return uE.isPlainObject(t)||"string"===typeof t&&t.length>0}function yM(e){var t={},n={};switch(e.type){case"circle":uE.extendFlat(n,{"circle-radius":e.circle.radius,"circle-color":e.color,"circle-opacity":e.opacity});break;case"line":uE.extendFlat(n,{"line-width":e.line.width,"line-color":e.color,"line-opacity":e.opacity});break;case"fill":uE.extendFlat(n,{"fill-color":e.color,"fill-outline-color":e.fill.outlinecolor,"fill-opacity":e.opacity});break;case"symbol":var r=e.symbol,i=k6(r.textposition,r.iconsize);uE.extendFlat(t,{"icon-image":r.icon+"-15","icon-size":r.iconsize/10,"text-field":r.text,"text-size":r.textfont.size,"text-anchor":i.anchor,"text-offset":i.offset}),uE.extendFlat(n,{"icon-color":e.color,"text-color":r.textfont.color,"text-opacity":e.opacity})}return{layout:t,paint:n}}function vM(e){var t,n=e.sourcetype,r=e.source,i={type:n};return"geojson"===n?t="data":"vector"===n&&(t="string"===typeof r?"url":"tiles"),i[t]=r,i}function _M(e){this.id=e.id,this.gd=e.gd,this.container=e.container,this.isStatic=e.staticPlot;var t=e.fullLayout;this.uid=t._uid+"-"+this.id,this.opts=t[this.id],this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(t),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[]}function bM(e){var t=x6.style.values,n=x6.style.dflt,r={};return uE.isPlainObject(e)?(r.id=e.id,r.style=e):"string"===typeof e?(r.id=e,r.style=-1!==t.indexOf(e)?xM(e):e):(r.id=n,r.style=xM(n)),r.transition={duration:0,delay:0},r}function xM(e){return m6.styleUrlPrefix+e+"-"+m6.styleUrlSuffix}function wM(e){return[e.lon,e.lat]}function kM(e,t){var n=e._fullLayout;if(""===e._context.mapboxAccessToken)return"";for(var r=0;r<t.length;r++){var i=n[t[r]];if(i.accesstoken)return i.accesstoken}throw new Error(m6.noAccessTokenErrorMsg)}function TM(e,t,n){var r=n("lon")||[],i=n("lat")||[],a=Math.min(r.length,i.length);return t._length=a,a}function MM(e,t,n){function r(e){return e+"\xb0"}var i=t.hi||e.hoverinfo,a=i.split("+"),o=-1!==a.indexOf("all"),s=-1!==a.indexOf("lon"),l=-1!==a.indexOf("lat"),u=t.lonlat,c=[];return o||s&&l?c.push("("+r(u[0])+", "+r(u[1])+")"):s?c.push(n.lon+r(u[0])):l&&c.push(n.lat+r(u[1])),(o||-1!==a.indexOf("text"))&&TO(t,e,c),c.join("<br>")}function AM(){return{geojson:G5.makeBlank(),layout:{visibility:"none"},paint:{}}}function CM(e){function t(e){return a.opacity*e}function n(e){return e/2}var r,i,a=e[0].trace,o=a.marker,s=a.selectedpoints,l=uE.isArrayOrTypedArray(o.color),u=uE.isArrayOrTypedArray(o.size),c=uE.isArrayOrTypedArray(o.opacity);l&&(i=nP.hasColorscale(a,"marker")?nP.makeColorScaleFunc(nP.extractScale(o.colorscale,o.cmin,o.cmax)):uE.identity);var d;u&&(d=SP(a));var f;c&&(f=function(e){return t(SC(e)?+uE.constrain(e,0,1):0)});var h=[];for(r=0;r<e.length;r++){var p=e[r],m=p.lonlat;if(!IM(m)){var g={};i&&(g.mcc=p.mcc=i(p.mc)),d&&(g.mrc=p.mrc=d(p.ms)),f&&(g.mo=f(p.mo)),s&&(g.selected=p.selected||0),h.push({type:"Feature",geometry:{type:"Point",coordinates:m},properties:g})}}var y;if(s)for(y=PP.makeSelectedPointStyleFns(a),r=0;r<h.length;r++){var v=h[r].properties,_=y.opacityFn(v);if(void 0!==_?v.mo=t(_):void 0===v.mo&&(v.mo=t(o.opacity)),y.colorFn){var b=y.colorFn(v);b?v.mcc=b:v.mcc||(v.mcc=o.color)}if(y.sizeFn){var x=y.sizeFn(v);void 0!==x?v.mrc=x:void 0===v.mrc&&(v.mrc=n(o.size))}}return{geojson:{type:"FeatureCollection",features:h},mcc:l||y&&y.colorFn?{type:"identity",property:"mcc"}:o.color,mrc:u||y&&y.sizeFn?{type:"identity",property:"mrc"}:n(o.size),mo:c||s?{type:"identity",property:"mo"}:t(o.opacity)}}function SM(e){for(var t=e[0].trace,n=t.marker||{},r=n.symbol,i=t.text,a="circle"!==r?EM(r):PM,o=EP.hasText(t)?EM(i):PM,s=[],l=0;l<e.length;l++){var u=e[l];IM(u.lonlat)||s.push({type:"Feature",geometry:{type:"Point",coordinates:u.lonlat},properties:{symbol:a(u.mx),text:o(u.tx)}})}return{type:"FeatureCollection",features:s}}function EM(e){return uE.isArrayOrTypedArray(e)?function(e){return e}:e?function(){return e}:PM}function PM(){return""}function IM(e){return e[0]===B6}function LM(e,t){this.subplot=e,this.uid=t,this.sourceIds={fill:t+"-source-fill",line:t+"-source-line",circle:t+"-source-circle",symbol:t+"-source-symbol"},this.layerIds={fill:t+"-layer-fill",line:t+"-layer-line",circle:t+"-layer-circle",symbol:t+"-layer-symbol"},this.order=["fill","line","circle","symbol"]}function OM(e,t,n,r){function i(e,t){return n(o+"."+e,t)}var a=n("bgcolor");r.bgColor=jE.combine(a,r.paper_bgcolor);for(var o,s=n("sector"),l=i8(r.fullData,X6.name,r.id),u=r.layoutOut,c=0;c<o8.length;c++){o=o8[c],uE.isPlainObject(e[o])||(e[o]={});var d=e[o],f=t[o]={};f._id=f._name=o;var h=X6.axisName2dataArray[o],p=zM(d,f,i,l,h);aL(d,f,i),f._initialCategories="category"===p?uL(h,f.categoryorder,f.categoryarray,l):[];var m=i("visible");EI(f,u);var g,y;switch(m&&(g=i("color"),y=g===d.color?g:r.font.color),f._m=1,o){case"radialaxis":var v=i("autorange",!f.isValidRange(d.range));d.autorange=v,v&&i("rangemode"),"reversed"===v&&(f._m=-1),i("range"),f.cleanRange("range",{dfltRange:[0,1]}),m&&(i("side"),i("angle",s[0]),i("title"),uE.coerceFont(i,"titlefont",{family:r.font.family,size:Math.round(1.2*r.font.size),color:y}));break;case"angularaxis":if("date"===p){uE.log("Polar plots do not support date angular axes yet.");for(var _=0;_<l.length;_++)l[_].visible=!1;p=d.type=f.type="linear"}i("linear"===p?"thetaunit":"period");i("rotation",{counterclockwise:0,clockwise:90}[i("direction")]),a8(f)}if(m){XE(d,f,i,f.type),qE(d,f,i,f.type,{tickSuffixDflt:"degrees"===f.thetaunit?"\xb0":void 0}),GE(d,f,i,{outerTicks:!0});i("showticklabels")&&(uE.coerceFont(i,"tickfont",{family:r.font.family,size:r.font.size,color:y}),i("tickangle"),i("tickformat")),lL(d,f,i,{dfltColor:g,bgColor:r.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:n8[o]}),i("layer")}"category"!==p&&i("hoverformat"),f._input=d}}function zM(e,t,n,r,i){if("-"===n("type")){for(var a,o=0;o<r.length;o++)if(r[o].visible){a=r[o];break}a&&(t.type=wI(a[i],"gregorian")),"-"===t.type?t.type="linear":e.type=t.type}return t.type}function RM(e,t){this.id=t,this.gd=e,this._hasClipOnAxisFalse=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var n=e._fullLayout,r="clip"+n._uid+t;this.clipIds.circle=r+"-circle",this.clipPaths.circle=n._clips.append("clipPath").attr("id",this.clipIds.circle),this.clipPaths.circle.append("path"),this.framework=n._polarlayer.append("g").attr("class",t),this.radialTickLayout=null,this.angularTickLayout=null}function DM(e,t,n){PI.setConvert(e,n),e._min=t._min,e._max=t._max,e.setScale()}function NM(e){var t=e.ticks+String(e.ticklen)+String(e.showticklabels);return"side"in e&&(t+=e.side),t}function FM(e){var t,n,r,i,a=e[0],o=e[1],s=o-a,l=h8(a),u=l+s,c=Math.cos(d8(l)),d=Math.sin(d8(l)),f=Math.cos(d8(u)),h=Math.sin(d8(u));return i=l<=90&&u>=90||l>90&&u>=450?1:d<=0&&h<=0?0:Math.max(d,h),t=l<=180&&u>=180||l>180&&u>=540?-1:c>=0&&f>=0?0:Math.min(c,f),n=l<=270&&u>=270||l>270&&u>=630?-1:d>=0&&h>=0?0:Math.min(d,h),r=u>=360?1:c<=0&&f<=0?0:Math.max(c,f),[t,n,r,i]}function jM(e,t){if(VM(t))return PP.symbolFuncs[0](e);var n=e*Math.cos(d8(t[0])),r=-e*Math.sin(d8(t[0])),i=e*Math.cos(d8(t[1])),a=-e*Math.sin(d8(t[1]));return"M"+[n,r]+"A"+[e,e]+" "+(Math.abs(t[1]-t[0])<=180?[0,0,0]:[0,1,0])+" "+[i,a]}function BM(e,t){return jM(e,t)+(VM(t)?"":"L0,0Z")}function UM(e,t,n){function r(e,t){return[e*Math.cos(t),-e*Math.sin(t)]}function i(e,t,n){return"A"+[e,e]+" "+[0,l,n]+" "+r(e,t)}var a,o,s,l=Math.abs(n[1]-n[0])<=180?0:1;return VM(n)?(a=0,s=2*Math.PI,o=Math.PI,"M"+r(e,a)+i(e,o,0)+i(e,s,0)+"ZM"+r(t,a)+i(t,o,1)+i(t,s,1)+"Z"):(a=d8(n[0]),s=d8(n[1]),"M"+r(e,a)+"L"+r(t,a)+i(t,s,0)+"L"+r(e,s)+i(e,a,1)+"Z")}function VM(e){return 360===Math.abs(e[1]-e[0])}function HM(e,t,n){return t?(e.attr("display",null),e.attr(n)):e&&e.attr("display","none"),e}function WM(e,t){return"translate("+e+","+t+")"}function qM(e){return"rotate("+e+")"}function GM(e){return Math.abs(e)<1e-10?0:e>0?1:-1}function YM(e){return GM(Math.cos(e))}function XM(e){return GM(Math.sin(e))}function ZM(e){for(var t=e._fullLayout,n=e.calcdata,r=t._subplots[x8],i=0;i<r.length;i++){var a=r[i],o=v8(n,x8,a),s=t[a]._subplot;s||(s=y8(e,a),t[a]._subplot=s),s.plot(o,t,e._promises)}}function JM(e,t,n,r){for(var i=r._subplots[x8]||[],a=0;a<i.length;a++){var o=i[a],s=r[o]._subplot;if(!t[o]&&s){s.framework.remove(),s.layers["radial-axis-title"].remove();for(var l in s.clipPaths)s.clipPaths[l].remove()}}}function KM(e,t,n,r){var i=_H(e,t,n,r);if(i&&!1!==i[0].index){var a=i[0];if(void 0===a.index)return i;var o=e.subplot,s=a.cd[a.index],l=a.trace;if(o.isPtWithinSector(s))return a.xLabelVal=void 0,a.yLabelVal=void 0,a.extraText=QM(s,l,o),i}}function QM(e,t,n){function r(e,t){l.push(e._hovertitle+": "+PI.tickText(e,t,"hover").text)}var i=n.radialAxis,a=n.angularAxis,o=e.hi||t.hoverinfo,s=o.split("+"),l=[];i._hovertitle="r",a._hovertitle="\u03b8";var u,c=a._c2rad(e.theta,t.thetaunit);return u="linear"===a.type&&t.thetaunit!==a.thetaunit?"degrees"===a.thetaunit?uE.rad2deg(c):c:e.theta,-1!==s.indexOf("all")&&(s=["r","theta"]),-1!==s.indexOf("r")&&r(i,i.c2r(e.r)),-1!==s.indexOf("theta")&&r(a,u),l.join("<br>")}function $M(e,t){var n=e._fullLayout,r=t.subplot,i=n[r].radialaxis,a=n[r].angularaxis,o=i.makeCalcdata(t,"r"),s=a.makeCalcdata(t,"theta"),l={};return t._length<o.length&&(o=o.slice(0,t._length)),t._length<s.length&&(s=s.slice(0,t._length)),aH(t),l.r=o,l.theta=s,PI.expand(i,o,{tozero:!0}),"linear"!==a.type&&(a.autorange=!0,PI.expand(a,s),delete a.autorange),[{x:!1,y:!1,t:l,trace:t}]}function eA(e,t,n){var r=t.radialAxis,i=t.angularAxis,a=r.range,o=f6.sceneUpdate(e,t);return o.clear(),n.forEach(function(s,l){if(s&&s[0]&&s[0].trace){var u,c,d,f,h,p=s[0],m=p.trace,g=p.t,y=g.r,v=g.theta,_=y.slice(),b=v.slice();for(u=0;u<y.length;u++)c=y[u],f=v[u],h=i.c2rad(f,m.thetaunit),t.isPtWithinSector({r:c,rad:h})||(_[u]=NaN,b[u]=NaN);var x=y.length,w=new Array(2*x),k=Array(x),T=Array(x);for(u=0;u<x;u++)c=_[u],f=b[u],SC(c)&&SC(f)&&c>=0?(d=r.c2r(c)-a[0],h=function(e){return i.c2rad(e,m.thetaunit)}(f),k[u]=w[2*u]=d*Math.cos(h),T[u]=w[2*u+1]=d*Math.sin(h)):k[u]=T[u]=w[2*u]=w[2*u+1]=NaN;var M=f6.sceneOptions(e,t,m,w);M.fill&&!o.fill2d&&(o.fill2d=!0),M.marker&&!o.scatter2d&&(o.scatter2d=!0),M.line&&!o.line2d&&(o.line2d=!0),!M.errorX&&!M.errorY||o.error2d||(o.error2d=!0),EP.hasMarkers(m)&&(M.selected.positions=M.unselected.positions=M.marker.positions),o.lineOptions.push(M.line),o.errorXOptions.push(M.errorX),o.errorYOptions.push(M.errorY),o.fillOptions.push(M.fill),o.markerOptions.push(M.marker),o.selectedOptions.push(M.selected),o.unselectedOptions.push(M.unselected),o.count=n.length,g.scene=o,g.index=l,g.x=k,g.y=T,g.rawx=k,g.rawy=T,g.r=y,g.theta=v,g.positions=w,g.count=x,g.tree=a4(w,512)}}),f6.plot(e,t,n)}function tA(e,t,n,r){var i=e.cd,a=i[0].t,o=a.r,s=a.theta,l=f6.hoverPoints(e,t,n,r);if(l&&!1!==l[0].index){var u=l[0];if(void 0===u.index)return l;var c=e.subplot,d=c.angularAxis,f=u.cd[u.index],h=u.trace;if(f.r=o[u.index],f.theta=s[u.index],f.rad=d.c2rad(f.theta,h.thetaunit),c.isPtWithinSector(f))return u.xLabelVal=void 0,u.yLabelVal=void 0,u.extraText=U8(f,h,c),l}}function nA(e,t,n,r){var i=n("bgcolor"),a=n("sum");r.bgColor=jE.combine(i,r.paper_bgcolor);for(var o,s,l,u=0;u<K8.length;u++)o=K8[u],s=e[o]||{},l=t[o]={_name:o,type:"linear"},Y8(s,l,r);var c=t.aaxis,d=t.baxis,f=t.caxis;c.min+d.min+f.min>=a&&(c.min=0,d.min=0,f.min=0,e.aaxis&&delete e.aaxis.min,e.baxis&&delete e.baxis.min,e.caxis&&delete e.caxis.min)}function rA(e,t){this.id=e.id,this.graphDiv=e.graphDiv,this.init(t),this.makeFramework(t)}function iA(e){CC.select(e).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function aA(e,t,n){for(var r=t.length,i=new Array(r),a=t.slice().sort(oA(e,n)),o=0;o<r;o++)for(var s=t[o],l=0;l<r;l++){var u=a[l];if(s===u){i[l]=o,a[l]=null;break}}return i}function oA(e,t){switch(e.order){case"ascending":return function(e,n){return t(e)-t(n)};case"descending":return function(e,n){return t(n)-t(e)}}}function sA(e){if(e in B7)return B7[e];for(var t=[],n=0;n<e;++n)t.push("out",n,"s=0.5*(inp",n,"l-inp",n,"r);");for(var r=["array"],i=["junk"],n=0;n<e;++n){r.push("array"),i.push("out"+n+"s");var a=SW(e);a[n]=-1,r.push({array:0,offset:a.slice()}),a[n]=1,r.push({array:0,offset:a.slice()}),i.push("inp"+n+"l","inp"+n+"r")}return B7[e]=eW({args:r,pre:V7,post:V7,body:{body:t.join(""),args:i.map(function(e){return{name:e,lvalue:0===e.indexOf("out"),rvalue:0===e.indexOf("inp"),count:"junk"!==e|0}}),thisVars:[],localVars:[]},funcName:"fdTemplate"+e})}function lA(e){var t=e.join(),n=U7[t];if(n)return n;for(var r=e.length,i=["function gradient(dst,src){var s=src.shape.slice();"],a=0;a<1<<r;++a){for(var o=[],s=0;s<r;++s)a&1<<s&&o.push(s+1);for(var l=0;l<1<<o.length;++l){for(var u=o.slice(),s=0;s<o.length;++s)l&1<<s&&(u[s]=-u[s]);!function(t){for(var n=r-t.length,a=[],o=[],s=[],l=0;l<r;++l)t.indexOf(l+1)>=0?s.push("0"):t.indexOf(-(l+1))>=0?s.push("s["+l+"]-1"):(s.push("-1"),a.push("1"),o.push("s["+l+"]-2"));var u=".lo("+a.join()+").hi("+o.join()+")";if(0===a.length&&(u=""),n>0){i.push("if(1");for(var l=0;l<r;++l)t.indexOf(l+1)>=0||t.indexOf(-(l+1))>=0||i.push("&&s[",l,"]>2");i.push("){grad",n,"(src.pick(",s.join(),")",u);for(var l=0;l<r;++l)t.indexOf(l+1)>=0||t.indexOf(-(l+1))>=0||i.push(",dst.pick(",s.join(),",",l,")",u);i.push(");")}for(var l=0;l<t.length;++l){var c=Math.abs(t[l])-1,d="dst.pick("+s.join()+","+c+")"+u;switch(e[c]){case"clamp":var f=s.slice(),h=s.slice();t[l]<0?f[c]="s["+c+"]-2":h[c]="1",0===n?i.push("if(s[",c,"]>1){dst.set(",s.join(),",",c,",0.5*(src.get(",f.join(),")-src.get(",h.join(),")))}else{dst.set(",s.join(),",",c,",0)};"):i.push("if(s[",c,"]>1){diff(",d,",src.pick(",f.join(),")",u,",src.pick(",h.join(),")",u,");}else{zero(",d,");};");break;case"mirror":0===n?i.push("dst.set(",s.join(),",",c,",0);"):i.push("zero(",d,");");break;case"wrap":var p=s.slice(),m=s.slice();t[l]<0?(p[c]="s["+c+"]-2",m[c]="0"):(p[c]="s["+c+"]-1",m[c]="1"),0===n?i.push("if(s[",c,"]>2){dst.set(",s.join(),",",c,",0.5*(src.get(",p.join(),")-src.get(",m.join(),")))}else{dst.set(",s.join(),",",c,",0)};"):i.push("if(s[",c,"]>2){diff(",d,",src.pick(",p.join(),")",u,",src.pick(",m.join(),")",u,");}else{zero(",d,");};");break;default:throw new Error("ndarray-gradient: Invalid boundary condition")}}n>0&&i.push("};")}(u)}}i.push("return dst;};return gradient");for(var c=["diff","zero"],d=[H7,W7],a=1;a<=r;++a)c.push("grad"+a),d.push(sA(a));c.push(i.join(""));var f=Function.apply(void 0,c),n=f.apply(void 0,d);return B7[t]=n,n}function uA(e,t,n){if(Array.isArray(n)){if(n.length!==t.dimension)throw new Error("ndarray-gradient: invalid boundary conditions")}else n="string"===typeof n?SW(t.dimension,n):SW(t.dimension,"clamp");if(e.dimension!==t.dimension+1)throw new Error("ndarray-gradient: output dimension must be +1 input dimension");if(e.shape[t.dimension]!==t.dimension)throw new Error("ndarray-gradient: output shape must match input shape");for(var r=0;r<t.dimension;++r)if(e.shape[r]!==t.shape[r])throw new Error("ndarray-gradient: shape mismatch");return 0===t.size?e:t.dimension<=0?(e.set(0),e):lA(n)(e,t)}function cA(e,t,n,r,i){this.position=e,this.index=t,this.uv=n,this.level=r,this.dataCoordinate=i}function dA(e){var t=G7([A0({colormap:e,nshades:n9,format:"rgba"}).map(function(e){return[e[0],e[1],e[2],255*e[3]]})]);return tW.divseq(t,255),t}function fA(e,t,n,r,i,a,o,s,l,u,c,d,f,h){this.gl=e,this.shape=t,this.bounds=n,this.intensityBounds=[],this._shader=r,this._pickShader=i,this._coordinateBuffer=a,this._vao=o,this._colorMap=s,this._contourShader=l,this._contourPickShader=u,this._contourBuffer=c,this._contourVAO=d,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new cA([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=f,this._dynamicVAO=h,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[hW(EW.mallocFloat(1024),[0,0]),hW(EW.mallocFloat(1024),[0,0]),hW(EW.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}function hA(e,t){var n,r,i,a=t.axes&&t.axes.lastCubeProps.axis||i9,o=t.showSurface,s=t.showContour;for(n=0;n<3;++n)for(o=o||t.surfaceProject[n],r=0;r<3;++r)s=s||t.contourProject[n][r];for(n=0;n<3;++n){var l=a9.projections[n];for(r=0;r<16;++r)l[r]=0;for(r=0;r<4;++r)l[5*r]=1;l[5*n]=0,l[12+n]=t.axesBounds[+(a[n]>0)][n],PK(l,e.model,l);var u=a9.clipBounds[n];for(i=0;i<2;++i)for(r=0;r<3;++r)u[i][r]=e.clipBounds[i][r];u[0][n]=-1e8,u[1][n]=1e8}return a9.showSurface=o,a9.showContour=s,a9}function pA(e,t){e=e||{};var n=this.gl;n.disable(n.CULL_FACE),this._colorMap.bind(0);var r=o9;r.model=e.model||$7,r.view=e.view||$7,r.projection=e.projection||$7,r.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],r.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],r.contourColor=this.contourColor[0],r.inverseModel=iK(r.inverseModel,r.model);for(var i=0;i<2;++i)for(var a=r.clipBounds[i],o=0;o<3;++o)a[o]=Math.min(Math.max(this.clipBounds[i][o],-1e8),1e8);r.kambient=this.ambientLight,r.kdiffuse=this.diffuseLight,r.kspecular=this.specularLight,r.roughness=this.roughness,r.fresnel=this.fresnel,r.opacity=this.opacity,r.height=0,r.permutation=l9,r.vertexColor=this.vertexColor;var s=s9;for(PK(s,r.view,r.model),PK(s,r.projection,s),iK(s,s),i=0;i<3;++i)r.eyePosition[i]=s[12+i]/s[15];var l=s[15];for(i=0;i<3;++i)l+=this.lightPosition[i]*s[4*i+3];for(i=0;i<3;++i){var u=s[12+i];for(o=0;o<3;++o)u+=s[4*o+i]*this.lightPosition[o];r.lightPosition[i]=u/l}var c=hA(r,this);if(c.showSurface&&t===this.opacity<1){for(this._shader.bind(),this._shader.uniforms=r,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(n.TRIANGLES,this._vertexCount),i=0;i<3;++i)this.surfaceProject[i]&&this.vertexCount&&(this._shader.uniforms.model=c.projections[i],this._shader.uniforms.clipBounds=c.clipBounds[i],this._vao.draw(n.TRIANGLES,this._vertexCount));this._vao.unbind()}if(c.showContour&&!t){var d=this._contourShader;r.kambient=1,r.kdiffuse=0,r.kspecular=0,r.opacity=1,d.bind(),d.uniforms=r;var f=this._contourVAO;for(f.bind(),i=0;i<3;++i)for(d.uniforms.permutation=t9[i],n.lineWidth(this.contourWidth[i]),o=0;o<this.contourLevels[i].length;++o)this._contourCounts[i][o]&&(o===this.highlightLevel[i]?(d.uniforms.contourColor=this.highlightColor[i],d.uniforms.contourTint=this.highlightTint[i]):0!==o&&o-1!==this.highlightLevel[i]||(d.uniforms.contourColor=this.contourColor[i],d.uniforms.contourTint=this.contourTint[i]),d.uniforms.height=this.contourLevels[i][o],f.draw(n.LINES,this._contourCounts[i][o],this._contourOffsets[i][o]));for(i=0;i<3;++i)for(d.uniforms.model=c.projections[i],d.uniforms.clipBounds=c.clipBounds[i],o=0;o<3;++o)if(this.contourProject[i][o]){d.uniforms.permutation=t9[o],n.lineWidth(this.contourWidth[o]);for(var h=0;h<this.contourLevels[o].length;++h)h===this.highlightLevel[o]?(d.uniforms.contourColor=this.highlightColor[o],d.uniforms.contourTint=this.highlightTint[o]):0!==h&&h-1!==this.highlightLevel[o]||(d.uniforms.contourColor=this.contourColor[o],d.uniforms.contourTint=this.contourTint[o]),d.uniforms.height=this.contourLevels[o][h],f.draw(n.LINES,this._contourCounts[o][h],this._contourOffsets[o][h])}for(f.unbind(),f=this._dynamicVAO,f.bind(),i=0;i<3;++i)if(0!==this._dynamicCounts[i])for(d.uniforms.model=r.model,d.uniforms.clipBounds=r.clipBounds,d.uniforms.permutation=t9[i],n.lineWidth(this.dynamicWidth[i]),d.uniforms.contourColor=this.dynamicColor[i],d.uniforms.contourTint=this.dynamicTint[i],d.uniforms.height=this.dynamicLevel[i],f.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]),o=0;o<3;++o)this.contourProject[o][i]&&(d.uniforms.model=c.projections[o],d.uniforms.clipBounds=c.clipBounds[o],f.draw(n.LINES,this._dynamicCounts[i],this._dynamicOffsets[i]));f.unbind()}}function mA(e,t){var n=t.shape.slice(),r=e.shape.slice();tW.assign(e.lo(1,1).hi(n[0],n[1]),t),tW.assign(e.lo(1).hi(n[0],1),t.hi(n[0],1)),tW.assign(e.lo(1,r[1]-1).hi(n[0],1),t.lo(0,n[1]-1).hi(n[0],1)),tW.assign(e.lo(0,1).hi(1,n[1]),t.hi(1)),tW.assign(e.lo(r[0]-1,1).hi(1,n[1]),t.lo(n[0]-1)),e.set(0,0,t.get(0,0)),e.set(0,r[1]-1,t.get(0,n[1]-1)),e.set(r[0]-1,0,t.get(n[0]-1,0)),e.set(r[0]-1,r[1]-1,t.get(n[0]-1,n[1]-1))}function gA(e,t){return Array.isArray(e)?[t(e[0]),t(e[1]),t(e[2])]:[t(e),t(e),t(e)]}function yA(e){return Array.isArray(e)?3===e.length?[e[0],e[1],e[2],1]:[e[0],e[1],e[2],e[3]]:[0,0,0,1]}function vA(e){if(Array.isArray(e)){if(Array.isArray(e))return[yA(e[0]),yA(e[1]),yA(e[2])];var t=yA(e);return[t.slice(),t.slice(),t.slice()]}}function _A(e){var t=e.gl,n=X7(t),r=J7(t),i=Z7(t),a=K7(t),o=LW(t),s=sQ(t,[{buffer:o,size:4,stride:Q7,offset:0},{buffer:o,size:3,stride:Q7,offset:16},{buffer:o,size:3,stride:Q7,offset:28}]),l=LW(t),u=sQ(t,[{buffer:l,size:4,stride:20,offset:0},{buffer:l,size:1,stride:20,offset:16}]),c=LW(t),d=sQ(t,[{buffer:c,size:2,type:t.FLOAT}]),f=YX(t,1,n9,t.RGBA,t.UNSIGNED_BYTE);f.minFilter=t.LINEAR,f.magFilter=t.LINEAR;var h=new fA(t,[0,0],[[0,0,0],[0,0,0]],n,r,o,s,f,i,a,l,u,c,d),p={levels:[[],[],[]]};for(var m in e)p[m]=e[m];return p.colormap=p.colormap||"jet",h.update(p),h}function bA(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=n*a-i*r;return o?(o=1/o,e[0]=a*o,e[1]=-r*o,e[2]=-i*o,e[3]=n*o,e):null}function xA(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=c*o-s*u,f=-c*a+s*l,h=u*a-o*l,p=n*d+r*f+i*h;return p?(p=1/p,e[0]=d*p,e[1]=(-c*r+i*u)*p,e[2]=(s*r-i*o)*p,e[3]=f*p,e[4]=(c*n-i*l)*p,e[5]=(-s*n+i*a)*p,e[6]=h*p,e[7]=(-u*n+r*l)*p,e[8]=(o*n-r*a)*p,e):null}function wA(e,t){switch(t.length){case 0:break;case 1:e[0]=1/t[0];break;case 4:f9(e,t);break;case 9:h9(e,t);break;case 16:iK(e,t);break;default:throw new Error("currently supports matrices up to 4x4")}return e}function kA(e,t){var n=Math.floor(t),r=t-n,i=0<=n&&n<e.shape[0],a=0<=n+1&&n+1<e.shape[0];return(1-r)*(i?+e.get(n):0)+r*(a?+e.get(n+1):0)}function TA(e,t,n){var r=Math.floor(t),i=t-r,a=0<=r&&r<e.shape[0],o=0<=r+1&&r+1<e.shape[0],s=Math.floor(n),l=n-s,u=0<=s&&s<e.shape[1],c=0<=s+1&&s+1<e.shape[1],d=a&&u?e.get(r,s):0,f=a&&c?e.get(r,s+1):0;return(1-l)*((1-i)*d+i*(o&&u?e.get(r+1,s):0))+l*((1-i)*f+i*(o&&c?e.get(r+1,s+1):0))}function MA(e,t,n,r){var i=Math.floor(t),a=t-i,o=0<=i&&i<e.shape[0],s=0<=i+1&&i+1<e.shape[0],l=Math.floor(n),u=n-l,c=0<=l&&l<e.shape[1],d=0<=l+1&&l+1<e.shape[1],f=Math.floor(r),h=r-f,p=0<=f&&f<e.shape[2],m=0<=f+1&&f+1<e.shape[2],g=o&&c&&p?e.get(i,l,f):0,y=o&&d&&p?e.get(i,l+1,f):0,v=s&&c&&p?e.get(i+1,l,f):0,_=s&&d&&p?e.get(i+1,l+1,f):0,b=o&&c&&m?e.get(i,l,f+1):0,x=o&&d&&m?e.get(i,l+1,f+1):0;return(1-h)*((1-u)*((1-a)*g+a*v)+u*((1-a)*y+a*_))+h*((1-u)*((1-a)*b+a*(s&&c&&m?e.get(i+1,l,f+1):0))+u*((1-a)*x+a*(s&&d&&m?e.get(i+1,l+1,f+1):0)))}function AA(e){var t,n,r=0|e.shape.length,i=new Array(r),a=new Array(r),o=new Array(r),s=new Array(r);for(t=0;t<r;++t)n=+arguments[t+1],i[t]=Math.floor(n),a[t]=n-i[t],o[t]=0<=i[t]&&i[t]<e.shape[t],s[t]=0<=i[t]+1&&i[t]+1<e.shape[t];var l,u,c,d=0;e:for(t=0;t<1<<r;++t){for(u=1,c=e.offset,l=0;l<r;++l)if(t&1<<l){if(!s[l])continue e;u*=a[l],c+=e.stride[l]*(i[l]+1)}else{if(!o[l])continue e;u*=1-a[l],c+=e.stride[l]*i[l]}d+=u*e.data[c]}return d}function CA(e,t,n,r){switch(e.shape.length){case 0:return 0;case 1:return kA(e,t);case 2:return TA(e,t,n);case 3:return MA(e,t,n,r);default:return AA.apply(void 0,arguments)}}function SA(e,t,n){var r=t.dimension,i=p9([],n);return b9(e,t,function(e,t){for(var n=0;n<r;++n){e[n]=i[(r+1)*r+n];for(var a=0;a<r;++a)e[n]+=i[(r+1)*a+n]*t[a]}for(var o=i[(r+1)*(r+1)-1],a=0;a<r;++a)o+=i[(r+1)*a+r]*t[a];for(var s=1/o,n=0;n<r;++n)e[n]*=s;return e}),e}function EA(e,t,n){this.scene=e,this.uid=n,this.surface=t,this.data=null,this.showContour=[!1,!1,!1],this.dataScale=1}function PA(e,t){return void 0===t&&(t=1),e.map(function(e){var n=e[0],r=zC(e[1]),i=r.toRgb();return{index:n,rgb:[i.r,i.g,i.b,t]}})}function IA(e){var t=e[0].rgb,n=e[e.length-1].rgb;return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]}function LA(e){var t=e.shape,n=[t[0]+2,t[1]+2],r=hW(new Float32Array(n[0]*n[1]),n);return tW.assign(r.lo(1,1).hi(t[0],t[1]),e),tW.assign(r.lo(1).hi(t[0],1),e.hi(t[0],1)),tW.assign(r.lo(1,n[1]-1).hi(t[0],1),e.lo(0,t[1]-1).hi(t[0],1)),tW.assign(r.lo(0,1).hi(1,t[1]),e.hi(1)),tW.assign(r.lo(n[0]-1,1).hi(1,t[1]),e.lo(t[0]-1)),r.set(0,0,e.get(0,0)),r.set(0,n[1]-1,e.get(0,t[1]-1)),r.set(n[0]-1,0,e.get(t[0]-1,0)),r.set(n[0]-1,n[1]-1,e.get(t[0]-1,t[1]-1)),r}function OA(e){var t=Math.max(e[0].shape[0],e[0].shape[1]);if(t<k9){for(var n=k9/t,r=[0|Math.floor(e[0].shape[0]*n+1),0|Math.floor(e[0].shape[1]*n+1)],i=r[0]*r[1],a=0;a<e.length;++a){var o=LA(e[a]),s=hW(new Float32Array(i),r);x9(s,o,[n,0,0,0,n,0,0,0,1]),e[a]=s}return n}return 1}function zA(e,t){var n=e.glplot.gl,r=Y7({gl:n}),i=new EA(e,r,t.uid);return r._trace=i,i.update(t),e.glplot.add(r),i}function RA(e,t,n){t in e&&!(n in e)&&(e[n]=e[t])}function DA(e){return e.calcdata.columns.reduce(function(t,n){return n.xIndex<e.xIndex?t+n.columnWidth:t},0)}function NA(e,t){return Object.keys(e).map(function(n){return R9({},e[n],{auxiliaryBlocks:t})})}function FA(e,t){for(var n,r={},i=0,a=0,o=jA(),s=0,l=0,u=0;u<e.length;u++)n=e[u],o.rows.push({rowIndex:u,rowHeight:n}),((a+=n)>=t||u===e.length-1)&&(r[i]=o,o.key=l++,o.firstRowIndex=s,o.lastRowIndex=u,o=jA(),i+=a,s=u+1,a=0);return r}function jA(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}function BA(e){var t=e.rowBlocks[e.page],n=t?t.rows[0].rowIndex:0;return[n,t?n+t.rows.length:0]}function UA(e,t){return"clip"+e._fullLayout._uid+"_scrollAreaBottomClip_"+t.key}function VA(e,t){return"clip"+e._fullLayout._uid+"_columnBoundaryClippath_"+t.calcdata.key+"_"+t.specIndex}function HA(e){return[].concat.apply([],e.map(function(e){return e})).map(function(e){return e.__data__})}function WA(e,t,n){function r(e){var t=e.rowBlocks;return yC(t,t.length-1)+(t.length?vC(t[t.length-1],1/0):1)}var i=e.selectAll("."+z9.cn.scrollbarKit).data(M1.repeat,M1.keyFun);i.enter().append("g").classed(z9.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),i.each(function(e){var t=e.scrollbarState;t.totalHeight=r(e),t.scrollableAreaHeight=e.groupHeight-lC(e),t.currentlyVisibleHeight=Math.min(t.totalHeight,t.scrollableAreaHeight),t.ratio=t.currentlyVisibleHeight/t.totalHeight,t.barLength=Math.max(t.ratio*t.currentlyVisibleHeight,z9.goldenRatio*z9.scrollbarWidth),t.barWiggleRoom=t.currentlyVisibleHeight-t.barLength,t.wiggleRoom=Math.max(0,t.totalHeight-t.scrollableAreaHeight),t.topY=0===t.barWiggleRoom?0:e.scrollY/t.wiggleRoom*t.barWiggleRoom,t.bottomY=t.topY+t.barLength,t.dragMultiplier=t.wiggleRoom/t.barWiggleRoom}).attr("transform",function(e){return"translate("+(e.width+z9.scrollbarWidth/2+z9.scrollbarOffset)+" "+lC(e)+")"});var a=i.selectAll("."+z9.cn.scrollbar).data(M1.repeat,M1.keyFun);a.enter().append("g").classed(z9.cn.scrollbar,!0);var o=a.selectAll("."+z9.cn.scrollbarSlider).data(M1.repeat,M1.keyFun);o.enter().append("g").classed(z9.cn.scrollbarSlider,!0),o.attr("transform",function(e){return"translate(0 "+(e.scrollbarState.topY||0)+")"});var s=o.selectAll("."+z9.cn.scrollbarGlyph).data(M1.repeat,M1.keyFun);s.enter().append("line").classed(z9.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",z9.scrollbarWidth).attr("stroke-linecap","round").attr("y1",z9.scrollbarWidth/2),s.attr("y2",function(e){return e.scrollbarState.barLength-z9.scrollbarWidth/2}).attr("stroke-opacity",function(e){return e.columnDragInProgress||!e.scrollbarState.barWiggleRoom||n?0:.4}),s.transition().delay(0).duration(0),s.transition().delay(z9.scrollbarHideDelay).duration(z9.scrollbarHideDuration).attr("stroke-opacity",0);var l=a.selectAll("."+z9.cn.scrollbarCaptureZone).data(M1.repeat,M1.keyFun);l.enter().append("line").classed(z9.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",z9.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(n){var r=CC.event.y,i=this.getBoundingClientRect(),a=n.scrollbarState,o=r-i.top,s=CC.scale.linear().domain([0,a.scrollableAreaHeight]).range([0,a.totalHeight]).clamp(!0);a.topY<=o&&o<=a.bottomY||dC(t,e,null,s(o-a.barLength/2))(n)}).call(CC.behavior.drag().origin(function(e){return CC.event.stopPropagation(),e.scrollbarState.scrollbarScrollInProgress=!0,e}).on("drag",dC(t,e)).on("dragend",function(){})),l.attr("y2",function(e){return e.scrollbarState.scrollableAreaHeight})}function qA(e,t,n,r){var i=GA(n),a=YA(i);KA(a),$A(XA(a));var o=JA(a),s=ZA(o);QA(s),eC(s,t,r,e),gC(a)}function GA(e){var t=e.selectAll("."+z9.cn.columnCells).data(M1.repeat,M1.keyFun);return t.enter().append("g").classed(z9.cn.columnCells,!0),t.exit().remove(),t}function YA(e){var t=e.selectAll("."+z9.cn.columnCell).data(N9.splitToCells,function(e){return e.keyWithinBlock});return t.enter().append("g").classed(z9.cn.columnCell,!0),t.exit().remove(),t}function XA(e){var t=e.selectAll("."+z9.cn.cellRect).data(M1.repeat,function(e){return e.keyWithinBlock});return t.enter().append("rect").classed(z9.cn.cellRect,!0),t}function ZA(e){var t=e.selectAll("."+z9.cn.cellText).data(M1.repeat,function(e){return e.keyWithinBlock});return t.enter().append("text").classed(z9.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){CC.event.stopPropagation()}),t}function JA(e){var t=e.selectAll("."+z9.cn.cellTextHolder).data(M1.repeat,function(e){return e.keyWithinBlock});return t.enter().append("g").classed(z9.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),t}function KA(e){e.each(function(e,t){var n=e.calcdata.cells.font,r=e.column.specIndex,i={size:iC(n.size,r,t),color:iC(n.color,r,t),family:iC(n.family,r,t)};e.rowNumber=e.key,e.align=iC(e.calcdata.cells.align,r,t),e.cellBorderWidth=iC(e.calcdata.cells.line.width,r,t),e.font=i})}function QA(e){e.each(function(e){PP.font(CC.select(this),e.font)})}function $A(e){e.attr("width",function(e){return e.column.columnWidth}).attr("stroke-width",function(e){return e.cellBorderWidth}).each(function(e){var t=CC.select(this);jE.stroke(t,iC(e.calcdata.cells.line.color,e.column.specIndex,e.rowNumber)),jE.fill(t,iC(e.calcdata.cells.fill.color,e.column.specIndex,e.rowNumber))})}function eC(e,t,n,r){e.text(function(e){var t=e.column.specIndex,n=e.rowNumber,r=e.value,i="string"===typeof r,a=i&&r.match(/<br>/i),o=!i||a;e.mayHaveMarkup=i&&r.match(/[<&>]/);var s=tC(r);e.latex=s;var l,u=s?"":iC(e.calcdata.cells.prefix,t,n)||"",c=s?"":iC(e.calcdata.cells.suffix,t,n)||"",d=s?null:iC(e.calcdata.cells.format,t,n)||null,f=u+(d?CC.format(d)(e.value):e.value)+c;e.wrappingNeeded=!e.wrapped&&!o&&!s&&(l=nC(f)),e.cellHeightMayIncrease=a||s||e.mayHaveMarkup||(void 0===l?nC(f):l),e.needsConvertToTspans=e.mayHaveMarkup||e.wrappingNeeded||e.latex;var h;if(e.wrappingNeeded){var p=" "===z9.wrapSplitCharacter?f.replace(/<a href=/gi,"<a_href="):f,m=p.split(z9.wrapSplitCharacter),g=" "===z9.wrapSplitCharacter?m.map(function(e){return e.replace(/<a_href=/gi,"<a href=")}):m;e.fragments=g.map(function(e){return{text:e,width:null}}),e.fragments.push({fragment:z9.wrapSpacer,width:null}),h=g.join(z9.lineBreaker)+z9.lineBreaker+z9.wrapSpacer}else delete e.fragments,h=f;return h}).attr("dy",function(e){return e.needsConvertToTspans?0:"0.75em"}).each(function(e){var i=this,a=CC.select(i),o=e.wrappingNeeded?hC:pC;e.needsConvertToTspans?sP.convertToTspans(a,r,o(n,i,t,r,e)):CC.select(i.parentNode).attr("transform",function(e){return"translate("+mC(e)+" "+z9.cellPad+")"}).attr("text-anchor",function(e){return{left:"start",center:"middle",right:"end"}[e.align]})})}function tC(e){return"string"===typeof e&&e.match(z9.latexCheck)}function nC(e){return-1!==e.indexOf(z9.wrapSplitCharacter)}function rC(e,t,n){var r=t.gdColumnsOriginalOrder;t.gdColumns.sort(function(e,t){return n[r.indexOf(e)]-n[r.indexOf(t)]}),t.columnorder=n,e.emit("plotly_restyle")}function iC(e,t,n){if(Array.isArray(e)){var r=e[Math.min(t,e.length-1)];return Array.isArray(r)?r[Math.min(n,r.length-1)]:r}return e}function aC(e,t,n){e.transition().ease(z9.releaseTransitionEase).duration(z9.releaseTransitionDuration).attr("transform","translate("+t.x+" "+n+")")}function oC(e){return"cells"===e.type}function sC(e){return"header"===e.type}function lC(e){return(e.rowBlocks.length?e.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(e,t){return e+vC(t,1/0)},0)}function uC(e,t,n){for(var r=[],i=0,a=0;a<e.length;a++){for(var o=e[a],s=o.rows,l=0,u=0;u<s.length;u++)l+=s[u].rowHeight;o.allRowsHeight=l;var c=i+l,d=t,f=d+n;d<c&&f>i&&r.push(a),i+=l}return r}function cC(e,t,n){var r=HA(t)[0];if(void 0!==r){var i=r.rowBlocks,a=r.calcdata,o=yC(i,i.length),s=r.calcdata.groupHeight-lC(r),l=a.scrollY=Math.max(0,Math.min(o-s,a.scrollY)),u=uC(i,l,s);1===u.length&&(u[0]===i.length-1?u.unshift(u[0]-1):u.push(u[0]+1)),u[0]%2&&u.reverse(),t.each(function(e,t){e.page=u[t],e.scrollY=l}),t.attr("transform",function(e){return"translate(0 "+(yC(e.rowBlocks,e.page)-e.scrollY)+")"}),e&&(fC(e,n,t,u,r.prevPages,r,0),fC(e,n,t,u,r.prevPages,r,1),WA(n,e))}}function dC(e,t,n,r){return function(i){var a=i.calcdata?i.calcdata:i,o=t.filter(function(e){return a.key===e.key}),s=n||a.scrollbarState.dragMultiplier;a.scrollY=void 0===r?a.scrollY+s*CC.event.dy:r;var l=o.selectAll("."+z9.cn.yColumn).selectAll("."+z9.cn.columnBlock).filter(oC);cC(e,l,o)}}function fC(e,t,n,r,i,a,o){r[o]!==i[o]&&(clearTimeout(a.currentRepaint[o]),a.currentRepaint[o]=setTimeout(function(){var a=n.filter(function(e,t){return t===o&&r[t]!==i[t]});qA(e,t,a,n),i[o]=r[o]}))}function hC(e,t,n){return function(){var r=CC.select(t.parentNode);r.each(function(e){var t=e.fragments;r.selectAll("tspan.line").each(function(e,n){t[n].width=this.getComputedTextLength()});var n,i,a=t[t.length-1].width,o=t.slice(0,-1),s=[],l=0,u=e.column.columnWidth-2*z9.cellPad;for(e.value="";o.length;)n=o.shift(),i=n.width+a,l+i>u&&(e.value+=s.join(z9.wrapSpacer)+z9.lineBreaker,s=[],l=0),s.push(n.text),l+=i;l&&(e.value+=s.join(z9.wrapSpacer)),e.wrapped=!0}),r.selectAll("tspan.line").remove(),eC(r.select("."+z9.cn.cellText),n,e),CC.select(t.parentNode.parentNode).call(gC)}}function pC(e,t,n,r,i){return function(){if(!i.settledY){var a=CC.select(t.parentNode),o=bC(i),s=i.key-o.firstRowIndex,l=o.rows[s].rowHeight,u=i.cellHeightMayIncrease?t.parentNode.getBoundingClientRect().height+2*z9.cellPad:l,c=Math.max(u,l);c-o.rows[s].rowHeight&&(o.rows[s].rowHeight=c,e.selectAll("."+z9.cn.columnCell).call(gC),cC(null,e.filter(oC),0),WA(n,r,!0)),a.attr("transform",function(){var e=this,t=e.parentNode,n=t.getBoundingClientRect(),r=CC.select(e.parentNode).select("."+z9.cn.cellRect).node().getBoundingClientRect(),a=e.transform.baseVal.consolidate(),o=r.top-n.top+(a?a.matrix.f:z9.cellPad);return"translate("+mC(i,CC.select(e.parentNode).select("."+z9.cn.cellTextHolder).node().getBoundingClientRect().width)+" "+o+")"}),i.settledY=!0}}}function mC(e,t){switch(e.align){case"left":return z9.cellPad;case"right":return e.column.columnWidth-(t||0)-z9.cellPad;case"center":return(e.column.columnWidth-(t||0))/2;default:return z9.cellPad}}function gC(e){e.attr("transform",function(e){var t=e.rowBlocks[0].auxiliaryBlocks.reduce(function(e,t){return e+vC(t,1/0)},0);return"translate(0 "+(vC(bC(e),e.key)+t)+")"}).selectAll("."+z9.cn.cellRect).attr("height",function(e){return xC(bC(e),e.key).rowHeight})}function yC(e,t){for(var n=0,r=t-1;r>=0;r--)n+=_C(e[r]);return n}function vC(e,t){for(var n=0,r=0;r<e.rows.length&&e.rows[r].rowIndex<t;r++)n+=e.rows[r].rowHeight;return n}function _C(e){var t=e.allRowsHeight;if(void 0!==t)return t;for(var n=0,r=0;r<e.rows.length;r++)n+=e.rows[r].rowHeight;return e.allRowsHeight=n,n}function bC(e){return e.rowBlocks[e.page]}function xC(e,t){return e.rows[t-e.firstRowIndex]}function wC(e,t){for(var n=e.columnorder||[],r=e.header.values.length,i=n.slice(0,r),a=i.slice().sort(function(e,t){return e-t}),o=i.map(function(e){return a.indexOf(e)}),s=o.length;s<r;s++)o.push(s);t("columnorder",o)}function kC(e,t,n){return 1.059*Math.min(t,n/1.349)*Math.pow(e.length,-.2)}function TC(e,t,n,r){function i(r){var i=s[r],a=n.d2c(i,0,e[t.valLetter+"calendar"]);return a===tee?u[r]:a}var a,o=e.spanmode,s=e.span||[],l=[t.min,t.max],u=[t.min-2*r,t.max+2*r];a="soft"===o?u:"hard"===o?l:[i(0),i(1)];var c={type:"linear",range:a};return PI.setConvert(c),c.cleanRange(),a}var MC,AC={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE/1e4,ONEAVGYEAR:315576e5,ONEAVGMONTH:26298e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:1-1e-6,MINUS_SIGN:"\u2212"},CC={exports:{}};!function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function r(e){return null===e?NaN:+e}function i(e){return!isNaN(e)}function a(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}}function o(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(e){return(e+="")===_o||e[0]===bo?bo+e:e}function d(e){return(e+="")[0]===bo?e.slice(1):e}function f(e){return c(e)in this._}function h(e){return(e=c(e))in this._&&delete this._[e]}function p(){var e=[];for(var t in this._)e.push(d(t));return e}function m(){var e=0;for(var t in this._)++e;return e}function g(){for(var e in this._)return!1;return!0}function y(){this._=Object.create(null)}function v(e){return e}function _(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function b(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=xo.length;n<r;++n){var i=xo[n]+t;if(i in e)return i}}function x(){}function w(){}function k(e){function t(){for(var t,r=n,i=-1,a=r.length;++i<a;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new u;return t.on=function(t,i){var a,o=r.get(t);return arguments.length<2?o&&o.on:(o&&(o.on=null,n=n.slice(0,a=n.indexOf(o)).concat(n.slice(a+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function T(){so.event.preventDefault()}function M(){for(var e,t=so.event;e=t.sourceEvent;)t=e;return t}function A(e){for(var t=new w,n=0,r=arguments.length;++n<r;)t[arguments[n]]=k(t);return t.of=function(n,r){return function(i){try{var a=i.sourceEvent=so.event;i.target=e,so.event=i,t[i.type].apply(n,r)}finally{so.event=a}}},t}function C(e){return ko(e,Co),e}function S(e){return"function"===typeof e?e:function(){return To(e,this)}}function E(e){return"function"===typeof e?e:function(){return Mo(e,this)}}function P(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function a(){this.setAttributeNS(e.space,e.local,t)}function o(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=so.ns.qualify(e),null==t?e.local?r:n:"function"===typeof t?e.local?s:o:e.local?a:i}function I(e){return e.trim().replace(/\s+/g," ")}function L(e){return new RegExp("(?:^|\\s+)"+so.requote(e)+"(?:\\s+|$)","g")}function O(e){return(e+"").trim().split(/^|\s+/)}function z(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}e=O(e).map(R);var i=e.length;return"function"===typeof t?r:n}function R(e){var t=L(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",I(i+" "+e))):n.setAttribute("class",I(i.replace(t," ")))}}function D(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function a(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"===typeof t?a:i}function N(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"===typeof t?i:r}function F(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===So&&t.documentElement.namespaceURI===So?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"===typeof e?e:(e=so.ns.qualify(e)).local?n:t}function j(){var e=this.parentNode;e&&e.removeChild(this)}function B(e){return{__data__:e}}function U(e){return function(){return Ao(this,e)}}function V(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function H(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,a=e[n],o=0,s=a.length;o<s;o++)(i=a[o])&&t(i,o,n);return e}function W(e){return ko(e,Po),e}function q(e){var t,n;return function(r,i,a){var o,s=e[a].update,l=s.length;for(a!=n&&(n=a,t=0),i>=t&&(t=i+1);!(o=s[t])&&++t<l;);return o}}function G(e,t,n){function r(){var t=this[o];t&&(this.removeEventListener(e,t,t.$),delete this[o])}function i(){var i=l(t,uo(arguments));r.call(this),this.addEventListener(e,this[o]=i,i.$=n),i._=t}function a(){var t,n=new RegExp("^__on([^.]+)"+so.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var o="__on"+e,s=e.indexOf("."),l=Y;s>0&&(e=e.slice(0,s));var u=Io.get(e);return u&&(e=u,l=X),s?t?i:r:t?x:a}function Y(e,t){return function(n){var r=so.event;so.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{so.event=r}}}function X(e,t){var n=Y(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function Z(n){var r=".dragsuppress-"+ ++Oo,i="click"+r,a=so.select(t(n)).on("touchmove"+r,T).on("dragstart"+r,T).on("selectstart"+r,T);if(null==Lo&&(Lo=!("onselectstart"in n)&&b(n.style,"userSelect")),Lo){var o=e(n).style,s=o[Lo];o[Lo]="none"}return function(e){if(a.on(r,null),Lo&&(o[Lo]=s),e){var t=function(){a.on(i,null)};a.on(i,function(){T(),t()},!0),setTimeout(t,0)}}}function J(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(zo<0){var a=t(e);if(a.scrollX||a.scrollY){r=so.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var o=r[0][0].getScreenCTM();zo=!(o.f||o.e),r.remove()}}return zo?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function K(){return so.event.changedTouches[0].identifier}function Q(e){return e>0?1:e<0?-1:0}function $(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:e<-1?No:Math.acos(e)}function te(e){return e>1?Bo:e<-1?-Bo:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function ae(e){return(e=Math.sin(e/2))*e}function oe(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):xe(""+e,we,se):new se(e,t,n)}function le(e,t,n){function r(e){return e>360?e-=360:e<0&&(e+=360),e<60?a+(o-a)*e/60:e<180?o:e<240?a+(o-a)*(240-e)/60:a}function i(e){return Math.round(255*r(e))}var a,o;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,o=n<=.5?n*(1+t):n+t-n*t,a=2*n-o,new ye(i(e+120),i(e),i(e-120))}function ue(e,t,n){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof de?he(e.l,e.a,e.b):he((e=ke((e=so.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new de(n,Math.cos(e*=Uo)*t,Math.sin(e)*t)}function de(e,t,n){return this instanceof de?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof de?new de(e.l,e.a,e.b):e instanceof ue?ce(e.h,e.c,e.l):ke((e=ye(e)).r,e.g,e.b):new de(e,t,n)}function fe(e,t,n){var r=(e+16)/116,i=r+t/500,a=r-n/200;return i=pe(i)*Jo,r=pe(r)*Ko,a=pe(a)*Qo,new ye(ge(3.2404542*i-1.5371385*r-.4985314*a),ge(-.969266*i+1.8760108*r+.041556*a),ge(.0556434*i-.2040259*r+1.0572252*a))}function he(e,t,n){return e>0?new ue(Math.atan2(n,t)*Vo,Math.sqrt(t*t+n*n),e):new ue(NaN,NaN,e)}function pe(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function me(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function ge(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ye(e,t,n){return this instanceof ye?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ye?new ye(e.r,e.g,e.b):xe(""+e,ye,le):new ye(e,t,n)}function ve(e){return new ye(e>>16,e>>8&255,255&e)}function _e(e){return ve(e)+""}function be(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function xe(e,t,n){var r,i,a,o=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Me(i[0]),Me(i[1]),Me(i[2]))}return(a=ts.get(e))?t(a.r,a.g,a.b):(null==e||"#"!==e.charAt(0)||isNaN(a=parseInt(e.slice(1),16))||(4===e.length?(o=(3840&a)>>4,o|=o>>4,s=240&a,s|=s>>4,l=15&a,l|=l<<4):7===e.length&&(o=(16711680&a)>>16,s=(65280&a)>>8,l=255&a)),t(o,s,l))}function we(e,t,n){var r,i,a=Math.min(e/=255,t/=255,n/=255),o=Math.max(e,t,n),s=o-a,l=(o+a)/2;return s?(i=l<.5?s/(o+a):s/(2-o-a),r=e==o?(t-n)/s+(t<n?6:0):t==o?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new se(r,i,l)}function ke(e,t,n){e=Te(e),t=Te(t),n=Te(n);var r=me((.4124564*e+.3575761*t+.1804375*n)/Jo),i=me((.2126729*e+.7151522*t+.072175*n)/Ko);return de(116*i-16,500*(r-i),200*(i-me((.0193339*e+.119192*t+.9503041*n)/Qo)))}function Te(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Me(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function Ae(e){return"function"===typeof e?e:function(){return e}}function Ce(e){return function(t,n,r){return 2===arguments.length&&"function"===typeof n&&(r=n,n=null),Se(t,n,e,r)}}function Se(e,t,n,r){function i(){var e,t=l.status;if(!t&&Pe(l)||t>=200&&t<300||304===t){try{e=n.call(a,l)}catch(e){return void o.error.call(a,e)}o.load.call(a,e)}else o.error.call(a,l)}var a={},o=so.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(e){var t=so.event;so.event=e;try{o.progress.call(a,l)}finally{so.event=t}},a.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",a)},a.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",a):t},a.responseType=function(e){return arguments.length?(u=e,a):u},a.response=function(e){return n=e,a},["get","post"].forEach(function(e){a[e]=function(){return a.send.apply(a,[e].concat(uo(arguments)))}}),a.send=function(n,r,i){if(2===arguments.length&&"function"===typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=i&&a.on("error",i).on("load",function(e){i(null,e)}),o.beforesend.call(a,l),l.send(null==r?null:r),a},a.abort=function(){return l.abort(),a},so.rebind(a,o,"on"),null==r?a:a.get(Ee(r))}function Ee(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Pe(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Ie(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i=n+t,a={c:e,t:i,n:null};return rs?rs.n=a:ns=a,rs=a,is||(as=clearTimeout(as),is=1,os(Le)),a}function Le(){var e=Oe(),t=ze()-e;t>24?(isFinite(t)&&(clearTimeout(as),as=setTimeout(Le,t)),is=0):(is=1,os(Le))}function Oe(){for(var e=Date.now(),t=ns;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function ze(){for(var e,t=ns,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:ns=t.n;return rs=e,n}function Re(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function De(e,t){var n=Math.pow(10,3*vo(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ne(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,a=r&&n?function(e,t){for(var i=e.length,a=[],o=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>t));)s=r[o=(o+1)%r.length];return a.reverse().join(n)}:v;return function(e){var n=ls.exec(e),r=n[1]||" ",o=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],d=n[7],f=n[8],h=n[9],p=1,m="",g="",y=!1,v=!0;switch(f&&(f=+f.substring(1)),(u||"0"===r&&"="===o)&&(u=r="0",o="="),h){case"n":d=!0,h="g";break;case"%":p=100,g="%",h="f";break;case"p":p=100,g="%",h="r";break;case"b":case"o":case"x":case"X":"#"===l&&(m="0"+h.toLowerCase());case"c":v=!1;case"d":y=!0,f=0;break;case"s":p=-1,h="r"}"$"===l&&(m=i[0],g=i[1]),"r"!=h||f||(h="g"),null!=f&&("g"==h?f=Math.max(1,Math.min(21,f)):"e"!=h&&"f"!=h||(f=Math.max(0,Math.min(20,f)))),h=us.get(h)||Fe;var _=u&&d;return function(e){var n=g;if(y&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===s?"":s;if(p<0){var l=so.formatPrefix(e,f);e=l.scale(e),n=l.symbol+g}else e*=p;e=h(e,f);var b,x,w=e.lastIndexOf(".");if(w<0){var k=v?e.lastIndexOf("e"):-1;k<0?(b=e,x=""):(b=e.substring(0,k),x=e.substring(k))}else b=e.substring(0,w),x=t+e.substring(w+1);!u&&d&&(b=a(b,1/0));var T=m.length+b.length+x.length+(_?0:i.length),M=T<c?new Array(T=c-T+1).join(r):"";return _&&(b=a(M+b,M.length?c-x.length:1/0)),i+=m,e=b+x,("<"===o?i+e+M:">"===o?M+i+e:"^"===o?M.substring(0,T>>=1)+i+e+M.substring(T):i+(_?e:M+e))+n}}}function Fe(e){return e+""}function je(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Be(e,t,n){function r(t){var n=e(t),r=a(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new ds(n-1)),1),n}function a(e,n){return t(e=new ds(+e),n),e}function o(e,r,a){var o=i(e),s=[];if(a>1)for(;o<r;)n(o)%a||s.push(new Date(+o)),t(o,1);else for(;o<r;)s.push(new Date(+o)),t(o,1);return s}function s(e,t,n){try{ds=je;var r=new je;return r._=e,o(r,t,n)}finally{ds=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=a,e.range=o;var l=e.utc=Ue(e);return l.floor=l,l.round=Ue(r),l.ceil=Ue(i),l.offset=Ue(a),l.range=s,e}function Ue(e){return function(t,n){try{ds=je;var r=new je;return r._=t,e(r,n)._}finally{ds=Date}}}function Ve(e){function t(e){function t(t){for(var n,i,a,o=[],s=-1,l=0;++s<r;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=hs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(a=S[n])&&(n=a(t,null==i?"e"===n?" ":"0":i)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,e,t,0)!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&ds!==je,a=new(i?je:ds);return"j"in r?a.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),a.setFullYear(r.y,0,1),a.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(a.getDay()+5)%7:r.w+7*r.U-(a.getDay()+6)%7)):a.setFullYear(r.y,r.m,r.d),a.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?a._:a},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,a,o,s=0,l=t.length,u=n.length;s<l;){if(r>=u)return-1;if(37===(i=t.charCodeAt(s++))){if(o=t.charAt(s++),!(a=E[o in hs?t.charAt(s++):o])||(r=a(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){w.lastIndex=0;var r=w.exec(t.slice(n));return r?(e.w=k.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){b.lastIndex=0;var r=b.exec(t.slice(n));return r?(e.w=x.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){A.lastIndex=0;var r=A.exec(t.slice(n));return r?(e.m=C.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){T.lastIndex=0;var r=T.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,S.c.toString(),t,r)}function l(e,t,r){return n(e,S.x.toString(),t,r)}function u(e,t,r){return n(e,S.X.toString(),t,r)}function c(e,t,n){var r=_.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var d=e.dateTime,f=e.date,h=e.time,p=e.periods,m=e.days,g=e.shortDays,y=e.months,v=e.shortMonths;t.utc=function(e){function n(e){try{ds=je;var t=new ds;return t._=e,r(t)}finally{ds=Date}}var r=t(e);return n.parse=function(e){try{ds=je;var t=r.parse(e);return t&&t._}finally{ds=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=lt;var _=so.map(),b=We(m),x=qe(m),w=We(g),k=qe(g),T=We(y),M=qe(y),A=We(v),C=qe(v);p.forEach(function(e,t){_.set(e.toLowerCase(),t)});var S={a:function(e){return g[e.getDay()]},A:function(e){return m[e.getDay()]},b:function(e){return v[e.getMonth()]},B:function(e){return y[e.getMonth()]},c:t(d),d:function(e,t){return He(e.getDate(),t,2)},e:function(e,t){return He(e.getDate(),t,2)},H:function(e,t){return He(e.getHours(),t,2)},I:function(e,t){return He(e.getHours()%12||12,t,2)},j:function(e,t){return He(1+cs.dayOfYear(e),t,3)},L:function(e,t){return He(e.getMilliseconds(),t,3)},m:function(e,t){return He(e.getMonth()+1,t,2)},M:function(e,t){return He(e.getMinutes(),t,2)},p:function(e){return p[+(e.getHours()>=12)]},S:function(e,t){return He(e.getSeconds(),t,2)},U:function(e,t){return He(cs.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return He(cs.mondayOfYear(e),t,2)},x:t(f),X:t(h),y:function(e,t){return He(e.getFullYear()%100,t,2)},Y:function(e,t){return He(e.getFullYear()%1e4,t,4)},Z:ot,"%":function(){return"%"}},E={a:r,A:i,b:a,B:o,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:at,m:$e,M:rt,p:c,S:it,U:Ye,w:Ge,W:Xe,x:l,X:u,y:Je,Y:Ze,Z:Ke,"%":st};return t}function He(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function We(e){return new RegExp("^(?:"+e.map(so.requote).join("|")+")","i")}function qe(e){for(var t=new u,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ge(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ye(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function Xe(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Ze(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Je(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.y=Qe(+r[0]),n+r[0].length):-1}function Ke(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Qe(e){return e+(e>68?1900:2e3)}function $e(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function et(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function nt(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rt(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function it(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function at(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ot(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=vo(t)/60|0,i=vo(t)%60;return n+He(r,"0",2)+He(i,"0",2)}function st(e,t,n){ms.lastIndex=0;var r=ms.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ut(){}function ct(e,t,n){var r=n.s=e+t,i=r-e,a=r-i;n.t=e-a+(t-i)}function dt(e,t){e&&_s.hasOwnProperty(e.type)&&_s[e.type](e,t)}function ft(e,t,n){var r,i=-1,a=e.length-n;for(t.lineStart();++i<a;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function ht(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ft(e[n],t,1);t.polygonEnd()}function pt(){function e(e,t){e*=Uo,t=t*Uo/2+No/4;var n=e-r,o=n>=0?1:-1,s=o*n,l=Math.cos(t),u=Math.sin(t),c=a*u,d=i*l+c*Math.cos(s),f=c*o*Math.sin(s);xs.add(Math.atan2(f,d)),r=e,i=l,a=u}var t,n,r,i,a;ws.point=function(o,s){ws.point=e,r=(t=o)*Uo,i=Math.cos(s=(n=s)*Uo/2+No/4),a=Math.sin(s)},ws.lineEnd=function(){e(t,n)}}function mt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function gt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function yt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function vt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function _t(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function bt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function xt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function wt(e,t){return vo(e[0]-t[0])<Ro&&vo(e[1]-t[1])<Ro}function kt(e,t){e*=Uo;var n=Math.cos(t*=Uo);Tt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function Tt(e,t,n){++ks,Ms+=(e-Ms)/ks,As+=(t-As)/ks,Cs+=(n-Cs)/ks}function Mt(){function e(e,i){e*=Uo;var a=Math.cos(i*=Uo),o=a*Math.cos(e),s=a*Math.sin(e),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*o-t*l)*u+(u=t*s-n*o)*u),t*o+n*s+r*l);Ts+=u,Ss+=u*(t+(t=o)),Es+=u*(n+(n=s)),Ps+=u*(r+(r=l)),Tt(t,n,r)}var t,n,r;zs.point=function(i,a){i*=Uo;var o=Math.cos(a*=Uo);t=o*Math.cos(i),n=o*Math.sin(i),r=Math.sin(a),zs.point=e,Tt(t,n,r)}}function At(){zs.point=kt}function Ct(){function e(e,t){e*=Uo;var n=Math.cos(t*=Uo),o=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=i*l-a*s,c=a*o-r*l,d=r*s-i*o,f=Math.sqrt(u*u+c*c+d*d),h=r*o+i*s+a*l,p=f&&-ee(h)/f,m=Math.atan2(f,h);Is+=p*u,Ls+=p*c,Os+=p*d,Ts+=m,Ss+=m*(r+(r=o)),Es+=m*(i+(i=s)),Ps+=m*(a+(a=l)),Tt(r,i,a)}var t,n,r,i,a;zs.point=function(o,s){t=o,n=s,zs.point=e,o*=Uo;var l=Math.cos(s*=Uo);r=l*Math.cos(o),i=l*Math.sin(o),a=Math.sin(s),Tt(r,i,a)},zs.lineEnd=function(){e(t,n),zs.lineEnd=At,zs.point=kt}}function St(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Et(){return!0}function Pt(e,t,n,r,i){var a=[],o=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(wt(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);return void i.lineEnd()}var l=new Lt(n,e,null,!0),u=new Lt(n,null,l,!1);l.o=u,a.push(l),o.push(u),l=new Lt(r,e,null,!1),u=new Lt(r,null,l,!0),l.o=u,a.push(l),o.push(u)}}),o.sort(t),It(a),It(o),a.length){for(var s=0,l=n,u=o.length;s<u;++s)o[s].e=l=!l;for(var c,d,f=a[0];;){for(var h=f,p=!0;h.v;)if((h=h.n)===f)return;c=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(p)for(var s=0,u=c.length;s<u;++s)i.point((d=c[s])[0],d[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(p){c=h.p.z;for(var s=c.length-1;s>=0;--s)i.point((d=c[s])[0],d[1])}else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,c=h.z,p=!p}while(!h.v);i.lineEnd()}}}function It(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function Lt(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Ot(e,t,n,r){return function(i,a){function o(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&a.point(t,n)}function s(e,t){var n=i(e,t);g.point(n[0],n[1])}function l(){v.point=s,g.lineStart()}function u(){v.point=o,g.lineEnd()}function c(e,t){m.push([e,t]);var n=i(e,t);b.point(n[0],n[1])}function d(){b.lineStart(),m=[]}function f(){c(m[0][0],m[0][1]),b.lineEnd();var e,t=b.clean(),n=_.buffer(),r=n.length;if(m.pop(),p.push(m),m=null,r)if(1&t){e=n[0];var i,r=e.length-1,o=-1;if(r>0){for(x||(a.polygonStart(),x=!0),a.lineStart();++o<r;)a.point((i=e[o])[0],i[1]);a.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),h.push(n.filter(zt))}var h,p,m,g=t(a),y=i.invert(r[0],r[1]),v={point:o,lineStart:l,lineEnd:u,polygonStart:function(){v.point=c,v.lineStart=d,v.lineEnd=f,h=[],p=[]},polygonEnd:function(){v.point=o,v.lineStart=l,v.lineEnd=u,h=so.merge(h);var e=Bt(y,p);h.length?(x||(a.polygonStart(),x=!0),Pt(h,Dt,e,n,a)):e&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),h=p=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}},_=Rt(),b=t(_),x=!1;return v}}function zt(e){return e.length>1}function Rt(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:x,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Dt(e,t){return((e=e.x)[0]<0?e[1]-Bo-Ro:Bo-e[1])-((t=t.x)[0]<0?t[1]-Bo-Ro:Bo-t[1])}function Nt(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(a,o){var s=a>0?No:-No,l=vo(a-n);vo(l-No)<Ro?(e.point(n,r=(r+o)/2>0?Bo:-Bo),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(a,r),t=0):i!==s&&l>=No&&(vo(n-i)<Ro&&(n-=i*Ro),vo(a-s)<Ro&&(a-=s*Ro),r=Ft(n,r,a,o),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=a,r=o),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function Ft(e,t,n,r){var i,a,o=Math.sin(e-n);return vo(o)>Ro?Math.atan((Math.sin(t)*(a=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*a*o)):(t+r)/2}function jt(e,t,n,r){var i;if(null==e)i=n*Bo,r.point(-No,i),r.point(0,i),r.point(No,i),r.point(No,0),r.point(No,-i),r.point(0,-i),r.point(-No,-i),r.point(-No,0),r.point(-No,i);else if(vo(e[0]-t[0])>Ro){var a=e[0]<t[0]?No:-No;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(t[0],t[1])}function Bt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],a=0,o=0;xs.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(c)for(var d=u[0],f=d[0],h=d[1]/2+No/4,p=Math.sin(h),m=Math.cos(h),g=1;;){g===c&&(g=0),e=u[g];var y=e[0],v=e[1]/2+No/4,_=Math.sin(v),b=Math.cos(v),x=y-f,w=x>=0?1:-1,k=w*x,T=k>No,M=p*_;if(xs.add(Math.atan2(M*w*Math.sin(k),m*b+M*Math.cos(k))),a+=T?x+w*Fo:x,T^f>=n^y>=n){var A=yt(mt(d),mt(e));bt(A);var C=yt(i,A);bt(C);var S=(T^x>=0?-1:1)*te(C[2]);(r>S||r===S&&(A[0]||A[1]))&&(o+=T^x>=0?1:-1)}if(!g++)break;f=y,p=_,m=b,d=e}}return(a<-Ro||a<Ro&&xs<-Ro)^1&o}function Ut(e){function t(e,t){return Math.cos(e)*Math.cos(t)>a}function n(e){var n,a,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,f){var h,p=[d,f],m=t(d,f),g=o?m?0:i(d,f):m?i(d+(d<0?No:-No),f):0;if(!n&&(u=l=m)&&e.lineStart(),m!==l&&(h=r(n,p),(wt(n,h)||wt(p,h))&&(p[0]+=Ro,p[1]+=Ro,m=t(p[0],p[1]))),m!==l)c=0,m?(e.lineStart(),h=r(p,n),e.point(h[0],h[1])):(h=r(n,p),e.point(h[0],h[1]),e.lineEnd()),n=h;else if(s&&n&&o^m){var y;g&a||!(y=r(p,n,!0))||(c=0,o?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1])))}!m||n&&wt(n,p)||e.point(p[0],p[1]),n=p,l=m,a=g},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=mt(e),i=mt(t),o=[1,0,0],s=yt(r,i),l=gt(s,s),u=s[0],c=l-u*u;if(!c)return!n&&e;var d=a*l/c,f=-a*u/c,h=yt(o,s),p=_t(o,d);vt(p,_t(s,f));var m=h,g=gt(p,m),y=gt(m,m),v=g*g-y*(gt(p,p)-1);if(!(v<0)){var _=Math.sqrt(v),b=_t(m,(-g-_)/y);if(vt(b,p),b=xt(b),!n)return b;var x,w=e[0],k=t[0],T=e[1],M=t[1];k<w&&(x=w,w=k,k=x);var A=k-w,C=vo(A-No)<Ro,S=C||A<Ro;if(!C&&M<T&&(x=T,T=M,M=x),S?C?T+M>0^b[1]<(vo(b[0]-w)<Ro?T:M):T<=b[1]&&b[1]<=M:A>No^(w<=b[0]&&b[0]<=k)){var E=_t(m,(-g+_)/y);return vt(E,p),[b,xt(E)]}}}function i(t,n){var r=o?e:No-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var a=Math.cos(e),o=a>0,s=vo(a)>Ro;return Ot(t,n,mn(e,6*Uo),o?[0,-e]:[-No,e-No])}function Vt(e,t,n,r){return function(i){var a,o=i.a,s=i.b,l=o.x,u=o.y,c=s.x,d=s.y,f=0,h=1,p=c-l,m=d-u;if(a=e-l,p||!(a>0)){if(a/=p,p<0){if(a<f)return;a<h&&(h=a)}else if(p>0){if(a>h)return;a>f&&(f=a)}if(a=n-l,p||!(a<0)){if(a/=p,p<0){if(a>h)return;a>f&&(f=a)}else if(p>0){if(a<f)return;a<h&&(h=a)}if(a=t-u,m||!(a>0)){if(a/=m,m<0){if(a<f)return;a<h&&(h=a)}else if(m>0){if(a>h)return;a>f&&(f=a)}if(a=r-u,m||!(a<0)){if(a/=m,m<0){if(a>h)return;a>f&&(f=a)}else if(m>0){if(a<f)return;a<h&&(h=a)}return f>0&&(i.a={x:l+f*p,y:u+f*m}),h<1&&(i.b={x:l+h*p,y:u+h*m}),i}}}}}}function Ht(e,t,n,r){function i(r,i){return vo(r[0]-e)<Ro?i>0?0:3:vo(r[0]-n)<Ro?i>0?2:1:vo(r[1]-t)<Ro?i>0?1:0:i>0?3:2}function a(e,t){return o(e.x,t.x)}function o(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=g.length,r=e[1],i=0;i<n;++i)for(var a,o=1,s=g[i],l=s.length,u=s[0];o<l;++o)a=s[o],u[1]<=r?a[1]>r&&$(u,a,e)>0&&++t:a[1]<=r&&$(u,a,e)<0&&--t,u=a;return 0!==t}function u(a,s,l,u){var c=0,d=0;if(null==a||(c=i(a,l))!==(d=i(s,l))||o(a,s)<0^l>0)do{u.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+l+4)%4)!==d);else u.point(s[0],s[1])}function c(i,a){return e<=i&&i<=n&&t<=a&&a<=r}function d(e,t){c(e,t)&&s.point(e,t)}function f(){E.point=p,g&&g.push(y=[]),T=!0,k=!1,x=w=NaN}function h(){m&&(p(v,_),b&&k&&C.rejoin(),m.push(C.buffer())),E.point=d,k&&s.lineEnd()}function p(e,t){e=Math.max(-Ds,Math.min(Ds,e)),t=Math.max(-Ds,Math.min(Ds,t));var n=c(e,t);if(g&&y.push([e,t]),T)v=e,_=t,b=n,T=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&k)s.point(e,t);else{var r={a:{x:x,y:w},b:{x:e,y:t}};S(r)?(k||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),M=!1):n&&(s.lineStart(),s.point(e,t),M=!1)}x=e,w=t,k=n}var m,g,y,v,_,b,x,w,k,T,M,A=s,C=Rt(),S=Vt(e,t,n,r),E={point:d,lineStart:f,lineEnd:h,polygonStart:function(){s=C,m=[],g=[],M=!0},polygonEnd:function(){s=A,m=so.merge(m);var t=l([e,r]),n=M&&t,i=m.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&Pt(m,a,t,u,s),s.polygonEnd()),m=g=y=null}};return E}}function Wt(e){var t=0,n=No/3,r=sn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*No/180,n=e[1]*No/180):[t/No*180,n/No*180]},i}function qt(e,t){function n(e,t){var n=Math.sqrt(a-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),o-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,a=1+r*(2*i-r),o=Math.sqrt(a)/i;return n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,te((a-(e*e+n*n)*i*i)/(2*i))]},n}function Gt(){function e(e,t){Fs+=i*e-r*t,r=e,i=t}var t,n,r,i;Hs.point=function(a,o){Hs.point=e,t=r=a,n=i=o},Hs.lineEnd=function(){e(t,n)}}function Yt(e,t){e<js&&(js=e),e>Us&&(Us=e),t<Bs&&(Bs=t),t>Vs&&(Vs=t)}function Xt(){function e(e,t){o.push("M",e,",",t,a)}function t(e,t){o.push("M",e,",",t),s.point=n}function n(e,t){o.push("L",e,",",t)}function r(){s.point=e}function i(){o.push("Z")}var a=Zt(4.5),o=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return a=Zt(e),s},result:function(){if(o.length){var e=o.join("");return o=[],e}}};return s}function Zt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Jt(e,t){Ms+=e,As+=t,++Cs}function Kt(){function e(e,r){var i=e-t,a=r-n,o=Math.sqrt(i*i+a*a);Ss+=o*(t+e)/2,Es+=o*(n+r)/2,Ps+=o,Jt(t=e,n=r)}var t,n;qs.point=function(r,i){qs.point=e,Jt(t=r,n=i)}}function Qt(){qs.point=Jt}function $t(){function e(e,t){var n=e-r,a=t-i,o=Math.sqrt(n*n+a*a);Ss+=o*(r+e)/2,Es+=o*(i+t)/2,Ps+=o,o=i*e-r*t,Is+=o*(r+e),Ls+=o*(i+t),Os+=3*o,Jt(r=e,i=t)}var t,n,r,i;qs.point=function(a,o){qs.point=e,Jt(t=r=a,n=i=o)},qs.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+o,n),e.arc(t,n,o,0,Fo)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function a(){e.closePath()}var o=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=a},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return o=e,s},result:x};return s}function tn(e){function t(e){return(s?r:n)(e)}function n(t){return an(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){_=NaN,T.point=a,t.lineStart()}function a(n,r){var a=mt([n,r]),o=e(n,r);i(_,b,v,x,w,k,_=o[0],b=o[1],v=n,x=a[0],w=a[1],k=a[2],s,t),t.point(_,b)}function o(){T.point=n,t.lineEnd()}function l(){r(),T.point=u,T.lineEnd=c}function u(e,t){a(d=e,f=t),h=_,p=b,m=x,g=w,y=k,T.point=a}function c(){i(_,b,v,x,w,k,h,p,d,m,g,y,s,t),T.lineEnd=o,o()}var d,f,h,p,m,g,y,v,_,b,x,w,k,T={point:n,lineStart:r,lineEnd:o,polygonStart:function(){t.polygonStart(),T.lineStart=l},polygonEnd:function(){t.polygonEnd(),T.lineStart=r}};return T}function i(t,n,r,s,l,u,c,d,f,h,p,m,g,y){var v=c-t,_=d-n,b=v*v+_*_;if(b>4*a&&g--){var x=s+h,w=l+p,k=u+m,T=Math.sqrt(x*x+w*w+k*k),M=Math.asin(k/=T),A=vo(vo(k)-1)<Ro||vo(r-f)<Ro?(r+f)/2:Math.atan2(w,x),C=e(A,M),S=C[0],E=C[1],P=S-t,I=E-n,L=_*P-v*I;(L*L/b>a||vo((v*P+_*I)/b-.5)>.3||s*h+l*p+u*m<o)&&(i(t,n,r,s,l,u,S,E,A,x/=T,w/=T,k,g,y),y.point(S,E),i(S,E,A,x,w,k,c,d,f,h,p,m,g,y))}}var a=.5,o=Math.cos(30*Uo),s=16;return t.precision=function(e){return arguments.length?(s=(a=e*e)>0&&16,t):Math.sqrt(a)},t}function nn(e){var t=tn(function(t,n){return e([t*Vo,n*Vo])});return function(e){return ln(t(e))}}function rn(e){this.stream=e}function an(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function on(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*Uo,e[1]*Uo),[e[0]*f+l,u-e[1]*f]}function n(e){return(e=s.invert((e[0]-l)/f,(u-e[1])/f))&&[e[0]*Vo,e[1]*Vo]}function r(){s=St(o=dn(y,_,b),a);var e=a(m,g);return l=h-e[0]*f,u=p+e[1]*f,i()}function i(){return c&&(c.valid=!1,c=null),t}var a,o,s,l,u,c,d=tn(function(e,t){return e=a(e,t),[e[0]*f+l,u-e[1]*f]}),f=150,h=480,p=250,m=0,g=0,y=0,_=0,b=0,x=Rs,w=v,k=null,T=null;return t.stream=function(e){return c&&(c.valid=!1),c=ln(x(o,d(w(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(x=null==e?(k=e,Rs):Ut((k=+e)*Uo),i()):k},t.clipExtent=function(e){return arguments.length?(T=e,w=e?Ht(e[0][0],e[0][1],e[1][0],e[1][1]):v,i()):T},t.scale=function(e){return arguments.length?(f=+e,r()):f},t.translate=function(e){return arguments.length?(h=+e[0],p=+e[1],r()):[h,p]},t.center=function(e){return arguments.length?(m=e[0]%360*Uo,g=e[1]%360*Uo,r()):[m*Vo,g*Vo]},t.rotate=function(e){return arguments.length?(y=e[0]%360*Uo,_=e[1]%360*Uo,b=e.length>2?e[2]%360*Uo:0,r()):[y*Vo,_*Vo,b*Vo]},so.rebind(t,d,"precision"),function(){return a=e.apply(this,arguments),t.invert=a.invert&&n,r()}}function ln(e){return an(e,function(t,n){e.point(t*Uo,n*Uo)})}function un(e,t){return[e,t]}function cn(e,t){return[e>No?e-Fo:e<-No?e+Fo:e,t]}function dn(e,t,n){return e?t||n?St(hn(e),pn(t,n)):hn(e):t||n?pn(t,n):cn}function fn(e){return function(t,n){return t+=e,[t>No?t-Fo:t<-No?t+Fo:t,n]}}function hn(e){var t=fn(e);return t.invert=fn(-e),t}function pn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*i;return[Math.atan2(l*a-c*o,s*r-u*i),te(c*a+l*o)]}var r=Math.cos(e),i=Math.sin(e),a=Math.cos(t),o=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*a-l*o;return[Math.atan2(l*a+u*o,s*r+c*i),te(c*r-s*i)]},n}function mn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,a,o,s){var l=o*t;null!=i?(i=gn(n,i),a=gn(n,a),(o>0?i<a:i>a)&&(i+=o*Fo)):(i=e+o*Fo,a=e-.5*l);for(var u,c=i;o>0?c>a:c<a;c-=l)s.point((u=xt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function gn(e,t){var n=mt(t);n[0]-=e,bt(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Ro)%(2*Math.PI)}function yn(e,t,n){var r=so.range(e,t-Ro,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function vn(e,t,n){var r=so.range(e,t-Ro,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function _n(e){return e.source}function bn(e){return e.target}function xn(e,t,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(r),s=Math.sin(r),l=i*Math.cos(e),u=i*Math.sin(e),c=o*Math.cos(n),d=o*Math.sin(n),f=2*Math.asin(Math.sqrt(ae(r-t)+i*o*ae(n-e))),h=1/Math.sin(f),p=f?function(e){var t=Math.sin(e*=f)*h,n=Math.sin(f-e)*h,r=n*l+t*c,i=n*u+t*d,o=n*a+t*s;return[Math.atan2(i,r)*Vo,Math.atan2(o,Math.sqrt(r*r+i*i))*Vo]}:function(){return[e*Vo,t*Vo]};return p.distance=f,p}function wn(){function e(e,i){var a=Math.sin(i*=Uo),o=Math.cos(i),s=vo((e*=Uo)-t),l=Math.cos(s);Gs+=Math.atan2(Math.sqrt((s=o*Math.sin(s))*s+(s=r*a-n*o*l)*s),n*a+r*o*l),t=e,n=a,r=o}var t,n,r;Ys.point=function(i,a){t=i*Uo,n=Math.sin(a*=Uo),r=Math.cos(a),Ys.point=e},Ys.lineEnd=function(){Ys.point=Ys.lineEnd=x}}function kn(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),a=e(r*i);return[a*i*Math.sin(t),a*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),a=Math.sin(i),o=Math.cos(i);return[Math.atan2(e*a,r*o),Math.asin(r&&n*a/r)]},n}function Tn(e,t){function n(e,t){o>0?t<-Bo+Ro&&(t=-Bo+Ro):t>Bo-Ro&&(t=Bo-Ro);var n=o/Math.pow(i(t),a);return[n*Math.sin(a*e),o-n*Math.cos(a*e)]}var r=Math.cos(e),i=function(e){return Math.tan(No/4+e/2)},a=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),o=r*Math.pow(i(e),a)/a;return a?(n.invert=function(e,t){var n=o-t,r=Q(a)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/a,2*Math.atan(Math.pow(o/r,1/a))-Bo]},n):An}function Mn(e,t){function n(e,t){var n=a-t;return[n*Math.sin(i*e),a-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),a=r/i+e;return vo(i)<Ro?un:(n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,a-Q(i)*Math.sqrt(e*e+n*n)]},n)}function An(e,t){return[e,Math.log(Math.tan(No/4+t/2))]}function Cn(e){var t,n=on(e),r=n.scale,i=n.translate,a=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var o=a.apply(n,arguments);if(o===n){if(t=null==e){var s=No*r(),l=i();a([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(o=null);return o},n.clipExtent(null)}function Sn(e,t){return[Math.log(Math.tan(No/4+t/2)),-e]}function En(e){return e[0]}function Pn(e){return e[1]}function In(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&$(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function Ln(e,t){return e[0]-t[0]||e[1]-t[1]}function On(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function zn(e,t,n,r){var i=e[0],a=n[0],o=t[0]-i,s=r[0]-a,l=e[1],u=n[1],c=t[1]-l,d=r[1]-u,f=(s*(l-u)-d*(i-a))/(d*o-s*c);return[i+f*o,l+f*c]}function Rn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function Dn(){rr(this),this.edge=this.site=this.circle=null}function Nn(e){var t=al.pop()||new Dn;return t.site=e,t}function Fn(e){Xn(e),nl.remove(e),al.push(e),rr(e)}function jn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},a=e.P,o=e.N,s=[e];Fn(e);for(var l=a;l.circle&&vo(n-l.circle.x)<Ro&&vo(r-l.circle.cy)<Ro;)a=l.P,s.unshift(l),Fn(l),l=a;s.unshift(l),Xn(l);for(var u=o;u.circle&&vo(n-u.circle.x)<Ro&&vo(r-u.circle.cy)<Ro;)o=u.N,s.push(u),Fn(u),u=o;s.push(u),Xn(u);var c,d=s.length;for(c=1;c<d;++c)u=s[c],l=s[c-1],er(u.edge,l.site,u.site,i);l=s[0],u=s[d-1],u.edge=Qn(l.site,u.site,null,i),Yn(l),Yn(u)}function Bn(e){for(var t,n,r,i,a=e.x,o=e.y,s=nl._;s;)if((r=Un(s,o)-a)>Ro)s=s.L;else{if(!((i=a-Vn(s,o))>Ro)){r>-Ro?(t=s.P,n=s):i>-Ro?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Nn(e);if(nl.insert(t,l),t||n){if(t===n)return Xn(t),n=Nn(t.site),nl.insert(l,n),l.edge=n.edge=Qn(t.site,l.site),Yn(t),void Yn(n);if(!n)return void(l.edge=Qn(t.site,l.site));Xn(t),Xn(n);var u=t.site,c=u.x,d=u.y,f=e.x-c,h=e.y-d,p=n.site,m=p.x-c,g=p.y-d,y=2*(f*g-h*m),v=f*f+h*h,_=m*m+g*g,b={x:(g*v-h*_)/y+c,y:(f*_-m*v)/y+d};er(n.edge,u,p,b),l.edge=Qn(u,e,null,b),n.edge=Qn(e,p,null,b),Yn(t),Yn(n)}}function Un(e,t){var n=e.site,r=n.x,i=n.y,a=i-t;if(!a)return r;var o=e.P;if(!o)return-1/0;n=o.site;var s=n.x,l=n.y,u=l-t;if(!u)return s;var c=s-r,d=1/a-1/u,f=c/u;return d?(-f+Math.sqrt(f*f-2*d*(c*c/(-2*u)-l+u/2+i-a/2)))/d+r:(r+s)/2}function Vn(e,t){var n=e.N;if(n)return Un(n,t);var r=e.site;return r.y===t?r.x:1/0}function Hn(e){this.site=e,this.edges=[]}function Wn(e){for(var t,n,r,i,a,o,s,l,u,c,d=e[0][0],f=e[1][0],h=e[0][1],p=e[1][1],m=tl,g=m.length;g--;)if((a=m[g])&&a.prepare())for(s=a.edges,l=s.length,o=0;o<l;)c=s[o].end(),r=c.x,i=c.y,u=s[++o%l].start(),t=u.x,n=u.y,(vo(r-t)>Ro||vo(i-n)>Ro)&&(s.splice(o,0,new tr($n(a.site,c,vo(r-d)<Ro&&p-i>Ro?{x:d,y:vo(t-d)<Ro?n:p}:vo(i-p)<Ro&&f-r>Ro?{x:vo(n-p)<Ro?t:f,y:p}:vo(r-f)<Ro&&i-h>Ro?{x:f,y:vo(t-f)<Ro?n:h}:vo(i-h)<Ro&&r-d>Ro?{x:vo(n-h)<Ro?t:d,y:h}:null),a.site,null)),++l)}function qn(e,t){return t.angle-e.angle}function Gn(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Yn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,a=n.site;if(r!==a){var o=i.x,s=i.y,l=r.x-o,u=r.y-s,c=a.x-o,d=a.y-s,f=2*(l*d-u*c);if(!(f>=-Do)){var h=l*l+u*u,p=c*c+d*d,m=(d*h-u*p)/f,g=(l*p-c*h)/f,d=g+s,y=ol.pop()||new Gn;y.arc=e,y.site=i,y.x=m+o,y.y=d+Math.sqrt(m*m+g*g),y.cy=d,e.circle=y;for(var v=null,_=il._;_;)if(y.y<_.y||y.y===_.y&&y.x<=_.x){if(!_.L){v=_.P;break}_=_.L}else{if(!_.R){v=_;break}_=_.R}il.insert(v,y),v||(rl=y)}}}}function Xn(e){var t=e.circle;t&&(t.P||(rl=t.N),il.remove(t),ol.push(t),rr(t),e.circle=null)}function Zn(e){for(var t,n=el,r=Vt(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)t=n[i],(!Jn(t,e)||!r(t)||vo(t.a.x-t.b.x)<Ro&&vo(t.a.y-t.b.y)<Ro)&&(t.a=t.b=null,n.splice(i,1))}function Jn(e,t){var n=e.b;if(n)return!0;var r,i,a=e.a,o=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,d=e.r,f=c.x,h=c.y,p=d.x,m=d.y,g=(f+p)/2,y=(h+m)/2;if(m===h){if(g<o||g>=s)return;if(f>p){if(a){if(a.y>=u)return}else a={x:g,y:l};n={x:g,y:u}}else{if(a){if(a.y<l)return}else a={x:g,y:u};n={x:g,y:l}}}else if(r=(f-p)/(m-h),i=y-r*g,r<-1||r>1)if(f>p){if(a){if(a.y>=u)return}else a={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(a){if(a.y<l)return}else a={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(h<m){if(a){if(a.x>=s)return}else a={x:o,y:r*o+i};n={x:s,y:r*s+i}}else{if(a){if(a.x<o)return}else a={x:s,y:r*s+i};n={x:o,y:r*o+i}}return e.a=a,e.b=n,!0}function Kn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Qn(e,t,n,r){var i=new Kn(e,t);return el.push(i),n&&er(i,e,t,n),r&&er(i,t,e,r),tl[e.i].edges.push(new tr(i,e,t)),tl[t.i].edges.push(new tr(i,t,e)),i}function $n(e,t,n){var r=new Kn(e,null);return r.a=t,r.b=n,el.push(r),r}function er(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function tr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ir(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function ar(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function or(e){for(;e.L;)e=e.L;return e}function sr(e,t){var n,r,i,a=e.sort(lr).pop();for(el=[],tl=new Array(e.length),nl=new nr,il=new nr;;)if(i=rl,a&&(!i||a.y<i.y||a.y===i.y&&a.x<i.x))a.x===n&&a.y===r||(tl[a.i]=new Hn(a),Bn(a),n=a.x,r=a.y),a=e.pop();else{if(!i)break;jn(i.arc)}t&&(Zn(t),Wn(t));var o={cells:tl,edges:el};return nl=il=el=tl=null,o}function lr(e,t){return t.y-e.y||t.x-e.x}function ur(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function cr(e){return e.x}function dr(e){return e.y}function fr(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function hr(e,t,n,r,i,a){if(!e(t,n,r,i,a)){var o=.5*(n+i),s=.5*(r+a),l=t.nodes;l[0]&&hr(e,l[0],n,r,o,s),l[1]&&hr(e,l[1],o,r,i,s),l[2]&&hr(e,l[2],n,s,o,a),l[3]&&hr(e,l[3],o,s,i,a)}}function pr(e,t,n,r,i,a,o){var s,l=1/0;return function e(u,c,d,f,h){if(!(c>a||d>o||f<r||h<i)){if(p=u.point){var p,m=t-u.x,g=n-u.y,y=m*m+g*g;if(y<l){var v=Math.sqrt(l=y);r=t-v,i=n-v,a=t+v,o=n+v,s=p}}for(var _=u.nodes,b=.5*(c+f),x=.5*(d+h),w=t>=b,k=n>=x,T=k<<1|w,M=T+4;T<M;++T)if(u=_[3&T])switch(3&T){case 0:e(u,c,d,b,x);break;case 1:e(u,b,d,f,x);break;case 2:e(u,c,x,b,h);break;case 3:e(u,b,x,f,h)}}}(e,r,i,a,o),s}function mr(e,t){e=so.rgb(e),t=so.rgb(t);var n=e.r,r=e.g,i=e.b,a=t.r-n,o=t.g-r,s=t.b-i;return function(e){return"#"+be(Math.round(n+a*e))+be(Math.round(r+o*e))+be(Math.round(i+s*e))}}function gr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=_r(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function yr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vr(e,t){var n,r,i,a=ll.lastIndex=ul.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=ll.exec(e))&&(r=ul.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:yr(n,r)})),a=ul.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function _r(e,t){for(var n,r=so.interpolators.length;--r>=0&&!(n=so.interpolators[r](e,t)););return n}function br(e,t){var n,r=[],i=[],a=e.length,o=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(_r(e[n],t[n]));for(;n<a;++n)i[n]=e[n];for(;n<o;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}function xr(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function wr(e){return function(t){return 1-e(1-t)}}function kr(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Tr(e){return e*e}function Mr(e){return e*e*e}function Ar(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function Cr(e){return function(t){return Math.pow(t,e)}}function Sr(e){return 1-Math.cos(e*Bo)}function Er(e){return Math.pow(2,10*(e-1))}function Pr(e){return 1-Math.sqrt(1-e*e)}function Ir(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Fo*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Fo/t)}}function Lr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Or(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function zr(e,t){e=so.hcl(e),t=so.hcl(t);var n=e.h,r=e.c,i=e.l,a=t.h-n,o=t.c-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.c:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360),function(e){return ce(n+a*e,r+o*e,i+s*e)+""}}function Rr(e,t){e=so.hsl(e),t=so.hsl(t);var n=e.h,r=e.s,i=e.l,a=t.h-n,o=t.s-r,s=t.l-i;return isNaN(o)&&(o=0,r=isNaN(r)?t.s:r),isNaN(a)?(a=0,n=isNaN(n)?t.h:n):a>180?a-=360:a<-180&&(a+=360),function(e){return le(n+a*e,r+o*e,i+s*e)+""}}function Dr(e,t){e=so.lab(e),t=so.lab(t);var n=e.l,r=e.a,i=e.b,a=t.l-n,o=t.a-r,s=t.b-i;return function(e){return fe(n+a*e,r+o*e,i+s*e)+""}}function Nr(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Fr(e){var t=[e.a,e.b],n=[e.c,e.d],r=Br(t),i=jr(t,n),a=Br(Ur(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*Vo,this.translate=[e.e,e.f],this.scale=[r,a],this.skew=a?Math.atan2(i,a)*Vo:0}function jr(e,t){return e[0]*t[0]+e[1]*t[1]}function Br(e){var t=Math.sqrt(jr(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Ur(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function Vr(e){return e.length?e.pop()+",":""}function Hr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:yr(e[0],t[0])},{i:i-2,x:yr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Wr(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(Vr(n)+"rotate(",null,")")-2,x:yr(e,t)})):t&&n.push(Vr(n)+"rotate("+t+")")}function qr(e,t,n,r){e!==t?r.push({i:n.push(Vr(n)+"skewX(",null,")")-2,x:yr(e,t)}):t&&n.push(Vr(n)+"skewX("+t+")")}function Gr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(Vr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:yr(e[0],t[0])},{i:i-2,x:yr(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(Vr(n)+"scale("+t+")")}function Yr(e,t){var n=[],r=[];return e=so.transform(e),t=so.transform(t),Hr(e.translate,t.translate,n,r),Wr(e.rotate,t.rotate,n,r),qr(e.skew,t.skew,n,r),Gr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,a=r.length;++i<a;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Xr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function Zr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Jr(e){for(var t=e.source,n=e.target,r=Qr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var a=i.length;n!==r;)i.splice(a,0,n),n=n.parent;return i}function Kr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Qr(e,t){if(e===t)return e;for(var n=Kr(e),r=Kr(t),i=n.pop(),a=r.pop(),o=null;i===a;)o=i,i=n.pop(),a=r.pop();return o}function $r(e){e.fixed|=2}function ei(e){e.fixed&=-7}function ti(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ni(e){e.fixed&=-5}function ri(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var a,o=e.nodes,s=o.length,l=-1;++l<s;)null!=(a=o[l])&&(ri(a,t,n),e.charge+=a.charge,r+=a.charge*a.cx,i+=a.charge*a.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,i+=u*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ii(e,t){return so.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ci,e}function ai(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function oi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(a=e.children)&&(i=a.length))for(var i,a,o=-1;++o<i;)n.push(a[o]);for(;null!=(e=r.pop());)t(e)}function si(e){return e.children}function li(e){return e.value}function ui(e,t){return t.value-e.value}function ci(e){return so.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function di(e){return e.x}function fi(e){return e.y}function hi(e,t,n){e.y0=t,e.y=n}function pi(e){return so.range(e.length)}function mi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function gi(e){for(var t,n=1,r=0,i=e[0][1],a=e.length;n<a;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function yi(e){return e.reduce(vi,0)}function vi(e,t){return e+t[1]}function _i(e,t){return bi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function bi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,a=[];++n<=t;)a[n]=i*n+r;return a}function xi(e){return[so.min(e),so.max(e)]}function wi(e,t){return e.value-t.value}function ki(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ti(e,t){e._pack_next=t,t._pack_prev=e}function Mi(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Ai(e){function t(e){c=Math.min(e.x-e.r,c),d=Math.max(e.x+e.r,d),f=Math.min(e.y-e.r,f),h=Math.max(e.y+e.r,h)}if((n=e.children)&&(u=n.length)){var n,r,i,a,o,s,l,u,c=1/0,d=-1/0,f=1/0,h=-1/0;if(n.forEach(Ci),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(i=n[1],i.x=i.r,i.y=0,t(i),u>2))for(a=n[2],Pi(r,i,a),t(a),ki(r,a),r._pack_prev=a,ki(a,i),i=r._pack_next,o=3;o<u;o++){Pi(r,i,a=n[o]);var p=0,m=1,g=1;for(s=i._pack_next;s!==i;s=s._pack_next,m++)if(Mi(s,a)){p=1;break}if(1==p)for(l=r._pack_prev;l!==s._pack_prev&&!Mi(l,a);l=l._pack_prev,g++);p?(m<g||m==g&&i.r<r.r?Ti(r,i=s):Ti(r=l,i),o--):(ki(r,a),i=a,t(a))}var y=(c+d)/2,v=(f+h)/2,_=0;for(o=0;o<u;o++)a=n[o],a.x-=y,a.y-=v,_=Math.max(_,a.r+Math.sqrt(a.x*a.x+a.y*a.y));e.r=_,n.forEach(Si)}}function Ci(e){e._pack_next=e._pack_prev=e}function Si(e){delete e._pack_next,delete e._pack_prev}function Ei(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var a=-1,o=i.length;++a<o;)Ei(i[a],t,n,r)}function Pi(e,t,n){var r=e.r+n.r,i=t.x-e.x,a=t.y-e.y;if(r&&(i||a)){var o=t.r+n.r,s=i*i+a*a;o*=o,r*=r;var l=.5+(r-o)/(2*s),u=Math.sqrt(Math.max(0,2*o*(r+s)-(r-=s)*r-o*o))/(2*s);n.x=e.x+l*i+u*a,n.y=e.y+l*a-u*i}else n.x=e.x+r,n.y=e.y}function Ii(e,t){return e.parent==t.parent?1:2}function Li(e){var t=e.children;return t.length?t[0]:e.t}function Oi(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function zi(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Ri(e){for(var t,n=0,r=0,i=e.children,a=i.length;--a>=0;)t=i[a],t.z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Di(e,t,n){return e.a.parent===t.parent?e.a:n}function Ni(e){return 1+so.max(e,function(e){return e.y})}function Fi(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function ji(e){var t=e.children;return t&&t.length?ji(t[0]):e}function Bi(e){var t,n=e.children;return n&&(t=n.length)?Bi(n[t-1]):e}function Ui(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function Vi(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],a=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),a<0&&(r+=a/2,a=0),{x:n,y:r,dx:i,dy:a}}function Hi(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Wi(e){return e.rangeExtent?e.rangeExtent():Hi(e.range())}function qi(e,t,n,r){var i=n(e[0],e[1]),a=r(t[0],t[1]);return function(e){return a(i(e))}}function Gi(e,t){var n,r=0,i=e.length-1,a=e[r],o=e[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),e[r]=t.floor(a),e[i]=t.ceil(o),e}function Yi(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:bl}function Xi(e,t,n,r){var i=[],a=[],o=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<=s;)i.push(n(e[o-1],e[o])),a.push(r(t[o-1],t[o]));return function(t){var n=so.bisect(e,t,1,s)-1;return a[n](i[n](t))}}function Zi(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Xi:qi,l=r?Zr:Xr;return o=i(e,t,l,n),s=i(t,e,l,_r),a}function a(e){return o(e)}var o,s;return a.invert=function(e){return s(e)},a.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},a.range=function(e){return arguments.length?(t=e,i()):t},a.rangeRound=function(e){return a.range(e).interpolate(Nr)},a.clamp=function(e){return arguments.length?(r=e,i()):r},a.interpolate=function(e){return arguments.length?(n=e,i()):n},a.ticks=function(t){return $i(e,t)},a.tickFormat=function(t,n){return ea(e,t,n)},a.nice=function(t){return Ki(e,t),i()},a.copy=function(){return Zi(e,t,n,r)},i()}function Ji(e,t){return so.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Ki(e,t){return Gi(e,Yi(Qi(e,t)[2])),Gi(e,Yi(Qi(e,t)[2])),e}function Qi(e,t){null==t&&(t=10);var n=Hi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),a=t/r*i;return a<=.15?i*=10:a<=.35?i*=5:a<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function $i(e,t){return so.range.apply(so,Qi(e,t))}function ea(e,t,n){var r=Qi(e,t);if(n){var i=ls.exec(n);if(i.shift(),"s"===i[8]){var a=so.formatPrefix(Math.max(vo(r[0]),vo(r[1])));return i[7]||(i[7]="."+ta(a.scale(r[2]))),i[8]="f",n=so.format(i.join("")),function(e){return n(a.scale(e))+a.symbol}}i[7]||(i[7]="."+na(i[8],r)),n=i.join("")}else n=",."+ta(r[2])+"f";return so.format(n)}function ta(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function na(e,t){var n=ta(t[2]);return e in xl?Math.abs(n-ta(Math.max(vo(t[0]),vo(t[1]))))+ +("e"!==e):n-2*("%"===e)}function ra(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function a(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function o(t){return e(i(t))}return o.invert=function(t){return a(e.invert(t))},o.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),o):r},o.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),o):t},o.nice=function(){var t=Gi(r.map(i),n?Math:kl);return e.domain(t),r=t.map(a),o},o.ticks=function(){var e=Hi(r),o=[],s=e[0],l=e[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),d=t%1?2:t;if(isFinite(c-u)){if(n){for(;u<c;u++)for(var f=1;f<d;f++)o.push(a(u)*f);o.push(a(u))}else for(o.push(a(u));u++<c;)for(var f=d-1;f>0;f--)o.push(a(u)*f);for(u=0;o[u]<s;u++);for(c=o.length;o[c-1]>l;c--);o=o.slice(u,c)}return o},o.tickFormat=function(e,n){if(!arguments.length)return wl;arguments.length<2?n=wl:"function"!==typeof n&&(n=so.format(n));var r=Math.max(1,t*e/o.ticks().length);return function(e){var o=e/a(Math.round(i(e)));return o*t<t-.5&&(o*=t),o<=r?n(e):""}},o.copy=function(){return ra(e.copy(),t,n,r)},Ji(o,e)}function ia(e,t,n){function r(t){return e(i(t))}var i=aa(t),a=aa(1/t);return r.invert=function(t){return a(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return $i(n,e)},r.tickFormat=function(e,t){return ea(n,e,t)},r.nice=function(e){return r.domain(Ki(n,e))},r.exponent=function(o){return arguments.length?(i=aa(t=o),a=aa(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return ia(e.copy(),t,n)},Ji(r,e)}function aa(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oa(e,t){function n(n){return a[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%a.length]}function r(t,n){return so.range(e.length).map(function(e){return t+n*e})}var i,a,o;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new u;for(var a,o=-1,s=r.length;++o<s;)i.has(a=r[o])||i.set(a,e.push(a));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(a=e,o=0,t={t:"range",a:arguments},n):a},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return a=r(l+c*s/2,c),o=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return a=r(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),o=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=i[1-u],f=(d-c)/(e.length-s+2*l);return a=r(c+f*l,f),u&&a.reverse(),o=f*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=i[1-u],f=Math.floor((d-c)/(e.length-s+2*l));return a=r(c+Math.round((d-c-(e.length-s)*f)/2),f),u&&a.reverse(),o=Math.round(f*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return o},n.rangeExtent=function(){return Hi(t.a[0])},n.copy=function(){return oa(e,t)},n.domain(e)}function sa(e,t){function a(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=so.quantile(e,n/r);return o}function o(e){if(!isNaN(e=+e))return t[so.bisect(s,e)]}var s;return o.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),a()):e},o.range=function(e){return arguments.length?(t=e,a()):t},o.quantiles=function(){return s},o.invertExtent=function(n){return n=t.indexOf(n),n<0?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},o.copy=function(){return sa(e,t)},a()}function la(e,t,n){function r(t){return n[Math.max(0,Math.min(o,Math.floor(a*(t-e))))]}function i(){return a=n.length/(t-e),o=n.length-1,r}var a,o;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/a+e,[t,t+1/a]},r.copy=function(){return la(e,t,n)},i()}function ua(e,t){function n(n){if(n<=n)return t[so.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return ua(e,t)},n}function ca(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return $i(e,t)},t.tickFormat=function(t,n){return ea(e,t,n)},t.copy=function(){return ca(e)},t}function da(){return 0}function fa(e){return e.innerRadius}function ha(e){return e.outerRadius}function pa(e){return e.startAngle}function ma(e){return e.endAngle}function ga(e){return e&&e.padAngle}function ya(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function va(e,t,n,r,i){var a=e[0]-t[0],o=e[1]-t[1],s=(i?r:-r)/Math.sqrt(a*a+o*o),l=s*o,u=-s*a,c=e[0]+l,d=e[1]+u,f=t[0]+l,h=t[1]+u,p=(c+f)/2,m=(d+h)/2,g=f-c,y=h-d,v=g*g+y*y,_=n-r,b=c*h-f*d,x=(y<0?-1:1)*Math.sqrt(Math.max(0,_*_*v-b*b)),w=(b*y-g*x)/v,k=(-b*g-y*x)/v,T=(b*y+g*x)/v,M=(-b*g+y*x)/v,A=w-p,C=k-m,S=T-p,E=M-m;return A*A+C*C>S*S+E*E&&(w=T,k=M),[[w-l,k-u],[w*n/_,k*n/_]]}function _a(e){function t(t){function o(){u.push("M",a(e(c),s))}for(var l,u=[],c=[],d=-1,f=t.length,h=Ae(n),p=Ae(r);++d<f;)i.call(this,l=t[d],d)?c.push([+h.call(this,l,d),+p.call(this,l,d)]):c.length&&(o(),c=[]);return c.length&&o(),u.length?u.join(""):null}var n=En,r=Pn,i=Et,a=ba,o=a.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(o="function"===typeof e?a=e:(a=El.get(e)||ba).key,t):o},t.tension=function(e){return arguments.length?(s=e,t):s},t}function ba(e){return e.length>1?e.join("L"):e+"Z"}function xa(e){return e.join("L")+"Z"}function wa(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function ka(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function Ta(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function Ma(e,t){return e.length<4?ba(e):e[1]+Sa(e.slice(1,-1),Ea(e,t))}function Aa(e,t){return e.length<3?xa(e):e[0]+Sa((e.push(e[0]),e),Ea([e[e.length-2]].concat(e,[e[1]]),t))}function Ca(e,t){return e.length<3?ba(e):e[0]+Sa(e,Ea(e,t))}function Sa(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return ba(e);var n=e.length!=t.length,r="",i=e[0],a=e[1],o=t[0],s=o,l=1;if(n&&(r+="Q"+(a[0]-2*o[0]/3)+","+(a[1]-2*o[1]/3)+","+a[0]+","+a[1],i=e[1],l=2),t.length>1){s=t[1],a=e[l],l++,r+="C"+(i[0]+o[0])+","+(i[1]+o[1])+","+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1];for(var u=2;u<t.length;u++,l++)a=e[l],s=t[u],r+="S"+(a[0]-s[0])+","+(a[1]-s[1])+","+a[0]+","+a[1]}if(n){var c=e[l];r+="Q"+(a[0]+2*s[0]/3)+","+(a[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Ea(e,t){for(var n,r=[],i=(1-t)/2,a=e[0],o=e[1],s=1,l=e.length;++s<l;)n=a,a=o,o=e[s],r.push([i*(o[0]-n[0]),i*(o[1]-n[1])]);return r}function Pa(e){if(e.length<3)return ba(e);var t=1,n=e.length,r=e[0],i=r[0],a=r[1],o=[i,i,i,(r=e[1])[0]],s=[a,a,a,r[1]],l=[i,",",a,"L",za(Ll,o),",",za(Ll,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],o.shift(),o.push(r[0]),s.shift(),s.push(r[1]),Ra(l,o,s);return e.pop(),l.push("L",r),l.join("")}function Ia(e){if(e.length<4)return ba(e);for(var t,n=[],r=-1,i=e.length,a=[0],o=[0];++r<3;)t=e[r],a.push(t[0]),o.push(t[1]);for(n.push(za(Ll,a)+","+za(Ll,o)),--r;++r<i;)t=e[r],a.shift(),a.push(t[0]),o.shift(),o.push(t[1]),Ra(n,a,o);return n.join("")}function La(e){for(var t,n,r=-1,i=e.length,a=i+4,o=[],s=[];++r<4;)n=e[r%i],o.push(n[0]),s.push(n[1]);for(t=[za(Ll,o),",",za(Ll,s)],--r;++r<a;)n=e[r%i],o.shift(),o.push(n[0]),s.shift(),s.push(n[1]),Ra(t,o,s);return t.join("")}function Oa(e,t){var n=e.length-1;if(n)for(var r,i,a=e[0][0],o=e[0][1],s=e[n][0]-a,l=e[n][1]-o,u=-1;++u<=n;)r=e[u],i=u/n,r[0]=t*r[0]+(1-t)*(a+i*s),r[1]=t*r[1]+(1-t)*(o+i*l);return Pa(e)}function za(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Ra(e,t,n){e.push("C",za(Pl,t),",",za(Pl,n),",",za(Il,t),",",za(Il,n),",",za(Ll,t),",",za(Ll,n))}function Da(e,t){return(t[1]-e[1])/(t[0]-e[0])}function Na(e){for(var t=0,n=e.length-1,r=[],i=e[0],a=e[1],o=r[0]=Da(i,a);++t<n;)r[t]=(o+(o=Da(i=a,a=e[t+1])))/2;return r[t]=o,r}function Fa(e){for(var t,n,r,i,a=[],o=Na(e),s=-1,l=e.length-1;++s<l;)t=Da(e[s],e[s+1]),vo(t)<Ro?o[s]=o[s+1]=0:(n=o[s]/t,r=o[s+1]/t,(i=n*n+r*r)>9&&(i=3*t/Math.sqrt(i),o[s]=i*n,o[s+1]=i*r));for(s=-1;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+o[s]*o[s])),a.push([i||0,o[s]*i||0]);return a}function ja(e){return e.length<3?ba(e):e[0]+Sa(e,Fa(e))}function Ba(e){for(var t,n,r,i=-1,a=e.length;++i<a;)t=e[i],n=t[0],r=t[1]-Bo,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function Ua(e){function t(t){function l(){m.push("M",s(e(y),d),c,u(e(g.reverse()),d),"Z")}for(var f,h,p,m=[],g=[],y=[],v=-1,_=t.length,b=Ae(n),x=Ae(i),w=n===r?function(){return h}:Ae(r),k=i===a?function(){return p}:Ae(a);++v<_;)o.call(this,f=t[v],v)?(g.push([h=+b.call(this,f,v),p=+x.call(this,f,v)]),y.push([+w.call(this,f,v),+k.call(this,f,v)])):g.length&&(l(),g=[],y=[]);return g.length&&l(),m.length?m.join(""):null}var n=En,r=En,i=0,a=Pn,o=Et,s=ba,l=s.key,u=s,c="L",d=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=a=e,t):a},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(a=e,t):a},t.defined=function(e){return arguments.length?(o=e,t):o},t.interpolate=function(e){return arguments.length?(l="function"===typeof e?s=e:(s=El.get(e)||ba).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function Va(e){return e.radius}function Ha(e){return[e.x,e.y]}function Wa(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-Bo;return[n*Math.cos(r),n*Math.sin(r)]}}function qa(){return 64}function Ga(){return"circle"}function Ya(e){var t=Math.sqrt(e/No);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function Xa(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Za(e,t,n){return ko(e,jl),e.namespace=t,e.id=n,e}function Ja(e,t,n,r){var i=e.id,a=e.namespace;return H(e,"function"===typeof n?function(e,o,s){e[a][i].tween.set(t,r(n.call(e,e.__data__,o,s)))}:(n=r(n),function(e){e[a][i].tween.set(t,n)}))}function Ka(e){return null==e&&(e=""),function(){this.textContent=e}}function Qa(e){return null==e?"__transition__":"__transition_"+e+"__"}function $a(e,t,n,r,i){function a(e){var t=m.delay;if(c.t=t+l,t<=e)return o(e-t);c.c=o}function o(n){var i=p.active,a=p[i];a&&(a.timer.c=null,a.timer.t=NaN,--p.count,delete p[i],a.event&&a.event.interrupt.call(e,e.__data__,a.index));for(var o in p)if(+o<r){var u=p[o];u.timer.c=null,u.timer.t=NaN,--p.count,delete p[o]}c.c=s,Ie(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),p.active=r,m.event&&m.event.start.call(e,e.__data__,t),h=[],m.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&h.push(r)}),f=m.ease,d=m.duration}function s(i){for(var a=i/d,o=f(a),s=h.length;s>0;)h[--s].call(e,o);if(a>=1)return m.event&&m.event.end.call(e,e.__data__,t),--p.count?delete p[r]:delete e[n],1}var l,c,d,f,h,p=e[n]||(e[n]={active:0,count:0}),m=p[r];m||(l=i.time,c=Ie(a,0,l),m=p[r]={tween:new u,time:l,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++p.count)}function eo(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function to(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function no(e){return e.toISOString()}function ro(e,t,n){function r(t){return e(t)}function i(e,n){var r=e[1]-e[0],i=r/n,a=so.bisect(Xl,i);return a==Xl.length?[t.year,Qi(e.map(function(e){return e/31536e6}),n)[2]]:a?t[i/Xl[a-1]<Xl[a]/i?a-1:a]:[Kl,Qi(e,n)[2]]}return r.invert=function(t){return io(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(io)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,io(+n+1),t).length}var a=r.domain(),o=Hi(a),s=null==e?i(o,10):"number"===typeof e&&i(o,e);return s&&(e=s[0],t=s[1]),r.domain(Gi(a,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=io(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=io(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Hi(r.domain()),a=null==e?i(n,10):"number"===typeof e?i(n,e):!e.range&&[{range:e},t];return a&&(e=a[0],t=a[1]),e.range(n[0],io(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ro(e.copy(),t,n)},Ji(r,e)}function io(e){return new Date(e)}function ao(e){return JSON.parse(e.responseText)}function oo(e){var t=co.createRange();return t.selectNode(co.body),t.createContextualFragment(e.responseText)}var so={version:"3.5.17"},lo=[].slice,uo=function(e){return lo.call(e)},co=this.document;if(co)try{uo(co.documentElement.childNodes)[0].nodeType}catch(e){uo=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),co)try{co.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var fo=this.Element.prototype,ho=fo.setAttribute,po=fo.setAttributeNS,mo=this.CSSStyleDeclaration.prototype,go=mo.setProperty;fo.setAttribute=function(e,t){ho.call(this,e,t+"")},fo.setAttributeNS=function(e,t,n){po.call(this,e,t,n+"")},mo.setProperty=function(e,t,n){go.call(this,e,t+"",n)}}so.ascending=n,so.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},so.min=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},so.max=function(e,t){var n,r,i=-1,a=e.length;if(1===arguments.length){for(;++i<a;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<a;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<a;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<a;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},so.extent=function(e,t){var n,r,i,a=-1,o=e.length;if(1===arguments.length){for(;++a<o;)if(null!=(r=e[a])&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=e[a])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++a<o;)if(null!=(r=t.call(e,e[a],a))&&r>=r){n=i=r;break}for(;++a<o;)null!=(r=t.call(e,e[a],a))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},so.sum=function(e,t){var n,r=0,a=e.length,o=-1;if(1===arguments.length)for(;++o<a;)i(n=+e[o])&&(r+=n);else for(;++o<a;)i(n=+t.call(e,e[o],o))&&(r+=n);return r},so.mean=function(e,t){var n,a=0,o=e.length,s=-1,l=o;if(1===arguments.length)for(;++s<o;)i(n=r(e[s]))?a+=n:--l;else for(;++s<o;)i(n=r(t.call(e,e[s],s)))?a+=n:--l;if(l)return a/l},so.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],a=n-r;return a?i+a*(e[r]-i):i},so.median=function(e,t){var a,o=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)i(a=r(e[l]))&&o.push(a);else for(;++l<s;)i(a=r(t.call(e,e[l],l)))&&o.push(a);if(o.length)return so.quantile(o.sort(n),.5)},so.variance=function(e,t){var n,a,o=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<o;)i(n=r(e[u]))&&(a=n-s,s+=a/++c,l+=a*(n-s));else for(;++u<o;)i(n=r(t.call(e,e[u],u)))&&(a=n-s,s+=a/++c,l+=a*(n-s));if(c>1)return l/(c-1)},so.deviation=function(){var e=so.variance.apply(this,arguments);return e?Math.sqrt(e):e};var yo=a(n);so.bisectLeft=yo.left,so.bisect=so.bisectRight=yo.right,so.bisector=function(e){return a(1===e.length?function(t,r){return n(e(t),r)}:e)},so.shuffle=function(e,t,n){(a=arguments.length)<3&&(n=e.length,a<2&&(t=0));for(var r,i,a=n-t;a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},so.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},so.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},so.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=so.min(e,o),r=new Array(n);++t<n;)for(var i,a=-1,s=r[t]=new Array(i);++a<i;)s[a]=e[a][t];return r},so.zip=function(){return so.transpose(arguments)},so.keys=function(e){var t=[];for(var n in e)t.push(n);return t},so.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},so.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},so.merge=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n};var vo=Math.abs;so.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n===1/0)throw new Error("infinite range");var r,i=[],a=s(vo(n)),o=-1;if(e*=a,t*=a,n*=a,n<0)for(;(r=e+n*++o)>t;)i.push(r/a);else for(;(r=e+n*++o)<t;)i.push(r/a);return i},so.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,a=e.length;if(1===arguments.length)for(;++i<a;)n.set(i,e[i]);else for(;++i<a;)n.set(t.call(e,r=e[i],i),r)}else for(var o in e)n.set(o,e[o]);return n};var _o="__proto__",bo="\0";l(u,{has:f,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:h,keys:p,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:d(t),value:this._[t]});return e},size:m,empty:g,forEach:function(e){for(var t in this._)e.call(this,d(t),this._[t])}}),so.nest=function(){function e(t,o,s){if(s>=a.length)return r?r.call(i,o):n?o.sort(n):o;for(var l,c,d,f,h=-1,p=o.length,m=a[s++],g=new u;++h<p;)(f=g.get(l=m(c=o[h])))?f.push(c):g.set(l,[c]);return t?(c=t(),d=function(n,r){c.set(n,e(t,r,s))}):(c={},d=function(n,r){c[n]=e(t,r,s)}),g.forEach(d),c}function t(e,n){if(n>=a.length)return e;var r=[],i=o[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},a=[],o=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(so.map,n,0),0)},i.key=function(e){return a.push(e),i},i.sortKeys=function(e){return o[a.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},so.set=function(e){var t=new y;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},l(y,{has:f,add:function(e){return this._[c(e+="")]=!0,e},remove:h,values:p,size:m,empty:g,forEach:function(e){for(var t in this._)e.call(this,d(t))}}),so.behavior={},so.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=_(e,t,t[n]);return e};var xo=["webkit","ms","moz","Moz","o","O"];so.dispatch=function(){for(var e=new w,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=k(e);return e},w.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},so.event=null,so.requote=function(e){return e.replace(wo,"\\$&")};var wo=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,ko={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},To=function(e,t){return t.querySelector(e)},Mo=function(e,t){return t.querySelectorAll(e)},Ao=function(e,t){var n=e.matches||e[b(e,"matchesSelector")];return(Ao=function(e,t){return n.call(e,t)})(e,t)};"function"===typeof Sizzle&&(To=function(e,t){return Sizzle(e,t)[0]||null},Mo=Sizzle,Ao=Sizzle.matchesSelector),so.selection=function(){return so.select(co.documentElement)};var Co=so.selection.prototype=[];Co.select=function(e){var t,n,r,i,a=[];e=S(e);for(var o=-1,s=this.length;++o<s;){a.push(t=[]),t.parentNode=(r=this[o]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,o)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return C(a)},Co.selectAll=function(e){var t,n,r=[];e=E(e);for(var i=-1,a=this.length;++i<a;)for(var o=this[i],s=-1,l=o.length;++s<l;)(n=o[s])&&(r.push(t=uo(e.call(n,n.__data__,s,i))),t.parentNode=n);return C(r)};var So="http://www.w3.org/1999/xhtml",Eo={svg:"http://www.w3.org/2000/svg",xhtml:So,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};so.ns={prefix:Eo,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Eo.hasOwnProperty(n)?{space:Eo[n],local:e}:e}},Co.attr=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node();return e=so.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},Co.classed=function(e,t){if(arguments.length<2){if("string"===typeof e){var n=this.node(),r=(e=O(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!L(e[i]).test(t))return!1;return!0}for(t in e)this.each(z(t,e[t]));return this}return this.each(z(e,t))},Co.style=function(e,n,r){var i=arguments.length;if(i<3){if("string"!==typeof e){i<2&&(n="");for(r in e)this.each(D(r,e[r],n));return this}if(i<2){var a=this.node();return t(a).getComputedStyle(a,null).getPropertyValue(e)}r=""}return this.each(D(e,n,r))},Co.property=function(e,t){if(arguments.length<2){if("string"===typeof e)return this.node()[e];for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},Co.text=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},Co.html=function(e){return arguments.length?this.each("function"===typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},Co.append=function(e){return e=F(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},Co.insert=function(e,t){return e=F(e),t=S(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},Co.remove=function(){return this.each(j)},Co.data=function(e,t){function n(e,n){var r,i,a,o=e.length,d=n.length,f=Math.min(o,d),h=new Array(d),p=new Array(d),m=new Array(o);if(t){var g,y=new u,v=new Array(o);for(r=-1;++r<o;)(i=e[r])&&(y.has(g=t.call(i,i.__data__,r))?m[r]=i:y.set(g,i),v[r]=g);for(r=-1;++r<d;)(i=y.get(g=t.call(n,a=n[r],r)))?!0!==i&&(h[r]=i,i.__data__=a):p[r]=B(a),y.set(g,!0);for(r=-1;++r<o;)r in v&&!0!==y.get(v[r])&&(m[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],a=n[r],i?(i.__data__=a,h[r]=i):p[r]=B(a);for(;r<d;++r)p[r]=B(n[r]);for(;r<o;++r)m[r]=e[r]}p.update=h,p.parentNode=h.parentNode=m.parentNode=e.parentNode,s.push(p),l.push(h),c.push(m)}var r,i,a=-1,o=this.length;if(!arguments.length){for(e=new Array(o=(r=this[0]).length);++a<o;)(i=r[a])&&(e[a]=i.__data__);return e}var s=W([]),l=C([]),c=C([]);if("function"===typeof e)for(;++a<o;)n(r=this[a],e.call(r,r.parentNode.__data__,a));else for(;++a<o;)n(r=this[a],e);return l.enter=function(){return s},l.exit=function(){return c},l},Co.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},Co.filter=function(e){var t,n,r,i=[];"function"!==typeof e&&(e=U(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]),t.parentNode=(n=this[a]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return C(i)},Co.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,a=r[i];--i>=0;)(n=r[i])&&(a&&a!==n.nextSibling&&a.parentNode.insertBefore(n,a),a=n);return this},Co.sort=function(e){e=V.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},Co.each=function(e){return H(this,function(t,n,r){e.call(t,t.__data__,n,r)})},Co.call=function(e){var t=uo(arguments);return e.apply(t[0]=this,t),this},Co.empty=function(){return!this.node()},Co.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var a=n[r];if(a)return a}return null},Co.size=function(){var e=0;return H(this,function(){++e}),e};var Po=[];so.selection.enter=W,so.selection.enter.prototype=Po,Po.append=Co.append,Po.empty=Co.empty,Po.node=Co.node,Po.call=Co.call,Po.size=Co.size,Po.select=function(e){for(var t,n,r,i,a,o=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,o.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(a=i[u])?(t.push(r[u]=n=e.call(i.parentNode,a.__data__,u,s)),n.__data__=a.__data__):t.push(null)}return C(o)},Po.insert=function(e,t){return arguments.length<2&&(t=q(this)),Co.insert.call(this,e,t)},so.select=function(t){var n;return"string"===typeof t?(n=[To(t,co)],n.parentNode=co.documentElement):(n=[t],n.parentNode=e(t)),C([n])},so.selectAll=function(e){var t;return"string"===typeof e?(t=uo(Mo(e,co)),t.parentNode=co.documentElement):(t=uo(e),t.parentNode=null),C([t])},Co.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!==typeof e){r<2&&(t=!1);for(n in e)this.each(G(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(G(e,t,n))};var Io=so.map({mouseenter:"mouseover",mouseleave:"mouseout"});co&&Io.forEach(function(e){"on"+e in co&&Io.remove(e)});var Lo,Oo=0;so.mouse=function(e){return J(e,M())};var zo=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;so.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=M().changedTouches),t)for(var r,i=0,a=t.length;i<a;++i)if((r=t[i]).identifier===n)return J(e,r)},so.behavior.drag=function(){function e(){this.on("mousedown.drag",a).on("touchstart.drag",o)}function n(e,t,n,a,o){return function(){function s(){var e,n,r=t(f,m);r&&(e=r[0]-_[0],n=r[1]-_[1],p|=e|n,_=r,h({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(f,m)&&(y.on(a+g,null).on(o+g,null),v(p),h({type:"dragend"}))}var u,c=this,d=so.event.target.correspondingElement||so.event.target,f=c.parentNode,h=r.of(c,arguments),p=0,m=e(),g=".drag"+(null==m?"":"-"+m),y=so.select(n(d)).on(a+g,s).on(o+g,l),v=Z(d),_=t(f,m);i?(u=i.apply(c,arguments),u=[u.x-_[0],u.y-_[1]]):u=[0,0],h({type:"dragstart"})}}var r=A(e,"drag","dragstart","dragend"),i=null,a=n(x,so.mouse,t,"mousemove","mouseup"),o=n(K,so.touch,v,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},so.rebind(e,r,"on")},so.touches=function(e,t){return arguments.length<2&&(t=M().touches),t?uo(t).map(function(t){var n=J(e,t);return n.identifier=t.identifier,n}):[]};var Ro=1e-6,Do=Ro*Ro,No=Math.PI,Fo=2*No,jo=Fo-Ro,Bo=No/2,Uo=No/180,Vo=180/No,Ho=Math.SQRT2;so.interpolateZoom=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-i,d=l-a,f=c*c+d*d;if(f<Do)r=Math.log(u/o)/Ho,n=function(e){return[i+e*c,a+e*d,o*Math.exp(Ho*e*r)]};else{var h=Math.sqrt(f),p=(u*u-o*o+4*f)/(2*o*2*h),m=(u*u-o*o-4*f)/(2*u*2*h),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(m*m+1)-m);r=(y-g)/Ho,n=function(e){var t=e*r,n=re(g),s=o/(2*h)*(n*ie(Ho*t+g)-ne(g));return[i+s*c,a+s*d,o*n/re(Ho*t+g)]}}return n.duration=1e3*r,n},so.behavior.zoom=function(){function e(e){e.on(I,d).on(qo+".zoom",h).on("dblclick.zoom",p).on(z,f)}function n(e){return[(e[0]-M.x)/M.k,(e[1]-M.y)/M.k]}function r(e){return[e[0]*M.k+M.x,e[1]*M.k+M.y]}function i(e){M.k=Math.max(S[0],Math.min(S[1],e))}function a(e,t){t=r(t),M.x+=e[0]-t[0],M.y+=e[1]-t[1]}function o(t,n,r,o){t.__chart__={x:M.x,y:M.y,k:M.k},i(Math.pow(2,o)),a(g=n,r),t=so.select(t),E>0&&(t=t.transition().duration(E)),t.call(e.event)}function s(){x&&x.domain(b.range().map(function(e){return(e-M.x)/M.k}).map(b.invert)),k&&k.domain(w.range().map(function(e){return(e-M.y)/M.k}).map(w.invert))}function l(e){P++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:M.k,translate:[M.x,M.y]})}function c(e){--P||(e({type:"zoomend"}),g=null)}function d(){function e(){s=1,a(so.mouse(i),f),u(o)}function r(){d.on(L,null).on(O,null),h(s),c(o)}var i=this,o=R.of(i,arguments),s=0,d=so.select(t(i)).on(L,e).on(O,r),f=n(so.mouse(i)),h=Z(i);Fl.call(i),l(o)}function f(){function e(){var e=so.touches(p);return h=M.k,e.forEach(function(e){e.identifier in g&&(g[e.identifier]=n(e))}),e}function t(){var t=so.event.target;so.select(t).on(b,r).on(x,s),w.push(t);for(var n=so.event.changedTouches,i=0,a=n.length;i<a;++i)g[n[i].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(u-_<500){var c=l[0];o(p,c,g[c.identifier],Math.floor(Math.log(M.k)/Math.LN2)+1),T()}_=u}else if(l.length>1){var c=l[0],d=l[1],f=c[0]-d[0],h=c[1]-d[1];y=f*f+h*h}}function r(){var e,t,n,r,o=so.touches(p);Fl.call(p);for(var s=0,l=o.length;s<l;++s,r=null)if(n=o[s],r=g[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,d=y&&Math.sqrt(c/y);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(d*h)}_=null,a(e,t),u(m)}function s(){if(so.event.touches.length){for(var t=so.event.changedTouches,n=0,r=t.length;n<r;++n)delete g[t[n].identifier];for(var i in g)return void e()}so.selectAll(w).on(v,null),k.on(I,d).on(z,f),A(),c(m)}var h,p=this,m=R.of(p,arguments),g={},y=0,v=".zoom-"+so.event.changedTouches[0].identifier,b="touchmove"+v,x="touchend"+v,w=[],k=so.select(p),A=Z(p);t(),l(m),k.on(I,null).on(z,t)}function h(){var e=R.of(this,arguments);v?clearTimeout(v):(Fl.call(this),m=n(g=y||so.mouse(this)),l(e)),v=setTimeout(function(){v=null,c(e)},50),T(),i(Math.pow(2,.002*Wo())*M.k),a(g,m),u(e)}function p(){var e=so.mouse(this),t=Math.log(M.k)/Math.LN2;o(this,e,n(e),so.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var m,g,y,v,_,b,x,w,k,M={x:0,y:0,k:1},C=[960,500],S=Go,E=250,P=0,I="mousedown.zoom",L="mousemove.zoom",O="mouseup.zoom",z="touchstart.zoom",R=A(e,"zoomstart","zoom","zoomend");return qo||(qo="onwheel"in co?(Wo=function(){return-so.event.deltaY*(so.event.deltaMode?120:1)},"wheel"):"onmousewheel"in co?(Wo=function(){return so.event.wheelDelta},"mousewheel"):(Wo=function(){return-so.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=R.of(this,arguments),t=M;Dl?so.select(this).transition().each("start.zoom",function(){M=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=C[0],r=C[1],i=g?g[0]:n/2,a=g?g[1]:r/2,o=so.interpolateZoom([(i-M.x)/M.k,(a-M.y)/M.k,n/M.k],[(i-t.x)/t.k,(a-t.y)/t.k,n/t.k]);return function(t){var r=o(t),s=n/r[2];this.__chart__=M={x:i-r[0]*s,y:a-r[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=M,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(M={x:+t[0],y:+t[1],k:M.k},s(),e):[M.x,M.y]},e.scale=function(t){return arguments.length?(M={x:M.x,y:M.y,k:null},i(+t),s(),e):M.k},e.scaleExtent=function(t){return arguments.length?(S=null==t?Go:[+t[0],+t[1]],e):S},e.center=function(t){return arguments.length?(y=t&&[+t[0],+t[1]],e):y},e.size=function(t){return arguments.length?(C=t&&[+t[0],+t[1]],e):C},e.duration=function(t){return arguments.length?(E=+t,e):E},e.x=function(t){return arguments.length?(x=t,b=t.copy(),M={x:0,y:0,k:1},e):x},e.y=function(t){return arguments.length?(k=t,w=t.copy(),M={x:0,y:0,k:1},e):k},so.rebind(e,R,"on")};var Wo,qo,Go=[0,1/0];so.color=oe,oe.prototype.toString=function(){return this.rgb()+""},so.hsl=se;var Yo=se.prototype=new oe;Yo.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Yo.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Yo.rgb=function(){return le(this.h,this.s,this.l)},so.hcl=ue;var Xo=ue.prototype=new oe;Xo.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+Zo*(arguments.length?e:1)))},Xo.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-Zo*(arguments.length?e:1)))},Xo.rgb=function(){return ce(this.h,this.c,this.l).rgb()},so.lab=de;var Zo=18,Jo=.95047,Ko=1,Qo=1.08883,$o=de.prototype=new oe;$o.brighter=function(e){return new de(Math.min(100,this.l+Zo*(arguments.length?e:1)),this.a,this.b)},$o.darker=function(e){return new de(Math.max(0,this.l-Zo*(arguments.length?e:1)),this.a,this.b)},$o.rgb=function(){return fe(this.l,this.a,this.b)},so.rgb=ye;var es=ye.prototype=new oe;es.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ye(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ye(i,i,i)},es.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ye(e*this.r,e*this.g,e*this.b)},es.hsl=function(){return we(this.r,this.g,this.b)},es.toString=function(){return"#"+be(this.r)+be(this.g)+be(this.b)};var ts=so.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});ts.forEach(function(e,t){ts.set(e,ve(t))}),so.functor=Ae,so.xhr=Ce(v),so.dsv=function(e,t){function n(e,n,a){arguments.length<3&&(a=n,n=null);var o=Se(e,t,null==n?r:i(n),a);return o.row=function(e){return arguments.length?o.response(null==(n=e)?r:i(e)):n},o}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function a(t){return t.map(o).join(e)}function o(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=u)return o;if(i)return i=!1,a;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}c=n+2;var r=e.charCodeAt(n+1);return 13===r?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<u;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,a={},o={},s=[],u=e.length,c=0,d=0;(r=n())!==o;){for(var f=[];r!==a&&r!==o;)f.push(r),r=n();t&&null==(f=t(f,d++))||s.push(f)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new y,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(o).join(e)].concat(t.map(function(t){return i.map(function(e){return o(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(a).join("\n")},n},so.csv=so.dsv(",","text/csv"),so.tsv=so.dsv("\t","text/tab-separated-values");var ns,rs,is,as,os=this[b(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};so.timer=function(){Ie.apply(this,arguments)},so.timer.flush=function(){Oe(),ze()},so.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var ss=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"].map(De);so.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=so.round(e,Re(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),ss[8+n/3]};var ls=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,us=so.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=so.round(e,Re(e,t))).toFixed(Math.max(0,Math.min(20,Re(e*(1+1e-15),t))))}}),cs=so.time={},ds=Date;je.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){fs.setUTCDate.apply(this._,arguments)},setDay:function(){fs.setUTCDay.apply(this._,arguments)},setFullYear:function(){fs.setUTCFullYear.apply(this._,arguments)},setHours:function(){fs.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){fs.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){fs.setUTCMinutes.apply(this._,arguments)},setMonth:function(){fs.setUTCMonth.apply(this._,arguments)},setSeconds:function(){fs.setUTCSeconds.apply(this._,arguments)},setTime:function(){fs.setTime.apply(this._,arguments)}};var fs=Date.prototype;cs.year=Be(function(e){return e=cs.day(e),e.setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),cs.years=cs.year.range,cs.years.utc=cs.year.utc.range,cs.day=Be(function(e){var t=new ds(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),cs.days=cs.day.range,cs.days.utc=cs.day.utc.range,cs.dayOfYear=function(e){var t=cs.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=cs[e]=Be(function(e){return(e=cs.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=cs.year(e).getDay();return Math.floor((cs.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});cs[e+"s"]=n.range,cs[e+"s"].utc=n.utc.range,cs[e+"OfYear"]=function(e){var n=cs.year(e).getDay();return Math.floor((cs.dayOfYear(e)+(n+t)%7)/7)}}),cs.week=cs.sunday,cs.weeks=cs.sunday.range,cs.weeks.utc=cs.sunday.utc.range,cs.weekOfYear=cs.sundayOfYear;var hs={"-":"",_:" ",0:"0"},ps=/^\s*\d+/,ms=/^%/;so.locale=function(e){return{numberFormat:Ne(e),timeFormat:Ve(e)}};var gs=so.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});so.format=gs.numberFormat,so.geo={},ut.prototype={s:0,t:0,add:function(e){ct(e,this.t,ys),ct(ys.s,this.s,this),this.s?this.t+=ys.t:this.s=ys.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ys=new ut;so.geo.stream=function(e,t){e&&vs.hasOwnProperty(e.type)?vs[e.type](e,t):dt(e,t)};var vs={Feature:function(e,t){dt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)dt(n[r].geometry,t)}},_s={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ft(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ft(n[r],t,0)},Polygon:function(e,t){ht(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ht(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)dt(n[r],t)}};so.geo.area=function(e){return bs=0,so.geo.stream(e,ws),bs};var bs,xs=new ut,ws={sphere:function(){bs+=4*No},point:x,lineStart:x,lineEnd:x,polygonStart:function(){xs.reset(),ws.lineStart=pt},polygonEnd:function(){var e=2*xs;bs+=e<0?4*No+e:e,ws.lineStart=ws.lineEnd=ws.point=x}};so.geo.bounds=function(){function e(e,t){_.push(b=[c=e,f=e]),t<d&&(d=t),t>h&&(h=t)}function t(t,n){var r=mt([t*Uo,n*Uo]);if(y){var i=yt(y,r),a=[i[1],-i[0],0],o=yt(a,i);bt(o),o=xt(o);var l=t-p,u=l>0?1:-1,m=o[0]*Vo*u,g=vo(l)>180;if(g^(u*p<m&&m<u*t)){var v=o[1]*Vo;v>h&&(h=v)}else if(m=(m+360)%360-180,g^(u*p<m&&m<u*t)){var v=-o[1]*Vo;v<d&&(d=v)}else n<d&&(d=n),n>h&&(h=n);g?t<p?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t):f>=c?(t<c&&(c=t),t>f&&(f=t)):t>p?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t)}else e(t,n);y=r,p=t}function n(){x.point=t}function r(){b[0]=c,b[1]=f,x.point=e,y=null}function i(e,n){if(y){var r=e-p;v+=vo(r)>180?r+(r>0?360:-360):r}else m=e,g=n;ws.point(e,n),t(e,n)}function a(){ws.lineStart()}function o(){i(m,g),ws.lineEnd(),vo(v)>Ro&&(c=-(f=180)),b[0]=c,b[1]=f,y=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,d,f,h,p,m,g,y,v,_,b,x={point:e,lineStart:n,lineEnd:r,polygonStart:function(){x.point=i,x.lineStart=a,x.lineEnd=o,v=0,ws.polygonStart()},polygonEnd:function(){ws.polygonEnd(),x.point=e,x.lineStart=n,x.lineEnd=r,xs<0?(c=-(f=180),d=-(h=90)):v>Ro?h=90:v<-Ro&&(d=-90),b[0]=c,b[1]=f}};return function(e){h=f=-(c=d=1/0),_=[],so.geo.stream(e,x);var t=_.length;if(t){_.sort(l);for(var n,r=1,i=_[0],a=[i];r<t;++r)n=_[r],u(n[0],i)||u(n[1],i)?(s(i[0],n[1])>s(i[0],i[1])&&(i[1]=n[1]),s(n[0],i[1])>s(i[0],i[1])&&(i[0]=n[0])):a.push(i=n);for(var o,n,p=-1/0,t=a.length-1,r=0,i=a[t];r<=t;i=n,++r)n=a[r],(o=s(i[1],n[0]))>p&&(p=o,c=n[0],f=i[1])}return _=b=null,c===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,d],[f,h]]}}(),so.geo.centroid=function(e){ks=Ts=Ms=As=Cs=Ss=Es=Ps=Is=Ls=Os=0,so.geo.stream(e,zs);var t=Is,n=Ls,r=Os,i=t*t+n*n+r*r;return i<Do&&(t=Ss,n=Es,r=Ps,Ts<Ro&&(t=Ms,n=As,r=Cs),(i=t*t+n*n+r*r)<Do)?[NaN,NaN]:[Math.atan2(n,t)*Vo,te(r/Math.sqrt(i))*Vo]};var ks,Ts,Ms,As,Cs,Ss,Es,Ps,Is,Ls,Os,zs={sphere:x,point:kt,lineStart:Mt,lineEnd:At,polygonStart:function(){zs.lineStart=Ct},polygonEnd:function(){zs.lineStart=Mt}},Rs=Ot(Et,Nt,jt,[-No,-No/2]),Ds=1e9;so.geo.clipExtent=function(){var e,t,n,r,i,a,o={stream:function(e){return i&&(i.valid=!1),i=a(e),i.valid=!0,i},extent:function(s){return arguments.length?(a=Ht(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),o):[[e,t],[n,r]]}};return o.extent([[0,0],[960,500]])},(so.geo.conicEqualArea=function(){return Wt(qt)}).raw=qt,so.geo.albers=function(){return so.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},so.geo.albersUsa=function(){function e(e){var a=e[0],o=e[1];return t=null,n(a,o),t||(r(a,o),t)||i(a,o),t}var t,n,r,i,a=so.geo.albers(),o=so.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=so.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?o:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:a).invert(e)},e.stream=function(e){var t=a.stream(e),n=o.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(a.precision(t),o.precision(t),s.precision(t),e):a.precision()},e.scale=function(t){return arguments.length?(a.scale(t),o.scale(.35*t),s.scale(t),e.translate(a.translate())):a.scale()},e.translate=function(t){if(!arguments.length)return a.translate();var u=a.scale(),c=+t[0],d=+t[1];return n=a.translate(t).clipExtent([[c-.455*u,d-.238*u],[c+.455*u,d+.238*u]]).stream(l).point,r=o.translate([c-.307*u,d+.201*u]).clipExtent([[c-.425*u+Ro,d+.12*u+Ro],[c-.214*u-Ro,d+.234*u-Ro]]).stream(l).point,i=s.translate([c-.205*u,d+.212*u]).clipExtent([[c-.214*u+Ro,d+.166*u+Ro],[c-.115*u-Ro,d+.234*u-Ro]]).stream(l).point,e},e.scale(1070)};var Ns,Fs,js,Bs,Us,Vs,Hs={point:x,lineStart:x,lineEnd:x,polygonStart:function(){Fs=0,Hs.lineStart=Gt},polygonEnd:function(){Hs.lineStart=Hs.lineEnd=Hs.point=x,Ns+=vo(Fs/2)}},Ws={point:Yt,lineStart:x,lineEnd:x,polygonStart:x,polygonEnd:x},qs={point:Jt,lineStart:Kt,lineEnd:Qt,polygonStart:function(){qs.lineStart=$t},polygonEnd:function(){qs.point=Jt,qs.lineStart=Kt,qs.lineEnd=Qt}};so.geo.path=function(){function e(e){return e&&("function"===typeof s&&a.pointRadius(+s.apply(this,arguments)),o&&o.valid||(o=i(a)),so.geo.stream(e,o)),a.result()}function t(){return o=null,e}var n,r,i,a,o,s=4.5;return e.area=function(e){return Ns=0,so.geo.stream(e,i(Hs)),Ns},e.centroid=function(e){return Ms=As=Cs=Ss=Es=Ps=Is=Ls=Os=0,so.geo.stream(e,i(qs)),Os?[Is/Os,Ls/Os]:Ps?[Ss/Ps,Es/Ps]:Cs?[Ms/Cs,As/Cs]:[NaN,NaN]},e.bounds=function(e){return Us=Vs=-(js=Bs=1/0),so.geo.stream(e,i(Ws)),[[js,Bs],[Us,Vs]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nn(e):v,t()):n},e.context=function(e){return arguments.length?(a=null==(r=e)?new Xt:new en(e),"function"!==typeof s&&a.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"===typeof t?t:(a.pointRadius(+t),+t),e):s},e.projection(so.geo.albersUsa()).context(null)},so.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var r in e)n[r]=e[r];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},so.geo.projection=on,so.geo.projectionMutator=sn,(so.geo.equirectangular=function(){return on(un)}).raw=un.invert=un,so.geo.rotation=function(e){function t(t){return t=e(t[0]*Uo,t[1]*Uo),t[0]*=Vo,t[1]*=Vo,t}return e=dn(e[0]%360*Uo,e[1]*Uo,e.length>2?e[2]*Uo:0),t.invert=function(t){return t=e.invert(t[0]*Uo,t[1]*Uo),t[0]*=Vo,t[1]*=Vo,t},t},cn.invert=un,so.geo.circle=function(){function e(){var e="function"===typeof r?r.apply(this,arguments):r,t=dn(-e[0]*Uo,-e[1]*Uo,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=Vo,e[1]*=Vo}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=mn((t=+r)*Uo,i*Uo),e):t},e.precision=function(r){return arguments.length?(n=mn(t*Uo,(i=+r)*Uo),e):i},e.angle(90)},so.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Uo,i=e[1]*Uo,a=t[1]*Uo,o=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(a),d=Math.cos(a);return Math.atan2(Math.sqrt((n=d*o)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},so.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return so.range(Math.ceil(a/g)*g,i,g).map(f).concat(so.range(Math.ceil(u/y)*y,l,y).map(h)).concat(so.range(Math.ceil(r/p)*p,n,p).filter(function(e){return vo(e%g)>Ro}).map(c)).concat(so.range(Math.ceil(s/m)*m,o,m).filter(function(e){return vo(e%y)>Ro}).map(d))}var n,r,i,a,o,s,l,u,c,d,f,h,p=10,m=p,g=90,y=360,v=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(a).concat(h(l).slice(1),f(i).reverse().slice(1),h(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(a=+t[0][0],i=+t[1][0],u=+t[0][1],l=+t[1][1],a>i&&(t=a,a=i,i=t),u>l&&(t=u,u=l,l=t),e.precision(v)):[[a,u],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],o=+t[1][1],r>n&&(t=r,r=n,n=t),s>o&&(t=s,s=o,o=t),e.precision(v)):[[r,s],[n,o]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(g=+t[0],y=+t[1],e):[g,y]},e.minorStep=function(t){return arguments.length?(p=+t[0],m=+t[1],e):[p,m]},e.precision=function(t){return arguments.length?(v=+t,c=yn(s,o,90),d=vn(r,n,v),f=yn(u,l,90),h=vn(a,i,v),e):v},e.majorExtent([[-180,-90+Ro],[180,90-Ro]]).minorExtent([[-180,-80-Ro],[180,80+Ro]])},so.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=_n,i=bn;return e.distance=function(){return so.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"===typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"===typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},so.geo.interpolate=function(e,t){return xn(e[0]*Uo,e[1]*Uo,t[0]*Uo,t[1]*Uo)},so.geo.length=function(e){return Gs=0,so.geo.stream(e,Ys),Gs};var Gs,Ys={sphere:x,point:x,lineStart:wn,lineEnd:x,polygonStart:x,polygonEnd:x},Xs=kn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(so.geo.azimuthalEqualArea=function(){return on(Xs)}).raw=Xs;var Zs=kn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},v);(so.geo.azimuthalEquidistant=function(){return on(Zs)}).raw=Zs,(so.geo.conicConformal=function(){return Wt(Tn)}).raw=Tn,(so.geo.conicEquidistant=function(){return Wt(Mn)}).raw=Mn;var Js=kn(function(e){return 1/e},Math.atan);(so.geo.gnomonic=function(){return on(Js)}).raw=Js,An.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-Bo]},(so.geo.mercator=function(){return Cn(An)}).raw=An;var Ks=kn(function(){return 1},Math.asin);(so.geo.orthographic=function(){return on(Ks)}).raw=Ks;var Qs=kn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(so.geo.stereographic=function(){return on(Qs)}).raw=Qs,Sn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-Bo]},(so.geo.transverseMercator=function(){var e=Cn(Sn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Sn,so.geom={},so.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=Ae(n),a=Ae(r),o=e.length,s=[],l=[];for(t=0;t<o;t++)s.push([+i.call(this,e[t],t),+a.call(this,e[t],t),t]);for(s.sort(Ln),t=0;t<o;t++)l.push([s[t][0],-s[t][1]]);var u=In(s),c=In(l),d=c[0]===u[0],f=c[c.length-1]===u[u.length-1],h=[];for(t=u.length-1;t>=0;--t)h.push(e[s[u[t]][2]]);for(t=+d;t<c.length-f;++t)h.push(e[s[c[t]][2]]);return h}var n=En,r=Pn;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},so.geom.polygon=function(e){return ko(e,$s),e};var $s=so.geom.polygon.prototype=[];$s.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},$s.centroid=function(e){var t,n,r=-1,i=this.length,a=0,o=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],a+=(t[0]+s[0])*n,o+=(t[1]+s[1])*n;return[a*e,o*e]},$s.clip=function(e){for(var t,n,r,i,a,o,s=Rn(e),l=-1,u=this.length-Rn(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],a=t[(r=t.length-s)-1],n=-1;++n<r;)o=t[n],On(o,c,i)?(On(a,c,i)||e.push(zn(a,o,c,i)),e.push(o)):On(a,c,i)&&e.push(zn(a,o,c,i)),a=o;s&&e.push(e[0]),c=i}return e};var el,tl,nl,rl,il,al=[],ol=[];Hn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)e=t[n].edge,e.b&&e.a||t.splice(n,1);return t.sort(qn),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=or(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ir(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ar(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(ar(this,n),e=n,n=e.U),n.C=!1,r.C=!0,ir(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,a=e.L,o=e.R;if(n=a?o?or(o):a:o,i?i.L===e?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=e.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=o,o.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r){if(e&&e.C)return void(e.C=!1);do{if(e===this._)break;if(e===i.L){if(t=i.R,t.C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,ar(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),e=this._;break}}else if(t=i.L,t.C&&(t.C=!1,i.C=!0,ar(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,ar(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},so.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],a=s[1][0],o=s[1][1];return sr(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site;(t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=a&&u.y>=i&&u.y<=o?[[r,o],[a,o],[a,i],[r,i]]:[]).point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(a(e,t)/Ro)*Ro,y:Math.round(o(e,t)/Ro)*Ro,i:t}})}var r=En,i=Pn,a=r,o=i,s=sl;return e?t(e):(t.links=function(e){return sr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return sr(n(e)).cells.forEach(function(n,r){for(var i,a=n.site,o=n.edges.sort(qn),s=-1,l=o.length,u=o[l-1].edge,c=u.l===a?u.r:u.l;++s<l;)u,i=c,u=o[s].edge,c=u.l===a?u.r:u.l,r<i.i&&r<c.i&&ur(a,i,c)<0&&t.push([e[r],e[i.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(a=Ae(r=e),t):r},t.y=function(e){return arguments.length?(o=Ae(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?sl:e,t):s===sl?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===sl?null:s&&s[1]},t)};var sl=[[-1e6,-1e6],[1e6,1e6]];so.geom.delaunay=function(e){return so.geom.voronoi().triangles(e)},so.geom.quadtree=function(e,t,n,r,i){function a(e){function a(e,t,n,r,i,a,o,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(vo(l-n)+vo(c-r)<.01)u(e,t,n,r,i,a,o,s);else{var d=e.point;e.x=e.y=e.point=null,u(e,d,l,c,i,a,o,s),u(e,t,n,r,i,a,o,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,i,a,o,s)}function u(e,t,n,r,i,o,s,l){var u=.5*(i+s),c=.5*(o+l),d=n>=u,f=r>=c,h=f<<1|d;e.leaf=!1,e=e.nodes[h]||(e.nodes[h]=fr()),d?i=u:s=u,f?o=c:l=c,a(e,t,n,r,i,o,s,l)}var c,d,f,h,p,m,g,y,v,_=Ae(s),b=Ae(l);if(null!=t)m=t,g=n,y=r,v=i;else if(y=v=-(m=g=1/0),d=[],f=[],p=e.length,o)for(h=0;h<p;++h)c=e[h],c.x<m&&(m=c.x),c.y<g&&(g=c.y),c.x>y&&(y=c.x),c.y>v&&(v=c.y),d.push(c.x),f.push(c.y);else for(h=0;h<p;++h){var x=+_(c=e[h],h),w=+b(c,h);x<m&&(m=x),w<g&&(g=w),x>y&&(y=x),w>v&&(v=w),d.push(x),f.push(w)}var k=y-m,T=v-g;k>T?v=g+k:y=m+T;var M=fr();if(M.add=function(e){a(M,e,+_(e,++h),+b(e,h),m,g,y,v)},M.visit=function(e){hr(e,M,m,g,y,v)},M.find=function(e){return pr(M,e[0],e[1],m,g,y,v)},h=-1,null==t){for(;++h<p;)a(M,e[h],d[h],f[h],m,g,y,v);--h}else e.forEach(M.add);return d=f=e=c=null,M}var o,s=En,l=Pn;return(o=arguments.length)?(s=cr,l=dr,3===o&&(i=n,r=t,n=t=0),a(e)):(a.x=function(e){return arguments.length?(s=e,a):s},a.y=function(e){return arguments.length?(l=e,a):l},a.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),a):null==t?null:[[t,n],[r,i]]},a.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),a):null==t?null:[r-t,i-n]},a)},so.interpolateRgb=mr,so.interpolateObject=gr,so.interpolateNumber=yr,so.interpolateString=vr;var ll=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ul=new RegExp(ll.source,"g");so.interpolate=_r,so.interpolators=[function(e,t){var n=typeof t;return("string"===n?ts.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?mr:vr:t instanceof oe?mr:Array.isArray(t)?br:"object"===n&&isNaN(t)?gr:yr)(e,t)}],so.interpolateArray=br;var cl=function(){return v},dl=so.map({linear:cl,poly:Cr,quad:function(){return Tr},cubic:function(){return Mr},sin:function(){return Sr},exp:function(){return Er},circle:function(){return Pr},elastic:Ir,back:Lr,bounce:function(){return Or}}),fl=so.map({in:v,out:wr,"in-out":kr,"out-in":function(e){return kr(wr(e))}});so.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=dl.get(n)||cl,r=fl.get(r)||v,xr(r(n.apply(null,lo.call(arguments,1))))},so.interpolateHcl=zr,so.interpolateHsl=Rr,so.interpolateLab=Dr,so.interpolateRound=Nr,so.transform=function(e){var t=co.createElementNS(so.ns.prefix.svg,"g");return(so.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Fr(n?n.matrix:hl)})(e)},Fr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var hl={a:1,b:0,c:0,d:1,e:0,f:0};so.interpolateTransform=Yr,so.layout={},so.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Jr(e[n]));return t}},so.layout.chord=function(){function e(){var e,u,d,f,h,p={},m=[],g=so.range(a),y=[];for(n=[],r=[],e=0,f=-1;++f<a;){for(u=0,h=-1;++h<a;)u+=i[f][h];m.push(u),y.push(so.range(a)),e+=u}for(o&&g.sort(function(e,t){return o(m[e],m[t])}),s&&y.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Fo-c*a)/e,u=0,f=-1;++f<a;){for(d=u,h=-1;++h<a;){var v=g[f],_=y[v][h],b=i[v][_],x=u,w=u+=b*e;p[v+"-"+_]={index:v,subindex:_,startAngle:x,endAngle:w,value:b}}r[v]={index:v,startAngle:d,endAngle:u,value:m[v]},u+=c}for(f=-1;++f<a;)for(h=f-1;++h<a;){var k=p[f+"-"+h],T=p[h+"-"+f];(k.value||T.value)&&n.push(k.value<T.value?{source:T,target:k}:{source:k,target:T})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,a,o,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(a=(i=e)&&i.length,n=r=null,u):i},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(o=e,n=r=null,u):o},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},so.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var a=t.cx-e.x,o=t.cy-e.y,s=i-n,l=a*a+o*o;if(s*s/y<l){if(l<m){var u=t.charge/l;e.px-=a*u,e.py-=o*u}return!0}if(t.point&&l&&l<m){var u=t.pointCharge/l;e.px-=a*u,e.py-=o*u}}return!t.charge}}function t(e){e.px=so.event.x,e.py=so.event.y,l.resume()}var n,r,i,a,o,s,l={},u=so.dispatch("start","tick","end"),c=[1,1],d=.9,f=pl,h=ml,p=-30,m=gl,g=.1,y=.64,_=[],b=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var t,r,l,f,h,m,y,v,x,w=_.length,k=b.length;for(r=0;r<k;++r)l=b[r],f=l.source,h=l.target,v=h.x-f.x,x=h.y-f.y,(m=v*v+x*x)&&(m=i*o[r]*((m=Math.sqrt(m))-a[r])/m,v*=m,x*=m,h.x-=v*(y=f.weight+h.weight?f.weight/(f.weight+h.weight):.5),h.y-=x*y,f.x+=v*(y=1-y),f.y+=x*y);if((y=i*g)&&(v=c[0]/2,x=c[1]/2,r=-1,y))for(;++r<w;)l=_[r],l.x+=(v-l.x)*y,l.y+=(x-l.y)*y;if(p)for(ri(t=so.geom.quadtree(_),i,s),r=-1;++r<w;)(l=_[r]).fixed||t.visit(e(l));for(r=-1;++r<w;)l=_[r],l.fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*d,l.y-=(l.py-(l.py=l.y))*d);u.tick({type:"tick",alpha:i})},l.nodes=function(e){return arguments.length?(_=e,l):_},l.links=function(e){return arguments.length?(b=e,l):b},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(f="function"===typeof e?e:+e,l):f},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(h="function"===typeof e?e:+e,l):h},l.friction=function(e){return arguments.length?(d=+e,l):d},l.charge=function(e){return arguments.length?(p="function"===typeof e?e:+e,l):p},l.chargeDistance=function(e){return arguments.length?(m=e*e,l):Math.sqrt(m)},l.gravity=function(e){return arguments.length?(g=+e,l):g},l.theta=function(e){return arguments.length?(y=e*e,l):Math.sqrt(y)},l.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):e>0&&(u.start({type:"start",alpha:i=e}),n=Ie(l.tick)),l):i},l.start=function(){function e(e,r){if(!n){for(n=new Array(i),l=0;l<i;++l)n[l]=[];for(l=0;l<u;++l){var a=b[l];n[a.source.index].push(a.target),n[a.target.index].push(a.source)}}for(var o,s=n[t],l=-1,c=s.length;++l<c;)if(!isNaN(o=s[l][e]))return o;return Math.random()*r}var t,n,r,i=_.length,u=b.length,d=c[0],m=c[1];for(t=0;t<i;++t)(r=_[t]).index=t,r.weight=0;for(t=0;t<u;++t)r=b[t],"number"==typeof r.source&&(r.source=_[r.source]),"number"==typeof r.target&&(r.target=_[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<i;++t)r=_[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",m)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(a=[],"function"===typeof f)for(t=0;t<u;++t)a[t]=+f.call(this,b[t],t);else for(t=0;t<u;++t)a[t]=f;if(o=[],"function"===typeof h)for(t=0;t<u;++t)o[t]=+h.call(this,b[t],t);else for(t=0;t<u;++t)o[t]=h;if(s=[],"function"===typeof p)for(t=0;t<i;++t)s[t]=+p.call(this,_[t],t);else for(t=0;t<i;++t)s[t]=p;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=so.behavior.drag().origin(v).on("dragstart.force",$r).on("drag.force",t).on("dragend.force",ei)),!arguments.length)return r;this.on("mouseover.force",ti).on("mouseout.force",ni).call(r)},so.rebind(l,u,"on")};var pl=20,ml=1,gl=1/0;so.layout.hierarchy=function(){function e(i){var a,o=[i],s=[];for(i.depth=0;null!=(a=o.pop());)if(s.push(a),(u=n.call(e,a,a.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)o.push(c=u[l]),c.parent=a,c.depth=a.depth+1;r&&(a.value=0),a.children=u}else r&&(a.value=+r.call(e,a,a.depth)||0),delete a.children;return oi(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=ui,n=si,r=li;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ai(t,function(e){e.children&&(e.value=0)}),oi(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},so.layout.partition=function(){function e(t,n,r,i){var a=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,a&&(o=a.length)){var o,s,l,u=-1;for(r=t.value?r/t.value:0;++u<o;)e(s=a[u],n,l=s.value*r,i),n+=l}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,a=-1;++a<i;)r=Math.max(r,t(n[a]));return 1+r}function n(n,a){var o=r.call(this,n,a);return e(o[0],0,i[0],i[1]/t(o[0])),o}var r=so.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ii(n,r)},so.layout.pie=function(){function e(o){var s,l=o.length,u=o.map(function(n,r){return+t.call(e,n,r)}),c=+("function"===typeof r?r.apply(this,arguments):r),d=("function"===typeof i?i.apply(this,arguments):i)-c,f=Math.min(Math.abs(d)/l,+("function"===typeof a?a.apply(this,arguments):a)),h=f*(d<0?-1:1),p=so.sum(u),m=p?(d-l*h)/p:0,g=so.range(l),y=[];return null!=n&&g.sort(n===yl?function(e,t){return u[t]-u[e]}:function(e,t){return n(o[e],o[t])}),g.forEach(function(e){y[e]={data:o[e],value:s=u[e],startAngle:c,endAngle:c+=s*m+h,padAngle:f}}),y}var t=Number,n=yl,r=0,i=Fo,a=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(a=t,e):a},e};var yl={};so.layout.stack=function(){function e(s,l){if(!(f=s.length))return s;var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[a.call(e,t,n),o.call(e,t,n)]})}),d=n.call(e,c,l);u=so.permute(u,d),c=so.permute(c,d);var f,h,p,m,g=r.call(e,c,l),y=u[0].length;for(p=0;p<y;++p)for(i.call(e,u[0][p],m=g[p],c[0][p][1]),h=1;h<f;++h)i.call(e,u[h][p],m+=c[h-1][p][1],c[h][p][1]);return s}var t=v,n=pi,r=mi,i=hi,a=di,o=fi;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"===typeof t?t:vl.get(t)||pi,e):n},e.offset=function(t){return arguments.length?(r="function"===typeof t?t:_l.get(t)||mi,e):r},e.x=function(t){return arguments.length?(a=t,e):a},e.y=function(t){return arguments.length?(o=t,e):o},e.out=function(t){return arguments.length?(i=t,e):i},e};var vl=so.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(gi),a=e.map(yi),o=so.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,l=0,u=[],c=[];for(t=0;t<r;++t)n=o[t],s<l?(s+=a[n],u.push(n)):(l+=a[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return so.range(e.length).reverse()},default:pi}),_l=so.map({silhouette:function(e){var t,n,r,i=e.length,a=e[0].length,o=[],s=0,l=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),o.push(r)}for(n=0;n<a;++n)l[n]=(s-o[n])/2;return l},wiggle:function(e){var t,n,r,i,a,o,s,l,u,c=e.length,d=e[0],f=d.length,h=[];for(h[0]=l=u=0,n=1;n<f;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,a=0,s=d[n][0]-d[n-1][0];t<c;++t){for(r=0,o=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)o+=(e[r][n][1]-e[r][n-1][1])/s;a+=o*e[t][n][1]}h[n]=l-=i?a/i*s:0,l<u&&(u=l)}for(n=0;n<f;++n)h[n]-=u;return h},expand:function(e){var t,n,r,i=e.length,a=e[0].length,o=1/i,s=[];for(n=0;n<a;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=o}for(n=0;n<a;++n)s[n]=0;return s},zero:mi});so.layout.histogram=function(){function e(e,a){for(var o,s,l=[],u=e.map(n,this),c=r.call(this,u,a),d=i.call(this,c,u,a),a=-1,f=u.length,h=d.length-1,p=t?1:1/f;++a<h;)o=l[a]=[],o.dx=d[a+1]-(o.x=d[a]),o.y=0;if(h>0)for(a=-1;++a<f;)(s=u[a])>=c[0]&&s<=c[1]&&(o=l[so.bisect(d,s,1,h)-1],o.y+=p,o.push(e[a]));return l}var t=!0,n=Number,r=xi,i=_i;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=Ae(t),e):r},e.bins=function(t){return arguments.length?(i="number"===typeof t?function(e){return bi(e,t)}:Ae(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},so.layout.pack=function(){function e(e,a){var o=n.call(this,e,a),s=o[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"===typeof t?t:function(){return t};if(s.x=s.y=0,oi(s,function(e){e.r=+c(e.value)}),oi(s,Ai),r){var d=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;oi(s,function(e){e.r+=d}),oi(s,Ai),oi(s,function(e){e.r-=d})}return Ei(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),o}var t,n=so.layout.hierarchy().sort(wi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"===typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ii(e,n)},so.layout.tree=function(){function e(e,i){var c=o.call(this,e,i),d=c[0],f=t(d);if(oi(f,n),f.parent.m=-f.z,ai(f,r),u)ai(d,a);else{var h=d,p=d,m=d;ai(d,function(e){e.x<h.x&&(h=e),e.x>p.x&&(p=e),e.depth>m.depth&&(m=e)});var g=s(h,p)/2-h.x,y=l[0]/(p.x+s(p,h)/2+g),v=l[1]/(m.depth||1);ai(d,function(e){e.x=(e.x+g)*y,e.y=e.depth*v})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,a=t.children,o=0,s=a.length;o<s;++o)r.push((a[o]=i={_:a[o],parent:t,children:(i=a[o].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:o}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Ri(e);var a=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-a):e.z=a}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,a=e,o=t,l=i.parent.children[0],u=i.m,c=a.m,d=o.m,f=l.m;o=Oi(o),i=Li(i),o&&i;)l=Li(l),a=Oi(a),a.a=e,r=o.z+d-i.z-u+s(o._,i._),r>0&&(zi(Di(o,e,n),e,r),u+=r,c+=r),d+=o.m,u+=i.m,f+=l.m,c+=a.m;o&&!Oi(a)&&(a.t=o,a.m+=d-c),i&&!Li(l)&&(l.t=i,l.m+=u-f,n=e)}return n}function a(e){e.x*=l[0],e.y=e.depth*l[1]}var o=so.layout.hierarchy().sort(null).value(null),s=Ii,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?a:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:a,e):u?l:null},ii(e,o)},so.layout.cluster=function(){function e(e,a){var o,s=t.call(this,e,a),l=s[0],u=0;oi(l,function(e){var t=e.children;t&&t.length?(e.x=Fi(t),e.y=Ni(t)):(e.x=o?u+=n(e,o):0,e.y=0,o=e)});var c=ji(l),d=Bi(l),f=c.x-n(c,d)/2,h=d.x+n(d,c)/2;return oi(l,i?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-f)/(h-f)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),s}var t=so.layout.hierarchy().sort(null).value(null),n=Ii,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ii(e,t)},so.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,a=e.length;++i<a;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function t(n){var a=n.children;if(a&&a.length){var o,s,l,u=d(n),c=[],f=a.slice(),p=1/0,m="slice"===h?u.dx:"dice"===h?u.dy:"slice-dice"===h?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(f,u.dx*u.dy/n.value),c.area=0;(l=f.length)>0;)c.push(o=f[l-1]),c.area+=o.area,"squarify"!==h||(s=r(c,m))<=p?(f.pop(),p=s):(c.area-=c.pop().area,i(c,m,u,!1),m=Math.min(u.dx,u.dy),c.length=c.area=0,p=1/0);c.length&&(i(c,m,u,!0),c.length=c.area=0),a.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var a,o=d(t),s=r.slice(),l=[];for(e(s,o.dx*o.dy/t.value),l.area=0;a=s.pop();)l.push(a),l.area+=a.area,null!=a.z&&(i(l,a.z?o.dx:o.dy,o,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,a=1/0,o=-1,s=e.length;++o<s;)(n=e[o].area)&&(n<a&&(a=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*p/r,r/(t*a*p)):1/0}function i(e,t,n,r){var i,a=-1,o=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++a<o;)i=e[a],i.x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++a<o;)i=e[a],i.x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function a(r){var i=o||s(r),a=i[0];return a.x=a.y=0,a.value?(a.dx=u[0],a.dy=u[1]):a.dx=a.dy=0,o&&s.revalue(a),e([a],a.dx*a.dy/a.value),(o?n:t)(a),f&&(o=i),i}var o,s=so.layout.hierarchy(),l=Math.round,u=[1,1],c=null,d=Ui,f=!1,h="squarify",p=.5*(1+Math.sqrt(5));return a.size=function(e){return arguments.length?(u=e,a):u},a.padding=function(e){function t(t){var n=e.call(a,t,t.depth);return null==n?Ui(t):Vi(t,"number"===typeof n?[n,n,n,n]:n)}function n(t){return Vi(t,e)}if(!arguments.length)return c;var r;return d=null==(c=e)?Ui:"function"===(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,a},a.round=function(e){return arguments.length?(l=e?Math.round:Number,a):l!=Number},a.sticky=function(e){return arguments.length?(f=e,o=null,a):f},a.ratio=function(e){return arguments.length?(p=e,a):p},a.mode=function(e){return arguments.length?(h=e+"",a):h},ii(a,s)},so.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{n=2*Math.random()-1,r=2*Math.random()-1,i=n*n+r*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=so.random.normal.apply(so,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=so.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},so.scale={};var bl={floor:v,ceil:v};so.scale.linear=function(){return Zi([0,1],[0,1],_r,!1)};var xl={s:1,g:1,p:1,r:1,e:1};so.scale.log=function(){return ra(so.scale.linear().domain([0,1]),10,!0,[1,10])};var wl=so.format(".0e"),kl={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};so.scale.pow=function(){return ia(so.scale.linear(),1,[0,1])},so.scale.sqrt=function(){return so.scale.pow().exponent(.5)},so.scale.ordinal=function(){return oa([],{t:"range",a:[[]]})},so.scale.category10=function(){return so.scale.ordinal().range(Tl)},so.scale.category20=function(){return so.scale.ordinal().range(Ml)},so.scale.category20b=function(){return so.scale.ordinal().range(Al)},so.scale.category20c=function(){return so.scale.ordinal().range(Cl)};var Tl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(_e),Ml=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(_e),Al=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(_e),Cl=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(_e);so.scale.quantile=function(){return sa([],[])},so.scale.quantize=function(){return la(0,1,[0,1])},so.scale.threshold=function(){return ua([.5],[0,1])},so.scale.identity=function(){return ca([0,1])},so.svg={},so.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=o.apply(this,arguments)-Bo,d=s.apply(this,arguments)-Bo,f=Math.abs(d-c),h=c>d?0:1;if(u<e&&(p=u,u=e,e=p),f>=jo)return t(u,h)+(e?t(e,1-h):"")+"Z";var p,m,g,y,v,_,b,x,w,k,T,M,A=0,C=0,S=[];if((y=(+l.apply(this,arguments)||0)/2)&&(g=a===Sl?Math.sqrt(e*e+u*u):+a.apply(this,arguments),h||(C*=-1),u&&(C=te(g/u*Math.sin(y))),e&&(A=te(g/e*Math.sin(y)))),u){v=u*Math.cos(c+C),_=u*Math.sin(c+C),b=u*Math.cos(d-C),x=u*Math.sin(d-C);var E=Math.abs(d-c-2*C)<=No?0:1;if(C&&ya(v,_,b,x)===h^E){var P=(c+d)/2;v=u*Math.cos(P),_=u*Math.sin(P),b=x=null}}else v=_=0;if(e){w=e*Math.cos(d-A),k=e*Math.sin(d-A),T=e*Math.cos(c+A),M=e*Math.sin(c+A);var I=Math.abs(c-d+2*A)<=No?0:1;if(A&&ya(w,k,T,M)===1-h^I){var L=(c+d)/2;w=e*Math.cos(L),k=e*Math.sin(L),T=M=null}}else w=k=0;if(f>Ro&&(p=Math.min(Math.abs(u-e)/2,+i.apply(this,arguments)))>.001){m=e<u^h?0:1;var O=p,z=p;if(f<No){var R=null==T?[w,k]:null==b?[v,_]:zn([v,_],[T,M],[b,x],[w,k]),D=v-R[0],N=_-R[1],F=b-R[0],j=x-R[1],B=1/Math.sin(Math.acos((D*F+N*j)/(Math.sqrt(D*D+N*N)*Math.sqrt(F*F+j*j)))/2),U=Math.sqrt(R[0]*R[0]+R[1]*R[1]);z=Math.min(p,(e-U)/(B-1)),O=Math.min(p,(u-U)/(B+1))}if(null!=b){var V=va(null==T?[w,k]:[T,M],[v,_],u,O,h),H=va([b,x],[w,k],u,O,h);p===O?S.push("M",V[0],"A",O,",",O," 0 0,",m," ",V[1],"A",u,",",u," 0 ",1-h^ya(V[1][0],V[1][1],H[1][0],H[1][1]),",",h," ",H[1],"A",O,",",O," 0 0,",m," ",H[0]):S.push("M",V[0],"A",O,",",O," 0 1,",m," ",H[0])}else S.push("M",v,",",_);if(null!=T){var W=va([v,_],[T,M],e,-z,h),q=va([w,k],null==b?[v,_]:[b,x],e,-z,h);p===z?S.push("L",q[0],"A",z,",",z," 0 0,",m," ",q[1],"A",e,",",e," 0 ",h^ya(q[1][0],q[1][1],W[1][0],W[1][1]),",",1-h," ",W[1],"A",z,",",z," 0 0,",m," ",W[0]):S.push("L",q[0],"A",z,",",z," 0 0,",m," ",W[0])}else S.push("L",w,",",k)}else S.push("M",v,",",_),null!=b&&S.push("A",u,",",u," 0 ",E,",",h," ",b,",",x),S.push("L",w,",",k),null!=T&&S.push("A",e,",",e," 0 ",I,",",1-h," ",T,",",M);return S.push("Z"),S.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=fa,r=ha,i=da,a=Sl,o=pa,s=ma,l=ga;return e.innerRadius=function(t){return arguments.length?(n=Ae(t),e):n},e.outerRadius=function(t){return arguments.length?(r=Ae(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=Ae(t),e):i},e.padRadius=function(t){return arguments.length?(a=t==Sl?Sl:Ae(t),e):a},e.startAngle=function(t){return arguments.length?(o=Ae(t),e):o},e.endAngle=function(t){return arguments.length?(s=Ae(t),e):s},e.padAngle=function(t){return arguments.length?(l=Ae(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+o.apply(this,arguments)+ +s.apply(this,arguments))/2-Bo;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Sl="auto";so.svg.line=function(){return _a(v)};var El=so.map({linear:ba,"linear-closed":xa,step:wa,"step-before":ka,"step-after":Ta,basis:Pa,"basis-open":Ia,"basis-closed":La,bundle:Oa,cardinal:Ca,"cardinal-open":Ma,"cardinal-closed":Aa,monotone:ja});El.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Pl=[0,2/3,1/3,0],Il=[0,1/3,2/3,0],Ll=[0,1/6,2/3,1/6];so.svg.line.radial=function(){var e=_a(Ba);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},ka.reverse=Ta,Ta.reverse=ka,so.svg.area=function(){return Ua(v)},so.svg.area.radial=function(){var e=Ua(Ba);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},so.svg.chord=function(){function e(e,s){var l=t(this,a,e,s),u=t(this,o,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),a=s.call(e,i,r),o=l.call(e,i,r)-Bo,c=u.call(e,i,r)-Bo;return{r:a,a0:o,a1:c,p0:[a*Math.cos(o),a*Math.sin(o)],p1:[a*Math.cos(c),a*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>No)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var a=_n,o=bn,s=Va,l=pa,u=ma;return e.radius=function(t){return arguments.length?(s=Ae(t),e):s},e.source=function(t){return arguments.length?(a=Ae(t),e):a},e.target=function(t){return arguments.length?(o=Ae(t),e):o},e.startAngle=function(t){return arguments.length?(l=Ae(t),e):l},e.endAngle=function(t){return arguments.length?(u=Ae(t),e):u},e},so.svg.diagonal=function(){function e(e,i){var a=t.call(this,e,i),o=n.call(this,e,i),s=(a.y+o.y)/2,l=[a,{x:a.x,y:s},{x:o.x,y:s},o];return l=l.map(r),"M"+l[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=_n,n=bn,r=Ha;return e.source=function(n){return arguments.length?(t=Ae(n),e):t},e.target=function(t){return arguments.length?(n=Ae(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},so.svg.diagonal.radial=function(){var e=so.svg.diagonal(),t=Ha,n=e.projection;return e.projection=function(e){return arguments.length?n(Wa(t=e)):t},e},so.svg.symbol=function(){function e(e,r){return(Ol.get(t.call(this,e,r))||Ya)(n.call(this,e,r))}var t=Ga,n=qa;return e.type=function(n){return arguments.length?(t=Ae(n),e):t},e.size=function(t){return arguments.length?(n=Ae(t),e):n},e};var Ol=so.map({circle:Ya,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Rl)),n=t*Rl;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/zl),n=t*zl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/zl),n=t*zl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});so.svg.symbolTypes=Ol.keys();var zl=Math.sqrt(3),Rl=Math.tan(30*Uo);Co.transition=function(e){for(var t,n,r=Dl||++Bl,i=Qa(e),a=[],o=Nl||{time:Date.now(),ease:Ar,delay:0,duration:250},s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(n=u[c])&&$a(n,c,i,r,o),t.push(n)}return Za(a,i,r)},Co.interrupt=function(e){return this.each(null==e?Fl:Xa(Qa(e)))};var Dl,Nl,Fl=Xa(Qa()),jl=[],Bl=0;jl.call=Co.call,jl.empty=Co.empty,jl.node=Co.node,jl.size=Co.size,so.transition=function(e,t){return e&&e.transition?Dl?e.transition(t):e:so.selection().transition(e)},so.transition.prototype=jl,jl.select=function(e){var t,n,r,i=this.id,a=this.namespace,o=[];e=S(e);for(var s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),$a(n,c,a,i,r[a][i]),t.push(n)):t.push(null)}return Za(o,a,i)},jl.selectAll=function(e){var t,n,r,i,a,o=this.id,s=this.namespace,l=[];e=E(e);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],f=-1,h=d.length;++f<h;)if(r=d[f]){a=r[s][o],n=e.call(r,r.__data__,f,u),l.push(t=[]);for(var p=-1,m=n.length;++p<m;)(i=n[p])&&$a(i,p,s,o,a),t.push(i)}return Za(l,s,o)},jl.filter=function(e){var t,n,r,i=[];"function"!==typeof e&&(e=U(e));for(var a=0,o=this.length;a<o;a++){i.push(t=[]);for(var n=this[a],s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,a)&&t.push(r)}return Za(i,this.namespace,this.id)},jl.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):H(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},jl.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=o(n,e),function(e){this.setAttribute(s,t(e))})})}function a(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=o(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var o="transform"==e?Yr:_r,s=so.ns.qualify(e);return Ja(this,"attr."+e,t,s.local?a:i)},jl.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=so.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},jl.style=function(e,n,r){function i(){this.style.removeProperty(e)}function a(n){return null==n?i:(n+="",function(){var i,a=t(this).getComputedStyle(this,null).getPropertyValue(e);return a!==n&&(i=_r(a,n),function(t){this.style.setProperty(e,i(t),r)})})}var o=arguments.length;if(o<3){if("string"!==typeof e){o<2&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Ja(this,"style."+e,n,a)},jl.styleTween=function(e,n,r){function i(i,a){var o=n.call(this,i,a,t(this).getComputedStyle(this,null).getPropertyValue(e));return o&&function(t){this.style.setProperty(e,o(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},jl.text=function(e){return Ja(this,"text",e,Ka)},jl.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},jl.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!==typeof e&&(e=so.ease.apply(so,arguments)),H(this,function(r){r[n][t].ease=e}))},jl.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:H(this,"function"===typeof e?function(r,i,a){r[n][t].delay=+e.call(r,r.__data__,i,a)}:(e=+e,function(r){r[n][t].delay=e}))},jl.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:H(this,"function"===typeof e?function(r,i,a){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,a))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},jl.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Nl,a=Dl;try{Dl=n,H(this,function(t,i,a){Nl=t[r][n],e.call(t,t.__data__,i,a)})}finally{Nl=i,Dl=a}}else H(this,function(i){var a=i[r][n];(a.event||(a.event=so.dispatch("start","end","interrupt"))).on(e,t)});return this},jl.transition=function(){for(var e,t,n,r,i=this.id,a=++Bl,o=this.namespace,s=[],l=0,u=this.length;l<u;l++){s.push(e=[]);for(var t=this[l],c=0,d=t.length;c<d;c++)(n=t[c])&&(r=n[o][i],$a(n,c,o,a,{time:r.time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration})),e.push(n)}return Za(s,o,a)},so.svg.axis=function(){function e(e){e.each(function(){var e,u=so.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),f=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,h=null==t?d.tickFormat?d.tickFormat.apply(d,s):v:t,p=u.selectAll(".tick").data(f,d),m=p.enter().insert("g",".domain").attr("class","tick").style("opacity",Ro),g=so.transition(p.exit()).style("opacity",Ro).remove(),y=so.transition(p.order()).style("opacity",1),_=Math.max(i,0)+o,b=Wi(d),x=u.selectAll(".domain").data([0]),w=(x.enter().append("path").attr("class","domain"),so.transition(x));m.append("line"),m.append("text");var k,T,M,A,C=m.select("line"),S=y.select("line"),E=p.select("text").text(h),P=m.select("text"),I=y.select("text"),L="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=eo,k="x",M="y",T="x2",A="y2",E.attr("dy",L<0?"0em":".71em").style("text-anchor","middle"),w.attr("d","M"+b[0]+","+L*a+"V0H"+b[1]+"V"+L*a)):(e=to,k="y",M="x",T="y2",A="x2",E.attr("dy",".32em").style("text-anchor",L<0?"end":"start"),w.attr("d","M"+L*a+","+b[0]+"H0V"+b[1]+"H"+L*a)),C.attr(A,L*i),P.attr(M,L*_),S.attr(T,0).attr(A,L*i),I.attr(k,0).attr(M,L*_),d.rangeBand){var O=d,z=O.rangeBand()/2;c=d=function(e){return O(e)+z}}else c.rangeBand?c=d:g.call(e,d,c);m.call(e,c,d),y.call(e,d,d)})}var t,n=so.scale.linear(),r=Ul,i=6,a=6,o=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in Vl?t+"":Ul,e):r},e.ticks=function(){return arguments.length?(s=uo(arguments),e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,a=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(a=+t,e):a},e.tickPadding=function(t){return arguments.length?(o=+t,e):o},e.tickSubdivide=function(){return arguments.length&&e},e};var Ul="bottom",Vl={top:1,right:1,bottom:1,left:1};so.svg.brush=function(){function e(t){t.each(function(){var t=so.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",a).on("touchstart.brush",a),o=t.selectAll(".background").data([0]);o.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(m,v);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,d=so.transition(t),f=so.transition(o);u&&(l=Wi(u),f.attr("x",l[0]).attr("width",l[1]-l[0]),r(d)),c&&(l=Wi(c),f.attr("y",l[0]).attr("height",l[1]-l[0]),i(d)),n(d)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+d[+/e$/.test(e)]+","+f[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",d[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1]-d[0])}function i(e){e.select(".extent").attr("y",f[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function a(){function a(){32==so.event.keyCode&&(E||(_=null,I[0]-=d[1],I[1]-=f[1],E=2),T())}function m(){32==so.event.keyCode&&2==E&&(I[0]+=d[1],I[1]+=f[1],E=0,T())}function g(){var e=so.mouse(x),t=!1;b&&(e[0]+=b[0],e[1]+=b[1]),E||(so.event.altKey?(_||(_=[(d[0]+d[1])/2,(f[0]+f[1])/2]),I[0]=d[+(e[0]<_[0])],I[1]=f[+(e[1]<_[1])]):_=null),C&&y(e,u,0)&&(r(M),t=!0),S&&y(e,c,1)&&(i(M),t=!0),t&&(n(M),k({type:"brush",mode:E?"move":"resize"}))}function y(e,t,n){var r,i,a=Wi(t),l=a[0],u=a[1],c=I[n],m=n?f:d,g=m[1]-m[0];if(E&&(l-=c,u-=g+c),r=(n?p:h)?Math.max(l,Math.min(u,e[n])):e[n],E?i=(r+=c)+g:(_&&(c=Math.max(l,Math.min(u,2*_[n]-r))),c<r?(i=r,r=c):i=c),m[0]!=r||m[1]!=i)return n?s=null:o=null,m[0]=r,m[1]=i,!0}function v(){g(),M.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),so.select("body").style("cursor",null),L.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),P(),k({type:"brushend"})}var _,b,x=this,w=so.select(so.event.target),k=l.of(x,arguments),M=so.select(x),A=w.datum(),C=!/^(n|s)$/.test(A)&&u,S=!/^(e|w)$/.test(A)&&c,E=w.classed("extent"),P=Z(x),I=so.mouse(x),L=so.select(t(x)).on("keydown.brush",a).on("keyup.brush",m);if(so.event.changedTouches?L.on("touchmove.brush",g).on("touchend.brush",v):L.on("mousemove.brush",g).on("mouseup.brush",v),M.interrupt().selectAll("*").interrupt(),E)I[0]=d[0]-I[0],I[1]=f[0]-I[1];else if(A){var O=+/w$/.test(A),z=+/^n/.test(A);b=[d[1-O]-I[0],f[1-z]-I[1]],I[0]=d[O],I[1]=f[z]}else so.event.altKey&&(_=I.slice());M.style("pointer-events","none").selectAll(".resize").style("display",null),so.select("body").style("cursor",w.style("cursor")),k({type:"brushstart"}),g()}var o,s,l=A(e,"brushstart","brush","brushend"),u=null,c=null,d=[0,0],f=[0,0],h=!0,p=!0,m=Wl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:d,y:f,i:o,j:s},n=this.__chart__||t;this.__chart__=t,Dl?so.select(this).transition().each("start.brush",function(){o=n.i,s=n.j,d=n.x,f=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=br(d,t.x),r=br(f,t.y);return o=s=null,function(i){d=t.x=n(i),f=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){o=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,m=Wl[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,m=Wl[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(h=!!t[0],p=!!t[1]):u?h=!!t:c&&(p=!!t),e):u&&c?[h,p]:u?h:c?p:null},e.extent=function(t){var n,r,i,a,l;return arguments.length?(u&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),o=[n,r],u.invert&&(n=u(n),r=u(r)),r<n&&(l=n,n=r,r=l),n==d[0]&&r==d[1]||(d=[n,r])),c&&(i=t[0],a=t[1],u&&(i=i[1],a=a[1]),s=[i,a],c.invert&&(i=c(i),a=c(a)),a<i&&(l=i,i=a,a=l),i==f[0]&&a==f[1]||(f=[i,a])),e):(u&&(o?(n=o[0],r=o[1]):(n=d[0],r=d[1],u.invert&&(n=u.invert(n),r=u.invert(r)),r<n&&(l=n,n=r,r=l))),c&&(s?(i=s[0],a=s[1]):(i=f[0],a=f[1],c.invert&&(i=c.invert(i),a=c.invert(a)),a<i&&(l=i,i=a,a=l))),u&&c?[[n,i],[r,a]]:u?[n,r]:c&&[i,a])},e.clear=function(){return e.empty()||(d=[0,0],f=[0,0],o=s=null),e},e.empty=function(){return!!u&&d[0]==d[1]||!!c&&f[0]==f[1]},so.rebind(e,l,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Wl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],ql=cs.format=gs.timeFormat,Gl=ql.utc,Yl=Gl("%Y-%m-%dT%H:%M:%S.%LZ");ql.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?no:Yl,no.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},no.toString=Yl.toString,cs.second=Be(function(e){return new ds(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),cs.seconds=cs.second.range,cs.seconds.utc=cs.second.utc.range,cs.minute=Be(function(e){return new ds(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),cs.minutes=cs.minute.range,cs.minutes.utc=cs.minute.utc.range,cs.hour=Be(function(e){var t=e.getTimezoneOffset()/60;return new ds(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),cs.hours=cs.hour.range,cs.hours.utc=cs.hour.utc.range,cs.month=Be(function(e){return e=cs.day(e),e.setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),cs.months=cs.month.range,cs.months.utc=cs.month.utc.range;var Xl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],Zl=[[cs.second,1],[cs.second,5],[cs.second,15],[cs.second,30],[cs.minute,1],[cs.minute,5],[cs.minute,15],[cs.minute,30],[cs.hour,1],[cs.hour,3],[cs.hour,6],[cs.hour,12],[cs.day,1],[cs.day,2],[cs.week,1],[cs.month,1],[cs.month,3],[cs.year,1]],Jl=ql.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Et]]),Kl={range:function(e,t,n){return so.range(Math.ceil(e/n)*n,+t,n).map(io)},floor:v,ceil:v};Zl.year=cs.year,cs.scale=function(){return ro(so.scale.linear(),Zl,Jl)};var Ql=Zl.map(function(e){return[e[0].utc,e[1]]}),$l=Gl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Et]]);Ql.year=cs.year.utc,cs.scale.utc=function(){return ro(so.scale.linear(),Ql,$l)},so.text=Ce(function(e){return e.responseText}),so.json=function(e,t){return Se(e,"application/json",ao,t)},so.html=function(e,t){return Se(e,"text/html",oo,t)},so.xml=Ce(function(e){return e.responseXML}),"function"===typeof MC&&MC.amd?(this.d3=so,MC(so)):CC.exports?CC.exports=so:this.d3=so}(),CC=CC.exports;var SC=function(t){var n=typeof t;if("string"===n){var r=t;if(0===(t=+t)&&e(r))return!1}else if("number"!==n)return!1;return t-t<1},EC={},PC=Math.PI;EC.deg2rad=function(e){return e/180*PC},EC.rad2deg=function(e){return e/PC*180},EC.wrap360=function(e){var t=e%360;return t<0?t+360:t},EC.wrap180=function(e){return Math.abs(e)>180&&(e-=360*Math.round(e/360)),e};var IC=AC.BADNUM,LC=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g,OC=function(e){return"string"===typeof e&&(e=e.replace(LC,"")),SC(e)?Number(e):IC},zC={exports:{}};!function(e){function t(e,r){if(e=e||"",r=r||{},e instanceof t)return e;if(!(this instanceof t))return new t(e,r);var i=n(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=B(100*this._a)/100,this._format=r.format||i.format,this._gradientType=r.gradientType,this._r<1&&(this._r=B(this._r)),this._g<1&&(this._g=B(this._g)),this._b<1&&(this._b=B(this._b)),this._ok=i.ok,this._tc_id=j++}function n(e){var t={r:0,g:0,b:0},n=1,i=null,o=null,l=null,u=!1,c=!1;return"string"==typeof e&&(e=R(e)),"object"==typeof e&&(z(e.r)&&z(e.g)&&z(e.b)?(t=r(e.r,e.g,e.b),u=!0,c="%"===String(e.r).substr(-1)?"prgb":"rgb"):z(e.h)&&z(e.s)&&z(e.v)?(i=I(e.s),o=I(e.v),t=s(e.h,i,o),u=!0,c="hsv"):z(e.h)&&z(e.s)&&z(e.l)&&(i=I(e.s),l=I(e.l),t=a(e.h,i,l),u=!0,c="hsl"),e.hasOwnProperty("a")&&(n=e.a)),n=T(n),{ok:u,format:e.format||c,r:U(255,V(t.r,0)),g:U(255,V(t.g,0)),b:U(255,V(t.b,0)),a:n}}function r(e,t,n){return{r:255*M(e,255),g:255*M(t,255),b:255*M(n,255)}}function i(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,i,a=V(e,t,n),o=U(e,t,n),s=(a+o)/2;if(a==o)r=i=0;else{var l=a-o;switch(i=s>.5?l/(2-a-o):l/(a+o),a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,l:s}}function a(e,t,n){function r(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var i,a,o;if(e=M(e,360),t=M(t,100),n=M(n,100),0===t)i=a=o=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;i=r(l,s,e+1/3),a=r(l,s,e),o=r(l,s,e-1/3)}return{r:255*i,g:255*a,b:255*o}}function o(e,t,n){e=M(e,255),t=M(t,255),n=M(n,255);var r,i,a=V(e,t,n),o=U(e,t,n),s=a,l=a-o;if(i=0===a?0:l/a,a==o)r=0;else{switch(a){case e:r=(t-n)/l+(t<n?6:0);break;case t:r=(n-e)/l+2;break;case n:r=(e-t)/l+4}r/=6}return{h:r,s:i,v:s}}function s(t,n,r){t=6*M(t,360),n=M(n,100),r=M(r,100);var i=e.floor(t),a=t-i,o=r*(1-n),s=r*(1-a*n),l=r*(1-(1-a)*n),u=i%6;return{r:255*[r,s,o,o,l,r][u],g:255*[l,r,r,s,o,o][u],b:255*[o,o,l,r,r,s][u]}}function l(e,t,n,r){var i=[P(B(e).toString(16)),P(B(t).toString(16)),P(B(n).toString(16))];return r&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0):i.join("")}function u(e,t,n,r,i){var a=[P(B(e).toString(16)),P(B(t).toString(16)),P(B(n).toString(16)),P(L(r))];return i&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function c(e,t,n,r){return[P(L(r)),P(B(e).toString(16)),P(B(t).toString(16)),P(B(n).toString(16))].join("")}function d(e,n){n=0===n?0:n||10;var r=t(e).toHsl();return r.s-=n/100,r.s=A(r.s),t(r)}function f(e,n){n=0===n?0:n||10;var r=t(e).toHsl();return r.s+=n/100,r.s=A(r.s),t(r)}function h(e){return t(e).desaturate(100)}function p(e,n){n=0===n?0:n||10;var r=t(e).toHsl();return r.l+=n/100,r.l=A(r.l),t(r)}function m(e,n){n=0===n?0:n||10;var r=t(e).toRgb();return r.r=V(0,U(255,r.r-B(-n/100*255))),r.g=V(0,U(255,r.g-B(-n/100*255))),r.b=V(0,U(255,r.b-B(-n/100*255))),t(r)}function g(e,n){n=0===n?0:n||10;var r=t(e).toHsl();return r.l-=n/100,r.l=A(r.l),t(r)}function y(e,n){var r=t(e).toHsl(),i=(r.h+n)%360;return r.h=i<0?360+i:i,t(r)}function v(e){var n=t(e).toHsl();return n.h=(n.h+180)%360,t(n)}function _(e){var n=t(e).toHsl(),r=n.h;return[t(e),t({h:(r+120)%360,s:n.s,l:n.l}),t({h:(r+240)%360,s:n.s,l:n.l})]}function b(e){var n=t(e).toHsl(),r=n.h;return[t(e),t({h:(r+90)%360,s:n.s,l:n.l}),t({h:(r+180)%360,s:n.s,l:n.l}),t({h:(r+270)%360,s:n.s,l:n.l})]}function x(e){var n=t(e).toHsl(),r=n.h;return[t(e),t({h:(r+72)%360,s:n.s,l:n.l}),t({h:(r+216)%360,s:n.s,l:n.l})]}function w(e,n,r){n=n||6,r=r||30;var i=t(e).toHsl(),a=360/r,o=[t(e)];for(i.h=(i.h-(a*n>>1)+720)%360;--n;)i.h=(i.h+a)%360,o.push(t(i));return o}function k(e,n){n=n||6;for(var r=t(e).toHsv(),i=r.h,a=r.s,o=r.v,s=[],l=1/n;n--;)s.push(t({h:i,s:a,v:o})),o=(o+l)%1;return s}function T(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function M(t,n){S(t)&&(t="100%");var r=E(t);return t=U(n,V(0,parseFloat(t))),r&&(t=parseInt(t*n,10)/100),e.abs(t-n)<1e-6?1:t%n/parseFloat(n)}function A(e){return U(1,V(0,e))}function C(e){return parseInt(e,16)}function S(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)}function E(e){return"string"===typeof e&&-1!=e.indexOf("%")}function P(e){return 1==e.length?"0"+e:""+e}function I(e){return e<=1&&(e=100*e+"%"),e}function L(t){return e.round(255*parseFloat(t)).toString(16)}function O(e){return C(e)/255}function z(e){return!!G.CSS_UNIT.exec(e)}function R(e){e=e.replace(N,"").replace(F,"").toLowerCase();var t=!1;if(W[e])e=W[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=G.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=G.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=G.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=G.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=G.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=G.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=G.hex8.exec(e))?{r:C(n[1]),g:C(n[2]),b:C(n[3]),a:O(n[4]),format:t?"name":"hex8"}:(n=G.hex6.exec(e))?{r:C(n[1]),g:C(n[2]),b:C(n[3]),format:t?"name":"hex"}:(n=G.hex4.exec(e))?{r:C(n[1]+""+n[1]),g:C(n[2]+""+n[2]),b:C(n[3]+""+n[3]),a:O(n[4]+""+n[4]),format:t?"name":"hex8"}:!!(n=G.hex3.exec(e))&&{r:C(n[1]+""+n[1]),g:C(n[2]+""+n[2]),b:C(n[3]+""+n[3]),format:t?"name":"hex"}}function D(e){var t,n;return e=e||{level:"AA",size:"small"},t=(e.level||"AA").toUpperCase(),n=(e.size||"small").toLowerCase(),"AA"!==t&&"AAA"!==t&&(t="AA"),"small"!==n&&"large"!==n&&(n="small"),{level:t,size:n}}var N=/^\s+/,F=/\s+$/,j=0,B=e.round,U=e.min,V=e.max,H=e.random;t.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},getLuminance:function(){var t,n,r,i,a,o,s=this.toRgb();return t=s.r/255,n=s.g/255,r=s.b/255,i=t<=.03928?t/12.92:e.pow((t+.055)/1.055,2.4),a=n<=.03928?n/12.92:e.pow((n+.055)/1.055,2.4),o=r<=.03928?r/12.92:e.pow((r+.055)/1.055,2.4),.2126*i+.7152*a+.0722*o},setAlpha:function(e){return this._a=T(e),this._roundA=B(100*this._a)/100,this},toHsv:function(){var e=o(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=o(this._r,this._g,this._b),t=B(360*e.h),n=B(100*e.s),r=B(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=i(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=i(this._r,this._g,this._b),t=B(360*e.h),n=B(100*e.s),r=B(100*e.l);return 1==this._a?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return l(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return u(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:B(this._r),g:B(this._g),b:B(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+B(this._r)+", "+B(this._g)+", "+B(this._b)+")":"rgba("+B(this._r)+", "+B(this._g)+", "+B(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:B(100*M(this._r,255))+"%",g:B(100*M(this._g,255))+"%",b:B(100*M(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+B(100*M(this._r,255))+"%, "+B(100*M(this._g,255))+"%, "+B(100*M(this._b,255))+"%)":"rgba("+B(100*M(this._r,255))+"%, "+B(100*M(this._g,255))+"%, "+B(100*M(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(q[l(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var n="#"+c(this._r,this._g,this._b,this._a),r=n,i=this._gradientType?"GradientType = 1, ":"";if(e){var a=t(e);r="#"+c(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+n+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0;return t||!r||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"hex4"!==e&&"hex8"!==e&&"name"!==e?("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex4"===e&&(n=this.toHex8String(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},clone:function(){return t(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(p,arguments)},brighten:function(){return this._applyModification(m,arguments)},darken:function(){return this._applyModification(g,arguments)},desaturate:function(){return this._applyModification(d,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(h,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(w,arguments)},complement:function(){return this._applyCombination(v,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(x,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(b,arguments)}},t.fromRatio=function(e,n){if("object"==typeof e){var r={};for(var i in e)e.hasOwnProperty(i)&&(r[i]="a"===i?e[i]:I(e[i]));e=r}return t(e,n)},t.equals=function(e,n){return!(!e||!n)&&t(e).toRgbString()==t(n).toRgbString()},t.random=function(){return t.fromRatio({r:H(),g:H(),b:H()})},t.mix=function(e,n,r){r=0===r?0:r||50;var i=t(e).toRgb(),a=t(n).toRgb(),o=r/100;return t({r:(a.r-i.r)*o+i.r,g:(a.g-i.g)*o+i.g,b:(a.b-i.b)*o+i.b,a:(a.a-i.a)*o+i.a})},t.readability=function(n,r){var i=t(n),a=t(r);return(e.max(i.getLuminance(),a.getLuminance())+.05)/(e.min(i.getLuminance(),a.getLuminance())+.05)},t.isReadable=function(e,n,r){var i,a,o=t.readability(e,n);switch(a=!1,i=D(r),i.level+i.size){case"AAsmall":case"AAAlarge":a=o>=4.5;break;case"AAlarge":a=o>=3;break;case"AAAsmall":a=o>=7}return a},t.mostReadable=function(e,n,r){var i,a,o,s,l=null,u=0;r=r||{},a=r.includeFallbackColors,o=r.level,s=r.size;for(var c=0;c<n.length;c++)(i=t.readability(e,n[c]))>u&&(u=i,l=t(n[c]));return t.isReadable(e,l,{level:o,size:s})||!a?l:(r.includeFallbackColors=!1,t.mostReadable(e,["#fff","#000"],r))};var W=t.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},q=t.hexNames=function(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}(W),G=function(){var e="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",t="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+t),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+t),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+t),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();zC.exports?zC.exports=t:"function"===typeof MC&&MC.amd?MC(function(){return t}):window.tinycolor=t}(Math),zC=zC.exports;var RC={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},DC=RC.RdBu,NC=function(e){var t=0;if(!Array.isArray(e)||e.length<2)return!1;if(!e[0]||!e[e.length-1])return!1;if(0!==+e[0][0]||1!==+e[e.length-1][0])return!1;for(var n=0;n<e.length;n++){var r=e[n];if(2!==r.length||+r[0]<t||!zC(r[1]).isValid())return!1;t=+r[0]}return!0},FC=function(e,t){function n(){try{e=RC[e]||JSON.parse(e)}catch(n){e=t}}return t||(t=DC),e?("string"===typeof e&&(n(),"string"===typeof e&&n()),NC(e)?e:t):t},jC={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DBLCLICKDELAY:300,DESELECTDIM:.2},BC={},UC="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer:{isView:function(){return!1}},VC="undefined"===typeof DataView?function(){}:DataView;BC.isTypedArray=function(e){return UC.isView(e)&&!(e instanceof VC)},BC.isArrayOrTypedArray=function(e){return Array.isArray(e)||BC.isTypedArray(e)};var HC=function(e){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(e):"[object Object]"===Object.prototype.toString.call(e)&&Object.getPrototypeOf(e)===Object.prototype},WC={},qC=Array.isArray;WC.extendFlat=function(){return a(arguments,!1,!1,!1)},WC.extendDeep=function(){return a(arguments,!0,!1,!1)},WC.extendDeepAll=function(){return a(arguments,!0,!0,!1)},WC.extendDeepNoArrays=function(){return a(arguments,!0,!1,!0)};var GC={staticPlot:!1,editable:!1,edits:{annotationPosition:!1,annotationTail:!1,annotationText:!1,axisTitleText:!1,colorbarPosition:!1,colorbarTitleText:!1,legendPosition:!1,legendText:!1,shapePosition:!1,titleText:!1},autosizable:!1,queueLength:0,fillFrame:!1,frameMargins:0,scrollZoom:!1,doubleClick:"reset+autosize",showTips:!0,showAxisDragHandles:!0,showAxisRangeEntryBoxes:!0,showLink:!1,sendData:!0,linkText:"Edit chart",showSources:!1,displayModeBar:"hover",modeBarButtonsToRemove:[],modeBarButtonsToAdd:[],modeBarButtons:!1,displaylogo:!0,plotGlPixelRatio:2,setBackground:"transparent",topojsonURL:"https://cdn.plot.ly/",mapboxAccessToken:null,logging:1,globalTransforms:[],locale:"en-US",locales:{}},YC={},XC=YC={};XC.log=function(){if(GC.logging>1){for(var e=["LOG:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}},XC.warn=function(){if(GC.logging>0){for(var e=["WARN:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.trace||console.log,e)}},XC.error=function(){if(GC.logging>0){for(var e=["ERROR:"],t=0;t<arguments.length;t++)e.push(arguments[t]);o(console.error,e)}};var ZC=function(){},JC=function(e,t){if(t instanceof RegExp){var n,r=t.toString();for(n=0;n<e.length;n++)if(e[n]instanceof RegExp&&e[n].toString()===r)return e;e.push(t)}else!t&&0!==t||-1!==e.indexOf(t)||e.push(t);return e},KC=function(e){var t=e.editType,n=e.colorEditType;void 0===n&&(n=t);var r={family:{valType:"string",noBlank:!0,strict:!0,editType:t},size:{valType:"number",min:1,editType:t},color:{valType:"color",editType:n},editType:t};return e.arrayOk&&(r.family.arrayOk=!0,r.size.arrayOk=!0,r.color.arrayOk=!0),r},QC={hoverlabel:{bgcolor:{valType:"color",arrayOk:!0,editType:"none"},bordercolor:{valType:"color",arrayOk:!0,editType:"none"},font:KC({arrayOk:!0,editType:"none"}),namelength:{valType:"integer",min:-1,arrayOk:!0,editType:"none"},editType:"calc"}},$C={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes"},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",dflt:"",editType:"calc"},ids:{valType:"data_array",editType:"calc"},customdata:{valType:"data_array",editType:"calc"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:QC.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"}},eS={};eS.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],eS.defaultLine="#444",eS.lightLine="#eee",eS.background="#fff",eS.borderLine="#BEC8D9",eS.lightFraction=1e3/11;var tS=KC({editType:"calc"});tS.family.dflt='"Open Sans", verdana, arial, sans-serif',tS.size.dflt=12,tS.color.dflt=eS.defaultLine;var nS={font:tS,title:{valType:"string",editType:"layoutstyle"},titlefont:KC({editType:"layoutstyle"}),autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},paper_bgcolor:{valType:"color",dflt:eS.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:eS.background,editType:"layoutstyle"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:eS.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"}},rS={},iS=WC.extendFlat,aS=WC.extendDeepAll;rS.modules={},rS.allCategories={},rS.allTypes=[],rS.subplotsRegistry={},rS.transformsRegistry={},rS.componentsRegistry={},rS.layoutArrayContainers=[],rS.layoutArrayRegexes=[],rS.traceLayoutAttributes={},rS.localeRegistry={},rS.apiMethodRegistry={},rS.register=function(e){if(!e)throw new Error("No argument passed to Plotly.register.");e&&!Array.isArray(e)&&(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];if(!n)throw new Error("Invalid module was attempted to be registered!");switch(n.moduleType){case"trace":s(n);break;case"transform":c(n);break;case"component":u(n);break;case"locale":d(n);break;case"apiMethod":var r=n.name;rS.apiMethodRegistry[r]=n.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},rS.getModule=function(e){var t=rS.modules[g(e)];return!!t&&t._module},rS.traceIs=function(e,t){if("various"===(e=g(e)))return!1;var n=rS.modules[e];return n||(e&&"area"!==e&&YC.log("Unrecognized trace type "+e+"."),n=rS.modules[$C.type.dflt]),!!n.categories[t]},rS.getTransformIndices=function(e,t){for(var n=[],r=e.transforms||[],i=0;i<r.length;i++)r[i].type===t&&n.push(i);return n},rS.hasTransform=function(e,t){for(var n=e.transforms||[],r=0;r<n.length;r++)if(n[r].type===t)return!0;return!1},rS.getComponentMethod=function(e,t){var n=rS.componentsRegistry[e];return n?n[t]||ZC:ZC},rS.call=function(){var e=arguments[0],t=[].slice.call(arguments,1);return rS.apiMethodRegistry[e].apply(null,t)};var oS=function(e){for(var t,n,r=rS.layoutArrayContainers,i=rS.layoutArrayRegexes,a=e.split("[")[0],o=0;o<i.length;o++)if((n=e.match(i[o]))&&0===n.index){t=n[0];break}if(t||(t=r[r.indexOf(a)]),!t)return!1;var s=e.substr(t.length);return s?!!(n=s.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:t,index:Number(n[1]),property:n[3]||""}:{array:t,index:"",property:""}},sS=BC.isArrayOrTypedArray,lS=function(e,t){if(SC(t))t=String(t);else if("string"!==typeof t||"[-1]"===t.substr(t.length-4))throw"bad property string";for(var n,r,i,a=0,o=t.split(".");a<o.length;){if(n=String(o[a]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(n[1])o[a]=n[1];else{if(0!==a)throw"bad property string";o.splice(0,1)}for(r=n[2].substr(1,n[2].length-2).split("]["),i=0;i<r.length;i++)a++,o.splice(a,0,Number(r[i]))}a++}return"object"!==typeof e?M(e,t,o):{set:_(e,o,t),get:y(e,o),astr:t,parts:o,obj:e}},uS=/(^|\.)((domain|range)(\.[xy])?|args|parallels)$/,cS=/(^|\.)args\[/,dS={};dS.counter=function(e,t,n){var r=(t||"")+(n?"":"$");return"xy"===e?new RegExp("^x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+r):new RegExp("^"+e+"([2-9]|[1-9][0-9]+)?"+r)};var fS={},hS=(Object.keys(RC),dS.counter),pS=jC.DESELECTDIM,mS=EC.wrap180,gS=BC.isArrayOrTypedArray;fS.valObjectMeta={data_array:{coerceFunction:function(e,t,n){gS(e)?t.set(e):void 0!==n&&t.set(n)}},enumerated:{coerceFunction:function(e,t,n,r){r.coerceNumber&&(e=+e),-1===r.values.indexOf(e)?t.set(n):t.set(e)},validateFunction:function(e,t){t.coerceNumber&&(e=+e);for(var n=t.values,r=0;r<n.length;r++){var i=String(n[r]);if("/"===i.charAt(0)&&"/"===i.charAt(i.length-1)){if(new RegExp(i.substr(1,i.length-2)).test(e))return!0}else if(e===n[r])return!0}return!1}},boolean:{coerceFunction:function(e,t,n){!0===e||!1===e?t.set(e):t.set(n)}},number:{coerceFunction:function(e,t,n,r){!SC(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},integer:{coerceFunction:function(e,t,n,r){e%1||!SC(e)||void 0!==r.min&&e<r.min||void 0!==r.max&&e>r.max?t.set(n):t.set(+e)}},string:{coerceFunction:function(e,t,n,r){if("string"!==typeof e){var i="number"===typeof e;!0!==r.strict&&i?t.set(String(e)):t.set(n)}else r.noBlank&&!e?t.set(n):t.set(e)}},color:{coerceFunction:function(e,t,n){zC(e).isValid()?t.set(e):t.set(n)}},colorlist:{coerceFunction:function(e,t,n){function r(e){return zC(e).isValid()}Array.isArray(e)&&e.length&&e.every(r)?t.set(e):t.set(n)}},colorscale:{coerceFunction:function(e,t,n){t.set(FC(e,n))}},angle:{coerceFunction:function(e,t,n){"auto"===e?t.set("auto"):SC(e)?t.set(mS(+e)):t.set(n)}},subplotid:{coerceFunction:function(e,t,n){if("string"===typeof e&&hS(n).test(e))return void t.set(e);t.set(n)},validateFunction:function(e,t){var n=t.dflt;return e===n||"string"===typeof e&&!!hS(n).test(e)}},flaglist:{coerceFunction:function(e,t,n,r){if("string"!==typeof e)return void t.set(n);if(-1!==(r.extras||[]).indexOf(e))return void t.set(e);for(var i=e.split("+"),a=0;a<i.length;){var o=i[a];-1===r.flags.indexOf(o)||i.indexOf(o)<a?i.splice(a,1):a++}i.length?t.set(i.join("+")):t.set(n)}},any:{coerceFunction:function(e,t,n){void 0===e?t.set(n):t.set(e)}},info_array:{coerceFunction:function(e,t,n,r){function i(e,t,n){var r,i={set:function(e){r=e}};return void 0===n&&(n=t.dflt),fS.valObjectMeta[t.valType].coerceFunction(e,i,n,t),r}var a=2===r.dimensions;if(!Array.isArray(e))return void t.set(n);var o,s,l,u,c=r.items,d=[],f=Array.isArray(c),h=f?c.length:e.length;if(n=Array.isArray(n)?n:[],a)for(o=0;o<h;o++){d[o]=[];var p=Array.isArray(e[o])?e[o]:[];for(l=f?c[o].length:p.length,s=0;s<l;s++)void 0!==(u=i(p[s],f?c[o][s]:c,(n[o]||[])[s]))&&(d[o][s]=u)}else for(o=0;o<h;o++)void 0!==(u=i(e[o],f?c[o]:c,n[o]))&&(d[o]=u);t.set(d)},validateFunction:function(e,t){if(!Array.isArray(e))return!1;var n=t.items,r=Array.isArray(n),i=2===t.dimensions;if(!t.freeLength&&e.length!==n.length)return!1;for(var a=0;a<e.length;a++)if(i){if(!Array.isArray(e[a])||!t.freeLength&&e[a].length!==n[a].length)return!1;for(var o=0;o<e[a].length;o++)if(!fS.validate(e[a][o],r?n[a][o]:n))return!1}else if(!fS.validate(e[a],r?n[a]:n))return!1;return!0}}},fS.coerce=function(e,t,n,r,i){var a=lS(n,r).get(),o=lS(e,r),s=lS(t,r),l=o.get();return void 0===i&&(i=a.dflt),a.arrayOk&&gS(l)?(s.set(l),l):(fS.valObjectMeta[a.valType].coerceFunction(l,s,i,a),s.get())},fS.coerce2=function(e,t,n,r,i){var a=lS(e,r),o=fS.coerce(e,t,n,r,i),s=a.get();return void 0!==s&&null!==s&&o},fS.coerceFont=function(e,t,n){var r={};return n=n||{},r.family=e(t+".family",n.family),r.size=e(t+".size",n.size),r.color=e(t+".color",n.color),r},fS.coerceHoverinfo=function(e,t,n){var r,i=t._module.attributes,a=i.hoverinfo?{hoverinfo:i.hoverinfo}:$C,o=a.hoverinfo;if(1===n._dataLength){var s="all"===o.dflt?o.flags.slice():o.dflt.split("+");s.splice(s.indexOf("name"),1),r=s.join("+")}return fS.coerce(e,t,a,"hoverinfo",r)},fS.coerceSelectionMarkerOpacity=function(e,t){if(e.marker){var n=e.marker.opacity;if(void 0!==n){var r,i;gS(n)||e.selected||e.unselected||(r=n,i=pS*n),t("selected.marker.opacity",r),t("unselected.marker.opacity",i)}}},fS.validate=function(e,t){var n=fS.valObjectMeta[t.valType];if(t.arrayOk&&gS(e))return!0;if(n.validateFunction)return n.validateFunction(e,t);var r={},i=r,a={set:function(e){i=e}};return n.coerceFunction(e,a,r,t),i!==r};var yS=function(e,t){var n=e%t;return n<0?n+t:n},vS={},_S=AC.BADNUM,bS=AC.ONEDAY,xS=AC.ONEHOUR,wS=AC.ONEMIN,kS=AC.ONESEC,TS=AC.EPOCHJD,MS=CC.time.format.utc,AS=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,CS=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d:?\d\d)?)?)?)?)?\s*$/m,SS=(new Date).getFullYear()-70;vS.dateTick0=function(e,t){return A(e)?t?rS.getComponentMethod("calendars","CANONICAL_SUNDAY")[e]:rS.getComponentMethod("calendars","CANONICAL_TICK")[e]:t?"2000-01-02":"2000-01-01"},vS.dfltRange=function(e){return A(e)?rS.getComponentMethod("calendars","DFLTRANGE")[e]:["2000-01-01","2001-01-01"]},vS.isJSDate=function(e){return"object"===typeof e&&null!==e&&"function"===typeof e.getTime};var ES,PS;vS.dateTime2ms=function(e,t){if(vS.isJSDate(e))return e=Number(e)-e.getTimezoneOffset()*wS,e>=ES&&e<=PS?e:_S;if("string"!==typeof e&&"number"!==typeof e)return _S;e=String(e);var n=A(t),r=e.charAt(0);!n||"G"!==r&&"g"!==r||(e=e.substr(1),t="");var i=n&&"chinese"===t.substr(0,7),a=e.match(i?CS:AS);if(!a)return _S;var o=a[1],s=a[3]||"1",l=Number(a[5]||1),u=Number(a[7]||0),c=Number(a[9]||0),d=Number(a[11]||0);if(n){if(2===o.length)return _S;o=Number(o);var f;try{var h=rS.getComponentMethod("calendars","getCal")(t);if(i){var p="i"===s.charAt(s.length-1);s=parseInt(s,10),f=h.newDate(o,h.toMonthIndex(o,s,p),l)}else f=h.newDate(o,Number(s),l)}catch(e){return _S}return f?(f.toJD()-TS)*bS+u*xS+c*wS+d*kS:_S}o=2===o.length?(Number(o)+2e3-SS)%100+SS:Number(o),s-=1;var m=new Date(Date.UTC(2e3,s,l,u,c));return m.setUTCFullYear(o),m.getUTCMonth()!==s?_S:m.getUTCDate()!==l?_S:m.getTime()+d*kS},ES=vS.MIN_MS=vS.dateTime2ms("-9999"),PS=vS.MAX_MS=vS.dateTime2ms("9999-12-31 23:59:59.9999"),vS.isDateTime=function(e,t){return vS.dateTime2ms(e,t)!==_S};var IS=90*bS,LS=3*xS,OS=5*wS;vS.ms2DateTime=function(e,t,n){if("number"!==typeof e||!(e>=ES&&e<=PS))return _S;t||(t=0);var r,i,a,o,s,l,u=Math.floor(10*yS(e+.05,1)),c=Math.round(e-u/10);if(A(n)){var d=Math.floor(c/bS)+TS,f=Math.floor(yS(e,bS));try{r=rS.getComponentMethod("calendars","getCal")(n).fromJD(d).formatDate("yyyy-mm-dd")}catch(e){r=MS("G%Y-%m-%d")(new Date(c))}if("-"===r.charAt(0))for(;r.length<11;)r="-0"+r.substr(1);else for(;r.length<10;)r="0"+r;i=t<IS?Math.floor(f/xS):0,a=t<IS?Math.floor(f%xS/wS):0,o=t<LS?Math.floor(f%wS/kS):0,s=t<OS?f%kS*10+u:0}else l=new Date(c),r=MS("%Y-%m-%d")(l),i=t<IS?l.getUTCHours():0,a=t<IS?l.getUTCMinutes():0,o=t<LS?l.getUTCSeconds():0,s=t<OS?10*l.getUTCMilliseconds()+u:0;return S(r,i,a,o,s)},vS.ms2DateTimeLocal=function(e){if(!(e>=ES+bS&&e<=PS-bS))return _S;var t=Math.floor(10*yS(e+.05,1)),n=new Date(Math.round(e-t/10));return S(CC.time.format("%Y-%m-%d")(n),n.getHours(),n.getMinutes(),n.getSeconds(),10*n.getUTCMilliseconds()+t)},vS.cleanDate=function(e,t,n){if(vS.isJSDate(e)||"number"===typeof e){if(A(n))return YC.error("JS Dates and milliseconds are incompatible with world calendars",e),t;if(!(e=vS.ms2DateTimeLocal(+e))&&void 0!==t)return t}else if(!vS.isDateTime(e,n))return YC.error("unrecognized date",e),t;return e};var zS=/%\d?f/g,RS=[59,59.9,59.99,59.999,59.9999];vS.formatDate=function(e,t,n,r,i,a){if(i=A(i)&&i,!t)if("y"===n)t=a.year;else if("m"===n)t=a.month;else{if("d"!==n)return P(e,n)+"\n"+E(a.dayMonthYear,e,r,i);t=a.dayMonth+"\n"+a.year}return E(t,e,r,i)};var DS=3*bS;vS.incrementMonth=function(e,t,n){n=A(n)&&n;var r=yS(e,bS);if(e=Math.round(e-r),n)try{var i=Math.round(e/bS)+TS,a=rS.getComponentMethod("calendars","getCal")(n),o=a.fromJD(i);return t%12?a.add(o,t,"m"):a.add(o,t/12,"y"),(o.toJD()-TS)*bS+r}catch(t){YC.error("invalid ms "+e+" in calendar "+n)}var s=new Date(e+DS);return s.setUTCMonth(s.getUTCMonth()+t)+r-DS},vS.findExactDates=function(e,t){for(var n,r,i=0,a=0,o=0,s=0,l=A(t)&&rS.getComponentMethod("calendars","getCal")(t),u=0;u<e.length;u++)if(r=e[u],SC(r)){if(!(r%bS))if(l)try{n=l.fromJD(r/bS+TS),1===n.day()?1===n.month()?i++:a++:o++}catch(e){}else n=new Date(r),1===n.getUTCDate()?0===n.getUTCMonth()?i++:a++:o++}else s++;a+=i,o+=a;var c=e.length-s;return{exactYears:i/c,exactMonths:a/c,exactDays:o/c}};var NS=function(e,t){return Array.isArray(e)||(e=[]),e.length=t,e},FS=function(e){for(var t={},n=[],r=0,i=0;i<e.length;i++){var a=e[i];1!==t[a]&&(t[a]=1,n[r++]=a)}return n},jS=function(e){for(var t=O(e)?L:I,n=[],r=0;r<e.length;r++){var i=e[r];t(i)&&n.push(i)}return n},BS={};BS.segmentsIntersect=z,BS.segmentDistance=function(e,t,n,r,i,a,o,s){if(z(e,t,n,r,i,a,o,s))return 0;var l=n-e,u=r-t,c=o-i,d=s-a,f=l*l+u*u,h=c*c+d*d,p=Math.min(R(l,u,f,i-e,a-t),R(l,u,f,o-e,s-t),R(c,d,h,e-i,t-a),R(c,d,h,n-i,r-a));return Math.sqrt(p)};var US,VS,HS;BS.getTextLocation=function(e,t,n,r){if(e===VS&&r===HS||(US={},VS=e,HS=r),US[n])return US[n];var i=e.getPointAtLength(yS(n-r/2,t)),a=e.getPointAtLength(yS(n+r/2,t)),o=Math.atan((a.y-i.y)/(a.x-i.x)),s=e.getPointAtLength(yS(n,t)),l=(4*s.x+i.x+a.x)/6,u=(4*s.y+i.y+a.y)/6,c={x:l,y:u,theta:o};return US[n]=c,c},BS.clearLocationCache=function(){VS=null},BS.getVisibleSegment=function(e,t,n){function r(t){var n=e.getPointAtLength(t);0===t?i=n:t===d&&(a=n);var r=n.x<o?o-n.x:n.x>s?n.x-s:0,c=n.y<l?l-n.y:n.y>u?n.y-u:0;return Math.sqrt(r*r+c*c)}for(var i,a,o=t.left,s=t.right,l=t.top,u=t.bottom,c=0,d=e.getTotalLength(),f=d,h=r(c);h;){if((c+=h+n)>f)return;h=r(c)}for(h=r(f);h;){if(f-=h+n,c>f)return;h=r(f)}return{min:c,max:f,len:f-c,total:d,isClosed:0===c&&f===d&&Math.abs(i.x-a.x)<.1&&Math.abs(i.y-a.y)<.1}},BS.findPointOnPath=function(e,t,n,r){r=r||{};for(var i,a,o,s=r.pathLength||e.getTotalLength(),l=r.tolerance||.001,u=r.iterationLimit||30,c=e.getPointAtLength(0)[n]>e.getPointAtLength(s)[n]?-1:1,d=0,f=0,h=s;d<u;){if(i=(f+h)/2,a=e.getPointAtLength(i),o=a[n]-t,Math.abs(o)<l)return a;c*o>0?h=i:f=i,d++}return a};var WS=function(e){var t;if("string"===typeof e){if(null===(t=document.getElementById(e)))throw new Error("No DOM element with id '"+e+"' exists on the page.");return t}if(null===e||void 0===e)throw new Error("DOM element provided is null or undefined");return e},qS=function(e){return e},GS=/^\w*$/,YS=function(e,t,n,r){n=n||"name",r=r||"value";var i,a,o={};a=t&&t.length?lS(e,t).get():e,t=t||"",a=a||[];var s={};for(i=0;i<a.length;i++)s[a[i][n]]=i;var l=GS.test(r),u={set:function(e,t){var i=null===t?4:0,c=s[e];void 0===c?(i|=3,c=a.length,s[e]=c):t!==(l?a[c][r]:lS(a[c],r).get())&&(i|=2);var d=a[c]=a[c]||{};return d[n]=e,l?d[r]=t:lS(d,r).set(t),null!==t&&(i&=-5),o[c]=o[c]|i,u},get:function(e){var t=s[e];return void 0===t?void 0:l?a[t][r]:lS(a[t],r).get()},rename:function(e,t){var r=s[e];return void 0===r?u:(o[r]=1|o[r],s[t]=r,delete s[e],a[r][n]=t,u)},remove:function(e){var t=s[e];if(void 0===t)return u;var c=a[t];if(Object.keys(c).length>2)return o[t]=2|o[t],u.set(e,null);if(l){for(i=t;i<a.length;i++)o[i]=3|o[i];for(i=t;i<a.length;i++)s[a[i][n]]--;a.splice(t,1),delete s[e]}else lS(c,r).set(null),o[t]=6|o[t];return u},constructUpdate:function(){for(var e,i,s={},u=Object.keys(o),c=0;c<u.length;c++)i=u[c],e=t+"["+i+"]",a[i]?(1&o[i]&&(s[e+"."+n]=a[i][n]),2&o[i]&&(s[e+"."+r]=l?4&o[i]?null:a[i][r]:4&o[i]?null:lS(a[i],r).get())):s[e]=null;return s}};return u},XS=function(e,t){for(var n=e._context.locale,r=0;r<2;r++){for(var i=e._context.locales,a=0;a<2;a++){var o=(i[n]||{}).dictionary;if(o){var s=o[t];if(s)return s}i=rS.localeRegistry}var l=n.split("-")[0];if(l===n)break;n=l}return t},ZS={};ZS.init2dArray=function(e,t){for(var n=new Array(e),r=0;r<e;r++)n[r]=new Array(t);return n},ZS.transposeRagged=function(e){var t,n,r=0,i=e.length;for(t=0;t<i;t++)r=Math.max(r,e[t].length);var a=new Array(r);for(t=0;t<r;t++)for(a[t]=new Array(i),n=0;n<i;n++)a[t][n]=e[n][t];return a},ZS.dot=function(e,t){if(!e.length||!t.length||e.length!==t.length)return null;var n,r,i=e.length;if(e[0].length)for(n=new Array(i),r=0;r<i;r++)n[r]=ZS.dot(e[r],t);else if(t[0].length){var a=ZS.transposeRagged(t);for(n=new Array(a.length),r=0;r<a.length;r++)n[r]=ZS.dot(e,a[r])}else for(n=0,r=0;r<i;r++)n+=e[r]*t[r];return n},ZS.translationMatrix=function(e,t){return[[1,0,e],[0,1,t],[0,0,1]]},ZS.rotationMatrix=function(e){var t=e*Math.PI/180;return[[Math.cos(t),-Math.sin(t),0],[Math.sin(t),Math.cos(t),0],[0,0,1]]},ZS.rotationXYMatrix=function(e,t,n){return ZS.dot(ZS.dot(ZS.translationMatrix(t,n),ZS.rotationMatrix(e)),ZS.translationMatrix(-t,-n))},ZS.apply2DTransform=function(e){return function(){var t=arguments;3===t.length&&(t=t[0]);var n=1===arguments.length?t[0]:[t[0],t[1]];return ZS.dot(e,[n[0],n[1],1]).slice(0,2)}},ZS.apply2DTransform2=function(e){var t=ZS.apply2DTransform(e);return function(e){return t(e.slice(0,2)).concat(t(e.slice(2,4)))}};var JS=[],KS=function(e,t){function n(e){e.duration(700).style("opacity",0).each("end",function(e){var t=JS.indexOf(e);-1!==t&&JS.splice(t,1),CC.select(this).remove()})}if(-1===JS.indexOf(e)){JS.push(e);var r=1e3;SC(t)?r=t:"long"===t&&(r=3e3);var i=CC.select("body").selectAll(".plotly-notifier").data([0]);i.enter().append("div").classed("plotly-notifier",!0);i.selectAll(".notifier-note").data(JS).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(e){var t=CC.select(this);t.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){t.transition().call(n)});for(var i=t.append("p"),a=e.split(/<br\s*\/?>/g),o=0;o<a.length;o++)o&&i.append("br"),i.append("span").text(a[o]);t.transition().duration(700).style("opacity",1).transition().delay(r).call(n)})}},QS=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,$S=/^[^\.\[\]]+$/,eE=function(e,t){for(;t;){var n=e.match(QS);if(n)e=n[1];else{if(!e.match($S))throw new Error("bad relativeAttr call:"+[e,t]);e=""}if("^"!==t.charAt(0))break;t=t.slice(1)}return e&&"["!==t.charAt(0)?e+"."+t:e+t},tE=BC.isArrayOrTypedArray,nE=function e(t,n){for(var r in n){var i=n[r],a=t[r];if(a!==i)if("_"===r.charAt(0)||"function"===typeof i){if(r in t)continue;t[r]=i}else if(tE(i)&&tE(a)&&HC(i[0])){if("customdata"===r||"ids"===r)continue;for(var o=Math.min(i.length,a.length),s=0;s<o;s++)a[s]!==i[s]&&HC(i[s])&&HC(a[s])&&e(a[s],i[s])}else HC(i)&&HC(a)&&(e(a,i),Object.keys(a).length||delete t[r])}},rE={};rE.findBin=function(e,t,n){if(SC(t.start))return n?Math.ceil((e-t.start)/t.size-1e-9)-1:Math.floor((e-t.start)/t.size+1e-9);var r,i,a=0,o=t.length,s=0,l=o>1?(t[o-1]-t[0])/(o-1):1;for(i=l>=0?n?D:N:n?j:F,e+=1e-9*l*(n?-1:1)*(l>=0?1:-1);a<o&&s++<100;)r=Math.floor((a+o)/2),i(t[r],e)?a=r+1:o=r;return s>90&&YC.log("Long binary search..."),a-1},rE.sorterAsc=function(e,t){return e-t},rE.sorterDes=function(e,t){return t-e},rE.distinctVals=function(e){var t=e.slice();t.sort(rE.sorterAsc);for(var n=t.length-1,r=t[n]-t[0]||1,i=r/(n||1)/1e4,a=[t[0]],o=0;o<n;o++)t[o+1]>t[o]+i&&(r=Math.min(r,t[o+1]-t[o]),a.push(t[o+1]));return{vals:a,minDiff:r}},rE.roundUp=function(e,t,n){for(var r,i=0,a=t.length-1,o=0,s=n?0:1,l=n?1:0,u=n?Math.ceil:Math.floor;i<a&&o++<100;)r=u((i+a)/2),t[r]<=e?i=r+s:a=r-l;return t[i]};var iE={},aE=BC.isArrayOrTypedArray;iE.aggNums=function(e,t,n,r){var i,a;if((!r||r>n.length)&&(r=n.length),SC(t)||(t=!1),aE(n[0])){for(a=new Array(r),i=0;i<r;i++)a[i]=iE.aggNums(e,t,n[i]);n=a}for(i=0;i<r;i++)SC(t)?SC(n[i])&&(t=e(+t,+n[i])):t=n[i];return t},iE.len=function(e){return iE.aggNums(function(e){return e+1},0,e)},iE.mean=function(e,t){return t||(t=iE.len(e)),iE.aggNums(function(e,t){return e+t},0,e)/t},iE.variance=function(e,t,n){return t||(t=iE.len(e)),SC(n)||(n=iE.mean(e,t)),iE.aggNums(function(e,t){return e+Math.pow(t-n,2)},0,e)/t},iE.stdev=function(e,t,n){return Math.sqrt(iE.variance(e,t,n))},iE.interp=function(e,t){if(!SC(t))throw"n should be a finite number";if((t=t*e.length-.5)<0)return e[0];if(t>e.length-1)return e[e.length-1];var n=t%1;return n*e[Math.ceil(t)]+(1-n)*e[Math.floor(t)]};var oE={},sE={};oE.throttle=function(e,t,n){function r(){n(),i.ts=Date.now(),i.onDone&&(i.onDone(),i.onDone=null)}var i=sE[e],a=Date.now();if(!i){for(var o in sE)sE[o].ts<a-6e4&&delete sE[o];i=sE[e]={ts:0,timer:null}}if(B(i),a>i.ts+t)return void r();i.timer=setTimeout(function(){r(),i.timer=null},t)},oE.done=function(e){var t=sE[e];return t&&t.timer?new Promise(function(e){var n=t.onDone;t.onDone=function(){n&&n(),e(),t.onDone=null}}):Promise.resolve()},oE.clear=function(e){if(e)B(sE[e]),delete sE[e];else for(var t in sE)oE.clear(t)};var lE=function(e,t){if(e>0)return Math.log(e)/Math.LN10;var n=Math.log(Math.min(t[0],t[1]))/Math.LN10;return SC(n)||(n=Math.log(Math.max(t[0],t[1]))/Math.LN10-6),n},uE={},cE=AC.FP_SAFE,dE=AC.BADNUM,fE=uE={};fE.nestedProperty=lS,fE.keyedContainer=YS,fE.relativeAttr=eE,fE.isPlainObject=HC,fE.mod=yS,fE.toLogRange=lE,fE.relinkPrivateKeys=nE,fE.ensureArray=NS,fE.isTypedArray=BC.isTypedArray,fE.isArrayOrTypedArray=BC.isArrayOrTypedArray,fE.valObjectMeta=fS.valObjectMeta,fE.coerce=fS.coerce,fE.coerce2=fS.coerce2,fE.coerceFont=fS.coerceFont,fE.coerceHoverinfo=fS.coerceHoverinfo,fE.coerceSelectionMarkerOpacity=fS.coerceSelectionMarkerOpacity,fE.validate=fS.validate,fE.dateTime2ms=vS.dateTime2ms,fE.isDateTime=vS.isDateTime,fE.ms2DateTime=vS.ms2DateTime,fE.ms2DateTimeLocal=vS.ms2DateTimeLocal,fE.cleanDate=vS.cleanDate,fE.isJSDate=vS.isJSDate,fE.formatDate=vS.formatDate,fE.incrementMonth=vS.incrementMonth,fE.dateTick0=vS.dateTick0,fE.dfltRange=vS.dfltRange,fE.findExactDates=vS.findExactDates,fE.MIN_MS=vS.MIN_MS,fE.MAX_MS=vS.MAX_MS,fE.findBin=rE.findBin,fE.sorterAsc=rE.sorterAsc,fE.sorterDes=rE.sorterDes,fE.distinctVals=rE.distinctVals,fE.roundUp=rE.roundUp,fE.aggNums=iE.aggNums,fE.len=iE.len,fE.mean=iE.mean,fE.variance=iE.variance,fE.stdev=iE.stdev,fE.interp=iE.interp,fE.init2dArray=ZS.init2dArray,fE.transposeRagged=ZS.transposeRagged,fE.dot=ZS.dot,fE.translationMatrix=ZS.translationMatrix,fE.rotationMatrix=ZS.rotationMatrix,fE.rotationXYMatrix=ZS.rotationXYMatrix,fE.apply2DTransform=ZS.apply2DTransform,fE.apply2DTransform2=ZS.apply2DTransform2,fE.deg2rad=EC.deg2rad,fE.rad2deg=EC.rad2deg,fE.wrap360=EC.wrap360,fE.wrap180=EC.wrap180,fE.segmentsIntersect=BS.segmentsIntersect,fE.segmentDistance=BS.segmentDistance,fE.getTextLocation=BS.getTextLocation,fE.clearLocationCache=BS.clearLocationCache,fE.getVisibleSegment=BS.getVisibleSegment,fE.findPointOnPath=BS.findPointOnPath,fE.extendFlat=WC.extendFlat,fE.extendDeep=WC.extendDeep,fE.extendDeepAll=WC.extendDeepAll,fE.extendDeepNoArrays=WC.extendDeepNoArrays,fE.log=YC.log,fE.warn=YC.warn,fE.error=YC.error,fE.counterRegex=dS.counter,fE.throttle=oE.throttle,fE.throttleDone=oE.done,fE.clearThrottle=oE.clear,fE.getGraphDiv=WS,fE._=XS,fE.notifier=KS,fE.filterUnique=FS,fE.filterVisible=jS,fE.pushUnique=JC,fE.cleanNumber=OC,fE.ensureNumber=function(e){return SC(e)?(e=Number(e),e<-cE||e>cE?dE:SC(e)?Number(e):dE):dE},fE.noop=ZC,fE.identity=qS,fE.swapAttrs=function(e,t,n,r){n||(n="x"),r||(r="y");for(var i=0;i<t.length;i++){var a=t[i],o=fE.nestedProperty(e,a.replace("?",n)),s=fE.nestedProperty(e,a.replace("?",r)),l=o.get();o.set(s.get()),s.set(l)}},fE.raiseToTop=function(e){e.parentNode.appendChild(e)},fE.cancelTransition=function(e){return e.transition().duration(0)},fE.constrain=function(e,t,n){return t>n?Math.max(n,Math.min(t,e)):Math.max(t,Math.min(n,e))},fE.bBoxIntersect=function(e,t,n){return n=n||0,e.left<=t.right+n&&t.left<=e.right+n&&e.top<=t.bottom+n&&t.top<=e.bottom+n},fE.simpleMap=function(e,t,n,r){for(var i=e.length,a=new Array(i),o=0;o<i;o++)a[o]=t(e[o],n,r);return a},fE.randstr=function e(t,n,r){if(r||(r=16),void 0===n&&(n=24),n<=0)return"0";var i,a,o,s=Math.log(Math.pow(2,n))/Math.log(r),l="";for(i=2;s===1/0;i*=2)s=Math.log(Math.pow(2,n/i))/Math.log(r)*i;var u=s-Math.floor(s);for(i=0;i<Math.floor(s);i++)o=Math.floor(Math.random()*r).toString(r),l=o+l;u&&(a=Math.pow(r,u),o=Math.floor(Math.random()*a).toString(r),l=o+l);var c=parseInt(l,r);return t&&t.indexOf(l)>-1||c!==1/0&&c>=Math.pow(2,n)?e(t,n,r):l},fE.OptionControl=function(e,t){e||(e={}),t||(t="opt");var n={};return n.optionList=[],n._newoption=function(r){r[t]=e,n[r.name]=r,n.optionList.push(r)},n["_"+t]=e,n},fE.smooth=function(e,t){if((t=Math.round(t)||0)<2)return e;var n,r,i,a,o=e.length,s=2*o,l=2*t-1,u=new Array(l),c=new Array(o);for(n=0;n<l;n++)u[n]=(1-Math.cos(Math.PI*(n+1)/t))/(2*t);for(n=0;n<o;n++){for(a=0,r=0;r<l;r++)i=n+r+1-t,i<-o?i-=s*Math.round(i/s):i>=s&&(i-=s*Math.floor(i/s)),i<0?i=-1-i:i>=o&&(i=s-1-i),a+=e[i]*u[r];c[n]=a}return c},fE.syncOrAsync=function(e,t,n){function r(){return fE.syncOrAsync(e,t,n)}for(var i,a;e.length;)if(a=e.splice(0,1)[0],(i=a(t))&&i.then)return i.then(r).then(void 0,fE.promiseError);return n&&n(t)},fE.stripTrailingSlash=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e},fE.noneOrAll=function(e,t,n){if(e){var r,i,a=!1,o=!0;for(r=0;r<n.length;r++)i=e[n[r]],void 0!==i&&null!==i?a=!0:o=!1;if(a&&!o)for(r=0;r<n.length;r++)e[n[r]]=t[n[r]]}},fE.mergeArray=function(e,t,n){if(fE.isArrayOrTypedArray(e))for(var r=Math.min(e.length,t.length),i=0;i<r;i++)t[i][n]=e[i]},fE.fillArray=function(e,t,n,r){if(r=r||fE.identity,fE.isArrayOrTypedArray(e))for(var i=0;i<t.length;i++)t[i][n]=r(e[i])},fE.castOption=function(e,t,n,r){r=r||fE.identity;var i=fE.nestedProperty(e,n).get();return fE.isArrayOrTypedArray(i)?r(Array.isArray(t)&&fE.isArrayOrTypedArray(i[t[0]])?i[t[0]][t[1]]:i[t]):i},fE.extractOption=function(e,t,n,r){if(n in e)return e[n];var i=fE.nestedProperty(t,r).get();return Array.isArray(i)?void 0:i},fE.tagSelected=function(e,t,n){var r,i=t.selectedpoints,a=t._indexToPoints;if(a){r={};for(var o in a)for(var s=a[o],l=0;l<s.length;l++)r[s[l]]=o}for(var u=0;u<i.length;u++){var c=i[u];if(function(e){return SC(e)&&e>=0&&e%1===0}(c)){var d=r?r[c]:c,f=n?n[d]:d;(function(t){return void 0!==t&&t<e.length})(f)&&(e[f].selected=1)}}},fE.getTargetArray=function(e,t){var n=t.target;if("string"===typeof n&&n){var r=fE.nestedProperty(e,n).get();return!!Array.isArray(r)&&r}return!!Array.isArray(n)&&n},fE.minExtend=function(e,t){var n={};"object"!==typeof t&&(t={});var r,i,a,o=Object.keys(e);for(r=0;r<o.length;r++)i=o[r],a=e[i],"_"!==i.charAt(0)&&"function"!==typeof a&&("module"===i?n[i]=a:Array.isArray(a)?n[i]=a.slice(0,3):n[i]=a&&"object"===typeof a?fE.minExtend(e[i],t[i]):a);for(o=Object.keys(t),r=0;r<o.length;r++)i=o[r],"object"===typeof(a=t[i])&&i in n&&"object"===typeof n[i]||(n[i]=a);return n},fE.titleCase=function(e){return e.charAt(0).toUpperCase()+e.substr(1)},fE.containsAny=function(e,t){for(var n=0;n<t.length;n++)if(-1!==e.indexOf(t[n]))return!0;return!1},fE.isPlotDiv=function(e){var t=CC.select(e);return t.node()instanceof HTMLElement&&t.size()&&t.classed("js-plotly-plot")},fE.removeElement=function(e){var t=e&&e.parentNode;t&&t.removeChild(e)},fE.addStyleRule=function(e,t){if(!fE.styleSheet){var n=document.createElement("style");n.appendChild(document.createTextNode("")),document.head.appendChild(n),fE.styleSheet=n.sheet}var r=fE.styleSheet;r.insertRule?r.insertRule(e+"{"+t+"}",0):r.addRule?r.addRule(e,t,0):fE.warn("addStyleRule failed")},fE.isIE=function(){return"undefined"!==typeof window.navigator.msSaveBlob},fE.isD3Selection=function(e){return e&&"function"===typeof e.classed},fE.objectFromPath=function(e,t){for(var n,r=e.split("."),i=n={},a=0;a<r.length;a++){var o=r[a],s=null,l=r[a].match(/(.*)\[([0-9]+)\]/);l?(o=l[1],s=l[2],n=n[o]=[],a===r.length-1?n[s]=t:n[s]={},n=n[s]):(a===r.length-1?n[o]=t:n[o]={},n=n[o])}return i};var hE=/^([^\[\.]+)\.(.+)?/,pE=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;fE.expandObjectPaths=function(e){var t,n,r,i,a,o,s;if("object"===typeof e&&!Array.isArray(e))for(n in e)e.hasOwnProperty(n)&&((t=n.match(hE))?(i=e[n],r=t[1],delete e[n],e[r]=fE.extendDeepNoArrays(e[r]||{},fE.objectFromPath(n,fE.expandObjectPaths(i))[r])):(t=n.match(pE))?(i=e[n],r=t[1],a=parseInt(t[2]),delete e[n],e[r]=e[r]||[],"."===t[3]?(s=t[4],o=e[r][a]=e[r][a]||{},fE.extendDeepNoArrays(o,fE.objectFromPath(s,fE.expandObjectPaths(i)))):e[r][a]=fE.expandObjectPaths(i)):e[n]=fE.expandObjectPaths(e[n]));return e},fE.numSeparate=function(e,t,n){if(n||(n=!1),"string"!==typeof t||0===t.length)throw new Error("Separator string required for formatting!");"number"===typeof e&&(e=String(e));var r=/(\d+)(\d{3})/,i=t.charAt(0),a=t.charAt(1),o=e.split("."),s=o[0],l=o.length>1?i+o[1]:"";if(a&&(o.length>1||s.length>4||n))for(;r.test(s);)s=s.replace(r,"$1"+a+"$2");return s+l};var mE=/%{([^\s%{}]*)}/g,gE=/^\w*$/;fE.templateString=function(e,t){var n={};return e.replace(mE,function(e,r){return gE.test(r)?t[r]||"":(n[r]=n[r]||fE.nestedProperty(t,r).get,n[r]()||"")})};fE.subplotSort=function(e,t){for(var n=Math.min(e.length,t.length)+1,r=0,i=0,a=0;a<n;a++){var o=e.charCodeAt(a)||0,s=t.charCodeAt(a)||0,l=o>=48&&o<=57,u=s>=48&&s<=57;if(l&&(r=10*r+o-48),u&&(i=10*i+s-48),!l||!u){if(r!==i)return r-i;if(o!==s)return o-s}}return i-r};var yE=2e9;fE.seedPseudoRandom=function(){yE=2e9},fE.pseudoRandom=function(){var e=yE;return yE=(69069*yE+1)%4294967296,Math.abs(yE-e)<429496729?fE.pseudoRandom():yE/4294967296};var vE=uE.extendFlat,_E=uE.isPlainObject,bE={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","clearAxisTypes","plot","style","colorbars"]},xE={valType:"flaglist",extras:["none"],flags:["calc","calcIfAutorange","plot","legend","ticks","margins","layoutstyle","modebar","camera","arraydraw"]},wE=bE.flags.slice().concat(["clearCalc","fullReplot"]),kE=xE.flags.slice().concat("layoutReplot"),TE={traces:bE,layout:xE,traceFlags:function(){return U(wE)},layoutFlags:function(){return U(kE)},update:function(e,t){var n=t.editType;if(n&&"none"!==n)for(var r=n.split("+"),i=0;i<r.length;i++)e[r[i]]=!0},overrideAll:V},ME={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"]}}},AE={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}},CE={};CE.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"};var SE=dS.counter,EE={idRegex:{x:SE("x"),y:SE("y")},attrRegex:SE("[xy]axis"),xAxisMatch:SE("xaxis"),yAxisMatch:SE("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","maplayer","barlayer","carpetlayer","violinlayer","boxlayer","scatterlayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}},PE=CE.dash,IE=WC.extendFlat,LE={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:eS.defaultLine,editType:"ticks"},title:{valType:"string",editType:"ticks+margins"},titlefont:KC({editType:"ticks+margins"}),type:{valType:"enumerated",values:["-","linear","log","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot+margins",impliedEdits:{"^autorange":!1}}],editType:"plot+margins",impliedEdits:{autorange:!1}},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[EE.idRegex.x.toString(),EE.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],dflt:"range",editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks+margins",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks+margins"},tick0:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks+margins",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks+margins"},ticktext:{valType:"data_array",editType:"ticks+margins"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks+margins"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:eS.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks+margins"},automargin:{valType:"boolean",dflt:!1,editType:"ticks+margins"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:IE({},PE,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor"],dflt:"data",editType:"none"},tickfont:KC({editType:"ticks+margins"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks+margins"},tickprefix:{valType:"string",dflt:"",editType:"ticks+margins"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},ticksuffix:{valType:"string",dflt:"",editType:"ticks+margins"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks+margins"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks+margins"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks+margins"},tickformat:{valType:"string",dflt:"",editType:"ticks+margins"},tickformatstops:{_isLinkedToArray:"tickformatstop",dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks+margins"},{valType:"any",editType:"ticks+margins"}],editType:"ticks+margins"},value:{valType:"string",dflt:"",editType:"ticks+margins"},editType:"ticks+margins"},hoverformat:{valType:"string",dflt:"",editType:"none"},showline:{valType:"boolean",dflt:!1,editType:"layoutstyle"},linecolor:{valType:"color",dflt:eS.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:eS.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:eS.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",EE.idRegex.x.toString(),EE.idRegex.y.toString()],editType:"plot+margins"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot+margins"},overlaying:{valType:"enumerated",values:["free",EE.idRegex.x.toString(),EE.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot+margins"},{valType:"number",min:0,max:1,editType:"plot+margins"}],dflt:[0,1],editType:"plot+margins"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot+margins"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks+margins"}}},OE=WC.extendFlat,zE=TE.overrideAll,RE=zE({thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",dflt:1.02,min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",dflt:.5,min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle"},ypad:{valType:"number",min:0,dflt:10},outlinecolor:LE.linecolor,outlinewidth:LE.linewidth,bordercolor:LE.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:LE.tickmode,nticks:LE.nticks,tick0:LE.tick0,dtick:LE.dtick,tickvals:LE.tickvals,ticktext:LE.ticktext,ticks:OE({},LE.ticks,{dflt:""}),ticklen:LE.ticklen,tickwidth:LE.tickwidth,tickcolor:LE.tickcolor,showticklabels:LE.showticklabels,tickfont:KC({}),tickangle:LE.tickangle,tickformat:LE.tickformat,tickformatstops:LE.tickformatstops,tickprefix:LE.tickprefix,showtickprefix:LE.showtickprefix,ticksuffix:LE.ticksuffix,showticksuffix:LE.showticksuffix,separatethousands:LE.separatethousands,exponentformat:LE.exponentformat,showexponent:LE.showexponent,title:{valType:"string"},titlefont:KC({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}},"colorbars","from-root"),DE={zauto:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{zmin:void 0,zmax:void 0}},zmin:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},zmax:{valType:"number",dflt:null,editType:"plot",impliedEdits:{zauto:!1}},colorscale:{valType:"colorscale",editType:"calc",impliedEdits:{autocolorscale:!1}},autocolorscale:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{colorscale:void 0}},reversescale:{valType:"boolean",dflt:!1,editType:"calc"},showscale:{valType:"boolean",dflt:!0,editType:"calc"}},NE=WC.extendFlat,FE=function(e,t,n){return{color:{valType:"color",arrayOk:!0,editType:t||"style"},colorscale:NE({},DE.colorscale,{}),cauto:NE({},DE.zauto,{impliedEdits:{cmin:void 0,cmax:void 0}}),cmax:NE({},DE.zmax,{editType:t||DE.zmax.editType,impliedEdits:{cauto:!1}}),cmin:NE({},DE.zmin,{editType:t||DE.zmin.editType,impliedEdits:{cauto:!1}}),autocolorscale:NE({},DE.autocolorscale,{dflt:!1===n?n:DE.autocolorscale.dflt}),reversescale:NE({},DE.reversescale,{})}},jE={},BE=jE={};BE.defaults=eS.defaults;var UE=BE.defaultLine=eS.defaultLine;BE.lightLine=eS.lightLine;var VE=BE.background=eS.background;BE.tinyRGB=function(e){var t=e.toRgb();return"rgb("+Math.round(t.r)+", "+Math.round(t.g)+", "+Math.round(t.b)+")"},BE.rgb=function(e){return BE.tinyRGB(zC(e))},BE.opacity=function(e){return e?zC(e).getAlpha():0},BE.addOpacity=function(e,t){var n=zC(e).toRgb();return"rgba("+Math.round(n.r)+", "+Math.round(n.g)+", "+Math.round(n.b)+", "+t+")"},BE.combine=function(e,t){var n=zC(e).toRgb();if(1===n.a)return zC(e).toRgbString();var r=zC(t||VE).toRgb(),i=1===r.a?r:{r:255*(1-r.a)+r.r*r.a,g:255*(1-r.a)+r.g*r.a,b:255*(1-r.a)+r.b*r.a},a={r:i.r*(1-n.a)+n.r*n.a,g:i.g*(1-n.a)+n.g*n.a,b:i.b*(1-n.a)+n.b*n.a};return zC(a).toRgbString()},BE.contrast=function(e,t,n){var r=zC(e);return 1!==r.getAlpha()&&(r=zC(BE.combine(e,VE))),(r.isDark()?t?r.lighten(t):VE:n?r.darken(n):UE).toString()},BE.stroke=function(e,t){var n=zC(t);e.style({stroke:BE.tinyRGB(n),"stroke-opacity":n.getAlpha()})},BE.fill=function(e,t){var n=zC(t);e.style({fill:BE.tinyRGB(n),"fill-opacity":n.getAlpha()})},BE.clean=function(e){if(e&&"object"===typeof e){var t,n,r,i,a=Object.keys(e);for(t=0;t<a.length;t++)if(r=a[t],i=e[r],"color"===r.substr(r.length-5))if(Array.isArray(i))for(n=0;n<i.length;n++)i[n]=W(i[n]);else e[r]=W(i);else if("colorscale"===r.substr(r.length-10)&&Array.isArray(i))for(n=0;n<i.length;n++)Array.isArray(i[n])&&(i[n][1]=W(i[n][1]));else if(Array.isArray(i)){var o=i[0];if(!Array.isArray(o)&&o&&"object"===typeof o)for(n=0;n<i.length;n++)BE.clean(i[n])}else i&&"object"===typeof i&&BE.clean(i)}};var HE=function(e){for(var t,n=e.length,r=new Array(n),i=n-1,a=0;i>=0;i--,a++)t=e[i],r[a]=[1-t[0],t[1]];return r},WE=function(e,t,n,r){var i,a;n?(i=uE.nestedProperty(e,n).get(),a=uE.nestedProperty(e._input,n).get()):(i=e,a=e._input);var o=r+"auto",s=r+"min",l=r+"max",u=i[o],c=i[s],d=i[l],f=i.colorscale;!1===u&&void 0!==c||(c=uE.aggNums(Math.min,null,t)),!1===u&&void 0!==d||(d=uE.aggNums(Math.max,null,t)),c===d&&(c-=.5,d+=.5),i[s]=c,i[l]=d,a[s]=c,a[l]=d,a[o]=!1!==u||void 0===c&&void 0===d,i.autocolorscale&&(f=c*d<0?RC.RdBu:c>=0?RC.Reds:RC.Blues,a.colorscale=f,i.reversescale&&(f=HE(f)),i.colorscale=f)},qE=function(e,t,n,r,i){var a=q(e);if(n("tickprefix")&&n("showtickprefix",a),n("ticksuffix",i.tickSuffixDflt)&&n("showticksuffix",a),n("showticklabels")){var o=i.font||{},s=t.color===e.color?t.color:o.color;if(uE.coerceFont(n,"tickfont",{family:o.family,size:o.size,color:s}),n("tickangle"),"category"!==r){var l=n("tickformat");G(e,t),l||"date"===r||(n("showexponent",a),n("exponentformat"),n("separatethousands"))}}},GE=function(e,t,n,r){var i=uE.coerce2(e,t,LE,"ticklen"),a=uE.coerce2(e,t,LE,"tickwidth"),o=uE.coerce2(e,t,LE,"tickcolor",t.color);n("ticks",r.outerTicks||i||a||o?"outside":"")||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)},YE=AC.ONEDAY,XE=function(e,t,n,r){var i="auto";"array"!==e.tickmode||"log"!==r&&"date"!==r||(e.tickmode="auto"),Array.isArray(e.tickvals)?i="array":e.dtick&&(i="linear");var a=n("tickmode",i);if("auto"===a)n("nticks");else if("linear"===a){var o="date"===r?YE:1,s=n("dtick",o);if(SC(s))t.dtick=s>0?Number(s):o;else if("string"!==typeof s)t.dtick=o;else{var l=s.charAt(0),u=s.substr(1);u=SC(u)?Number(u):0,(u<=0||!("date"===r&&"M"===l&&u===Math.round(u)||"log"===r&&"L"===l||"log"===r&&"D"===l&&(1===u||2===u)))&&(t.dtick=o)}var c="date"===r?uE.dateTick0(t.calendar):0,d=n("tick0",c);"date"===r?t.tick0=uE.cleanDate(d,c):SC(d)&&"D1"!==s&&"D2"!==s?t.tick0=Number(d):t.tick0=c}else{var f=n("tickvals");void 0===f?t.tickmode="auto":n("ticktext")}},ZE=function(e,t,n){function r(e,t){return uE.coerce(a,i,RE,e,t)}var i=t.colorbar={},a=e.colorbar||{};r("thickness","fraction"===r("thicknessmode")?30/(n.width-n.margin.l-n.margin.r):30),r("len","fraction"===r("lenmode")?1:n.height-n.margin.t-n.margin.b),r("x"),r("xanchor"),r("xpad"),r("y"),r("yanchor"),r("ypad"),uE.noneOrAll(a,i,["x","y"]),r("outlinecolor"),r("outlinewidth"),r("bordercolor"),r("borderwidth"),r("bgcolor"),XE(a,i,r,"linear");var o={outerTicks:!1,font:n.font};qE(a,i,r,"linear",o),GE(a,i,r,"linear",o),r("title",n._dfltTitle.colorbar),uE.coerceFont(r,"titlefont",n.font),r("titleside")},JE=function(e){return uE.isPlainObject(e.colorbar)},KE=function(e){return void 0!==RC[e]||NC(e)},QE=function(e,t,n,r,i){var a=i.prefix,o=i.cLetter,s=a.slice(0,a.length-1),l=a?uE.nestedProperty(e,s).get()||{}:e,u=a?uE.nestedProperty(t,s).get()||{}:t,c=l[o+"min"],d=l[o+"max"],f=l.colorscale;r(a+o+"auto",!(SC(c)&&SC(d)&&c<d)),r(a+o+"min"),r(a+o+"max");var h;void 0!==f&&(h=!KE(f)),r(a+"autocolorscale",h);var p=r(a+"colorscale");if(r(a+"reversescale")&&(u.colorscale=HE(p)),"marker.line."!==a){var m;a&&(m=JE(l)),r(a+"showscale",m)&&ZE(l,u,n)}},$E=function(e,t,n){for(var r=e.length,i=new Array(r),a=new Array(r),o=0;o<r;o++){var s=e[o];i[o]=t+s[0]*(n-t),a[o]=s[1]}return{domain:i,range:a}},eP=function(e,t){var n=t?uE.nestedProperty(e,t).get()||{}:e,r=n.color,i=!1;if(uE.isArrayOrTypedArray(r))for(var a=0;a<r.length;a++)if(SC(r[a])){i=!0;break}return uE.isPlainObject(n)&&(i||!0===n.showscale||SC(n.cmin)&&SC(n.cmax)||KE(n.colorscale)||uE.isPlainObject(n.colorbar))},tP=function(e,t){t=t||{};for(var n=e.domain,r=e.range,i=r.length,a=new Array(i),o=0;o<i;o++){var s=zC(r[o]).toRgb();a[o]=[s.r,s.g,s.b,s.a]}var l,u=CC.scale.linear().domain(n).range(a).clamp(!0),c=t.noNumericCheck,d=t.returnArray;return l=c&&d?u:c?function(e){return Y(u(e))}:d?function(e){return SC(e)?u(e):zC(e).isValid()?e:jE.defaultLine}:function(e){return SC(e)?Y(u(e)):zC(e).isValid()?e:jE.defaultLine},l.domain=u.domain,l.range=function(){return r},l},nP={};nP.scales=RC,nP.defaultScale=DC,nP.attributes=DE,nP.handleDefaults=QE,nP.calc=WE,nP.hasColorscale=eP,nP.isValidScale=KE,nP.getScale=FC,nP.flipScale=HE,nP.extractScale=$E,nP.makeColorScaleFunc=tP;var rP={circle:{n:0,f:function(e){var t=CC.round(e,2);return"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"}},square:{n:1,f:function(e){var t=CC.round(e,2);return"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"}},diamond:{n:2,f:function(e){var t=CC.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"Z"}},cross:{n:3,f:function(e){var t=CC.round(.4*e,2),n=CC.round(1.2*e,2);return"M"+n+","+t+"H"+t+"V"+n+"H-"+t+"V"+t+"H-"+n+"V-"+t+"H-"+t+"V-"+n+"H"+t+"V-"+t+"H"+n+"Z"}},x:{n:4,f:function(e){var t=CC.round(.8*e/Math.sqrt(2),2),n="l"+t+","+t,r="l"+t+",-"+t,i="l-"+t+",-"+t,a="l-"+t+","+t;return"M0,"+t+n+r+i+r+i+a+i+a+n+a+n+"Z"}},"triangle-up":{n:5,f:function(e){var t=CC.round(2*e/Math.sqrt(3),2);return"M-"+t+","+CC.round(e/2,2)+"H"+t+"L0,-"+CC.round(e,2)+"Z"}},"triangle-down":{n:6,f:function(e){var t=CC.round(2*e/Math.sqrt(3),2);return"M-"+t+",-"+CC.round(e/2,2)+"H"+t+"L0,"+CC.round(e,2)+"Z"}},"triangle-left":{n:7,f:function(e){var t=CC.round(2*e/Math.sqrt(3),2);return"M"+CC.round(e/2,2)+",-"+t+"V"+t+"L-"+CC.round(e,2)+",0Z"}},"triangle-right":{n:8,f:function(e){var t=CC.round(2*e/Math.sqrt(3),2);return"M-"+CC.round(e/2,2)+",-"+t+"V"+t+"L"+CC.round(e,2)+",0Z"}},"triangle-ne":{n:9,f:function(e){var t=CC.round(.6*e,2),n=CC.round(1.2*e,2);return"M-"+n+",-"+t+"H"+t+"V"+n+"Z"}},"triangle-se":{n:10,f:function(e){var t=CC.round(.6*e,2),n=CC.round(1.2*e,2);return"M"+t+",-"+n+"V"+t+"H-"+n+"Z"}},"triangle-sw":{n:11,f:function(e){var t=CC.round(.6*e,2),n=CC.round(1.2*e,2);return"M"+n+","+t+"H-"+t+"V-"+n+"Z"}},"triangle-nw":{n:12,f:function(e){var t=CC.round(.6*e,2),n=CC.round(1.2*e,2);return"M-"+t+","+n+"V-"+t+"H"+n+"Z"}},pentagon:{n:13,f:function(e){var t=CC.round(.951*e,2),n=CC.round(.588*e,2),r=CC.round(-e,2),i=CC.round(-.309*e,2);return"M"+t+","+i+"L"+n+","+CC.round(.809*e,2)+"H-"+n+"L-"+t+","+i+"L0,"+r+"Z"}},hexagon:{n:14,f:function(e){var t=CC.round(e,2),n=CC.round(e/2,2),r=CC.round(e*Math.sqrt(3)/2,2);return"M"+r+",-"+n+"V"+n+"L0,"+t+"L-"+r+","+n+"V-"+n+"L0,-"+t+"Z"}},hexagon2:{n:15,f:function(e){var t=CC.round(e,2),n=CC.round(e/2,2),r=CC.round(e*Math.sqrt(3)/2,2);return"M-"+n+","+r+"H"+n+"L"+t+",0L"+n+",-"+r+"H-"+n+"L-"+t+",0Z"}},octagon:{n:16,f:function(e){var t=CC.round(.924*e,2),n=CC.round(.383*e,2);return"M-"+n+",-"+t+"H"+n+"L"+t+",-"+n+"V"+n+"L"+n+","+t+"H-"+n+"L-"+t+","+n+"V-"+n+"Z"}},star:{n:17,f:function(e){var t=1.4*e,n=CC.round(.225*t,2),r=CC.round(.951*t,2),i=CC.round(.363*t,2),a=CC.round(.588*t,2),o=CC.round(-t,2),s=CC.round(-.309*t,2),l=CC.round(.118*t,2),u=CC.round(.809*t,2);return"M"+n+","+s+"H"+r+"L"+i+","+l+"L"+a+","+u+"L0,"+CC.round(.382*t,2)+"L-"+a+","+u+"L-"+i+","+l+"L-"+r+","+s+"H-"+n+"L0,"+o+"Z"}},hexagram:{n:18,f:function(e){var t=CC.round(.66*e,2),n=CC.round(.38*e,2),r=CC.round(.76*e,2);return"M-"+r+",0l-"+n+",-"+t+"h"+r+"l"+n+",-"+t+"l"+n+","+t+"h"+r+"l-"+n+","+t+"l"+n+","+t+"h-"+r+"l-"+n+","+t+"l-"+n+",-"+t+"h-"+r+"Z"}},"star-triangle-up":{n:19,f:function(e){var t=CC.round(e*Math.sqrt(3)*.8,2),n=CC.round(.8*e,2),r=CC.round(1.6*e,2),i=CC.round(4*e,2),a="A "+i+","+i+" 0 0 1 ";return"M-"+t+","+n+a+t+","+n+a+"0,-"+r+a+"-"+t+","+n+"Z"}},"star-triangle-down":{n:20,f:function(e){var t=CC.round(e*Math.sqrt(3)*.8,2),n=CC.round(.8*e,2),r=CC.round(1.6*e,2),i=CC.round(4*e,2),a="A "+i+","+i+" 0 0 1 ";return"M"+t+",-"+n+a+"-"+t+",-"+n+a+"0,"+r+a+t+",-"+n+"Z"}},"star-square":{n:21,f:function(e){var t=CC.round(1.1*e,2),n=CC.round(2*e,2),r="A "+n+","+n+" 0 0 1 ";return"M-"+t+",-"+t+r+"-"+t+","+t+r+t+","+t+r+t+",-"+t+r+"-"+t+",-"+t+"Z"}},"star-diamond":{n:22,f:function(e){var t=CC.round(1.4*e,2),n=CC.round(1.9*e,2),r="A "+n+","+n+" 0 0 1 ";return"M-"+t+",0"+r+"0,"+t+r+t+",0"+r+"0,-"+t+r+"-"+t+",0Z"}},"diamond-tall":{n:23,f:function(e){var t=CC.round(.7*e,2),n=CC.round(1.4*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},"diamond-wide":{n:24,f:function(e){var t=CC.round(1.4*e,2),n=CC.round(.7*e,2);return"M0,"+n+"L"+t+",0L0,-"+n+"L-"+t+",0Z"}},hourglass:{n:25,f:function(e){var t=CC.round(e,2);return"M"+t+","+t+"H-"+t+"L"+t+",-"+t+"H-"+t+"Z"},noDot:!0},bowtie:{n:26,f:function(e){var t=CC.round(e,2);return"M"+t+","+t+"V-"+t+"L-"+t+","+t+"V-"+t+"Z"},noDot:!0},"circle-cross":{n:27,f:function(e){var t=CC.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(e){var t=CC.round(e,2),n=CC.round(e/Math.sqrt(2),2);return"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n+"M"+t+",0A"+t+","+t+" 0 1,1 0,-"+t+"A"+t+","+t+" 0 0,1 "+t+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(e){var t=CC.round(e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(e){var t=CC.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t+"M"+t+","+t+"H-"+t+"V-"+t+"H"+t+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(e){var t=CC.round(1.3*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM0,-"+t+"V"+t+"M-"+t+",0H"+t},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(e){var t=CC.round(1.3*e,2),n=CC.round(.65*e,2);return"M"+t+",0L0,"+t+"L-"+t+",0L0,-"+t+"ZM-"+n+",-"+n+"L"+n+","+n+"M-"+n+","+n+"L"+n+",-"+n},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(e){var t=CC.round(1.4*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(e){var t=CC.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t+"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(e){var t=CC.round(1.2*e,2),n=CC.round(.85*e,2);return"M0,"+t+"V-"+t+"M"+t+",0H-"+t+"M"+n+","+n+"L-"+n+",-"+n+"M"+n+",-"+n+"L-"+n+","+n},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(e){var t=CC.round(e/2,2),n=CC.round(e,2);return"M"+t+","+n+"V-"+n+"m-"+n+",0V"+n+"M"+n+","+t+"H-"+n+"m0,-"+n+"H"+n},needLine:!0,noFill:!0},"y-up":{n:37,f:function(e){var t=CC.round(1.2*e,2),n=CC.round(1.6*e,2),r=CC.round(.8*e,2);return"M-"+t+","+r+"L0,0M"+t+","+r+"L0,0M0,-"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(e){var t=CC.round(1.2*e,2),n=CC.round(1.6*e,2),r=CC.round(.8*e,2);return"M-"+t+",-"+r+"L0,0M"+t+",-"+r+"L0,0M0,"+n+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(e){var t=CC.round(1.2*e,2),n=CC.round(1.6*e,2),r=CC.round(.8*e,2);return"M"+r+","+t+"L0,0M"+r+",-"+t+"L0,0M-"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(e){var t=CC.round(1.2*e,2),n=CC.round(1.6*e,2),r=CC.round(.8*e,2);return"M-"+r+","+t+"L0,0M-"+r+",-"+t+"L0,0M"+n+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(e){var t=CC.round(1.4*e,2);return"M"+t+",0H-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(e){var t=CC.round(1.4*e,2);return"M0,"+t+"V-"+t},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(e){var t=CC.round(e,2);return"M"+t+",-"+t+"L-"+t+","+t},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(e){var t=CC.round(e,2);return"M"+t+","+t+"L-"+t+",-"+t},needLine:!0,noDot:!0,noFill:!0}},iP={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}},aP={};aP.xmlns="http://www.w3.org/2000/xmlns/",aP.svg="http://www.w3.org/2000/svg",aP.xlink="http://www.w3.org/1999/xlink",aP.svgAttrs={xmlns:aP.svg,"xmlns:xlink":aP.xlink};var oP={entityToUnicode:{mu:"\u03bc","#956":"\u03bc",amp:"&","#28":"&",lt:"<","#60":"<",gt:">","#62":">",nbsp:"\xa0","#160":"\xa0",times:"\xd7","#215":"\xd7",plusmn:"\xb1","#177":"\xb1",deg:"\xb0","#176":"\xb0"}},sP={},lP=iP.LINE_SPACING,uP=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;sP.convertToTspans=function(e,t,n){function r(){o.empty()||(s=e.attr("class")+"-math",o.select("svg."+s).remove()),e.text("").style("white-space","pre"),ee(e.node(),i)&&e.style("pointer-events","all"),sP.positionText(e),n&&n.call(e)}var i=e.text(),a=!e.attr("data-notex")&&"undefined"!==typeof MathJax&&i.match(uP),o=CC.select(e.node().parentNode);if(!o.empty()){var s=e.attr("class")?e.attr("class").split(" ")[0]:"text";return s+="-math",o.selectAll("svg."+s).remove(),o.selectAll("g."+s+"-group").remove(),e.style("display",null).attr({"data-unformatted":i,"data-math":"N"}),a?(t&&t._promises||[]).push(new Promise(function(t){e.style("display","none");var l=parseInt(e.node().style.fontSize,10);J(a[2],{fontSize:l},function(a,u,c){o.selectAll("svg."+s).remove(),o.selectAll("g."+s+"-group").remove();var d=a&&a.select("svg");if(!d||!d.node())return r(),void t();var f=o.append("g").classed(s+"-group",!0).attr({"pointer-events":"none","data-unformatted":i,"data-math":"Y"});f.node().appendChild(d.node()),u&&u.node()&&d.node().insertBefore(u.node().cloneNode(!0),d.node().firstChild),d.attr({class:s,height:c.height,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var h=e.node().style.fill||"black";d.select("g").attr({fill:h,stroke:h});var p=X(d,"width"),m=X(d,"height"),g=+e.attr("x")-p*{start:0,middle:.5,end:1}[e.attr("text-anchor")||"start"],y=l||X(e,"height"),v=-y/4;"y"===s[0]?(f.attr({transform:"rotate("+[-90,+e.attr("x"),+e.attr("y")]+") translate("+[-p/2,v-m/2]+")"}),d.attr({x:+e.attr("x"),y:+e.attr("y")})):"l"===s[0]?d.attr({x:e.attr("x"),y:v-m/2}):"a"===s[0]?d.attr({x:0,y:v}):d.attr({x:g,y:+e.attr("y")+v-m/2}),n&&n.call(e,f),t(f)})})):r(),e}};var cP=/(<|&lt;|&#60;)/g,dP=/(>|&gt;|&#62;)/g,fP={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},hP={sub:"0.3em",sup:"-0.6em"},pP={sub:"-0.21em",sup:"0.42em"},mP="\u200b",gP=["http:","https:","mailto:","",void 0,":"],yP=new RegExp("</?("+Object.keys(fP).join("|")+")( [^>]*)?/?>","g"),vP=Object.keys(oP.entityToUnicode).map(function(e){return{regExp:new RegExp("&"+e+";","g"),sub:oP.entityToUnicode[e]}}),_P=/(\r\n?|\n)/g,bP=/(<[^<>]*>)/,xP=/<(\/?)([^ >]*)(\s+(.*))?>/i,wP=/<br(\s+.*)?>/i,kP=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,TP=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,MP=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,AP=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i,CP=/(^|;)\s*color:/;sP.plainText=function(e){return(e||"").replace(yP," ")},sP.lineCount=function(e){return e.selectAll("tspan.line").size()||1},sP.positionText=function(e,t,n){return e.each(function(){function e(e,t){return void 0===t?null===(t=r.attr(e))&&(r.attr(e,0),t=0):r.attr(e,t),t}var r=CC.select(this),i=e("x",t),a=e("y",n);"text"===this.nodeName&&r.selectAll("tspan.line").attr({x:i,y:a})})},sP.makeEditable=function(e,t){function n(){i(),e.style({opacity:0});var t,n=l.attr("class");(t=n?"."+n.split(" ")[0]+"-math-group":"[class*=-math-group]")&&CC.select(e.node().parentNode).select(t).style({opacity:0})}function r(e){var t=e.node(),n=document.createRange();n.selectNodeContents(t);var r=window.getSelection();r.removeAllRanges(),r.addRange(n),t.focus()}function i(){var n=CC.select(a),i=n.select(".svg-container"),o=i.append("div"),l=e.node().style,u=parseFloat(l.fontSize||12);o.classed("plugin-editable editable",!0).style({position:"absolute","font-family":l.fontFamily||"Arial","font-size":u,color:t.fill||l.fill||"black",opacity:1,"background-color":t.background||"transparent",outline:"#ffffff33 1px solid",margin:[-u/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(t.text||e.attr("data-unformatted")).call(te(e,i,t)).on("blur",function(){a._editing=!1,e.text(this.textContent).style({opacity:1});var t,n=CC.select(this).attr("class");(t=n?"."+n.split(" ")[0]+"-math-group":"[class*=-math-group]")&&CC.select(e.node().parentNode).select(t).style({opacity:0});var r=this.textContent;CC.select(this).transition().duration(0).remove(),CC.select(document).on("mouseup",null),s.edit.call(e,r)}).on("focus",function(){var e=this;a._editing=!0,CC.select(document).on("mouseup",function(){if(CC.event.target===e)return!1;document.activeElement===o.node()&&o.node().blur()})}).on("keyup",function(){27===CC.event.which?(a._editing=!1,e.style({opacity:1}),CC.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),s.cancel.call(e,this.textContent)):(s.input.call(e,this.textContent),CC.select(this).call(te(e,i,t)))}).on("keydown",function(){13===CC.event.which&&this.blur()}).call(r)}var a=t.gd,o=t.delegate,s=CC.dispatch("edit","input","cancel"),l=o||e;if(e.style({"pointer-events":o?"none":"all"}),1!==e.size())throw new Error("boo");return t.immediate?n():l.on("click",n),CC.rebind(e,s,"on")};var SP=function(e){var t=e.marker,n=t.sizeref||1,r=t.sizemin||0,i="area"===t.sizemode?function(e){return Math.sqrt(e/n)}:function(e){return e/n};return function(e){var t=i(e/2);return SC(t)&&t>0?Math.max(t,r):0}},EP={hasLines:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("lines")},hasMarkers:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("markers")},hasText:function(e){return e.visible&&e.mode&&-1!==e.mode.indexOf("text")},isBubble:function(e){return uE.isPlainObject(e.marker)&&uE.isArrayOrTypedArray(e.marker.size)}},PP={},IP=iP.LINE_SPACING,LP=jC.DESELECTDIM,OP=PP={};OP.font=function(e,t,n,r){uE.isPlainObject(t)&&(r=t.color,n=t.size,t=t.family),t&&e.style("font-family",t),n+1&&e.style("font-size",n+"px"),r&&e.call(jE.fill,r)},OP.setPosition=function(e,t,n){e.attr("x",t).attr("y",n)},OP.setSize=function(e,t,n){e.attr("width",t).attr("height",n)},OP.setRect=function(e,t,n,r,i){e.call(OP.setPosition,t,n).call(OP.setSize,r,i)},OP.translatePoint=function(e,t,n,r){var i=n.c2p(e.x),a=r.c2p(e.y);return!!(SC(i)&&SC(a)&&t.node())&&("text"===t.node().nodeName?t.attr("x",i).attr("y",a):t.attr("transform","translate("+i+","+a+")"),!0)},OP.translatePoints=function(e,t,n){e.each(function(e){var r=CC.select(this);OP.translatePoint(e,r,t,n)})},OP.hideOutsideRangePoint=function(e,t,n,r,i,a){t.attr("display",n.isPtWithinRange(e,i)&&r.isPtWithinRange(e,a)?null:"none")},OP.hideOutsideRangePoints=function(e,t,n){if(t._hasClipOnAxisFalse){n=n||".point,.textpoint";var r=t.xaxis,i=t.yaxis;e.each(function(t){var a=t[0].trace,o=a.xcalendar,s=a.ycalendar;e.selectAll(n).each(function(e){OP.hideOutsideRangePoint(e,CC.select(this),r,i,o,s)})})}},OP.crispRound=function(e,t,n){return t&&SC(t)?e._context.staticPlot?t:t<1?1:Math.round(t):n||0},OP.singleLineStyle=function(e,t,n,r,i){t.style("fill","none");var a=(((e||[])[0]||{}).trace||{}).line||{},o=n||a.width||0,s=i||a.dash||"";jE.stroke(t,r||a.color),OP.dashLine(t,s,o)},OP.lineGroupStyle=function(e,t,n,r){e.style("fill","none").each(function(e){var i=(((e||[])[0]||{}).trace||{}).line||{},a=t||i.width||0,o=r||i.dash||"";CC.select(this).call(jE.stroke,n||i.color).call(OP.dashLine,o,a)})},OP.dashLine=function(e,t,n){n=+n||0,t=OP.dashStyle(t,n),e.style({"stroke-dasharray":t,"stroke-width":n+"px"})},OP.dashStyle=function(e,t){t=+t||1;var n=Math.max(t,3);return"solid"===e?e="":"dot"===e?e=n+"px,"+n+"px":"dash"===e?e=3*n+"px,"+3*n+"px":"longdash"===e?e=5*n+"px,"+5*n+"px":"dashdot"===e?e=3*n+"px,"+n+"px,"+n+"px,"+n+"px":"longdashdot"===e&&(e=5*n+"px,"+2*n+"px,"+n+"px,"+2*n+"px"),e},OP.singleFillStyle=function(e){var t=CC.select(e.node()),n=t.data(),r=(((n[0]||[])[0]||{}).trace||{}).fillcolor;r&&e.call(jE.fill,r)},OP.fillGroupStyle=function(e){e.style("stroke-width",0).each(function(t){var n=CC.select(this);try{n.call(jE.fill,t[0].trace.fillcolor)}catch(t){uE.error(t,e),n.remove()}})},OP.symbolNames=[],OP.symbolFuncs=[],OP.symbolNeedLines={},OP.symbolNoDot={},OP.symbolNoFill={},OP.symbolList=[],Object.keys(rP).forEach(function(e){var t=rP[e];OP.symbolList=OP.symbolList.concat([t.n,e,t.n+100,e+"-open"]),OP.symbolNames[t.n]=e,OP.symbolFuncs[t.n]=t.f,t.needLine&&(OP.symbolNeedLines[t.n]=!0),t.noDot?OP.symbolNoDot[t.n]=!0:OP.symbolList=OP.symbolList.concat([t.n+200,e+"-dot",t.n+300,e+"-open-dot"]),t.noFill&&(OP.symbolNoFill[t.n]=!0)});var zP=OP.symbolNames.length,RP="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";OP.symbolNumber=function(e){if("string"===typeof e){var t=0;e.indexOf("-open")>0&&(t=100,e=e.replace("-open","")),e.indexOf("-dot")>0&&(t+=200,e=e.replace("-dot","")),e=OP.symbolNames.indexOf(e),e>=0&&(e+=t)}return e%100>=zP||e>=400?0:Math.floor(Math.max(e,0))};var DP={x1:1,x2:0,y1:0,y2:0},NP={x1:0,x2:0,y1:1,y2:0};OP.gradient=function(e,t,n,r,i,a){var o=t._fullLayout._defs.select(".gradients").selectAll("#"+n).data([r+i+a],uE.identity);o.exit().remove(),o.enter().append("radial"===r?"radialGradient":"linearGradient").each(function(){var e=CC.select(this);"horizontal"===r?e.attr(DP):"vertical"===r&&e.attr(NP),e.attr("id",n);var t=zC(i),o=zC(a);e.append("stop").attr({offset:"0%","stop-color":jE.tinyRGB(o),"stop-opacity":o.getAlpha()}),e.append("stop").attr({offset:"100%","stop-color":jE.tinyRGB(t),"stop-opacity":t.getAlpha()})}),e.style({fill:"url(#"+n+")","fill-opacity":null})},OP.initGradients=function(e){var t=e._fullLayout._defs.selectAll(".gradients").data([0]);t.enter().append("g").classed("gradients",!0),t.selectAll("linearGradient,radialGradient").remove()},OP.singlePointStyle=function(e,t,n,r,i,a){var o=n.marker;re(e,t,n,r,i,o,o.line,a)},OP.pointStyle=function(e,t,n){if(e.size()){var r=t.marker,i=OP.tryColorscale(r,""),a=OP.tryColorscale(r,"line");e.each(function(e){OP.singlePointStyle(e,CC.select(this),t,i,a,n)})}},OP.makeSelectedPointStyleFns=function(e){var t={},n=e.selected||{},r=e.unselected||{},i=e.marker||{},a=n.marker||{},o=r.marker||{},s=i.opacity,l=a.opacity,u=o.opacity,c=void 0!==l,d=void 0!==u;t.opacityFn=function(e){var t=e.mo,n=void 0!==t;if(n||c||d){if(!e.selected)return d?u:LP*(n?t:s);if(c)return l}};var f=a.color,h=o.color;(f||h)&&(t.colorFn=function(e){if(e.selected){if(f)return f}else if(h)return h});var p=a.size,m=o.size,g=void 0!==p,y=void 0!==m;return(g||y)&&(t.sizeFn=function(e){var t=e.mrc;return e.selected?g?p/2:t:y?m/2:t}),t},OP.selectedPointStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=OP.makeSelectedPointStyleFns(t),r=t.marker||{};e.each(function(e){var t=CC.select(this),r=n.opacityFn(e);void 0!==r&&t.style("opacity",r)}),n.colorFn&&e.each(function(e){var t=CC.select(this),r=n.colorFn(e);r&&jE.fill(t,r)}),rS.traceIs(t,"symbols")&&n.sizeFn&&e.each(function(e){var t=CC.select(this),i=e.mx||r.symbol||0,a=n.sizeFn(e);t.attr("d",ne(OP.symbolNumber(i),a)),e.mrc2=a})}},OP.tryColorscale=function(e,t){var n=t?uE.nestedProperty(e,t).get():e,r=n.colorscale,i=n.color;return r&&uE.isArrayOrTypedArray(i)?nP.makeColorScaleFunc(nP.extractScale(r,n.cmin,n.cmax)):uE.identity};var FP={start:1,end:-1,middle:0,bottom:1,top:-1};OP.textPointStyle=function(e,t,n){e.each(function(e){var r=CC.select(this),i=uE.extractOption(e,t,"tx","text");if(!i)return void r.remove();var a=e.tp||t.textposition,o=ae(e,t);r.call(OP.font,e.tf||t.textfont.family,o,e.tc||t.textfont.color).text(i).call(sP.convertToTspans,n).call(ie,a,o,e.mrc)})},OP.selectedTextStyle=function(e,t){if(e.size()&&t.selectedpoints){var n=t.selected||{},r=t.unselected||{};e.each(function(e){var i,a=CC.select(this),o=e.tc||t.textfont.color,s=e.tp||t.textposition,l=ae(e,t),u=(n.textfont||{}).color,c=(r.textfont||{}).color;e.selected?u&&(i=u):c?i=c:u||(i=jE.addOpacity(o,LP)),i&&jE.fill(a,i),ie(a,s,l,e.mrc2||e.mrc)})}};var jP=.5;OP.smoothopen=function(e,t){if(e.length<3)return"M"+e.join("L");var n,r="M"+e[0],i=[];for(n=1;n<e.length-1;n++)i.push(oe(e[n-1],e[n],e[n+1],t));for(r+="Q"+i[0][0]+" "+e[1],n=2;n<e.length-1;n++)r+="C"+i[n-2][1]+" "+i[n-1][0]+" "+e[n];return r+="Q"+i[e.length-3][1]+" "+e[e.length-1]},OP.smoothclosed=function(e,t){if(e.length<3)return"M"+e.join("L")+"Z";var n,r="M"+e[0],i=e.length-1,a=[oe(e[i],e[0],e[1],t)];for(n=1;n<i;n++)a.push(oe(e[n-1],e[n],e[n+1],t));for(a.push(oe(e[i-1],e[i],e[0],t)),n=1;n<=i;n++)r+="C"+a[n-1][1]+" "+a[n][0]+" "+e[n];return r+="C"+a[i][1]+" "+a[0][0]+" "+e[0]+"Z"};var BP={hv:function(e,t){return"H"+CC.round(t[0],2)+"V"+CC.round(t[1],2)},vh:function(e,t){return"V"+CC.round(t[1],2)+"H"+CC.round(t[0],2)},hvh:function(e,t){return"H"+CC.round((e[0]+t[0])/2,2)+"V"+CC.round(t[1],2)+"H"+CC.round(t[0],2)},vhv:function(e,t){return"V"+CC.round((e[1]+t[1])/2,2)+"H"+CC.round(t[0],2)+"V"+CC.round(t[1],2)}},UP=function(e,t){return"L"+CC.round(t[0],2)+","+CC.round(t[1],2)};OP.steps=function(e){var t=BP[e]||UP;return function(e){for(var n="M"+CC.round(e[0][0],2)+","+CC.round(e[0][1],2),r=1;r<e.length;r++)n+=t(e[r-1],e[r]);return n}},OP.makeTester=function(){var e=CC.select("body").selectAll("#js-plotly-tester").data([0]);e.enter().append("svg").attr("id","js-plotly-tester").attr(aP.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"});var t=e.selectAll(".js-reference-point").data([0]);t.enter().append("path").classed("js-reference-point",!0).attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"}),OP.tester=e,OP.testref=t},OP.savedBBoxes={};var VP=0;OP.bBox=function(e,t,n){n||(n=se(e));var r;if(n){if(r=OP.savedBBoxes[n])return uE.extendFlat({},r)}else if(1===e.childNodes.length){var i=e.childNodes[0];if(n=se(i)){var a=+i.getAttribute("x")||0,o=+i.getAttribute("y")||0,s=i.getAttribute("transform");if(!s){var l=OP.bBox(i,!1,n);return a&&(l.left+=a,l.right+=a),o&&(l.top+=o,l.bottom+=o),l}if(n+="~"+a+"~"+o+"~"+s,r=OP.savedBBoxes[n])return uE.extendFlat({},r)}}var u,c;t?u=e:(c=OP.tester.node(),u=e.cloneNode(!0),c.appendChild(u)),CC.select(u).attr("transform",null).call(sP.positionText,0,0);var d=u.getBoundingClientRect(),f=OP.testref.node().getBoundingClientRect();t||c.removeChild(u);var h={height:d.height,width:d.width,left:d.left-f.left,top:d.top-f.top,right:d.right-f.left,bottom:d.bottom-f.top};return VP>=1e4&&(OP.savedBBoxes={},VP=0),n&&(OP.savedBBoxes[n]=h),VP++,uE.extendFlat({},h)},OP.setClipUrl=function(e,t){if(!t)return void e.attr("clip-path",null);var n="#"+t,r=CC.select("base");r.size()&&r.attr("href")&&(n=window.location.href.split("#")[0]+n),e.attr("clip-path","url("+n+")")},OP.getTranslate=function(e){var t=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,n=e.attr?"attr":"getAttribute",r=e[n]("transform")||"",i=r.replace(t,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+i[0]||0,y:+i[1]||0}},OP.setTranslate=function(e,t,n){var r=/(\btranslate\(.*?\);?)/,i=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[i]("transform")||"";return t=t||0,n=n||0,o=o.replace(r,"").trim(),o+=" translate("+t+", "+n+")",o=o.trim(),e[a]("transform",o),o},OP.getScale=function(e){var t=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,n=e.attr?"attr":"getAttribute",r=e[n]("transform")||"",i=r.replace(t,function(e,t,n){return[t,n].join(" ")}).split(" ");return{x:+i[0]||1,y:+i[1]||1}},OP.setScale=function(e,t,n){var r=/(\bscale\(.*?\);?)/,i=e.attr?"attr":"getAttribute",a=e.attr?"attr":"setAttribute",o=e[i]("transform")||"";return t=t||1,n=n||1,o=o.replace(r,"").trim(),o+=" scale("+t+", "+n+")",o=o.trim(),e[a]("transform",o),o},OP.setPointGroupScale=function(e,t,n){var r,i,a;return t=t||1,n=n||1,i=1===t&&1===n?"":" scale("+t+","+n+")",a=/\s*sc.*/,e.each(function(){r=(this.getAttribute("transform")||"").replace(a,""),r+=i,r=r.trim(),this.setAttribute("transform",r)}),i};var HP=/translate\([^)]*\)\s*$/;OP.setTextPointsScale=function(e,t,n){e.each(function(){var e,r=CC.select(this),i=r.select("text");if(i.node()){var a=parseFloat(i.attr("x")||0),o=parseFloat(i.attr("y")||0),s=(r.attr("transform")||"").match(HP);e=1===t&&1===n?[]:["translate("+a+","+o+")","scale("+t+","+n+")","translate("+-a+","+-o+")"],s&&e.push(s),r.attr("transform",e.join(" "))}})};var WP={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20},qP=CE.dash,GP=WC.extendFlat,YP={x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:GP({},qP,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],dflt:"none",editType:"calc"},fillcolor:{valType:"color",editType:"style"},marker:GP({symbol:{valType:"enumerated",values:PP.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style"},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calcIfAutorange"},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:RE,line:GP({width:{valType:"number",min:0,arrayOk:!0,editType:"style"},editType:"calc"},FE()),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},FE()),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:KC({editType:"calc",colorEditType:"style",arrayOk:!0}),r:{valType:"data_array",editType:"calc"},t:{valType:"data_array",editType:"calc"}},XP=YP.marker,ZP={r:YP.r,t:YP.t,marker:{color:XP.color,size:XP.size,symbol:XP.symbol,opacity:XP.opacity,editType:"calc"}},JP=WC.extendFlat,KP=TE.overrideAll,QP=JP({},LE.domain,{}),$P=KP({radialaxis:le("radial",{range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},domain:QP,orientation:{valType:"number"}}),angularaxis:le("angular",{range:{valType:"info_array",items:[{valType:"number",dflt:0},{valType:"number",dflt:360}]},domain:QP}),layout:{direction:{valType:"enumerated",values:["clockwise","counterclockwise"]},orientation:{valType:"angle"}}},"plot","nested"),eI={},tI=uE.extendFlat,nI=uE.extendDeepAll,rI="_isSubplotObj",iI="_isLinkedToArray",aI=[rI,iI,"_arrayAttrRegexps","_deprecated"];eI.IS_SUBPLOT_OBJ=rI,eI.IS_LINKED_TO_ARRAY=iI,eI.DEPRECATED="_deprecated",eI.UNDERSCORE_ATTRS=aI,eI.get=function(){var e={};rS.allTypes.concat("area").forEach(function(t){e[t]=fe(t)});var t={};return Object.keys(rS.transformsRegistry).forEach(function(e){t[e]=pe(e)}),{defs:{valObjects:uE.valObjectMeta,metaKeys:aI.concat(["description","role","editType","impliedEdits"]),editType:{traces:TE.traces,layout:TE.layout},impliedEdits:{}},traces:e,layout:he(),transforms:t,frames:me(),animation:ge(ME)}},eI.crawl=function(e,t,n,r){var i=n||0;r=r||"",Object.keys(e).forEach(function(n){var a=e[n];if(-1===aI.indexOf(n)){var o=(r?r+".":"")+n;t(a,n,e,i,o),eI.isValObject(a)||uE.isPlainObject(a)&&"impliedEdits"!==n&&eI.crawl(a,t,i+1,o)}})},eI.isValObject=function(e){return e&&void 0!==e.valType},eI.findArrayAttributes=function(e){function t(t,a,o,s){if(i=i.slice(0,s).concat([a]),t&&("data_array"===t.valType||!0===t.arrayOk)&&!("colorbar"===i[s-1]&&("ticktext"===a||"tickvals"===a))){var l=n(i),u=uE.nestedProperty(e,l).get();uE.isArrayOrTypedArray(u)&&r.push(l)}}function n(e){return e.join(".")}var r=[],i=[];if(eI.crawl($C,t),e._module&&e._module.attributes&&eI.crawl(e._module.attributes,t),e.transforms)for(var a=e.transforms,o=0;o<a.length;o++){var s=a[o],l=s._module;l&&(i=["transforms["+o+"]"],eI.crawl(l.attributes,t,1))}return e._fullInput&&e._fullInput._module&&e._fullInput._module.attributes&&(eI.crawl(e._fullInput._module.attributes,t),r=uE.filterUnique(r)),r},eI.getTraceValObject=function(e,t){var n,r,i=t[0],a=1;if("transforms"===i){if(!Array.isArray(e.transforms))return!1;var o=t[1];if(!de(o)||o>=e.transforms.length)return!1;n=(rS.transformsRegistry[e.transforms[o].type]||{}).attributes,r=n&&n[t[2]],a=3}else if("area"===e.type)r=ZP[i];else{var s=e._module;if(s||(s=(rS.modules[e.type||$C.type.dflt]||{})._module),!s)return!1;if(n=s.attributes,!(r=n&&n[i])){var l=s.basePlotModule;l&&l.attributes&&(r=l.attributes[i])}r||(r=$C[i])}return ce(r,t,a)},eI.getLayoutValObject=function(e,t){return ce(ue(e,t[0]),t,1)};var oI={};oI.id2name=function(e){if("string"===typeof e&&e.match(EE.AX_ID_PATTERN)){var t=e.substr(1);return"1"===t&&(t=""),e.charAt(0)+"axis"+t}},oI.name2id=function(e){if(e.match(EE.AX_NAME_PATTERN)){var t=e.substr(5);return"1"===t&&(t=""),e.charAt(0)+t}},oI.cleanId=function(e,t){if(e.match(EE.AX_ID_PATTERN)&&(!t||e.charAt(0)===t)){var n=e.substr(1).replace(/^0+/,"");return"1"===n&&(n=""),e.charAt(0)+n}},oI.list=function(e,t,n){var r=e._fullLayout;if(!r)return[];var i,a=oI.listIds(e,t),o=new Array(a.length);for(i=0;i<a.length;i++){var s=a[i];o[i]=r[s.charAt(0)+"axis"+s.substr(1)]}if(!n){var l=r._subplots.gl3d||[];for(i=0;i<l.length;i++){var u=r[l[i]];t?o.push(u[t+"axis"]):o.push(u.xaxis,u.yaxis,u.zaxis)}}return o},oI.listIds=function(e,t){var n=e._fullLayout;if(!n)return[];var r=n._subplots;return t?r[t+"axis"]:r.xaxis.concat(r.yaxis)},oI.getFromId=function(e,t,n){var r=e._fullLayout;return"x"===n?t=t.replace(/y[0-9]*/,""):"y"===n&&(t=t.replace(/x[0-9]*/,"")),r[oI.id2name(t)]},oI.getFromTrace=function(e,t,n){var r=e._fullLayout,i=null;if(rS.traceIs(t,"gl3d")){var a=t.scene;"scene"===a.substr(0,5)&&(i=r[a][n+"axis"])}else i=oI.getFromId(e,t[n+"axis"]||n);return i},oI.idSort=function(e,t){var n=e.charAt(0),r=t.charAt(0);return n!==r?n>r?1:-1:+(e.substr(1)||1)-+(t.substr(1)||1)};var sI={};sI.manageCommandObserver=function(e,t,n,r){var i={},a=!0;t&&t._commandObserver&&(i=t._commandObserver),i.cache||(i.cache={}),i.lookupTable={};var o=sI.hasSimpleAPICommandBindings(e,n,i.lookupTable);if(t&&t._commandObserver){if(o)return i;if(t._commandObserver.remove)return t._commandObserver.remove(),t._commandObserver=null,i}if(o){we(e,o,i.cache),i.check=function(){if(a){var t=we(e,o,i.cache);return t.changed&&r&&void 0!==i.lookupTable[t.value]&&(i.disable(),Promise.resolve(r({value:t.value,type:o.type,prop:o.prop,traces:o.traces,index:i.lookupTable[t.value]})).then(i.enable,i.enable)),t.changed}};for(var s=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],l=0;l<s.length;l++)e._internalOn(s[l],i.check);i.remove=function(){for(var t=0;t<s.length;t++)e._removeInternalListener(s[t],i.check)}}else uE.log("Unable to automatically bind plot updates to API command"),i.lookupTable={},i.remove=function(){};return i.disable=function(){a=!1},i.enable=function(){a=!0},t&&(t._commandObserver=i),i},sI.hasSimpleAPICommandBindings=function(e,t,n){var r,i,a=t.length;for(r=0;r<a;r++){var o,s=t[r],l=s.method,u=s.args;if(Array.isArray(u)||(u=[]),!l)return!1;var c=sI.computeAPICommandBindings(e,l,u);if(1!==c.length)return!1;if(i){if(o=c[0],o.type!==i.type)return!1;if(o.prop!==i.prop)return!1;if(Array.isArray(i.traces)){if(!Array.isArray(o.traces))return!1;o.traces.sort();for(var d=0;d<i.traces.length;d++)if(i.traces[d]!==o.traces[d])return!1}else if(o.prop!==i.prop)return!1}else i=c[0],Array.isArray(i.traces)&&i.traces.sort();o=c[0];var f=o.value;if(Array.isArray(f)){if(1!==f.length)return!1;f=f[0]}n&&(n[f]=r)}return i},sI.executeAPICommand=function(e,t,n){if("skip"===t)return Promise.resolve();var r=rS.apiMethodRegistry[t],i=[e];Array.isArray(n)||(n=[]);for(var a=0;a<n.length;a++)i.push(n[a]);return r.apply(null,i).catch(function(e){return uE.warn("API call to Plotly."+t+" rejected.",e),Promise.reject(e)})},sI.computeAPICommandBindings=function(e,t,n){var r;switch(Array.isArray(n)||(n=[]),t){case"restyle":r=Me(e,n);break;case"relayout":r=Te(e,n);break;case"update":r=Me(e,[n[0],n[2]]).concat(Te(e,[n[1]]));break;case"animate":r=ke(e,n);break;default:r=[]}return r};var lI={},uI=uE._,cI=AC.BADNUM,dI=lI={},fI=uE.relinkPrivateKeys;uE.extendFlat(dI,rS),dI.attributes=$C,dI.attributes.type.values=dI.allTypes,dI.fontAttrs=KC,dI.layoutAttributes=nS,dI.fontWeight="normal";var hI=dI.transformsRegistry;dI.executeAPICommand=sI.executeAPICommand,dI.computeAPICommandBindings=sI.computeAPICommandBindings,dI.manageCommandObserver=sI.manageCommandObserver,dI.hasSimpleAPICommandBindings=sI.hasSimpleAPICommandBindings,dI.redrawText=function(e){if(e=uE.getGraphDiv(e),!(e.data&&e.data[0]&&e.data[0].r))return new Promise(function(t){setTimeout(function(){rS.getComponentMethod("annotations","draw")(e),rS.getComponentMethod("legend","draw")(e),(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()}),t(dI.previousPromises(e))},300)})},dI.resize=function(e){return e=uE.getGraphDiv(e),new Promise(function(t,n){e&&!function(e){var t=window.getComputedStyle(e).display;return!t||"none"===t}(e)||n(new Error("Resize must be passed a displayed plot div element.")),e._redrawTimer&&clearTimeout(e._redrawTimer),e._redrawTimer=setTimeout(function(){if(e.layout.width&&e.layout.height)return void t(e);delete e.layout.width,delete e.layout.height;var n=e.changed;e.autoplay=!0,rS.call("relayout",e,{autosize:!0}).then(function(){e.changed=n,t(e)})},100)})},dI.previousPromises=function(e){if((e._promises||[]).length)return Promise.all(e._promises).then(function(){e._promises=[]})},dI.addLinks=function(e){if(e._context.showLink||e._context.showSources){var t=e._fullLayout,n=t._paper.selectAll("text.js-plot-link-container").data([0]);n.enter().append("text").classed("js-plot-link-container",!0).style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:jE.defaultLine,"pointer-events":"all"}).each(function(){var e=CC.select(this);e.append("tspan").classed("js-link-to-tool",!0),e.append("tspan").classed("js-link-spacer",!0),e.append("tspan").classed("js-sourcelinks",!0)});var r=n.node(),i={y:t._paper.attr("height")-9};document.body.contains(r)&&r.getComputedTextLength()>=t.width-20?(i["text-anchor"]="start",i.x=5):(i["text-anchor"]="end",i.x=t._paper.attr("width")-7),n.attr(i);var a=n.select(".js-link-to-tool"),o=n.select(".js-link-spacer"),s=n.select(".js-sourcelinks");e._context.showSources&&e._context.showSources(e),e._context.showLink&&Ce(e,a),o.text(a.text()&&s.text()?" - ":"")}},dI.sendDataToCloud=function(e){e.emit("plotly_beforeexport");var t=window.PLOTLYENV&&window.PLOTLYENV.BASE_URL||"https://plot.ly",n=CC.select(e).append("div").attr("id","hiddenform").style("display","none"),r=n.append("form").attr({action:t+"/external",method:"post",target:"_blank"});return r.append("input").attr({type:"text",name:"data"}).node().value=dI.graphJson(e,!1,"keepdata"),r.node().submit(),n.remove(),e.emit("plotly_afterexport"),!1};var pI=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],mI=["year","month","dayMonth","dayMonthYear"];dI.supplyDefaults=function(e){var t=e._fullLayout||{};if(t._skipDefaults)return void delete t._skipDefaults;var n,r=e._fullLayout={},i=e.layout||{},a=e._fullData||[],o=e._fullData=[],s=e.data||[],l=e._context||{};e._transitionData||dI.createTransitionData(e),r._dfltTitle={plot:uI(e,"Click to enter Plot title"),x:uI(e,"Click to enter X axis title"),y:uI(e,"Click to enter Y axis title"),colorbar:uI(e,"Click to enter Colorscale title"),annotation:uI(e,"new text")},r._traceWord=uI(e,"trace");var u=Pe(e,pI);if(r._mapboxAccessToken=l.mapboxAccessToken,t._initialAutoSizeIsDone){var c=t.width,d=t.height;dI.supplyLayoutGlobalDefaults(i,r,u),i.width||(r.width=c),i.height||(r.height=d)}else{dI.supplyLayoutGlobalDefaults(i,r,u);var f=!i.width||!i.height,h=r.autosize,p=l.autosizable;f&&(h||p)?dI.plotAutoSize(e,i,r):f&&dI.sanitizeMargins(e),!h&&f&&(i.width=r.width,i.height=r.height)}r._d3locale=Ie(u,r.separators),r._extraFormat=Pe(e,mI),r._initialAutoSizeIsDone=!0,r._dataLength=s.length,r._modules=[],r._basePlotModules=[],r._subplots=Se(),r._globalTransforms=(e._context||{}).globalTransforms,dI.supplyDataDefaults(s,o,i,r),r._has=dI._hasPlotType.bind(r);var m=r._modules;for(n=0;n<m.length;n++){var g=m[n];g.cleanData&&g.cleanData(o)}if(a.length===s.length)for(n=0;n<o.length;n++)fI(o[n],a[n]);dI.supplyLayoutModuleDefaults(i,r,o,e._transitionData),r._hasCartesian=r._has("cartesian"),r._hasGeo=r._has("geo"),r._hasGL3D=r._has("gl3d"),r._hasGL2D=r._has("gl2d"),r._hasTernary=r._has("ternary"),r._hasPie=r._has("pie"),dI.cleanPlot(o,r,a,t),dI.linkSubplots(o,r,a,t),fI(r,t),dI.doAutoMargin(e);var y=oI.list(e);for(n=0;n<y.length;n++){y[n].setScale()}if((e.calcdata||[]).length===o.length)for(n=0;n<o.length;n++){var v=o[n],_=e.calcdata[n][0];_&&_.trace&&(_.trace._hasCalcTransform?Ee(_,v):_.trace=v)}};var gI;dI.createTransitionData=function(e){e._transitionData||(e._transitionData={}),e._transitionData._frames||(e._transitionData._frames=[]),e._transitionData._frameHash||(e._transitionData._frameHash={}),e._transitionData._counter||(e._transitionData._counter=0),e._transitionData._interruptCallbacks||(e._transitionData._interruptCallbacks=[])},dI._hasPlotType=function(e){var t,n=this._basePlotModules||[];for(t=0;t<n.length;t++){if(n[t].name===e)return!0}var r=this._modules||[];for(t=0;t<r.length;t++){var i=r[t];if(i.categories&&i.categories.indexOf(e)>=0)return!0}return!1},dI.cleanPlot=function(e,t,n,r){var i,a,o=r._basePlotModules||[];for(i=0;i<o.length;i++){var s=o[i];s.clean&&s.clean(e,t,n,r)}var l=!!r._paper,u=!!r._infolayer,c=r._has&&r._has("gl"),d=t._has&&t._has("gl");c&&!d&&void 0!==r._glcontainer&&(r._glcontainer.selectAll(".gl-canvas").remove(),r._glcanvas=null);e:for(i=0;i<n.length;i++){var f=n[i],h=f.uid;for(a=0;a<e.length;a++){var p=e[a];if(h===p.uid)continue e}var m=".hm"+h+",.contour"+h+",.carpet"+h+",#clip"+h+",.trace"+h;l&&r._paper.selectAll(m).remove(),u&&(r._infolayer.selectAll(".cb"+h).remove(),r._infolayer.selectAll("g.rangeslider-container").selectAll(m).remove())}r._zoomlayer&&r._zoomlayer.selectAll(".select-outline").remove()},dI.linkSubplots=function(e,t,n,r){var i,a,o,s,l=r._plots||{},u=t._plots={},c=t._subplots,d={_fullData:e,_fullLayout:t},f=c.cartesian.concat(c.gl2d||[]);for(i=0;i<f.length;i++){o=f[i];var h,p=l[o],m=oI.getFromId(d,o,"x"),g=oI.getFromId(d,o,"y");for(p?(h=u[o]=p,h.xaxis.layer!==m.layer&&(h.xlines.attr("d",null),h.xaxislayer.selectAll("*").remove()),h.yaxis.layer!==g.layer&&(h.ylines.attr("d",null),h.yaxislayer.selectAll("*").remove())):(h=u[o]={},h.id=o),h.xaxis=m,h.yaxis=g,h._hasClipOnAxisFalse=!1,a=0;a<e.length;a++){var y=e[a];if(y.xaxis===h.xaxis._id&&y.yaxis===h.yaxis._id&&!1===y.cliponaxis){h._hasClipOnAxisFalse=!0;break}}}var v=oI.list(d,null,!0);for(i=0;i<v.length;i++){s=v[i];var _=null;s.overlaying&&(_=oI.getFromId(d,s.overlaying))&&_.overlaying&&(s.overlaying=!1,_=null),s._mainAxis=_||s,_&&(s.domain=_.domain.slice()),s._anchorAxis="free"===s.anchor?null:oI.getFromId(d,s.anchor)}for(i=0;i<v.length;i++){s=v[i];var b="x"===s._id.charAt(0),x=s._mainAxis._anchorAxis,w="",k="",T="";if(x&&(T=x._mainAxis._id,w=b?s._id+T:T+s._id),!w||-1===f.indexOf(w))for(w="",a=0;a<f.length;a++){o=f[a];var M=o.indexOf("y"),A=b?o.substr(0,M):o.substr(M),C=b?o.substr(M):o.substr(0,M);if(A===s._id){k||(k=o);var S=oI.getFromId(d,C);if(T&&S.overlaying===T){w=o;break}}}s._mainSubplot=w||k}},dI.clearExpandedTraceDefaultColors=function(e){function t(e,t,i,a){r[a]=t,r.length=a+1,"color"===e.valType&&void 0===e.dflt&&n.push(r.join("."))}var n,r,i;for(r=[],n=e._module._colorAttrs,n||(e._module._colorAttrs=n=[],eI.crawl(e._module.attributes,t)),i=0;i<n.length;i++){uE.nestedProperty(e,"_input."+n[i]).get()||uE.nestedProperty(e,n[i]).set(null)}},dI.supplyDataDefaults=function(e,t,n,r){function i(e){t.push(e);var n=e._module;n&&(!0===e.visible&&uE.pushUnique(l,n),uE.pushUnique(u,e._module.basePlotModule),c++,!1!==e._input.visible&&d++)}var a,o,s,l=r._modules,u=r._basePlotModules,c=0,d=0;r._transformModules=[];var f={},h=[];for(a=0;a<e.length;a++){if(s=e[a],o=dI.supplyTraceDefaults(s,d,r,a),o.index=a,o._input=s,o._expandedIndex=c,o.transforms&&o.transforms.length)for(var p=Le(o,t,n,r),m=0;m<p.length;m++){var g=p[m],y=dI.supplyTraceDefaults(g,c,r,a);fI(y,g),g.uid=y.uid=o.uid+m,y.index=a,y._input=s,y._fullInput=o,y._expandedIndex=c,y._expandedInput=g,i(y)}else o._fullInput=o,o._expandedInput=o,i(o);rS.traceIs(o,"carpetAxis")&&(f[o.carpet]=o),rS.traceIs(o,"carpetDependent")&&h.push(a)}for(a=0;a<h.length;a++)if(o=t[h[a]],o.visible){var v=f[o.carpet];o._carpet=v,v&&v.visible?(o.xaxis=v.xaxis,o.yaxis=v.yaxis):o.visible=!1}},dI.supplyAnimationDefaults=function(e){function t(t,n){return uE.coerce(e||{},r,ME,t,n)}e=e||{};var n,r={};if(t("mode"),t("direction"),t("fromcurrent"),Array.isArray(e.frame))for(r.frame=[],n=0;n<e.frame.length;n++)r.frame[n]=dI.supplyAnimationFrameDefaults(e.frame[n]||{});else r.frame=dI.supplyAnimationFrameDefaults(e.frame||{});if(Array.isArray(e.transition))for(r.transition=[],n=0;n<e.transition.length;n++)r.transition[n]=dI.supplyAnimationTransitionDefaults(e.transition[n]||{});else r.transition=dI.supplyAnimationTransitionDefaults(e.transition||{});return r},dI.supplyAnimationFrameDefaults=function(e){function t(t,r){return uE.coerce(e||{},n,ME.frame,t,r)}var n={};return t("duration"),t("redraw"),n},dI.supplyAnimationTransitionDefaults=function(e){function t(t,r){return uE.coerce(e||{},n,ME.transition,t,r)}var n={};return t("duration"),t("easing"),n},dI.supplyFrameDefaults=function(e){function t(t,r){return uE.coerce(e,n,AE,t,r)}var n={};return t("group"),t("name"),t("traces"),t("baseframe"),t("data"),t("layout"),n},dI.supplyTraceDefaults=function(e,t,n,r){function i(t,n){return uE.coerce(e,s,dI.attributes,t,n)}var a,o=n.colorway||jE.defaults,s={},l=o[t%o.length],u=i("visible");i("type"),i("uid"),i("name",n._traceWord+" "+r);var c=dI.getModule(s);if(s._module=c,c){var d=c.basePlotModule,f=d.attr;if(f){var h=n._subplots,p=d.attributes,m="";if("gl2d"!==d.name||u){if(Array.isArray(f))for(a=0;a<f.length;a++){var g=f[a],y=uE.coerce(e,s,p,g);h[g]&&uE.pushUnique(h[g],y),m+=y}else m=uE.coerce(e,s,p,f);h[d.name]&&uE.pushUnique(h[d.name],m)}}}return u&&(i("customdata"),i("ids"),rS.traceIs(s,"showLegend")&&(i("showlegend"),i("legendgroup")),rS.getComponentMethod("fx","supplyDefaults")(e,s,l,n),c&&(c.supplyDefaults(e,s,l,n),uE.coerceHoverinfo(e,s,n)),rS.traceIs(s,"noOpacity")||i("opacity"),rS.traceIs(s,"notLegendIsolatable")&&(s.visible=!!s.visible),c&&c.selectPoints&&i("selectedpoints"),dI.supplyTransformDefaults(e,s,n)),s},dI.supplyTransformDefaults=function(e,t,n){var r=n._globalTransforms||[],i=n._transformModules||[];if(Array.isArray(e.transforms)||0!==r.length)for(var a=e.transforms||[],o=r.concat(a),s=t.transforms=[],l=0;l<o.length;l++){var u,c=o[l],d=c.type,f=hI[d],h=!(c._module&&c._module===f),p=f&&"function"===typeof f.transform;f||uE.warn("Unrecognized transform type "+d+"."),f&&f.supplyDefaults&&(h||p)?(u=f.supplyDefaults(c,t,n,e),u.type=d,u._module=f,uE.pushUnique(i,f)):u=uE.extendFlat({},c),s.push(u)}},dI.supplyLayoutGlobalDefaults=function(e,t,n){function r(n,r){return uE.coerce(e,t,dI.layoutAttributes,n,r)}var i=uE.coerceFont(r,"font");r("title",t._dfltTitle.plot),uE.coerceFont(r,"titlefont",{family:i.family,size:Math.round(1.4*i.size),color:i.color}),r("autosize",!(e.width&&e.height)),r("width"),r("height"),r("margin.l"),r("margin.r"),r("margin.t"),r("margin.b"),r("margin.pad"),r("margin.autoexpand"),e.width&&e.height&&dI.sanitizeMargins(t),rS.getComponentMethod("grid","sizeDefaults")(e,t),r("paper_bgcolor"),r("separators",n.decimal+n.thousands),r("hidesources"),r("colorway"),r("datarevision"),rS.getComponentMethod("calendars","handleDefaults")(e,t,"calendar"),rS.getComponentMethod("fx","supplyLayoutGlobalDefaults")(e,t,r)},dI.plotAutoSize=function(e,t,n){var r,i,a=e._context||{},o=a.frameMargins,s=uE.isPlotDiv(e);if(s&&e.emit("plotly_autosize"),a.fillFrame)r=window.innerWidth,i=window.innerHeight,document.body.style.overflow="hidden";else if(SC(o)&&o>0){var l=Oe(e._boundingBoxMargins),u=l.left+l.right,c=l.bottom+l.top,d=1-2*o,f=n._container&&n._container.node?n._container.node().getBoundingClientRect():{width:n.width,height:n.height};r=Math.round(d*(f.width-u)),i=Math.round(d*(f.height-c))}else{var h=s?window.getComputedStyle(e):{};r=parseFloat(h.width)||n.width,i=parseFloat(h.height)||n.height}var p=dI.layoutAttributes.width.min,m=dI.layoutAttributes.height.min;r<p&&(r=p),i<m&&(i=m);var g=!t.width&&Math.abs(n.width-r)>1,y=!t.height&&Math.abs(n.height-i)>1;(y||g)&&(g&&(n.width=r),y&&(n.height=i)),e._initialAutoSize||(e._initialAutoSize={width:r,height:i}),dI.sanitizeMargins(n)},dI.supplyLayoutModuleDefaults=function(e,t,n,r){var i,a,o,s=rS.componentsRegistry,l=t._basePlotModules,u=rS.subplotsRegistry.cartesian;for(i in s)o=s[i],o.includeBasePlot&&o.includeBasePlot(e,t);l.length||l.push(u),t._has("cartesian")&&(rS.getComponentMethod("grid","contentDefaults")(e,t),u.finalizeSubplots(e,t));for(var c in t._subplots)t._subplots[c].sort(uE.subplotSort);for(a=0;a<l.length;a++)o=l[a],o.supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);var d=t._modules;for(a=0;a<d.length;a++)o=d[a],o.supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n);var f=t._transformModules;for(a=0;a<f.length;a++)o=f[a],o.supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n,r);for(i in s)o=s[i],o.supplyLayoutDefaults&&o.supplyLayoutDefaults(e,t,n)},dI.purge=function(e){var t=e._fullLayout||{};void 0!==t._glcontainer&&(t._glcontainer.selectAll(".gl-canvas").remove(),t._glcontainer.remove(),t._glcanvas=null),void 0!==t._geocontainer&&t._geocontainer.remove(),t._modeBar&&t._modeBar.destroy(),e._transitionData&&(e._transitionData._interruptCallbacks&&(e._transitionData._interruptCallbacks.length=0),e._transitionData._animationRaf&&window.cancelAnimationFrame(e._transitionData._animationRaf)),uE.clearThrottle(),delete e.data,delete e.layout,delete e._fullData,delete e._fullLayout,delete e.calcdata,delete e.framework,delete e.empty,delete e.fid,delete e.undoqueue,delete e.undonum,delete e.autoplay,delete e.changed,delete e._promises,delete e._redrawTimer,delete e.firstscatter,delete e._hmlumcount,delete e._hmpixcount,delete e._transitionData,delete e._transitioning,delete e._initialAutoSize,delete e._transitioningWithDuration,delete e._dragging,delete e._dragged,delete e._hoverdata,delete e._snapshotInProgress,delete e._editing,delete e._replotPending,delete e._mouseDownTime,delete e._legendMouseDownTime,e.removeAllListeners&&e.removeAllListeners()},dI.style=function(e){var t,n=e._fullLayout._modules,r=[];for(t=0;t<n.length;t++){var i=n[t];i.style&&uE.pushUnique(r,i.style)}for(t=0;t<r.length;t++)r[t](e)},dI.sanitizeMargins=function(e){if(e&&e.margin){var t,n=e.width,r=e.height,i=e.margin,a=n-(i.l+i.r),o=r-(i.t+i.b);a<0&&(t=(n-1)/(i.l+i.r),i.l=Math.floor(t*i.l),i.r=Math.floor(t*i.r)),o<0&&(t=(r-1)/(i.t+i.b),i.t=Math.floor(t*i.t),i.b=Math.floor(t*i.b))}},dI.autoMargin=function(e,t,n){var r=e._fullLayout;if(r._pushmargin||(r._pushmargin={}),!1!==r.margin.autoexpand){if(n){var i=void 0===n.pad?12:n.pad;n.l+n.r>.5*r.width&&(n.l=n.r=0),n.b+n.t>.5*r.height&&(n.b=n.t=0),r._pushmargin[t]={l:{val:n.x,size:n.l+i},r:{val:n.x,size:n.r+i},b:{val:n.y,size:n.b+i},t:{val:n.y,size:n.t+i}}}else delete r._pushmargin[t];r._replotting||dI.doAutoMargin(e)}},dI.doAutoMargin=function(e){var t=e._fullLayout;t._size||(t._size={}),t._pushmargin||(t._pushmargin={});var n=t._size,r=JSON.stringify(n),i=Math.max(t.margin.l||0,0),a=Math.max(t.margin.r||0,0),o=Math.max(t.margin.t||0,0),s=Math.max(t.margin.b||0,0),l=t._pushmargin;if(!1!==t.margin.autoexpand){l.base={l:{val:0,size:i},r:{val:1,size:a},t:{val:1,size:o},b:{val:0,size:s}};for(var u in l){var c=l[u].l||{},d=l[u].b||{},f=c.val,h=c.size,p=d.val,m=d.size;for(var g in l){if(SC(h)&&l[g].r){var y=l[g].r.val,v=l[g].r.size;if(y>f){var _=(h*y+(v-t.width)*f)/(y-f),b=(v*(1-f)+(h-t.width)*(1-y))/(y-f);_>=0&&b>=0&&_+b>i+a&&(i=_,a=b)}}if(SC(m)&&l[g].t){var x=l[g].t.val,w=l[g].t.size;if(x>p){var k=(m*x+(w-t.height)*p)/(x-p),T=(w*(1-p)+(m-t.height)*(1-x))/(x-p);k>=0&&T>=0&&k+T>s+o&&(s=k,o=T)}}}}}if(n.l=Math.round(i),n.r=Math.round(a),n.t=Math.round(o),n.b=Math.round(s),n.p=Math.round(t.margin.pad),n.w=Math.round(t.width)-n.l-n.r,n.h=Math.round(t.height)-n.t-n.b,!t._replotting&&"{}"!==r&&r!==JSON.stringify(t._size))return rS.call("plot",e)},dI.graphJson=function(e,t,n,r,i){function a(e){if("function"===typeof e)return null;if(uE.isPlainObject(e)){var t,r,i={};for(t in e)if("function"!==typeof e[t]&&-1===["_","["].indexOf(t.charAt(0))){if("keepdata"===n){if("src"===t.substr(t.length-3))continue}else if("keepstream"===n){if("string"===typeof(r=e[t+"src"])&&r.indexOf(":")>0&&!uE.isPlainObject(e.stream))continue}else if("keepall"!==n&&"string"===typeof(r=e[t+"src"])&&r.indexOf(":")>0)continue;i[t]=a(e[t])}return i}return Array.isArray(e)?e.map(a):uE.isJSDate(e)?uE.ms2DateTimeLocal(+e):e}(i&&t&&!e._fullData||i&&!t&&!e._fullLayout)&&dI.supplyDefaults(e);var o=i?e._fullData:e.data,s=i?e._fullLayout:e.layout,l=(e._transitionData||{})._frames,u={data:(o||[]).map(function(e){var n=a(e);return t&&delete n.fit,n})};return t||(u.layout=a(s)),e.framework&&e.framework.isPolar&&(u=e.framework.getConfig()),l&&(u.frames=a(l)),"object"===r?u:JSON.stringify(u)},dI.modifyFrames=function(e,t){var n,r,i,a=e._transitionData._frames,o=e._transitionData._frameHash;for(n=0;n<t.length;n++)switch(r=t[n],r.type){case"replace":i=r.value;var s=(a[r.index]||{}).name,l=i.name;a[r.index]=o[l]=i,l!==s&&(delete o[s],o[l]=i);break;case"insert":i=r.value,o[i.name]=i,a.splice(r.index,0,i);break;case"delete":i=a[r.index],delete o[i.name],a.splice(r.index,1)}return Promise.resolve()},dI.computeFrame=function(e,t){var n,r,i,a,o=e._transitionData._frameHash;if(!t)throw new Error("computeFrame must be given a string frame name");var s=o[t.toString()];if(!s)return!1;for(var l=[s],u=[s.name];s.baseframe&&(s=o[s.baseframe.toString()])&&-1===u.indexOf(s.name);)l.push(s),u.push(s.name);for(var c={};s=l.pop();)if(s.layout&&(c.layout=dI.extendLayout(c.layout,s.layout)),s.data){if(c.data||(c.data=[]),!(r=s.traces))for(r=[],n=0;n<s.data.length;n++)r[n]=n;for(c.traces||(c.traces=[]),n=0;n<s.data.length;n++)void 0!==(i=r[n])&&null!==i&&(a=c.traces.indexOf(i),-1===a&&(a=c.data.length,c.traces[a]=i),c.data[a]=dI.extendTrace(c.data[a],s.data[n]))}return c},dI.recomputeFrameHash=function(e){for(var t=e._transitionData._frameHash={},n=e._transitionData._frames,r=0;r<n.length;r++){var i=n[r];i&&i.name&&(t[i.name]=i)}},dI.extendObjectWithContainers=function(e,t,n){var r,i,a,o,s,l,u,c,d=uE.extendDeepNoArrays({},t||{}),f=uE.expandObjectPaths(d),h={};if(n&&n.length)for(a=0;a<n.length;a++)r=uE.nestedProperty(f,n[a]),i=r.get(),void 0===i?uE.nestedProperty(h,n[a]).set(null):(r.set(null),uE.nestedProperty(h,n[a]).set(i));if(e=uE.extendDeepNoArrays(e||{},f),n&&n.length)for(a=0;a<n.length;a++)if(s=uE.nestedProperty(h,n[a]),u=s.get()){for(l=uE.nestedProperty(e,n[a]),c=l.get(),Array.isArray(c)||(c=[],l.set(c)),o=0;o<u.length;o++){var p=u[o];c[o]=null===p?null:dI.extendObjectWithContainers(c[o],p)}l.set(c)}return e},dI.dataArrayContainers=["transforms","dimensions"],dI.layoutArrayContainers=rS.layoutArrayContainers,dI.extendTrace=function(e,t){return dI.extendObjectWithContainers(e,t,dI.dataArrayContainers)},dI.extendLayout=function(e,t){return dI.extendObjectWithContainers(e,t,dI.layoutArrayContainers)},dI.transition=function(e,t,n,r,i,a){function o(){var r;for(r=0;r<m.length;r++){var i=m[r],a=e._fullData[i],o=a._module;o&&(o.animatable&&g.push(i),e.data[m[r]]=dI.extendTrace(e.data[m[r]],t[r]))}var s=uE.expandObjectPaths(uE.extendDeepNoArrays({},n)),l=/^[xy]axis[0-9]*$/;for(var u in s)l.test(u)&&delete s[u].range;return dI.extendLayout(e.layout,s),delete e.calcdata,dI.supplyDefaults(e),dI.doCalcdata(e),rS.getComponentMethod("errorbars","calc")(e),Promise.resolve()}function s(e){var t=Promise.resolve();if(!e)return t;for(;e.length;)t=t.then(e.shift());return t}function l(e){if(e)for(;e.length;)e.shift()}function u(){return e.emit("plotly_transitioning",[]),new Promise(function(t){function r(){return l++,function(){u++,y||u!==l||c(t)}}e._transitioning=!0,a.duration>0&&(e._transitioningWithDuration=!0),e._transitionData._interruptCallbacks.push(function(){y=!0}),i.redraw&&e._transitionData._interruptCallbacks.push(function(){return rS.call("redraw",e)}),e._transitionData._interruptCallbacks.push(function(){e.emit("plotly_transitioninterrupted",[])});var o,s,l=0,u=0,d=e._fullLayout._basePlotModules,f=!1;if(n)for(s=0;s<d.length;s++)if(d[s].transitionAxes){var h=uE.expandObjectPaths(n);f=d[s].transitionAxes(e,h,a,r)||f}for(f?(o=uE.extendFlat({},a),o.duration=0):o=a,s=0;s<d.length;s++)d[s].plot(e,g,o,r);setTimeout(r())})}function c(t){if(e._transitionData)return l(e._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(i.redraw)return rS.call("redraw",e)}).then(function(){e._transitioning=!1,e._transitioningWithDuration=!1,e.emit("plotly_transitioned",[])}).then(t)}function d(){if(e._transitionData)return e._transitioning=!1,s(e._transitionData._interruptCallbacks)}var f,h,p=Array.isArray(t)?t.length:0,m=r.slice(0,p),g=[],y=!1;for(f=0;f<m.length;f++){h=m[f];var v=e._fullData[h];v._module}var _=[dI.previousPromises,d,o,dI.rehover,u],b=uE.syncOrAsync(_,e);return b&&b.then||(b=Promise.resolve()),b.then(function(){return e})},dI.doCalcdata=function(e,t){var n,r,i,a,o=oI.list(e),s=e._fullData,l=e._fullLayout,u=new Array(s.length),c=(e.calcdata||[]).slice(0);for(e.calcdata=u,e.firstscatter=!0,l._numBoxes=0,l._numViolins=0,l._violinScaleGroupStats={},e._hmpixcount=0,e._hmlumcount=0,l._piecolormap={},l._piecolorway=null,l._piedefaultcolorcount=0,i=0;i<s.length;i++)Array.isArray(t)&&-1===t.indexOf(i)&&(u[i]=c[i]);for(i=0;i<s.length;i++)n=s[i],n._arrayAttrs=eI.findArrayAttributes(n);var d=l._subplots.polar||[];for(i=0;i<d.length;i++)o.push(l[d[i]].radialaxis,l[d[i]].angularaxis);ze(o);var f=!1;for(i=0;i<s.length;i++)if(n=s[i],!0===n.visible&&n.transforms)for(r=n._module,r&&r.calc&&r.calc(e,n),a=0;a<n.transforms.length;a++){var h=n.transforms[a];r=hI[h.type],r&&r.calcTransform&&(n._hasCalcTransform=!0,f=!0,r.calcTransform(e,n,h))}for(f&&ze(o),i=0;i<s.length;i++){var p=[];if(n=s[i],!0===n.visible){r=n._module;var m=n.transforms||[];for(a=m.length-1;a>=0;a--)if(m[a].enabled){n._indexToPoints=m[a]._indexToPoints;break}r&&r.calc&&(p=r.calc(e,n))}Array.isArray(p)&&p[0]||(p=[{x:cI,y:cI}]),p[0].t||(p[0].t={}),p[0].trace=n,u[i]=p}rS.getComponentMethod("fx","calc")(e)},dI.rehover=function(e){e._fullLayout._rehover&&e._fullLayout._rehover()},dI.generalUpdatePerTraceModule=function(e,t,n,r){var i,a=t.traceHash,o={};for(i=0;i<n.length;i++){var s=n[i],l=s[0].trace;l.visible&&(o[l.type]=o[l.type]||[],o[l.type].push(s))}for(var u in a)if(!o[u]){var c=a[u][0],d=c[0].trace;d.visible=!1,o[u]=[c]}for(var f in o){var h=o[f];h[0][0].trace._module.plot(e,t,uE.filterVisible(h),r)}t.traceHash=o};var yI={draw:Re},vI=/ [XY][0-9]* /,_I=AC.FP_SAFE,bI={getAutoRange:De,makePadFn:Ne,doAutoRange:Fe,expand:Be},xI=AC.BADNUM,wI=function(e,t){return qe(e,t)?"date":Ge(e)?"category":We(e)?"linear":"-"},kI=uE.cleanNumber,TI=uE.ms2DateTime,MI=uE.dateTime2ms,AI=uE.ensureNumber,CI=AC.FP_SAFE,SI=AC.BADNUM,EI=function(e,t){function n(t,n){if(t>0)return Math.log(t)/Math.LN10;if(t<=0&&n&&e.range&&2===e.range.length){var r=e.range[0],i=e.range[1];return.5*(r+i-3*d*Math.abs(r-i))}return SI}function r(t,n,r){var i=MI(t,r||e.calendar);if(i===SI){if(!SC(t))return SI;i=MI(new Date(+t))}return i}function i(t,n,r){return TI(t,n,r||e.calendar)}function a(t){return e._categories[Math.round(t)]}function o(t){if(null!==t&&void 0!==t){if(void 0===e._categoriesMap&&(e._categoriesMap={}),void 0!==e._categoriesMap[t])return e._categoriesMap[t];e._categories.push(t);var n=e._categories.length-1;return e._categoriesMap[t]=n,n}return SI}function s(t){if(e._categoriesMap){var n=e._categoriesMap[t];if(void 0!==n)return n}if(SC(t))return+t}function l(t){return SC(t)?CC.round(e._b+e._m*t,2):SI}function u(t){return(t-e._b)/e._m}t=t||{};var c=(e._id||"x").charAt(0),d=10;e.c2l="log"===e.type?n:AI,e.l2c="log"===e.type?Ye:AI,e.l2p=l,e.p2l=u,e.c2p="log"===e.type?function(e,t){return l(n(e,t))}:l,e.p2c="log"===e.type?function(e){return Ye(u(e))}:u,-1!==["linear","-"].indexOf(e.type)?(e.d2r=e.r2d=e.d2c=e.r2c=e.d2l=e.r2l=kI,e.c2d=e.c2r=e.l2d=e.l2r=AI,e.d2p=e.r2p=function(t){return e.l2p(kI(t))},e.p2d=e.p2r=u,e.cleanPos=AI):"log"===e.type?(e.d2r=e.d2l=function(e,t){return n(kI(e),t)},e.r2d=e.r2c=function(e){return Ye(kI(e))},e.d2c=e.r2l=kI,e.c2d=e.l2r=AI,e.c2r=n,e.l2d=Ye,e.d2p=function(t,n){return e.l2p(e.d2r(t,n))},e.p2d=function(e){return Ye(u(e))},e.r2p=function(t){return e.l2p(kI(t))},e.p2r=u,e.cleanPos=AI):"date"===e.type?(e.d2r=e.r2d=uE.identity,e.d2c=e.r2c=e.d2l=e.r2l=r,e.c2d=e.c2r=e.l2d=e.l2r=i,e.d2p=e.r2p=function(t,n,i){return e.l2p(r(t,0,i))},e.p2d=e.p2r=function(e,t,n){return i(u(e),t,n)},e.cleanPos=function(t){return uE.cleanDate(t,SI,e.calendar)}):"category"===e.type&&(e.d2c=e.d2l=o,e.r2d=e.c2d=e.l2d=a,e.d2r=e.d2l_noadd=s,e.r2c=function(t){var n=s(t);return void 0!==n?n:e.fraction2r(.5)},e.l2r=e.c2r=AI,e.r2l=s,e.d2p=function(t){return e.l2p(e.r2c(t))},e.p2d=function(e){return a(u(e))},e.r2p=e.d2p,e.p2r=u,e.cleanPos=function(e){return"string"===typeof e&&""!==e?e:AI(e)}),e.fraction2r=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return e.l2r(n+t*(r-n))},e.r2fraction=function(t){var n=e.r2l(e.range[0]),r=e.r2l(e.range[1]);return(e.r2l(t)-n)/(r-n)},e.cleanRange=function(t,n){n||(n={}),t||(t="range");var r,i,a=uE.nestedProperty(e,t).get();if(i="date"===e.type?uE.dfltRange(e.calendar):"y"===c?EE.DFLTRANGEY:n.dfltRange||EE.DFLTRANGEX,i=i.slice(),!a||2!==a.length)return void uE.nestedProperty(e,t).set(i);for("date"===e.type&&(a[0]=uE.cleanDate(a[0],SI,e.calendar),a[1]=uE.cleanDate(a[1],SI,e.calendar)),r=0;r<2;r++)if("date"===e.type){if(!uE.isDateTime(a[r],e.calendar)){e[t]=i;break}if(e.r2l(a[0])===e.r2l(a[1])){var o=uE.constrain(e.r2l(a[0]),uE.MIN_MS+1e3,uE.MAX_MS-1e3);a[0]=e.l2r(o-1e3),a[1]=e.l2r(o+1e3);break}}else{if(!SC(a[r])){if(!SC(a[1-r])){e[t]=i;break}a[r]=a[1-r]*(r?10:.1)}if(a[r]<-CI?a[r]=-CI:a[r]>CI&&(a[r]=CI),a[0]===a[1]){var s=Math.max(1,Math.abs(1e-6*a[0]));a[0]-=s,a[1]+=s}}},e.setScale=function(n){var r=t._size;if(e._categories||(e._categories=[]),e._categoriesMap||(e._categoriesMap={}),e.overlaying){var i=oI.getFromId({_fullLayout:t},e.overlaying);e.domain=i.domain}var a=n&&e._r?"_r":"range",o=e.calendar;e.cleanRange(a);var s=e.r2l(e[a][0],o),l=e.r2l(e[a][1],o);if("y"===c?(e._offset=r.t+(1-e.domain[1])*r.h,e._length=r.h*(e.domain[1]-e.domain[0]),e._m=e._length/(s-l),e._b=-e._m*l):(e._offset=r.l+e.domain[0]*r.w,e._length=r.w*(e.domain[1]-e.domain[0]),e._m=e._length/(l-s),e._b=-e._m*s),!isFinite(e._m)||!isFinite(e._b))throw t._replotting=!1,new Error("Something went wrong with axis scaling")},e.makeCalcdata=function(t,n){var r,i,a,o,s=e.type,l="date"===s&&t[n+"calendar"];if(n in t){if(r=t[n],o=t._length||r.length,uE.isTypedArray(r)&&("linear"===s||"log"===s)){if(o===r.length)return r;if(r.subarray)return r.subarray(0,o)}for(i=new Array(o),a=0;a<o;a++)i[a]=e.d2c(r[a],0,l)}else{var u=n+"0"in t?e.d2c(t[n+"0"],0,l):0,c=t["d"+n]?Number(t["d"+n]):1;for(r=t[{x:"y",y:"x"}[n]],o=t._length||r.length,i=new Array(o),a=0;a<o;a++)i[a]=u+a*c}return i},e.isValidRange=function(t){return Array.isArray(t)&&2===t.length&&SC(e.r2l(t[0]))&&SC(e.r2l(t[1]))},e.isPtWithinRange=function(t,n){var r=e.c2l(t[c],null,n);return r>=e.r2l(e.range[0])&&r<=e.r2l(e.range[1])},e.clearCalc=function(){e._min=[],e._max=[],e._categories=(e._initialCategories||[]).slice(),e._categoriesMap={};for(var t=0;t<e._categories.length;t++)e._categoriesMap[e._categories[t]]=t};var f=t._d3locale;"date"===e.type&&(e._dateFormat=f?f.timeFormat.utc:CC.time.format.utc,e._extraFormat=t._extraFormat),e._separators=t.separators,e._numFormat=f?f.numberFormat:CC.format,delete e._minDtick,delete e._forceTick0},PI={},II=AC.ONEAVGYEAR,LI=AC.ONEAVGMONTH,OI=AC.ONEDAY,zI=AC.ONEHOUR,RI=AC.ONEMIN,DI=AC.ONESEC,NI=AC.MINUS_SIGN,FI=AC.BADNUM,jI=iP.MID_SHIFT,BI=iP.LINE_SPACING,UI=PI={};UI.setConvert=EI,UI.id2name=oI.id2name,UI.name2id=oI.name2id,UI.cleanId=oI.cleanId,UI.list=oI.list,UI.listIds=oI.listIds,UI.getFromId=oI.getFromId,UI.getFromTrace=oI.getFromTrace,UI.expand=bI.expand,UI.getAutoRange=bI.getAutoRange,UI.coerceRef=function(e,t,n,r,i,a){var o=r.charAt(r.length-1),s=n._fullLayout._subplots[o+"axis"],l=r+"ref",u={};return i||(i=s[0]||a),a||(a=i),u[l]={valType:"enumerated",values:s.concat(a?[a]:[]),dflt:i},uE.coerce(e,t,u,l)},UI.coercePosition=function(e,t,n,r,i,a){var o,s;if("paper"===r||"pixel"===r)o=uE.ensureNumber,s=n(i,a);else{var l=UI.getFromId(t,r);a=l.fraction2r(a),s=n(i,a),o=l.cleanPos}e[i]=o(s)},UI.cleanPosition=function(e,t,n){return("paper"===n||"pixel"===n?uE.ensureNumber:UI.getFromId(t,n).cleanPos)(e)};var VI=UI.getDataConversions=function(e,t,n,r){var i,a="x"===n||"y"===n||"z"===n?n:r;if(Array.isArray(a)){if(i={type:wI(r),_categories:[]},UI.setConvert(i),"category"===i.type)for(var o=0;o<r.length;o++)i.d2c(r[o])}else i=UI.getFromTrace(e,t,a);return i?{d2c:i.d2c,c2d:i.c2d}:"ids"===a?{d2c:Ze,c2d:Ze}:{d2c:Xe,c2d:Xe}};UI.getDataToCoordFunc=function(e,t,n,r){return VI(e,t,n,r).d2c},UI.counterLetter=function(e){var t=e.charAt(0);return"x"===t?"y":"y"===t?"x":void 0},UI.minDtick=function(e,t,n,r){-1===["log","category"].indexOf(e.type)&&r?void 0===e._minDtick?(e._minDtick=t,e._forceTick0=n):e._minDtick&&((e._minDtick/t+1e-6)%1<2e-6&&((n-e._forceTick0)/t%1+1.000001)%1<2e-6?(e._minDtick=t,e._forceTick0=n):((t/e._minDtick+1e-6)%1>2e-6||((n-e._forceTick0)/e._minDtick%1+1.000001)%1>2e-6)&&(e._minDtick=0)):e._minDtick=0},UI.saveRangeInitial=function(e,t){for(var n=UI.list(e,"",!0),r=!1,i=0;i<n.length;i++){var a=n[i],o=void 0===a._rangeInitial,s=o||!(a.range[0]===a._rangeInitial[0]&&a.range[1]===a._rangeInitial[1]);(o&&!1===a.autorange||t&&s)&&(a._rangeInitial=a.range.slice(),r=!0)}return r},UI.saveShowSpikeInitial=function(e,t){for(var n=UI.list(e,"",!0),r=!1,i="on",a=0;a<n.length;a++){var o=n[a],s=void 0===o._showSpikeInitial,l=s||!(o.showspikes===o._showspikes);(s||t&&l)&&(o._showSpikeInitial=o.showspikes,r=!0),"on"!==i||o.showspikes||(i="off")}return e._fullLayout._cartesianSpikesEnabled=i,r},UI.autoBin=function(e,t,n,r,i){var a=uE.aggNums(Math.min,null,e),o=uE.aggNums(Math.max,null,e);if(i||(i=t.calendar),"category"===t.type)return{start:a-.5,end:o+.5,size:1,_dataSpan:o-a};var s;if(n)s=(o-a)/n;else{var l=uE.distinctVals(e),u=Math.pow(10,Math.floor(Math.log(l.minDiff)/Math.LN10)),c=u*uE.roundUp(l.minDiff/u,[.9,1.9,4.9,9.9],!0);s=Math.max(c,2*uE.stdev(e)/Math.pow(e.length,r?.25:.4)),SC(s)||(s=1)}var d;d="log"===t.type?{type:"linear",range:[a,o]}:{type:t.type,range:uE.simpleMap([a,o],t.c2r,0,i),calendar:i},UI.setConvert(d),UI.autoTicks(d,s);var f,h,p=UI.tickIncrement(UI.tickFirst(d),d.dtick,"reverse",i);if("number"===typeof d.dtick)p=Je(p,e,d,a,o),h=1+Math.floor((o-p)/d.dtick),f=p+h*d.dtick;else for("M"===d.dtick.charAt(0)&&(p=Ke(p,e,d.dtick,a,i)),f=p,h=0;f<=o;)f=UI.tickIncrement(f,d.dtick,!1,i),h++;return{start:t.c2r(p,0,i),end:t.c2r(f,0,i),size:d.dtick,_dataSpan:o-a}},UI.prepTicks=function(e){var t=uE.simpleMap(e.range,e.r2l);if("auto"===e.tickmode||!e.dtick){var n,r=e.nticks;r||("category"===e.type?(n=e.tickfont?1.2*(e.tickfont.size||12):15,r=e._length/n):(n="y"===e._id.charAt(0)?40:80,r=uE.constrain(e._length/n,4,9)+1),"radialaxis"===e._name&&(r*=2)),"array"===e.tickmode&&(r*=100),UI.autoTicks(e,Math.abs(t[1]-t[0])/r),e._minDtick>0&&e.dtick<2*e._minDtick&&(e.dtick=e._minDtick,e.tick0=e.l2r(e._forceTick0))}e.tick0||(e.tick0="date"===e.type?"2000-01-01":0),et(e)},UI.calcTicks=function(e){UI.prepTicks(e);var t=uE.simpleMap(e.range,e.r2l);if("array"===e.tickmode)return Qe(e);e._tmin=UI.tickFirst(e);var n=1.0001*t[0]-1e-4*t[1],r=1.0001*t[1]-1e-4*t[0],i=t[1]<t[0];if(e._tmin<n!==i)return[];var a=[];"category"===e.type&&(r=i?Math.max(-.5,r):Math.min(e._categories.length-.5,r));for(var o=null,s=Math.max(1e3,e._length||0),l=e._tmin;(i?l>=r:l<=r)&&!(a.length>s||l===o);l=UI.tickIncrement(l,e.dtick,i,e.calendar))o=l,a.push(l);"angular"===e._id&&360===Math.abs(t[1]-t[0])&&a.pop(),e._tmax=a[a.length-1],e._prevDateHead="",e._inCalcTicks=!0;for(var u=new Array(a.length),c=0;c<a.length;c++)u[c]=UI.tickText(e,a[c]);return e._inCalcTicks=!1,u};var HI=[2,5,10],WI=[1,2,3,6,12],qI=[1,2,5,10,15,30],GI=[1,2,3,7,14],YI=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],XI=[-.301,0,.301,.699,1],ZI=[15,30,45,90,180];UI.autoTicks=function(e,t){function n(e){return Math.pow(e,Math.floor(Math.log(t)/Math.LN10))}var r;if("date"===e.type){e.tick0=uE.dateTick0(e.calendar);var i=2*t;i>II?(t/=II,r=n(10),e.dtick="M"+12*$e(t,r,HI)):i>LI?(t/=LI,e.dtick="M"+$e(t,1,WI)):i>OI?(e.dtick=$e(t,OI,GI),e.tick0=uE.dateTick0(e.calendar,!0)):i>zI?e.dtick=$e(t,zI,WI):i>RI?e.dtick=$e(t,RI,qI):i>DI?e.dtick=$e(t,DI,qI):(r=n(10),e.dtick=$e(t,r,HI))}else if("log"===e.type){e.tick0=0;var a=uE.simpleMap(e.range,e.r2l);if(t>.7)e.dtick=Math.ceil(t);else if(Math.abs(a[1]-a[0])<1){var o=1.5*Math.abs((a[1]-a[0])/t);t=Math.abs(Math.pow(10,a[1])-Math.pow(10,a[0]))/o,r=n(10),e.dtick="L"+$e(t,r,HI)}else e.dtick=t>.3?"D2":"D1"}else"category"===e.type?(e.tick0=0,e.dtick=Math.ceil(Math.max(t,1))):"angular"===e._id?(e.tick0=0,r=1,e.dtick=$e(t,r,ZI)):(e.tick0=0,r=n(10),e.dtick=$e(t,r,HI));if(0===e.dtick&&(e.dtick=1),!SC(e.dtick)&&"string"!==typeof e.dtick){var s=e.dtick;throw e.dtick=1,"ax.dtick error: "+String(s)}},UI.tickIncrement=function(e,t,n,r){var i=n?-1:1;if(SC(t))return e+i*t;var a=t.charAt(0),o=i*Number(t.substr(1));if("M"===a)return uE.incrementMonth(e,o,r);if("L"===a)return Math.log(Math.pow(10,e)+o)/Math.LN10;if("D"===a){var s="D2"===t?XI:YI,l=e+.01*i,u=uE.roundUp(uE.mod(l,1),s,n);return Math.floor(l)+Math.log(CC.round(Math.pow(10,u),1))/Math.LN10}throw"unrecognized dtick "+String(t)},UI.tickFirst=function(e){var t=e.r2l||Number,n=uE.simpleMap(e.range,t),r=n[1]<n[0],i=r?Math.floor:Math.ceil,a=1.0001*n[0]-1e-4*n[1],o=e.dtick,s=t(e.tick0);if(SC(o)){var l=i((a-s)/o)*o+s;return"category"===e.type&&(l=uE.constrain(l,0,e._categories.length-1)),l}var u=o.charAt(0),c=Number(o.substr(1));if("M"===u){for(var d,f,h,p=0,m=s;p<10;){if(((d=UI.tickIncrement(m,o,r,e.calendar))-a)*(m-a)<=0)return r?Math.min(m,d):Math.max(m,d);f=(a-(m+d)/2)/(d-m),h=u+(Math.abs(Math.round(f))||1)*c,m=UI.tickIncrement(m,h,f<0?!r:r,e.calendar),p++}return uE.error("tickFirst did not converge",e),m}if("L"===u)return Math.log(i((Math.pow(10,a)-s)/c)*c+s)/Math.LN10;if("D"===u){var g="D2"===o?XI:YI,y=uE.roundUp(uE.mod(a,1),g,r);return Math.floor(a)+Math.log(CC.round(Math.pow(10,y),1))/Math.LN10}throw"unrecognized dtick "+String(o)},UI.tickText=function(e,t,n){function r(r){var i;return void 0===r||(n?"none"===r:(i={first:e._tmin,last:e._tmax}[r],"all"!==r&&t!==i))}var i,a,o=tt(e,t),s="array"===e.tickmode,l=n||s,u="category"===e.type?e.d2l_noadd:e.d2l;if(s&&Array.isArray(e.ticktext)){var c=uE.simpleMap(e.range,e.r2l),d=Math.abs(c[1]-c[0])/1e4;for(a=0;a<e.ticktext.length&&!(Math.abs(t-u(e.tickvals[a]))<d);a++);if(a<e.ticktext.length)return o.text=String(e.ticktext[a]),o}return i=n?"never":"none"!==e.exponentformat&&r(e.showexponent)?"hide":"","date"===e.type?nt(e,o,n,l):"log"===e.type?rt(e,o,n,l,i):"category"===e.type?it(e,o):"angular"===e._id?ot(e,o,n,l,i):at(e,o,n,l,i),e.tickprefix&&!r(e.showtickprefix)&&(o.text=e.tickprefix+o.text),e.ticksuffix&&!r(e.showticksuffix)&&(o.text+=e.ticksuffix),o},UI.hoverLabelText=function(e,t,n){if(n!==FI&&n!==t)return UI.hoverLabelText(e,t)+" - "+UI.hoverLabelText(e,n);var r="log"===e.type&&t<=0,i=UI.tickText(e,e.c2l(r?-t:t),"hover").text;return r?0===t?"0":NI+i:i};var JI=["f","p","n","\u03bc","m","","k","M","G","T"];UI.getTickFormat=function(e){function t(e){return"string"!==typeof e?e:Number(e.replace("M",""))*LI}function n(e,t){var n=["L","D"];if(typeof e===typeof t){if("number"===typeof e)return e-t;var r=n.indexOf(e.charAt(0)),i=n.indexOf(t.charAt(0));return r===i?Number(e.replace(/(L|D)/g,""))-Number(t.replace(/(L|D)/g,"")):r-i}return"number"===typeof e?1:-1}var r,i;if(e.tickformatstops&&e.tickformatstops.length>0)switch(e.type){case"date":case"linear":for(r=0;r<e.tickformatstops.length;r++)if(function(e,t,n){var r=n||function(e){return e},i=t[0],a=t[1];return(!i&&"number"!==typeof i||r(i)<=r(e))&&(!a&&"number"!==typeof a||r(a)>=r(e))}(e.dtick,e.tickformatstops[r].dtickrange,t)){i=e.tickformatstops[r];break}break;case"log":for(r=0;r<e.tickformatstops.length;r++)if(function(e,t){var r=null===t[0],i=null===t[1],a=n(e,t[0])>=0,o=n(e,t[1])<=0;return(r||a)&&(i||o)}(e.dtick,e.tickformatstops[r].dtickrange)){i=e.tickformatstops[r];break}}return i?i.value:e.tickformat},UI.getSubplots=function(e,t){var n=e._fullLayout._subplots,r=n.cartesian.concat(n.gl2d||[]),i=t?UI.findSubplotsWithAxis(r,t):r;return i.sort(function(e,t){var n=e.substr(1).split("y"),r=t.substr(1).split("y");return n[0]===r[0]?+n[1]-+r[1]:+n[0]-+r[0]}),i},UI.findSubplotsWithAxis=function(e,t){for(var n=new RegExp("x"===t._id.charAt(0)?"^"+t._id+"y":t._id+"$"),r=[],i=0;i<e.length;i++){var a=e[i];n.test(a)&&r.push(a)}return r},UI.makeClipPaths=function(e){var t,n,r=e._fullLayout,i={_offset:0,_length:r.width,_id:""},a={_offset:0,_length:r.height,_id:""},o=UI.list(e,"x",!0),s=UI.list(e,"y",!0),l=[];for(t=0;t<o.length;t++)for(l.push({x:o[t],y:a}),n=0;n<s.length;n++)0===t&&l.push({x:i,y:s[n]}),l.push({x:o[t],y:s[n]});var u=r._clips.selectAll(".axesclip").data(l,function(e){return e.x._id+e.y._id});u.enter().append("clipPath").classed("axesclip",!0).attr("id",function(e){return"clip"+r._uid+e.x._id+e.y._id}).append("rect"),u.exit().remove(),u.each(function(e){CC.select(this).select("rect").attr({x:e.x._offset||0,y:e.y._offset||0,width:e.x._length||1,height:e.y._length||1})})},UI.doTicks=function(e,t,n){function r(e){var t=u.l2p(e.x);return t>1&&t<u._length-1}function i(e,t){var n=e.selectAll("path."+x).data("inside"===u.ticks?O:_,b);t&&u.ticks?(n.enter().append("path").classed(x,1).classed("ticks",1).classed("crisp",1).call(jE.stroke,u.tickcolor).style("stroke-width",E+"px").attr("d",t),n.attr("transform",h),n.exit().remove()):n.remove()}function a(n,r){function i(e,t,n){var r=(e-1)*t;if("x"===y){if(n<-60||60<n)return-.5*r;if("top"===I)return-r}else{if((n*="left"===I?1:-1)<-30)return-r;if(n<30)return-.5*r}return 0}function a(e,t){e.each(function(e){var n=k(t,e),r=CC.select(this),a=r.select(".text-math-group"),o=h.call(r.node(),e)+(SC(t)&&0!==+t?" rotate("+t+","+v(e)+","+(w(e)-e.fontSize/2)+")":""),s=i(sP.lineCount(r),BI*e.fontSize,SC(t)?+t:0);if(s&&(o+=" translate(0, "+s+")"),a.empty())r.select("text").attr({transform:o,"text-anchor":n});else{var l=PP.bBox(a.node()).width*{end:-.5,start:.5}[n];a.attr("transform",o+(l?"translate("+l+",0)":""))}})}function s(){return L.length&&Promise.all(L)}function l(){if(a(p,u.tickangle),"x"===y&&!SC(u.tickangle)&&("log"!==u.type||"D"!==String(u.dtick).charAt(0))){var e=[];for(p.each(function(t){var n=CC.select(this),r=n.select(".text-math-group"),i=u.l2p(t.x);r.empty()&&(r=n.select("text"));var a=PP.bBox(r.node());e.push({top:0,bottom:10,height:10,left:i-a.width/2,right:i+a.width/2+2,width:a.width+2})}),g=0;g<e.length-1;g++)if(uE.bBoxIntersect(e[g],e[g+1])){P=30;break}if(P){Math.abs((_[_.length-1].x-_[0].x)*u._m)/(_.length-1)<2.5*E&&(P=90),a(p,P)}u._lastangle=P}return o(),t+" done"}function d(){function t(e,t){e[0]=Math.min(e[0],t[0]),e[1]=Math.max(e[1],t[1])}if(u.showticklabels){var r=e.getBoundingClientRect(),i=n.node().getBoundingClientRect();u._boundingBox={width:i.width,height:i.height,left:i.left-r.left,right:i.right-r.left,top:i.top-r.top,bottom:i.bottom-r.top}}else{var a,o=c._size;"x"===y?(a="free"===u.anchor?o.t+o.h*(1-u.position):o.t+o.h*(1-u._anchorAxis.domain[{bottom:0,top:1}[u.side]]),u._boundingBox={top:a,bottom:a,left:u._offset,right:u._offset+u._length,width:u._length,height:0}):(a="free"===u.anchor?o.l+o.w*u.position:o.l+o.w*u._anchorAxis.domain[{left:0,right:1}[u.side]],u._boundingBox={left:a,right:a,bottom:u._offset+u._length,top:u._offset,height:u._length,width:0})}if(m){var s=u._counterSpan=[1/0,-1/0];for(g=0;g<m.length;g++){var l=c._plots[m[g]],d=l["x"===y?"yaxis":"xaxis"];t(s,[d._offset,d._offset+d._length])}"free"===u.anchor&&t(s,"x"===y?[u._boundingBox.bottom,u._boundingBox.top]:[u._boundingBox.right,u._boundingBox.left])}}function f(){if(u.automargin&&("x"===y||"y"===y)){var t=u.side[0],n={x:0,y:0,r:0,l:0,t:0,b:0};"x"===y?(n.y="free"===u.anchor?u.position:u._anchorAxis.domain["t"===t?1:0],n[t]+=u._boundingBox.height):(n.x="free"===u.anchor?u.position:u._anchorAxis.domain["r"===t?1:0],n[t]+=u._boundingBox.width),u.title!==c._dfltTitle[y]&&(n[t]+=u.titlefont.size);var r=u._name+".automargin",i=c._pushmargin[r];(!i||i[t].size<n[t])&&lI.autoMargin(e,r,n)}}var p=n.selectAll("g."+x).data(_,b);if(!SC(r))return p.remove(),void o();if(!u.showticklabels)return p.remove(),o(),void d();var v,w,k,C,S;"x"===y?(S="bottom"===I?1:-1,v=function(e){return e.dx+A*S},C=r+(M+T)*S,w=function(e){return e.dy+C+e.fontSize*("bottom"===I?1:-.2)},k=function(e){return SC(e)&&0!==e&&180!==e?e*S<0?"end":"start":"middle"}):"y"===y?(S="right"===I?1:-1,w=function(e){return e.dy+e.fontSize*jI-A*S},v=function(e){return e.dx+r+(M+T+(90===Math.abs(u.tickangle)?e.fontSize/2:0))*S},k=function(e){return SC(e)&&90===Math.abs(e)?"middle":"right"===I?"start":"end"}):"angular"===t&&(u._labelShift=A,u._labelStandoff=M,u._pad=T,v=u._labelx,w=u._labely,k=u._labelanchor);var E=0,P=0,L=[];p.enter().append("g").classed(x,1).append("text").attr("text-anchor","middle").each(function(t){var n=CC.select(this),r=e._promises.length;n.call(sP.positionText,v(t),w(t)).call(PP.font,t.font,t.fontSize,t.fontColor).text(t.text).call(sP.convertToTspans,e),r=e._promises[r],r?L.push(e._promises.pop().then(function(){a(n,u.tickangle)})):a(n,u.tickangle)}),p.exit().remove(),p.each(function(e){E=Math.max(E,e.fontSize)}),"angular"===t&&p.each(function(e){CC.select(this).select("text").call(sP.positionText,v(e),w(e))}),a(p,u._lastangle||u.tickangle);var O=uE.syncOrAsync([s,l,d,f]);return O&&O.then&&e._promises.push(O),O}function o(){if(!n){var r=oI.getFromId(e,t);if(!(r.rangeslider&&r.rangeslider.visible&&r._boundingBox&&"bottom"===r.side)){var i,a,o,s,l=CC.select(e).selectAll("g."+t+"tick"),u={selection:l,side:r.side},d=t.charAt(0),f=e._fullLayout._size,h=r.titlefont.size;if(l.size()){var p=PP.getTranslate(l.node().parentNode);u.offsetLeft=p.x,u.offsetTop=p.y}var m=10+1.5*h+(r.linewidth?r.linewidth-1:0);"x"===d?(a="free"===r.anchor?{_offset:f.t+(1-(r.position||0))*f.h,_length:0}:oI.getFromId(e,r.anchor),o=r._offset+r._length/2,s="top"===r.side?-m-h*(r.showticklabels?1:0):a._length+m+h*(r.showticklabels?1.5:.5),s+=a._offset,u.side||(u.side="bottom")):(a="free"===r.anchor?{_offset:f.l+(r.position||0)*f.w,_length:0}:oI.getFromId(e,r.anchor),s=r._offset+r._length/2,o="right"===r.side?a._length+m+h*(r.showticklabels?1:.5):-m-h*(r.showticklabels?.5:0),o+=a._offset,i={rotate:"-90",offset:0},u.side||(u.side="left")),yI.draw(e,t+"title",{propContainer:r,propName:r._name+".title",placeholder:c._dfltTitle[d],avoid:u,transform:i,attributes:{x:o,y:s,"text-anchor":"middle"}})}}}function s(e,t){return!0===e.visible&&e.xaxis+e.yaxis===t&&(!(!rS.traceIs(e,"bar")||e.orientation!=={x:"h",y:"v"}[y])||e.fill&&e.fill.charAt(e.fill.length-1)===y)}function l(n,i,a){var o=n.gridlayer.selectAll("."+t),l=n.zerolinelayer,c=n["hidegrid"+y]?[]:O,d=u._gridpath||("x"===y?"M0,"+i._offset+"v":"M"+i._offset+",0h")+i._length,f=o.selectAll("path."+w).data(!1===u.showgrid?[]:c,b);if(f.enter().append("path").classed(w,1).classed("crisp",1).attr("d",d).each(function(e){u.zeroline&&("linear"===u.type||"-"===u.type)&&Math.abs(e.x)<u.dtick/100&&CC.select(this).remove()}),f.attr("transform",h).call(jE.stroke,u.gridcolor||"#ddd").style("stroke-width",C+"px"),"function"===typeof d&&f.attr("d",d),f.exit().remove(),l){for(var p=!1,m=0;m<e._fullData.length;m++)if(s(e._fullData[m],a)){p=!0;break}var g=uE.simpleMap(u.range,u.r2l),v=g[0]*g[1]<=0&&u.zeroline&&("linear"===u.type||"-"===u.type)&&c.length&&(p||r({x:0})||!u.showline),_=l.selectAll("path."+k).data(v?[{x:0,id:t}]:[]);_.enter().append("path").classed(k,1).classed("zl",1).classed("crisp",1).attr("d",d).each(function(){l.selectAll("path").sort(function(e,t){return oI.idSort(e.id,t.id)})}),_.attr("transform",h).call(jE.stroke,u.zerolinecolor||jE.defaultLine).style("stroke-width",S+"px"),_.exit().remove()}}var u,c=e._fullLayout,d=!1;if("object"===typeof t)u=t,t=u._id,d=!0;else if(u=UI.getFromId(e,t),"redraw"===t&&c._paper.selectAll("g.subplot").each(function(e){var t=c._plots[e],n=t.xaxis,r=t.yaxis;t.xaxislayer.selectAll("."+n._id+"tick").remove(),t.yaxislayer.selectAll("."+r._id+"tick").remove(),t.gridlayer.selectAll("path").remove(),t.zerolinelayer.selectAll("path").remove(),c._infolayer.select(".g-"+n._id+"title").remove(),c._infolayer.select(".g-"+r._id+"title").remove()}),!t||"redraw"===t)return uE.syncOrAsync(UI.list(e,"",!0).map(function(n){return function(){if(n._id){var r=UI.doTicks(e,n._id);return"redraw"===t&&(n._r=n.range.slice(),n._rl=uE.simpleMap(n._r,n.r2l)),r}}}));u.setScale();var f,h,p,m,g,y=t.charAt(0),v=UI.counterLetter(t),_=UI.calcTicks(u),b=function(e){return[e.text,e.x,u.mirror,e.font,e.fontSize,e.fontColor].join("_")},x=t+"tick",w=t+"grid",k=t+"zl",T=(u.linewidth||1)/2,M="outside"===u.ticks?u.ticklen:0,A=0,C=PP.crispRound(e,u.gridwidth,1),S=PP.crispRound(e,u.zerolinewidth,C),E=PP.crispRound(e,u.tickwidth,1);if(u._counterangle&&"outside"===u.ticks){var P=u._counterangle*Math.PI/180;M=u.ticklen*Math.cos(P)+1,A=u.ticklen*Math.sin(P)}if(u.showticklabels&&("outside"===u.ticks||u.showline)&&(M+=.2*u.tickfont.size),"x"===y)f=["bottom","top"],h=u._transfn||function(e){return"translate("+(u._offset+u.l2p(e.x))+",0)"},p=function(e,t){if(u._counterangle){var n=u._counterangle*Math.PI/180;return"M0,"+e+"l"+Math.sin(n)*t+","+Math.cos(n)*t}return"M0,"+e+"v"+t};else if("y"===y)f=["left","right"],h=u._transfn||function(e){return"translate(0,"+(u._offset+u.l2p(e.x))+")"},p=function(e,t){if(u._counterangle){var n=u._counterangle*Math.PI/180;return"M"+e+",0l"+Math.cos(n)*t+","+-Math.sin(n)*t}return"M"+e+",0h"+t};else{if("angular"!==t)return void uE.warn("Unrecognized doTicks axis:",t);f=["left","right"],h=u._transfn,p=function(e,t){return"M"+e+",0h"+t}}var I=u.side||f[0],L=[-1,1,I===f[1]?1:-1];if("inside"!==u.ticks===("x"===y)&&(L=L.map(function(e){return-e})),u.visible){u._tickFilter&&(_=_.filter(u._tickFilter));var O=_.filter(r);if("angular"===u._id&&(O=_),d){if(i(u._axislayer,p(u._pos+T*L[2],L[2]*u.ticklen)),u._counteraxis){l({gridlayer:u._gridlayer,zerolinelayer:u._zerolinelayer},u._counteraxis)}return a(u._axislayer,u._pos)}if(c._has("cartesian")){m=UI.getSubplots(e,u);var z={};m.map(function(e){var t=c._plots[e],n=t[v+"axis"],r=n._mainAxis._id;z[r]||(z[r]=1,l(t,n,e))});var R=u._mainSubplot,D=c._plots[R],N=[];if(u.ticks){var F=L[2],j=p(u._mainLinePosition+T*F,F*u.ticklen);u._anchorAxis&&u.mirror&&!0!==u.mirror&&(j+=p(u._mainMirrorPosition-T*F,-F*u.ticklen)),i(D[y+"axislayer"],j),N=Object.keys(u._linepositions)}N.map(function(e){function t(e){var t=L[e];return p(a[e]+T*t,t*u.ticklen)}var n=c._plots[e],r=n[y+"axislayer"],a=u._linepositions[e]||[];i(r,t(0)+t(1))});return a(D[y+"axislayer"],u._mainLinePosition)}}},UI.swap=function(e,t){for(var n=dt(e,t),r=0;r<n.length;r++)ht(e,n[r].x,n[r].y)};var KI={};KI.pointsAccessorFunction=function(e,t){for(var n,r,i=0;i<e.length&&(n=e[i])!==t;i++)n._indexToPoints&&!1!==n.enabled&&(r=n._indexToPoints);return r?function(e){return r[e]}:function(e){return[e]}};var QI={},$I=KI.pointsAccessorFunction,eL=AC.BADNUM;QI.moduleType="transform",QI.name="aggregate";var tL=QI.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},nL=tL.aggregations;QI.supplyDefaults=function(e,t){function n(t,n){return uE.coerce(e,a,tL,t,n)}function r(e,t){return uE.coerce(c[i],u,nL,e,t)}var i,a={};if(!n("enabled"))return a;var o=eI.findArrayAttributes(t),s={};for(i=0;i<o.length;i++)s[o[i]]=1;var l=n("groups");if(!Array.isArray(l)){if(!s[l])return void(a.enabled=!1);s[l]=0}var u,c=e.aggregations||[],d=a.aggregations=new Array(c.length);for(i=0;i<c.length;i++){u={_index:i};var f=r("target"),h=r("func");r("enabled")&&f&&(s[f]||"count"===h&&void 0===s[f])?("stddev"===h&&r("funcmode"),s[f]=0,d[i]=u):d[i]={enabled:!1,_index:i}}for(i=0;i<o.length;i++)s[o[i]]&&d.push({target:o[i],func:nL.func.dflt,enabled:!0,_index:-1});return a},QI.calcTransform=function(e,t,n){if(n.enabled){var r=n.groups,i=uE.getTargetArray(t,{target:r});if(i){var a,o,s,l,u={},c={},d=[],f=$I(t.transforms,n);for(a=0;a<i.length;a++)o=i[a],s=u[o],void 0===s?(u[o]=d.length,l=[a],d.push(l),c[u[o]]=f(a)):(d[s].push(a),c[u[o]]=(c[u[o]]||[]).concat(f(a)));n._indexToPoints=c;var h=n.aggregations;for(a=0;a<h.length;a++)mt(e,t,d,h[a]);"string"===typeof r&&mt(e,t,d,{target:r,func:"first",enabled:!0})}}};var rL=QI,iL={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}},aL=function(e,t,n){if("category"===t.type){var r,i=e.categoryarray,a=Array.isArray(i)&&i.length>0;a&&(r="array");var o=n("categoryorder",r);"array"===o&&n("categoryarray"),a||"array"!==o||(t.categoryorder="trace")}},oL=zC.mix,sL=eS.lightFraction,lL=function(e,t,n,r){function i(n,i){return uE.coerce2(e,t,r.attributes,n,i)}r=r||{};var a=r.dfltColor,o=i("linecolor",a),s=i("linewidth");n("showline",r.showLine||!!o||!!s)||(delete t.linecolor,delete t.linewidth);var l=oL(a,r.bgColor,r.blend||sL).toRgbString(),u=i("gridcolor",l),c=i("gridwidth");if(n("showgrid",r.showGrid||!!u||!!c)||(delete t.gridcolor,delete t.gridwidth),!r.noZeroLine){var d=i("zerolinecolor",a),f=i("zerolinewidth");n("zeroline",r.showGrid||!!d||!!f)||(delete t.zerolinecolor,delete t.zerolinewidth)}},uL=function(e,t,n,r){switch(t){case"array":return Array.isArray(n)?n.slice():[];case"category ascending":return bt(e,CC.ascending,r);case"category descending":return bt(e,CC.descending,r);case"trace":default:return[]}},cL=function(e,t,n,r,i){var a=r.letter,o=r.font||{},s=n("visible",!r.cheateronly),l=t.type;if("date"===l){rS.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",r.calendar)}EI(t,i);var u=n("autorange",!t.isValidRange(e.range));if(t._rangesliderAutorange=!1,u&&n("rangemode"),n("range"),t.cleanRange(),aL(e,t,n),t._initialCategories="category"===l?uL(a,t.categoryorder,t.categoryarray,r.data):[],"category"===l||r.noHover||n("hoverformat"),!s)return t;var c=n("color"),d=c===e.color?c:o.color;return n("title",i._dfltTitle[a]),uE.coerceFont(n,"titlefont",{family:o.family,size:Math.round(1.2*o.size),color:d}),XE(e,t,n,l),qE(e,t,n,l,r),GE(e,t,n,r),lL(e,t,n,{dfltColor:c,bgColor:r.bgColor,showGrid:r.showGrid,attributes:LE}),(t.showline||t.ticks)&&n("mirror"),r.automargin&&n("automargin"),t},dL=oI.id2name,fL=function(e,t,n,r,i){var a=i._axisConstraintGroups,o=t._id,s=o.charAt(0);if(!t.fixedrange&&(n("constrain"),uE.coerce(e,t,{constraintoward:{valType:"enumerated",values:"x"===s?["left","center","right"]:["bottom","middle","top"],dflt:"x"===s?"center":"middle"}},"constraintoward"),e.scaleanchor)){var l=xt(a,o,r,i),u=uE.coerce(e,t,{scaleanchor:{valType:"enumerated",values:l.linkableAxes}},"scaleanchor");if(u){var c=n("scaleratio");c||(c=t.scaleratio=1),wt(a,l.thisGroup,o,u,c)}else-1!==r.indexOf(e.scaleanchor)&&uE.warn("ignored "+t._name+'.scaleanchor: "'+e.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because the targetaxis has fixed range.')}},hL=function(e,t,n,r){var i,a,o,s,l=r.counterAxes||[],u=r.overlayableAxes||[],c=r.letter,d=r.grid;d&&(a=d._domains[c][d._axisMap[t._id]],i=d._anchors[t._id],a&&(o=d[c+"side"].split(" ")[0],s=d.domain[c]["right"===o||"top"===o?1:0])),a=a||[0,1],i=i||(SC(e.position)?"free":l[0]||"free"),o=o||("x"===c?"bottom":"left"),s=s||0,"free"===uE.coerce(e,t,{anchor:{valType:"enumerated",values:["free"].concat(l),dflt:i}},"anchor")&&n("position",s),uE.coerce(e,t,{side:{valType:"enumerated",values:"x"===c?["bottom","top"]:["left","right"],dflt:o}},"side");var f=!1;if(u.length&&(f=uE.coerce(e,t,{overlaying:{valType:"enumerated",values:[!1].concat(u),dflt:!1}},"overlaying")),!f){var h=n("domain",a);h[0]>h[1]-.01&&(t.domain=a),uE.noneOrAll(e.domain,t.domain,a)}return n("layer"),t},pL=oI.name2id,mL=function(e,t,n,r,i){i&&(t._name=i,t._id=pL(i)),"-"===n("type")&&(kt(t,r),"-"===t.type?t.type="linear":e.type=t.type)},gL=function(e,t,n){function r(e,t){return uE.coerce(k,T,LE,e,t)}function i(e,t){return uE.coerce2(k,T,LE,e,t)}function a(e){return"x"===e?g:m}var o,s={},l={},u={},c={};for(o=0;o<n.length;o++){var d=n[o];if(rS.traceIs(d,"cartesian")||rS.traceIs(d,"gl2d")){var f=oI.id2name(d.xaxis),h=oI.id2name(d.yaxis);if(rS.traceIs(d,"carpet")&&("carpet"!==d.type||d._cheater)||f&&(l[f]=1),"carpet"===d.type&&d._cheater&&f&&(s[f]=1),rS.traceIs(d,"2dMap")&&(u[f]=!0,u[h]=!0),rS.traceIs(d,"oriented")){c["h"===d.orientation?h:f]=!0}}}var p=t._subplots,m=p.xaxis,g=p.yaxis,y=uE.simpleMap(m,oI.id2name),v=uE.simpleMap(g,oI.id2name),_=y.concat(v),b=jE.background;m.length&&g.length&&(b=uE.coerce(e,t,nS,"plot_bgcolor"));var x,w,k,T,M=jE.combine(b,t.paper_bgcolor),A={x:a("x"),y:a("y")};for(o=0;o<_.length;o++){x=_[o],uE.isPlainObject(e[x])||(e[x]={}),k=e[x],T=t[x]={},mL(k,T,r,n,x),w=x.charAt(0);var C=function(t,n){for(var r="x"===t?y:v,i=[],a=0;a<r.length;a++){var o=r[a];o===n||(e[o]||{}).overlaying||i.push(oI.name2id(o))}return i}(w,x),S={letter:w,font:t.font,outerTicks:u[x],showGrid:!c[x],data:n,bgColor:M,calendar:t.calendar,automargin:!0,cheateronly:"x"===w&&s[x]&&!l[x]};cL(k,T,r,S,t);var E=i("spikecolor"),P=i("spikethickness"),I=i("spikedash"),L=i("spikemode"),O=i("spikesnap");r("showspikes",!!E||!!P||!!I||!!L||!!O)||(delete T.spikecolor,delete T.spikethickness,delete T.spikedash,delete T.spikemode,delete T.spikesnap);var z={letter:w,counterAxes:A[w],overlayableAxes:C,grid:t.grid};hL(k,T,r,z),T._input=k}var R=rS.getComponentMethod("rangeslider","handleDefaults"),D=rS.getComponentMethod("rangeselector","handleDefaults");for(o=0;o<y.length;o++)x=y[o],k=e[x],T=t[x],R(e,t,x),"date"===T.type&&D(k,T,t,v,T.calendar),r("fixedrange");for(o=0;o<v.length;o++){x=v[o],k=e[x],T=t[x];var N=t[oI.id2name(T.anchor)];r("fixedrange",N&&N.rangeslider&&N.rangeslider.visible)}t._axisConstraintGroups=[];var F=A.x.concat(A.y);for(o=0;o<_.length;o++)x=_[o],w=x.charAt(0),k=e[x],T=t[x],fL(k,T,r,F,t)},yL=EE.attrRegex,vL=function(e,t,n,r){function i(t,n){function r(t,n,r){for(i=0;i<t.length;i++){var o=t[i];if(-1===a.indexOf(o.xref)&&-1===a.indexOf(o.yref)||n(e,i),r)return}}var i,a=[];for(a=[t._id,n._id],i=0;i<a.length;i++)PI.doTicks(e,a[i],!0);r(c.annotations||[],rS.getComponentMethod("annotations","drawOne")),r(c.shapes||[],rS.getComponentMethod("shapes","drawOne")),r(c.images||[],rS.getComponentMethod("images","draw"),!0)}function a(e){var t=e.xaxis,n=e.yaxis;c._defs.select("#"+e.clipId+"> rect").call(PP.setTranslate,0,0).call(PP.setScale,1,1),e.plot.call(PP.setTranslate,t._offset,n._offset).call(PP.setScale,1,1);var r=e.plot.selectAll(".scatterlayer .trace");r.selectAll(".point").call(PP.setPointGroupScale,1,1),r.selectAll(".textpoint").call(PP.setTextPointsScale,1,1),r.call(PP.hideOutsideRangePoints,e)}function o(t,n){var r,a,o,s=f[t.xaxis._id],l=f[t.yaxis._id],u=[];if(s){r=e._fullLayout[s.axisName],a=r._r,o=s.to,u[0]=(a[0]*(1-n)+n*o[0]-a[0])/(a[1]-a[0])*t.xaxis._length;var d=a[1]-a[0],h=o[1]-o[0];r.range[0]=a[0]*(1-n)+n*o[0],r.range[1]=a[1]*(1-n)+n*o[1],u[2]=t.xaxis._length*(1-n+n*h/d)}else u[0]=0,u[2]=t.xaxis._length;if(l){r=e._fullLayout[l.axisName],a=r._r,o=l.to,u[1]=(a[1]*(1-n)+n*o[1]-a[1])/(a[0]-a[1])*t.yaxis._length;var p=a[1]-a[0],m=o[1]-o[0];r.range[0]=a[0]*(1-n)+n*o[0],r.range[1]=a[1]*(1-n)+n*o[1],u[3]=t.yaxis._length*(1-n+n*m/p)}else u[1]=0,u[3]=t.yaxis._length;i(t.xaxis,t.yaxis);var g=t.xaxis,y=t.yaxis,v=!!s,_=!!l,b=v?g._length/u[2]:1,x=_?y._length/u[3]:1,w=v?u[0]:0,k=_?u[1]:0,T=v?u[0]/u[2]*g._length:0,M=_?u[1]/u[3]*y._length:0,A=g._offset-T,C=y._offset-M;c._defs.select("#"+t.clipId+"> rect").call(PP.setTranslate,w,k).call(PP.setScale,1/b,1/x),t.plot.call(PP.setTranslate,A,C).call(PP.setScale,b,x).selectAll(".points").selectAll(".point").call(PP.setPointGroupScale,1/b,1/x),t.plot.selectAll(".points").selectAll(".textpoint").call(PP.setTextPointsScale,1/b,1/x)}function s(){for(var t={},n=0;n<h.length;n++){var r=e._fullLayout[f[h[n]].axisName],i=f[h[n]].to;t[r._name+".range[0]"]=i[0],t[r._name+".range[1]"]=i[1],r.range=i.slice()}return m&&m(),rS.call("relayout",e,t).then(function(){for(var e=0;e<p.length;e++)a(p[e])})}function l(){for(var t={},n=0;n<h.length;n++){var r=e._fullLayout[h[n]+"axis"];t[r._name+".range[0]"]=r.range[0],t[r._name+".range[1]"]=r.range[1],r.range=r._r.slice()}return rS.call("relayout",e,t).then(function(){for(var e=0;e<p.length;e++)a(p[e])})}function u(){y=Date.now();for(var e=Math.min(1,(y-g)/n.duration),t=_(e),r=0;r<p.length;r++)o(p[r],t);y-g>n.duration?(s(),v=window.cancelAnimationFrame(u)):v=window.requestAnimationFrame(u)}var c=e._fullLayout,d=[],f=function(e){var t,n,r,i,a={};for(t in e)if(n=t.split("."),n[0].match(yL)){var o=t.charAt(0),s=n[0];if(r=c[s],i={},Array.isArray(e[t])?i.to=e[t].slice(0):Array.isArray(e[t].range)&&(i.to=e[t].range.slice(0)),!i.to)continue;i.axisName=s,i.length=r._length,d.push(o),a[o]=i}return a}(t),h=Object.keys(f),p=function(e,t,n){var r,i,a,o=e._plots,s=[];for(r in o){var l=o[r];if(-1===s.indexOf(l)){var u=l.xaxis._id,c=l.yaxis._id,d=l.xaxis.range,f=l.yaxis.range;l.xaxis._r=l.xaxis.range.slice(),l.yaxis._r=l.yaxis.range.slice(),i=n[u]?n[u].to:d,a=n[c]?n[c].to:f,d[0]===i[0]&&d[1]===i[1]&&f[0]===a[0]&&f[1]===a[1]||-1===t.indexOf(u)&&-1===t.indexOf(c)||s.push(l)}}return s}(c,h,f);if(!p.length)return function(){function t(t,n,r){for(var i=0;i<t.length;i++)if(n(e,i),r)return}t(c.annotations||[],rS.getComponentMethod("annotations","drawOne")),t(c.shapes||[],rS.getComponentMethod("shapes","drawOne")),t(c.images||[],rS.getComponentMethod("images","draw"),!0)}(),!1;var m;r&&(m=r());var g,y,v,_=CC.ease(n.easing);return e._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(v),v=null,l()}),g=Date.now(),v=window.requestAnimationFrame(u),Promise.resolve()},_L={},bL=EE.SUBPLOT_PATTERN;_L.getSubplotCalcData=function(e,t,n){var r=rS.subplotsRegistry[t];if(!r)return[];for(var i=r.attr,a=[],o=0;o<e.length;o++){var s=e[o];s[0].trace[i]===n&&a.push(s)}return a},_L.getModuleCalcData=function(e,t){var n=[],r="string"===typeof t?rS.getModule(t):t;if(!r)return n;for(var i=0;i<e.length;i++){var a=e[i],o=a[0].trace;o._module===r&&!0===o.visible&&n.push(a)}return n},_L.getSubplotData=function(e,t,n){if(!rS.subplotsRegistry[t])return[];var r,i,a,o=rS.subplotsRegistry[t].attr,s=[];if("gl2d"===t){var l=n.match(bL);i="x"+l[1],a="y"+l[2]}for(var u=0;u<e.length;u++)r=e[u],"gl2d"===t&&rS.traceIs(r,"gl2d")?r[o[0]]===i&&r[o[1]]===a&&s.push(r):r[o]===n&&s.push(r);return s};var xL={},wL=_L.getModuleCalcData;xL.name="cartesian",xL.attr=["xaxis","yaxis"],xL.idRoot=["x","y"],xL.idRegex=EE.idRegex,xL.attrRegex=EE.attrRegex,xL.attributes=iL,xL.layoutAttributes=LE,xL.supplyLayoutDefaults=gL,xL.transitionAxes=vL,xL.finalizeSubplots=function(e,t){var n,r,i,a=t._subplots,o=a.xaxis,s=a.yaxis,l=a.cartesian,u=l.concat(a.gl2d||[]),c={},d={};for(n=0;n<u.length;n++){var f=u[n].split("y");c[f[0]]=1,d["y"+f[1]]=1}for(n=0;n<o.length;n++)r=o[n],c[r]||(i=(e[oI.id2name(r)]||{}).anchor,EE.idRegex.y.test(i)||(i="y"),l.push(r+i),u.push(r+i),d[i]||(d[i]=1,uE.pushUnique(s,i)));for(n=0;n<s.length;n++)i=s[n],d[i]||(r=(e[oI.id2name(i)]||{}).anchor,EE.idRegex.x.test(r)||(r="x"),l.push(r+i),u.push(r+i),c[r]||(c[r]=1,uE.pushUnique(o,r)));if(!u.length){r="",i="";for(var h in e)if(EE.attrRegex.test(h)){var p=h.charAt(0);"x"===p?(!r||+h.substr(5)<+r.substr(5))&&(r=h):(!i||+h.substr(5)<+i.substr(5))&&(i=h)}r=r?oI.name2id(r):"x",i=i?oI.name2id(i):"y",o.push(r),s.push(i),l.push(r+i)}},xL.plot=function(e,t,n,r){var i,a=e._fullLayout,o=a._subplots.cartesian,s=e.calcdata;if(!Array.isArray(t))for(t=[],i=0;i<s.length;i++)t.push(i);for(a._glcanvas&&a._glcanvas.size()&&a._glcanvas.each(function(e){e.regl&&e.regl.clear({color:!0})}),i=0;i<o.length;i++){for(var l,u=o[i],c=a._plots[u],d=[],f=0;f<s.length;f++){var h=s[f],p=h[0].trace;p.xaxis+p.yaxis===u&&((-1!==t.indexOf(p.index)||p.carpet)&&(l&&l[0].trace.xaxis+l[0].trace.yaxis===u&&-1!==["tonextx","tonexty","tonext"].indexOf(p.fill)&&-1===d.indexOf(l)&&d.push(l),d.push(h)),l=h)}Ct(e,c,d,n,r)}},xL.clean=function(e,t,n,r){var i,a,o,s,l,u,c,d,f,h=r._modules||[],p=t._modules||[];for(l=0;l<h.length;l++)f=h[l].name,"scatter"===f?i=!0:"scattergl"===f&&(o=!0);for(l=0;l<p.length;l++)f=p[l].name,"scatter"===f?a=!0:"scattergl"===f&&(s=!0);if(i&&!a){for(u=r._plots,c=Object.keys(u||{}),l=0;l<c.length;l++)d=u[c[l]],d.plot&&d.plot.select("g.scatterlayer").selectAll("g.trace").remove();r._infolayer.selectAll("g.rangeslider-container").select("g.scatterlayer").selectAll("g.trace").remove()}if(o&&!s)for(u=r._plots,c=Object.keys(u||{}),l=0;l<c.length;l++)d=u[c[l]],d._scene&&d._scene.destroy();var m=r._subplots||{},g=t._subplots||{xaxis:[],yaxis:[]};if(m.xaxis&&m.yaxis){var y=m.xaxis.concat(m.yaxis),v=g.xaxis.concat(g.yaxis);for(l=0;l<y.length;l++)-1===v.indexOf(y[l])&&r._infolayer.selectAll(".g-"+y[l]+"title").remove()}var _=r._has&&r._has("cartesian"),b=t._has&&t._has("cartesian");if(_&&!b)Pt(r._cartesianlayer.selectAll(".subplot"),r),r._defs.selectAll(".axesclip").remove(),delete r._axisConstraintGroups;else if(m.cartesian)for(l=0;l<m.cartesian.length;l++){var x=m.cartesian[l];if(-1===g.cartesian.indexOf(x)){var w="."+x+",."+x+"-x,."+x+"-y";r._cartesianlayer.selectAll(w).remove(),It(x,r)}}},xL.drawFramework=function(e){var t=e._fullLayout,n=St(e),r=t._cartesianlayer.selectAll(".subplot").data(n,uE.identity);r.enter().append("g").attr("class",function(e){return"subplot "+e}),r.order(),r.exit().call(Pt,t),r.each(function(e){var n=t._plots[e];if(n.plotgroup=CC.select(this),n.overlays=[],Et(n),n.mainplot){t._plots[n.mainplot].overlays.push(n)}n.draglayer=Lt(t._draggers,"g",e)})},xL.rangePlot=function(e,t,n){Et(t),Ct(e,t,n),lI.style(e)},xL.toSVG=function(e){function t(){var e=this,t=e.toDataURL("image/png");n.append("svg:image").attr({xmlns:aP.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}var n=e._fullLayout._glimages,r=CC.select(e).selectAll(".svg-container");r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(t)};var kL=uE.mergeArray,TL=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;kL(t.text,e,"tx"),kL(t.hovertext,e,"htx");var r=t.marker;if(r){kL(r.opacity,e,"mo"),kL(r.color,e,"mc");var i=r.line;i&&(kL(i.color,e,"mlc"),kL(i.width,e,"mlw"))}},ML=WC.extendFlat,AL=KC({editType:"calc",arrayOk:!0}),CL=YP.marker,SL=CL.line,EL=ML({},SL.width,{dflt:0}),PL=ML({width:EL,editType:"calc"},FE()),IL=ML({line:PL,editType:"calc"},FE(),{showscale:CL.showscale,colorbar:RE,opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"}}),LL={x:YP.x,x0:YP.x0,dx:YP.dx,y:YP.y,y0:YP.y0,dy:YP.dy,text:YP.text,hovertext:YP.hovertext,textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"none",arrayOk:!0,editType:"calc"},textfont:ML({},AL,{}),insidetextfont:ML({},AL,{}),outsidetextfont:ML({},AL,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:ML({},YP.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:IL,selected:{marker:{opacity:YP.selected.marker.opacity,color:YP.selected.marker.color,editType:"style"},textfont:YP.selected.textfont,editType:"style"},unselected:{marker:{opacity:YP.unselected.marker.opacity,color:YP.unselected.marker.color,editType:"style"},textfont:YP.unselected.textfont,editType:"style"},r:YP.r,t:YP.t,_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}},OL=function(e,t){uE.isArrayOrTypedArray(t.selectedpoints)&&uE.tagSelected(e,t)},zL=uE.isArrayOrTypedArray,RL=function(e,t){var n,r,i,a,o,s=PI.getFromId(e,t.xaxis||"x"),l=PI.getFromId(e,t.yaxis||"y"),u=t.orientation||(t.x&&!t.y?"h":"v");"h"===u?(n=s,i=s.makeCalcdata(t,"x"),r=l.makeCalcdata(t,"y"),o=t.xcalendar):(n=l,i=l.makeCalcdata(t,"y"),r=s.makeCalcdata(t,"x"),o=t.ycalendar);var c=Math.min(r.length,i.length),d=new Array(c);for(a=0;a<c;a++)d[a]={p:r[a],s:i[a]},t.ids&&(d[a].id=String(t.ids[a]));var f,h=t.base;if(zL(h)){for(a=0;a<Math.min(h.length,d.length);a++)f=n.d2c(h[a],0,o),SC(f)?(d[a].b=+f,d[a].hasB=1):d[a].b=0;for(;a<d.length;a++)d[a].b=0}else{f=n.d2c(h,0,o);var p=SC(f);for(f=p?f:0,a=0;a<d.length;a++)d[a].b=f,p&&(d[a].hasB=1)}return eP(t,"marker")&&WE(t,t.marker.color,"marker","c"),eP(t,"marker.line")&&WE(t,t.marker.line.color,"marker.line","c"),TL(d,t),OL(d,t),d},DL=function(e,t,n,r,i){n("marker.color",r),eP(e,"marker")&&QE(e,t,i,n,{prefix:"marker.",cLetter:"c"}),n("marker.line.color",jE.defaultLine),eP(e,"marker.line")&&QE(e,t,i,n,{prefix:"marker.line.",cLetter:"c"}),n("marker.line.width"),n("marker.opacity"),n("selected.marker.color"),n("unselected.marker.color")},NL=function(e,t,n,r){var i,a=r("x"),o=r("y");if(rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],n),a)o?i=Math.min(a.length,o.length):(i=a.length,r("y0"),r("dy"));else{if(!o)return 0;i=t.y.length,r("x0"),r("dx")}return t._length=i,i},FL=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,LL,n,r)}var a=uE.coerceFont;if(!NL(e,t,r,i))return void(t.visible=!1);i("orientation",t.x&&!t.y?"h":"v"),i("base"),i("offset"),i("width"),i("text"),i("hovertext");var o=i("textposition"),s=Array.isArray(o)||"auto"===o,l=s||"inside"===o,u=s||"outside"===o;if(l||u){var c=a(i,"textfont",r.font);l&&a(i,"insidetextfont",c),u&&a(i,"outsidetextfont",c),i("constraintext"),i("selected.textfont.color"),i("unselected.textfont.color"),i("cliponaxis")}DL(e,t,i,n,r);var d=rS.getComponentMethod("errorbars","supplyDefaults");d(e,t,jE.defaultLine,{axis:"y"}),d(e,t,jE.defaultLine,{axis:"x",inherit:"y"}),uE.coerceSelectionMarkerOpacity(t,i)},jL={};(function(e){"use strict";var t;t="function"!==typeof e.matchMedia||!e.matchMedia("(hover: none)").matches,jL=t}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var BL=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(t){e=!1}return e}(),UL={left:0,top:0},VL=Ot,HL=function(e,t,n,r,i){var a=(e-n)/(r-n),o=a+t/(r-n),s=(a+o)/2;return"left"===i||"bottom"===i?a:"center"===i||"middle"===i?s:"right"===i||"top"===i?o:a<2/3-s?a:o>4/3-s?o:s},WL=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]],qL=function(e,t,n,r){return e="left"===n?0:"center"===n?1:"right"===n?2:uE.constrain(Math.floor(3*e),0,2),t="bottom"===r?0:"middle"===r?1:"top"===r?2:uE.constrain(Math.floor(3*t),0,2),WL[t][e]},GL={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"},YL=Rt;Rt.EventEmitter=Rt,Rt.prototype._events=void 0,Rt.prototype._maxListeners=void 0,Rt.defaultMaxListeners=10,Rt.prototype.setMaxListeners=function(e){if(!Nt(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},Rt.prototype.emit=function(e){var t,n,r,i,a,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||Ft(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var s=new Error('Uncaught, unspecified "error" event. ('+t+")");throw s.context=t,s}if(n=this._events[e],jt(n))return!1;if(Dt(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:i=Array.prototype.slice.call(arguments,1),n.apply(this,i)}else if(Ft(n))for(i=Array.prototype.slice.call(arguments,1),o=n.slice(),r=o.length,a=0;a<r;a++)o[a].apply(this,i);return!0},Rt.prototype.addListener=function(e,t){var n;if(!Dt(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,Dt(t.listener)?t.listener:t),this._events[e]?Ft(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,Ft(this._events[e])&&!this._events[e].warned&&(n=jt(this._maxListeners)?Rt.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"===typeof console.trace&&console.trace()),this},Rt.prototype.on=Rt.prototype.addListener,Rt.prototype.once=function(e,t){function n(){this.removeListener(e,n),r||(r=!0,t.apply(this,arguments))}if(!Dt(t))throw TypeError("listener must be a function");var r=!1;return n.listener=t,this.on(e,n),this},Rt.prototype.removeListener=function(e,t){var n,r,i,a;if(!Dt(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,r=-1,n===t||Dt(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(Ft(n)){for(a=i;a-- >0;)if(n[a]===t||n[a].listener&&n[a].listener===t){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},Rt.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],Dt(n))this.removeListener(e,n);else if(n)for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},Rt.prototype.listeners=function(e){return this._events&&this._events[e]?Dt(this._events[e])?[this._events[e]]:this._events[e].slice():[]},Rt.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(Dt(t))return 1;if(t)return t.length}return 0},Rt.listenerCount=function(e,t){return e.listenerCount(t)};var XL=YL.EventEmitter,ZL={init:function(e){if(e._ev instanceof XL)return e;var t=new XL,n=new XL;return e._ev=t,e._internalEv=n,e.on=t.on.bind(t),e.once=t.once.bind(t),e.removeListener=t.removeListener.bind(t),e.removeAllListeners=t.removeAllListeners.bind(t),e._internalOn=n.on.bind(n),e._internalOnce=n.once.bind(n),e._removeInternalListener=n.removeListener.bind(n),e._removeAllInternalListeners=n.removeAllListeners.bind(n),e.emit=function(r,i){"undefined"!==typeof jQuery&&jQuery(e).trigger(r,i),t.emit(r,i),n.emit(r,i)},e},triggerHandler:function(e,t,n){var r,i;"undefined"!==typeof jQuery&&(r=jQuery(e).triggerHandler(t,n));var a=e._ev;if(!a)return r;var o=a._events[t];if(!o)return r;"function"===typeof o&&(o=[o]);for(var s=o.pop(),l=0;l<o.length;l++)o[l](n);return i=s(n),void 0!==r?r:i},purge:function(e){return delete e._ev,delete e.on,delete e.once,delete e.removeListener,delete e.removeAllListeners,delete e.emit,delete e._ev,delete e._internalEv,delete e._internalOn,delete e._internalOnce,delete e._removeInternalListener,delete e._removeAllInternalListeners,e}},JL=ZL,KL={},QL=KL={};QL.wrapped=function(e,t,n){e=WS(e),e._fullLayout&&oE.clear(e._fullLayout._uid+GL.HOVERID),QL.raw(e,t,n)},QL.raw=function(e,t){var n=e._fullLayout,r=e._hoverdata;t||(t={}),t.target&&!1===JL.triggerHandler(e,"plotly_beforehover",t)||(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),e._hoverdata=void 0,t.target&&r&&e.emit("plotly_unhover",{event:t,points:r}))};var $L={},eO=$L={};eO.align=HL,eO.getCursor=qL,eO.unhover=KL.wrapped,eO.unhoverRaw=KL.raw,eO.init=function(e){function t(e,t,n){return Math.abs(e)<n&&(e=0),Math.abs(t)<n&&(t=0),[e,t]}function n(t){t.preventDefault(),h._dragged=!1,h._dragging=!0;var n=Vt(t);a=n[0],o=n[1],d=t.target,c=t,f=2===t.buttons||t.ctrlKey,s=(new Date).getTime(),s-h._mouseDownTime<m?p+=1:(p=1,h._mouseDownTime=s),e.prepFn&&e.prepFn(t,a,o),jL&&!f?(u=Bt(),u.style.cursor=window.getComputedStyle(g).cursor):jL||(u=document,l=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(g).cursor),document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r),document.addEventListener("touchend",i)}function r(t){t.preventDefault();var n=Vt(t),r=e.minDrag||EE.MINDRAG,i=y(n[0]-a,n[1]-o,r),s=i[0],l=i[1];(s||l)&&(h._dragged=!0,eO.unhover(h)),h._dragged&&e.moveFn&&!f&&e.moveFn(s,l)}function i(t){if(document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i),t.preventDefault(),jL?uE.removeElement(u):l&&(u.documentElement.style.cursor=l,l=null),!h._dragging)return void(h._dragged=!1);if(h._dragging=!1,(new Date).getTime()-h._mouseDownTime>m&&(p=Math.max(p-1,1)),h._dragged)e.doneFn&&e.doneFn(t);else if(e.clickFn&&e.clickFn(p,c),!f){var n;try{n=new MouseEvent("click",t)}catch(e){var a=Vt(t);n=document.createEvent("MouseEvents"),n.initMouseEvent("click",t.bubbles,t.cancelable,t.view,t.detail,t.screenX,t.screenY,a[0],a[1],t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}d.dispatchEvent(n)}Ut(h),h._dragged=!1}var a,o,s,l,u,c,d,f,h=e.gd,p=1,m=jC.DBLCLICKDELAY,g=e.element;h._mouseDownTime||(h._mouseDownTime=0),g.style.pointerEvents="all",g.onmousedown=n,BL?(g._ontouchstart&&g.removeEventListener("touchstart",g._ontouchstart),g._ontouchstart=n,g.addEventListener("touchstart",n,{passive:!1})):g.ontouchstart=n;var y=e.clampFn||t},eO.coverSlip=Bt;var tO=function(e){for(var t=e.calcdata,n=e._fullLayout,r=0;r<t.length;r++){var i=t[r],a=i[0].trace;if(!rS.traceIs(a,"pie")){var o=rS.traceIs(a,"2dMap")?Ht:uE.fillArray;o(a.hoverinfo,i,"hi",function(e){return function(t){return uE.coerceHoverinfo({hoverinfo:t},{_module:e._module},n)}}(a)),a.hoverlabel&&(o(a.hoverlabel.bgcolor,i,"hbg"),o(a.hoverlabel.bordercolor,i,"hbc"),o(a.hoverlabel.font.size,i,"hts"),o(a.hoverlabel.font.color,i,"htc"),o(a.hoverlabel.font.family,i,"htf"),o(a.hoverlabel.namelength,i,"hnl"))}}},nO={};nO.getSubplot=function(e){return e.subplot||e.xaxis+e.yaxis||e.geo},nO.flat=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=t;return n},nO.p2c=function(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)n[r]=e[r].p2c(t);return n},nO.getDistanceFunction=function(e,t,n,r){return"closest"===e?r||nO.quadrature(t,n):"x"===e?t:n},nO.getClosest=function(e,t,n){if(!1!==n.index)n.index>=0&&n.index<e.length?n.distance=0:n.index=!1;else for(var r=0;r<e.length;r++){var i=t(e[r]);i<=n.distance&&(n.index=r,n.distance=i)}return n},nO.inbox=function(e,t,n){return e*t<0||0===e?n:1/0},nO.quadrature=function(e,t){return function(n){var r=e(n),i=t(n);return Math.sqrt(r*r+i*i)}},nO.makeEventData=function(e,t,n){var r="index"in e?e.index:e.pointNumber,i={data:t._input,fullData:t,curveNumber:t.index,pointNumber:r};if(t._indexToPoints){var a=t._indexToPoints[r];1===a.length?i.pointIndex=a[0]:i.pointIndices=a}else i.pointIndex=r;return t._module.eventData?i=t._module.eventData(i,e,t,n,r):("xVal"in e?i.x=e.xVal:"x"in e&&(i.x=e.x),"yVal"in e?i.y=e.yVal:"y"in e&&(i.y=e.y),e.xa&&(i.xaxis=e.xa),e.ya&&(i.yaxis=e.ya),void 0!==e.zLabelVal&&(i.z=e.zLabelVal)),nO.appendArrayPointValue(i,t,r),i},nO.appendArrayPointValue=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=Wt(a);if(void 0===e[o]){var s=uE.nestedProperty(t,a).get(),l=qt(s,n);void 0!==l&&(e[o]=l)}}},nO.appendArrayMultiPointValues=function(e,t,n){var r=t._arrayAttrs;if(r)for(var i=0;i<r.length;i++){var a=r[i],o=Wt(a);if(void 0===e[o]){for(var s=uE.nestedProperty(t,a).get(),l=new Array(n.length),u=0;u<n.length;u++)l[u]=qt(s,n[u]);e[o]=l}}};var rO={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color"},iO=function(e,t){(e.attr("class")||"").split(" ").forEach(function(t){0===t.indexOf("cursor-")&&e.classed(t,!1)}),t&&e.classed("cursor-"+t,!0)},aO="data-savedcursor",oO=function(e,t){var n=e.attr(aO);if(t){if(!n){for(var r=(e.attr("class")||"").split(" "),i=0;i<r.length;i++){var a=r[i];0===a.indexOf("cursor-")&&e.attr(aO,a.substr(7)).classed(a,!1)}e.attr(aO)||e.attr(aO,"!!")}iO(e,t)}else n&&(e.attr(aO,null),"!!"===n?iO(e):iO(e,n))},sO={},lO=GL.YANGLE,uO=Math.PI*lO/180,cO=1/Math.sin(uO),dO=Math.cos(uO),fO=Math.sin(uO),hO=GL.HOVERARROWSIZE,pO=GL.HOVERTEXTPAD;sO.hover=function(e,t,n,r){e=uE.getGraphDiv(e),uE.throttle(e._fullLayout._uid+GL.HOVERID,GL.HOVERMINTIME,function(){Gt(e,t,n,r)})},sO.loneHover=function(e,t){var n={color:e.color||jE.defaultLine,x0:e.x0||e.x||0,x1:e.x1||e.x||0,y0:e.y0||e.y||0,y1:e.y1||e.y||0,xLabel:e.xLabel,yLabel:e.yLabel,zLabel:e.zLabel,text:e.text,name:e.name,idealAlign:e.idealAlign,borderColor:e.borderColor,fontFamily:e.fontFamily,fontSize:e.fontSize,fontColor:e.fontColor,trace:{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0},r=CC.select(t.container),i=t.outerContainer?CC.select(t.outerContainer):r,a={hovermode:"closest",rotateLabels:!1,bgColor:t.bgColor||jE.background,container:r,outerContainer:i},o=Yt([n],a,t.gd);return Zt(o,a.rotateLabels),o.node()};var mO=sO.hover,gO=function(e,t,n){function r(){e.emit("plotly_click",{points:e._hoverdata,event:t})}var i=rS.getComponentMethod("annotations","onClick")(e,e._hoverdata);void 0!==n&&mO(e,t,n,!0),e._hoverdata&&t&&t.target&&(i&&i.then?i.then(r):r(),t.stopImmediatePropagation&&t.stopImmediatePropagation())},yO=function(e,t,n,r){r=r||{},n("hoverlabel.bgcolor",r.bgcolor),n("hoverlabel.bordercolor",r.bordercolor),n("hoverlabel.namelength",r.namelength),uE.coerceFont(n,"hoverlabel.font",r.font)},vO=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,QC,n,r)}yO(0,0,i,r.hoverlabel)},_O=KC({editType:"none"});_O.family.dflt=GL.HOVERFONT,_O.size.dflt=GL.HOVERFONTSIZE;var bO={dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","orbit","turntable"],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1],editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:20,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:_O,namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"}},xO=function(e,t,n){function r(n,r){return uE.coerce(e,t,bO,n,r)}r("dragmode");var i;t._has("cartesian")?(t._isHoriz=en(n),i=t._isHoriz?"y":"x"):i="closest",r("hovermode",i)&&(r("hoverdistance"),r("spikedistance"));var a=t._has("mapbox"),o=t._has("geo"),s=t._basePlotModules.length;"zoom"===t.dragmode&&((a||o)&&1===s||a&&o&&2===s)&&(t.dragmode="pan")},wO=function(e,t){function n(n,r){return uE.coerce(e,t,bO,n,r)}yO(0,0,n)},kO={moduleType:"component",name:"fx",constants:GL,schema:{layout:bO},attributes:QC,layoutAttributes:bO,supplyLayoutGlobalDefaults:wO,supplyDefaults:vO,supplyLayoutDefaults:xO,calc:tO,getDistanceFunction:nO.getDistanceFunction,getClosest:nO.getClosest,inbox:nO.inbox,quadrature:nO.quadrature,appendArrayPointValue:nO.appendArrayPointValue,castHoverOption:nn,castHoverinfo:rn,hover:sO.hover,unhover:$L.unhover,loneHover:sO.loneHover,loneUnhover:tn,click:gO},TO=function(e,t,n){var r=Array.isArray(n)?function(e){n.push(e)}:function(e){n.text=e},i=uE.extractOption(e,t,"htx","hovertext");if(an(i))return r(i);var a=uE.extractOption(e,t,"tx","text");return an(a)?r(a):void 0},MO=function(e,t,n,r){function i(e){return e[f]-e.w/2}function a(e){return e[f]+e.w/2}function o(e,t){return kO.inbox(e-c,t-c,x+Math.min(1,Math.abs(t-e)/g)-1)}function s(e){return o(k(e),T(e))}function l(e){return kO.inbox(e.b-d,e[h]-d,x+(e[h]-d)/(e[h]-e.b)-1)}function u(e){return(p(e)+m(e))/2}var c,d,f,h,p,m,g,y=e.cd,v=y[0].trace,_=y[0].t,b="closest"===r,x=e.maxHoverDistance,w=e.maxSpikeDistance,k=b?i:function(e){return Math.min(i(e),e.p-_.bardelta/2)},T=b?a:function(e){return Math.max(a(e),e.p+_.bardelta/2)};"h"===v.orientation?(c=n,d=t,f="y",h="x",p=l,m=s):(c=t,d=n,f="x",h="y",m=l,p=s);var M=e[f+"a"],A=e[h+"a"];g=Math.abs(M.r2c(M.range[1])-M.r2c(M.range[0]));var C=kO.getDistanceFunction(r,p,m,u);if(kO.getClosest(y,C,e),!1!==e.index){b||(k=function(e){return Math.min(i(e),e.p-_.bargroupwidth/2)},T=function(e){return Math.max(a(e),e.p+_.bargroupwidth/2)});var S=e.index,E=y[S],P=E.mcc||v.marker.color,I=E.mlcc||v.marker.line.color,L=E.mlw||v.marker.line.width;jE.opacity(P)?e.color=P:jE.opacity(I)&&L&&(e.color=I);var O=v.base?E.b+E.s:E.s;e[h+"0"]=e[h+"1"]=A.c2p(E[h],!0),e[h+"LabelVal"]=O;var z=_.extents[_.extents.round(E.p)];return e[f+"0"]=M.c2p(b?k(E):z[0],!0),e[f+"1"]=M.c2p(b?T(E):z[1],!0),e[f+"LabelVal"]=E.p,e.spikeDistance=(l(E)+function(e){return o(i(e),a(e))}(E))/2+w-x,e[f+"Spike"]=M.c2p(E.p,!0),TO(E,v,e),rS.getComponentMethod("errorbars","hoverInfo")(E,v,e),[e]}},AO={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}},CO=function(e,t,n){function r(n,r){return uE.coerce(e,t,AO,n,r)}for(var i=!1,a=!1,o=!1,s={},l=0;l<n.length;l++){var u=n[l];if(rS.traceIs(u,"bar")){if(i=!0,"overlay"!==e.barmode&&"stack"!==e.barmode){var c=u.xaxis+u.yaxis;s[c]&&(o=!0),s[c]=!0}if(u.visible&&"histogram"===u.type){"category"!==PI.getFromId({_fullLayout:t},u["v"===u.orientation?"xaxis":"yaxis"]).type&&(a=!0)}}}if(i){"overlay"!==r("barmode")&&r("barnorm"),r("bargap",a&&!o?0:.2),r("bargroupgap")}},SO=LL.text,EO=LL.textposition,PO=LL.textfont,IO=LL.insidetextfont,LO=LL.outsidetextfont,OO=3,zO=function(e,t,n){var r=t.xaxis,i=t.yaxis,a=e._fullLayout,o=t.plot.select(".barlayer").selectAll("g.trace.bars").data(n);o.enter().append("g").attr("class","trace bars"),o.each(function(e){e[0].node3=CC.select(this)}),o.append("g").attr("class","points").each(function(n){var o=CC.select(this),s=n[0].t,l=n[0].trace,u=s.poffset,c=Array.isArray(u);o.selectAll("g.point").data(uE.identity).enter().append("g").classed("point",!0).each(function(o,s){function d(e){return 0===a.bargap&&0===a.bargroupgap?CC.round(Math.round(e)-w,2):e}function f(e,t){return Math.abs(e-t)>=2?d(e):e>t?Math.ceil(e):Math.floor(e)}var h,p,m,g,y=o.p+(c?u[s]:u),v=y+o.w,_=o.b,b=_+o.s;if("h"===l.orientation?(m=i.c2p(y,!0),g=i.c2p(v,!0),h=r.c2p(_,!0),p=r.c2p(b,!0),o.ct=[p,(m+g)/2]):(h=r.c2p(y,!0),p=r.c2p(v,!0),m=i.c2p(_,!0),g=i.c2p(b,!0),o.ct=[(h+p)/2,g]),!SC(h)||!SC(p)||!SC(m)||!SC(g)||h===p||m===g)return void CC.select(this).remove();var x=(o.mlw+1||l.marker.line.width+1||(o.trace?o.trace.marker.line.width:0)+1)-1,w=CC.round(x/2%1,2);if(!e._context.staticPlot){var k=jE.opacity(o.mc||l.marker.color),T=k<1||x>.01?d:f;h=T(h,p),p=T(p,h),m=T(m,g),g=T(g,m)}var M=CC.select(this);M.append("path").style("vector-effect","non-scaling-stroke").attr("d","M"+h+","+m+"V"+g+"H"+p+"V"+m+"Z").call(PP.setClipUrl,t.layerClipId),on(e,M,n,s,h,p,m,g),t.layerClipId&&PP.hideOutsideRangePoint(n[s],M.select("text"),r,i,l.xcalendar,l.ycalendar)})}),rS.getComponentMethod("errorbars","plot")(o,t),o.each(function(e){var n=!1===e[0].trace.cliponaxis;PP.setClipUrl(CC.select(this),n?null:t.layerClipId)})},RO=function(e,t){var n,r=e.cd,i=e.xaxis,a=e.yaxis,o=[];if(!1===t)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var s=r[n];t.contains(s.ct)?(o.push({pointNumber:n,x:i.c2d(s.x),y:a.c2d(s.y)}),s.selected=1):s.selected=0}return o},DO=xn,NO=AC.BADNUM;xn.prototype.put=function(e,t){var n=this.getLabel(e,t),r=this.bins[n]||0;return this.bins[n]=r+t,r},xn.prototype.get=function(e,t){var n=this.getLabel(e,t);return this.bins[n]||0},xn.prototype.getLabel=function(e,t){return(t<0&&this.separateNegativeValues?"v":"^")+(this.dontMergeOverlappingData?e:Math.round(e/this.binWidth))};var FO=uE.isArrayOrTypedArray,jO=AC.BADNUM,BO=function(e,t){var n,r=t.xaxis,i=t.yaxis,a=e._fullData,o=e.calcdata,s=[],l=[];for(n=0;n<a.length;n++){var u=a[n];!0===u.visible&&rS.traceIs(u,"bar")&&u.xaxis===r._id&&u.yaxis===i._id&&("h"===u.orientation?s.push(o[n]):l.push(o[n]))}wn(e,r,i,l),wn(e,i,r,s)},UO=function(e,t){var n=t?t[0].node3:CC.select(e).selectAll("g.trace.bars"),r=n.size(),i=e._fullLayout;n.style("opacity",function(e){return e[0].trace.opacity}).each(function(e){("stack"===i.barmode&&r>1||0===i.bargap&&0===i.bargroupgap&&!e[0].trace.marker.line.width)&&CC.select(this).attr("shape-rendering","crispEdges")}),n.selectAll("g.points").each(function(t){var n=CC.select(this),r=n.selectAll("path"),i=n.selectAll("text"),a=t[0].trace;PP.pointStyle(r,a,e),PP.selectedPointStyle(r,a),i.each(function(e){function t(t){var r=n[t];return Array.isArray(r)?r[e.i]:r}var n,r=CC.select(this);r.classed("bartext-inside")?n=a.insidetextfont:r.classed("bartext-outside")&&(n=a.outsidetextfont),n||(n=a.textfont),PP.font(r,t("family"),t("size"),t("color"))}),PP.selectedTextStyle(i,a)}),rS.getComponentMethod("errorbars","style")(n)},VO={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}},HO=WC.extendFlat,WO=iP.LINE_SPACING,qO=VO.cn,GO=function(e,t){function n(){function a(e,t){return uE.coerce(N,F,LE,e,t)}function o(){if(-1!==["top","bottom"].indexOf(i.titleside)){var t=W.select(".cbtitle"),n=t.select("text"),r=[-i.outlinewidth/2,i.outlinewidth/2],a=t.select(".h"+F._id+"title-math-group").node(),o=15.6;if(n.node()&&(o=parseInt(n.node().style.fontSize,10)*WO),a?(G=PP.bBox(a).height)>o&&(r[1]-=(G-o)/2):n.node()&&!n.classed(qO.jsPlaceholder)&&(G=PP.bBox(n.node()).height),G){if(G+=5,"top"===i.titleside)F.domain[1]-=G/c.h,r[1]*=-1;else{F.domain[0]+=G/c.h;var l=sP.lineCount(n);r[1]+=(1-l)*o}t.attr("transform","translate("+r+")"),F.setScale()}}W.selectAll(".cbfills,.cblines").attr("transform","translate(0,"+Math.round(c.h*(1-F.domain[1]))+")"),F._axislayer.attr("transform","translate(0,"+Math.round(-c.t)+")");var d=W.select(".cbfills").selectAll("rect.cbfill").data(m);d.enter().append("rect").classed(qO.cbfill,!0).style("stroke","none"),d.exit().remove(),d.each(function(e,t){var n=[0===t?h[0]:(m[t]+m[t-1])/2,t===m.length-1?h[1]:(m[t]+m[t+1])/2].map(F.c2p).map(Math.round);t!==m.length-1&&(n[1]+=n[1]>n[0]?1:-1);var r=y(e).replace("e-",""),i=zC(r).toHexString();CC.select(this).attr({x:L,width:Math.max(M,2),y:CC.min(n),height:Math.max(CC.max(n)-CC.min(n),2),fill:i})});var f=W.select(".cblines").selectAll("path.cbline").data(i.line.color&&i.line.width?p:[]);return f.enter().append("path").classed(qO.cbline,!0),f.exit().remove(),f.each(function(e){CC.select(this).attr("d","M"+L+","+(Math.round(F.c2p(e))+i.line.width/2%1)+"h"+M).call(PP.lineGroupStyle,i.line.width,g(e),i.line.dash)}),F._axislayer.selectAll("g."+F._id+"tick,path").remove(),F._pos=L+M+(i.outlinewidth||0)/2-("outside"===i.ticks?1:0),F.side="right",uE.syncOrAsync([function(){return PI.doTicks(e,F,!0)},function(){if(-1===["top","bottom"].indexOf(i.titleside)){var t=F.titlefont.size,n=F._offset+F._length/2,r=c.l+(F.position||0)*c.w+("right"===F.side?10+t*(F.showticklabels?1:.5):-10-t*(F.showticklabels?.5:0));s("h"+F._id+"title",{avoid:{selection:CC.select(e).selectAll("g."+F._id+"tick"),side:i.titleside,offsetLeft:c.l,offsetTop:0,maxShift:u.width},attributes:{x:r,y:n,"text-anchor":"middle"},transform:{rotate:"-90",offset:0}})}}])}function s(t,n){var i,a=r();i=rS.traceIs(a,"markerColorscale")?"marker.colorbar.title":"colorbar.title";var o={propContainer:F,propName:i,traceIndex:a.index,placeholder:u._dfltTitle.colorbar,containerGroup:W.select(".cbtitle")},s="h"===t.charAt(0)?t.substr(1):"h"+t;W.selectAll("."+s+",."+s+"-math-group").remove(),yI.draw(e,t,HO(o,n||{}))}function l(){var n=M+i.outlinewidth/2+PP.bBox(F._axislayer.node()).width;if(w=q.select("text"),w.node()&&!w.classed(qO.jsPlaceholder)){var r,a=q.select(".h"+F._id+"title-math-group").node();r=a&&-1!==["top","bottom"].indexOf(i.titleside)?PP.bBox(a).width:PP.bBox(q.node()).right-L-c.l,n=Math.max(n,r)}var o=2*i.xpad+n+i.borderwidth+i.outlinewidth/2,s=R-D;W.select(".cbbg").attr({x:L-i.xpad-(i.borderwidth+i.outlinewidth)/2,y:D-P,width:Math.max(o,2),height:Math.max(s+2*P,2)}).call(jE.fill,i.bgcolor).call(jE.stroke,i.bordercolor).style({"stroke-width":i.borderwidth}),W.selectAll(".cboutline").attr({x:L,y:D+i.ypad+("top"===i.titleside?G:0),width:Math.max(M,2),height:Math.max(s-2*i.ypad-G,2)}).call(jE.stroke,i.outlinecolor).style({fill:"None","stroke-width":i.outlinewidth});var l=({center:.5,right:1}[i.xanchor]||0)*o;W.attr("transform","translate("+(c.l-l)+","+c.t+")"),lI.autoMargin(e,t,{x:i.x,y:i.y,l:o*({right:1,center:.5}[i.xanchor]||0),r:o*({left:1,center:.5}[i.xanchor]||0),t:s*({bottom:1,middle:.5}[i.yanchor]||0),b:s*({top:1,middle:.5}[i.yanchor]||0)})}var u=e._fullLayout,c=u._size;if("function"!==typeof i.fillcolor&&"function"!==typeof i.line.color)return void u._infolayer.selectAll("g."+t).remove();var d,f,h=CC.extent(("function"===typeof i.fillcolor?i.fillcolor:i.line.color).domain()),p=[],m=[],g="function"===typeof i.line.color?i.line.color:function(){return i.line.color},y="function"===typeof i.fillcolor?i.fillcolor:function(){return i.fillcolor},v=i.levels.end+i.levels.size/100,_=i.levels.size,b=1.001*h[0]-.001*h[1],x=1.001*h[1]-.001*h[0];for(f=0;f<1e5&&(d=i.levels.start+f*_,!(_>0?d>=v:d<=v));f++)d>b&&d<x&&p.push(d);if("function"===typeof i.fillcolor)if(i.filllevels)for(v=i.filllevels.end+i.filllevels.size/100,_=i.filllevels.size,f=0;f<1e5&&(d=i.filllevels.start+f*_,!(_>0?d>=v:d<=v));f++)d>h[0]&&d<h[1]&&m.push(d);else m=p.map(function(e){return e-i.levels.size/2}),m.push(m[m.length-1]+i.levels.size);else i.fillcolor&&"string"===typeof i.fillcolor&&(m=[0]);i.levels.size<0&&(p.reverse(),m.reverse());var w,k=u.height-u.margin.t-u.margin.b,T=u.width-u.margin.l-u.margin.r,M=Math.round(i.thickness*("fraction"===i.thicknessmode?T:1)),A=M/c.w,C=Math.round(i.len*("fraction"===i.lenmode?k:1)),S=C/c.h,E=i.xpad/c.w,P=(i.borderwidth+i.outlinewidth)/2,I=i.ypad/c.h,L=Math.round(i.x*c.w+i.xpad),O=i.x-A*({middle:.5,right:1}[i.xanchor]||0),z=i.y+S*(({top:-.5,bottom:.5}[i.yanchor]||0)-.5),R=Math.round(c.h*(1-z)),D=R-C,N={type:"linear",range:h,tickmode:i.tickmode,nticks:i.nticks,tick0:i.tick0,dtick:i.dtick,tickvals:i.tickvals,ticktext:i.ticktext,ticks:i.ticks,ticklen:i.ticklen,tickwidth:i.tickwidth,tickcolor:i.tickcolor,showticklabels:i.showticklabels,tickfont:i.tickfont,tickangle:i.tickangle,tickformat:i.tickformat,exponentformat:i.exponentformat,separatethousands:i.separatethousands,showexponent:i.showexponent,showtickprefix:i.showtickprefix,tickprefix:i.tickprefix,showticksuffix:i.showticksuffix,ticksuffix:i.ticksuffix,title:i.title,titlefont:i.titlefont,showline:!0,anchor:"free",position:1},F={type:"linear",_id:"y"+t},j={letter:"y",font:u.font,noHover:!0,calendar:u.calendar};if(cL(N,F,a,j,u),hL(N,F,a,j),F.position=i.x+E+A,n.axis=F,-1!==["top","bottom"].indexOf(i.titleside)&&(F.titleside=i.titleside,F.titlex=i.x+E,F.titley=z+("top"===i.titleside?S-I:I)),i.line.color&&"auto"===i.tickmode){F.tickmode="linear",F.tick0=i.levels.start;var B=i.levels.size,U=uE.constrain((R-D)/50,4,15)+1,V=(h[1]-h[0])/((i.nticks||U)*B);if(V>1){var H=Math.pow(10,Math.floor(Math.log(V)/Math.LN10));B*=H*uE.roundUp(V/H,[2,5,10]),(Math.abs(i.levels.start)/i.levels.size+1e-6)%1<2e-6&&(F.tick0=0)}F.dtick=B}F.domain=[z+I,z+S-I],F.setScale();var W=u._infolayer.selectAll("g."+t).data([0]);W.enter().append("g").classed(t,!0).classed(qO.colorbar,!0).each(function(){var e=CC.select(this);e.append("rect").classed(qO.cbbg,!0),e.append("g").classed(qO.cbfills,!0),e.append("g").classed(qO.cblines,!0),e.append("g").classed(qO.cbaxis,!0).classed(qO.crisp,!0),e.append("g").classed(qO.cbtitleunshift,!0).append("g").classed(qO.cbtitle,!0),e.append("rect").classed(qO.cboutline,!0),e.select(".cbtitle").datum(0)}),W.attr("transform","translate("+Math.round(c.l)+","+Math.round(c.t)+")");var q=W.select(".cbtitleunshift").attr("transform","translate(-"+Math.round(c.l)+",-"+Math.round(c.t)+")");F._axislayer=W.select(".cbaxis");var G=0;if(-1!==["top","bottom"].indexOf(i.titleside)){var Y,X=c.l+(i.x+E)*c.w,Z=F.titlefont.size;Y="top"===i.titleside?(1-(z+S-I))*c.h+c.t+3+.75*Z:(1-(z+I))*c.h+c.t-3-.25*Z,s(F._id+"title",{attributes:{x:X,y:Y,"text-anchor":"start"}})}var J=uE.syncOrAsync([lI.previousPromises,o,lI.previousPromises,l],e);if(J&&J.then&&(e._promises||[]).push(J),e._context.edits.colorbarPosition){var K,Q,$;$L.init({element:W.node(),gd:e,prepFn:function(){K=W.attr("transform"),iO(W)},moveFn:function(e,t){W.attr("transform",K+" translate("+e+","+t+")"),Q=$L.align(O+e/c.w,A,0,1,i.xanchor),$=$L.align(z-t/c.h,S,0,1,i.yanchor);var n=$L.getCursor(Q,$,i.xanchor,i.yanchor);iO(W,n)},doneFn:function(){iO(W),void 0!==Q&&void 0!==$&&rS.call("restyle",e,{"colorbar.x":Q,"colorbar.y":$},r().index)}})}return J}function r(){var n,r,i=t.substr(2);for(n=0;n<e._fullData.length;n++)if(r=e._fullData[n],r.uid===i)return r}var i={};return Object.keys(RE).forEach(function(e){i[e]=null}),i.fillcolor=null,i.line={color:null,width:null,dash:null},i.levels={start:null,end:null,size:null},i.filllevels=null,Object.keys(i).forEach(function(e){n[e]=function(t){return arguments.length?(i[e]=uE.isPlainObject(i[e])?uE.extendFlat(i[e],t):t,n):i[e]}}),n.options=function(e){return Object.keys(e).forEach(function(t){"function"===typeof n[t]&&n[t](e[t])}),n},n._opts=i,n},YO=function(e,t){var n=t[0].trace,r=n.marker,i="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+i).remove(),void 0===r||!r.showscale)return void lI.autoMargin(e,i);var a=r.color,o=r.cmin,s=r.cmax;SC(o)||(o=uE.aggNums(Math.min,null,a)),SC(s)||(s=uE.aggNums(Math.max,null,a));var l=t[0].t.cb=GO(e,i),u=nP.makeColorScaleFunc(nP.extractScale(r.colorscale,o,s),{noNumericCheck:!0});l.fillcolor(u).filllevels({start:o,end:s,size:(s-o)/254}).options(r.colorbar)()},XO={};XO.attributes=LL,XO.layoutAttributes=AO,XO.supplyDefaults=FL,XO.supplyLayoutDefaults=CO,XO.calc=RL,XO.setPositions=BO,XO.colorbar=YO,XO.arraysToCalcdata=TL,XO.plot=zO,XO.style=UO,XO.hoverPoints=MO,XO.selectPoints=RO,XO.moduleType="trace",XO.name="bar",XO.basePlotModule=xL,XO.categories=["cartesian","bar","oriented","markerColorscale","errorBarsOK","showLegend"],XO.meta={};var ZO=XO,JO=ZO,KO=WC.extendFlat,QO=YP.marker,$O=QO.line,ez={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},name:{valType:"string",editType:"calc+clearAxisTypes"},text:KO({},YP.text,{}),whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calcIfAutorange"},notched:{valType:"boolean",editType:"calcIfAutorange"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calcIfAutorange"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],dflt:"outliers",editType:"calcIfAutorange"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],dflt:!1,editType:"calcIfAutorange"},jitter:{valType:"number",min:0,max:1,editType:"calcIfAutorange"},pointpos:{valType:"number",min:-2,max:2,editType:"calcIfAutorange"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:KO({},QO.symbol,{arrayOk:!1,editType:"plot"}),opacity:KO({},QO.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:KO({},QO.size,{arrayOk:!1,editType:"calcIfAutorange"}),color:KO({},QO.color,{arrayOk:!1,editType:"style"}),line:{color:KO({},$O.color,{arrayOk:!1,dflt:eS.defaultLine,editType:"style"}),width:KO({},$O.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:YP.fillcolor,selected:{marker:YP.selected.marker,editType:"style"},unselected:{marker:YP.unselected.marker,editType:"style"},hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}},tz=uE._,nz=function(e,t){var n,r,i,a,o,s=e._fullLayout,l=PI.getFromId(e,t.xaxis||"x"),u=PI.getFromId(e,t.yaxis||"y"),c=[],d="violin"===t.type?"_numViolins":"_numBoxes";"h"===t.orientation?(r=l,i="x",a=u,o="y"):(r=u,i="y",a=l,o="x");var f=r.makeCalcdata(t,i),h=Fn(t,o,a,f,s[d]),p=uE.distinctVals(h),m=p.vals,g=p.minDiff/2,y=jn(m,g),v=f.length,_=m.length,b=Bn(_);for(n=0;n<v;n++){var x=f[n];if(SC(x)){var w=uE.findBin(h[n],y);if(w>=0&&w<_){var k={v:x,i:n};Un(k,t,n),b[w].push(k)}}}for(n=0;n<_;n++)if(b[n].length>0){var T=b[n].sort(Hn),M=T.map(Wn),A=M.length,C={pos:m[n],pts:T};C.min=M[0],C.max=M[A-1],C.mean=uE.mean(M,A),C.sd=uE.stdev(M,A,C.mean),C.q1=uE.interp(M,.25),C.med=uE.interp(M,.5),C.q3=uE.interp(M,.75),C.lf=Math.min(C.q1,M[Math.min(uE.findBin(2.5*C.q1-1.5*C.q3,M,!0)+1,A-1)]),C.uf=Math.max(C.q3,M[Math.max(uE.findBin(2.5*C.q3-1.5*C.q1,M),0)]),C.lo=4*C.q1-3*C.q3,C.uo=4*C.q3-3*C.q1;var S=C.q3-C.q1,E=1.57*S/Math.sqrt(A);C.ln=C.med-E,C.un=C.med+E,c.push(C)}return Vn(c,t),PI.expand(r,f,{padded:!0}),c.length>0?(c[0].t={num:s[d],dPos:g,posLetter:o,valLetter:i,labels:{med:tz(e,"median:"),min:tz(e,"min:"),q1:tz(e,"q1:"),q3:tz(e,"q3:"),max:tz(e,"max:"),mean:"sd"===t.boxmean?tz(e,"mean \xb1 \u03c3:"):tz(e,"mean:"),lf:tz(e,"lower fence:"),uf:tz(e,"upper fence:")}},t._fullInput&&"candlestick"===t._fullInput.type&&delete c[0].t.labels,s[d]++,c):[{t:{empty:!0}}]},rz={supplyDefaults:qn,handleSampleDefaults:Gn,handlePointsDefaults:Yn},iz={hoverPoints:Xn,hoverOnBoxes:Zn,hoverOnPoints:Jn},az={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}},oz={supplyLayoutDefaults:Qn,_supply:Kn},sz=5,lz=.01,uz={plot:$n,plotBoxAndWhiskers:er,plotPoints:tr,plotBoxMean:nr},cz=function(e,t){var n,r,i=e.cd,a=e.xaxis,o=e.yaxis,s=[];if(!1===t)for(n=0;n<i.length;n++)for(r=0;r<(i[n].pts||[]).length;r++)i[n].pts[r].selected=0;else for(n=0;n<i.length;n++)for(r=0;r<(i[n].pts||[]).length;r++){var l=i[n].pts[r],u=a.c2p(l.x),c=o.c2p(l.y);t.contains([u,c])?(s.push({pointNumber:l.i,x:a.c2d(l.x),y:o.c2d(l.y)}),l.selected=1):l.selected=0}return s},dz=["v","h"],fz={setPositions:rr,setPositionOffset:ir},hz=function(e,t){var n=t?t[0].node3:CC.select(e).selectAll("g.trace.boxes");n.style("opacity",function(e){return e[0].trace.opacity}),n.each(function(t){var n=CC.select(this),r=t[0].trace,i=r.line.width;n.selectAll("path.box").style("stroke-width",i+"px").call(jE.stroke,r.line.color).call(jE.fill,r.fillcolor),n.selectAll("path.mean").style({"stroke-width":i,"stroke-dasharray":2*i+"px,"+i+"px"}).call(jE.stroke,r.line.color);var a=n.selectAll("path.point");PP.pointStyle(a,r,e),PP.selectedPointStyle(a,r)})},pz={};pz.attributes=ez,pz.layoutAttributes=az,pz.supplyDefaults=rz.supplyDefaults,pz.supplyLayoutDefaults=oz.supplyLayoutDefaults,pz.calc=nz,pz.setPositions=fz.setPositions,pz.plot=uz.plot,pz.style=hz,pz.hoverPoints=iz.hoverPoints,pz.selectPoints=cz,pz.moduleType="trace",pz.name="box",pz.basePlotModule=xL,pz.categories=["cartesian","symbols","oriented","box-violin","showLegend"],pz.meta={};var mz=pz,gz=mz,yz=Object.getOwnPropertySymbols,vz=Object.prototype.hasOwnProperty,_z=Object.prototype.propertyIsEnumerable,bz=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,r,i=ar(e),a=1;a<arguments.length;a++){n=Object(arguments[a]);for(var o in n)vz.call(n,o)&&(i[o]=n[o]);if(yz){r=yz(n);for(var s=0;s<r.length;s++)_z.call(n,r[s])&&(i[r[s]]=n[r[s]])}}return i},xz={};bz(or.prototype,{instance:function(e,t){e=(e||"gregorian").toLowerCase(),t=t||"";var n=this._localCals[e+"-"+t];if(!n&&this.calendars[e]&&(n=new this.calendars[e](t),this._localCals[e+"-"+t]=n),!n)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,e);return n},newDate:function(e,t,n,r,i){return r=(null!=e&&e.year?e.calendar():"string"===typeof r?this.instance(r,i):r)||this.instance(),r.newDate(e,t,n)},substituteDigits:function(e){return function(t){return(t+"").replace(/[0-9]/g,function(t){return e[t]})}},substituteChineseDigits:function(e,t){return function(n){for(var r="",i=0;n>0;){var a=n%10;r=(0===a?"":e[a]+t[i])+r,i++,n=Math.floor(n/10)}return 0===r.indexOf(e[1]+t[1])&&(r=r.substr(1)),r||e[0]}}}),bz(sr.prototype,{newDate:function(e,t,n){return this._calendar.newDate(null==e?this:e,t,n)},year:function(e){return 0===arguments.length?this._year:this.set(e,"y")},month:function(e){return 0===arguments.length?this._month:this.set(e,"m")},day:function(e){return 0===arguments.length?this._day:this.set(e,"d")},date:function(e,t,n){if(!this._calendar.isValid(e,t,n))throw(wz.local.invalidDate||wz.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=e,this._month=t,this._day=n,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(e,t){return this._calendar.add(this,e,t)},set:function(e,t){return this._calendar.set(this,e,t)},compareTo:function(e){if(this._calendar.name!==e._calendar.name)throw(wz.local.differentCalendars||wz.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,e._calendar.local.name);var t=this._year!==e._year?this._year-e._year:this._month!==e._month?this.monthOfYear()-e.monthOfYear():this._day-e._day;return 0===t?0:t<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(e){return this._calendar.fromJD(e)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(e){return this._calendar.fromJSDate(e)},toString:function(){return(this.year()<0?"-":"")+lr(Math.abs(this.year()),4)+"-"+lr(this.month(),2)+"-"+lr(this.day(),2)}}),bz(ur.prototype,{_validateLevel:0,newDate:function(e,t,n){return null==e?this.today():(e.year&&(this._validate(e,t,n,wz.local.invalidDate||wz.regionalOptions[""].invalidDate),n=e.day(),t=e.month(),e=e.year()),new sr(this,e,t,n))},today:function(){return this.fromJSDate(new Date)},epoch:function(e){return this._validate(e,this.minMonth,this.minDay,wz.local.invalidYear||wz.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,wz.local.invalidYear||wz.regionalOptions[""].invalidYear);return(t.year()<0?"-":"")+lr(Math.abs(t.year()),4)},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,wz.local.invalidYear||wz.regionalOptions[""].invalidYear),12},monthOfYear:function(e,t){var n=this._validate(e,t,this.minDay,wz.local.invalidMonth||wz.regionalOptions[""].invalidMonth);return(n.month()+this.monthsInYear(n)-this.firstMonth)%this.monthsInYear(n)+this.minMonth},fromMonthOfYear:function(e,t){var n=(t+this.firstMonth-2*this.minMonth)%this.monthsInYear(e)+this.minMonth;return this._validate(e,n,this.minDay,wz.local.invalidMonth||wz.regionalOptions[""].invalidMonth),n},daysInYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,wz.local.invalidYear||wz.regionalOptions[""].invalidYear);return this.leapYear(t)?366:365},dayOfYear:function(e,t,n){var r=this._validate(e,t,n,wz.local.invalidDate||wz.regionalOptions[""].invalidDate);return r.toJD()-this.newDate(r.year(),this.fromMonthOfYear(r.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(e,t,n){var r=this._validate(e,t,n,wz.local.invalidDate||wz.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(r))+2)%this.daysInWeek()},extraInfo:function(e,t,n){return this._validate(e,t,n,wz.local.invalidDate||wz.regionalOptions[""].invalidDate),{}},add:function(e,t,n){return this._validate(e,this.minMonth,this.minDay,wz.local.invalidDate||wz.regionalOptions[""].invalidDate),this._correctAdd(e,this._add(e,t,n),t,n)},_add:function(e,t,n){if(this._validateLevel++,"d"===n||"w"===n){var r=e.toJD()+t*("w"===n?this.daysInWeek():1),i=e.calendar().fromJD(r);return this._validateLevel--,[i.year(),i.month(),i.day()]}try{var a=e.year()+("y"===n?t:0),o=e.monthOfYear()+("m"===n?t:0),i=e.day();"y"===n?(e.month()!==this.fromMonthOfYear(a,o)&&(o=this.newDate(a,e.month(),this.minDay).monthOfYear()),o=Math.min(o,this.monthsInYear(a)),i=Math.min(i,this.daysInMonth(a,this.fromMonthOfYear(a,o)))):"m"===n&&(!function(e){for(;o<e.minMonth;)a--,o+=e.monthsInYear(a);for(var t=e.monthsInYear(a);o>t-1+e.minMonth;)a++,o-=t,t=e.monthsInYear(a)}(this),i=Math.min(i,this.daysInMonth(a,this.fromMonthOfYear(a,o))));var s=[a,this.fromMonthOfYear(a,o),i];return this._validateLevel--,s}catch(e){throw this._validateLevel--,e}},_correctAdd:function(e,t,n,r){if(!this.hasYearZero&&("y"===r||"m"===r)&&(0===t[0]||e.year()>0!==t[0]>0)){var i={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[r],a=n<0?-1:1;t=this._add(e,n*i[0]+a*i[1],i[2])}return e.date(t[0],t[1],t[2])},set:function(e,t,n){this._validate(e,this.minMonth,this.minDay,wz.local.invalidDate||wz.regionalOptions[""].invalidDate);var r="y"===n?t:e.year(),i="m"===n?t:e.month(),a="d"===n?t:e.day();return"y"!==n&&"m"!==n||(a=Math.min(a,this.daysInMonth(r,i))),e.date(r,i,a)},isValid:function(e,t,n){this._validateLevel++;var r=this.hasYearZero||0!==e;if(r){var i=this.newDate(e,t,this.minDay);r=t>=this.minMonth&&t-this.minMonth<this.monthsInYear(i)&&n>=this.minDay&&n-this.minDay<this.daysInMonth(i)}return this._validateLevel--,r},toJSDate:function(e,t,n){var r=this._validate(e,t,n,wz.local.invalidDate||wz.regionalOptions[""].invalidDate);return wz.instance().fromJD(this.toJD(r)).toJSDate()},fromJSDate:function(e){return this.fromJD(wz.instance().fromJSDate(e).toJD())},_validate:function(e,t,n,r){if(e.year){if(0===this._validateLevel&&this.name!==e.calendar().name)throw(wz.local.differentCalendars||wz.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,e.calendar().local.name);return e}try{if(1===++this._validateLevel&&!this.isValid(e,t,n))throw r.replace(/\{0\}/,this.local.name);var i=this.newDate(e,t,n);return this._validateLevel--,i}catch(e){throw this._validateLevel--,e}}}),cr.prototype=new ur,bz(cr.prototype,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,wz.local.invalidYear||wz.regionalOptions[""].invalidYear),e=t.year()+(t.year()<0?1:0);return e%4===0&&(e%100!==0||e%400===0)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,wz.local.invalidMonth||wz.regionalOptions[""].invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,wz.local.invalidDate||wz.regionalOptions[""].invalidDate);e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<3&&(t+=12,e--);var i=Math.floor(e/100),a=2-i+Math.floor(i/4);return Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n+a-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=Math.floor((t-1867216.25)/36524.25);n=t+1+n-Math.floor(n/4);var r=n+1524,i=Math.floor((r-122.1)/365.25),a=Math.floor(365.25*i),o=Math.floor((r-a)/30.6001),s=r-a-Math.floor(30.6001*o),l=o-(o>13.5?13:1),u=i-(l>2.5?4716:4715);return u<=0&&u--,this.newDate(u,l,s)},toJSDate:function(e,t,n){var r=this._validate(e,t,n,wz.local.invalidDate||wz.regionalOptions[""].invalidDate),i=new Date(r.year(),r.month()-1,r.day());return i.setHours(0),i.setMinutes(0),i.setSeconds(0),i.setMilliseconds(0),i.setHours(i.getHours()>12?i.getHours()+2:0),i},fromJSDate:function(e){return this.newDate(e.getFullYear(),e.getMonth()+1,e.getDate())}});var wz=xz=new or;wz.cdate=sr,wz.baseCalendar=ur,wz.calendars.gregorian=cr;var kz=xz.instance();dr.prototype=new xz.baseCalendar,bz(dr.prototype,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(e,t){if("string"===typeof e){var n=e.match(Mz);return n?n[0]:""}var r=this._validateYear(e),i=e.month(),a=""+this.toChineseMonth(r,i);return t&&a.length<2&&(a="0"+a),this.isIntercalaryMonth(r,i)&&(a+="i"),a},monthNames:function(e){if("string"===typeof e){var t=e.match(Az);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),i=this.toChineseMonth(n,r),a=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][i-1];return this.isIntercalaryMonth(n,r)&&(a="\u95f0"+a),a},monthNamesShort:function(e){if("string"===typeof e){var t=e.match(Cz);return t?t[0]:""}var n=this._validateYear(e),r=e.month(),i=this.toChineseMonth(n,r),a=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][i-1];return this.isIntercalaryMonth(n,r)&&(a="\u95f0"+a),a},parseMonth:function(e,t){e=this._validateYear(e);var n,r=parseInt(t);if(isNaN(r))"\u95f0"===t[0]&&(n=!0,t=t.substring(1)),"\u6708"===t[t.length-1]&&(t=t.substring(0,t.length-1)),r=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(t);else{var i=t[t.length-1];n="i"===i||"I"===i}return this.toMonthIndex(e,r,n)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(e,t){if(e.year&&(e=e.year()),"number"!==typeof e||e<1888||e>2111)throw t.replace(/\{0\}/,this.local.name);return e},toMonthIndex:function(e,t,n){var r=this.intercalaryMonth(e);if(n&&t!==r||t<1||t>12)throw xz.local.invalidMonth.replace(/\{0\}/,this.local.name);return r?!n&&t<=r?t-1:t:t-1},toChineseMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var n=this.intercalaryMonth(e),r=n?12:11;if(t<0||t>r)throw xz.local.invalidMonth.replace(/\{0\}/,this.local.name);return n?t<n?t+1:t:t+1},intercalaryMonth:function(e){return e=this._validateYear(e),Sz[e-Sz[0]]>>13},isIntercalaryMonth:function(e,t){e.year&&(e=e.year(),t=e.month());var n=this.intercalaryMonth(e);return!!n&&n===t},leapYear:function(e){return 0!==this.intercalaryMonth(e)},weekOfYear:function(e,t,n){var r,i=this._validateYear(e,xz.local.invalidyear),a=Ez[i-Ez[0]],o=a>>9&4095,s=a>>5&15,l=31&a;r=kz.newDate(o,s,l),r.add(4-(r.dayOfWeek()||7),"d");var u=this.toJD(e,t,n)-r.toJD();return 1+Math.floor(u/7)},monthsInYear:function(e){return this.leapYear(e)?13:12},daysInMonth:function(e,t){e.year&&(t=e.month(),e=e.year()),e=this._validateYear(e);var n=Sz[e-Sz[0]];if(t>(n>>13?12:11))throw xz.local.invalidMonth.replace(/\{0\}/,this.local.name);return n&1<<12-t?30:29},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,a,n,xz.local.invalidDate);e=this._validateYear(r.year()),t=r.month(),n=r.day();var i=this.isIntercalaryMonth(e,t),a=this.toChineseMonth(e,t),o=hr(e,a,n,i);return kz.toJD(o.year,o.month,o.day)},fromJD:function(e){var t=kz.fromJD(e),n=fr(t.year(),t.month(),t.day()),r=this.toMonthIndex(n.year,n.month,n.isIntercalary);return this.newDate(n.year,r,n.day)},fromString:function(e){var t=e.match(Tz),n=this._validateYear(+t[1]),r=+t[2],i=!!t[3],a=this.toMonthIndex(n,r,i),o=+t[4];return this.newDate(n,a,o)},add:function(e,t,n){var r=e.year(),i=e.month(),a=this.isIntercalaryMonth(r,i),o=this.toChineseMonth(r,i),s=Object.getPrototypeOf(dr.prototype).add.call(this,e,t,n);if("y"===n){var l=s.year(),u=s.month(),c=this.isIntercalaryMonth(l,o),d=a&&c?this.toMonthIndex(l,o,!0):this.toMonthIndex(l,o,!1);d!==u&&s.month(d)}return s}});var Tz=/^\s*(-?\d\d\d\d|\d\d)[-\/](\d?\d)([iI]?)[-\/](\d?\d)/m,Mz=/^\d?\d[iI]?/m,Az=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,Cz=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;xz.calendars.chinese=dr;var Sz=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],Ez=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];pr.prototype=new xz.baseCalendar,bz(pr.prototype,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear||xz.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return e=r.year(),e<0&&e++,r.day()+30*(r.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,i=t-30*(r-1)+1;return this.newDate(n,r,i)}}),xz.calendars.coptic=pr;mr.prototype=new xz.baseCalendar,bz(mr.prototype,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),400},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,t,n){return(this._validate(e,t,n,xz.local.invalidDate).day()+1)%8},weekDay:function(e,t,n){var r=this.dayOfWeek(e,t,n);return r>=2&&r<=6},extraInfo:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return{century:Pz[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return e=r.year()+(r.year()<0?1:0),t=r.month(),(n=r.day())+(t>1?16:0)+(t>2?32*(t-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var t=Math.floor(e/400)+1;e-=400*(t-1),e+=e>15?16:0;var n=Math.floor(e/32)+1,r=e-32*(n-1)+1;return this.newDate(t<=0?t-1:t,n,r)}});var Pz={20:"Fruitbat",21:"Anchovy"};xz.calendars.discworld=mr;gr.prototype=new xz.baseCalendar,bz(gr.prototype,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),e=t.year()+(t.year()<0?1:0);return e%4===3||e%4===-1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear||xz.regionalOptions[""].invalidYear),13},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(13===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return e=r.year(),e<0&&e++,r.day()+30*(r.month()-1)+365*(e-1)+Math.floor(e/4)+this.jdEpoch-1},fromJD:function(e){var t=Math.floor(e)+.5-this.jdEpoch,n=Math.floor((t-Math.floor((t+366)/1461))/365)+1;n<=0&&n--,t=Math.floor(e)+.5-this.newDate(n,1,1).toJD();var r=Math.floor(t/30)+1,i=t-30*(r-1)+1;return this.newDate(n,r,i)}}),xz.calendars.ethiopian=gr;yr.prototype=new xz.baseCalendar,bz(yr.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear);return this._leapYear(t.year())},_leapYear:function(e){return e=e<0?e+1:e,vr(7*e+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,xz.local.invalidMonth),12===t&&this.leapYear(e)?30:8===t&&5===vr(this.daysInYear(e),10)?30:9===t&&3===vr(this.daysInYear(e),10)?29:this.daysPerMonth[t-1]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},extraInfo:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var i=e<=0?e+1:e,a=this.jdEpoch+this._delay1(i)+this._delay2(i)+n+1;if(t<7){for(var o=7;o<=this.monthsInYear(e);o++)a+=this.daysInMonth(e,o);for(var o=1;o<t;o++)a+=this.daysInMonth(e,o)}else for(var o=7;o<t;o++)a+=this.daysInMonth(e,o);return a},_delay1:function(e){var t=Math.floor((235*e-234)/19),n=12084+13753*t,r=29*t+Math.floor(n/25920);return vr(3*(r+1),7)<3&&r++,r},_delay2:function(e){var t=this._delay1(e-1),n=this._delay1(e);return this._delay1(e+1)-n===356?2:n-t===382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var t=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===t?1:t+1,7,1);)t++;for(var n=e<this.toJD(t,1,1)?7:1;e>this.toJD(t,n,this.daysInMonth(t,n));)n++;var r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),xz.calendars.hebrew=yr;_r.prototype=new xz.baseCalendar,bz(_r.prototype,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){return(11*this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear).year()+14)%30<11},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){return this.leapYear(e)?355:354},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e=e<=0?e+1:e,n+Math.ceil(29.5*(t-1))+354*(e-1)+Math.floor((3+11*e)/30)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=Math.floor((30*(e-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var n=Math.min(12,Math.ceil((e-29-this.toJD(t,1,1))/29.5)+1),r=e-this.toJD(t,n,1)+1;return this.newDate(t,n,r)}}),xz.calendars.islamic=_r;br.prototype=new xz.baseCalendar,bz(br.prototype,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),e=t.year()<0?t.year()+1:t.year();return e%4===0},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(4-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return e=r.year(),t=r.month(),n=r.day(),e<0&&e++,t<=2&&(e--,t+=12),Math.floor(365.25*(e+4716))+Math.floor(30.6001*(t+1))+n-1524.5},fromJD:function(e){var t=Math.floor(e+.5),n=t+1524,r=Math.floor((n-122.1)/365.25),i=Math.floor(365.25*r),a=Math.floor((n-i)/30.6001),o=a-Math.floor(a<14?1:13),s=r-Math.floor(o>2?4716:4715),l=n-i-Math.floor(30.6001*a);return s<=0&&s--,this.newDate(s,o,l)}}),xz.calendars.julian=br;xr.prototype=new xz.baseCalendar,bz(xr.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),!1},formatYear:function(e){e=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear).year();var t=Math.floor(e/400);return e%=400,e+=e<0?400:0,t+"."+Math.floor(e/20)+"."+e%20},forYear:function(e){if(e=e.split("."),e.length<3)throw"Invalid Mayan year";for(var t=0,n=0;n<e.length;n++){var r=parseInt(e[n],10);if(Math.abs(r)>19||n>0&&r<0)throw"Invalid Mayan year";t=20*t+r}return t},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),18},weekOfYear:function(e,t,n){return this._validate(e,t,n,xz.local.invalidDate),0},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),360},daysInMonth:function(e,t){return this._validate(e,t,this.minDay,xz.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(e,t,n){return this._validate(e,t,n,xz.local.invalidDate).day()},weekDay:function(e,t,n){return this._validate(e,t,n,xz.local.invalidDate),!0},extraInfo:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate),i=r.toJD(),a=this._toHaab(i),o=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[a[0]-1],haabMonth:a[0],haabDay:a[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(e){e-=this.jdEpoch;var t=wr(e+8+340,365);return[Math.floor(t/20)+1,wr(t,20)]},_toTzolkin:function(e){return e-=this.jdEpoch,[kr(e+20,20),kr(e+4,13)]},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);return r.day()+20*r.month()+360*r.year()+this.jdEpoch},fromJD:function(e){e=Math.floor(e)+.5-this.jdEpoch;var t=Math.floor(e/360);e%=360,e+=e<0?360:0;var n=Math.floor(e/20),r=e%20;return this.newDate(t,n,r)}}),xz.calendars.mayan=xr;Tr.prototype=new xz.baseCalendar;var Iz=xz.instance("gregorian");bz(Tr.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear||xz.regionalOptions[""].invalidYear);return Iz.leapYear(t.year()+(t.year()<1?1:0)+1469)},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidMonth),e=r.year();e<0&&e++;for(var i=r.day(),a=1;a<r.month();a++)i+=this.daysPerMonth[a-1];return i+Iz.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var t=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(t+1,1,1);)t++;for(var n=e-Math.floor(this.toJD(t,1,1)+.5)+1,r=1;n>this.daysInMonth(t,r);)n-=this.daysInMonth(t,r),r++;return this.newDate(t,r,n)}}),xz.calendars.nanakshahi=Tr;Mr.prototype=new xz.baseCalendar,bz(Mr.prototype,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(e){return this.daysInYear(e)!==this.daysPerYear},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){if(e=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear).year(),"undefined"===typeof this.NEPALI_CALENDAR_DATA[e])return this.daysPerYear;for(var t=0,n=this.minMonth;n<=12;n++)t+=this.NEPALI_CALENDAR_DATA[e][n];return t},daysInMonth:function(e,t){return e.year&&(t=e.month(),e=e.year()),this._validate(e,t,this.minDay,xz.local.invalidMonth),"undefined"===typeof this.NEPALI_CALENDAR_DATA[e]?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[e][t]},weekDay:function(e,t,n){return 6!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var i=xz.instance(),a=0,o=t,s=e;this._createMissingCalendarData(e);var l=e-(o>9||9===o&&n>=this.NEPALI_CALENDAR_DATA[s][0]?56:57);for(9!==t&&(a=n,o--);9!==o;)o<=0&&(o=12,s--),a+=this.NEPALI_CALENDAR_DATA[s][o],o--;return 9===t?(a+=n-this.NEPALI_CALENDAR_DATA[s][0])<0&&(a+=i.daysInYear(l)):a+=this.NEPALI_CALENDAR_DATA[s][9]-this.NEPALI_CALENDAR_DATA[s][0],i.newDate(l,1,1).add(a,"d").toJD()},fromJD:function(e){var t=xz.instance(),n=t.fromJD(e),r=n.year(),i=n.dayOfYear(),a=r+56;this._createMissingCalendarData(a);for(var o=9,s=this.NEPALI_CALENDAR_DATA[a][0],l=this.NEPALI_CALENDAR_DATA[a][o]-s+1;i>l;)o++,o>12&&(o=1,a++),l+=this.NEPALI_CALENDAR_DATA[a][o];var u=this.NEPALI_CALENDAR_DATA[a][o]-(l-i);return this.newDate(a,o,u)},_createMissingCalendarData:function(e){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var n=e-1;n<e+2;n++)"undefined"===typeof this.NEPALI_CALENDAR_DATA[n]&&(this.NEPALI_CALENDAR_DATA[n]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),xz.calendars.nepali=Mr;Ar.prototype=new xz.baseCalendar,bz(Ar.prototype,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear);return 682*((t.year()-(t.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-(r.dayOfWeek()+1)%7,"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(12===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate);e=r.year(),t=r.month(),n=r.day();var i=e-(e>=0?474:473),a=474+Cr(i,2820);return n+(t<=7?31*(t-1):30*(t-1)+6)+Math.floor((682*a-110)/2816)+365*(a-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e)+.5;var t=e-this.toJD(475,1,1),n=Math.floor(t/1029983),r=Cr(t,1029983),i=2820;if(1029982!==r){var a=Math.floor(r/366),o=Cr(r,366);i=Math.floor((2134*a+2816*o+2815)/1028522)+a+1}var s=i+2820*n+474;s=s<=0?s-1:s;var l=e-this.toJD(s,1,1)+1,u=l<=186?Math.ceil(l/31):Math.ceil((l-6)/30),c=e-this.toJD(s,u,1)+1;return this.newDate(s,u,c)}}),xz.calendars.persian=Ar,xz.calendars.jalali=Ar;var Lz=xz.instance();Sr.prototype=new xz.baseCalendar,bz(Sr.prototype,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),e=this._t2gYear(t.year());return Lz.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),e=this._t2gYear(r.year());return Lz.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate),e=this._t2gYear(r.year());return Lz.toJD(e,r.month(),r.day())},fromJD:function(e){var t=Lz.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),xz.calendars.taiwan=Sr;var Oz=xz.instance();Er.prototype=new xz.baseCalendar,bz(Er.prototype,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),e=this._t2gYear(t.year());return Oz.leapYear(e)},weekOfYear:function(e,t,n){var r=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear),e=this._t2gYear(r.year());return Oz.weekOfYear(e,r.month(),r.day())},daysInMonth:function(e,t){var n=this._validate(e,t,this.minDay,xz.local.invalidMonth);return this.daysPerMonth[n.month()-1]+(2===n.month()&&this.leapYear(n.year())?1:0)},weekDay:function(e,t,n){return(this.dayOfWeek(e,t,n)||7)<6},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate),e=this._t2gYear(r.year());return Oz.toJD(e,r.month(),r.day())},fromJD:function(e){var t=Oz.fromJD(e),n=this._g2tYear(t.year());return this.newDate(n,t.month(),t.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),xz.calendars.thai=Er;Pr.prototype=new xz.baseCalendar,bz(Pr.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var t=this._validate(e,this.minMonth,this.minDay,xz.local.invalidYear);return 355===this.daysInYear(t.year())},weekOfYear:function(e,t,n){var r=this.newDate(e,t,n);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var t=0,n=1;n<=12;n++)t+=this.daysInMonth(e,n);return t},daysInMonth:function(e,t){for(var n=this._validate(e,t,this.minDay,xz.local.invalidMonth),r=n.toJD()-24e5+.5,i=0,a=0;a<zz.length;a++){if(zz[a]>r)return zz[i]-zz[i-1];i++}return 30},weekDay:function(e,t,n){return 5!==this.dayOfWeek(e,t,n)},toJD:function(e,t,n){var r=this._validate(e,t,n,xz.local.invalidDate),i=12*(r.year()-1)+r.month()-15292;return r.day()+zz[i-1]-1+24e5-.5},fromJD:function(e){for(var t=e-24e5+.5,n=0,r=0;r<zz.length&&!(zz[r]>t);r++)n++;var i=n+15292,a=Math.floor((i-1)/12),o=a+1,s=i-12*a,l=t-zz[n-1]+1;return this.newDate(o,s,l)},isValid:function(e,t,n){var r=xz.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(e=null!=e.year?e.year:e,r=e>=1276&&e<=1500),r},_validate:function(e,t,n,r){var i=xz.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw r.replace(/\{0\}/,this.local.name);return i}}),xz.calendars.ummalqura=Pr;var zz=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990];bz(xz.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),xz.local=xz.regionalOptions[""],bz(xz.cdate.prototype,{formatDate:function(e,t){return"string"!==typeof e&&(t=e,e=""),this._calendar.formatDate(e||"",this,t)}}),bz(xz.baseCalendar.prototype,{UNIX_EPOCH:xz.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:xz.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,n){if("string"!==typeof e&&(n=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw xz.local.invalidFormat||xz.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat,n=n||{};for(var r=n.dayNamesShort||this.local.dayNamesShort,i=n.dayNames||this.local.dayNames,a=n.monthNumbers||this.local.monthNumbers,o=n.monthNamesShort||this.local.monthNamesShort,s=n.monthNames||this.local.monthNames,l=(n.calculateWeek||this.local.calculateWeek,function(t,n){for(var r=1;m+r<e.length&&e.charAt(m+r)===t;)r++;return m+=r-1,Math.floor(r/(n||1))>1}),u=function(e,t,n,r){var i=""+t;if(l(e,r))for(;i.length<n;)i="0"+i;return i},c=this,d=this.local.digits,f=function(e){return n.localNumbers&&d?d(e):e},h="",p=!1,m=0;m<e.length;m++)if(p)"'"!==e.charAt(m)||l("'")?h+=e.charAt(m):p=!1;else switch(e.charAt(m)){case"d":h+=f(u("d",t.day(),2));break;case"D":h+=function(e,t,n,r){return l(e)?r[t]:n[t]}("D",t.dayOfWeek(),r,i);break;case"o":h+=u("o",t.dayOfYear(),3);break;case"w":h+=u("w",t.weekOfYear(),2);break;case"m":h+=function(e){return"function"===typeof a?a.call(c,e,l("m")):f(u("m",e.month(),2))}(t);break;case"M":h+=function(e,t){return t?"function"===typeof s?s.call(c,e):s[e.month()-c.minMonth]:"function"===typeof o?o.call(c,e):o[e.month()-c.minMonth]}(t,l("M"));break;case"y":h+=l("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100;break;case"Y":l("Y",2),h+=t.formatYear();break;case"J":h+=t.toJD();break;case"@":h+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":h+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?h+="'":p=!0;break;default:h+=e.charAt(m)}return h},parseDate:function(e,t,n){if(null==t)throw xz.local.invalidArguments||xz.regionalOptions[""].invalidArguments;if(""===(t="object"===typeof t?t.toString():t+""))return null;e=e||this.local.dateFormat,n=n||{};var r=n.shortYearCutoff||this.shortYearCutoff;r="string"!==typeof r?r:this.today().year()%100+parseInt(r,10);for(var i=n.dayNamesShort||this.local.dayNamesShort,a=n.dayNames||this.local.dayNames,o=n.parseMonth||this.local.parseMonth,s=n.monthNumbers||this.local.monthNumbers,l=n.monthNamesShort||this.local.monthNamesShort,u=n.monthNames||this.local.monthNames,c=-1,d=-1,f=-1,h=-1,p=-1,m=!1,g=!1,y=function(t,n){for(var r=1;k+r<e.length&&e.charAt(k+r)===t;)r++;return k+=r-1,Math.floor(r/(n||1))>1},v=function(e,n){var r=y(e,n),i=[2,3,r?4:2,r?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],a=new RegExp("^-?\\d{1,"+i+"}"),o=t.substring(w).match(a);if(!o)throw(xz.local.missingNumberAt||xz.regionalOptions[""].missingNumberAt).replace(/\{0\}/,w);return w+=o[0].length,parseInt(o[0],10)},_=this,b=function(e,n,r,i){for(var a=y(e,i)?r:n,o=0;o<a.length;o++)if(t.substr(w,a[o].length).toLowerCase()===a[o].toLowerCase())return w+=a[o].length,o+_.minMonth;throw(xz.local.unknownNameAt||xz.regionalOptions[""].unknownNameAt).replace(/\{0\}/,w)},x=function(){if(t.charAt(w)!==e.charAt(k))throw(xz.local.unexpectedLiteralAt||xz.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,w);w++},w=0,k=0;k<e.length;k++)if(g)"'"!==e.charAt(k)||y("'")?x():g=!1;else switch(e.charAt(k)){case"d":h=v("d");break;case"D":b("D",i,a);break;case"o":p=v("o");break;case"w":v("w");break;case"m":f=function(){if("function"===typeof s){y("m");var e=s.call(_,t.substring(w));return w+=e.length,e}return v("m")}();break;case"M":f=function(){if("function"===typeof u){var e=y("M")?u.call(_,t.substring(w)):l.call(_,t.substring(w));return w+=e.length,e}return b("M",l,u)}();break;case"y":var T=k;m=!y("y",2),k=T,d=v("y",2);break;case"Y":d=v("Y",2);break;case"J":c=v("J")+.5,"."===t.charAt(w)&&(w++,v("J"));break;case"@":c=v("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=v("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":w=t.length;break;case"'":y("'")?x():g=!0;break;default:x()}if(w<t.length)throw xz.local.unexpectedText||xz.regionalOptions[""].unexpectedText;if(-1===d?d=this.today().year():d<100&&m&&(d+=-1===r?1900:this.today().year()-this.today().year()%100-(d<=r?0:100)),"string"===typeof f&&(f=o.call(this,d,f)),p>-1){f=1,h=p;for(var M=this.daysInMonth(d,f);h>M;M=this.daysInMonth(d,f))f++,h-=M}return c>-1?this.fromJD(c):this.newDate(d,f,h)},determineDate:function(e,t,n,r,i){n&&"object"!==typeof n&&(i=r,r=n,n=null),"string"!==typeof r&&(i=r,r="");var a=this;return t=t?t.newDate():null,e=null==e?t:"string"===typeof e?function(e){try{return a.parseDate(r,e,i)}catch(e){}e=e.toLowerCase();for(var t=(e.match(/^c/)&&n?n.newDate():null)||a.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=o.exec(e);s;)t.add(parseInt(s[1],10),s[2]||"d"),s=o.exec(e);return t}(e):"number"===typeof e?isNaN(e)||e===1/0||e===-1/0?t:a.today().add(e,"d"):a.newDate(e)}});var Rz=xz,Dz=AC.EPOCHJD,Nz=AC.ONEDAY,Fz={valType:"enumerated",values:Object.keys(Rz.calendars),editType:"calc",dflt:"gregorian"},jz=function(e,t,n,r){var i={};return i[n]=Fz,uE.coerce(e,t,i,n,r)},Bz=function(e,t,n,r){for(var i=0;i<n.length;i++)jz(e,t,n[i]+"calendar",r.calendar)},Uz={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},Vz={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},Hz={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},Wz="##",qz={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:Wz,w:Wz,c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},Gz={},Yz={xcalendar:Or(zr("x"))},Xz=uE.extendFlat({},Yz,{ycalendar:Or(zr("y"))}),Zz=uE.extendFlat({},Xz,{zcalendar:Or(zr("z"))}),Jz=Or(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" ")),Kz={moduleType:"component",name:"calendars",schema:{traces:{scatter:Xz,bar:Xz,box:Xz,heatmap:Xz,contour:Xz,histogram:Xz,histogram2d:Xz,histogram2dcontour:Xz,scatter3d:Zz,surface:Zz,mesh3d:Zz,scattergl:Xz,ohlc:Yz,candlestick:Yz},layout:{calendar:Or(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:Jz},yaxis:{calendar:Jz},scene:{xaxis:{calendar:Jz},yaxis:{calendar:Jz},zaxis:{calendar:Jz}},polar:{radialaxis:{calendar:Jz}}},transforms:{filter:{valuecalendar:Or(["Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:Or(["Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:Fz,handleDefaults:jz,handleTraceDefaults:Bz,CANONICAL_SUNDAY:Vz,CANONICAL_TICK:Uz,DFLTRANGE:Hz,getCal:Lr,worldCalFmt:Ir},Qz=Kz,$z=uE.extendFlat,eR=CE.dash,tR=YP.line,nR={x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",dflt:[],editType:"calc"},high:{valType:"data_array",dflt:[],editType:"calc"},low:{valType:"data_array",dflt:[],editType:"calc"},close:{valType:"data_array",dflt:[],editType:"calc"},line:{width:$z({},tR.width,{}),dash:$z({},eR,{}),editType:"style"},increasing:Rr("#3D9970"),decreasing:Rr("#FF4136"),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calcIfAutorange"}},rR=uE.extendFlat,iR={x:nR.x,open:nR.open,high:nR.high,low:nR.low,close:nR.close,line:{width:rR({},ez.line.width,{}),editType:"style"},increasing:Dr(nR.increasing.line.color.dflt),decreasing:Dr(nR.decreasing.line.color.dflt),text:nR.text,whiskerwidth:rR({},ez.whiskerwidth,{dflt:0})},aR=function(e,t,n,r){n(r+".showlegend"),!1===e.showlegend&&(t[r].showlegend=!1),n(r+".name",t.name+" - "+r)},oR={};oR.pushDummyTransformOpts=function(e,t){var n={type:t.type,_ephemeral:!0};Array.isArray(e.transforms)?e.transforms.push(n):e.transforms=[n]},oR.clearEphemeralTransformOpts=function(e){var t=e.transforms;if(Array.isArray(t)){for(var n=0;n<t.length;n++)t[n]._ephemeral&&t.splice(n,1);0===t.length&&delete e.transforms}},oR.copyOHLC=function(e,t){e.open&&(t.open=e.open),e.high&&(t.high=e.high),e.low&&(t.low=e.low),e.close&&(t.close=e.close)},oR.makeTransform=function(e,t,n){var r=uE.extendFlat([],e.transforms);return r[t.transformIndex]={type:e.type,direction:n,open:e.open,high:e.high,low:e.low,close:e.close},r},oR.getFilterFn=function(e){return new Nr(e)},oR.addRangeSlider=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(!0===e[r].visible){n=!0;break}n&&(t.xaxis||(t.xaxis={}),t.xaxis.rangeslider||(t.xaxis.rangeslider={}))};var sR=function(e,t,n,r){var i,a=n("x"),o=n("open"),s=n("high"),l=n("low"),u=n("close");return rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x"],r),i=Math.min(o.length,s.length,l.length,u.length),a&&(i=Math.min(i,a.length))<a.length&&(t.x=a.slice(0,i)),i<o.length&&(t.open=o.slice(0,i)),i<s.length&&(t.high=s.slice(0,i)),i<l.length&&(t.low=l.slice(0,i)),i<u.length&&(t.close=u.slice(0,i)),i},lR=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,iR,n,r)}if(oR.pushDummyTransformOpts(e,t),0===sR(e,t,i,r))return void(t.visible=!1);i("line.width"),Fr(e,t,i,"increasing"),Fr(e,t,i,"decreasing"),i("text"),i("whiskerwidth")},uR={};uR.moduleType="transform",uR.name="candlestick",uR.attributes={},uR.supplyDefaults=function(e,t,n,r){return oR.clearEphemeralTransformOpts(r),oR.copyOHLC(e,t),e},uR.transform=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];"candlestick"===i.type?n.push(jr(i,t,"increasing"),jr(i,t,"decreasing")):n.push(i)}return oR.addRangeSlider(n,t.layout),n},uR.calcTransform=function(e,t,n){for(var r=n.direction,i=oR.getFilterFn(r),a=t.open,o=t.high,s=t.low,l=t.close,u=a.length,c=[],d=[],f=t._fullInput.x?function(e){var n=t.x[e];c.push(n,n,n,n,n,n)}:function(e){c.push(e,e,e,e,e,e)},h=0;h<u;h++)i(a[h],l[h])&&SC(o[h])&&SC(s[h])&&(f(h),function(e,t,n,r){d.push(n,e,r,r,r,t)}(a[h],o[h],s[h],l[h]));t.x=c,t.y=d};var cR={moduleType:"trace",name:"candlestick",basePlotModule:xL,categories:["cartesian","showLegend","candlestick"],meta:{},attributes:iR,supplyDefaults:lR};rS.register(mz),rS.register(uR);var dR=cR,fR=TE.overrideAll,hR={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{valType:"string",editType:"calc"},titlefont:KC({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:KC({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc"},tickformatstops:fR(LE.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:eS.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:eS.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},editType:"calc"},pR=KC({editType:"calc"});pR.family.dflt='"Open Sans", verdana, arial, sans-serif',pR.size.dflt=12,pR.color.dflt=eS.defaultLine;var mR={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:hR,baxis:hR,font:pR,color:{valType:"color",dflt:eS.defaultLine,editType:"plot"}},gR=uE.isArrayOrTypedArray,yR=function(e){return Br(e,0)},vR=function(e,t,n,r){var i,a,o,s=[],l=!!n.smoothing,u=!!r.smoothing,c=e[0].length-1,d=e.length-1;for(i=0,a=[],o=[];i<=c;i++)a[i]=e[0][i],o[i]=t[0][i];for(s.push({x:a,y:o,bicubic:l}),i=0,a=[],o=[];i<=d;i++)a[i]=e[i][c],o[i]=t[i][c];for(s.push({x:a,y:o,bicubic:u}),i=c,a=[],o=[];i>=0;i--)a[c-i]=e[d][i],o[c-i]=t[d][i];for(s.push({x:a,y:o,bicubic:l}),i=d,a=[],o=[];i>=0;i--)a[d-i]=e[i][0],o[d-i]=t[i][0];return s.push({x:a,y:o,bicubic:u}),s},_R=WC.extendFlat,bR=function(e,t,n,r){function i(t){var i,a,o,s,l,u,c,d,f,p,m,g,y=[],v=[],_={};if("b"===n)for(a=e.b2j(t),o=Math.floor(Math.max(0,Math.min(L-2,a))),s=a-o,_.length=L,_.crossLength=I,_.xy=function(t){return e.evalxy([],t,a)},_.dxy=function(t,n){return e.dxydi([],t,o,n,s)},i=0;i<I;i++)u=Math.min(I-2,i),c=i-u,d=e.evalxy([],i,a),A.smoothing&&i>0&&(f=e.dxydi([],i-1,o,0,s),y.push(l[0]+f[0]/3),v.push(l[1]+f[1]/3),p=e.dxydi([],i-1,o,1,s),y.push(d[0]-p[0]/3),v.push(d[1]-p[1]/3)),y.push(d[0]),v.push(d[1]),l=d;else for(i=e.a2i(t),u=Math.floor(Math.max(0,Math.min(I-2,i))),c=i-u,_.length=I,_.crossLength=L,_.xy=function(t){return e.evalxy([],i,t)},_.dxy=function(t,n){return e.dxydj([],u,t,c,n)},a=0;a<L;a++)o=Math.min(L-2,a),s=a-o,d=e.evalxy([],i,a),A.smoothing&&a>0&&(m=e.dxydj([],u,a-1,c,0),y.push(l[0]+m[0]/3),v.push(l[1]+m[1]/3),g=e.dxydj([],u,a-1,c,1),y.push(d[0]-g[0]/3),v.push(d[1]-g[1]/3)),y.push(d[0]),v.push(d[1]),l=d;return _.axisLetter=n,_.axis=x,_.crossAxis=A,_.value=t,_.constvar=r,_.index=h,_.x=y,_.y=v,_.smoothing=A.smoothing,_}function a(t){var i,a,o,s,l,u=[],c=[],d={};if(d.length=b.length,d.crossLength=M.length,"b"===n)for(o=Math.max(0,Math.min(L-2,t)),l=Math.min(1,Math.max(0,t-o)),d.xy=function(n){return e.evalxy([],n,t)},d.dxy=function(t,n){return e.dxydi([],t,o,n,l)},i=0;i<E;i++)u[i]=C[t*O][i],c[i]=S[t*O][i];else for(a=Math.max(0,Math.min(I-2,t)),s=Math.min(1,Math.max(0,t-a)),d.xy=function(n){return e.evalxy([],t,n)},d.dxy=function(t,n){return e.dxydj([],a,t,s,n)},i=0;i<P;i++)u[i]=C[i][t*O],c[i]=S[i][t*O];return d.axisLetter=n,d.axis=x,d.crossAxis=A,d.value=b[t],d.constvar=r,d.index=t,d.x=u,d.y=c,d.smoothing=A.smoothing,d}var o,s,l,u,c,d,f,h,p,m,g,y,v,_,b=e[n],x=e[n+"axis"],w=x._gridlines=[],k=x._minorgridlines=[],T=x._boundarylines=[],M=e[r],A=e[r+"axis"];"array"===x.tickmode&&(x.tickvals=b.slice());var C=e.xctrl,S=e.yctrl,E=C[0].length,P=C.length,I=e.a.length,L=e.b.length;PI.prepTicks(x),"array"===x.tickmode&&delete x.tickvals;var O=x.smoothing?3:1;if("array"===x.tickmode){for(u=5e-15,c=[Math.floor((b.length-1-x.arraytick0)/x.arraydtick*(1+u)),Math.ceil(-x.arraytick0/x.arraydtick/(1+u))].sort(function(e,t){return e-t}),d=c[0]-1,f=c[1]+1,h=d;h<f;h++)(s=x.arraytick0+x.arraydtick*h)<0||s>b.length-1||w.push(_R(a(s),{color:x.gridcolor,width:x.gridwidth}));for(h=d;h<f;h++)if(l=x.arraytick0+x.arraydtick*h,g=Math.min(l+x.arraydtick,b.length-1),!(l<0||l>b.length-1)&&!(g<0||g>b.length-1))for(y=b[l],v=b[g],o=0;o<x.minorgridcount;o++)(_=g-l)<=0||(m=y+(v-y)*(o+1)/(x.minorgridcount+1)*(x.arraydtick/_))<b[0]||m>b[b.length-1]||k.push(_R(i(m),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&T.push(_R(a(0),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&T.push(_R(a(b.length-1),{color:x.endlinecolor,width:x.endlinewidth}))}else{for(u=5e-15,c=[Math.floor((b[b.length-1]-x.tick0)/x.dtick*(1+u)),Math.ceil((b[0]-x.tick0)/x.dtick/(1+u))].sort(function(e,t){return e-t}),d=c[0],f=c[1],h=d;h<=f;h++)p=x.tick0+x.dtick*h,w.push(_R(i(p),{color:x.gridcolor,width:x.gridwidth}));for(h=d-1;h<f+1;h++)for(p=x.tick0+x.dtick*h,o=0;o<x.minorgridcount;o++)(m=p+x.dtick*(o+1)/(x.minorgridcount+1))<b[0]||m>b[b.length-1]||k.push(_R(i(m),{color:x.minorgridcolor,width:x.minorgridwidth}));x.startline&&T.push(_R(i(b[0]),{color:x.startlinecolor,width:x.startlinewidth})),x.endline&&T.push(_R(i(b[b.length-1]),{color:x.endlinecolor,width:x.endlinewidth}))}},xR=WC.extendFlat,wR=function(e,t){var n,r,i,a=t._labels=[],o=t._gridlines;for(n=0;n<o.length;n++)i=o[n],-1!==["start","both"].indexOf(t.showticklabels)&&(r=PI.tickText(t,i.value),xR(r,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:i.xy(0),dxy:i.dxy(0,0),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===n,isLast:n===o.length-1}),a.push(r)),-1!==["end","both"].indexOf(t.showticklabels)&&(r=PI.tickText(t,i.value),xR(r,{endAnchor:!1,xy:i.xy(i.crossLength-1),dxy:i.dxy(i.crossLength-2,1),axis:i.axis,length:i.crossAxis.length,font:i.axis.tickfont,isFirst:0===n,isLast:n===o.length-1}),a.push(r))},kR=uE.isArrayOrTypedArray,TR=function(e,t,n){var r,i,a,o,s,l,u=[],c=kR(e)?e.length:e,d=kR(t)?t.length:t,f=kR(e)?e:null,h=kR(t)?t:null;f&&(a=(f.length-1)/(f[f.length-1]-f[0])/(c-1)),h&&(o=(h.length-1)/(h[h.length-1]-h[0])/(d-1));var p,m=1/0,g=-1/0;for(i=0;i<d;i++)for(u[i]=[],l=h?(h[i]-h[0])*o:i/(d-1),r=0;r<c;r++)s=f?(f[r]-f[0])*a:r/(c-1),p=s-l*n,m=Math.min(p,m),g=Math.max(p,g),u[i][r]=p;var y=1/(g-m),v=-m*y;for(i=0;i<d;i++)for(r=0;r<c;r++)u[i][r]=y*u[i][r]+v;return u},MR=uE.isArrayOrTypedArray,AR=function(e,t,n){var r,i;for(Array.isArray(e)?e.length>t.length&&(e=e.slice(0,t.length)):e=[],r=0;r<t.length;r++)for(MR(e[r])?e[r].length>t.length&&(e[r]=e[r].slice(0,t.length)):e[r]=[],i=0;i<t[0].length;i++)e[r][i]=n(t[r][i]);return e},CR=function(e,t,n){var r,i,a,o=[],s=[],l=e[0].length,u=e.length,c=0;for(r=0;r<l;r++)for(i=0;i<u;i++)void 0===e[i][r]&&(o.push(r),s.push(i),e[i][r]=function(t,n){var r,i=0,a=0;return t>0&&void 0!==(r=e[n][t-1])&&(a++,i+=r),t<l-1&&void 0!==(r=e[n][t+1])&&(a++,i+=r),n>0&&void 0!==(r=e[n-1][t])&&(a++,i+=r),n<u-1&&void 0!==(r=e[n+1][t])&&(a++,i+=r),i/Math.max(1,a)}(r,i)),c=Math.max(c,Math.abs(e[i][r]));if(!o.length)return e;var d,f,h,p,m,g,y,v,_,b,x,w=0,k=0,T=o.length;do{for(w=0,a=0;a<T;a++){r=o[a],i=s[a];var M,A,C,S,E,P,I=0,L=0;0===r?(E=Math.min(l-1,2),C=t[E],S=t[1],M=e[i][E],A=e[i][1],L+=A+(A-M)*(t[0]-S)/(S-C),I++):r===l-1&&(E=Math.max(0,l-3),C=t[E],S=t[l-2],M=e[i][E],A=e[i][l-2],L+=A+(A-M)*(t[l-1]-S)/(S-C),I++),(0===r||r===l-1)&&i>0&&i<u-1&&(d=n[i+1]-n[i],f=n[i]-n[i-1],L+=(f*e[i+1][r]+d*e[i-1][r])/(f+d),I++),0===i?(P=Math.min(u-1,2),C=n[P],S=n[1],M=e[P][r],A=e[1][r],L+=A+(A-M)*(n[0]-S)/(S-C),I++):i===u-1&&(P=Math.max(0,u-3),C=n[P],S=n[u-2],M=e[P][r],A=e[u-2][r],L+=A+(A-M)*(n[u-1]-S)/(S-C),I++),(0===i||i===u-1)&&r>0&&r<l-1&&(d=t[r+1]-t[r],f=t[r]-t[r-1],L+=(f*e[i][r+1]+d*e[i][r-1])/(f+d),I++),I?L/=I:(h=t[r+1]-t[r],p=t[r]-t[r-1],m=n[i+1]-n[i],g=n[i]-n[i-1],y=h*p*(h+p),v=m*g*(m+g),L=(y*(g*e[i+1][r]+m*e[i-1][r])+v*(p*e[i][r+1]+h*e[i][r-1]))/(v*(p+h)+y*(g+m))),_=L-e[i][r],b=_/c,w+=b*b,x=I?0:.85,e[i][r]+=_*(1+x)}w=Math.sqrt(w)}while(k++<100&&w>1e-5);return uE.log("Smoother converged to",w,"after",k,"iterations"),e},SR=function(e,t){var n,r,i,a,o,s;if(t){for(n=0,o=0;o<e.length;o++)n=Math.max(n,e[o].length);if(0===n)return!1;i=function(e){return e.length},a=function(e,t,n){return e[n][t]}}else n=e.length,i=function(e,t){return e[t].length},a=function(e,t,n){return e[t][n]};var l=new Array(n);for(o=0;o<n;o++)for(r=i(e,o),l[o]=new Array(r),s=0;s<r;s++)l[o][s]=function(e){if(SC(e))return+e}(a(e,o,s));return l},ER=function(e,t){var n,r=PI.getFromId(e,t.xaxis||"x"),i=PI.getFromId(e,t.yaxis||"y"),a=t.aaxis,o=t.baxis,s=t._a=t.a,l=t._b=t.b,u={},c=t.y;if(t._cheater){var d="index"===a.cheatertype?s.length:s,f="index"===o.cheatertype?l.length:l;n=TR(d,f,t.cheaterslope)}else n=t.x;t._x=n=SR(n),t._y=c=SR(c),CR(n,s,l),CR(c,s,l),t.setScale(),u.xp=t.xp=AR(t.xp,n,r.c2p),u.yp=t.yp=AR(t.yp,c,i.c2p);var h=yR(n),p=yR(c),m=.5*(h[1]-h[0]),g=.5*(h[1]+h[0]),y=.5*(p[1]-p[0]),v=.5*(p[1]+p[0]);return h=[g-1.3*m,g+1.3*m],p=[v-1.3*y,v+1.3*y],PI.expand(r,h,{padded:!0}),PI.expand(i,p,{padded:!0}),bR(t,0,"a","b"),bR(t,0,"b","a"),wR(0,a),wR(0,o),u.clipsegments=vR(t.xctrl,t.yctrl,a,o),u.x=n,u.y=c,u.a=s,u.b=l,[u]},PR=jE.addOpacity,IR=function(e,t,n){function r(n,r){return uE.coerce(e,t,s,n,r)}function i(n,r){return uE.coerce2(e,t,s,n,r)}var a=n.letter,o=n.font||{},s=mR[a+"axis"];n.name&&(t._name=n.name,t._id=n.name);var l=r("type");if("-"===l&&(n.data&&Ur(t,n.data),"-"===t.type?t.type="linear":l=e.type=t.type),r("smoothing"),r("cheatertype"),r("showticklabels"),r("labelprefix",a+" = "),r("labelsuffix"),r("showtickprefix"),r("showticksuffix"),r("separatethousands"),r("tickformat"),r("exponentformat"),r("showexponent"),r("categoryorder"),r("tickmode"),r("tickvals"),r("ticktext"),r("tick0"),r("dtick"),"array"===t.tickmode&&(r("arraytick0"),r("arraydtick")),r("labelpadding"),t._hovertitle=a,"date"===l){rS.getComponentMethod("calendars","handleDefaults")(e,t,"calendar",n.calendar)}EI(t,n.fullLayout);var u=r("color",n.dfltColor),c=u===e.color?u:o.color;r("title"),uE.coerceFont(r,"titlefont",{family:o.family,size:Math.round(1.2*o.size),color:c}),r("titleoffset"),r("tickangle"),r("autorange",!t.isValidRange(e.range))&&r("rangemode"),r("range"),t.cleanRange(),r("fixedrange"),XE(e,t,r,l),qE(e,t,r,l,n),aL(e,t,r);var d=i("gridcolor",PR(u,.3)),f=i("gridwidth"),h=r("showgrid");h||(delete t.gridcolor,delete t.gridwidth);var p=i("startlinecolor",u),m=i("startlinewidth",f);r("startline",t.showgrid||!!p||!!m)||(delete t.startlinecolor,delete t.startlinewidth);var g=i("endlinecolor",u),y=i("endlinewidth",f);return r("endline",t.showgrid||!!g||!!y)||(delete t.endlinecolor,delete t.endlinewidth),h?(r("minorgridcount"),r("minorgridwidth",f),r("minorgridcolor",PR(d,.06)),t.minorgridcount||(delete t.minorgridwidth,delete t.minorgridcolor)):(delete t.gridcolor,delete t.gridWidth),t._initialCategories="category"===l?uL(a,t.categoryorder,t.categoryarray,n.data):[],"none"===t.showticklabels&&(delete t.tickfont,delete t.tickangle,delete t.showexponent,delete t.exponentformat,delete t.tickformat,delete t.showticksuffix,delete t.showtickprefix),t.showticksuffix||delete t.ticksuffix,t.showtickprefix||delete t.tickprefix,r("tickmode"),(!t.title||t.title&&0===t.title.length)&&(delete t.titlefont,delete t.titleoffset),t},LR=function(e,t,n,r,i){r("a")||(r("da"),r("a0")),r("b")||(r("db"),r("b0")),Vr(e,t,n,i)},OR=function(e,t,n,r){var i=e[0]-t[0],a=e[1]-t[1],o=n[0]-t[0],s=n[1]-t[1],l=Math.pow(i*i+a*a,.25),u=Math.pow(o*o+s*s,.25),c=(u*u*i-l*l*o)*r,d=(u*u*a-l*l*s)*r,f=u*(l+u)*3,h=l*(l+u)*3;return[[t[0]+(f&&c/f),t[1]+(f&&d/f)],[t[0]-(h&&c/h),t[1]-(h&&d/h)]]},zR=uE.ensureArray,RR=function(e,t,n,r,i,a){var o,s,l,u,c,d,f,h,p,m,g=n[0].length,y=n.length,v=i?3*g-2:g,_=a?3*y-2:y;for(e=zR(e,_),t=zR(t,_),l=0;l<_;l++)e[l]=zR(e[l],v),t[l]=zR(t[l],v);for(s=0,u=0;s<y;s++,u+=a?3:1)for(c=e[u],d=t[u],f=n[s],h=r[s],o=0,l=0;o<g;o++,l+=i?3:1)c[l]=f[o],d[l]=h[o];if(i)for(s=0,u=0;s<y;s++,u+=a?3:1){for(o=1,l=3;o<g-1;o++,l+=3)p=OR([n[s][o-1],r[s][o-1]],[n[s][o],r[s][o]],[n[s][o+1],r[s][o+1]],i),e[u][l-1]=p[0][0],t[u][l-1]=p[0][1],e[u][l+1]=p[1][0],t[u][l+1]=p[1][1];m=Hr([e[u][0],t[u][0]],[e[u][2],t[u][2]],[e[u][3],t[u][3]]),e[u][1]=m[0],t[u][1]=m[1],m=Hr([e[u][v-1],t[u][v-1]],[e[u][v-3],t[u][v-3]],[e[u][v-4],t[u][v-4]]),e[u][v-2]=m[0],t[u][v-2]=m[1]}if(a)for(l=0;l<v;l++){for(u=3;u<_-3;u+=3)p=OR([e[u-3][l],t[u-3][l]],[e[u][l],t[u][l]],[e[u+3][l],t[u+3][l]],a),e[u-1][l]=p[0][0],t[u-1][l]=p[0][1],e[u+1][l]=p[1][0],t[u+1][l]=p[1][1];m=Hr([e[0][l],t[0][l]],[e[2][l],t[2][l]],[e[3][l],t[3][l]]),e[1][l]=m[0],t[1][l]=m[1],m=Hr([e[_-1][l],t[_-1][l]],[e[_-3][l],t[_-3][l]],[e[_-4][l],t[_-4][l]]),e[_-2][l]=m[0],t[_-2][l]=m[1]}if(i&&a)for(u=1;u<_;u+=(u+1)%3===0?2:1){for(l=3;l<v-3;l+=3)p=OR([e[u][l-3],t[u][l-3]],[e[u][l],t[u][l]],[e[u][l+3],t[u][l+3]],i),e[u][l-1]=.5*(e[u][l-1]+p[0][0]),t[u][l-1]=.5*(t[u][l-1]+p[0][1]),e[u][l+1]=.5*(e[u][l+1]+p[1][0]),t[u][l+1]=.5*(t[u][l+1]+p[1][1]);m=Hr([e[u][0],t[u][0]],[e[u][2],t[u][2]],[e[u][3],t[u][3]]),e[u][1]=.5*(e[u][1]+m[0]),t[u][1]=.5*(t[u][1]+m[1]),m=Hr([e[u][v-1],t[u][v-1]],[e[u][v-3],t[u][v-3]],[e[u][v-4],t[u][v-4]]),e[u][v-2]=.5*(e[u][v-2]+m[0]),t[u][v-2]=.5*(t[u][v-2]+m[1])}return[e,t]},DR={RELATIVE_CULL_TOLERANCE:1e-6},NR=function(e,t,n){return t&&n?function(t,n,r,i,a){t||(t=[]);var o,s,l,u,c,d;n*=3,r*=3;var f=i*i,h=1-i,p=h*h,m=h*i*2,g=-3*p,y=3*(p-m),v=3*(m-f),_=3*f,b=a*a,x=b*a,w=1-a,k=w*w,T=k*w;for(d=0;d<e.length;d++)c=e[d],o=g*c[r][n]+y*c[r][n+1]+v*c[r][n+2]+_*c[r][n+3],s=g*c[r+1][n]+y*c[r+1][n+1]+v*c[r+1][n+2]+_*c[r+1][n+3],l=g*c[r+2][n]+y*c[r+2][n+1]+v*c[r+2][n+2]+_*c[r+2][n+3],u=g*c[r+3][n]+y*c[r+3][n+1]+v*c[r+3][n+2]+_*c[r+3][n+3],t[d]=T*o+3*(k*a*s+w*b*l)+x*u;return t}:t?function(t,n,r,i,a){t||(t=[]);var o,s,l,u;n*=3;var c=i*i,d=1-i,f=d*d,h=d*i*2,p=-3*f,m=3*(f-h),g=3*(h-c),y=3*c,v=1-a;for(l=0;l<e.length;l++)u=e[l],o=p*u[r][n]+m*u[r][n+1]+g*u[r][n+2]+y*u[r][n+3],s=p*u[r+1][n]+m*u[r+1][n+1]+g*u[r+1][n+2]+y*u[r+1][n+3],t[l]=v*o+a*s;return t}:n?function(t,n,r,i,a){t||(t=[]);var o,s,l,u,c,d;r*=3;var f=a*a,h=f*a,p=1-a,m=p*p,g=m*p;for(c=0;c<e.length;c++)d=e[c],o=d[r][n+1]-d[r][n],s=d[r+1][n+1]-d[r+1][n],l=d[r+2][n+1]-d[r+2][n],u=d[r+3][n+1]-d[r+3][n],t[c]=g*o+3*(m*a*s+p*f*l)+h*u;return t}:function(t,n,r,i,a){t||(t=[]);var o,s,l,u,c=1-a;for(l=0;l<e.length;l++)u=e[l],o=u[r][n+1]-u[r][n],s=u[r+1][n+1]-u[r+1][n],t[l]=c*o+a*s;return t}},FR=function(e,t,n){return t&&n?function(t,n,r,i,a){t||(t=[]);var o,s,l,u,c,d;n*=3,r*=3;var f=i*i,h=f*i,p=1-i,m=p*p,g=m*p,y=a*a,v=1-a,_=v*v,b=v*a*2,x=-3*_,w=3*(_-b),k=3*(b-y),T=3*y;for(d=0;d<e.length;d++)c=e[d],o=x*c[r][n]+w*c[r+1][n]+k*c[r+2][n]+T*c[r+3][n],s=x*c[r][n+1]+w*c[r+1][n+1]+k*c[r+2][n+1]+T*c[r+3][n+1],l=x*c[r][n+2]+w*c[r+1][n+2]+k*c[r+2][n+2]+T*c[r+3][n+2],u=x*c[r][n+3]+w*c[r+1][n+3]+k*c[r+2][n+3]+T*c[r+3][n+3],t[d]=g*o+3*(m*i*s+p*f*l)+h*u;return t}:t?function(t,n,r,i,a){t||(t=[]);var o,s,l,u,c,d;n*=3;var f=a*a,h=f*a,p=1-a,m=p*p,g=m*p;for(c=0;c<e.length;c++)d=e[c],o=d[r+1][n]-d[r][n],s=d[r+1][n+1]-d[r][n+1],l=d[r+1][n+2]-d[r][n+2],u=d[r+1][n+3]-d[r][n+3],t[c]=g*o+3*(m*a*s+p*f*l)+h*u;return t}:n?function(t,n,r,i,a){t||(t=[]);var o,s,l,u;r*=3;var c=1-i,d=a*a,f=1-a,h=f*f,p=f*a*2,m=-3*h,g=3*(h-p),y=3*(p-d),v=3*d;for(l=0;l<e.length;l++)u=e[l],o=m*u[r][n]+g*u[r+1][n]+y*u[r+2][n]+v*u[r+3][n],s=m*u[r][n+1]+g*u[r+1][n+1]+y*u[r+2][n+1]+v*u[r+3][n+1],t[l]=c*o+i*s;return t}:function(t,n,r,i,a){t||(t=[]);var o,s,l,u,c=1-i;for(l=0;l<e.length;l++)u=e[l],o=u[r+1][n]-u[r][n],s=u[r+1][n+1]-u[r][n+1],t[l]=c*o+i*s;return t}},jR=function(e,t,n,r,i){var a=t-2,o=n-2;return r&&i?function(t,n,r){t||(t=[]);var i,s,l,u,c,d,f=Math.max(0,Math.min(Math.floor(n),a)),h=Math.max(0,Math.min(Math.floor(r),o)),p=Math.max(0,Math.min(1,n-f)),m=Math.max(0,Math.min(1,r-h));f*=3,h*=3;var g=p*p,y=g*p,v=1-p,_=v*v,b=_*v,x=m*m,w=x*m,k=1-m,T=k*k,M=T*k;for(d=0;d<e.length;d++)c=e[d],i=b*c[h][f]+3*(_*p*c[h][f+1]+v*g*c[h][f+2])+y*c[h][f+3],s=b*c[h+1][f]+3*(_*p*c[h+1][f+1]+v*g*c[h+1][f+2])+y*c[h+1][f+3],l=b*c[h+2][f]+3*(_*p*c[h+2][f+1]+v*g*c[h+2][f+2])+y*c[h+2][f+3],u=b*c[h+3][f]+3*(_*p*c[h+3][f+1]+v*g*c[h+3][f+2])+y*c[h+3][f+3],t[d]=M*i+3*(T*m*s+k*x*l)+w*u;return t}:r?function(t,n,r){t||(t=[]);var i,s,l,u,c,d,f=Math.max(0,Math.min(Math.floor(n),a)),h=Math.max(0,Math.min(Math.floor(r),o)),p=Math.max(0,Math.min(1,n-f)),m=Math.max(0,Math.min(1,r-h));f*=3;var g=p*p,y=g*p,v=1-p,_=v*v,b=_*v,x=1-m;for(c=0;c<e.length;c++)d=e[c],i=x*d[h][f]+m*d[h+1][f],s=x*d[h][f+1]+m*d[h+1][f+1],l=x*d[h][f+2]+m*d[h+1][f+1],u=x*d[h][f+3]+m*d[h+1][f+1],t[c]=b*i+3*(_*p*s+v*g*l)+y*u;return t}:i?function(t,n,r){t||(t=[]);var i,s,l,u,c,d,f=Math.max(0,Math.min(Math.floor(n),a)),h=Math.max(0,Math.min(Math.floor(r),o)),p=Math.max(0,Math.min(1,n-f)),m=Math.max(0,Math.min(1,r-h));h*=3;var g=m*m,y=g*m,v=1-m,_=v*v,b=_*v,x=1-p;for(c=0;c<e.length;c++)d=e[c],i=x*d[h][f]+p*d[h][f+1],s=x*d[h+1][f]+p*d[h+1][f+1],l=x*d[h+2][f]+p*d[h+2][f+1],u=x*d[h+3][f]+p*d[h+3][f+1],t[c]=b*i+3*(_*m*s+v*g*l)+y*u;return t}:function(t,n,r){t||(t=[]);var i,s,l,u,c=Math.max(0,Math.min(Math.floor(n),a)),d=Math.max(0,Math.min(Math.floor(r),o)),f=Math.max(0,Math.min(1,n-c)),h=Math.max(0,Math.min(1,r-d)),p=1-h,m=1-f;for(l=0;l<e.length;l++)u=e[l],i=m*u[d][c]+f*u[d][c+1],s=m*u[d+1][c]+f*u[d+1][c+1],t[l]=p*i+h*s;return t}},BR=rE.findBin,UR=function(e){var t=e.a,n=e.b,r=e.a.length,i=e.b.length,a=e.aaxis,o=e.baxis,s=t[0],l=t[r-1],u=n[0],c=n[i-1],d=t[t.length-1]-t[0],f=n[n.length-1]-n[0],h=d*DR.RELATIVE_CULL_TOLERANCE,p=f*DR.RELATIVE_CULL_TOLERANCE;s-=h,l+=h,u-=p,c+=p,e.isVisible=function(e,t){return e>s&&e<l&&t>u&&t<c},e.isOccluded=function(e,t){return e<s||e>l||t<u||t>c},a.c2p=function(e){return e},o.c2p=function(e){return e},e.setScale=function(){var t=e._x,n=e._y,s=RR(e.xctrl,e.yctrl,t,n,a.smoothing,o.smoothing);e.xctrl=s[0],e.yctrl=s[1],e.evalxy=jR([e.xctrl,e.yctrl],r,i,a.smoothing,o.smoothing),e.dxydi=NR([e.xctrl,e.yctrl],a.smoothing,o.smoothing),e.dxydj=FR([e.xctrl,e.yctrl],a.smoothing,o.smoothing)},e.i2a=function(e){var n=Math.max(0,Math.floor(e[0]),r-2),i=e[0]-n;return(1-i)*t[n]+i*t[n+1]},e.j2b=function(e){var t=Math.max(0,Math.floor(e[1]),r-2),i=e[1]-t;return(1-i)*n[t]+i*n[t+1]},e.ij2ab=function(t){return[e.i2a(t[0]),e.j2b(t[1])]},e.a2i=function(e){var n=Math.max(0,Math.min(BR(e,t),r-2)),i=t[n],a=t[n+1];return Math.max(0,Math.min(r-1,n+(e-i)/(a-i)))},e.b2j=function(e){var t=Math.max(0,Math.min(BR(e,n),i-2)),r=n[t],a=n[t+1];return Math.max(0,Math.min(i-1,t+(e-r)/(a-r)))},e.ab2ij=function(t){return[e.a2i(t[0]),e.b2j(t[1])]},e.i2c=function(t,n){return e.evalxy([],t,n)},e.ab2xy=function(a,o,s){if(!s&&(a<t[0]||a>t[r-1]|o<n[0]||o>n[i-1]))return[!1,!1];var l=e.a2i(a),u=e.b2j(o),c=e.evalxy([],l,u);if(s){var d,f,h,p,m=0,g=0,y=[];a<t[0]?(d=0,f=0,m=(a-t[0])/(t[1]-t[0])):a>t[r-1]?(d=r-2,f=1,m=(a-t[r-1])/(t[r-1]-t[r-2])):(d=Math.max(0,Math.min(r-2,Math.floor(l))),f=l-d),o<n[0]?(h=0,p=0,g=(o-n[0])/(n[1]-n[0])):o>n[i-1]?(h=i-2,p=1,g=(o-n[i-1])/(n[i-1]-n[i-2])):(h=Math.max(0,Math.min(i-2,Math.floor(u))),p=u-h),m&&(e.dxydi(y,d,h,f,p),c[0]+=y[0]*m,c[1]+=y[1]*m),g&&(e.dxydj(y,d,h,f,p),c[0]+=y[0]*g,c[1]+=y[1]*g)}return c},e.c2p=function(e,t,n){return[t.c2p(e[0]),n.c2p(e[1])]},e.p2x=function(e,t,n){return[t.p2c(e[0]),n.p2c(e[1])]},e.dadi=function(e){var n=Math.max(0,Math.min(t.length-2,e));return t[n+1]-t[n]},e.dbdj=function(e){var t=Math.max(0,Math.min(n.length-2,e));return n[t+1]-n[t]},e.dxyda=function(t,n,r,i){var a=e.dxydi(null,t,n,r,i),o=e.dadi(t,r);return[a[0]/o,a[1]/o]},e.dxydb=function(t,n,r,i){var a=e.dxydj(null,t,n,r,i),o=e.dbdj(n,i);return[a[0]/o,a[1]/o]},e.dxyda_rough=function(t,n,r){var i=d*(r||.1),a=e.ab2xy(t+i,n,!0),o=e.ab2xy(t-i,n,!0);return[.5*(a[0]-o[0])/i,.5*(a[1]-o[1])/i]},e.dxydb_rough=function(t,n,r){var i=f*(r||.1),a=e.ab2xy(t,n+i,!0),o=e.ab2xy(t,n-i,!0);return[.5*(a[0]-o[0])/i,.5*(a[1]-o[1])/i]},e.dpdx=function(e){return e._m},e.dpdy=function(e){return e._m}},VR=uE.isArrayOrTypedArray,HR=function(e){return VR(e[0])},WR=AC.BADNUM,qR=function(e,t,n,r,i,a){r=r||"x",i=i||"y",a=a||["z"];var o,s,l,u,c,d=e[r].slice(),f=e[i].slice(),h=e.text,p=Math.min(d.length,f.length),m=void 0!==h&&!Array.isArray(h[0]),g=e[r+"calendar"],y=e[i+"calendar"];for(o=0;o<a.length;o++)(l=e[a[o]])&&(p=Math.min(p,l.length));for(p<d.length&&(d=d.slice(0,p)),p<f.length&&(f=f.slice(0,p)),o=0;o<p;o++)d[o]=t.d2c(d[o],0,g),f[o]=n.d2c(f[o],0,y);var v=uE.distinctVals(d),_=v.vals,b=uE.distinctVals(f),x=b.vals,w=[];for(o=0;o<a.length;o++)w[o]=uE.init2dArray(x.length,_.length);var k,T,M;for(m&&(M=uE.init2dArray(x.length,_.length)),o=0;o<p;o++)if(d[o]!==WR&&f[o]!==WR){for(k=uE.findBin(d[o]+v.minDiff/2,_),T=uE.findBin(f[o]+b.minDiff/2,x),s=0;s<a.length;s++)c=a[s],l=e[c],u=w[s],u[T][k]=l[o];m&&(M[T][k]=h[o])}for(e["_input_"+r]=e[r],e["_input_"+i]=e[i],e[r]=_,e[i]=x,s=0;s<a.length;s++)e["_input_"+a[s]]=e[a[s]],e[a[s]]=w[s];m&&(e.text=M)},GR=function(e,t,n){var r=[],i=n("x");i&&!HR(i)&&r.push("x"),t._cheater=!i;var a=n("y");if(a&&!HR(a)&&r.push("y"),i||a)return r.length&&qR(t,t.aaxis,t.baxis,"a","b",r),!0},YR=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,mR,n,r)}t._clipPathId="clip"+t.uid+"carpet";var a=i("color",eS.defaultLine);if(uE.coerceFont(i,"font"),i("carpet"),LR(e,t,r,i,a),!t.a||!t.b)return void(t.visible=!1);t.a.length<3&&(t.aaxis.smoothing=0),t.b.length<3&&(t.baxis.smoothing=0);var o=GR(0,t,i);UR(t),t._cheater&&i("cheaterslope"),o||(t.visible=!1)},XR=function(e,t,n){if(0===e.length)return"";var r,i=[],a=n?3:1;for(r=0;r<e.length;r+=a)i.push(e[r]+","+t[r]),n&&r<e.length-a&&(i.push("C"),i.push([e[r+1]+","+t[r+1],e[r+2]+","+t[r+2]+" "].join(" ")));return i.join(n?"":"L")},ZR=uE.isArrayOrTypedArray,JR=function(e,t,n){var r;for(ZR(e)?e.length>t.length&&(e=e.slice(0,t.length)):e=[],r=0;r<t.length;r++)e[r]=n(t[r]);return e},KR=function(e,t,n,r,i,a){var o=i[0]*e.dpdx(t),s=i[1]*e.dpdy(n),l=1,u=1;if(a){var c=Math.sqrt(i[0]*i[0]+i[1]*i[1]),d=Math.sqrt(a[0]*a[0]+a[1]*a[1]),f=(i[0]*a[0]+i[1]*a[1])/c/d;u=Math.max(0,f)}var h=180*Math.atan2(s,o)/Math.PI;return h<-90?(h+=180,l=-l):h>90&&(h-=180,l=-l),{angle:h,flip:l,p:e.c2p(r,t,n),offsetMultplier:u}},QR=function(e,t,n){for(var r=0;r<n.length;r++)qr(e,t,n[r])},$R=iP.LINE_SPACING,eD=(1-iP.MID_SHIFT)/$R+1,tD={};tD.attributes=mR,tD.supplyDefaults=YR,tD.plot=QR,tD.calc=ER,tD.animatable=!0,tD.moduleType="trace",tD.name="carpet",tD.basePlotModule=xL,tD.categories=["cartesian","carpet","carpetAxis","notLegendIsolatable"],tD.meta={};var nD=tD,rD=nD,iD={exports:{}};!function(e,t){"object"===typeof iD.exports?t(iD.exports):"function"===typeof MC&&MC.amd?MC(["exports"],t):t(e.topojson=e.topojson||{})}(this,function(e){"use strict";function t(e,t){var r=t.id,i=t.bbox,a=null==t.properties?{}:t.properties,o=n(e,t);return null==r&&null==i?{type:"Feature",properties:a,geometry:o}:null==i?{type:"Feature",id:r,properties:a,geometry:o}:{type:"Feature",id:r,bbox:i,properties:a,geometry:o}}function n(e,t){function n(e,t){t.length&&t.pop();for(var n=d[e<0?~e:e],r=0,i=n.length;r<i;++r)t.push(u(n[r].slice(),r));e<0&&c(t,i)}function r(e){return u(e.slice())}function i(e){for(var t=[],r=0,i=e.length;r<i;++r)n(e[r],t);return t.length<2&&t.push(t[0].slice()),t}function a(e){for(var t=i(e);t.length<4;)t.push(t[0].slice());return t}function o(e){return e.map(a)}function s(e){var t,n=e.type;switch(n){case"GeometryCollection":return{type:n,geometries:e.geometries.map(s)};case"Point":t=r(e.coordinates);break;case"MultiPoint":t=e.coordinates.map(r);break;case"LineString":t=i(e.arcs);break;case"MultiLineString":t=e.arcs.map(i);break;case"Polygon":t=o(e.arcs);break;case"MultiPolygon":t=e.arcs.map(o);break;default:return null}return{type:n,coordinates:t}}var u=l(e),d=e.arcs;return s(t)}function r(e,t,n){var r,a,o;if(arguments.length>1)r=i(e,t,n);else for(a=0,r=new Array(o=e.arcs.length);a<o;++a)r[a]=a;return{type:"MultiLineString",arcs:f(e,r)}}function i(e,t,n){function r(e){var t=e<0?~e:e;(c[t]||(c[t]=[])).push({i:e,g:l})}function i(e){e.forEach(r)}function a(e){e.forEach(i)}function o(e){e.forEach(a)}function s(e){switch(l=e,e.type){case"GeometryCollection":e.geometries.forEach(s);break;case"LineString":i(e.arcs);break;case"MultiLineString":case"Polygon":a(e.arcs);break;case"MultiPolygon":o(e.arcs)}}var l,u=[],c=[];return s(t),c.forEach(null==n?function(e){u.push(e[0].i)}:function(e){n(e[0].g,e[e.length-1].g)&&u.push(e[0].i)}),u}function a(e){for(var t,n=-1,r=e.length,i=e[r-1],a=0;++n<r;)t=i,i=e[n],a+=t[0]*i[1]-t[1]*i[0];return Math.abs(a)}function o(e,t){function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Polygon":i(e.arcs);break;case"MultiPolygon":e.arcs.forEach(i)}}function i(e){e.forEach(function(t){t.forEach(function(t){(s[t=t<0?~t:t]||(s[t]=[])).push(e)})}),l.push(e)}function o(t){return a(n(e,{type:"Polygon",arcs:[t]}).coordinates[0])}var s={},l=[],u=[];return t.forEach(r),l.forEach(function(e){if(!e._){var t=[],n=[e];for(e._=1,u.push(t);e=n.pop();)t.push(e),e.forEach(function(e){e.forEach(function(e){s[e<0?~e:e].forEach(function(e){e._||(e._=1,n.push(e))})})})}}),l.forEach(function(e){delete e._}),{type:"MultiPolygon",arcs:u.map(function(t){var n,r=[];if(t.forEach(function(e){e.forEach(function(e){e.forEach(function(e){s[e<0?~e:e].length<2&&r.push(e)})})}),r=f(e,r),(n=r.length)>1)for(var i,a,l=1,u=o(r[0]);l<n;++l)(i=o(r[l]))>u&&(a=r[0],r[0]=r[l],r[l]=a,u=i);return r})}}var s=function(e){return e},l=function(e){if(null==(t=e.transform))return s;var t,n,r,i=t.scale[0],a=t.scale[1],o=t.translate[0],l=t.translate[1];return function(e,t){return t||(n=r=0),e[0]=(n+=e[0])*i+o,e[1]=(r+=e[1])*a+l,e}},u=function(e){function t(e){s[0]=e[0],s[1]=e[1],o(s),s[0]<u&&(u=s[0]),s[0]>d&&(d=s[0]),s[1]<c&&(c=s[1]),s[1]>f&&(f=s[1])}function n(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(n);break;case"Point":t(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(t)}}var r=e.bbox;if(!r){var i,a,o=l(e),s=new Array(2),u=1/0,c=u,d=-u,f=-u;e.arcs.forEach(function(e){for(var t=-1,n=e.length;++t<n;)i=e[t],s[0]=i[0],s[1]=i[1],o(s,t),s[0]<u&&(u=s[0]),s[0]>d&&(d=s[0]),s[1]<c&&(c=s[1]),s[1]>f&&(f=s[1])});for(a in e.objects)n(e.objects[a]);r=e.bbox=[u,c,d,f]}return r},c=function(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n},d=function(e,n){return"GeometryCollection"===n.type?{type:"FeatureCollection",features:n.geometries.map(function(n){return t(e,n)})}:t(e,n)},f=function(e,t){function n(t){var n,r=e.arcs[t<0?~t:t],i=r[0];return e.transform?(n=[0,0],r.forEach(function(e){n[0]+=e[0],n[1]+=e[1]})):n=r[r.length-1],t<0?[n,i]:[i,n]}function r(e,t){for(var n in e){var r=e[n];delete t[r.start],delete r.start,delete r.end,r.forEach(function(e){i[e<0?~e:e]=1}),s.push(r)}}var i={},a={},o={},s=[],l=-1;return t.forEach(function(n,r){var i,a=e.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=t[++l],t[l]=n,t[r]=i)}),t.forEach(function(e){var t,r,i=n(e),s=i[0],l=i[1];if(t=o[s])if(delete o[t.end],t.push(e),t.end=l,r=a[l]){delete a[r.start];var u=r===t?t:t.concat(r);a[u.start=t.start]=o[u.end=r.end]=u}else a[t.start]=o[t.end]=t;else if(t=a[l])if(delete a[t.start],t.unshift(e),t.start=s,r=o[s]){delete o[r.end];var c=r===t?t:r.concat(t);a[c.start=r.start]=o[c.end=t.end]=c}else a[t.start]=o[t.end]=t;else t=[e],a[t.start=s]=o[t.end=l]=t}),r(o,a),r(a,o),t.forEach(function(e){i[e<0?~e:e]||s.push([e])}),s},h=function(e){return n(e,r.apply(this,arguments))},p=function(e){return n(e,o.apply(this,arguments))},m=function(e,t){for(var n=0,r=e.length;n<r;){var i=n+r>>>1;e[i]<t?n=i+1:r=i}return n},g=function(e){function t(e,t){e.forEach(function(e){e<0&&(e=~e);var n=i[e];n?n.push(t):i[e]=[t]})}function n(e,n){e.forEach(function(e){t(e,n)})}function r(e,t){"GeometryCollection"===e.type?e.geometries.forEach(function(e){r(e,t)}):e.type in o&&o[e.type](e.arcs,t)}var i={},a=e.map(function(){return[]}),o={LineString:t,MultiLineString:n,Polygon:n,MultiPolygon:function(e,t){e.forEach(function(e){n(e,t)})}};e.forEach(r);for(var s in i)for(var l=i[s],u=l.length,c=0;c<u;++c)for(var d=c+1;d<u;++d){var f,h=l[c],p=l[d];(f=a[h])[s=m(f,p)]!==p&&f.splice(s,0,p),(f=a[p])[s=m(f,h)]!==h&&f.splice(s,0,h)}return a},y=function(e,t){function n(e){e[0]=Math.round((e[0]-o)/s),e[1]=Math.round((e[1]-l)/c)}function r(e){switch(e.type){case"GeometryCollection":e.geometries.forEach(r);break;case"Point":n(e.coordinates);break;case"MultiPoint":e.coordinates.forEach(n)}}if(!((t=Math.floor(t))>=2))throw new Error("n must be \u22652");if(e.transform)throw new Error("already quantized");var i,a=u(e),o=a[0],s=(a[2]-o)/(t-1)||1,l=a[1],c=(a[3]-l)/(t-1)||1;e.arcs.forEach(function(e){for(var t,n,r,i=1,a=1,u=e.length,d=e[0],f=d[0]=Math.round((d[0]-o)/s),h=d[1]=Math.round((d[1]-l)/c);i<u;++i)d=e[i],n=Math.round((d[0]-o)/s),r=Math.round((d[1]-l)/c),n===f&&r===h||(t=e[a++],t[0]=n-f,f=n,t[1]=r-h,h=r);a<2&&(t=e[a++],t[0]=0,t[1]=0),e.length=a});for(i in e.objects)r(e.objects[i]);return e.transform={scale:[s,c],translate:[o,l]},e},v=function(e){if(null==(t=e.transform))return s;var t,n,r,i=t.scale[0],a=t.scale[1],o=t.translate[0],l=t.translate[1];return function(e,t){t||(n=r=0);var s=Math.round((e[0]-o)/i),u=Math.round((e[1]-l)/a);return e[0]=s-n,n=s,e[1]=u-r,r=u,e}};e.bbox=u,e.feature=d,e.mesh=h,e.meshArcs=r,e.merge=p,e.mergeArcs=o,e.neighbors=g,e.quantize=y,e.transform=l,e.untransform=v,Object.defineProperty(e,"__esModule",{value:!0})}),iD=iD.exports;var aD={};aD.projNames={equirectangular:"equirectangular",mercator:"mercator",orthographic:"orthographic","natural earth":"naturalEarth",kavrayskiy7:"kavrayskiy7",miller:"miller",robinson:"robinson",eckert4:"eckert4","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant","conic equal area":"conicEqualArea","conic conformal":"conicConformal","conic equidistant":"conicEquidistant",gnomonic:"gnomonic",stereographic:"stereographic",mollweide:"mollweide",hammer:"hammer","transverse mercator":"transverseMercator","albers usa":"albersUsa","winkel tripel":"winkel3",aitoff:"aitoff",sinusoidal:"sinusoidal"},aD.axesNames=["lonaxis","lataxis"],aD.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},aD.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},aD.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},aD.clipPad=.001,aD.precision=.1,aD.landColor="#F0DC82",aD.waterColor="#3399FF",aD.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},aD.sphereSVG={type:"Sphere"},aD.fillLayers={ocean:1,land:1,lakes:1},aD.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},aD.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],aD.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],aD.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"};var oD={},sD=oD={},lD=aD.locationmodeToLayer,uD=iD.feature;sD.getTopojsonName=function(e){return[e.scope.replace(/ /g,"-"),"_",e.resolution.toString(),"m"].join("")},sD.getTopojsonPath=function(e,t){return e+t+".json"},sD.getTopojsonFeatures=function(e,t){var n=lD[e.locationmode],r=t.objects[n];return uD(t,r).features};var cD,dD=Kr,fD=Qr,hD={toPolygon:function(e,t){function n(t){function n(t){var n=t.slice(0,t.length-1);return e.segments({inverted:!1,regions:[n]})}if(t.length<=0)return e.segments({inverted:!1,regions:[]});for(var r=n(t[0]),i=1;i<t.length;i++)r=e.selectDifference(e.combine(r,n(t[i])));return r}if("Polygon"===t.type)return e.polygon(n(t.coordinates));if("MultiPolygon"===t.type){for(var r=e.segments({inverted:!1,regions:[]}),i=0;i<t.coordinates.length;i++)r=e.selectUnion(e.combine(r,n(t.coordinates[i])));return e.polygon(r)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(e,t,n){function r(e,n){return t.pointInsideRegion([.5*(e[0][0]+e[1][0]),.5*(e[0][1]+e[1][1])],n)}function i(e){return{region:e,children:[]}}function a(e,t){for(var n=0;n<e.children.length;n++){var o=e.children[n];if(r(t,o.region))return void a(o,t)}for(var s=i(t),n=0;n<e.children.length;n++){var o=e.children[n];r(o.region,t)&&(s.children.push(o),e.children.splice(n,1),n--)}e.children.push(s)}function o(e,t){for(var n=0,r=e[e.length-1][0],i=e[e.length-1][1],a=[],o=0;o<e.length;o++){var s=e[o][0],l=e[o][1];a.push([s,l]),n+=l*r-s*i,r=s,i=l}return n<0!==t&&a.reverse(),a.push([a[0][0],a[0][1]]),a}function s(e){var t=[o(e.region,!1)];f.push(t);for(var n=0;n<e.children.length;n++)t.push(l(e.children[n]))}function l(e){for(var t=0;t<e.children.length;t++)s(e.children[t]);return o(e.region,!0)}n=e.polygon(e.segments(n));for(var u=i(null),c=0;c<n.regions.length;c++){var d=n.regions[c];d.length<3||a(u,d)}for(var f=[],c=0;c<u.children.length;c++)s(u.children[c]);return f.length<=0?{type:"Polygon",coordinates:[]}:1==f.length?{type:"Polygon",coordinates:f[0]}:{type:"MultiPolygon",coordinates:f}}},pD=hD,mD={create:function(){var e={root:{root:!0,next:null},exists:function(t){return null!==t&&t!==e.root},isEmpty:function(){return null===e.root.next},getHead:function(){return e.root.next},insertBefore:function(t,n){for(var r=e.root,i=e.root.next;null!==i;){if(n(i))return t.prev=i.prev,t.next=i,i.prev.next=t,void(i.prev=t);r=i,i=i.next}r.next=t,t.prev=r,t.next=null},findTransition:function(t){for(var n=e.root,r=e.root.next;null!==r&&!t(r);)n=r,r=r.next;return{before:n===e.root?null:n,after:r,insert:function(e){return e.prev=n,e.next=r,n.next=e,null!==r&&(r.prev=e),e}}}};return e},node:function(e){return e.prev=null,e.next=null,e.remove=function(){e.prev.next=e.next,e.next&&(e.next.prev=e.prev),e.prev=null,e.next=null},e}},gD=mD,yD=$r,vD=ei,_D={union:function(e,t){return ti(e,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],t)},intersect:function(e,t){return ti(e,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],t)},difference:function(e,t){return ti(e,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],t)},differenceRev:function(e,t){return ti(e,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],t)},xor:function(e,t){return ti(e,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],t)}},bD=_D,xD=!1,wD=fD();cD={buildLog:function(e){return!0===e?xD=dD():!1===e&&(xD=!1),!1!==xD&&xD.list},epsilon:function(e){return wD.epsilon(e)},segments:function(e){var t=yD(!0,wD,xD);return e.regions.forEach(t.addRegion),{segments:t.calculate(e.inverted),inverted:e.inverted}},combine:function(e,t){return{combined:yD(!1,wD,xD).calculate(e.segments,e.inverted,t.segments,t.inverted),inverted1:e.inverted,inverted2:t.inverted}},selectUnion:function(e){return{segments:bD.union(e.combined,xD),inverted:e.inverted1||e.inverted2}},selectIntersect:function(e){return{segments:bD.intersect(e.combined,xD),inverted:e.inverted1&&e.inverted2}},selectDifference:function(e){return{segments:bD.difference(e.combined,xD),inverted:e.inverted1&&!e.inverted2}},selectDifferenceRev:function(e){return{segments:bD.differenceRev(e.combined,xD),inverted:!e.inverted1&&e.inverted2}},selectXor:function(e){return{segments:bD.xor(e.combined,xD),inverted:e.inverted1!==e.inverted2}},polygon:function(e){return{regions:vD(e.segments,wD,xD),inverted:e.inverted}},polygonFromGeoJSON:function(e){return pD.toPolygon(cD,e)},polygonToGeoJSON:function(e){return pD.fromPolygon(cD,wD,e)},union:function(e,t){return ni(e,t,cD.selectUnion)},intersect:function(e,t){return ni(e,t,cD.selectIntersect)},difference:function(e,t){return ni(e,t,cD.selectDifference)},differenceRev:function(e,t){return ni(e,t,cD.selectDifferenceRev)},xor:function(e,t){return ni(e,t,cD.selectXor)}},"object"===typeof window&&(window.PolyBool=cD);var kD=cD,TD={},MD=ZS.dot,AD=AC.BADNUM,CD=TD={};CD.tester=function(e){function t(e,t){var n=e[0],r=e[1];return!(n===AD||n<a||n>o||r===AD||r<s||r>l)&&(!t||!u(e))}function n(e,t){var n=e[0],r=e[1];if(n===AD||n<a||n>o||r===AD||r<s||r>l)return!1;var u,c,d,f,h,p=i.length,m=i[0][0],g=i[0][1],y=0;for(u=1;u<p;u++)if(c=m,d=g,m=i[u][0],g=i[u][1],f=Math.min(c,m),!(n<f||n>Math.max(c,m)||r>Math.max(d,g)))if(r<Math.min(d,g))n!==f&&y++;else{if(h=m===c?r:d+(n-c)*(g-d)/(m-c),r===h)return 1!==u||!t;r<=h&&n!==f&&y++}return y%2===1}if(Array.isArray(e[0][0]))return CD.multitester(e);var r,i=e.slice(),a=i[0][0],o=a,s=i[0][1],l=s;for(i.push(i[0]),r=1;r<i.length;r++)a=Math.min(a,i[r][0]),o=Math.max(o,i[r][0]),s=Math.min(s,i[r][1]),l=Math.max(l,i[r][1]);var u,c=!1;5===i.length&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(c=!0,u=function(e){return e[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(c=!0,u=function(e){return e[1]===i[0][1]}));var d=!0,f=i[0];for(r=1;r<i.length;r++)if(f[0]!==i[r][0]||f[1]!==i[r][1]){d=!1;break}return{xmin:a,xmax:o,ymin:s,ymax:l,pts:i,contains:c?t:n,isRect:c,degenerate:d}},CD.multitester=function(e){function t(e,t){for(var r=!1,i=0;i<n.length;i++)n[i].contains(e,t)&&(r=!1===n[i].subtract);return r}for(var n=[],r=e[0][0][0],i=r,a=e[0][0][1],o=a,s=0;s<e.length;s++){var l=CD.tester(e[s]);l.subtract=e[s].subtract,n.push(l),r=Math.min(r,l.xmin),i=Math.max(i,l.xmax),a=Math.min(a,l.ymin),o=Math.max(o,l.ymax)}return{xmin:r,xmax:i,ymin:a,ymax:o,pts:[],contains:t,isRect:!1,degenerate:!1}};var SD=CD.isSegmentBent=function(e,t,n,r){var i,a,o,s=e[t],l=[e[n][0]-s[0],e[n][1]-s[1]],u=MD(l,l),c=Math.sqrt(u),d=[-l[1]/c,l[0]/c];for(i=t+1;i<n;i++)if(a=[e[i][0]-s[0],e[i][1]-s[1]],(o=MD(a,l))<0||o>u||Math.abs(MD(a,d))>r)return!0;return!1};CD.filter=function(e,t){function n(n){e.push(n);var o=r.length,s=i;r.splice(a+1);for(var l=s+1;l<e.length;l++)(l===e.length-1||SD(e,s,l+1,t))&&(r.push(e[l]),r.length<o-2&&(i=l,a=r.length-1),s=l)}var r=[e[0]],i=0,a=0;if(e.length>1){n(e.pop())}return{addPt:n,raw:e,filtered:r}};var ED=nO.makeEventData,PD=TD.filter,ID=TD.tester,LD=TD.multitester,OD=EE.MINSELECT,zD=function(e,t,n,r,i){function a(e){var t="y"===e._id.charAt(0)?1:0;return function(n){return e.p2d(n[t])}}function o(e,t){return e-t}var s,l,u,c,d=r.gd,f=d._fullLayout,h=f._zoomlayer,p=r.element.getBoundingClientRect(),m=r.plotinfo,g=m.xaxis._offset,y=m.yaxis._offset,v=t-p.left,_=n-p.top,b=v,x=_,w="M"+v+","+_,k=r.xaxes[0]._length,T=r.yaxes[0]._length,M=r.xaxes.map(ri),A=r.yaxes.map(ri),C=r.xaxes.concat(r.yaxes),S=e.altKey;(e.shiftKey||e.altKey)&&m.selection&&m.selection.polygons&&!r.polygons?(r.polygons=m.selection.polygons,r.mergedPolygons=m.selection.mergedPolygons):(!e.shiftKey&&!e.altKey||(e.shiftKey||e.altKey)&&!m.selection)&&(m.selection={},m.selection.polygons=r.polygons=[],m.selection.mergedPolygons=r.mergedPolygons=[]),"lasso"===i&&(s=PD([[v,_]],EE.BENDPX));var E=h.selectAll("path.select-outline-"+m.id).data([1,2]);E.enter().append("path").attr("class",function(e){return"select-outline select-outline-"+e+" select-outline-"+m.id}).attr("transform","translate("+g+", "+y+")").attr("d",w+"Z");var P,I,L,O,z,R=h.append("path").attr("class","zoombox-corners").style({fill:jE.background,stroke:jE.defaultLine,"stroke-width":1}).attr("transform","translate("+g+", "+y+")").attr("d","M0,0Z"),D=[],N=f._uid+EE.SELECTID,F=[];for(P=0;P<d.calcdata.length;P++)if(I=d.calcdata[P],L=I[0].trace,!0===L.visible&&L._module&&L._module.selectPoints)if(r.subplot)L.subplot!==r.subplot&&L.geo!==r.subplot||D.push({selectPoints:L._module.selectPoints,style:L._module.style,cd:I,xaxis:r.xaxes[0],yaxis:r.yaxes[0]});else{if(-1===M.indexOf(L.xaxis))continue;if(-1===A.indexOf(L.yaxis))continue;D.push({selectPoints:L._module.selectPoints,style:L._module.style,cd:I,xaxis:PI.getFromId(d,L.xaxis),yaxis:PI.getFromId(d,L.yaxis)})}var j;j=m.fillRangeItems?m.fillRangeItems:"select"===i?function(e,t){var n=e.range={};for(P=0;P<C.length;P++){var r=C[P],i=r._id.charAt(0);n[r._id]=[r.p2d(t[i+"min"]),r.p2d(t[i+"max"])].sort(o)}}:function(e,t,n){var r=e.lassoPoints={};for(P=0;P<C.length;P++){var i=C[P];r[i._id]=n.filtered.map(a(i))}},r.moveFn=function(e,t){b=Math.max(0,Math.min(k,e+v)),x=Math.max(0,Math.min(T,t+_));var n=Math.abs(b-v),a=Math.abs(x-_);"select"===i?a<Math.min(.6*n,OD)?(c=[[v,0],[v,T],[b,T],[b,0]],c.xmin=Math.min(v,b),c.xmax=Math.max(v,b),c.ymin=Math.min(0,T),c.ymax=Math.max(0,T),R.attr("d","M"+c.xmin+","+(_-OD)+"h-4v"+2*OD+"h4ZM"+(c.xmax-1)+","+(_-OD)+"h4v"+2*OD+"h-4Z")):n<Math.min(.6*a,OD)?(c=[[0,_],[0,x],[k,x],[k,_]],c.xmin=Math.min(0,k),c.xmax=Math.max(0,k),c.ymin=Math.min(_,x),c.ymax=Math.max(_,x),R.attr("d","M"+(v-OD)+","+c.ymin+"v-4h"+2*OD+"v4ZM"+(v-OD)+","+(c.ymax-1)+"v4h"+2*OD+"v-4Z")):(c=[[v,_],[v,x],[b,x],[b,_]],c.xmin=Math.min(v,b),c.xmax=Math.max(v,b),c.ymin=Math.min(_,x),c.ymax=Math.max(_,x),R.attr("d","M0,0Z")):"lasso"===i&&(s.addPt([b,x]),c=s.filtered),r.polygons&&r.polygons.length?(u=ai(r.mergedPolygons,c,S),c.subtract=S,l=LD(r.polygons.concat([c]))):(u=[c],l=ID(c));var o=[];for(P=0;P<u.length;P++){var f=u[P];o.push(f.join("L")+"L"+f[0])}E.attr("d","M"+o.join("M")+"Z"),oE.throttle(N,EE.SELECTDELAY,function(){F=[];var e,t,n=[];for(P=0;P<D.length;P++)if(O=D[P],t=O.selectPoints(O,l),n.push(t),e=oi(t,O),F.length)for(var i=0;i<e.length;i++)F.push(e[i]);else F=e;z={points:F},ii(d,D,z),j(z,c,s),r.gd.emit("plotly_selecting",z)})},r.clickFn=function(e,t){R.remove(),oE.done(N).then(function(){if(oE.clear(N),2===e){for(E.remove(),P=0;P<D.length;P++)O=D[P],O.selectPoints(O,!1);ii(d,D),d.emit("plotly_deselect",null)}else d.emit("plotly_selected",void 0);kO.click(d,t)})},r.doneFn=function(){R.remove(),oE.done(N).then(function(){oE.clear(N),r.gd.emit("plotly_selected",z),c&&r.polygons&&(c.subtract=S,r.polygons.push(c),r.mergedPolygons.length=0,[].push.apply(r.mergedPolygons,u))})}},RD=si,DD=Math.PI/180,ND=180/Math.PI,FD={cursor:"pointer"},jD={cursor:"auto"},BD=li,UD=iD.feature;RD(CC);var VD=Ci.prototype,HD=function(e){return new Ci(e)};VD.plot=function(e,t,n){var r=this,i=t[this.id],a=oD.getTopojsonName(i);null===r.topojson||a!==r.topojsonName?(r.topojsonName=a,void 0===PlotlyGeoAssets.topojson[r.topojsonName]?n.push(r.fetchTopojson().then(function(n){PlotlyGeoAssets.topojson[r.topojsonName]=n,r.topojson=n,r.update(e,t)})):(r.topojson=PlotlyGeoAssets.topojson[r.topojsonName],r.update(e,t))):r.update(e,t)},VD.fetchTopojson=function(){var e=oD.getTopojsonPath(this.topojsonURL,this.topojsonName);return new Promise(function(t,n){CC.json(e,function(r,i){if(r)return n(404===r.status?new Error(["plotly.js could not find topojson file at",e,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",e].join(" ")));t(i)})})},VD.update=function(e,t){var n=t[this.id];if(!this.updateProjection(t,n)){this.hasChoropleth=!1;for(var r=0;r<e.length;r++)if("choropleth"===e[r][0].trace.type){this.hasChoropleth=!0;break}this.viewInitial||this.saveViewInitial(n),this.updateBaseLayers(t,n),this.updateDims(t,n),this.updateFx(t,n),lI.generalUpdatePerTraceModule(this.graphDiv,this,e,n);var i=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=i.selectAll(".point"),this.dataPoints.text=i.selectAll("text"),this.dataPaths.line=i.selectAll(".js-line");var a=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=a.selectAll("path"),this.render()}},VD.updateProjection=function(e,t){var n=e._size,r=t.domain,i=t.projection,a=i.rotation||{},o=t.center||{},s=this.projection=Si(t);s.center([o.lon-a.lon,o.lat-a.lat]).rotate([-a.lon,-a.lat,a.roll]).parallels(i.parallels);var l=[[n.l+n.w*r.x[0],n.t+n.h*(1-r.y[1])],[n.l+n.w*r.x[1],n.t+n.h*(1-r.y[0])]],u=t.lonaxis,c=t.lataxis,d=Pi(u.range,c.range);s.fitExtent(l,d);var f=this.bounds=s.getBounds(d),h=this.fitScale=s.scale(),p=s.translate();if(!isFinite(f[0][0])||!isFinite(f[0][1])||!isFinite(f[1][0])||!isFinite(f[1][1])||isNaN(p[0])||isNaN(p[0])){for(var m=this.graphDiv,g=["projection.rotation","center","lonaxis.range","lataxis.range"],y="Invalid geo settings, relayout'ing to default view.",v={},_=0;_<g.length;_++)v[this.id+"."+g[_]]=null;return this.viewInitial=null,uE.warn(y),m._promises.push(rS.call("relayout",m,v)),y}var b=this.midPt=[(f[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2];if(s.scale(i.scale*h).translate([p[0]+(b[0]-p[0]),p[1]+(b[1]-p[1])]).clipExtent(f),t._isAlbersUsa){var x=s([o.lon,o.lat]),w=s.translate();s.translate([w[0]-(x[0]-w[0]),w[1]-(x[1]-w[1])])}},VD.updateBaseLayers=function(e,t){function n(e){return"lonaxis"===e||"lataxis"===e}function r(e){return Boolean(aD.lineLayers[e])}function i(e){return Boolean(aD.fillLayers[e])}var a=this,o=a.topojson,s=a.layers,l=a.basePaths,u=this.hasChoropleth?aD.layersForChoropleth:aD.layers,c=u.filter(function(e){return r(e)||i(e)?t["show"+e]:!n(e)||t[e].showgrid}),d=a.framework.selectAll(".layer").data(c,String);d.exit().each(function(e){delete s[e],delete l[e],CC.select(this).remove()}),d.enter().append("g").attr("class",function(e){return"layer "+e}).each(function(e){var t=s[e]=CC.select(this);"bg"===e?a.bgRect=t.append("rect").style("pointer-events","all"):n(e)?l[e]=t.append("path").style("fill","none"):"backplot"===e?t.append("g").classed("choroplethlayer",!0):"frontplot"===e?t.append("g").classed("scatterlayer",!0):r(e)?l[e]=t.append("path").style("fill","none").style("stroke-miterlimit",2):i(e)&&(l[e]=t.append("path").style("stroke","none"))}),d.order(),d.each(function(e){var a=l[e],s=aD.layerNameToAdjective[e];"frame"===e?a.datum(aD.sphereSVG):r(e)||i(e)?a.datum(UD(o,o.objects[e])):n(e)&&a.datum(Ei(e,t)).call(jE.stroke,t[e].gridcolor).call(PP.dashLine,"",t[e].gridwidth),r(e)?a.call(jE.stroke,t[s+"color"]).call(PP.dashLine,"",t[s+"width"]):i(e)&&a.call(jE.fill,t[s+"color"])})},VD.updateDims=function(e,t){var n=this.bounds,r=(t.framewidth||0)/2,i=n[0][0]-r,a=n[0][1]-r,o=n[1][0]-i+r,s=n[1][1]-a+r;PP.setRect(this.clipRect,i,a,o,s),this.bgRect.call(PP.setRect,i,a,o,s).call(jE.fill,t.bgcolor),this.xaxis._offset=i,this.xaxis._length=o,this.yaxis._offset=a,this.yaxis._length=s},VD.updateFx=function(e,t){function n(){var e=i.viewInitial,t={};for(var n in e)t[i.id+"."+n]=e[n];rS.call("relayout",a,t),a.emit("plotly_doubleclick",null)}function r(e){return i.projection.invert([e[0]+i.xaxis._offset,e[1]+i.yaxis._offset])}var i=this,a=i.graphDiv,o=i.bgRect,s=e.dragmode;if(!i.isStatic){if("pan"===s)o.node().onmousedown=null,o.call(BD(i,t)),o.on("dblclick.zoom",n);else if("select"===s||"lasso"===s){o.on(".zoom",null);var l;"select"===s?l=function(e,t){(e.range={})[i.id]=[r([t.xmin,t.ymin]),r([t.xmax,t.ymax])]}:"lasso"===s&&(l=function(e,t,n){(e.lassoPoints={})[i.id]=n.filtered.map(r)});var u={element:i.bgRect.node(),gd:a,plotinfo:{xaxis:i.xaxis,yaxis:i.yaxis,fillRangeItems:l},xaxes:[i.xaxis],yaxes:[i.yaxis],subplot:i.id,clickFn:function(t){2===t&&e._zoomlayer.selectAll(".select-outline").remove()}};u.prepFn=function(e,t,n){zD(e,t,n,u,s)},$L.init(u)}o.on("mousemove",function(){var e=i.projection.invert(CC.mouse(this));if(!e||isNaN(e[0])||isNaN(e[1]))return $L.unhover(a,CC.event);i.xaxis.p2c=function(){return e[0]},i.yaxis.p2c=function(){return e[1]},kO.hover(a,CC.event,i.id)}),o.on("mouseout",function(){$L.unhover(a,CC.event)}),o.on("click",function(){kO.click(a,CC.event)})}},VD.makeFramework=function(){var e=this,t=e.graphDiv._fullLayout,n="clip"+t._uid+e.id;e.clipDef=t._clips.append("clipPath").attr("id",n),e.clipRect=e.clipDef.append("rect"),e.framework=CC.select(e.container).append("g").attr("class","geo "+e.id).call(PP.setClipUrl,n),e.project=function(t){var n=e.projection(t);return n?[n[0]-e.xaxis._offset,n[1]-e.yaxis._offset]:[null,null]},e.xaxis={_id:"x",c2p:function(t){return e.project(t)[0]}},e.yaxis={_id:"y",c2p:function(t){return e.project(t)[1]}},e.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},PI.setConvert(e.mockAxis,t)},VD.saveViewInitial=function(e){var t=e.center||{},n=e.projection,r=n.rotation||{};e._isScoped?this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":n.scale}:e._isClipped?this.viewInitial={"projection.scale":n.scale,"projection.rotation.lon":r.lon,"projection.rotation.lat":r.lat}:this.viewInitial={"center.lon":t.lon,"center.lat":t.lat,"projection.scale":n.scale,"projection.rotation.lon":r.lon}},VD.render=function(){function e(e){var t=r(e.lonlat);return t?"translate("+t[0]+","+t[1]+")":null}function t(e){return r.isLonLatOverEdges(e.lonlat)?"none":null}var n,r=this.projection,i=r.getPath();for(n in this.basePaths)this.basePaths[n].attr("d",i);for(n in this.dataPaths)this.dataPaths[n].attr("d",function(e){return i(e.geojson)});for(n in this.dataPoints)this.dataPoints[n].attr("display",t).attr("transform",e)};var WD={geo:{valType:"subplotid",dflt:"geo",editType:"calc"}},qD={},GD=WC.extendFlat;qD.attributes=function(e,t){e=e||{},t=t||{};var n={valType:"info_array",editType:e.editType,items:[{valType:"number",min:0,max:1,editType:e.editType},{valType:"number",min:0,max:1,editType:e.editType}],dflt:[0,1]},r=(e.name&&e.name,e.trace,t.description&&t.description,{x:GD({},n,{}),y:GD({},n,{}),editType:e.editType});return e.noGridCell||(r.row={valType:"integer",min:0,dflt:0,editType:e.editType},r.column={valType:"integer",min:0,dflt:0,editType:e.editType}),r},qD.defaults=function(e,t,n,r){var i=r&&r.x||[0,1],a=r&&r.y||[0,1],o=t.grid;if(o){var s=n("domain.column");void 0!==s&&(s<o.columns?i=o._domains.x[s]:delete e.domain.column);var l=n("domain.row");void 0!==l&&(l<o.rows?a=o._domains.y[l]:delete e.domain.row)}n("domain.x",i),n("domain.y",a)};var YD=qD.attributes,XD=TE.overrideAll,ZD={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number"},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:eS.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},JD=XD({domain:YD({name:"geo"},{}),resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:Object.keys(aD.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:Object.keys(aD.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:eS.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:aD.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:aD.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:aD.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:aD.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:eS.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:eS.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:eS.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:eS.background},lonaxis:ZD,lataxis:ZD},"plot","from-root"),KD=qD.defaults,QD=function(e,t,n,r){function i(e,t){return uE.coerce(a,o,l,e,t)}for(var a,o,s=r.type,l=r.attributes,u=r.handleDefaults,c=r.partition||"x",d=t._subplots[s],f=d.length,h=0;h<f;h++){var p=d[h];a=e[p]?e[p]:e[p]={},t[p]=o={};var m={};m[c]=[h/f,(h+1)/f],KD(o,t,i,m),r.id=p,u(a,o,i,r)}},$D=aD.axesNames,eN=function(e,t,n){QD(e,t,0,{type:"geo",attributes:JD,handleDefaults:Ii,partition:"y"})},tN={},nN=_L.getSubplotCalcData,rN=uE.counterRegex,iN="geo";tN.name=iN,tN.attr=iN,tN.idRoot=iN,tN.idRegex=tN.attrRegex=rN(iN),tN.attributes=WD,tN.layoutAttributes=JD,tN.supplyLayoutDefaults=eN,tN.plot=function(e){var t=e._fullLayout,n=e.calcdata,r=t._subplots[iN];void 0===window.PlotlyGeoAssets&&(window.PlotlyGeoAssets={topojson:{}});for(var i=0;i<r.length;i++){var a=r[i],o=nN(n,iN,a),s=t[a],l=s._subplot;l||(l=HD({id:a,graphDiv:e,container:t._geolayer.node(),topojsonURL:e._context.topojsonURL,staticPlot:e._context.staticPlot}),t[a]._subplot=l),l.plot(o,t,e._promises)}},tN.clean=function(e,t,n,r){for(var i=r._subplots[iN]||[],a=0;a<i.length;a++){var o=i[a],s=r[o]._subplot;!t[o]&&s&&(s.framework.remove(),s.clipDef.remove())}},tN.updateFx=function(e){for(var t=e._subplots[iN],n=0;n<t.length;n++){var r=e[t[n]];r._subplot.updateFx(e,r)}};var aN=CE.dash,oN=WC.extendFlat,sN=TE.overrideAll,lN=YP.marker,uN=YP.line,cN=lN.line,dN=sN({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names"],dflt:"ISO-3"},mode:oN({},YP.mode,{dflt:"markers"}),text:oN({},YP.text,{}),hovertext:oN({},YP.hovertext,{}),textfont:YP.textfont,textposition:YP.textposition,line:{color:uN.color,width:uN.width,dash:aN},connectgaps:YP.connectgaps,marker:oN({symbol:lN.symbol,opacity:lN.opacity,size:lN.size,sizeref:lN.sizeref,sizemin:lN.sizemin,sizemode:lN.sizemode,showscale:lN.showscale,colorbar:lN.colorbar,line:oN({width:cN.width},FE()),gradient:lN.gradient},FE()),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:YP.fillcolor,selected:YP.selected,unselected:YP.unselected,hoverinfo:oN({},$C.hoverinfo,{flags:["lon","lat","location","text","name"]})},"calc","nested"),fN=WC.extendFlat,hN=WC.extendDeepAll,pN=dN.marker.line,mN=fN({locations:{valType:"data_array",editType:"calc"},locationmode:dN.locationmode,z:{valType:"data_array",editType:"calc"},text:fN({},dN.text,{}),marker:{line:{color:pN.color,width:fN({},pN.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:dN.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:dN.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:fN({},$C.hoverinfo,{editType:"calc",flags:["location","z","text","name"]})},hN({},DE,{zmax:{editType:"calc"},zmin:{editType:"calc"}}),{colorbar:RE}),gN=function(e,t){for(var n=0;n<e.length;n++)e[n].i=n;uE.mergeArray(t.text,e,"tx"),uE.mergeArray(t.hovertext,e,"htx"),uE.mergeArray(t.customdata,e,"data"),uE.mergeArray(t.textposition,e,"tp"),t.textfont&&(uE.mergeArray(t.textfont.size,e,"ts"),uE.mergeArray(t.textfont.color,e,"tc"),uE.mergeArray(t.textfont.family,e,"tf"));var r=t.marker;if(r){uE.mergeArray(r.size,e,"ms"),uE.mergeArray(r.opacity,e,"mo"),uE.mergeArray(r.symbol,e,"mx"),uE.mergeArray(r.color,e,"mc");var i=r.line;r.line&&(uE.mergeArray(i.color,e,"mlc"),uE.mergeArray(i.width,e,"mlw"));var a=r.gradient;a&&"none"!==a.type&&(uE.mergeArray(a.type,e,"mgt"),uE.mergeArray(a.color,e,"mgc"))}},yN=AC.BADNUM,vN=function(e,t){for(var n=t.locations.length,r=new Array(n),i=0;i<n;i++){var a=r[i]={},o=t.locations[i],s=t.z[i];a.loc="string"===typeof o?o:null,a.z=SC(s)?s:yN}return gN(r,t),WE(t,t.z,"","z"),OL(r,t),r},_N=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,mN,n,r)}var a,o=i("locations");if(o&&(a=o.length),!o||!a)return void(t.visible=!1);var s=i("z");if(!uE.isArrayOrTypedArray(s))return void(t.visible=!1);s.length>a&&(t.z=s.slice(0,a)),i("locationmode"),i("text"),i("marker.line.color"),i("marker.line.width"),i("marker.opacity"),QE(e,t,r,i,{prefix:"",cLetter:"z"}),uE.coerceSelectionMarkerOpacity(t,i)},bN=function(e,t){return e.location=t.location,e.z=t.z,e},xN=function(e,t,n){var r,i,a,o,s=e.cd,l=s[0].trace,u=e.subplot;for(i=0;i<s.length;i++)if(r=s[i],o=!1,r._polygons){for(a=0;a<r._polygons.length;a++)r._polygons[a].contains([t,n])&&(o=!o),r._polygons[a].contains([t+360,n])&&(o=!o);if(o)break}if(o&&r)return e.x0=e.x1=e.xa.c2p(r.ct),e.y0=e.y1=e.ya.c2p(r.ct),e.index=r.index,e.location=r.loc,e.z=r.z,Li(e,l,r,u.mockAxis),[e]},wN={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"},kN={},TN=Object.keys(wN),MN={"ISO-3":uE.identity,"USA-states":uE.identity,"country names":zi};kN.locationToFeature=function(e,t,n){if(!t||"string"!==typeof t)return!1;var r=Oi(e,t);if(r){for(var i=0;i<n.length;i++){var a=n[i];if(a.id===r)return a}uE.log(["Location with id",r,"does not have a matching topojson feature at this resolution."].join(" "))}return!1};var AN=function(e,t){t&&Ri(e,t)},CN=oD.getTopojsonFeatures,SN=kN.locationToFeature,EN=function(e,t,n){function r(e){return e[0].trace.uid}for(var i=0;i<n.length;i++)Di(n[i],t.topojson);var a=t.layers.backplot.select(".choroplethlayer").selectAll("g.trace.choropleth").data(n,r);a.enter().append("g").attr("class","trace choropleth"),a.exit().remove(),a.each(function(t){var n=t[0].node3=CC.select(this),r=n.selectAll("path.choroplethlocation").data(uE.identity);r.enter().append("path").classed("choroplethlocation",!0),r.exit().remove(),AN(e,t)})},PN=function(e,t){var n,r,i,a,o,s=e.cd,l=e.xaxis,u=e.yaxis,c=[];if(!1===t)for(n=0;n<s.length;n++)s[n].selected=0;else for(n=0;n<s.length;n++)r=s[n],(i=r.ct)&&(a=l.c2p(i),o=u.c2p(i),t.contains([a,o])?(c.push({pointNumber:n,lon:i[0],lat:i[1]}),r.selected=1):r.selected=0);return c},IN=function(e,t){var n=t[0].trace,r="cb"+n.uid,i=n.zmin,a=n.zmax;if(SC(i)||(i=uE.aggNums(Math.min,null,n.z)),SC(a)||(a=uE.aggNums(Math.max,null,n.z)),e._fullLayout._infolayer.selectAll("."+r).remove(),!n.showscale)return void lI.autoMargin(e,r);var o=t[0].t.cb=GO(e,r),s=nP.makeColorScaleFunc(nP.extractScale(n.colorscale,i,a),{noNumericCheck:!0});o.fillcolor(s).filllevels({start:i,end:a,size:(a-i)/254}).options(n.colorbar)()},LN={};LN.attributes=mN,LN.supplyDefaults=_N,LN.colorbar=IN,LN.calc=vN,LN.plot=EN,LN.style=AN,LN.hoverPoints=xN,LN.eventData=bN,LN.selectPoints=PN,LN.moduleType="trace",LN.name="choropleth",LN.basePlotModule=tN,LN.categories=["geo","noOpacity"],LN.meta={};var ON=LN,zN=ON,RN={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}},DN=WC.extendFlat,NN=DN({},{z:{valType:"data_array",editType:"calc"},x:DN({},YP.x,{impliedEdits:{xtype:"array"}}),x0:DN({},YP.x0,{impliedEdits:{xtype:"scaled"}}),dx:DN({},YP.dx,{impliedEdits:{xtype:"scaled"}}),y:DN({},YP.y,{impliedEdits:{ytype:"array"}}),y0:DN({},YP.y0,{impliedEdits:{ytype:"scaled"}}),dy:DN({},YP.dy,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},zhoverformat:{valType:"string",dflt:"",editType:"none"}},DE,{autocolorscale:DN({},DE.autocolorscale,{dflt:!1})},{colorbar:RE}),FN=CE.dash,jN=WC.extendFlat,BN=RN.COMPARISON_OPS2,UN=RN.INTERVAL_OPS,VN=YP.line,HN=jN({z:NN.z,x:NN.x,x0:NN.x0,dx:NN.dx,y:NN.y,y0:NN.y0,dy:NN.dy,text:NN.text,transpose:NN.transpose,xtype:NN.xtype,ytype:NN.ytype,zhoverformat:NN.zhoverformat,connectgaps:NN.connectgaps,fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:KC({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot"},operation:{valType:"enumerated",values:[].concat(BN).concat(UN),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:jN({},VN.color,{editType:"style+colorbars"}),width:jN({},VN.width,{editType:"style+colorbars"}),dash:FN,smoothing:jN({},VN.smoothing,{}),editType:"plot"}},DE,{autocolorscale:jN({},DE.autocolorscale,{dflt:!1}),zmin:jN({},DE.zmin,{editType:"calc"}),zmax:jN({},DE.zmax,{editType:"calc"})},{colorbar:RE}),WN=uE.extendFlat,qN=function(e){var t=e.contours;if(e.autocontour){var n=Fi(e.zmin,e.zmax,e.ncontours);t.size=n.dtick,t.start=PI.tickFirst(n),n.range.reverse(),t.end=PI.tickFirst(n),t.start===e.zmin&&(t.start+=t.size),t.end===e.zmax&&(t.end-=t.size),t.start>t.end&&(t.start=t.end=(t.start+t.end)/2),e._input.contours||(e._input.contours={}),WN(e._input.contours,{start:t.start,end:t.end,size:t.size}),e._input.autocontour=!0}else if("constraint"!==t.type){var r=t.start,i=t.end,a=e._input.contours;if(r>i&&(t.start=a.start=i,i=t.end=a.end=r,r=t.start),!(t.size>0)){var o;o=r===i?1:Fi(r,i,e.ncontours).dtick,a.size=t.size=o}}},GN=function(e){for(var t=0,n=0;n<e.length;n++)t=Math.max(t,e[n].length);return t},YN=function(e){var t,n,r,i,a,o,s,l,u=[],c={},d=[],f=e[0],h=[],p=[0,0,0],m=GN(e);for(n=0;n<e.length;n++)for(t=h,h=f,f=e[n+1]||[],r=0;r<m;r++)void 0===h[r]&&(o=(void 0!==h[r-1]?1:0)+(void 0!==h[r+1]?1:0)+(void 0!==t[r]?1:0)+(void 0!==f[r]?1:0),o?(0===n&&o++,0===r&&o++,n===e.length-1&&o++,r===h.length-1&&o++,o<4&&(c[[n,r]]=[n,r,o]),u.push([n,r,o])):d.push([n,r]));for(;d.length;){for(s={},l=!1,a=d.length-1;a>=0;a--)i=d[a],n=i[0],r=i[1],(o=((c[[n-1,r]]||p)[2]+(c[[n+1,r]]||p)[2]+(c[[n,r-1]]||p)[2]+(c[[n,r+1]]||p)[2])/20)&&(s[i]=[n,r,o],d.splice(a,1),l=!0);if(!l)throw"findEmpties iterated with no new neighbors";for(i in s)c[i]=s[i],u.push(s[i])}return u.sort(function(e,t){return t[2]-e[2]})},XN=uE.isArrayOrTypedArray,ZN=function(e){return!XN(e.z[0])},JN=[[-1,0],[1,0],[0,-1],[0,1]],KN=function(e,t,n){var r,i,a=1;if(Array.isArray(n))for(r=0;r<t.length;r++)i=t[r],e[i[0]][i[1]]=n[i[0]][i[1]];else Bi(e,t);for(r=0;r<t.length&&!(t[r][2]<4);r++);for(t=t.slice(r),r=0;r<100&&a>.01;r++)a=Bi(e,t,ji(a));return a>.01&&uE.log("interp2d didn't converge quickly",a),e},QN=uE.isArrayOrTypedArray,$N=function(e,t,n,r,i,a){var o,s,l,u=[],c=rS.traceIs(e,"contour"),d=rS.traceIs(e,"histogram"),f=rS.traceIs(e,"gl2d");if(QN(t)&&t.length>1&&!d&&"category"!==a.type){var h=t.length;if(!(h<=i))return c?t.slice(0,i):t.slice(0,i+1);if(c||f)u=t.slice(0,i);else if(1===i)u=[t[0]-.5,t[0]+.5];else{for(u=[1.5*t[0]-.5*t[1]],l=1;l<h;l++)u.push(.5*(t[l-1]+t[l]));u.push(1.5*t[h-1]-.5*t[h-2])}if(h<i){var p=u[u.length-1],m=p-u[u.length-2];for(l=h;l<i;l++)p+=m,u.push(p)}}else{s=r||1;var g=e[a._id.charAt(0)+"calendar"];for(o=d||"category"===a.type?a.r2c(n,0,g)||0:QN(t)&&1===t.length?t[0]:void 0===n?0:a.d2c(n,0,g),l=c||f?0:-.5;l<i;l++)u.push(o+s*l)}return u},eF=function(e,t){for(var n=e.length,r=0,i=0;i<n;i++)t[i]?(e[i]/=t[i],r+=e[i]):e[i]=null;return r},tF={count:function(e,t,n){return n[e]++,1},sum:function(e,t,n,r){var i=r[t];return SC(i)?(i=Number(i),n[e]+=i,i):0},avg:function(e,t,n,r,i){var a=r[t];return SC(a)&&(a=Number(a),n[e]+=a,i[e]++),0},min:function(e,t,n,r){var i=r[t];if(SC(i)){if(i=Number(i),!SC(n[e]))return n[e]=i,i;if(n[e]>i){var a=i-n[e];return n[e]=i,a}}return 0},max:function(e,t,n,r){var i=r[t];if(SC(i)){if(i=Number(i),!SC(n[e]))return n[e]=i,i;if(n[e]<i){var a=i-n[e];return n[e]=i,a}}return 0}},nF=AC.ONEAVGYEAR,rF=AC.ONEAVGMONTH,iF=AC.ONEDAY,aF=AC.ONEHOUR,oF=AC.ONEMIN,sF=AC.ONESEC,lF=PI.tickIncrement,uF=function(e,t,n,r,i){var a,o,s=-1.1*t,l=-.1*t,u=e-l,c=n[0],d=n[1],f=Math.min(Ui(c+l,c+u,r,i),Ui(d+l,d+u,r,i)),h=Math.min(Ui(c+s,c+l,r,i),Ui(d+s,d+l,r,i));if(f>h&&h<Math.abs(d-c)/4e3?(a=f,o=!1):(a=Math.min(f,h),o=!0),"date"===r.type&&a>iF){var p=a===nF?1:6,m=a===nF?"M12":"M1";return function(t,n){var a=r.c2d(t,nF,i),s=a.indexOf("-",p);s>0&&(a=a.substr(0,s));var l=r.d2c(a,0,i);if(l<t){var u=lF(l,m,!1,i);(l+u)/2<t+e&&(l=u)}return n&&o?lF(l,m,!0,i):l}}return function(t,n){var r=a*Math.round(t/a);return r+a/10<t&&r+.9*a<t+e&&(r+=a),n&&o&&(r-=a),r}},cF=uE.cleanDate,dF=AC.ONEDAY,fF=AC.BADNUM,hF=function(e,t,n){var r=t.type,i=n+"bins",a=e[i];a||(a=e[i]={});var o="date"===r?function(e){return e||0===e?cF(e,fF,a.calendar):null}:function(e){return SC(e)?Number(e):null};a.start=o(a.start),a.end=o(a.end);var s="date"===r?dF:1,l=a.size;if(SC(l))a.size=l>0?Number(l):s;else if("string"!==typeof l)a.size=s;else{var u=l.charAt(0),c=l.substr(1);c=SC(c)?Number(c):0,(c<=0||"date"!==r||"M"!==u||c!==Math.round(c))&&(a.size=s)}var d="autobin"+n;"boolean"!==typeof e[d]&&(e[d]=e._fullInput[d]=e._input[d]=!((a.start||0===a.start)&&(a.end||0===a.end))),e[d]||(delete e["nbins"+n],delete e._fullInput["nbins"+n])},pF={percent:function(e,t){for(var n=e.length,r=100/t,i=0;i<n;i++)e[i]*=r},probability:function(e,t){for(var n=e.length,r=0;r<n;r++)e[r]/=t},density:function(e,t,n,r){var i=e.length;r=r||1;for(var a=0;a<i;a++)e[a]*=n[a]*r},"probability density":function(e,t,n,r){var i=e.length;r&&(t/=r);for(var a=0;a<i;a++)e[a]*=n[a]/t}},mF=function(e,t){var n,r,i,a,o=PI.getFromId(e,t.xaxis||"x"),s=t.x?o.makeCalcdata(t,"x"):[],l=PI.getFromId(e,t.yaxis||"y"),u=t.y?l.makeCalcdata(t,"y"):[],c=t.xcalendar,d=t.ycalendar,f=function(e){return o.r2c(e,0,c)},h=function(e){return l.r2c(e,0,d)},p=function(e){return o.c2r(e,0,c)},m=function(e){return l.c2r(e,0,d)},g=Math.min(s.length,u.length);s.length>g&&s.splice(g,s.length-g),u.length>g&&u.splice(g,u.length-g),qi(t,"x",s,o,f,p,c),qi(t,"y",u,l,h,m,d);var y=[],v=[],_=[],b="string"===typeof t.xbins.size,x="string"===typeof t.ybins.size,w=[],k=[],T=b?w:t.xbins,M=x?k:t.ybins,A=0,C=[],S=[],E=t.histnorm,P=t.histfunc,I=-1!==E.indexOf("density"),L="max"===P||"min"===P,O=L?null:0,z=tF.count,R=pF[E],D=!1,N=[],F=[],j="z"in t?t.z:"marker"in t&&Array.isArray(t.marker.color)?t.marker.color:"";j&&"count"!==P&&(D="avg"===P,z=tF[P]);var B=t.xbins,U=f(B.start),V=f(B.end)+(U-PI.tickIncrement(U,B.size,!1,c))/1e6;for(n=U;n<V;n=PI.tickIncrement(n,B.size,!1,c))v.push(O),w.push(n),D&&_.push(0);w.push(n);var H=v.length,W=f(t.xbins.start),q=(n-W)/H,G=p(W+q/2);for(B=t.ybins,U=h(B.start),V=h(B.end)+(U-PI.tickIncrement(U,B.size,!1,d))/1e6,n=U;n<V;n=PI.tickIncrement(n,B.size,!1,d)){y.push(v.slice()),k.push(n);var Y=new Array(H);for(r=0;r<H;r++)Y[r]=[];S.push(Y),D&&C.push(_.slice())}k.push(n);var X=y.length,Z=h(t.ybins.start),J=(n-Z)/X,K=m(Z+J/2);I&&(N=Gi(v.length,T,q,b),F=Gi(y.length,M,J,x)),b||"date"!==o.type||(T=Yi(f,T)),x||"date"!==l.type||(M=Yi(h,M));var Q=!0,$=!0,ee=new Array(H),te=new Array(X),ne=1/0,re=1/0,ie=1/0,ae=1/0;for(n=0;n<g;n++){var oe=s[n],se=u[n];i=uE.findBin(oe,T),a=uE.findBin(se,M),i>=0&&i<H&&a>=0&&a<X&&(A+=z(i,n,y[a],j,C[a]),S[a][i].push(n),Q&&(void 0===ee[i]?ee[i]=oe:ee[i]!==oe&&(Q=!1)),$&&(void 0===te[i]?te[i]=se:te[i]!==se&&($=!1)),ne=Math.min(ne,oe-w[i]),re=Math.min(re,w[i+1]-oe),ie=Math.min(ie,se-k[a]),ae=Math.min(ae,k[a+1]-se))}if(D)for(a=0;a<X;a++)A+=eF(y[a],C[a]);if(R)for(a=0;a<X;a++)R(y[a],A,N,F[a]);return{x:s,xRanges:Xi(w,Q&&ee,ne,re,o,c),x0:G,dx:q,y:u,yRanges:Xi(k,$&&te,ie,ae,l,d),y0:K,dy:J,z:y,pts:S}},gF=function(e,t){function n(e){y=t._input.zsmooth=t.zsmooth=!1,uE.warn('cannot use zsmooth: "fast": '+e)}var r,i,a,o,s,l,u,c,d,f=PI.getFromId(e,t.xaxis||"x"),h=PI.getFromId(e,t.yaxis||"y"),p=rS.traceIs(t,"contour"),m=rS.traceIs(t,"histogram"),g=rS.traceIs(t,"gl2d"),y=p?"best":t.zsmooth;if(f._minDtick=0,h._minDtick=0,m?(d=mF(e,t),r=d.x,i=d.x0,a=d.dx,o=d.y,s=d.y0,l=d.dy,u=d.z):(ZN(t)?(qR(t,f,h,"x","y",["z"]),r=t.x,o=t.y):(r=t.x?f.makeCalcdata(t,"x"):[],o=t.y?h.makeCalcdata(t,"y"):[]),i=t.x0||0,a=t.dx||1,s=t.y0||0,l=t.dy||1,u=SR(t.z,t.transpose),(p||t.connectgaps)&&(t._emptypoints=YN(u),t._interpz=KN(u,t._emptypoints,t._interpz))),"fast"===y)if("log"===f.type||"log"===h.type)n("log axis found");else if(!m){if(r.length){var v=(r[r.length-1]-r[0])/(r.length-1),_=Math.abs(v/100);for(c=0;c<r.length-1;c++)if(Math.abs(r[c+1]-r[c]-v)>_){n("x scale is not linear");break}}if(o.length&&"fast"===y){var b=(o[o.length-1]-o[0])/(o.length-1),x=Math.abs(b/100);for(c=0;c<o.length-1;c++)if(Math.abs(o[c+1]-o[c]-b)>x){n("y scale is not linear");break}}}var w=GN(u),k="scaled"===t.xtype?"":r,T=$N(t,k,i,a,w,f),M="scaled"===t.ytype?"":o,A=$N(t,M,s,l,u.length,h);g||(PI.expand(f,T),PI.expand(h,A));var C={x:T,y:A,z:u,text:t.text};if(k&&k.length===T.length-1&&(C.xCenter=k),M&&M.length===A.length-1&&(C.yCenter=M),m&&(C.xRanges=d.xRanges,C.yRanges=d.yRanges,C.pts=d.pts),p&&"constraint"===t.contours.type||WE(t,u,"","z"),p&&t.contours&&"heatmap"===t.contours.coloring){var S={type:"contour"===t.type?"heatmap":"histogram2d",xcalendar:t.xcalendar,ycalendar:t.ycalendar};C.xfill=$N(S,k,i,a,w,f),C.yfill=$N(S,M,s,l,u.length,h)}return[C]},yF=function(e,t){var n=gF(e,t);return qN(t),n},vF=function(e){return e.end+e.size/1e6},_F=function(e){var t=e.contours,n=t.start,r=vF(t),i=t.size||1,a=Math.floor((r-n)/i)+1,o="lines"===t.coloring?0:1;isFinite(i)||(i=1,a=1);var s,l,u=e.colorscale,c=u.length,d=new Array(c),f=new Array(c);if("heatmap"===t.coloring){for(e.zauto&&!1===e.autocontour&&(e.zmin=n-i/2,e.zmax=e.zmin+a*i),l=0;l<c;l++)s=u[l],d[l]=s[0]*(e.zmax-e.zmin)+e.zmin,f[l]=s[1];var h=CC.extent([e.zmin,e.zmax,t.start,t.start+i*(a-1)]),p=h[e.zmin<e.zmax?0:1],m=h[e.zmin<e.zmax?1:0];p!==e.zmin&&(d.splice(0,0,p),f.splice(0,0,Range[0])),m!==e.zmax&&(d.push(m),f.push(f[f.length-1]))}else for(l=0;l<c;l++)s=u[l],d[l]=(s[0]*(a+o-1)-o/2)*i+n,f[l]=s[1];return nP.makeColorScaleFunc({domain:d,range:f},{noNumericCheck:!0})},bF=function(e,t){var n=t[0].trace,r="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+r).remove(),!n.showscale)return void lI.autoMargin(e,r);var i=GO(e,r);t[0].t.cb=i;var a=n.contours,o=n.line,s=a.size||1,l=a.coloring,u=_F(n);"heatmap"===l&&i.filllevels({start:n.zmin,end:n.zmax,size:(n.zmax-n.zmin)/254}),i.fillcolor("fill"===l||"heatmap"===l?u:"").line({color:"lines"===l?u:o.color,width:!1!==a.showlines?o.width:0,dash:o.dash}).levels({start:a.start,end:vF(a),size:s}).options(n.colorbar)()},xF=function(e,t,n,r){if(r||(r={}),e("contours.showlabels")){var i=t.font;uE.coerceFont(e,"contours.labelfont",{family:i.family,size:i.size,color:n}),e("contours.labelformat")}!1!==r.hasHover&&e("zhoverformat")},wF=jE.addOpacity,kF=jE.opacity,TF=RN.CONSTRAINT_REDUCTION,MF=RN.COMPARISON_OPS2,AF=function(e,t,n,r,i,a){var o,s,l,u=t.contours,c=n("contours.operation");if(u._operation=TF[c],Zi(n,u),"="===c?o=u.showlines=!0:(o=n("contours.showlines"),l=n("fillcolor",wF((e.line||{}).color||i,.5))),o){s=n("line.color",l&&kF(l)?wF(t.fillcolor,1):i),n("line.width",2),n("line.dash")}n("line.smoothing"),xF(n,r,s,a)},CF=function(e,t,n,r){var i,a=r("contours.start"),o=r("contours.end"),s=!1===a||!1===o,l=n("contours.size");!(i=s?t.autocontour=!0:n("autocontour",!1))&&l||n("ncontours")},SF=function(e,t,n,r,i){var a,o=n("contours.coloring"),s="";"fill"===o&&(a=n("contours.showlines")),!1!==a&&("lines"!==o&&(s=n("line.color","#000")),n("line.width",.5),n("line.dash")),"none"!==o&&QE(e,t,r,n,{prefix:"",cLetter:"z"}),n("line.smoothing"),xF(n,r,s,i)},EF=uE.isArrayOrTypedArray,PF=function(e,t,n,r,i,a){var o=n("z");i=i||"x",a=a||"y";var s,l;if(void 0===o||!o.length)return 0;if(ZN(e)){if(s=n(i),l=n(a),!s||!l)return 0}else{if(s=Ji(i,n),l=Ji(a,n),!Ki(o))return 0;n("transpose")}return rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,[i,a],r),t.z.length},IF=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,HN,n,r)}function a(n){return uE.coerce2(e,t,HN,n)}if(!PF(e,t,i,r))return void(t.visible=!1);i("text");var o="constraint"===i("contours.type");i("connectgaps",ZN(t)),o||delete t.showlegend,o?AF(e,t,i,r,n):(CF(0,t,i,a),SF(e,t,i,r))},LF=function(e,t,n,r,i,a){var o,s,l,u,c=e.cd[0],d=c.trace,f=e.xa,h=e.ya,p=c.x,m=c.y,g=c.z,y=c.xCenter,v=c.yCenter,_=c.zmask,b=[d.zmin,d.zmax],x=d.zhoverformat,w=p,k=m;if(!1!==e.index){try{l=Math.round(e.index[1]),u=Math.round(e.index[0])}catch(t){return void uE.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(l<0||l>=g[0].length||u<0||u>g.length)return}else{if(kO.inbox(t-p[0],t-p[p.length-1],0)>0||kO.inbox(n-m[0],n-m[m.length-1],0)>0)return;if(a){var T;for(w=[2*p[0]-p[1]],T=1;T<p.length;T++)w.push((p[T]+p[T-1])/2);for(w.push([2*p[p.length-1]-p[p.length-2]]),k=[2*m[0]-m[1]],T=1;T<m.length;T++)k.push((m[T]+m[T-1])/2);k.push([2*m[m.length-1]-m[m.length-2]])}l=Math.max(0,Math.min(w.length-2,uE.findBin(t,w))),u=Math.max(0,Math.min(k.length-2,uE.findBin(n,k)))}var M=f.c2p(p[l]),A=f.c2p(p[l+1]),C=h.c2p(m[u]),S=h.c2p(m[u+1]);a?(A=M,o=p[l],S=C,s=m[u]):(o=y?y[l]:(p[l]+p[l+1])/2,s=v?v[u]:(m[u]+m[u+1])/2,d.zsmooth&&(M=A=f.c2p(o),C=S=h.c2p(s)));var E=g[u][l];_&&!_[u][l]&&(E=void 0);var P;Array.isArray(c.text)&&Array.isArray(c.text[u])&&(P=c.text[u][l]);var I,L={type:"linear",range:b,hoverformat:x,_separators:f._separators,_numFormat:f._numFormat};return I=PI.tickText(L,E,"hover").text,[uE.extendFlat(e,{index:[u,l],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:M,x1:A,y0:C,y1:S,xLabelVal:o,yLabelVal:s,zLabelVal:E,zLabel:I,text:P})]},OF=function(e,t,n,r,i){var a=LF(e,t,n,0,0,!0);return a&&a.forEach(function(e){var t=e.trace;"constraint"===t.contours.type&&(t.fillcolor&&jE.opacity(t.fillcolor)?e.color=jE.addOpacity(t.fillcolor,1):t.contours.showlines&&jE.opacity(t.line.color)&&(e.color=jE.addOpacity(t.line.color,1)))}),a},zF=function(e,t,n,r){var i,a,o,s=e[0],l=s.x.length,u=s.y.length,c=s.z,d=r.contours,f=-1/0,h=1/0;for(i=0;i<u;i++)h=Math.min(h,c[i][0]),h=Math.min(h,c[i][l-1]),f=Math.max(f,c[i][0]),f=Math.max(f,c[i][l-1]);for(i=1;i<l-1;i++)h=Math.min(h,c[0][i]),h=Math.min(h,c[u-1][i]),f=Math.max(f,c[0][i]),f=Math.max(f,c[u-1][i]);switch(s.prefixBoundary=!1,t){case">":d.value>f&&(s.prefixBoundary=!0);break;case"<":d.value<h&&(s.prefixBoundary=!0);break;case"[]":a=Math.min.apply(null,d.value),o=Math.max.apply(null,d.value),(o<h||a>f)&&(s.prefixBoundary=!0);break;case"][":a=Math.min.apply(null,d.value),o=Math.max.apply(null,d.value),a<h&&o>f&&(s.prefixBoundary=!0)}},RF={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}},DF=function(e,t){var n,r,i,a=function(e){return e.reverse()},o=function(e){return e};switch(t){case"=":case"<":return e;case">":for(1!==e.length&&uE.warn("Contour data invalid for the specified inequality operation."),r=e[0],n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=a(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=a(r.paths[n]);return e;case"][":var s=a;a=o,o=s;case"[]":for(2!==e.length&&uE.warn("Contour data invalid for the specified inequality range operation."),r=Qi(e[0]),i=Qi(e[1]),n=0;n<r.edgepaths.length;n++)r.edgepaths[n]=a(r.edgepaths[n]);for(n=0;n<r.paths.length;n++)r.paths[n]=a(r.paths[n]);for(;i.edgepaths.length;)r.edgepaths.push(o(i.edgepaths.shift()));for(;i.paths.length;)r.paths.push(o(i.paths.shift()));return[r]}},NF={"[]":ea("[]"),"][":ea("]["),">":ta(">"),"<":ta("<"),"=":ta("=")},FF=function(e,t,n){for(var r="constraint"===e.type?NF[e._operation](e.value):e,i=r.size,a=[],o=vF(r),s=n.trace.carpetTrace,l=s?{xaxis:s.aaxis,yaxis:s.baxis,x:n.a,y:n.b}:{xaxis:t.xaxis,yaxis:t.yaxis,x:n.x,y:n.y},u=r.start;u<o;u+=i)if(a.push(uE.extendFlat({level:u,crossings:{},starts:[],edgepaths:[],paths:[],z:n.z,smoothing:n.trace.line.smoothing},l)),a.length>1e3){uE.warn("Too many contours, clipping at 1000",e);break}return a},jF=function(e,t,n){var r,i,a,o,s;for(t=t||.01,n=n||.01,a=0;a<e.length;a++){for(o=e[a],s=0;s<o.starts.length;s++)i=o.starts[s],ia(o,i,"edge",t,n);for(r=0;Object.keys(o.crossings).length&&r<1e4;)r++,i=Object.keys(o.crossings)[0].split(",").map(Number),ia(o,i,void 0,t,n);1e4===r&&uE.log("Infinite loop in contour?")}},BF=function(e){var t,n,r,i,a,o,s,l,u,c=e[0].z,d=c.length,f=c[0].length,h=2===d||2===f;for(n=0;n<d-1;n++)for(i=[],0===n&&(i=i.concat(RF.BOTTOMSTART)),n===d-2&&(i=i.concat(RF.TOPSTART)),t=0;t<f-1;t++)for(r=i.slice(),0===t&&(r=r.concat(RF.LEFTSTART)),t===f-2&&(r=r.concat(RF.RIGHTSTART)),a=t+","+n,o=[[c[n][t],c[n][t+1]],[c[n+1][t],c[n+1][t+1]]],u=0;u<e.length;u++)l=e[u],(s=sa(l.level,o))&&(l.crossings[a]=s,-1!==r.indexOf(s)&&(l.starts.push([t,n]),h&&-1!==r.indexOf(s,r.indexOf(s)+1)&&l.starts.push([t,n])))},UF=function(e,t,n){for(var r=0;r<n.length;r++)la(e,t,n[r])},VF={},HF=RF.LABELOPTIMIZER;VF.plot=function(e,t,n){for(var r=0;r<n.length;r++)fa(e,t,n[r])},VF.makeContourGroup=function(e,t,n){var r=e.plot.select(".maplayer").selectAll("g.contour."+n).data(t);return r.enter().append("g").classed("contour",!0).classed(n,!0),r.exit().remove(),r},VF.createLines=function(e,t,n){var r=n[0].smoothing,i=e.selectAll("g.contourlevel").data(t?n:[]);if(i.exit().remove(),i.enter().append("g").classed("contourlevel",!0),t){var a=i.selectAll("path.openline").data(function(e){return e.pedgepaths||e.edgepaths});a.exit().remove(),a.enter().append("path").classed("openline",!0),a.attr("d",function(e){return PP.smoothopen(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var o=i.selectAll("path.closedline").data(function(e){return e.ppaths||e.paths});o.exit().remove(),o.enter().append("path").classed("closedline",!0),o.attr("d",function(e){return PP.smoothclosed(e,r)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return i},VF.createLineClip=function(e,t,n,r){var i=t?"clipline"+r:null,a=n.selectAll("#"+i).data(t?[0]:[]);return a.exit().remove(),a.enter().append("clipPath").classed("contourlineclip",!0).attr("id",i),PP.setClipUrl(e,i),a},VF.labelFormatter=function(e,t,n){if(e.labelformat)return n._d3locale.numberFormat(e.labelformat);var r;if(t)r=t.axis;else{if(r={type:"linear",_id:"ycontour",showexponent:"all"},"constraint"===e.type){var i=e.value;Array.isArray(i)?r.range=[i[0],i[i.length-1]]:r.range=[i,i]}else r.range=[e.start,e.end],r.nticks=(e.end-e.start)/e.size;r.range[0]===r.range[1]&&(r.range[1]+=r.range[0]||1),r.nticks||(r.nticks=1e3),EI(r,n),PI.prepTicks(r),r._tmin=null,r._tmax=null}return function(e){return PI.tickText(r,e).text}},VF.calcTextOpts=function(e,t,n,r){var i=t(e);n.text(i).call(sP.convertToTspans,r);var a=PP.bBox(n.node(),!0);return{text:i,width:a.width,height:a.height,level:e,dy:(a.top+a.bottom)/2}},VF.findBestTextLocation=function(e,t,n,r,i){var a,o,s,l,u,c=n.width;t.isClosed?(o=t.len/HF.INITIALSEARCHPOINTS,a=t.min+o/2,s=t.max):(o=(t.len-c)/(HF.INITIALSEARCHPOINTS+1),a=t.min+o+c/2,s=t.max-(o+c)/2);for(var d=1/0,f=0;f<HF.ITERATIONS;f++){for(var h=a;h<s;h+=o){var p=uE.getTextLocation(e,t.total,h,c),m=va(p,n,r,i);m<d&&(d=m,u=p,l=h)}if(d>2*HF.MAXCOST)break;f&&(o/=2),a=l-o/2,s=a+1.5*o}if(d<=HF.MAXCOST)return u},VF.addLabelData=function(e,t,n,r){var i=t.width/2,a=t.height/2,o=e.x,s=e.y,l=e.theta,u=Math.sin(l),c=Math.cos(l),d=i*c,f=a*u,h=i*u,p=-a*c,m=[[o-d-f,s-h-p],[o+d-f,s+h-p],[o+d+f,s+h+p],[o-d+f,s-h+p]];n.push({text:t.text,x:o,y:s,dy:t.dy,theta:l,level:t.level,width:t.width,height:t.height}),r.push(m)},VF.drawLabels=function(e,t,n,r,i){var a=e.selectAll("text").data(t,function(e){return e.text+","+e.x+","+e.y+","+e.theta});if(a.exit().remove(),a.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(e){var t=e.x+Math.sin(e.theta)*e.dy,r=e.y-Math.cos(e.theta)*e.dy;CC.select(this).text(e.text).attr({x:t,y:r,transform:"rotate("+180*e.theta/Math.PI+" "+t+" "+r+")"}).call(sP.convertToTspans,n)}),i){for(var o="",s=0;s<i.length;s++)o+="M"+i[s].join("L")+"Z";var l=r.selectAll("path").data([0]);l.enter().append("path"),l.attr("d",o)}};var WF=function(e){CC.select(e).selectAll(".hm image").style("opacity",function(e){return e.trace.opacity})},qF=function(e){var t=CC.select(e).selectAll("g.contour");t.style("opacity",function(e){return e.trace.opacity}),t.each(function(e){var t=CC.select(this),n=e.trace,r=n.contours,i=n.line,a=r.size||1,o=r.start,s="constraint"===r.type,l=!s&&"lines"===r.coloring,u=!s&&"fill"===r.coloring,c=l||u?_F(n):null;t.selectAll("g.contourlevel").each(function(e){CC.select(this).selectAll("path").call(PP.lineGroupStyle,i.width,l?c(e.level):i.color,i.dash)});var d=r.labelfont;if(t.selectAll("g.contourlabels text").each(function(e){PP.font(CC.select(this),{family:d.family,size:d.size,color:d.color||(l?c(e.level):i.color)})}),s)t.selectAll("g.contourfill path").style("fill",n.fillcolor);else if(u){var f;t.selectAll("g.contourfill path").style("fill",function(e){return void 0===f&&(f=e.level),c(e.level+.5*a)}),void 0===f&&(f=o),t.selectAll("g.contourbg path").style("fill",c(f-.5*a))}}),WF(e)},GF={};GF.attributes=HN,GF.supplyDefaults=IF,GF.calc=yF,GF.plot=VF.plot,GF.style=qF,GF.colorbar=bF,GF.hoverPoints=OF,GF.moduleType="trace",GF.name="contour",GF.basePlotModule=xL,GF.categories=["cartesian","2dMap","contour","showLegend"],GF.meta={};var YF=GF,XF=YF,ZF=HN.contours,JF=WC.extendFlat,KF=YP.line,QF=JF({},{carpet:{valType:"string",editType:"calc"},z:NN.z,a:NN.x,a0:NN.x0,da:NN.dx,b:NN.y,b0:NN.y0,db:NN.dy,text:NN.text,transpose:NN.transpose,atype:NN.xtype,btype:NN.ytype,fillcolor:HN.fillcolor,autocontour:HN.autocontour,ncontours:HN.ncontours,contours:{type:ZF.type,start:ZF.start,end:ZF.end,size:ZF.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:ZF.showlines,showlabels:ZF.showlabels,labelfont:ZF.labelfont,labelformat:ZF.labelformat,operation:ZF.operation,value:ZF.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:JF({},KF.color,{}),width:KF.width,dash:KF.dash,smoothing:JF({},KF.smoothing,{}),editType:"plot"}},DE,{autocolorscale:JF({},DE.autocolorscale,{dflt:!1})},{colorbar:RE}),$F=function(e,t){for(var n,r=e._fullData.length,i=0;i<r;i++){var a=e._fullData[i];if(a.index!==t.index&&("carpet"===a.type&&(n||(n=a),a.carpet===t.carpet)))return a}return n},ej=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,QF,n,r)}function a(n){return uE.coerce2(e,t,QF,n)}if(i("carpet"),e.a&&e.b){if(!PF(e,t,i,r,"a","b"))return void(t.visible=!1);i("text");var o="constraint"===i("contours.type");o||delete t.showlegend,o?AF(e,t,i,r,n,{hasHover:!1}):(CF(0,t,i,a),SF(e,t,i,r,{hasHover:!1}))}else t._defaultColor=n},tj=function(e,t){var n=t.carpetTrace=$F(e,t);if(n&&n.visible&&"legendonly"!==n.visible){if(!t.a||!t.b){var r=e.data[n.index],i=e.data[t.index];i.a||(i.a=r.a),i.b||(i.b=r.b),ej(i,t,t._defaultColor,e._fullLayout)}var a=xa(e,t);return qN(t),a}},nj=uE.isArrayOrTypedArray,rj=function(e,t,n,r){var i,a,o,s,l,u,c,d,f,h,p,m,g,y=nj(n)?"a":"b",v="a"===y?e.aaxis:e.baxis,_=v.smoothing,b="a"===y?e.a2i:e.b2j,x="a"===y?n:r,w="a"===y?r:n,k="a"===y?t.a.length:t.b.length,T="a"===y?t.b.length:t.a.length,M=Math.floor("a"===y?e.b2j(w):e.a2i(w)),A="a"===y?function(t){return e.evalxy([],t,M)}:function(t){return e.evalxy([],M,t)};_&&(o=Math.max(0,Math.min(T-2,M)),s=M-o,a="a"===y?function(t,n){return e.dxydi([],t,o,n,s)}:function(t,n){return e.dxydj([],o,t,s,n)});var C=b(x[0]),S=b(x[1]),E=C<S?1:-1,P=1e-8*(S-C),I=E>0?Math.floor:Math.ceil,L=E>0?Math.ceil:Math.floor,O=E>0?Math.min:Math.max,z=E>0?Math.max:Math.min,R=I(C+P),D=L(S-P);c=A(C);var N=[[c]];for(i=R;i*E<D*E;i+=E)l=[],p=z(C,i),m=O(S,i+E),g=m-p,u=Math.max(0,Math.min(k-2,Math.floor(.5*(p+m)))),d=A(m),_&&(f=a(u,p-u),h=a(u,m-u),l.push([c[0]+f[0]/3*g,c[1]+f[1]/3*g]),l.push([d[0]-h[0]/3*g,d[1]-h[1]/3*g])),l.push(d),N.push(l),c=d;return N},ij=function(e,t,n,r,i,a,o,s){function l(e){return Math.abs(e[1]-n[0][1])<T}function u(e){return Math.abs(e[1]-n[2][1])<T}function c(e){return Math.abs(e[0]-n[0][0])<k}function d(e){return Math.abs(e[0]-n[2][0])<k}function f(e,t){var n,r,f,h,p="";for(l(e)&&!d(e)||u(e)&&!c(e)?(h=i.aaxis,f=rj(i,a,[e[0],t[0]],.5*(e[1]+t[1]))):(h=i.baxis,f=rj(i,a,.5*(e[0]+t[0]),[e[1],t[1]])),n=1;n<f.length;n++)for(p+=h.smoothing?"C":"L",r=0;r<f[n].length;r++){var m=f[n][r];p+=[o.c2p(m[0]),s.c2p(m[1])]+" "}return p}var h,p,m,g,y,v,_,b="",x=t.edgepaths.map(function(e,t){return t}),w=!0,k=1e-4*Math.abs(n[0][0]-n[2][0]),T=1e-4*Math.abs(n[0][1]-n[2][1]);for(h=0,p=null;x.length;){var M=t.edgepaths[h][0];for(p&&(b+=f(p,M)),_=PP.smoothopen(t.edgepaths[h].map(r),t.smoothing),b+=w?_:_.replace(/^M/,"L"),x.splice(x.indexOf(h),1),p=t.edgepaths[h][t.edgepaths[h].length-1],y=-1,g=0;g<4;g++){if(!p){uE.log("Missing end?",h,t);break}for(l(p)&&!d(p)?m=n[1]:c(p)?m=n[0]:u(p)?m=n[3]:d(p)&&(m=n[2]),v=0;v<t.edgepaths.length;v++){var A=t.edgepaths[v][0];Math.abs(p[0]-m[0])<k?Math.abs(p[0]-A[0])<k&&(A[1]-p[1])*(m[1]-A[1])>=0&&(m=A,y=v):Math.abs(p[1]-m[1])<T?Math.abs(p[1]-A[1])<T&&(A[0]-p[0])*(m[0]-A[0])>=0&&(m=A,y=v):uE.log("endpt to newendpt is not vert. or horz.",p,m,A)}if(y>=0)break;b+=f(p,m),p=m}if(y===t.edgepaths.length){uE.log("unclosed perimeter path");break}h=y,w=-1===x.indexOf(h),w&&(h=x[0],b+=f(p,m)+"Z",p=null)}for(h=0;h<t.paths.length;h++)b+=PP.smoothclosed(t.paths[h].map(r),t.smoothing);return b},aj=function(e,t){var n,r,i,a,o,s,l,u,c;for(n=0;n<e.length;n++){for(a=e[n],o=a.pedgepaths=[],s=a.ppaths=[],r=0;r<a.edgepaths.length;r++){for(c=a.edgepaths[r],l=[],i=0;i<c.length;i++)l[i]=t(c[i]);o.push(l)}for(r=0;r<a.paths.length;r++){for(c=a.paths[r],u=[],i=0;i<c.length;i++)u[i]=t(c[i]);s.push(u)}}},oj=function(e,t,n){for(var r=0;r<n.length;r++)wa(e,t,n[r])},sj={};sj.attributes=QF,sj.supplyDefaults=ej,sj.colorbar=bF,sj.calc=tj,sj.plot=oj,sj.style=qF,sj.moduleType="trace",sj.name="contourcarpet",sj.basePlotModule=xL,sj.categories=["cartesian","carpet","contour","symbols","showLegend","hasLines","carpetDependent"],sj.meta={};var lj=sj,uj=lj,cj={"X,X div":"font-family:'Open Sans', verdana, arial, sans-serif;margin:0;padding:0;","X input,X button":"font-family:'Open Sans', verdana, arial, sans-serif;","X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .modebar":"position:absolute;top:2px;right:2px;z-index:1001;background:rgba(255,255,255,0.7);","X .modebar--hover":"opacity:0;-webkit-transition:opacity 0.3s ease 0s;-moz-transition:opacity 0.3s ease 0s;-ms-transition:opacity 0.3s ease 0s;-o-transition:opacity 0.3s ease 0s;transition:opacity 0.3s ease 0s;","X:hover .modebar--hover":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;margin-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-group:first-child":"margin-left:0px;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar-btn path":"fill:rgba(0,31,95,0.3);","X .modebar-btn.active path,X .modebar-btn:hover path":"fill:rgba(0,22,72,0.5);","X .modebar-btn.modebar-btn--logo":"padding:3px 1px;","X .modebar-btn.modebar-btn--logo path":"fill:#447adb !important;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":"content:'';position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;","X [data-title]:after":"content:attr(data-title);background:#69738a;color:white;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:white;","X .select-outline-2":"stroke:black;stroke-dasharray:2px 2px;",Y:"font-family:'Open Sans';position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;","Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,0.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:0.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var dj in cj){var fj=dj.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");uE.addStyleRule(fj,cj[dj])}var hj,pj,mj={undo:{width:857.1,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",ascent:850,descent:-150},home:{width:928.6,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",ascent:850,descent:-150},"camera-retro":{width:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",ascent:850,descent:-150},zoombox:{width:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",ascent:850,descent:-150},pan:{width:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",ascent:850,descent:-150},zoom_plus:{width:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",ascent:850,descent:-150},zoom_minus:{width:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",ascent:850,descent:-150},autoscale:{width:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",ascent:850,descent:-150},tooltip_basic:{width:1500,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",ascent:850,descent:-150},tooltip_compare:{width:1125,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",ascent:850,descent:-150},plotlylogo:{width:1542,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",ascent:850,descent:-150},"z-axis":{width:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",ascent:850,descent:-150},"3d_rotate":{width:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",ascent:850,descent:-150},camera:{width:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",ascent:850,descent:-150},movie:{width:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",ascent:850,descent:-150},question:{width:857.1,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",ascent:850,descent:-150},disk:{width:857.1,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",ascent:850,descent:-150},lasso:{width:1031,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",ascent:850,descent:-150},selectbox:{width:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",ascent:850,descent:-150},spikeline:{width:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",ascent:850,descent:-150}},gj={},yj=gj={};!function(){try{hj="function"===typeof setTimeout?setTimeout:Pa}catch(e){hj=Pa}try{pj="function"===typeof clearTimeout?clearTimeout:Ia}catch(e){pj=Ia}}();var vj,_j=[],bj=!1,xj=-1;yj.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];_j.push(new Da(e,t)),1!==_j.length||bj||La(Ra)},Da.prototype.run=function(){this.fun.apply(null,this.array)},yj.title="browser",yj.browser=!0,yj.env={},yj.argv=[],yj.version="",yj.versions={},yj.on=Na,yj.addListener=Na,yj.once=Na,yj.off=Na,yj.removeListener=Na,yj.removeAllListeners=Na,yj.emit=Na,yj.prependListener=Na,yj.prependOnceListener=Na,yj.listeners=function(e){return[]},yj.binding=function(e){throw new Error("process.binding is not supported")},yj.cwd=function(){return"/"},yj.chdir=function(e){throw new Error("process.chdir is not supported")},yj.umask=function(){return 0};var wj={exports:{}};(function(e,t){!function(e,t){"object"===typeof wj.exports?wj.exports=t():"function"===typeof MC&&MC.amd?MC(t):e.ES6Promise=t()}(this,function(){"use strict";function r(e){return"function"===typeof e||"object"===typeof e&&null!==e}function i(e){return"function"===typeof e}function a(e){q=e}function o(e){G=e}function s(){return function(){W(u)}}function l(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;e<H;e+=2){(0,Q[e])(Q[e+1]),Q[e]=void 0,Q[e+1]=void 0}H=0}function c(e,t){var n=arguments,r=this,i=new this.constructor(f);void 0===i[ee]&&I(i);var a=r._state;return a?function(){var e=n[a-1];G(function(){return S(a,i,e,r._result)})}():T(r,i,e,t),i}function d(e){var t=this;if(e&&"object"===typeof e&&e.constructor===t)return e;var n=new t(f);return b(n,e),n}function f(){}function h(){return new TypeError("You cannot resolve a promise with itself")}function p(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(e){return ie.error=e,ie}}function g(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function y(e,t,n){G(function(e){var r=!1,i=g(n,t,function(n){r||(r=!0,t!==n?b(e,n):w(e,n))},function(t){r||(r=!0,k(e,t))},"Settle: "+(e._label||" unknown promise"));!r&&i&&(r=!0,k(e,i))},e)}function v(e,t){t._state===ne?w(e,t._result):t._state===re?k(e,t._result):T(t,void 0,function(t){return b(e,t)},function(t){return k(e,t)})}function _(e,t,n){t.constructor===e.constructor&&n===c&&t.constructor.resolve===d?v(e,t):n===ie?k(e,ie.error):void 0===n?w(e,t):i(n)?y(e,t,n):w(e,t)}function b(e,t){e===t?k(e,h()):r(t)?_(e,t,m(t)):w(e,t)}function x(e){e._onerror&&e._onerror(e._result),M(e)}function w(e,t){e._state===te&&(e._result=t,e._state=ne,0!==e._subscribers.length&&G(M,e))}function k(e,t){e._state===te&&(e._state=re,e._result=t,G(x,e))}function T(e,t,n,r){var i=e._subscribers,a=i.length;e._onerror=null,i[a]=t,i[a+ne]=n,i[a+re]=r,0===a&&e._state&&G(M,e)}function M(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,i=void 0,a=e._result,o=0;o<t.length;o+=3)r=t[o],i=t[o+n],r?S(n,r,i,a):i(a);e._subscribers.length=0}}function A(){this.error=null}function C(e,t){try{return e(t)}catch(e){return ae.error=e,ae}}function S(e,t,n,r){var a=i(n),o=void 0,s=void 0,l=void 0,u=void 0;if(a){if(o=C(n,r),o===ae?(u=!0,s=o.error,o=null):l=!0,t===o)return void k(t,p())}else o=r,l=!0;t._state!==te||(a&&l?b(t,o):u?k(t,s):e===ne?w(t,o):e===re&&k(t,o))}function E(e,t){try{t(function(t){b(e,t)},function(t){k(e,t)})}catch(t){k(e,t)}}function P(){return oe++}function I(e){e[ee]=oe++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(f),this.promise[ee]||I(this.promise),V(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?w(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&w(this.promise,this._result))):k(this.promise,O())}function O(){return new Error("Array Methods must be provided an Array")}function z(e){return new L(this,e).promise}function R(e){var t=this;return new t(V(e)?function(n,r){for(var i=e.length,a=0;a<i;a++)t.resolve(e[a]).then(n,r)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function D(e){var t=this,n=new t(f);return k(n,e),n}function N(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function F(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(e){this[ee]=P(),this._result=this._state=void 0,this._subscribers=[],f!==e&&("function"!==typeof e&&N(),this instanceof j?E(this,e):F())}function B(){var e=void 0;if("undefined"!==typeof t)e=t;else if("undefined"!==typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;if(n){var r=null;try{r=Object.prototype.toString.call(n.resolve())}catch(e){}if("[object Promise]"===r&&!n.cast)return}e.Promise=j}var U=void 0;U=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var V=U,H=0,W=void 0,q=void 0,G=function(e,t){Q[H]=e,Q[H+1]=t,2===(H+=2)&&(q?q(u):$())},Y="undefined"!==typeof window?window:void 0,X=Y||{},Z=X.MutationObserver||X.WebKitMutationObserver,J="undefined"===typeof self&&"undefined"!==typeof e&&"[object process]"==={}.toString.call(e),K="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,Q=new Array(1e3),$=void 0;$=J?function(){return function(){return e.nextTick(u)}}():Z?function(){var e=0,t=new Z(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}():K?function(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}():void 0===Y?function(){try{var e=n(!function(){var e=new Error('Cannot find module "vertx"');throw e.code="MODULE_NOT_FOUND",e}());return W=e.runOnLoop||e.runOnContext,s()}catch(e){return l()}}():l();var ee=Math.random().toString(36).substring(16),te=void 0,ne=1,re=2,ie=new A,ae=new A,oe=0;return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===te&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,r=n.resolve;if(r===d){var i=m(e);if(i===c&&e._state!==te)this._settledAt(e._state,t,e._result);else if("function"!==typeof i)this._remaining--,this._result[t]=e;else if(n===j){var a=new n(f);_(a,e,i),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(r(e),t)},L.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===te&&(this._remaining--,e===re?k(r,n):this._result[t]=n),0===this._remaining&&w(r,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;T(e,void 0,function(e){return n._settledAt(ne,t,e)},function(e){return n._settledAt(re,t,e)})},j.all=z,j.race=R,j.resolve=d,j.reject=D,j._setScheduler=a,j._setAsap=o,j._asap=G,j.prototype={constructor:j,then:c,catch:function(e){return this.then(null,e)}},B(),j.polyfill=B,j.Promise=j,j})}).call(this,gj,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{}),wj=wj.exports;var kj=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}],Tj={_isLinkedToArray:"annotation",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},text:{valType:"string",editType:"calcIfAutorange+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calcIfAutorange+arraydraw"},font:KC({editType:"calcIfAutorange+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calcIfAutorange+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:kj.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:kj.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calcIfAutorange+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calcIfAutorange+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calcIfAutorange+arraydraw"},ax:{valType:"any",editType:"calcIfAutorange+arraydraw"},ay:{valType:"any",editType:"calcIfAutorange+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",EE.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",EE.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",EE.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calcIfAutorange+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},yref:{valType:"enumerated",values:["paper",EE.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calcIfAutorange+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calcIfAutorange+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calcIfAutorange+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:KC({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}},Mj=function(e,t,n){function r(){e.style("stroke-dasharray","0px,100px")}function i(t,r,i,a){t.path&&(t.noRotate&&(i=0),CC.select(u.parentNode).append("path").attr({class:e.attr("class"),d:t.path,transform:"translate("+r.x+","+r.y+")"+(i?"rotate("+180*i/Math.PI+")":"")+"scale("+a+")"}).style({fill:jE.rgb(n.arrowcolor),"stroke-width":0}))}var a,o,s,l,u=e.node(),c=kj[n.arrowhead||0],d=kj[n.startarrowhead||0],f=(n.arrowwidth||1)*(n.arrowsize||1),h=(n.arrowwidth||1)*(n.startarrowsize||1),p=t.indexOf("start")>=0,m=t.indexOf("end")>=0,g=c.backoff*f+n.standoff,y=d.backoff*h+n.startstandoff;if("line"===u.nodeName){a={x:+e.attr("x1"),y:+e.attr("y1")},o={x:+e.attr("x2"),y:+e.attr("y2")};var v=a.x-o.x,_=a.y-o.y;if(s=Math.atan2(_,v),l=s+Math.PI,g&&y&&g+y>Math.sqrt(v*v+_*_))return void r();if(g){if(g*g>v*v+_*_)return void r();var b=g*Math.cos(s),x=g*Math.sin(s);o.x+=b,o.y+=x,e.attr({x2:o.x,y2:o.y})}if(y){if(y*y>v*v+_*_)return void r();var w=y*Math.cos(s),k=y*Math.sin(s);a.x-=w,a.y-=k,e.attr({x1:a.x,y1:a.y})}}else if("path"===u.nodeName){var T=u.getTotalLength(),M="";if(T<g+y)return void r();var A=u.getPointAtLength(0),C=u.getPointAtLength(.1);s=Math.atan2(A.y-C.y,A.x-C.x),a=u.getPointAtLength(Math.min(y,T)),M="0px,"+y+"px,";var S=u.getPointAtLength(T),E=u.getPointAtLength(T-.1);l=Math.atan2(S.y-E.y,S.x-E.x),o=u.getPointAtLength(Math.max(0,T-g));var P=M?y+g:g;M+=T-P+"px,"+T+"px",e.style("stroke-dasharray",M)}p&&i(d,a,s,h),m&&i(c,o,l,f)},Aj={draw:Fa,drawOne:ja,drawRaw:Ba},Cj=Aj.draw,Sj=function(e){var t=e._fullLayout,n=uE.filterVisible(t.annotations);if(n.length&&e._fullData.length){var r={};n.forEach(function(e){r[e.xref]=1,r[e.yref]=1});for(var i in r){var a=PI.getFromId(e,i);if(a&&a.autorange)return uE.syncOrAsync([Cj,Ua],e)}}},Ej={hasClickToShow:Va,onClick:Ha},Pj=function(e,t,n,r){function i(e){var n=s[e],i=null;i=a?lE(n,t.range):Math.pow(10,n),SC(i)||(i=null),r(l+e,i)}t=t||{};var a="log"===n&&"linear"===t.type,o="linear"===n&&"log"===t.type;if(a||o)for(var s,l,u=e._fullLayout.annotations,c=t._id.charAt(0),d=0;d<u.length;d++)s=u[d],l="annotations["+d+"].",s[c+"ref"]===t._id&&i(c),s["a"+c+"ref"]===t._id&&i("a"+c)},Ij=function(e,t,n,r){r("opacity");var i=r("bgcolor"),a=r("bordercolor"),o=jE.opacity(a);r("borderpad");var s=r("borderwidth"),l=r("showarrow");if(r("text",l?" ":n._dfltTitle.annotation),r("textangle"),uE.coerceFont(r,"font",n.font),r("width"),r("align"),r("height")&&r("valign"),l){var u,c,d=r("arrowside");-1!==d.indexOf("end")&&(u=r("arrowhead"),c=r("arrowsize")),-1!==d.indexOf("start")&&(r("startarrowhead",u),r("startarrowsize",c)),r("arrowcolor",o?t.bordercolor:jE.defaultLine),r("arrowwidth",2*(o&&s||1)),r("standoff"),r("startstandoff")}var f=r("hovertext"),h=n.hoverlabel||{};if(f){var p=r("hoverlabel.bgcolor",h.bgcolor||(jE.opacity(i)?jE.rgb(i):jE.defaultLine)),m=r("hoverlabel.bordercolor",h.bordercolor||jE.contrast(p));uE.coerceFont(r,"hoverlabel.font",{family:h.font.family,size:h.font.size,color:h.font.color||m})}r("captureevents",!!f)},Lj=function(e,t,n,r,i){function a(n,r){return uE.coerce(e,t,Tj,n,r)}r=r||{},i=i||{};var o=a("visible",!i.itemIsNotPlainObject),s=a("clicktoshow");if(!o&&!s)return t;Ij(e,t,n,a);for(var l=t.showarrow,u=["x","y"],c=[-10,-30],d={_fullLayout:n},f=0;f<2;f++){var h=u[f],p=PI.coerceRef(e,t,d,h,"","paper");if(PI.coercePosition(t,d,a,p,h,.5),l){var m="a"+h,g=PI.coerceRef(e,t,d,m,"pixel");"pixel"!==g&&g!==p&&(g=t[m]="pixel");var y="pixel"===g?c[f]:.4;PI.coercePosition(t,d,a,g,m,y)}a(h+"anchor"),a(h+"shift")}if(uE.noneOrAll(e,t,["x","y"]),l&&uE.noneOrAll(e,t,["ax","ay"]),s){var v=a("xclick"),_=a("yclick");t._xclick=void 0===v?t.x:PI.cleanPosition(v,d,t.xref),t._yclick=void 0===_?t.y:PI.cleanPosition(_,d,t.yref)}return t},Oj=function(e,t,n){var r,i=n.name,a=t[i],o=uE.isArrayOrTypedArray(e[i])?e[i]:[],s=t[i]=[];for(r=0;r<o.length;r++){var l=o[r],u={},c={};uE.isPlainObject(l)||(c.itemIsNotPlainObject=!0,l={}),n.handleItemDefaults(l,u,t,n,c),u._input=l,u._index=r,s.push(u)}if(uE.isArrayOrTypedArray(a)){var d=Math.min(a.length,s.length);for(r=0;r<d;r++)uE.relinkPrivateKeys(s[r],a[r])}},zj=function(e,t){Oj(e,t,{name:"annotations",handleItemDefaults:Lj})},Rj=function(e){return function(t,n){var r=t[e];if(Array.isArray(r))for(var i=rS.subplotsRegistry.cartesian,a=i.idRegex,o=n._subplots,s=o.xaxis,l=o.yaxis,u=o.cartesian,c=n._has("cartesian")||n._has("gl2d"),d=0;d<r.length;d++){var f=r[d];if(uE.isPlainObject(f)){var h=f.xref,p=f.yref,m=a.x.test(h),g=a.y.test(p);if(m||g){c||uE.pushUnique(n._basePlotModules,i);var y=!1;m&&-1===s.indexOf(h)&&(s.push(h),y=!0),g&&-1===l.indexOf(p)&&(l.push(p),y=!0),y&&m&&g&&u.push(h+p)}}}}},Dj={moduleType:"component",name:"annotations",layoutAttributes:Tj,supplyLayoutDefaults:zj,includeBasePlot:Rj("annotations"),calcAutorange:Sj,draw:Aj.draw,drawOne:Aj.drawOne,drawRaw:Aj.drawRaw,hasClickToShow:Ej.hasClickToShow,onClick:Ej.onClick,convertCoords:Pj},Nj=TE.overrideAll,Fj=Nj({_isLinkedToArray:"annotation",visible:Tj.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:Tj.xanchor,xshift:Tj.xshift,yanchor:Tj.yanchor,yshift:Tj.yshift,text:Tj.text,textangle:Tj.textangle,font:Tj.font,width:Tj.width,height:Tj.height,opacity:Tj.opacity,align:Tj.align,valign:Tj.valign,bgcolor:Tj.bgcolor,bordercolor:Tj.bordercolor,borderpad:Tj.borderpad,borderwidth:Tj.borderwidth,showarrow:Tj.showarrow,arrowcolor:Tj.arrowcolor,arrowhead:Tj.arrowhead,startarrowhead:Tj.startarrowhead,arrowside:Tj.arrowside,arrowsize:Tj.arrowsize,startarrowsize:Tj.startarrowsize,arrowwidth:Tj.arrowwidth,standoff:Tj.standoff,startstandoff:Tj.startstandoff,hovertext:Tj.hovertext,hoverlabel:Tj.hoverlabel,captureevents:Tj.captureevents},"calc","from-root"),jj=function(e){for(var t=e.fullSceneLayout,n=t.annotations,r=0;r<n.length;r++)Ga(n[r],e);e.fullLayout._infolayer.selectAll(".annotation-"+e.id).remove()},Bj=function(e,t,n){Oj(e,t,{name:"annotations",handleItemDefaults:Ya,fullLayout:n.fullLayout})},Uj=Za,Vj=Aj.drawRaw,Hj=["x","y","z"],Wj=function(e){for(var t=e.fullSceneLayout,n=e.dataScale,r=t.annotations,i=0;i<r.length;i++){for(var a=r[i],o=!1,s=0;s<3;s++){var l=Hj[s],u=a[l],c=t[l+"axis"],d=c.r2fraction(u);if(d<0||d>1){o=!0;break}}o?e.fullLayout._infolayer.select(".annotation-"+e.id+'[data-index="'+i+'"]').remove():(a._pdata=Uj(e.glplot.cameraParams,[t.xaxis.r2l(a.x)*n[0],t.yaxis.r2l(a.y)*n[1],t.zaxis.r2l(a.z)*n[2]]),Vj(e.graphDiv,a,i,e.id,a._xa,a._ya))}},qj={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:Fj}}},layoutAttributes:Fj,handleDefaults:Bj,includeBasePlot:Ja,convert:jj,draw:Wj},Gj={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}},Yj=function(e){var t=e.type,n=e.symmetric;if("data"===t){var r=e.array||[];if(n)return function(e,t){var n=+r[t];return[n,n]};var i=e.arrayminus||[];return function(e,t){var n=+r[t],a=+i[t];return isNaN(n)&&isNaN(a)?[NaN,NaN]:[a||0,n||0]}}var a=Ka(t,e.value),o=Ka(t,e.valueminus);return n||void 0===e.valueminus?function(e){var t=a(e);return[t,t]}:function(e){return[o(e),a(e)]}},Xj=function(e){for(var t=e.calcdata,n=0;n<t.length;n++){var r=t[n],i=r[0].trace;if(rS.traceIs(i,"errorBarsOK")){var a=PI.getFromId(e,i.xaxis),o=PI.getFromId(e,i.yaxis);Qa(r,i,a,"x"),Qa(r,i,o,"y")}}},Zj=function(e,t,n,r){function i(e,t){return uE.coerce(s,o,Gj,e,t)}var a="error_"+r.axis,o=t[a]={},s=e[a]||{};if(!1!==i("visible",void 0!==s.array||void 0!==s.value||"sqrt"===s.type)){var l=i("type","array"in s?"data":"percent"),u=!0;"sqrt"!==l&&(u=i("symmetric",!(("data"===l?"arrayminus":"valueminus")in s))),"data"===l?(i("array"),i("traceref"),u||(i("arrayminus"),i("tracerefminus"))):"percent"!==l&&"constant"!==l||(i("value"),u||i("valueminus"));var c="copy_"+r.inherit+"style";r.inherit&&(t["error_"+r.inherit]||{}).visible&&i(c,!(s.color||SC(s.thickness)||SC(s.width))),r.inherit&&o[c]||(i("color",n),i("thickness"),i("width",rS.traceIs(t,"gl3d")?0:4))}},Jj=function(e,t,n){var r,i=t.xaxis,a=t.yaxis,o=n&&n.duration>0;e.each(function(e){var s,l=e[0].trace,u=l.error_x||{},c=l.error_y||{};l.ids&&(s=function(e){return e.id});var d=EP.hasMarkers(l)&&l.marker.maxdisplayed>0;c.visible||u.visible||(e=[]);var f=CC.select(this).selectAll("g.errorbar").data(e,s);if(f.exit().remove(),e.length){u.visible||f.selectAll("path.xerror").remove(),c.visible||f.selectAll("path.yerror").remove(),f.style("opacity",1);var h=f.enter().append("g").classed("errorbar",!0);o&&h.style("opacity",0).transition().duration(n.duration).style("opacity",1),PP.setClipUrl(f,t.layerClipId),f.each(function(e){var t=CC.select(this),s=$a(e,i,a);if(!d||e.vis){var l,f=t.select("path.yerror");if(c.visible&&SC(s.x)&&SC(s.yh)&&SC(s.ys)){var h=c.width;l="M"+(s.x-h)+","+s.yh+"h"+2*h+"m-"+h+",0V"+s.ys,s.noYS||(l+="m-"+h+",0h"+2*h),r=!f.size(),r?f=t.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):o&&(f=f.transition().duration(n.duration).ease(n.easing)),f.attr("d",l)}else f.remove();var p=t.select("path.xerror");if(u.visible&&SC(s.y)&&SC(s.xh)&&SC(s.xs)){var m=(u.copy_ystyle?c:u).width;l="M"+s.xh+","+(s.y-m)+"v"+2*m+"m0,-"+m+"H"+s.xs,s.noXS||(l+="m0,-"+m+"v"+2*m),r=!p.size(),r?p=t.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):o&&(p=p.transition().duration(n.duration).ease(n.easing)),p.attr("d",l)}else p.remove()}})}})},Kj=function(e){e.each(function(e){var t=e[0].trace,n=t.error_y||{},r=t.error_x||{},i=CC.select(this);i.selectAll("path.yerror").style("stroke-width",n.thickness+"px").call(jE.stroke,n.color),r.copy_ystyle&&(r=n),i.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(jE.stroke,r.color)})},Qj=TE.overrideAll,$j={error_x:uE.extendFlat({},Gj),error_y:uE.extendFlat({},Gj)};delete $j.error_x.copy_zstyle,delete $j.error_y.copy_zstyle,delete $j.error_y.copy_ystyle;var eB={error_x:uE.extendFlat({},Gj),error_y:uE.extendFlat({},Gj),error_z:uE.extendFlat({},Gj)};delete eB.error_x.copy_ystyle,delete eB.error_y.copy_ystyle,delete eB.error_z.copy_ystyle,delete eB.error_z.copy_zstyle;var tB={moduleType:"component",name:"errorbars",schema:{traces:{scatter:$j,bar:$j,histogram:$j,scatter3d:Qj(eB,"calc","nested"),scattergl:Qj($j,"calc","nested")}},supplyDefaults:Zj,calc:Xj,calcFromTrace:eo,plot:Jj,style:Kj,hoverInfo:to},nB=dS.counter,rB=qD.attributes,iB=EE.idRegex,aB={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[nB("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[iB.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[iB.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:rB({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"ticks"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"ticks"},editType:"plot"},oB={moduleType:"component",name:"grid",schema:{layout:{grid:aB}},layoutAttributes:aB,sizeDefaults:no,contentDefaults:io},sB={_isLinkedToArray:"image",visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",EE.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",EE.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"},lB=function(e,t,n,r){t=t||{};var i="log"===n&&"linear"===t.type,a="linear"===n&&"log"===t.type;if(i||a)for(var o,s,l=e._fullLayout.images,u=t._id.charAt(0),c=0;c<l.length;c++)if(o=l[c],s="images["+c+"].",o[u+"ref"]===t._id){var d=o[u],f=o["size"+u],h=null,p=null;if(i){h=lE(d,t.range);var m=f/Math.pow(10,h)/2;p=2*Math.log(m+Math.sqrt(1+m*m))/Math.LN10}else h=Math.pow(10,d),p=h*(Math.pow(10,f/2)-Math.pow(10,-f/2));SC(h)?SC(p)||(p=null):(h=null,p=null),r(s+u,h),r(s+"size"+u,p)}},uB="images",cB=function(e,t){Oj(e,t,{name:uB,handleItemDefaults:oo})},dB=function(e){function t(t){var n=CC.select(this);if(!this.img||this.img.src!==t.source){n.attr("xmlns",aP.svg);var r=new Promise(function(e){function r(){n.remove(),e()}var i=new Image;this.img=i,i.setAttribute("crossOrigin","anonymous"),i.onerror=r,i.onload=function(){var t=document.createElement("canvas");t.width=this.width,t.height=this.height,t.getContext("2d").drawImage(this,0,0);var r=t.toDataURL("image/png");n.attr("xlink:href",r),e()},n.on("error",r),i.src=t.source}.bind(this));e._promises.push(r)}}function n(t){var n=CC.select(this),r=PI.getFromId(e,t.xref),i=PI.getFromId(e,t.yref),o=a._size,s=r?Math.abs(r.l2p(t.sizex)-r.l2p(0)):t.sizex*o.w,l=i?Math.abs(i.l2p(t.sizey)-i.l2p(0)):t.sizey*o.h,u=s*d.x[t.xanchor].offset,c=l*d.y[t.yanchor].offset,f=d.x[t.xanchor].sizing+d.y[t.yanchor].sizing,h=(r?r.r2p(t.x)+r._offset:t.x*o.w+o.l)+u,p=(i?i.r2p(t.y)+i._offset:o.h-t.y*o.h+o.t)+c;switch(t.sizing){case"fill":f+=" slice";break;case"stretch":f="none"}n.attr({x:h,y:p,width:s,height:l,preserveAspectRatio:f,opacity:t.opacity});var m=r?r._id:"",g=i?i._id:"",y=m+g;n.call(PP.setClipUrl,y?"clip"+a._uid+y:null)}var r,i,a=e._fullLayout,o=[],s={},l=[];for(i=0;i<a.images.length;i++){var u=a.images[i];if(u.visible)if("below"===u.layer&&"paper"!==u.xref&&"paper"!==u.yref){r=u.xref+u.yref;var c=a._plots[r];if(!c){l.push(u);continue}c.mainplot&&(r=c.mainplot.id),s[r]||(s[r]=[]),s[r].push(u)}else"above"===u.layer?o.push(u):l.push(u)}var d={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}}},f=a._imageLowerLayer.selectAll("image").data(l),h=a._imageUpperLayer.selectAll("image").data(o);f.enter().append("image"),h.enter().append("image"),f.exit().remove(),h.exit().remove(),f.each(function(e){t.bind(this)(e),n.bind(this)(e)}),h.each(function(e){t.bind(this)(e),n.bind(this)(e)});var p=Object.keys(a._plots);for(i=0;i<p.length;i++){r=p[i];var m=a._plots[r];if(m.imagelayer){var g=m.imagelayer.selectAll("image").data(s[r]||[]);g.enter().append("image"),g.exit().remove(),g.each(function(e){t.bind(this)(e),n.bind(this)(e)})}}},fB={moduleType:"component",name:"images",layoutAttributes:sB,supplyLayoutDefaults:cB,includeBasePlot:Rj("images"),draw:dB,convertCoords:lB},hB={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:eS.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:KC({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},x:{valType:"number",min:-2,max:3,dflt:1.02,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,dflt:1,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"legend"},editType:"legend"},pB={};pB.legendGetsTrace=function(e){return e.visible&&void 0!==e.showlegend},pB.isGrouped=function(e){return-1!==(e.traceorder||"").indexOf("grouped")},pB.isVertical=function(e){return"h"!==e.orientation},pB.isReversed=function(e){return-1!==(e.traceorder||"").indexOf("reversed")};var mB=function(e,t,n){function r(e,t){return uE.coerce(l,u,hB,e,t)}for(var i,a,o,s,l=e.legend||{},u={},c=0,d="normal",f=0;f<n.length;f++){var h=n[f];pB.legendGetsTrace(h)&&(c++,rS.traceIs(h,"pie")&&c++),(rS.traceIs(h,"bar")&&"stack"===t.barmode||-1!==["tonextx","tonexty"].indexOf(h.fill))&&(d=pB.isGrouped({traceorder:d})?"grouped+reversed":"reversed"),void 0!==h.legendgroup&&""!==h.legendgroup&&(d=pB.isReversed({traceorder:d})?"reversed+grouped":"grouped")}if(!1!==uE.coerce(e,t,nS,"showlegend",c>1)){if(t.legend=u,r("bgcolor",t.paper_bgcolor),r("bordercolor"),r("borderwidth"),uE.coerceFont(r,"font",t.font),r("orientation"),"h"===u.orientation){var p=e.xaxis;p&&p.rangeslider&&p.rangeslider.visible?(i=0,o="left",a=1.1,s="bottom"):(i=0,o="left",a=-.1,s="top")}r("traceorder",d),pB.isGrouped(t.legend)&&r("tracegroupgap"),r("x",i),r("xanchor",o),r("y",a),r("yanchor",s),uE.noneOrAll(l,u,["x","y"])}},gB={};gB.isRightAnchor=function(e){return"right"===e.xanchor||"auto"===e.xanchor&&e.x>=2/3},gB.isCenterAnchor=function(e){return"center"===e.xanchor||"auto"===e.xanchor&&e.x>1/3&&e.x<2/3},gB.isBottomAnchor=function(e){return"bottom"===e.yanchor||"auto"===e.yanchor&&e.y<=1/3},gB.isMiddleAnchor=function(e){return"middle"===e.yanchor||"auto"===e.yanchor&&e.y>1/3&&e.y<2/3};var yB={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4},vB=function(e,t){function n(e,n){if(""!==e&&pB.isGrouped(t))-1===o.indexOf(e)?(o.push(e),s=!0,a[e]=[[n]]):a[e].push([n]);else{var r="~~i"+u;o.push(r),a[r]=[[n]],u++}}var r,i,a={},o=[],s=!1,l={},u=0;for(r=0;r<e.length;r++){var c=e[r],d=c[0],f=d.trace,h=f.legendgroup;if(pB.legendGetsTrace(f)&&f.showlegend)if(rS.traceIs(f,"pie"))for(l[h]||(l[h]={}),i=0;i<c.length;i++){var p=c[i].label;l[h][p]||(n(h,{label:p,color:c[i].color,i:c[i].i,trace:f}),l[h][p]=!0)}else n(h,d)}if(!o.length)return[];var m,g,y=o.length;if(s&&pB.isGrouped(t))for(g=new Array(y),r=0;r<y;r++)m=a[o[r]],g[r]=pB.isReversed(t)?m.reverse():m;else{for(g=[new Array(y)],r=0;r<y;r++)m=a[o[r]][0],g[0][pB.isReversed(t)?y-r-1:r]=m;y=1}return t._lgroupsLength=y,g},_B=!0,bB=function(e,t,n){function r(e,t,n){var r=y.indexOf(e),i=g[t];return i||(i=g[t]=[]),-1===y.indexOf(e)&&(y.push(e),r=y.length-1),i[r]=n,r}function i(e,t){var n=e._fullInput;if(rS.hasTransform(n,"groupby")){var i=v[n.index];if(!i){var a=rS.getTransformIndices(n,"groupby"),o=a[a.length-1];i=uE.keyedContainer(n,"transforms["+o+"].styles","target","value.visible"),v[n.index]=i}var s=i.get(e._group);void 0===s&&(s=!0),!1!==s&&i.set(e._group,t),_[n.index]=r(n.index,"visible",!1!==n.visible)}else{var l=!1!==n.visible&&t;r(n.index,"visible",l)}}if(!t._dragged&&!t._editing){var a,o,s,l,u,c,d=t._fullLayout.hiddenlabels?t._fullLayout.hiddenlabels.slice():[],f=e.data()[0][0],h=t._fullData,p=f.trace,m=p.legendgroup,g={},y=[],v=[],_=[];if(1===n&&_B&&t.data&&t._context.showTips?(uE.notifier(uE._(t,"Double-click on legend to isolate one trace"),"long"),_B=!1):_B=!1,rS.traceIs(p,"pie")){var b=f.label,x=d.indexOf(b);1===n?-1===x?d.push(b):d.splice(x,1):2===n&&(d=[],t.calcdata[0].forEach(function(e){b!==e.label&&d.push(e.label)}),t._fullLayout.hiddenlabels&&t._fullLayout.hiddenlabels.length===d.length&&-1===x&&(d=[])),rS.call("relayout",t,"hiddenlabels",d)}else{var w,k=m&&m.length,T=[];if(k)for(a=0;a<h.length;a++)w=h[a],w.visible&&w.legendgroup===m&&T.push(a);if(1===n){var M;switch(p.visible){case!0:M="legendonly";break;case!1:M=!1;break;case"legendonly":M=!0}if(k)for(a=0;a<h.length;a++)!1!==h[a].visible&&h[a].legendgroup===m&&i(h[a],M);else i(p,M)}else if(2===n){var A,C,S,E=!0;for(a=0;a<h.length;a++)if(!(A=h[a]===p)&&!(C=k&&h[a].legendgroup===m)&&!0===h[a].visible&&!rS.traceIs(h[a],"notLegendIsolatable")){E=!1;break}for(a=0;a<h.length;a++)if(!1!==h[a].visible&&!rS.traceIs(h[a],"notLegendIsolatable"))switch(p.visible){case"legendonly":i(h[a],!0);break;case!0:S=!!E||"legendonly",A=h[a]===p,C=A||k&&h[a].legendgroup===m,i(h[a],!!C||S)}}for(a=0;a<v.length;a++)if(s=v[a]){var P=s.constructUpdate(),I=Object.keys(P);for(o=0;o<I.length;o++)l=I[o],c=g[l]=g[l]||[],c[_[a]]=P[l]}for(u=Object.keys(g),a=0;a<u.length;a++)for(l=u[a],o=0;o<y.length;o++)g[l].hasOwnProperty(o)||(g[l][o]=void 0);rS.call("restyle",t,g,y)}}},xB={};xB.formatPiePercent=function(e,t){var n=(100*e).toPrecision(3);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),uE.numSeparate(n,t)+"%"},xB.formatPieValue=function(e,t){var n=e.toPrecision(10);return-1!==n.lastIndexOf(".")&&(n=n.replace(/[.]?0+$/,"")),uE.numSeparate(n,t)},xB.getFirstFilled=function(e,t){if(Array.isArray(e))for(var n=0;n<t.length;n++){var r=e[t[n]];if(r||0===r)return r}},xB.castOption=function(e,t){return Array.isArray(e)?xB.getFirstFilled(e,t):e||void 0};var wB=xB.castOption,kB=function(e,t,n){var r=n.marker.line,i=wB(r.color,t.pts)||jE.defaultLine,a=wB(r.width,t.pts)||0;e.style({"stroke-width":a}).call(jE.fill,t.color).call(jE.stroke,i)},TB=function(e,t){function n(e){var t=e[0].trace,n=t.visible&&t.fill&&"none"!==t.fill,r=EP.hasLines(t),i=t.contours;i&&"constraint"===i.type&&(r=i.showlines,n="="!==i._operation);var a=CC.select(this).select(".legendfill").selectAll("path").data(n?[e]:[]);a.enter().append("path").classed("js-fill",!0),a.exit().remove(),a.attr("d","M5,0h30v6h-30z").call(PP.fillGroupStyle);var o=CC.select(this).select(".legendlines").selectAll("path").data(r?[e]:[]);o.enter().append("path").classed("js-line",!0).attr("d","M5,0h30"),o.exit().remove(),o.call(PP.lineGroupStyle)}function r(e){function n(e,t,n){var r=uE.nestedProperty(s,e).get(),i=Array.isArray(r)&&t?t(r):r;if(n){if(i<n[0])return n[0];if(i>n[1])return n[1]}return i}function r(e){return e[0]}var i,a,o=e[0],s=o.trace,l=EP.hasMarkers(s),u=EP.hasText(s),c=EP.hasLines(s);if(l||u||c){var d={},f={};l&&(d.mc=n("marker.color",r),d.mo=n("marker.opacity",uE.mean,[.2,1]),d.ms=n("marker.size",uE.mean,[2,16]),d.mlc=n("marker.line.color",r),d.mlw=n("marker.line.width",uE.mean,[0,5]),f.marker={sizeref:1,sizemin:1,sizemode:"diameter"}),c&&(f.line={width:n("line.width",r,[0,10])}),u&&(d.tx="Aa",d.tp=n("textposition",r),d.ts=10,d.tc=n("textfont.color",r),d.tf=n("textfont.family",r)),i=[uE.minExtend(o,d)],a=uE.minExtend(s,f)}var h=CC.select(this).select("g.legendpoints"),p=h.selectAll("path.scatterpts").data(l?i:[]);p.enter().append("path").classed("scatterpts",!0).attr("transform","translate(20,0)"),p.exit().remove(),p.call(PP.pointStyle,a,t),l&&(i[0].mrc=3);var m=h.selectAll("g.pointtext").data(u?i:[]);m.enter().append("g").classed("pointtext",!0).append("text").attr("transform","translate(20,0)"),m.exit().remove(),m.selectAll("text").call(PP.textPointStyle,a,t)}function i(e){var t=e[0].trace,n=t.marker||{},r=n.line||{},i=CC.select(this).select("g.legendpoints").selectAll("path.legendbar").data(rS.traceIs(t,"bar")?[e]:[]);i.enter().append("path").classed("legendbar",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),i.exit().remove(),i.each(function(e){var t=CC.select(this),i=e[0],a=(i.mlw+1||r.width+1)-1;t.style("stroke-width",a+"px").call(jE.fill,i.mc||n.color),a&&t.call(jE.stroke,i.mlc||r.color)})}function a(e){var t=e[0].trace,n=CC.select(this).select("g.legendpoints").selectAll("path.legendbox").data(rS.traceIs(t,"box-violin")&&t.visible?[e]:[]);n.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.each(function(){var e=t.line.width,n=CC.select(this);n.style("stroke-width",e+"px").call(jE.fill,t.fillcolor),e&&n.call(jE.stroke,t.line.color)})}function o(e){var t=e[0].trace,n=CC.select(this).select("g.legendpoints").selectAll("path.legendpie").data(rS.traceIs(t,"pie")&&t.visible?[e]:[]);n.enter().append("path").classed("legendpie",!0).attr("d","M6,6H-6V-6H6Z").attr("transform","translate(20,0)"),n.exit().remove(),n.size()&&n.call(kB,e[0],t)}e.each(function(e){var t=CC.select(this),n=t.selectAll("g.layers").data([0]);n.enter().append("g").classed("layers",!0),n.style("opacity",e[0].trace.opacity),n.selectAll("g.legendfill").data([e]).enter().append("g").classed("legendfill",!0),n.selectAll("g.legendlines").data([e]).enter().append("g").classed("legendlines",!0);var r=n.selectAll("g.legendsymbols").data([e]);r.enter().append("g").classed("legendsymbols",!0),r.selectAll("g.legendpoints").data([e]).enter().append("g").classed("legendpoints",!0)}).each(i).each(a).each(o).each(n).each(r)},MB=iP.LINE_SPACING,AB=iP.FROM_TL,CB=iP.FROM_BR,SB=jC.DBLCLICKDELAY,EB=function(e){function t(t,n,r){i._scrollY=e._fullLayout.legend._scrollY=t,PP.setTranslate(c,0,-t),PP.setRect(d,_,yB.scrollBarMargin+t*r,yB.scrollBarWidth,n),l.select("rect").attr({y:i.borderwidth+t})}var n=e._fullLayout,r="legend"+n._uid;if(n._infolayer&&e.calcdata){e._legendMouseDownTime||(e._legendMouseDownTime=0);var i=n.legend,a=n.showlegend&&vB(e.calcdata,i),o=n.hiddenlabels||[];if(!n.showlegend||!a.length)return n._infolayer.selectAll(".legend").remove(),n._topdefs.select("#"+r).remove(),void lI.autoMargin(e,"legend");var s=n._infolayer.selectAll("g.legend").data([0]);s.enter().append("g").attr({class:"legend","pointer-events":"all"});var l=n._topdefs.selectAll("#"+r).data([0]);l.enter().append("clipPath").attr("id",r).append("rect");var u=s.selectAll("rect.bg").data([0]);u.enter().append("rect").attr({class:"bg","shape-rendering":"crispEdges"}),u.call(jE.stroke,i.bordercolor).call(jE.fill,i.bgcolor).style("stroke-width",i.borderwidth+"px");var c=s.selectAll("g.scrollbox").data([0]);c.enter().append("g").attr("class","scrollbox");var d=s.selectAll("rect.scrollbar").data([0]);d.enter().append("rect").attr({class:"scrollbar",rx:20,ry:3,width:0,height:0}).call(jE.fill,"#808BA4");var f=c.selectAll("g.groups").data(a);f.enter().append("g").attr("class","groups"),f.exit().remove();var h=f.selectAll("g.traces").data(uE.identity);h.enter().append("g").attr("class","traces"),h.exit().remove(),h.call(TB,e).style("opacity",function(e){var t=e[0].trace;return rS.traceIs(t,"pie")?-1!==o.indexOf(e[0].label)?.5:1:"legendonly"===t.visible?.5:1}).each(function(){CC.select(this).call(so,e).call(lo,e)});0!==s.enter().size()&&(co(e,f,h),fo(e));var p=n.width,m=n.height;co(e,f,h),i._height>m?ho(e):fo(e);var g=n._size,y=g.l+g.w*i.x,v=g.t+g.h*(1-i.y);gB.isRightAnchor(i)?y-=i._width:gB.isCenterAnchor(i)&&(y-=i._width/2),gB.isBottomAnchor(i)?v-=i._height:gB.isMiddleAnchor(i)&&(v-=i._height/2);var _=i._width,b=g.w;_>b?(y=g.l,_=b):(y+_>p&&(y=p-_),y<0&&(y=0),_=Math.min(p-y,i._width));var x=i._height,w=g.h;if(x>w?(v=g.t,x=w):(v+x>m&&(v=m-x),v<0&&(v=0),x=Math.min(m-v,i._height)),PP.setTranslate(s,y,v),d.on(".drag",null),s.on("wheel",null),i._height<=x||e._context.staticPlot)u.attr({width:_-i.borderwidth,height:x-i.borderwidth,x:i.borderwidth/2,y:i.borderwidth/2}),PP.setTranslate(c,0,0),l.select("rect").attr({width:_-2*i.borderwidth,height:x-2*i.borderwidth,x:i.borderwidth,y:i.borderwidth}),PP.setClipUrl(c,r),PP.setRect(d,0,0,0,0),delete i._scrollY;else{var k=Math.max(yB.scrollBarMinHeight,x*x/i._height),T=x-k-2*yB.scrollBarMargin,M=i._height-x,A=T/M,C=Math.min(i._scrollY||0,M);u.attr({width:_-2*i.borderwidth+yB.scrollBarWidth+yB.scrollBarMargin,height:x-i.borderwidth,x:i.borderwidth/2,y:i.borderwidth/2}),l.select("rect").attr({width:_-2*i.borderwidth+yB.scrollBarWidth+yB.scrollBarMargin,height:x-2*i.borderwidth,x:i.borderwidth,y:i.borderwidth+C}),PP.setClipUrl(c,r),t(C,k,A),s.on("wheel",function(){C=uE.constrain(i._scrollY+CC.event.deltaY/T*M,0,M),t(C,k,A),0!==C&&C!==M&&CC.event.preventDefault()});var S,E,P=CC.behavior.drag().on("dragstart",function(){S=CC.event.sourceEvent.clientY,E=C}).on("drag",function(){var e=CC.event.sourceEvent;2===e.buttons||e.ctrlKey||(C=uE.constrain((e.clientY-S)/A+E,0,M),t(C,k,A))});d.call(P)}if(e._context.edits.legendPosition){var I,L,O,z;s.classed("cursor-move",!0),$L.init({element:s.node(),gd:e,prepFn:function(){var e=PP.getTranslate(s);O=e.x,z=e.y},moveFn:function(e,t){var n=O+e,r=z+t;PP.setTranslate(s,n,r),I=$L.align(n,0,g.l,g.l+g.w,i.xanchor),L=$L.align(r,0,g.t+g.h,g.t,i.yanchor)},doneFn:function(){void 0!==I&&void 0!==L&&rS.call("relayout",e,{"legend.x":I,"legend.y":L})},clickFn:function(t,r){var i=n._infolayer.selectAll("g.traces").filter(function(){var e=this.getBoundingClientRect();return r.clientX>=e.left&&r.clientX<=e.right&&r.clientY>=e.top&&r.clientY<=e.bottom});i.size()>0&&(1===t?s._clickTimeout=setTimeout(function(){bB(i,e,t)},SB):2===t&&(s._clickTimeout&&clearTimeout(s._clickTimeout),bB(i,e,t)))}})}}},PB={moduleType:"component",name:"legend",layoutAttributes:hB,supplyLayoutDefaults:mB,draw:EB,style:TB},IB={step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"},LB=WC.extendFlat;IB=LB(IB,{_isLinkedToArray:"button"});var OB={visible:{valType:"boolean",editType:"plot"},buttons:IB,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:KC({editType:"plot"}),bgcolor:{valType:"color",dflt:eS.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:eS.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},zB={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10},RB=function(e,t,n,r,i){function a(e,t){return uE.coerce(o,s,OB,e,t)}var o=e.rangeselector||{},s=t.rangeselector={};if(a("visible",po(o,s,i).length>0)){var l=mo(t,n,r);a("x",l[0]),a("y",l[1]),uE.noneOrAll(e,t,["x","y"]),a("xanchor"),a("yanchor"),uE.coerceFont(a,"font",n.font);var u=a("bgcolor");a("activecolor",jE.contrast(u,zB.lightAmount,zB.darkAmount)),a("bordercolor"),a("borderwidth")}},DB=function(e,t){var n=e._name,r={};if("all"===t.step)r[n+".autorange"]=!0;else{var i=go(e,t);r[n+".range[0]"]=i[0],r[n+".range[1]"]=i[1]}return r},NB=iP.LINE_SPACING,FB=iP.FROM_TL,jB=iP.FROM_BR,BB=function(e){var t=e._fullLayout,n=t._infolayer.selectAll(".rangeselector").data(yo(e),vo);n.enter().append("g").classed("rangeselector",!0),n.exit().remove(),n.style({cursor:"pointer","pointer-events":"all"}),n.each(function(t){var n=CC.select(this),r=t,i=r.rangeselector,a=n.selectAll("g.button").data(i.buttons);a.enter().append("g").classed("button",!0),a.exit().remove(),a.each(function(t){var n=CC.select(this),a=DB(r,t);t._isActive=_o(r,t,a),n.call(bo,i,t),n.call(wo,i,t,e),n.on("click",function(){e._dragged||rS.call("relayout",e,a)}),n.on("mouseover",function(){t._isHovered=!0,n.call(bo,i,t)}),n.on("mouseout",function(){t._isHovered=!1,n.call(bo,i,t)})}),To(e,a,i,r._name,n)})},UB={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:OB}}},layoutAttributes:OB,handleDefaults:RB,draw:BB},VB={bgcolor:{valType:"color",dflt:eS.background,editType:"plot"},bordercolor:{valType:"color",dflt:eS.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},HB={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15},WB=oI.list,qB=bI.getAutoRange,GB=function(e){for(var t=WB(e,"x",!0),n=0;n<t.length;n++){var r=t[n],i=r[HB.name];i&&i.visible&&i.autorange&&r._min.length&&r._max.length&&(i._input.autorange=!0,i._input.range=i.range=qB(r))}},YB={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"},XB=function(e,t,n){function r(e,t){return uE.coerce(a,s,VB,e,t)}function i(e,t,n,r){return uE.coerce(e,t,YB,n,r)}if(e[n].rangeslider){uE.isPlainObject(e[n].rangeslider)||(e[n].rangeslider={});var a=e[n].rangeslider,o=t[n],s=o.rangeslider={};if(r("visible")){r("bgcolor",t.plot_bgcolor),r("bordercolor"),r("borderwidth"),r("thickness"),o._rangesliderAutorange=r("autorange",!o.isValidRange(a.range)),r("range");var l=t._subplots;if(l)for(var u=l.cartesian.filter(function(e){return e.substr(0,e.indexOf("y"))===oI.name2id(n)}).map(function(e){return e.substr(e.indexOf("y"),e.length)}),c=uE.simpleMap(u,oI.id2name),d=0;d<c.length;d++){var f,h=c[d],p=a[h]||{},m=s[h]={},g=t[h];p.range&&g.isValidRange(p.range)&&(f="fixed");var y=i(p,m,"rangemode",f);"match"!==y&&i(p,m,"range",g.range.slice()),g._rangesliderAutorange="auto"===y}s._input=a}}},ZB=function(e){function t(e){return e._name}var n=e._fullLayout,r=Mo(n),i=n._infolayer.selectAll("g."+HB.containerClassName).data(r,t);i.enter().append("g").classed(HB.containerClassName,!0).attr("pointer-events","all"),i.exit().each(function(e){var t=CC.select(this),r=e[HB.name];t.remove(),n._topdefs.select("#"+r._clipId).remove()}),i.exit().size()&&Do(e),0!==r.length&&i.each(function(t){var r=CC.select(this),i=t[HB.name],a=n[PI.id2name(t.anchor)],o=i[PI.id2name(t.anchor)];if(i.range){var s=i.range,l=t.range;s[0]=t.l2r(Math.min(t.r2l(s[0]),t.r2l(l[0]))),s[1]=t.l2r(Math.max(t.r2l(s[1]),t.r2l(l[1]))),i._input.range=s.slice()}t.cleanRange("rangeslider.range");for(var u=n.margin,c=n._size,d=t.domain,f=(t._boundingBox||{}).height||0,h=1/0,p=PI.getSubplots(e,t),m=0;m<p.length;m++){var g=PI.getFromId(e,p[m].substr(p[m].indexOf("y")));h=Math.min(h,g.domain[0])}i._id=HB.name+t._id,i._clipId=i._id+"-"+n._uid,i._width=c.w*(d[1]-d[0]),i._height=(n.height-u.b-u.t)*i.thickness,i._offsetShift=Math.floor(i.borderwidth/2);var y=Math.round(u.l+c.w*d[0]),v=Math.round(c.t+c.h*(1-h)+f+i._offsetShift+HB.extraPad);r.attr("transform","translate("+y+","+v+")");var _=t.r2l(i.range[0]),b=t.r2l(i.range[1]),x=b-_;if(i.p2d=function(e){return e/i._width*x+_},i.d2p=function(e){return(e-_)/x*i._width},i._rl=[_,b],"match"!==o.rangemode){var w=a.r2l(o.range[0]),k=a.r2l(o.range[1]),T=k-w;i.d2pOppAxis=function(e){return(e-w)/T*i._height}}r.call(Eo,e,t,i).call(Po,e,t,i).call(Io,e,t,i).call(Oo,e,t,i,o).call(zo,e,t,i).call(Ro,e,t,i),Ao(r,e,t,i),So(r,e,t,i,a,o),"bottom"===t.side&&yI.draw(e,t._id+"title",{propContainer:t,propName:t._name+".title",placeholder:n._dfltTitle.x,attributes:{x:t._offset+t._length/2,y:v+i._height+i._offsetShift+10+1.5*t.titlefont.size,"text-anchor":"middle"}}),lI.autoMargin(e,i._id,{x:d[0],y:h,l:0,r:0,t:0,b:i._height+u.b+f,pad:HB.extraPad+2*i._offsetShift})})},JB={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:uE.extendFlat({},VB,{yaxis:YB})}}},layoutAttributes:VB,handleDefaults:XB,calcAutorange:GB,draw:ZB},KB=YP.line,QB=CE.dash,$B=WC.extendFlat,eU={_isLinkedToArray:"shape",visible:{valType:"boolean",dflt:!0,editType:"calcIfAutorange+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calcIfAutorange+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:$B({},Tj.xref,{}),x0:{valType:"any",editType:"calcIfAutorange+arraydraw"},x1:{valType:"any",editType:"calcIfAutorange+arraydraw"},yref:$B({},Tj.yref,{}),y0:{valType:"any",editType:"calcIfAutorange+arraydraw"},y1:{valType:"any",editType:"calcIfAutorange+arraydraw"},path:{valType:"string",editType:"calcIfAutorange+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:$B({},KB.color,{editType:"arraydraw"}),width:$B({},KB.width,{editType:"calcIfAutorange+arraydraw"}),dash:$B({},QB,{editType:"arraydraw"}),editType:"calcIfAutorange+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},editType:"arraydraw"},tU={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}},nU={};nU.rangeToShapePosition=function(e){return"log"===e.type?e.r2d:function(e){return e}},nU.shapePositionToRange=function(e){return"log"===e.type?e.d2r:function(e){return e}},nU.decodeDate=function(e){return function(t){return t.replace&&(t=t.replace("_"," ")),e(t)}},nU.encodeDate=function(e){return function(t){return e(t).replace(" ","_")}},nU.getDataToPixel=function(e,t,n){var r,i=e._fullLayout._size;if(t){var a=nU.shapePositionToRange(t);r=function(e){return t._offset+t.r2p(a(e,!0))},"date"===t.type&&(r=nU.decodeDate(r))}else r=n?function(e){return i.t+i.h*(1-e)}:function(e){return i.l+i.w*e};return r},nU.getPixelToData=function(e,t,n){var r,i=e._fullLayout._size;if(t){var a=nU.rangeToShapePosition(t);r=function(e){return a(t.p2r(e-t._offset))}}else r=n?function(e){return 1-(e-i.t)/i.h}:function(e){return(e-i.l)/i.w};return r};var rU=function(e){var t=e._fullLayout,n=uE.filterVisible(t.shapes);if(n.length&&e._fullData.length)for(var r=0;r<n.length;r++){var i,a,o=n[r],s=o.line.width/2;"paper"!==o.xref&&(i=PI.getFromId(e,o.xref),(a=No(i,o.x0,o.x1,o.path,tU.paramIsX))&&PI.expand(i,a,{ppad:s})),"paper"!==o.yref&&(i=PI.getFromId(e,o.yref),(a=No(i,o.y0,o.y1,o.path,tU.paramIsY))&&PI.expand(i,a,{ppad:s}))}},iU=function(e,t,n,r,i){function a(n,r){return uE.coerce(e,t,eU,n,r)}if(r=r||{},i=i||{},!a("visible",!i.itemIsNotPlainObject))return t;a("layer"),a("opacity"),a("fillcolor"),a("line.color"),a("line.width"),a("line.dash");for(var o=e.path?"path":"rect",s=a("type",o),l=["x","y"],u=0;u<2;u++){var c=l[u],d={_fullLayout:n},f=PI.coerceRef(e,t,d,c,"","paper");if("path"!==s){var h,p,m;"paper"!==f?(h=PI.getFromId(d,f),m=nU.rangeToShapePosition(h),p=nU.shapePositionToRange(h)):p=m=uE.identity;var g=c+"0",y=c+"1",v=e[g],_=e[y];e[g]=p(e[g],!0),e[y]=p(e[y],!0),PI.coercePosition(t,d,a,f,g,.25),PI.coercePosition(t,d,a,f,y,.75),t[g]=m(t[g]),t[y]=m(t[y]),e[g]=v,e[y]=_}}return"path"===s?a("path"):uE.noneOrAll(e,t,["x0","x1","y0","y1"]),t},aU=function(e,t){Oj(e,t,{name:"shapes",handleItemDefaults:iU})},oU={draw:Fo,drawOne:jo},sU={moduleType:"component",name:"shapes",layoutAttributes:eU,supplyLayoutDefaults:aU,includeBasePlot:Rj("shapes"),calcAutorange:rU,draw:oU.draw,drawOne:oU.drawOne},lU={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0},uU={t:{valType:"number",dflt:0,editType:"arraydraw"},r:{valType:"number",dflt:0,editType:"arraydraw"},b:{valType:"number",dflt:0,editType:"arraydraw"},l:{valType:"number",dflt:0,editType:"arraydraw"},editType:"arraydraw"},cU=WC.extendDeepAll,dU=TE.overrideAll,fU={_isLinkedToArray:"step",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}},hU=dU({_isLinkedToArray:"slider",visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:fU,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:cU({},uU,{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:ME.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:KC({})},font:KC({}),activebgcolor:{valType:"color",dflt:lU.gripBgActiveColor},bgcolor:{valType:"color",dflt:lU.railBgColor},bordercolor:{valType:"color",dflt:lU.railBorderColor},borderwidth:{valType:"number",min:0,dflt:lU.railBorderWidth},ticklen:{valType:"number",min:0,dflt:lU.tickLength},tickcolor:{valType:"color",dflt:lU.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:lU.minorTickLength}},"arraydraw","from-root"),pU=lU.name,mU=hU.steps,gU=function(e,t){Oj(e,t,{name:pU,handleItemDefaults:Wo})},yU=iP.LINE_SPACING,vU=iP.FROM_TL,_U=iP.FROM_BR,bU=function(e){var t=e._fullLayout,n=Go(t,e),r=t._infolayer.selectAll("g."+lU.containerClassName).data(n.length>0?[0]:[]);if(r.enter().append("g").classed(lU.containerClassName,!0).style("cursor","ew-resize"),r.exit().remove(),r.exit().size()&&cs(e),0!==n.length){var i=r.selectAll("g."+lU.groupClassName).data(n,Yo);i.enter().append("g").classed(lU.groupClassName,!0),i.exit().each(function(t){CC.select(this).remove(),t._commandObserver.remove(),delete t._commandObserver,lI.autoMargin(e,lU.autoMarginIdRoot+t._index)});for(var a=0;a<n.length;a++){var o=n[a];Xo(e,o)}i.each(function(t){if(!(t.steps.length<2)){var n=CC.select(this);is(t),lI.manageCommandObserver(e,t,t.steps,function(t){var r=n.data()[0];r.active!==t.index&&(r._dragging||ts(e,n,r,t.index,!1,!0))}),Zo(e,CC.select(this),t)}})}},xU={moduleType:"component",name:lU.name,layoutAttributes:hU,supplyLayoutDefaults:gU,draw:bU},wU=WC.extendFlat,kU=TE.overrideAll,TU={_isLinkedToArray:"button",method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}},MU=kU({_isLinkedToArray:"updatemenu",_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:TU,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:wU({},uU,{}),font:KC({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:eS.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}},"arraydraw","from-root"),AU={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}},CU=AU.name,SU=MU.buttons,EU=function(e,t){Oj(e,t,{name:CU,handleItemDefaults:ds})},PU=hs;hs.barWidth=2,hs.barLength=20,hs.barRadius=2,hs.barPad=1,hs.barColor="#808BA4",hs.prototype.enable=function(e,t,n){var r=this.gd._fullLayout,i=r.width,a=r.height;this.position=e;var o,s,l,u,c=this.position.l,d=this.position.w,f=this.position.t,h=this.position.h,p=this.position.direction,m="down"===p,g="left"===p,y="right"===p,v="up"===p,_=d,b=h;m||g||y||v||(this.position.direction="down",m=!0),m||v?(o=c,s=o+_,m?(l=f,u=Math.min(l+b,a),b=u-l):(u=f+b,l=Math.max(u-b,0),b=u-l)):(l=f,u=l+b,g?(s=c+_,o=Math.max(s-_,0),_=s-o):(o=c,s=Math.min(o+_,i),_=s-o)),this._box={l:o,t:l,w:_,h:b};var x=d>_,w=hs.barLength+2*hs.barPad,k=hs.barWidth+2*hs.barPad,T=c,M=f+h;M+k>a&&(M=a-k);var A=this.container.selectAll("rect.scrollbar-horizontal").data(x?[0]:[]);A.exit().on(".drag",null).remove(),A.enter().append("rect").classed("scrollbar-horizontal",!0).call(jE.fill,hs.barColor),x?(this.hbar=A.attr({rx:hs.barRadius,ry:hs.barRadius,x:T,y:M,width:w,height:k}),this._hbarXMin=T+w/2,this._hbarTranslateMax=_-w):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var C=h>b,S=hs.barWidth+2*hs.barPad,E=hs.barLength+2*hs.barPad,P=c+d,I=f;P+S>i&&(P=i-S);var L=this.container.selectAll("rect.scrollbar-vertical").data(C?[0]:[]);L.exit().on(".drag",null).remove(),L.enter().append("rect").classed("scrollbar-vertical",!0).call(jE.fill,hs.barColor),C?(this.vbar=L.attr({rx:hs.barRadius,ry:hs.barRadius,x:P,y:I,width:S,height:E}),this._vbarYMin=I+E/2,this._vbarTranslateMax=b-E):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var O=this.id,z=o-.5,R=C?s+S+.5:s+.5,D=l-.5,N=x?u+k+.5:u+.5,F=r._topdefs.selectAll("#"+O).data(x||C?[0]:[]);if(F.exit().remove(),F.enter().append("clipPath").attr("id",O).append("rect"),x||C?(this._clipRect=F.select("rect").attr({x:Math.floor(z),y:Math.floor(D),width:Math.ceil(R)-Math.floor(z),height:Math.ceil(N)-Math.floor(D)}),this.container.call(PP.setClipUrl,O),this.bg.attr({x:c,y:f,width:d,height:h})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(PP.setClipUrl,null),delete this._clipRect),x||C){var j=CC.behavior.drag().on("dragstart",function(){CC.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(j);var B=CC.behavior.drag().on("dragstart",function(){CC.event.sourceEvent.preventDefault(),CC.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));x&&this.hbar.on(".drag",null).call(B),C&&this.vbar.on(".drag",null).call(B)}this.setTranslate(t,n)},hs.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(PP.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},hs.prototype._onBoxDrag=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e-=CC.event.dx),this.vbar&&(t-=CC.event.dy),this.setTranslate(e,t)},hs.prototype._onBoxWheel=function(){var e=this.translateX,t=this.translateY;this.hbar&&(e+=CC.event.deltaY),this.vbar&&(t+=CC.event.deltaY),this.setTranslate(e,t)},hs.prototype._onBarDrag=function(){var e=this.translateX,t=this.translateY;if(this.hbar){var n=e+this._hbarXMin,r=n+this._hbarTranslateMax;e=(uE.constrain(CC.event.x,n,r)-n)/(r-n)*(this.position.w-this._box.w)}if(this.vbar){var i=t+this._vbarYMin,a=i+this._vbarTranslateMax;t=(uE.constrain(CC.event.y,i,a)-i)/(a-i)*(this.position.h-this._box.h)}this.setTranslate(e,t)},hs.prototype.setTranslate=function(e,t){var n=this.position.w-this._box.w,r=this.position.h-this._box.h;if(e=uE.constrain(e||0,0,n),t=uE.constrain(t||0,0,r),this.translateX=e,this.translateY=t,this.container.call(PP.setTranslate,this._box.l-this.position.l-e,this._box.t-this.position.t-t),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+e-.5),y:Math.floor(this.position.t+t-.5)}),this.hbar){var i=e/n;this.hbar.call(PP.setTranslate,e+i*this._hbarTranslateMax,t)}if(this.vbar){var a=t/r;this.vbar.call(PP.setTranslate,e,t+a*this._vbarTranslateMax)}};var IU=iP.LINE_SPACING,LU=function(e){var t=e._fullLayout,n=ps(t),r=t._menulayer.selectAll("g."+AU.containerClassName).data(n.length>0?[0]:[]);if(r.enter().append("g").classed(AU.containerClassName,!0).style("cursor","pointer"),r.exit().remove(),r.exit().size()&&Ls(e),0!==n.length){var i=r.selectAll("g."+AU.headerGroupClassName).data(n,ms);i.enter().append("g").classed(AU.headerGroupClassName,!0);var a=r.selectAll("g."+AU.dropdownButtonGroupClassName).data([0]);a.enter().append("g").classed(AU.dropdownButtonGroupClassName,!0).style("pointer-events","all");for(var o=0;o<n.length;o++){var s=n[o];Es(e,s)}var l="updatemenus"+t._uid,u=new PU(e,a,l);i.enter().size()&&(a.node().parentNode.appendChild(a.node()),a.call(Is).attr(AU.menuIndexAttrName,"-1")),i.exit().each(function(t){CC.select(this).remove(),a.call(Is).attr(AU.menuIndexAttrName,"-1"),lI.autoMargin(e,AU.autoMarginIdRoot+t._index)}),i.each(function(t){var n=CC.select(this),r="dropdown"===t.type?a:null;lI.manageCommandObserver(e,t,t.buttons,function(i){vs(e,t,t.buttons[i.index],n,r,u,i.index,!0)}),"dropdown"===t.type?(_s(e,n,a,u,t),ys(a,t)&&bs(e,n,a,u,t)):bs(e,n,null,null,t)})}},OU={moduleType:"component",name:AU.name,layoutAttributes:MU,supplyLayoutDefaults:EU,draw:LU},zU={};"undefined"!==typeof MathJax?(zU.MathJax=!0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,displayAlign:"left",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]}}),MathJax.Hub.Configured()):zU.MathJax=!1;var RU={};RU.add=function(e,t,n,r,i){var a,o;if(e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},o=e.undoQueue.index,e.autoplay)return void(e.undoQueue.inSequence||(e.autoplay=!1));!e.undoQueue.sequence||e.undoQueue.beginSequence?(a={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},e.undoQueue.queue.splice(o,e.undoQueue.queue.length-o,a),e.undoQueue.index+=1):a=e.undoQueue.queue[o-1],e.undoQueue.beginSequence=!1,a&&(a.undo.calls.unshift(t),a.undo.args.unshift(n),a.redo.calls.push(r),a.redo.args.push(i)),e.undoQueue.queue.length>GC.queueLength&&(e.undoQueue.queue.shift(),e.undoQueue.index--)},RU.startSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!0,e.undoQueue.beginSequence=!0},RU.stopSequence=function(e){e.undoQueue=e.undoQueue||{index:0,queue:[],sequence:!1},e.undoQueue.sequence=!1,e.undoQueue.beginSequence=!1},RU.undo=function(e){var t,n;if(e.framework&&e.framework.isPolar)return void e.framework.undo();if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index<=0)){for(e.undoQueue.index--,t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.undo.calls.length;n++)RU.plotDo(e,t.undo.calls[n],t.undo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1}},RU.redo=function(e){var t,n;if(e.framework&&e.framework.isPolar)return void e.framework.redo();if(!(void 0===e.undoQueue||isNaN(e.undoQueue.index)||e.undoQueue.index>=e.undoQueue.queue.length)){for(t=e.undoQueue.queue[e.undoQueue.index],e.undoQueue.inSequence=!0,n=0;n<t.redo.calls.length;n++)RU.plotDo(e,t.redo.calls[n],t.redo.args[n]);e.undoQueue.inSequence=!1,e.autoplay=!1,e.undoQueue.index++}},RU.plotDo=function(e,t,n){e.autoplay=!0,n=Os(e,n),t.apply(null,n)};var DU=RU,NU={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}},FU={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}},jU=zs,BU={},UU=oI.cleanId,VU=oI.getFromTrace;BU.clearPromiseQueue=function(e){Array.isArray(e._promises)&&e._promises.length>0&&uE.log("Clearing previous rejected promises from queue."),e._promises=[]},BU.cleanLayout=function(e){var t,n;e||(e={}),e.xaxis1&&(e.xaxis||(e.xaxis=e.xaxis1),delete e.xaxis1),e.yaxis1&&(e.yaxis||(e.yaxis=e.yaxis1),delete e.yaxis1),e.scene1&&(e.scene||(e.scene=e.scene1),delete e.scene1);var r=(lI.subplotsRegistry.cartesian||{}).attrRegex,i=(lI.subplotsRegistry.gl3d||{}).attrRegex,a=Object.keys(e);for(t=0;t<a.length;t++){var o=a[t];if(r&&r.test(o)){var s=e[o];s.anchor&&"free"!==s.anchor&&(s.anchor=UU(s.anchor)),s.overlaying&&(s.overlaying=UU(s.overlaying)),s.type||(s.isdate?s.type="date":s.islog?s.type="log":!1===s.isdate&&!1===s.islog&&(s.type="linear")),"withzero"!==s.autorange&&"tozero"!==s.autorange||(s.autorange=!0,s.rangemode="tozero"),delete s.islog,delete s.isdate,delete s.categories,Ns(s,"domain")&&delete s.domain,void 0!==s.autotick&&(void 0===s.tickmode&&(s.tickmode=s.autotick?"auto":"linear"),delete s.autotick)}else if(i&&i.test(o)){var l=e[o],u=l.cameraposition;if(Array.isArray(u)&&4===u[0].length){var c=u[0],d=u[1],f=u[2],h=jU([],c),p=[];for(n=0;n<3;++n)p[n]=d[n]+f*h[2+4*n];l.camera={eye:{x:p[0],y:p[1],z:p[2]},center:{x:d[0],y:d[1],z:d[2]},up:{x:h[1],y:h[5],z:h[9]}},delete l.cameraposition}}}var m=Array.isArray(e.annotations)?e.annotations.length:0;for(t=0;t<m;t++){var g=e.annotations[t];uE.isPlainObject(g)&&(g.ref&&("paper"===g.ref?(g.xref="paper",g.yref="paper"):"data"===g.ref&&(g.xref="x",g.yref="y"),delete g.ref),Rs(g,"xref"),Rs(g,"yref"))}var y=Array.isArray(e.shapes)?e.shapes.length:0;for(t=0;t<y;t++){var v=e.shapes[t];uE.isPlainObject(v)&&(Rs(v,"xref"),Rs(v,"yref"))}var _=e.legend;return _&&(_.x>3?(_.x=1.02,_.xanchor="left"):_.x<-2&&(_.x=-.02,_.xanchor="right"),_.y>3?(_.y=1.02,_.yanchor="bottom"):_.y<-2&&(_.y=-.02,_.yanchor="top")),"rotate"===e.dragmode&&(e.dragmode="orbit"),jE.clean(e),e},BU.cleanData=function(e,t){for(var n=[],r=(e.concat(Array.isArray(t)?t:[]).filter(function(e){return"uid"in e}).map(function(e){return e.uid})),i=0;i<e.length;i++){var a,o=e[i];if(!("uid"in o)||-1!==n.indexOf(o.uid)){var s;for(a=0;a<100&&(s=uE.randstr(r),-1!==n.indexOf(s));a++);o.uid=uE.randstr(r),r.push(o.uid)}if(n.push(o.uid),"histogramy"===o.type&&"xbins"in o&&!("ybins"in o)&&(o.ybins=o.xbins,delete o.xbins),o.error_y&&"opacity"in o.error_y){var l=jE.defaults,u=o.error_y.color||(rS.traceIs(o,"bar")?jE.defaultLine:l[i%l.length]);o.error_y.color=jE.addOpacity(jE.rgb(u),jE.opacity(u)*o.error_y.opacity),delete o.error_y.opacity}if("bardir"in o&&("h"!==o.bardir||!rS.traceIs(o,"bar")&&"histogram"!==o.type.substr(0,9)||(o.orientation="h",BU.swapXYData(o)),delete o.bardir),"histogramy"===o.type&&BU.swapXYData(o),"histogramx"!==o.type&&"histogramy"!==o.type||(o.type="histogram"),"scl"in o&&(o.colorscale=o.scl,delete o.scl),"reversescl"in o&&(o.reversescale=o.reversescl,delete o.reversescl),o.xaxis&&(o.xaxis=UU(o.xaxis,"x")),o.yaxis&&(o.yaxis=UU(o.yaxis,"y")),rS.traceIs(o,"gl3d")&&o.scene&&(o.scene=lI.subplotsRegistry.gl3d.cleanId(o.scene)),!rS.traceIs(o,"pie")&&!rS.traceIs(o,"bar"))if(Array.isArray(o.textposition))for(a=0;a<o.textposition.length;a++)o.textposition[a]=Ds(o.textposition[a]);else o.textposition&&(o.textposition=Ds(o.textposition));if(rS.traceIs(o,"2dMap")&&("YIGnBu"===o.colorscale&&(o.colorscale="YlGnBu"),"YIOrRd"===o.colorscale&&(o.colorscale="YlOrRd")),rS.traceIs(o,"markerColorscale")&&o.marker){var c=o.marker;"YIGnBu"===c.colorscale&&(c.colorscale="YlGnBu"),"YIOrRd"===c.colorscale&&(c.colorscale="YlOrRd")}if("surface"===o.type&&uE.isPlainObject(o.contours)){var d=["x","y","z"];for(a=0;a<d.length;a++){var f=o.contours[d[a]];uE.isPlainObject(f)&&(f.highlightColor&&(f.highlightcolor=f.highlightColor,delete f.highlightColor),f.highlightWidth&&(f.highlightwidth=f.highlightWidth,delete f.highlightWidth))}}if(Array.isArray(o.transforms)){var h=o.transforms;for(a=0;a<h.length;a++){var p=h[a];if(uE.isPlainObject(p))switch(p.type){case"filter":p.filtersrc&&(p.target=p.filtersrc,delete p.filtersrc),p.calendar&&(p.valuecalendar||(p.valuecalendar=p.calendar),delete p.calendar);break;case"groupby":if(p.styles=p.styles||p.style,p.styles&&!Array.isArray(p.styles)){var m=p.styles,g=Object.keys(m);p.styles=[];for(var y=0;y<g.length;y++)p.styles.push({target:g[y],value:m[g[y]]})}}}}Ns(o,"line")&&delete o.line,"marker"in o&&(Ns(o.marker,"line")&&delete o.marker.line,Ns(o,"marker")&&delete o.marker),jE.clean(o)}},BU.swapXYData=function(e){var t;if(uE.swapAttrs(e,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(e.z)&&Array.isArray(e.z[0])&&(e.transpose?delete e.transpose:e.transpose=!0),e.error_x&&e.error_y){var n=e.error_y,r="copy_ystyle"in n?n.copy_ystyle:!(n.color||n.thickness||n.width);uE.swapAttrs(e,["error_?.copy_ystyle"]),r&&uE.swapAttrs(e,["error_?.color","error_?.thickness","error_?.width"])}if("string"===typeof e.hoverinfo){var i=e.hoverinfo.split("+");for(t=0;t<i.length;t++)"x"===i[t]?i[t]="y":"y"===i[t]&&(i[t]="x");e.hoverinfo=i.join("+")}},BU.coerceTraceIndices=function(e,t){return SC(t)?[t]:Array.isArray(t)&&t.length?t:e.data.map(function(e,t){return t})},BU.manageArrayContainers=function(e,t,n){var r=e.obj,i=e.parts,a=i.length,o=i[a-1],s=SC(o);if(s&&null===t){var l=i.slice(0,a-1).join(".");uE.nestedProperty(r,l).get().splice(o,1)}else s&&void 0===e.get()?(void 0===e.get()&&(n[e.astr]=null),e.set(t)):e.set(t)};var HU=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;BU.hasParent=function(e,t){for(var n=Fs(t);n;){if(n in e)return!0;n=Fs(n)}return!1};var WU=["x","y","z"];BU.clearAxisTypes=function(e,t,n){for(var r=0;r<t.length;r++)for(var i=e._fullData[r],a=0;a<3;a++){var o=VU(e,i,WU[a]);if(o&&"log"!==o.type){var s=o._name,l=o._id.substr(1);if("scene"===l.substr(0,5)){if(void 0!==n[l])continue;s=l+"."+s}var u=s+".type";void 0===n[s]&&void 0===n[u]&&uE.nestedProperty(e.layout,u).set(null)}}},BU.clearAxisAutomargins=function(e){for(var t=Object.keys(e._fullLayout._pushmargin),n=0;n<t.length;n++)-1!==t[n].indexOf("automargin")&&delete e._fullLayout._pushmargin[t[n]]};var qU={},GU=rE.sorterAsc;qU.containerArrayMatch=oS;var YU=qU.isAddVal=function(e){return"add"===e||HC(e)},XU=qU.isRemoveVal=function(e){return null===e||"remove"===e};qU.applyContainerArrayChanges=function(e,t,n,r){var i=t.astr,a=rS.getComponentMethod(i,"supplyLayoutDefaults"),o=rS.getComponentMethod(i,"draw"),s=rS.getComponentMethod(i,"drawOne"),l=r.replot||r.recalc||a===ZC||o===ZC,u=e.layout,c=e._fullLayout;if(n[""]){Object.keys(n).length>1&&YC.warn("Full array edits are incompatible with other edits",i);var d=n[""][""];if(XU(d))t.set(null);else{if(!Array.isArray(d))return YC.warn("Unrecognized full array edit value",i,d),!0;t.set(d)}return!l&&(a(u,c),o(e),!0)}var f,h,p,m,g,y,v,_=Object.keys(n).map(Number).sort(GU),b=t.get(),x=b||[],w=lS(c,i).get(),k=[],T=-1,M=x.length;for(f=0;f<_.length;f++)if(p=_[f],m=n[p],g=Object.keys(m),y=m[""],v=YU(y),p<0||p>x.length-(v?0:1))YC.warn("index out of range",i,p);else if(void 0!==y)g.length>1&&YC.warn("Insertion & removal are incompatible with edits to the same index.",i,p),XU(y)?k.push(p):v?("add"===y&&(y={}),x.splice(p,0,y),w&&w.splice(p,0,{})):YC.warn("Unrecognized full object edit value",i,p,y),-1===T&&(T=p);else for(h=0;h<g.length;h++)lS(x[p],g[h]).set(m[g[h]]);for(f=k.length-1;f>=0;f--)x.splice(k[f],1),w&&w.splice(k[f],1);if(x.length?b||t.set(x):t.set(null),l)return!1;if(a(u,c),s!==ZC){var A;if(-1===T)A=_;else{for(M=Math.max(x.length,M),A=[],f=0;f<_.length&&!((p=_[f])>=T);f++)A.push(p);for(f=T;f<M;f++)A.push(f)}for(f=0;f<A.length;f++)s(e,A[f])}else o(e);return!0};var ZU={},JU=uE._,KU=ZU={};KU.toImage={name:"toImage",title:function(e){return JU(e,"Download plot as a png")},icon:mj.camera,click:function(e){var t="png";uE.notifier(JU(e,"Taking snapshot - this may take a few seconds"),"long"),uE.isIE()&&(uE.notifier(JU(e,"IE only supports svg.  Changing format to svg."),"long"),t="svg"),rS.call("downloadImage",e,{format:t}).then(function(t){uE.notifier(JU(e,"Snapshot succeeded")+" - "+t,"long")}).catch(function(){uE.notifier(JU(e,"Sorry, there was a problem downloading your snapshot!"),"long")})}},KU.sendDataToCloud={name:"sendDataToCloud",title:function(e){return JU(e,"Edit in Chart Studio")},icon:mj.disk,click:function(e){lI.sendDataToCloud(e)}},KU.zoom2d={name:"zoom2d",title:function(e){return JU(e,"Zoom")},attr:"dragmode",val:"zoom",icon:mj.zoombox,click:js},KU.pan2d={name:"pan2d",title:function(e){return JU(e,"Pan")},attr:"dragmode",val:"pan",icon:mj.pan,click:js},KU.select2d={name:"select2d",title:function(e){return JU(e,"Box Select")},attr:"dragmode",val:"select",icon:mj.selectbox,click:js},KU.lasso2d={name:"lasso2d",title:function(e){return JU(e,"Lasso Select")},attr:"dragmode",val:"lasso",icon:mj.lasso,click:js},KU.zoomIn2d={name:"zoomIn2d",title:function(e){return JU(e,"Zoom in")},attr:"zoom",val:"in",icon:mj.zoom_plus,click:js},KU.zoomOut2d={name:"zoomOut2d",title:function(e){return JU(e,"Zoom out")},attr:"zoom",val:"out",icon:mj.zoom_minus,click:js},KU.autoScale2d={name:"autoScale2d",title:function(e){return JU(e,"Autoscale")},attr:"zoom",val:"auto",icon:mj.autoscale,click:js},KU.resetScale2d={name:"resetScale2d",title:function(e){return JU(e,"Reset axes")},attr:"zoom",val:"reset",icon:mj.home,click:js},KU.hoverClosestCartesian={name:"hoverClosestCartesian",title:function(e){return JU(e,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:mj.tooltip_basic,gravity:"ne",click:js},KU.hoverCompareCartesian={name:"hoverCompareCartesian",title:function(e){return JU(e,"Compare data on hover")},attr:"hovermode",val:function(e){return e._fullLayout._isHoriz?"y":"x"},icon:mj.tooltip_compare,gravity:"ne",click:js},KU.zoom3d={name:"zoom3d",title:function(e){return JU(e,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:mj.zoombox,click:Bs},KU.pan3d={name:"pan3d",title:function(e){return JU(e,"Pan")},attr:"scene.dragmode",val:"pan",icon:mj.pan,click:Bs},KU.orbitRotation={name:"orbitRotation",title:function(e){return JU(e,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:mj["3d_rotate"],click:Bs},KU.tableRotation={name:"tableRotation",title:function(e){return JU(e,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:mj["z-axis"],click:Bs},KU.resetCameraDefault3d={name:"resetCameraDefault3d",title:function(e){return JU(e,"Reset camera to default")},attr:"resetDefault",icon:mj.home,click:Us},KU.resetCameraLastSave3d={name:"resetCameraLastSave3d",title:function(e){return JU(e,"Reset camera to last save")},attr:"resetLastSave",icon:mj.movie,click:Us},KU.hoverClosest3d={name:"hoverClosest3d",title:function(e){return JU(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:mj.tooltip_basic,gravity:"ne",click:Vs},KU.zoomInGeo={name:"zoomInGeo",title:function(e){return JU(e,"Zoom in")},attr:"zoom",val:"in",icon:mj.zoom_plus,click:Hs},KU.zoomOutGeo={name:"zoomOutGeo",title:function(e){return JU(e,"Zoom out")},attr:"zoom",val:"out",icon:mj.zoom_minus,click:Hs},KU.resetGeo={name:"resetGeo",title:function(e){return JU(e,"Reset")},attr:"reset",val:null,icon:mj.autoscale,click:Hs},KU.hoverClosestGeo={name:"hoverClosestGeo",title:function(e){return JU(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:mj.tooltip_basic,gravity:"ne",click:Ws},KU.hoverClosestGl2d={name:"hoverClosestGl2d",title:function(e){return JU(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:mj.tooltip_basic,gravity:"ne",click:Ws},KU.hoverClosestPie={name:"hoverClosestPie",title:function(e){return JU(e,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:mj.tooltip_basic,gravity:"ne",click:Ws},KU.toggleHover={name:"toggleHover",title:function(e){return JU(e,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:mj.tooltip_basic,gravity:"ne",click:function(e,t){Ws(e),Vs(e,t)}},KU.resetViews={name:"resetViews",title:function(e){return JU(e,"Reset views")},icon:mj.home,click:function(e,t){var n=t.currentTarget;n.setAttribute("data-attr","zoom"),n.setAttribute("data-val","reset"),js(e,t),n.setAttribute("data-attr","resetLastSave"),Us(e,t),Gs(e,"geo"),Gs(e,"mapbox")}},KU.toggleSpikelines={name:"toggleSpikelines",title:function(e){return JU(e,"Toggle Spike Lines")},icon:mj.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(e){var t=e._fullLayout;t._cartesianSpikesEnabled="on"===t._cartesianSpikesEnabled?"off":"on";var n=qs(e);rS.call("relayout",e,n)}},KU.resetViewMapbox={name:"resetViewMapbox",title:function(e){return JU(e,"Reset view")},attr:"reset",icon:mj.home,click:function(e){Gs(e,"mapbox")}};var QU=Ys.prototype;QU.update=function(e,t){this.graphInfo=e;var n=this.graphInfo._context;"hover"===n.displayModeBar?this.element.className="modebar modebar--hover":this.element.className="modebar";var r=!this.hasButtons(t),i=this.hasLogo!==n.displaylogo;(r||i)&&(this.removeAllButtons(),this.updateButtons(t),n.displaylogo&&(this.element.appendChild(this.getLogo()),this.hasLogo=!0)),this.updateActiveButton()},QU.updateButtons=function(e){var t=this;this.buttons=e,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(e){var n=t.createGroup();e.forEach(function(e){var r=e.name;if(!r)throw new Error("must provide button 'name' in button config");if(-1!==t.buttonsNames.indexOf(r))throw new Error("button name '"+r+"' is taken");t.buttonsNames.push(r);var i=t.createButton(e);t.buttonElements.push(i),n.appendChild(i)}),t.element.appendChild(n)})},QU.createGroup=function(){var e=document.createElement("div");return e.className="modebar-group",e},QU.createButton=function(e){var t=this,n=document.createElement("a");n.setAttribute("rel","tooltip"),n.className="modebar-btn";var r=e.title;void 0===r?r=e.name:"function"===typeof r&&(r=r(this.graphInfo)),(r||0===r)&&n.setAttribute("data-title",r),void 0!==e.attr&&n.setAttribute("data-attr",e.attr);var i=e.val;if(void 0!==i&&("function"===typeof i&&(i=i(this.graphInfo)),n.setAttribute("data-val",i)),"function"!==typeof e.click)throw new Error("must provide button 'click' function in button config");return n.addEventListener("click",function(n){e.click(t.graphInfo,n),t.updateActiveButton(n.currentTarget)}),n.setAttribute("data-toggle",e.toggle||!1),e.toggle&&CC.select(n).classed("active",!0),n.appendChild(this.createIcon(e.icon||mj.question,e.name)),n.setAttribute("data-gravity",e.gravity||"n"),n},QU.createIcon=function(e,t){var n=e.ascent-e.descent,r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"path");i.setAttribute("height","1em"),i.setAttribute("width",e.width/n+"em"),i.setAttribute("viewBox",[0,0,e.width,n].join(" "));var o="toggleSpikelines"===t?"matrix(1.5 0 0 -1.5 0 "+e.ascent+")":"matrix(1 0 0 -1 0 "+e.ascent+")";return a.setAttribute("d",e.path),a.setAttribute("transform",o),i.appendChild(a),i},QU.updateActiveButton=function(e){var t=this.graphInfo._fullLayout,n=void 0!==e?e.getAttribute("data-attr"):null;this.buttonElements.forEach(function(e){var r=e.getAttribute("data-val")||!0,i=e.getAttribute("data-attr"),a="true"===e.getAttribute("data-toggle"),o=CC.select(e);if(a)i===n&&o.classed("active",!o.classed("active"));else{var s=null===i?i:uE.nestedProperty(t,i).get();o.classed("active",s===r)}})},QU.hasButtons=function(e){var t=this.buttons;if(!t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;++n){if(e[n].length!==t[n].length)return!1;for(var r=0;r<e[n].length;r++)if(e[n][r].name!==t[n][r].name)return!1}return!0},QU.getLogo=function(){var e=this.createGroup(),t=document.createElement("a");return t.href="https://plot.ly/",t.target="_blank",t.setAttribute("data-title",uE._(this.graphInfo,"Produced with Plotly")),t.className="modebar-btn plotlyjsicon modebar-btn--logo",t.appendChild(this.createIcon(mj.plotlylogo)),e.appendChild(t),e},QU.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},QU.destroy=function(){uE.removeElement(this.container.querySelector(".modebar"))};var $U=Xs,eV=function(e){var t=e._fullLayout,n=e._context,r=t._modeBar;if(!n.displayModeBar)return void(r&&(r.destroy(),delete t._modeBar));if(!Array.isArray(n.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(n.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var i,a=n.modeBarButtons;i=Array.isArray(a)&&a.length?$s(a):Zs(e,n.modeBarButtonsToRemove,n.modeBarButtonsToAdd),r?r.update(e,i):t._modeBar=$U(e,i)},tV={};tV.manage=eV;var nV=iP.FROM_BL,rV=function(e,t,n){void 0===n&&(n=nV[e.constraintoward||"center"]);var r=[e.r2l(e.range[0]),e.r2l(e.range[1])],i=r[0]+(r[1]-r[0])*n;e.range=e._input.range=[e.l2r(i+(r[0]-i)*t),e.l2r(i+(r[1]-i)*t)]},iV=iP.FROM_TL,aV=PI.doTicks,oV=oI.getFromId,sV=EE.MINDRAG,lV=EE.MINZOOM,uV=!0,cV={makeDragBox:el,makeDragger:tl,makeRectDragger:nl,makeZoombox:ul,makeCorners:cl,updateZoombox:fl,xyCorners:bl,transitionZoombox:hl,removeZoombox:pl,clearSelect:dl,showDoubleClickNotifier:ml,attachWheelEventHandler:wl},dV=cV.makeDragBox,fV=function(e){var t=e._fullLayout;if(e._context.staticPlot)return void CC.select(e).selectAll(".drag").remove();if(t._has("cartesian")||t._has("gl2d")){Object.keys(t._plots||{}).sort(function(e,n){if((t._plots[e].mainplot&&!0)===(t._plots[n].mainplot&&!0)){var r=e.split("y"),i=n.split("y");return r[0]===i[0]?Number(r[1]||1)-Number(i[1]||1):Number(r[0]||1)-Number(i[0]||1)}return t._plots[e].mainplot?1:-1}).forEach(function(n){var r=t._plots[n],i=r.xaxis,a=r.yaxis,o=EE.DRAGGERSIZE;if(!r.mainplot){var s=dV(e,r,i._offset,a._offset,i._length,a._length,"ns","ew");s.onmousemove=function(t){e._fullLayout._rehover=function(){e._fullLayout._hoversubplot===n&&kO.hover(e,t,n)},kO.hover(e,t,n),e._fullLayout._lasthover=s,e._fullLayout._hoversubplot=n},s.onmouseout=function(t){e._dragging||(e._fullLayout._hoversubplot=null,$L.unhover(e,t))},e._context.showAxisDragHandles&&(dV(e,r,i._offset-o,a._offset-o,o,o,"n","w"),dV(e,r,i._offset+i._length,a._offset-o,o,o,"n","e"),dV(e,r,i._offset-o,a._offset+a._length,o,o,"s","w"),dV(e,r,i._offset+i._length,a._offset+a._length,o,o,"s","e"))}if(e._context.showAxisDragHandles){if(n===i._mainSubplot){var l=i._mainLinePosition;"top"===i.side&&(l-=o),dV(e,r,i._offset+.1*i._length,l,.8*i._length,o,"","ew"),dV(e,r,i._offset,l,.1*i._length,o,"","w"),dV(e,r,i._offset+.9*i._length,l,.1*i._length,o,"","e")}if(n===a._mainSubplot){var u=a._mainLinePosition;"right"!==a.side&&(u-=o),dV(e,r,u,a._offset+.1*a._length,o,.8*a._length,"ns",""),dV(e,r,u,a._offset+.9*a._length,o,.1*a._length,"s",""),dV(e,r,u,a._offset,o,.1*a._length,"n","")}}});var n=t._hoverlayer.node();n.onmousemove=function(n){n.target=t._lasthover,kO.hover(e,n,t._hoversubplot)},n.onclick=function(n){n.target=t._lasthover,kO.click(e,n)},n.onmousedown=function(e){t._lasthover.onmousedown(e)}}},hV={};hV.layoutStyles=function(e){return uE.syncOrAsync([lI.doAutoMargin,hV.lsInner],e)},hV.lsInner=function(e){function t(e,t,n){var r=e._lw/2;return"x"===e._id.charAt(0)?t?"top"===n?t._offset-a-r:t._offset+t._length+a+r:i.t+i.h*(1-(e.position||0))+r%1:t?"right"===n?t._offset+t._length+a+r:t._offset-a-r:i.l+i.w*(e.position||0)+r%1}var n,r=e._fullLayout,i=r._size,a=i.p,o=PI.list(e),s=r._has("cartesian");for(n=0;n<o.length;n++){var l=o[n];l.setScale();var u=l._anchorAxis;l._linepositions={},l._lw=PP.crispRound(e,l.linewidth,1),l._mainLinePosition=t(l,u,l.side),l._mainMirrorPosition=l.mirror&&u?t(l,u,iP.OPPOSITE_SIDE[l.side]):null}r._paperdiv.style({width:r.width+"px",height:r.height+"px"}).selectAll(".main-svg").call(PP.setSize,r.width,r.height),e._context.setBackground(e,r.paper_bgcolor);var c=r._paper.selectAll("g.subplot"),d=[],f=[];c.each(function(e){var t=r._plots[e];if(t.mainplot)return t.bg&&t.bg.remove(),void(t.bg=void 0);var n=t.xaxis.domain,i=t.yaxis.domain,a=[];kl(n,i,f)?a=[0]:(d.push(e),f.push([n,i]));var o=t.plotgroup.selectAll(".bg").data(a);o.enter().append("rect").classed("bg",!0),o.exit().remove(),o.each(function(){t.bg=o;var e=t.plotgroup.node();e.insertBefore(this,e.childNodes[0])})});var h=r._bgLayer.selectAll(".bg").data(d);return h.enter().append("rect").classed("bg",!0),h.exit().remove(),h.each(function(e){r._plots[e].bg=CC.select(this)}),c.each(function(e){function i(e){return"M"+_+","+e+"H"+b}function l(e){return"M"+h._offset+","+e+"h"+h._length}function u(e){return"M"+e+","+A+"V"+M}function c(e){return"M"+e+","+p._offset+"v"+p._length}function d(t,n,r){if(!t.showline||e!==t._mainSubplot)return"";if(!t._anchorAxis)return r(t._mainLinePosition);var i=n(t._mainLinePosition);return t.mirror&&(i+=n(t._mainMirrorPosition)),i}var f=r._plots[e],h=f.xaxis,p=f.yaxis;f.bg&&s&&f.bg.call(PP.setRect,h._offset-a,p._offset-a,h._length+2*a,p._length+2*a).call(jE.fill,r.plot_bgcolor).style("stroke-width",0),f.clipId="clip"+r._uid+e+"plot";var m=r._clips.selectAll("#"+f.clipId).data([0]);m.enter().append("clipPath").attr({class:"plotclip",id:f.clipId}).append("rect"),m.selectAll("rect").attr({width:h._length,height:p._length}),PP.setTranslate(f.plot,h._offset,p._offset);var g,y;for(f._hasClipOnAxisFalse?(g=null,y=f.clipId):(g=f.clipId,y=null),PP.setClipUrl(f.plot,g),n=0;n<EE.traceLayerClasses.length;n++){var v=EE.traceLayerClasses[n];"scatterlayer"!==v&&"barlayer"!==v&&f.plot.selectAll("g."+v).call(PP.setClipUrl,y)}if(f.layerClipId=y,s){var _,b,x,w,k,T,M,A,C,S,E,P,I,L="M0,0";Tl(h,e)&&(k=Al(h,"left",p,o),_=h._offset-(k?a+k:0),T=Al(h,"right",p,o),b=h._offset+h._length+(T?a+T:0),x=t(h,p,"bottom"),w=t(h,p,"top"),I=!h._anchorAxis||e!==h._mainSubplot,I&&h.ticks&&"allticks"===h.mirror&&(h._linepositions[e]=[x,w]),L=d(h,i,l),I&&h.showline&&("all"===h.mirror||"allticks"===h.mirror)&&(L+=i(x)+i(w)),f.xlines.style("stroke-width",h._lw+"px").call(jE.stroke,h.showline?h.linecolor:"rgba(0,0,0,0)")),f.xlines.attr("d",L);var O="M0,0";Tl(p,e)&&(E=Al(p,"bottom",h,o),M=p._offset+p._length+(E?a:0),P=Al(p,"top",h,o),A=p._offset-(P?a:0),C=t(p,h,"left"),S=t(p,h,"right"),I=!p._anchorAxis||e!==h._mainSubplot,I&&p.ticks&&"allticks"===p.mirror&&(p._linepositions[e]=[C,S]),O=d(p,u,c),I&&p.showline&&("all"===p.mirror||"allticks"===p.mirror)&&(O+=u(C)+u(S)),f.ylines.style("stroke-width",p._lw+"px").call(jE.stroke,p.showline?p.linecolor:"rgba(0,0,0,0)")),f.ylines.attr("d",O)}}),PI.makeClipPaths(e),hV.drawMainTitle(e),tV.manage(e),e._promises.length&&Promise.all(e._promises)},hV.drawMainTitle=function(e){var t=e._fullLayout;yI.draw(e,"gtitle",{propContainer:t,propName:"title",placeholder:t._dfltTitle.plot,attributes:{x:t.width/2,y:t._size.t/2,"text-anchor":"middle"}})},hV.doTraceStyle=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t],r=((n[0]||{}).trace||{})._module||{},i=r.arraysToCalcdata;i&&i(n,n[0].trace)}return lI.style(e),rS.getComponentMethod("legend","draw")(e),lI.previousPromises(e)},hV.doColorBars=function(e){for(var t=0;t<e.calcdata.length;t++){var n=e.calcdata[t][0];if((n.t||{}).cb){var r=n.trace,i=n.t.cb;rS.traceIs(r,"contour")&&i.line({width:!1!==r.contours.showlines?r.line.width:0,dash:r.line.dash,color:"line"===r.contours.coloring?i._opts.line.color:r.line.color}),rS.traceIs(r,"markerColorscale")?i.options(r.marker.colorbar)():i.options(r.colorbar)()}}return lI.previousPromises(e)},hV.layoutReplot=function(e){var t=e.layout;return e.layout=void 0,rS.call("plot",e,"",t)},hV.doLegend=function(e){return rS.getComponentMethod("legend","draw")(e),lI.previousPromises(e)},hV.doTicksRelayout=function(e){return PI.doTicks(e,"redraw"),hV.drawMainTitle(e),lI.previousPromises(e)},hV.doModeBar=function(e){var t=e._fullLayout;tV.manage(e),fV(e);for(var n=0;n<t._basePlotModules.length;n++){var r=t._basePlotModules[n].updateFx;r&&r(t)}return lI.previousPromises(e)},hV.doCamera=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=0;r<n.length;r++){var i=t[n[r]];i._scene.setCamera(i.camera)}};var pV={},mV=oI.id2name,gV=bI.makePadFn,yV=AC.ALMOST_EQUAL,vV=iP.FROM_BL;pV.enforce=function(e){var t,n,r,i,a,o,s,l=e._fullLayout,u=l._axisConstraintGroups||[];for(t=0;t<u.length;t++){var c=u[t],d=Object.keys(c),f=1/0,h=0,p=1/0,m={},g={},y=!1;for(n=0;n<d.length;n++)r=d[n],g[r]=i=l[mV(r)],i._inputDomain?i.domain=i._inputDomain.slice():i._inputDomain=i.domain.slice(),i._inputRange||(i._inputRange=i.range.slice()),i.setScale(),m[r]=a=Math.abs(i._m)/c[r],f=Math.min(f,a),"domain"!==i.constrain&&i._constraintShrinkable||(p=Math.min(p,a)),delete i._constraintShrinkable,h=Math.max(h,a),"domain"===i.constrain&&(y=!0);if(!(f>yV*h)||y)for(n=0;n<d.length;n++)if(r=d[n],a=m[r],i=g[r],o=i.constrain,a!==p||"domain"===o)if(s=a/p,"range"===o)rV(i,s);else{var v=i._inputDomain,_=(i.domain[1]-i.domain[0])/(v[1]-v[0]),b=(i.r2l(i.range[1])-i.r2l(i.range[0]))/(i.r2l(i._inputRange[1])-i.r2l(i._inputRange[0]));if((s/=_)*b<1){i.domain=i._input.domain=v.slice(),rV(i,s);continue}if(b<1&&(i.range=i._input.range=i._inputRange.slice(),s*=b),i.autorange&&i._min.length&&i._max.length){var x=i.r2l(i.range[0]),w=i.r2l(i.range[1]),k=(x+w)/2,T=k,M=k,A=Math.abs(w-k),C=k-A*s*1.0001,S=k+A*s*1.0001,E=gV(i);Cl(i,s),i.setScale();var P,I,L=Math.abs(i._m);for(I=0;I<i._min.length;I++)(P=i._min[I].val-E(i._min[I])/L)>C&&P<T&&(T=P);for(I=0;I<i._max.length;I++)(P=i._max[I].val+E(i._max[I])/L)<S&&P>M&&(M=P);var O=(M-T)/(2*A);s/=O,T=i.l2r(T),M=i.l2r(M),i.range=i._input.range=x<w?[T,M]:[M,T]}Cl(i,s)}}},pV.clean=function(e,t){if(t._inputDomain){for(var n=!1,r=t._id,i=e._fullLayout._axisConstraintGroups,a=0;a<i.length;a++)if(i[a][r]){n=!0;break}n&&"domain"===t.constrain||(t._input.domain=t.domain=t._inputDomain,delete t._inputDomain)}};var _V={},bV=uE.extendDeepAll,xV=iP.MID_SHIFT,wV=_V={version:"0.2.2"};wV.Axis=function(){function e(e){n=e||n;var o=a.data,l=a.layout;return("string"==typeof n||n.nodeName)&&(n=CC.select(n)),n.datum(o).each(function(e,n){function a(e,t){return i(e)%360+l.orientation}var o=e.slice();s={data:wV.util.cloneJson(o),layout:wV.util.cloneJson(l)};var u=0;o.forEach(function(e,t){e.color||(e.color=l.defaultColorRange[u],u=(u+1)%l.defaultColorRange.length),e.strokeColor||(e.strokeColor="LinePlot"===e.geometry?e.color:CC.rgb(e.color).darker().toString()),s.data[t].color=e.color,s.data[t].strokeColor=e.strokeColor,s.data[t].strokeDash=e.strokeDash,s.data[t].strokeSize=e.strokeSize});var c=o.filter(function(e,t){var n=e.visible;return"undefined"===typeof n||!0===n}),d=!1,f=c.map(function(e,t){return d=d||"undefined"!==typeof e.groupId,e});if(d){var h=CC.nest().key(function(e,t){return"undefined"!=typeof e.groupId?e.groupId:"unstacked"}).entries(f),p=[],m=h.map(function(e,t){if("unstacked"===e.key)return e.values;var n=e.values[0].r.map(function(e,t){return 0});return e.values.forEach(function(e,t,r){e.yStack=[n],p.push(n),n=wV.util.sumArrays(e.r,n)}),e.values});c=CC.merge(m)}c.forEach(function(e,t){e.t=Array.isArray(e.t[0])?e.t:[e.t],e.r=Array.isArray(e.r[0])?e.r:[e.r]});var g=Math.min(l.width-l.margin.left-l.margin.right,l.height-l.margin.top-l.margin.bottom)/2;g=Math.max(10,g);var y,v=[l.margin.left+g,l.margin.top+g];if(d){y=[0,CC.max(wV.util.sumArrays(wV.util.arrayLast(c).r[0],wV.util.arrayLast(p)))]}else y=CC.extent(wV.util.flattenArray(c.map(function(e,t){return e.r})));l.radialAxis.domain!=wV.DATAEXTENT&&(y[0]=0),r=CC.scale.linear().domain(l.radialAxis.domain!=wV.DATAEXTENT&&l.radialAxis.domain?l.radialAxis.domain:y).range([0,g]),s.layout.radialAxis.domain=r.domain();var _,b=wV.util.flattenArray(c.map(function(e,t){return e.t})),x="string"===typeof b[0];x&&(b=wV.util.deduplicate(b),_=b.slice(),b=CC.range(b.length),c=c.map(function(e,t){var n=e;return e.t=[b],d&&(n.yStack=e.yStack),n}));var w=c.filter(function(e,t){return"LinePlot"===e.geometry||"DotPlot"===e.geometry}).length===c.length,k=null===l.needsEndSpacing?x||!w:l.needsEndSpacing,T=l.angularAxis.domain&&l.angularAxis.domain!=wV.DATAEXTENT&&!x&&l.angularAxis.domain[0]>=0,M=T?l.angularAxis.domain:CC.extent(b),A=Math.abs(b[1]-b[0]);w&&!x&&(A=0);var C=M.slice();k&&x&&(C[1]+=A);var S=l.angularAxis.ticksCount||4;S>8&&(S=S/(S/8)+S%8),l.angularAxis.ticksStep&&(S=(C[1]-C[0])/S);var E=l.angularAxis.ticksStep||(C[1]-C[0])/(S*(l.minorTicks+1));_&&(E=Math.max(Math.round(E),1)),C[2]||(C[2]=E);var P=CC.range.apply(this,C);if(P=P.map(function(e,t){return parseFloat(e.toPrecision(12))}),i=CC.scale.linear().domain(C.slice(0,2)).range("clockwise"===l.direction?[0,360]:[360,0]),s.layout.angularAxis.domain=i.domain(),s.layout.angularAxis.endPadding=k?A:0,"undefined"===typeof(t=CC.select(this).select("svg.chart-root"))||t.empty()){var I=(new DOMParser).parseFromString("<svg xmlns='http://www.w3.org/2000/svg' class='chart-root'>' + '<g class='outer-group'>' + '<g class='chart-group'>' + '<circle class='background-circle'></circle>' + '<g class='geometry-group'></g>' + '<g class='radial axis-group'>' + '<circle class='outside-circle'></circle>' + '</g>' + '<g class='angular axis-group'></g>' + '<g class='guides-group'><line></line><circle r='0'></circle></g>' + '</g>' + '<g class='legend-group'></g>' + '<g class='tooltips-group'></g>' + '<g class='title-group'><text></text></g>' + '</g>' + '</svg>","application/xml"),L=this.appendChild(this.ownerDocument.importNode(I.documentElement,!0));t=CC.select(L)}t.select(".guides-group").style({"pointer-events":"none"}),t.select(".angular.axis-group").style({"pointer-events":"none"}),t.select(".radial.axis-group").style({"pointer-events":"none"});var O,z=t.select(".chart-group"),R={fill:"none",stroke:l.tickColor},D={"font-size":l.font.size,"font-family":l.font.family,fill:l.font.color,"text-shadow":["-1px 0px","1px -1px","-1px 1px","1px 1px"].map(function(e,t){return" "+e+" 0 "+l.font.outlineColor}).join(",")};if(l.showLegend){O=t.select(".legend-group").attr({transform:"translate("+[g,l.margin.top]+")"}).style({display:"block"});var N=c.map(function(e,t){var n=wV.util.cloneJson(e);return n.symbol="DotPlot"===e.geometry?e.dotType||"circle":"LinePlot"!=e.geometry?"square":"line",n.visibleInLegend="undefined"===typeof e.visibleInLegend||e.visibleInLegend,n.color="LinePlot"===e.geometry?e.strokeColor:e.color,n});wV.Legend().config({data:c.map(function(e,t){return e.name||"Element"+t}),legendConfig:bV({},wV.Legend.defaultConfig().legendConfig,{container:O,elements:N,reverseOrder:l.legend.reverseOrder})})();var F=O.node().getBBox();g=Math.min(l.width-F.width-l.margin.left-l.margin.right,l.height-l.margin.top-l.margin.bottom)/2,g=Math.max(10,g),v=[l.margin.left+g,l.margin.top+g],r.range([0,g]),s.layout.radialAxis.domain=r.domain(),O.attr("transform","translate("+[v[0]+g,v[1]-g]+")")}else O=t.select(".legend-group").style({display:"none"});t.attr({width:l.width,height:l.height}).style({opacity:l.opacity}),z.attr("transform","translate("+v+")").style({cursor:"crosshair"});var j=[(l.width-(l.margin.left+l.margin.right+2*g+(F?F.width:0)))/2,(l.height-(l.margin.top+l.margin.bottom+2*g))/2];if(j[0]=Math.max(0,j[0]),j[1]=Math.max(0,j[1]),t.select(".outer-group").attr("transform","translate("+j+")"),l.title){var B=t.select("g.title-group text").style(D).text(l.title),U=B.node().getBBox();B.attr({x:v[0]-U.width/2,y:v[1]-g-20})}var V=t.select(".radial.axis-group");if(l.radialAxis.gridLinesVisible){var H=V.selectAll("circle.grid-circle").data(r.ticks(5));H.enter().append("circle").attr({class:"grid-circle"}).style(R),H.attr("r",r),H.exit().remove()}V.select("circle.outside-circle").attr({r:g}).style(R);var W=t.select("circle.background-circle").attr({r:g}).style({fill:l.backgroundColor,stroke:l.stroke});if(l.radialAxis.visible){var q=CC.svg.axis().scale(r).ticks(5).tickSize(5);V.call(q).attr({transform:"rotate("+l.radialAxis.orientation+")"}),V.selectAll(".domain").style(R),V.selectAll("g>text").text(function(e,t){return this.textContent+l.radialAxis.ticksSuffix}).style(D).style({"text-anchor":"start"}).attr({x:0,y:0,dx:0,dy:0,transform:function(e,t){return"horizontal"===l.radialAxis.tickOrientation?"rotate("+-l.radialAxis.orientation+") translate("+[0,D["font-size"]]+")":"translate("+[0,D["font-size"]]+")"}}),V.selectAll("g>line").style({stroke:"black"})}var G=t.select(".angular.axis-group").selectAll("g.angular-tick").data(P),Y=G.enter().append("g").classed("angular-tick",!0);G.attr({transform:function(e,t){return"rotate("+a(e,t)+")"}}).style({display:l.angularAxis.visible?"block":"none"}),G.exit().remove(),Y.append("line").classed("grid-line",!0).classed("major",function(e,t){return t%(l.minorTicks+1)==0}).classed("minor",function(e,t){return!(t%(l.minorTicks+1)==0)}).style(R),Y.selectAll(".minor").style({stroke:l.minorTickColor}),G.select("line.grid-line").attr({x1:l.tickLength?g-l.tickLength:0,x2:g}).style({display:l.angularAxis.gridLinesVisible?"block":"none"}),Y.append("text").classed("axis-text",!0).style(D);var X=G.select("text.axis-text").attr({x:g+l.labelOffset,dy:xV+"em",transform:function(e,t){var n=a(e,t),r=g+l.labelOffset,i=l.angularAxis.tickOrientation;return"horizontal"==i?"rotate("+-n+" "+r+" 0)":"radial"==i?n<270&&n>90?"rotate(180 "+r+" 0)":null:"rotate("+(n<=180&&n>0?-90:90)+" "+r+" 0)"}}).style({"text-anchor":"middle",display:l.angularAxis.labelsVisible?"block":"none"}).text(function(e,t){return t%(l.minorTicks+1)!=0?"":_?_[e]+l.angularAxis.ticksSuffix:e+l.angularAxis.ticksSuffix}).style(D);l.angularAxis.rewriteTicks&&X.text(function(e,t){return t%(l.minorTicks+1)!=0?"":l.angularAxis.rewriteTicks(this.textContent,t)});var Z=CC.max(z.selectAll(".angular-tick text")[0].map(function(e,t){return e.getCTM().e+e.getBBox().width}));O.attr({transform:"translate("+[g+Z,l.margin.top]+")"});var J=t.select("g.geometry-group").selectAll("g").size()>0,K=t.select("g.geometry-group").selectAll("g.geometry").data(c);if(K.enter().append("g").attr({class:function(e,t){return"geometry geometry"+t}}),K.exit().remove(),c[0]||J){var Q=[];c.forEach(function(e,t){var n={};n.radialScale=r,n.angularScale=i,n.container=K.filter(function(e,n){return n==t}),n.geometry=e.geometry,n.orientation=l.orientation,n.direction=l.direction,n.index=t,Q.push({data:e,geometryConfig:n})});var $=CC.nest().key(function(e,t){return"undefined"!=typeof e.data.groupId||"unstacked"}).entries(Q),ee=[];$.forEach(function(e,t){"unstacked"===e.key?ee=ee.concat(e.values.map(function(e,t){return[e]})):ee.push(e.values)}),ee.forEach(function(e,t){var n;n=Array.isArray(e)?e[0].geometryConfig.geometry:e.geometryConfig.geometry;var r=e.map(function(e,t){return bV(wV[n].defaultConfig(),e)});wV[n]().config(r)()})}var te,ne,re=t.select(".guides-group"),ie=t.select(".tooltips-group"),ae=wV.tooltipPanel().config({container:ie,fontSize:8})(),oe=wV.tooltipPanel().config({container:ie,fontSize:8})(),se=wV.tooltipPanel().config({container:ie,hasTick:!0})();if(!x){var le=re.select("line").attr({x1:0,y1:0,y2:0}).style({stroke:"grey","pointer-events":"none"});z.on("mousemove.angular-guide",function(e,t){var n=wV.util.getMousePos(W).angle;le.attr({x2:-g,transform:"rotate("+n+")"}).style({opacity:.5});var r=(n+180+360-l.orientation)%360;te=i.invert(r);var a=wV.util.convertToCartesian(g+12,n+180);ae.text(wV.util.round(te)).move([a[0]+v[0],a[1]+v[1]])}).on("mouseout.angular-guide",function(e,t){re.select("line").style({opacity:0})})}var ue=re.select("circle").style({stroke:"grey",fill:"none"});z.on("mousemove.radial-guide",function(e,t){var n=wV.util.getMousePos(W).radius;ue.attr({r:n}).style({opacity:.5}),ne=r.invert(wV.util.getMousePos(W).radius);var i=wV.util.convertToCartesian(n,l.radialAxis.orientation);oe.text(wV.util.round(ne)).move([i[0]+v[0],i[1]+v[1]])}).on("mouseout.radial-guide",function(e,t){ue.style({opacity:0}),se.hide(),ae.hide(),oe.hide()}),t.selectAll(".geometry-group .mark").on("mouseover.tooltip",function(e,n){var r=CC.select(this),i=this.style.fill,a="black",o=this.style.opacity||1;if(r.attr({"data-opacity":o}),i&&"none"!==i){r.attr({"data-fill":i}),a=CC.hsl(i).darker().toString(),r.style({fill:a,opacity:1});var s={t:wV.util.round(e[0]),r:wV.util.round(e[1])};x&&(s.t=_[e[0]]);var l="t: "+s.t+", r: "+s.r,u=this.getBoundingClientRect(),c=t.node().getBoundingClientRect(),d=[u.left+u.width/2-j[0]-c.left,u.top+u.height/2-j[1]-c.top];se.config({color:a}).text(l),se.move(d)}else i=this.style.stroke||"black",r.attr({"data-stroke":i}),a=CC.hsl(i).darker().toString(),r.style({stroke:a,opacity:1})}).on("mousemove.tooltip",function(e,t){if(0!=CC.event.which)return!1;CC.select(this).attr("data-fill")&&se.show()}).on("mouseout.tooltip",function(e,t){se.hide();var n=CC.select(this),r=n.attr("data-fill");r?n.style({fill:r,opacity:n.attr("data-opacity")}):n.style({stroke:n.attr("data-stroke"),opacity:n.attr("data-opacity")})})}),u}var t,n,r,i,a={data:[],layout:{}},o={},s={},l=CC.dispatch("hover"),u={};return u.render=function(t){return e(t),this},u.config=function(e){if(!arguments.length)return a;var t=wV.util.cloneJson(e);return t.data.forEach(function(e,t){a.data[t]||(a.data[t]={}),bV(a.data[t],wV.Axis.defaultConfig().data[0]),bV(a.data[t],e)}),bV(a.layout,wV.Axis.defaultConfig().layout),bV(a.layout,t.layout),this},u.getLiveConfig=function(){return s},u.getinputConfig=function(){return o},u.radialScale=function(e){return r},u.angularScale=function(e){return i},u.svg=function(){return t},CC.rebind(u,l,"on"),u},wV.Axis.defaultConfig=function(e,t){return{data:[{t:[1,2,3,4],r:[10,11,12,13],name:"Line1",geometry:"LinePlot",color:null,strokeDash:"solid",strokeColor:null,strokeSize:"1",visibleInLegend:!0,opacity:1}],layout:{defaultColorRange:CC.scale.category10().range(),title:null,height:450,width:500,margin:{top:40,right:40,bottom:40,left:40},font:{size:12,color:"gray",outlineColor:"white",family:"Tahoma, sans-serif"},direction:"clockwise",orientation:0,labelOffset:10,radialAxis:{domain:null,orientation:-45,ticksSuffix:"",visible:!0,gridLinesVisible:!0,tickOrientation:"horizontal",rewriteTicks:null},angularAxis:{domain:[0,360],ticksSuffix:"",visible:!0,gridLinesVisible:!0,labelsVisible:!0,tickOrientation:"horizontal",rewriteTicks:null,ticksCount:null,ticksStep:null},minorTicks:0,tickLength:null,tickColor:"silver",minorTickColor:"#eee",backgroundColor:"none",needsEndSpacing:null,showLegend:!0,legend:{reverseOrder:!1},opacity:1}}},wV.util={},wV.DATAEXTENT="dataExtent",wV.AREA="AreaChart",wV.LINE="LinePlot",wV.DOT="DotPlot",wV.BAR="BarChart",wV.util._override=function(e,t){for(var n in e)n in t&&(t[n]=e[n])},wV.util._extend=function(e,t){for(var n in e)t[n]=e[n]},wV.util._rndSnd=function(){return 2*Math.random()-1+(2*Math.random()-1)+(2*Math.random()-1)},wV.util.dataFromEquation2=function(e,t){var n=t||6;return CC.range(0,360+n,n).map(function(t,n){var r=t*Math.PI/180;return[t,e(r)]})},wV.util.dataFromEquation=function(e,t,n){var r=t||6,i=[],a=[];CC.range(0,360+r,r).forEach(function(t,n){var r=t*Math.PI/180,o=e(r);i.push(t),a.push(o)});var o={t:i,r:a};return n&&(o.name=n),o},wV.util.ensureArray=function(e,t){if("undefined"===typeof e)return null;var n=[].concat(e);return CC.range(t).map(function(e,t){return n[t]||n[0]})},wV.util.fillArrays=function(e,t,n){return t.forEach(function(t,r){e[t]=wV.util.ensureArray(e[t],n)}),e},wV.util.cloneJson=function(e){return JSON.parse(JSON.stringify(e))},wV.util.validateKeys=function(e,t){"string"===typeof t&&(t=t.split("."));var n=t.shift();return e[n]&&(!t.length||objHasKeys(e[n],t))},wV.util.sumArrays=function(e,t){return CC.zip(e,t).map(function(e,t){return CC.sum(e)})},wV.util.arrayLast=function(e){return e[e.length-1]},wV.util.arrayEqual=function(e,t){for(var n=Math.max(e.length,t.length,1);n-- >=0&&e[n]===t[n];);return-2===n},wV.util.flattenArray=function(e){for(var t=[];!wV.util.arrayEqual(t,e);)t=e,e=[].concat.apply([],e);return e},wV.util.deduplicate=function(e){return e.filter(function(e,t,n){return n.indexOf(e)==t})},wV.util.convertToCartesian=function(e,t){var n=t*Math.PI/180;return[e*Math.cos(n),e*Math.sin(n)]},wV.util.round=function(e,t){var n=t||2,r=Math.pow(10,n);return Math.round(e*r)/r},wV.util.getMousePos=function(e){var t=CC.mouse(e.node()),n=t[0],r=t[1],i={};return i.x=n,i.y=r,i.pos=t,i.angle=180*(Math.atan2(r,n)+Math.PI)/Math.PI,i.radius=Math.sqrt(n*n+r*r),i},wV.util.duplicatesCount=function(e){for(var t,n={},r={},i=0,a=e.length;i<a;i++)t=e[i],t in n?(n[t]++,r[t]=n[t]):n[t]=1;return r},wV.util.duplicates=function(e){return Object.keys(wV.util.duplicatesCount(e))},wV.util.translator=function(e,t,n,r){if(r){var i=n.slice();n=t,t=i}var a=t.reduce(function(e,t){if("undefined"!=typeof e)return e[t]},e);"undefined"!==typeof a&&(t.reduce(function(e,n,r){if("undefined"!=typeof e)return r===t.length-1&&delete e[n],e[n]},e),n.reduce(function(e,t,r){return"undefined"===typeof e[t]&&(e[t]={}),r===n.length-1&&(e[t]=a),e[t]},e))},wV.PolyChart=function(){function e(){var e=t[0].geometryConfig,n=e.container;"string"==typeof n&&(n=CC.select(n)),n.datum(t).each(function(t,n){function i(t,n){return{r:e.radialScale(t[1]),t:(e.angularScale(t[0])+e.orientation)*Math.PI/180}}function a(e){return{x:e.r*Math.cos(e.t),y:e.r*Math.sin(e.t)}}var o=!!t[0].data.yStack,s=t.map(function(e,t){return o?CC.zip(e.data.t[0],e.data.r[0],e.data.yStack[0]):CC.zip(e.data.t[0],e.data.r[0])}),l=e.angularScale,u=e.radialScale.domain()[0],c={};c.bar=function(n,r,i){var a=t[i].data,o=e.radialScale(n[1])-e.radialScale(0),s=e.radialScale(n[2]||0),u=a.barWidth;CC.select(this).attr({class:"mark bar",d:"M"+[[o+s,-u/2],[o+s,u/2],[s,u/2],[s,-u/2]].join("L")+"Z",transform:function(t,n){return"rotate("+(e.orientation+l(t[0]))+")"}})},c.dot=function(e,n,r){var o=e[2]?[e[0],e[1]+e[2]]:e,s=CC.svg.symbol().size(t[r].data.dotSize).type(t[r].data.dotType)(e,n);CC.select(this).attr({class:"mark dot",d:s,transform:function(e,t){var n=a(i(o));return"translate("+[n.x,n.y]+")"}})};var d=CC.svg.line.radial().interpolate(t[0].data.lineInterpolation).radius(function(t){return e.radialScale(t[1])}).angle(function(t){return e.angularScale(t[0])*Math.PI/180});c.line=function(n,r,i){var a=n[2]?s[i].map(function(e,t){return[e[0],e[1]+e[2]]}):s[i];if(CC.select(this).each(c.dot).style({opacity:function(e,n){return+t[i].data.dotVisible},fill:m.stroke(n,r,i)}).attr({class:"mark dot"}),!(r>0)){var o=CC.select(this.parentNode).selectAll("path.line").data([0]);o.enter().insert("path"),o.attr({class:"line",d:d(a),transform:function(t,n){return"rotate("+(e.orientation+90)+")"},"pointer-events":"none"}).style({fill:function(e,t){return m.fill(n,r,i)},"fill-opacity":0,stroke:function(e,t){return m.stroke(n,r,i)},"stroke-width":function(e,t){return m["stroke-width"](n,r,i)},"stroke-dasharray":function(e,t){return m["stroke-dasharray"](n,r,i)},opacity:function(e,t){return m.opacity(n,r,i)},display:function(e,t){return m.display(n,r,i)}})}};var f=e.angularScale.range(),h=Math.abs(f[1]-f[0])/s[0].length*Math.PI/180,p=CC.svg.arc().startAngle(function(e){return-h/2}).endAngle(function(e){return h/2}).innerRadius(function(t){return e.radialScale(u+(t[2]||0))}).outerRadius(function(t){return e.radialScale(u+(t[2]||0))+e.radialScale(t[1])});c.arc=function(t,n,r){CC.select(this).attr({class:"mark arc",d:p,transform:function(t,n){return"rotate("+(e.orientation+l(t[0])+90)+")"}})};var m={fill:function(e,n,r){return t[r].data.color},stroke:function(e,n,r){return t[r].data.strokeColor},"stroke-width":function(e,n,r){return t[r].data.strokeSize+"px"},"stroke-dasharray":function(e,n,i){return r[t[i].data.strokeDash]},opacity:function(e,n,r){return t[r].data.opacity},display:function(e,n,r){return"undefined"===typeof t[r].data.visible||t[r].data.visible?"block":"none"}},g=CC.select(this).selectAll("g.layer").data(s);g.enter().append("g").attr({class:"layer"});var y=g.selectAll("path.mark").data(function(e,t){return e});y.enter().append("path").attr({class:"mark"}),y.style(m).each(c[e.geometryType]),y.exit().remove(),g.exit().remove()})}var t=[wV.PolyChart.defaultConfig()],n=CC.dispatch("hover"),r={solid:"none",dash:[5,2],dot:[2,5]};return e.config=function(e){return arguments.length?(e.forEach(function(e,n){t[n]||(t[n]={}),bV(t[n],wV.PolyChart.defaultConfig()),bV(t[n],e)}),this):t},e.getColorScale=function(){},CC.rebind(e,n,"on"),e},wV.PolyChart.defaultConfig=function(){return{data:{name:"geom1",t:[[1,2,3,4]],r:[[1,2,3,4]],dotType:"circle",dotSize:64,dotVisible:!1,barWidth:20,color:"#ffa500",strokeSize:1,strokeColor:"silver",strokeDash:"solid",opacity:1,index:0,visible:!0,visibleInLegend:!0},geometryConfig:{geometry:"LinePlot",geometryType:"arc",direction:"clockwise",orientation:0,container:"body",radialScale:null,angularScale:null,colorScale:CC.scale.category20()}}},wV.BarChart=function(){return wV.PolyChart()},wV.BarChart.defaultConfig=function(){return{geometryConfig:{geometryType:"bar"}}},wV.AreaChart=function(){return wV.PolyChart()},wV.AreaChart.defaultConfig=function(){return{geometryConfig:{geometryType:"arc"}}},wV.DotPlot=function(){return wV.PolyChart()},wV.DotPlot.defaultConfig=function(){return{geometryConfig:{geometryType:"dot",dotType:"circle"}}},wV.LinePlot=function(){return wV.PolyChart()},wV.LinePlot.defaultConfig=function(){return{geometryConfig:{geometryType:"line"}}},wV.Legend=function(){function e(){var n=t.legendConfig,r=t.data.map(function(e,t){return[].concat(e).map(function(e,r){var i=bV({},n.elements[t]);return i.name=e,i.color=[].concat(n.elements[t].color)[r],i})}),i=CC.merge(r);i=i.filter(function(e,t){return n.elements[t]&&(n.elements[t].visibleInLegend||"undefined"===typeof n.elements[t].visibleInLegend)}),n.reverseOrder&&(i=i.reverse());var a=n.container;("string"==typeof a||a.nodeName)&&(a=CC.select(a));var o=i.map(function(e,t){return e.color}),s=n.fontSize,l=null==n.isContinuous?"number"===typeof i[0]:n.isContinuous,u=l?n.height:s*i.length,c=a.classed("legend-group",!0),d=c.selectAll("svg").data([0]),f=d.enter().append("svg").attr({width:300,height:u+s,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"});f.append("g").classed("legend-axis",!0),f.append("g").classed("legend-marks",!0);var h=CC.range(i.length),p=CC.scale[l?"linear":"ordinal"]().domain(h).range(o),m=CC.scale[l?"linear":"ordinal"]().domain(h)[l?"range":"rangePoints"]([0,u]),g=function(e,t){var n=3*t;return"line"===e?"M"+[[-t/2,-t/12],[t/2,-t/12],[t/2,t/12],[-t/2,t/12]]+"Z":-1!=CC.svg.symbolTypes.indexOf(e)?CC.svg.symbol().type(e).size(n)():CC.svg.symbol().type("square").size(n)()};if(l){var y=d.select(".legend-marks").append("defs").append("linearGradient").attr({id:"grad1",x1:"0%",y1:"0%",x2:"0%",y2:"100%"}).selectAll("stop").data(o);y.enter().append("stop"),y.attr({offset:function(e,t){return t/(o.length-1)*100+"%"}}).style({"stop-color":function(e,t){return e}}),d.append("rect").classed("legend-mark",!0).attr({height:n.height,width:n.colorBandWidth,fill:"url(#grad1)"})}else{var v=d.select(".legend-marks").selectAll("path.legend-mark").data(i);v.enter().append("path").classed("legend-mark",!0),v.attr({transform:function(e,t){return"translate("+[s/2,m(t)+s/2]+")"},d:function(e,t){var n=e.symbol;return g(n,s)},fill:function(e,t){return p(t)}}),v.exit().remove()}var _=CC.svg.axis().scale(m).orient("right"),b=d.select("g.legend-axis").attr({transform:"translate("+[l?n.colorBandWidth:s,s/2]+")"}).call(_);return b.selectAll(".domain").style({fill:"none",stroke:"none"}),b.selectAll("line").style({fill:"none",stroke:l?n.textColor:"none"}),b.selectAll("text").style({fill:n.textColor,"font-size":n.fontSize}).text(function(e,t){return i[t].name}),e}var t=wV.Legend.defaultConfig(),n=CC.dispatch("hover");return e.config=function(e){return arguments.length?(bV(t,e),this):t},CC.rebind(e,n,"on"),e},wV.Legend.defaultConfig=function(e,t){return{data:["a","b","c"],legendConfig:{elements:[{symbol:"line",color:"red"},{symbol:"square",color:"yellow"},{symbol:"diamond",color:"limegreen"}],height:150,colorBandWidth:30,fontSize:12,container:"body",isContinuous:null,textColor:"grey",reverseOrder:!1}}},wV.tooltipPanel=function(){var e,t,n,r={container:null,hasTick:!1,fontSize:12,color:"white",padding:5},i="tooltip-"+wV.tooltipPanel.uid++,a=function(){e=r.container.selectAll("g."+i).data([0]);var o=e.enter().append("g").classed(i,!0).style({"pointer-events":"none",display:"none"});return n=o.append("path").style({fill:"white","fill-opacity":.9}).attr({d:"M0 0"}),t=o.append("text").attr({dx:r.padding+10,dy:.3*+r.fontSize}),a};return a.text=function(i){var o=CC.hsl(r.color).l,s=o>=.5?"#aaa":"white",l=o>=.5?"black":"white",u=i||"";t.style({fill:l,"font-size":r.fontSize+"px"}).text(u);var c=r.padding,d=t.node().getBBox(),f={fill:r.color,stroke:s,"stroke-width":"2px"},h=d.width+2*c+10,p=d.height+2*c;return n.attr({d:"M"+[[10,-p/2],[10,-p/4],[r.hasTick?0:10,0],[10,p/4],[10,p/2],[h,p/2],[h,-p/2]].join("L")+"Z"}).style(f),e.attr({transform:"translate("+[10,-p/2+2*c]+")"}),e.style({display:"block"}),a},a.move=function(t){if(e)return e.attr({transform:"translate("+[t[0],t[1]]+")"}).style({display:"block"}),a},a.hide=function(){if(e)return e.style({display:"none"}),a},a.show=function(){if(e)return e.style({display:"block"}),a},a.config=function(e){return bV(r,e),a},a},wV.tooltipPanel.uid=1,wV.adapter={},wV.adapter.plotly=function(){var e={};return e.convert=function(e,t){var n={};if(e.data&&(n.data=e.data.map(function(e,n){var r=bV({},e);return[[r,["marker","color"],["color"]],[r,["marker","opacity"],["opacity"]],[r,["marker","line","color"],["strokeColor"]],[r,["marker","line","dash"],["strokeDash"]],[r,["marker","line","width"],["strokeSize"]],[r,["marker","symbol"],["dotType"]],[r,["marker","size"],["dotSize"]],[r,["marker","barWidth"],["barWidth"]],[r,["line","interpolation"],["lineInterpolation"]],[r,["showlegend"],["visibleInLegend"]]].forEach(function(e,n){wV.util.translator.apply(null,e.concat(t))}),t||delete r.marker,t&&delete r.groupId,t?("LinePlot"===r.geometry?(r.type="scatter",!0===r.dotVisible?(delete r.dotVisible,r.mode="lines+markers"):r.mode="lines"):"DotPlot"===r.geometry?(r.type="scatter",r.mode="markers"):"AreaChart"===r.geometry?r.type="area":"BarChart"===r.geometry&&(r.type="bar"),delete r.geometry):("scatter"===r.type?"lines"===r.mode?r.geometry="LinePlot":"markers"===r.mode?r.geometry="DotPlot":"lines+markers"===r.mode&&(r.geometry="LinePlot",r.dotVisible=!0):"area"===r.type?r.geometry="AreaChart":"bar"===r.type&&(r.geometry="BarChart"),delete r.mode,delete r.type),r}),!t&&e.layout&&"stack"===e.layout.barmode)){var r=wV.util.duplicates(n.data.map(function(e,t){return e.geometry}));n.data.forEach(function(e,t){var i=r.indexOf(e.geometry);-1!=i&&(n.data[t].groupId=i)})}if(e.layout){var i=bV({},e.layout);if([[i,["plot_bgcolor"],["backgroundColor"]],[i,["showlegend"],["showLegend"]],[i,["radialaxis"],["radialAxis"]],[i,["angularaxis"],["angularAxis"]],[i.angularaxis,["showline"],["gridLinesVisible"]],[i.angularaxis,["showticklabels"],["labelsVisible"]],[i.angularaxis,["nticks"],["ticksCount"]],[i.angularaxis,["tickorientation"],["tickOrientation"]],[i.angularaxis,["ticksuffix"],["ticksSuffix"]],[i.angularaxis,["range"],["domain"]],[i.angularaxis,["endpadding"],["endPadding"]],[i.radialaxis,["showline"],["gridLinesVisible"]],[i.radialaxis,["tickorientation"],["tickOrientation"]],[i.radialaxis,["ticksuffix"],["ticksSuffix"]],[i.radialaxis,["range"],["domain"]],[i.angularAxis,["showline"],["gridLinesVisible"]],[i.angularAxis,["showticklabels"],["labelsVisible"]],[i.angularAxis,["nticks"],["ticksCount"]],[i.angularAxis,["tickorientation"],["tickOrientation"]],[i.angularAxis,["ticksuffix"],["ticksSuffix"]],[i.angularAxis,["range"],["domain"]],[i.angularAxis,["endpadding"],["endPadding"]],[i.radialAxis,["showline"],["gridLinesVisible"]],[i.radialAxis,["tickorientation"],["tickOrientation"]],[i.radialAxis,["ticksuffix"],["ticksSuffix"]],[i.radialAxis,["range"],["domain"]],[i.font,["outlinecolor"],["outlineColor"]],[i.legend,["traceorder"],["reverseOrder"]],[i,["labeloffset"],["labelOffset"]],[i,["defaultcolorrange"],["defaultColorRange"]]].forEach(function(e,n){wV.util.translator.apply(null,e.concat(t))}),t?("undefined"!==typeof i.tickLength&&(i.angularaxis.ticklen=i.tickLength,delete i.tickLength),i.tickColor&&(i.angularaxis.tickcolor=i.tickColor,delete i.tickColor)):(i.angularAxis&&"undefined"!==typeof i.angularAxis.ticklen&&(i.tickLength=i.angularAxis.ticklen),i.angularAxis&&"undefined"!==typeof i.angularAxis.tickcolor&&(i.tickColor=i.angularAxis.tickcolor)),i.legend&&"boolean"!=typeof i.legend.reverseOrder&&(i.legend.reverseOrder="normal"!=i.legend.reverseOrder),i.legend&&"boolean"==typeof i.legend.traceorder&&(i.legend.traceorder=i.legend.traceorder?"reversed":"normal",delete i.legend.reverseOrder),i.margin&&"undefined"!=typeof i.margin.t){var a=["t","r","b","l","pad"],o=["top","right","bottom","left","pad"],s={};CC.entries(i.margin).forEach(function(e,t){s[o[a.indexOf(e.key)]]=e.value}),i.margin=s}t&&(delete i.needsEndSpacing,delete i.minorTickColor,delete i.minorTicks,delete i.angularaxis.ticksCount,delete i.angularaxis.ticksCount,delete i.angularaxis.ticksStep,delete i.angularaxis.rewriteTicks,delete i.angularaxis.nticks,delete i.radialaxis.ticksCount,delete i.radialaxis.ticksCount,delete i.radialaxis.ticksStep,delete i.radialaxis.rewriteTicks,delete i.radialaxis.nticks),n.layout=i}return n},e};var kV=function(){function e(e,t){return e?(i=!0,e[t](),i=!1,this):this}var t,n=[],r=-1,i=!1;return{add:function(e){return i?this:(n.splice(r+1,n.length-r),n.push(e),r=n.length-1,this)},setCallback:function(e){t=e},undo:function(){var i=n[r];return i?(e(i,"undo"),r-=1,t&&t(i.undo),this):this},redo:function(){var i=n[r+1];return i?(e(i,"redo"),r+=1,t&&t(i.redo),this):this},clear:function(){n=[],r=-1},hasUndo:function(){return-1!==r},hasRedo:function(){return r<n.length-1},getCommands:function(){return n},getPreviousCommand:function(){return n[r-1]},getIndex:function(){return r}}},TV={},MV=uE.extendDeepAll,AV=TV={};AV.framework=function(e){function t(t,r){return r&&(o=r),CC.select(CC.select(o).node().parentNode).selectAll(".svg-container>*:not(.chart-root)").remove(),n=n?MV(n,t):t,i||(i=_V.Axis()),a=_V.adapter.plotly().convert(n),i.config(a).render(o),e.data=n.data,e.layout=n.layout,AV.fillLayout(e),n}var n,r,i,a,o,s=new kV;return t.isPolar=!0,t.svg=function(){return i.svg()},t.getConfig=function(){return n},t.getLiveConfig=function(){return _V.adapter.plotly().convert(i.getLiveConfig(),!0)},t.getLiveScales=function(){return{t:i.angularScale(),r:i.radialScale()}},t.setUndoPoint=function(){var e=this,t=_V.util.cloneJson(n);!function(t,n){s.add({undo:function(){n&&e(n)},redo:function(){e(t)}})}(t,r),r=_V.util.cloneJson(t)},t.undo=function(){s.undo()},t.redo=function(){s.redo()},t},AV.fillLayout=function(e){var t=CC.select(e).selectAll(".plot-container"),n=t.selectAll(".svg-container"),r=e.framework&&e.framework.svg&&e.framework.svg(),i={width:800,height:600,paper_bgcolor:jE.background,_container:t,_paperdiv:n,_paper:r};e._fullLayout=MV(i,e.layout)};var CV={};(CV=_V).manager=TV;var SV={},EV=pV.enforce,PV=pV.clean,IV=bI.doAutoRange,LV=0;SV.plot=function(e,t,n,r){function i(){if(h)return SV.addFrames(e,h)}function a(){for(var t=g._basePlotModules,n=0;n<t.length;n++)t[n].drawFramework&&t[n].drawFramework(e);return!g._glcanvas&&g._has("gl")&&(g._glcanvas=g._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(e){return e.key}),g._glcanvas.enter().append("canvas").attr("class",function(e){return"gl-canvas gl-canvas-"+e.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"visible","pointer-events":"none"})),g._glcanvas&&g._glcanvas.attr("width",g.width).attr("height",g.height),uE.syncOrAsync([hV.layoutStyles],e)}function o(){var t,n,r,i=e.calcdata;for(rS.getComponentMethod("legend","draw")(e),rS.getComponentMethod("rangeselector","draw")(e),rS.getComponentMethod("sliders","draw")(e),rS.getComponentMethod("updatemenus","draw")(e),t=0;t<i.length;t++)n=i[t],r=n[0].trace,!0===r.visible&&r._module.colorbar?r._module.colorbar(e,n):lI.autoMargin(e,"cb"+r.uid);return lI.doAutoMargin(e),lI.previousPromises(e)}function s(){if(JSON.stringify(g._size)!==b)return uE.syncOrAsync([o,hV.layoutStyles],e)}function l(){if(!v)return void u();var t,n,r,i=g._subplots.cartesian,a=g._modules,o=[];for(r=0;r<a.length;r++)uE.pushUnique(o,a[r].setPositions);if(o.length)for(n=0;n<i.length;n++)for(t=g._plots[i[n]],r=0;r<o.length;r++)o[r](e,t);return rS.getComponentMethod("errorbars","calc")(e),uE.syncOrAsync([rS.getComponentMethod("shapes","calcAutorange"),rS.getComponentMethod("annotations","calcAutorange"),u,rS.getComponentMethod("rangeslider","calcAutorange")],e)}function u(){if(!e._transitioning){for(var t=PI.list(e,"",!0),n=0;n<t.length;n++){var r=t[n];PV(e,r),IV(r)}EV(e),m&&PI.saveRangeInitial(e)}}function c(){return PI.doTicks(e,"redraw")}function d(){var t,n=e.calcdata,r=g._infolayer.selectAll("g.rangeslider-container");for(t=0;t<n.length;t++){var i=n[t][0].trace,a=!0===i.visible,o=i.uid;if(!a||!rS.traceIs(i,"2dMap")){var s=".hm"+o+",.contour"+o+",#clip"+o;g._paper.selectAll(s).remove(),r.selectAll(s).remove()}a&&i._module.colorbar||g._infolayer.selectAll(".cb"+o).remove()}var l=g._basePlotModules;for(t=0;t<l.length;t++)l[t].plot(e);var u=g._paper.selectAll(".layer-subplot");return g._shapeSubplotLayers=u.selectAll(".shapelayer"),lI.style(e),rS.getComponentMethod("shapes","draw")(e),rS.getComponentMethod("annotations","draw")(e),lI.addLinks(e),g._replotting=!1,lI.previousPromises(e)}function f(){rS.getComponentMethod("shapes","draw")(e),rS.getComponentMethod("images","draw")(e),rS.getComponentMethod("annotations","draw")(e),rS.getComponentMethod("legend","draw")(e),rS.getComponentMethod("rangeslider","draw")(e),rS.getComponentMethod("rangeselector","draw")(e),rS.getComponentMethod("sliders","draw")(e),rS.getComponentMethod("updatemenus","draw")(e)}var h;if(e=uE.getGraphDiv(e),JL.init(e),uE.isPlainObject(t)){var p=t;t=p.data,n=p.layout,r=p.config,h=p.frames}if(!1===JL.triggerHandler(e,"plotly_beforeplot",[t,n,r]))return Promise.reject();t||n||uE.isPlotDiv(e)||uE.warn("Calling Plotly.plot as if redrawing but this container doesn't yet have a plot.",e),Pl(e,r),n||(n={}),CC.select(e).classed("js-plotly-plot",!0),PP.makeTester(),Array.isArray(e._promises)||(e._promises=[]);var m=0===(e.data||[]).length&&Array.isArray(t);if(Array.isArray(t)&&(BU.cleanData(t,e.data),m?e.data=t:e.data.push.apply(e.data,t),e.empty=!1),e.layout&&!m||(e.layout=BU.cleanLayout(n)),e._dragging&&!e._transitioning)return e._replotPending=!0,Promise.reject();e._replotPending=!1,lI.supplyDefaults(e);var g=e._fullLayout,y=g._has("cartesian");if(!g._has("polar")&&t&&t[0]&&t[0].r)return uE.log("Legacy polar charts are deprecated!"),Il(e,t,n);g._replotting=!0,m&&Zl(e),e.framework!==Zl&&(e.framework=Zl,Zl(e)),PP.initGradients(e),m&&PI.saveShowSpikeInitial(e);var v=!e.calcdata||e.calcdata.length!==(e._fullData||[]).length;v&&lI.doCalcdata(e);for(var _=0;_<e.calcdata.length;_++)e.calcdata[_][0].trace=e._fullData[_];var b=JSON.stringify(g._size),x=[lI.previousPromises,i,a,o,s];y&&x.push(l),x.push(hV.layoutStyles),y&&x.push(c),x.push(d,f,fV,lI.rehover,lI.previousPromises);var w=uE.syncOrAsync(x,e);return w&&w.then||(w=Promise.resolve()),w.then(function(){return e.emit("plotly_afterplot"),e})},SV.setPlotConfig=function(e){return uE.extendFlat(GC,e)},SV.redraw=function(e){if(e=uE.getGraphDiv(e),!uE.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);return BU.cleanData(e.data,e.data),BU.cleanLayout(e.layout),e.calcdata=void 0,SV.plot(e).then(function(){return e.emit("plotly_redraw"),e})},SV.newPlot=function(e,t,n,r){return e=uE.getGraphDiv(e),lI.cleanPlot([],{},e._fullData||{},e._fullLayout||{}),lI.purge(e),SV.plot(e,t,n,r)},SV.extendTraces=function e(t,n,r,i){function a(e,t,n){var r,i;if(uE.isTypedArray(e))if(n<0){var a=new e.constructor(0),o=jl(e,t);n<0?(r=o,i=a):(r=a,i=o)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var s=t.length-n;r.set(t.subarray(s)),i.set(e),i.set(t.subarray(0,s),e.length)}else{var l=n-t.length,u=e.length-l;r.set(e.subarray(u)),r.set(t,l),i.set(e.subarray(0,u))}else r=e.concat(t),i=n>=0&&n<r.length?r.splice(0,r.length-n):[];return[r,i]}t=uE.getGraphDiv(t);var o=Fl(t,n,r,i,a),s=SV.redraw(t),l=[t,o.update,r,o.maxPoints];return DU.add(t,SV.prependTraces,l,e,arguments),s},SV.prependTraces=function e(t,n,r,i){function a(e,t,n){var r,i;if(uE.isTypedArray(e))if(n<=0){var a=new e.constructor(0),o=jl(t,e);n<0?(r=o,i=a):(r=a,i=o)}else if(r=new e.constructor(n),i=new e.constructor(e.length+t.length-n),n===t.length)r.set(t),i.set(e);else if(n<t.length){var s=t.length-n;r.set(t.subarray(0,s)),i.set(t.subarray(s)),i.set(e,s)}else{var l=n-t.length;r.set(t),r.set(e.subarray(0,l),t.length),i.set(e.subarray(l))}else r=t.concat(e),i=n>=0&&n<r.length?r.splice(n,r.length):[];return[r,i]}t=uE.getGraphDiv(t);var o=Fl(t,n,r,i,a),s=SV.redraw(t),l=[t,o.update,r,o.maxPoints];return DU.add(t,SV.extendTraces,l,e,arguments),s},SV.addTraces=function e(t,n,r){t=uE.getGraphDiv(t);var i,a,o=[],s=SV.deleteTraces,l=e,u=[t,o],c=[t,n];for(Rl(t,n,r),Array.isArray(n)||(n=[n]),n=n.map(function(e){return uE.extendFlat({},e)}),BU.cleanData(n,t.data),i=0;i<n.length;i++)t.data.push(n[i]);for(i=0;i<n.length;i++)o.push(-n.length+i);if("undefined"===typeof r)return a=SV.redraw(t),DU.add(t,s,u,l,c),a;Array.isArray(r)||(r=[r]);try{zl(t,o,r)}catch(e){throw t.data.splice(t.data.length-n.length,n.length),e}return DU.startSequence(t),DU.add(t,s,u,l,c),a=SV.moveTraces(t,o,r),DU.stopSequence(t),a},SV.deleteTraces=function e(t,n){t=uE.getGraphDiv(t);var r,i,a=[],o=SV.addTraces,s=e,l=[t,a,n],u=[t,n];if("undefined"===typeof n)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(n)||(n=[n]),Ol(t,n,"indices"),n=Ll(n,t.data.length-1),n.sort(uE.sorterDes),r=0;r<n.length;r+=1)i=t.data.splice(n[r],1)[0],a.push(i);var c=SV.redraw(t);return DU.add(t,o,l,s,u),c},SV.moveTraces=function e(t,n,r){t=uE.getGraphDiv(t);var i,a=[],o=[],s=e,l=e,u=[t,r,n],c=[t,n,r];if(zl(t,n,r),n=Array.isArray(n)?n:[n],"undefined"===typeof r)for(r=[],i=0;i<n.length;i++)r.push(-n.length+i);for(r=Array.isArray(r)?r:[r],n=Ll(n,t.data.length-1),r=Ll(r,t.data.length-1),i=0;i<t.data.length;i++)-1===n.indexOf(i)&&a.push(t.data[i]);for(i=0;i<n.length;i++)o.push({newIndex:r[i],trace:t.data[n[i]]});for(o.sort(function(e,t){return e.newIndex-t.newIndex}),i=0;i<o.length;i+=1)a.splice(o[i].newIndex,0,o[i].trace);t.data=a;var d=SV.redraw(t);return DU.add(t,s,u,l,c),d},SV.restyle=function e(t,n,r,i){t=uE.getGraphDiv(t),BU.clearPromiseQueue(t);var a={};if("string"===typeof n)a[n]=r;else{if(!uE.isPlainObject(n))return uE.warn("Restyle fail.",n,r,i),Promise.reject();a=uE.extendFlat({},n),void 0===i&&(i=r)}Object.keys(a).length&&(t.changed=!0);var o=BU.coerceTraceIndices(t,i),s=Ul(t,a,o),l=s.flags;l.clearCalc&&(t.calcdata=void 0),l.clearAxisTypes&&BU.clearAxisTypes(t,o,{});var u=[];l.fullReplot?u.push(SV.plot):(u.push(lI.previousPromises),lI.supplyDefaults(t),l.style&&u.push(hV.doTraceStyle),l.colorbars&&u.push(hV.doColorBars)),u.push(lI.rehover),DU.add(t,e,[t,s.undoit,s.traces],e,[t,s.redoit,s.traces]);var c=uE.syncOrAsync(u,t);return c&&c.then||(c=Promise.resolve()),c.then(function(){return t.emit("plotly_restyle",s.eventData),t})},SV.relayout=function e(t,n,r){if(t=uE.getGraphDiv(t),BU.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);var i={};if("string"===typeof n)i[n]=r;else{if(!uE.isPlainObject(n))return uE.warn("Relayout fail.",n,r),Promise.reject();i=uE.extendFlat({},n)}Object.keys(i).length&&(t.changed=!0);var a=Vl(t,i),o=a.flags;o.calc&&(t.calcdata=void 0),o.margins&&BU.clearAxisAutomargins(t);var s=[lI.previousPromises];o.layoutReplot?s.push(hV.layoutReplot):Object.keys(i).length&&(lI.supplyDefaults(t),o.legend&&s.push(hV.doLegend),o.layoutstyle&&s.push(hV.layoutStyles),o.ticks&&s.push(hV.doTicksRelayout),o.modebar&&s.push(hV.doModeBar),o.camera&&s.push(hV.doCamera)),s.push(lI.rehover),DU.add(t,e,[t,a.undoit],e,[t,a.redoit]);var l=uE.syncOrAsync(s,t);return l&&l.then||(l=Promise.resolve(t)),l.then(function(){return t.emit("plotly_relayout",a.eventData),t})},SV.update=function e(t,n,r,i){if(t=uE.getGraphDiv(t),BU.clearPromiseQueue(t),t.framework&&t.framework.isPolar)return Promise.resolve(t);uE.isPlainObject(n)||(n={}),uE.isPlainObject(r)||(r={}),Object.keys(n).length&&(t.changed=!0),Object.keys(r).length&&(t.changed=!0);var a=BU.coerceTraceIndices(t,i),o=Ul(t,uE.extendFlat({},n),a),s=o.flags,l=Vl(t,uE.extendFlat({},r)),u=l.flags;(s.clearCalc||u.calc)&&(t.calcdata=void 0),s.clearAxisTypes&&BU.clearAxisTypes(t,a,r),u.margins&&BU.clearAxisAutomargins(t);var c=[];if(s.fullReplot&&u.layoutReplot){var d=t.data,f=t.layout;t.data=void 0,t.layout=void 0,c.push(function(){return SV.plot(t,d,f)})}else s.fullReplot?c.push(SV.plot):u.layoutReplot?c.push(hV.layoutReplot):(c.push(lI.previousPromises),lI.supplyDefaults(t),s.style&&c.push(hV.doTraceStyle),s.colorbars&&c.push(hV.doColorBars),u.legend&&c.push(hV.doLegend),u.layoutstyle&&c.push(hV.layoutStyles),u.ticks&&c.push(hV.doTicksRelayout),u.modebar&&c.push(hV.doModeBar),u.camera&&c.push(hV.doCamera));c.push(lI.rehover),DU.add(t,e,[t,o.undoit,l.undoit,o.traces],e,[t,o.redoit,l.redoit,o.traces]);var h=uE.syncOrAsync(c,t);return h&&h.then||(h=Promise.resolve(t)),h.then(function(){return t.emit("plotly_update",{data:o.eventData,layout:l.eventData}),t})},SV.react=function(e,t,n,r){function i(){return SV.addFrames(e,a)}var a,o;e=uE.getGraphDiv(e);var s=e._fullData,l=e._fullLayout;if(uE.isPlotDiv(e)&&s&&l){if(uE.isPlainObject(t)){var u=t;t=u.data,n=u.layout,r=u.config,a=u.frames}var c=!1;if(r){var d=uE.extendDeep({},e._context);e._context=void 0,Pl(e,r),c=Xl(d,e._context)}e.data=t||[],BU.cleanData(e.data,[]),e.layout=n||{},BU.cleanLayout(e.layout),lI.supplyDefaults(e);var f=e._fullData,h=e._fullLayout,p=void 0===h.datarevision,m=ql(e,s,f,p),g=Gl(e,l,h,p);Hl(e)&&(g.layoutReplot=!0),(m.calc||g.calc)&&(e.calcdata=void 0),g.margins&&BU.clearAxisAutomargins(e);var y=[];if(a&&(e._transitionData={},lI.createTransitionData(e),y.push(i)),m.fullReplot||g.layoutReplot||c)e._fullLayout._skipDefaults=!0,y.push(SV.plot);else{for(var v in g.arrays){var _=g.arrays[v];if(_.length){var b=rS.getComponentMethod(v,"drawOne");if(b!==uE.noop)for(var x=0;x<_.length;x++)b(e,_[x]);else{var w=rS.getComponentMethod(v,"draw");if(w===uE.noop)throw new Error("cannot draw components: "+v);w(e)}}}y.push(lI.previousPromises),m.style&&y.push(hV.doTraceStyle),m.colorbars&&y.push(hV.doColorBars),g.legend&&y.push(hV.doLegend),g.layoutstyle&&y.push(hV.layoutStyles),g.ticks&&y.push(hV.doTicksRelayout),g.modebar&&y.push(hV.doModeBar),g.camera&&y.push(hV.doCamera)}y.push(lI.rehover),o=uE.syncOrAsync(y,e),o&&o.then||(o=Promise.resolve(e))}else o=SV.newPlot(e,t,n,r);return o.then(function(){return e.emit("plotly_react",{data:t,layout:n}),e})},SV.animate=function(e,t,n){function r(e){return Array.isArray(s)?e>=s.length?s[0]:s[e]:s}function i(e){return Array.isArray(l)?e>=l.length?l[0]:l[e]:l}function a(e,t){var n=0;return function(){if(e&&++n===t)return e()}}if(e=uE.getGraphDiv(e),!uE.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before animating it. For more details, see https://plot.ly/javascript/animations/");var o=e._transitionData;o._frameQueue||(o._frameQueue=[]),n=lI.supplyAnimationDefaults(n);var s=n.transition,l=n.frame;return void 0===o._frameWaitingCnt&&(o._frameWaitingCnt=0),new Promise(function(l,u){function c(){e.emit("plotly_animated"),window.cancelAnimationFrame(o._animationRaf),o._animationRaf=null}function d(){o._currentFrame&&o._currentFrame.onComplete&&o._currentFrame.onComplete();var t=o._currentFrame=o._frameQueue.shift();if(t){var n=t.name?t.name.toString():null;e._fullLayout._currentFrame=n,o._lastFrameAt=Date.now(),o._timeToNext=t.frameOpts.duration,lI.transition(e,t.frame.data,t.frame.layout,BU.coerceTraceIndices(e,t.frame.traces),t.frameOpts,t.transitionOpts).then(function(){t.onComplete&&t.onComplete()}),e.emit("plotly_animatingframe",{name:n,frame:t.frame,animation:{frame:t.frameOpts,transition:t.transitionOpts}})}else c()}function f(){e.emit("plotly_animating"),o._lastFrameAt=-1/0,o._timeToNext=0,o._runningTransitions=0,o._currentFrame=null;var t=function(){o._animationRaf=window.requestAnimationFrame(t),Date.now()-o._lastFrameAt>o._timeToNext&&d()};t()}function h(e){return Array.isArray(s)?g>=s.length?e.transitionOpts=s[g]:e.transitionOpts=s[0]:e.transitionOpts=s,g++,e}var p,m,g=0,y=[],v=void 0===t||null===t,_=Array.isArray(t);if(v||_||!uE.isPlainObject(t)){if(v||-1!==["string","number"].indexOf(typeof t))for(p=0;p<o._frames.length;p++)(m=o._frames[p])&&(v||String(m.group)===String(t))&&y.push({type:"byname",name:String(m.name),data:h({name:m.name})});else if(_)for(p=0;p<t.length;p++){var b=t[p];-1!==["number","string"].indexOf(typeof b)?(b=String(b),y.push({type:"byname",name:b,data:h({name:b})})):uE.isPlainObject(b)&&y.push({type:"object",data:h(uE.extendFlat({},b))})}}else y.push({type:"object",data:h(uE.extendFlat({},t))});for(p=0;p<y.length;p++)if(m=y[p],"byname"===m.type&&!o._frameHash[m.data.name])return uE.warn('animate failure: frame not found: "'+m.data.name+'"'),void u();-1!==["next","immediate"].indexOf(n.mode)&&function(){if(0!==o._frameQueue.length){for(;o._frameQueue.length;){var t=o._frameQueue.pop();t.onInterrupt&&t.onInterrupt()}e.emit("plotly_animationinterrupted",[])}}(),"reverse"===n.direction&&y.reverse();var x=e._fullLayout._currentFrame;if(x&&n.fromcurrent){var w=-1;for(p=0;p<y.length;p++)if(m=y[p],"byname"===m.type&&m.name===x){w=p;break}if(w>0&&w<y.length-1){var k=[];for(p=0;p<y.length;p++)m=y[p],("byname"!==y[p].type||p>w)&&k.push(m);y=k}}y.length>0?function(t){if(0!==t.length){for(var s=0;s<t.length;s++){var c;c="byname"===t[s].type?lI.computeFrame(e,t[s].name):t[s].data;var d=i(s),h=r(s);h.duration=Math.min(h.duration,d.duration);var p={frame:c,name:t[s].name,frameOpts:d,transitionOpts:h};s===t.length-1&&(p.onComplete=a(l,2),p.onInterrupt=u),o._frameQueue.push(p)}"immediate"===n.mode&&(o._lastFrameAt=-1/0),o._animationRaf||f()}}(y):(e.emit("plotly_animated"),l())})},SV.addFrames=function(e,t,n){if(e=uE.getGraphDiv(e),null===t||void 0===t)return Promise.resolve();if(!uE.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plot.ly/javascript/animations/");var r,i,a,o,s=e._transitionData._frames,l=e._transitionData._frameHash;if(!Array.isArray(t))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+t);var u=s.length+2*t.length,c=[],d={};for(r=t.length-1;r>=0;r--)if(uE.isPlainObject(t[r])){var f=t[r].name,h=(l[f]||d[f]||{}).name,p=t[r].name,m=l[h]||d[h];h&&p&&"number"===typeof p&&m&&LV<5&&(LV++,uE.warn('addFrames: overwriting frame "'+(l[h]||d[h]).name+'" with a frame whose name of type "number" also equates to "'+h+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===LV&&uE.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),d[f]={name:f},c.push({frame:lI.supplyFrameDefaults(t[r]),index:n&&void 0!==n[r]&&null!==n[r]?n[r]:u+r})}c.sort(function(e,t){return e.index>t.index?-1:e.index<t.index?1:0});var g=[],y=[],v=s.length;for(r=c.length-1;r>=0;r--){if(i=c[r].frame,"number"===typeof i.name&&uE.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!i.name)for(;l[i.name="frame "+e._transitionData._counter++];);if(l[i.name]){for(a=0;a<s.length&&(s[a]||{}).name!==i.name;a++);g.push({type:"replace",index:a,value:i}),y.unshift({type:"replace",index:a,value:s[a]})}else o=Math.max(0,Math.min(c[r].index,v)),g.push({type:"insert",index:o,value:i}),y.unshift({type:"delete",index:o}),v++}var _=lI.modifyFrames,b=lI.modifyFrames,x=[e,y],w=[e,g];return DU&&DU.add(e,_,x,b,w),lI.modifyFrames(e,g)},SV.deleteFrames=function(e,t){if(e=uE.getGraphDiv(e),!uE.isPlotDiv(e))throw new Error("This element is not a Plotly plot: "+e);var n,r,i=e._transitionData._frames,a=[],o=[];if(!t)for(t=[],n=0;n<i.length;n++)t.push(n);for(t=t.slice(0),t.sort(),n=t.length-1;n>=0;n--)r=t[n],a.push({type:"delete",index:r}),o.unshift({type:"insert",index:r,value:i[r]});var s=lI.modifyFrames,l=lI.modifyFrames,u=[e,o],c=[e,a];return DU&&DU.add(e,s,u,l,c),lI.modifyFrames(e,a)},SV.purge=function(e){e=uE.getGraphDiv(e);var t=e._fullLayout||{},n=e._fullData||[];return lI.cleanPlot([],{},n,t),lI.purge(e),JL.purge(e),t._container&&t._container.remove(),delete e._context,e};var OV={};OV.getDelay=function(e){return e._has&&(e._has("gl3d")||e._has("gl2d")||e._has("mapbox"))?500:0},OV.getRedrawFunc=function(e){var t=e._fullLayout||{};if(t._has&&t._has("polar")||!e.data||!e.data[0]||!e.data[0].r)return function(){(e.calcdata||[]).forEach(function(e){e[0]&&e[0].t&&e[0].t.cb&&e[0].t.cb()})}};var zV=YL.EventEmitter,RV=Jl,DV=/"/g,NV=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g"),FV=function(e,t,n){var r,i=e._fullLayout,a=i._paper,o=i._toppaper,s=i.width,l=i.height;a.insert("rect",":first-child").call(PP.setRect,0,0,s,l).call(jE.fill,i.paper_bgcolor);var u=i._basePlotModules||[];for(r=0;r<u.length;r++){var c=u[r];c.toSVG&&c.toSVG(e)}if(o){var d=o.node().childNodes,f=Array.prototype.slice.call(d);for(r=0;r<f.length;r++){var h=f[r];h.childNodes.length&&a.node().appendChild(h)}}i._draggers&&i._draggers.remove(),a.node().style.background="",a.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var e=CC.select(this);if("hidden"===this.style.visibility||"none"===this.style.display)return void e.remove();e.style({visibility:null,display:null});var t=this.style.fontFamily;t&&-1!==t.indexOf('"')&&e.style("font-family",t.replace(DV,"TOBESTRIPPED"))}),a.selectAll(".point,.scatterpts").each(function(){var e=CC.select(this),t=this.style.fill;t&&-1!==t.indexOf("url(")&&e.style("fill",t.replace(DV,"TOBESTRIPPED"))}),"pdf"!==t&&"eps"!==t||a.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),a.node().setAttributeNS(aP.xmlns,"xmlns",aP.svg),a.node().setAttributeNS(aP.xmlns,"xmlns:xlink",aP.xlink),"svg"===t&&n&&(a.attr("width",n*s),a.attr("height",n*l),a.attr("viewBox","0 0 "+s+" "+l));var p=(new window.XMLSerializer).serializeToString(a.node());return p=Kl(p),p=Ql(p),p=p.replace(NV,"'"),uE.isIE()&&(p=p.replace(/"/gi,"'"),p=p.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),p=p.replace(/(\\')/gi,'"')),p},jV={format:{valType:"enumerated",values:["png","jpeg","webp","svg"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}},BV=/^data:image\/\w+;base64,/,UV=$l,VV=uE.isPlainObject,HV=Array.isArray,WV=uE.isArrayOrTypedArray,qV=function(e,t){var n,r,i=eI.get(),a=[],o={_context:uE.extendFlat({},GC)};HV(e)?(o.data=uE.extendDeep([],e),n=e):(o.data=[],n=[],a.push(ru("array","data"))),VV(t)?(o.layout=uE.extendDeep({},t),r=t):(o.layout={},r={},arguments.length>1&&a.push(ru("object","layout"))),lI.supplyDefaults(o);for(var s=o._fullData,l=n.length,u=0;u<l;u++){var c=n[u],d=["data",u];if(VV(c)){var f=s[u],h=f.type,p=i.traces[h].attributes;p.type={valType:"enumerated",values:[h]},!1===f.visible&&!1!==c.visible&&a.push(ru("invisible",d)),eu(c,f,p,a,d);var m=c.transforms,g=f.transforms;if(m){HV(m)||a.push(ru("array",d,["transforms"])),d.push("transforms");for(var y=0;y<m.length;y++){var v=["transforms",y],_=m[y].type;if(VV(m[y])){var b=i.transforms[_]?i.transforms[_].attributes:{};b.type={valType:"enumerated",values:Object.keys(i.transforms)},eu(m[y],g[y],b,a,d,v)}else a.push(ru("object",d,v))}}}else a.push(ru("object",d))}return eu(r,o._fullLayout,tu(i,s),a,"layout"),0===a.length?void 0:a},GV={object:function(e,t){return("layout"===e&&""===t?"The layout argument":"data"===e[0]&&""===t?"Trace "+e[1]+" in the data argument":nu(e)+"key "+t)+" must be linked to an object container"},array:function(e,t){return("data"===e?"The data argument":nu(e)+"key "+t)+" must be linked to an array container"},schema:function(e,t){return nu(e)+"key "+t+" is not part of the schema"},unused:function(e,t,n){var r=VV(n)?"container":"key";return nu(e)+r+" "+t+" did not get coerced"},dynamic:function(e,t,n,r){return[nu(e)+"key",t,"(set to '"+n+"')","got reset to","'"+r+"'","during defaults."].join(" ")},invisible:function(e){return"Trace "+e[1]+" got defaulted to be not visible"},value:function(e,t,n){return[nu(e)+"key "+t,"is set to an invalid value ("+n+")"].join(" ")}},YV=uE.counterRegex("([a-z]+)"),XV=function(e,t){var n=document.createElement("a"),r="download"in n,i=/Version\/[\d\.]+.*Safari/.test(navigator.userAgent);return new Promise(function(a,o){if("undefined"!==typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent)&&o(new Error("IE < 10 unsupported")),i&&(document.location.href="data:application/octet-stream"+e.slice(e.search(/[,;]/)),a(t)),t||(t="download"),r&&(n.href=e,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),a(t)),"undefined"!==typeof navigator&&navigator.msSaveBlob){var s=e.split(/^data:image\/svg\+xml,/)[1],l=decodeURIComponent(s);navigator.msSaveBlob(new Blob([l]),t),a(t)}o(new Error("download error"))})},ZV=XV,JV=lu,KV={};KV.plot=SV.plot,KV.newPlot=SV.newPlot,KV.restyle=SV.restyle,KV.relayout=SV.relayout,KV.redraw=SV.redraw,KV.update=SV.update,KV.react=SV.react,KV.extendTraces=SV.extendTraces,KV.prependTraces=SV.prependTraces,KV.addTraces=SV.addTraces,KV.deleteTraces=SV.deleteTraces,KV.moveTraces=SV.moveTraces,KV.purge=SV.purge,KV.addFrames=SV.addFrames,KV.deleteFrames=SV.deleteFrames,KV.animate=SV.animate,KV.setPlotConfig=SV.setPlotConfig,KV.toImage=UV,KV.validate=qV,KV.downloadImage=JV;var QV=uE.extendFlat,$V=uE.extendDeep,eH=function(e,t){e.framework&&e.framework.isPolar&&(e=e.framework.getConfig());var n,r=e.data,i=e.layout,a=$V([],r),o=$V({},i,uu(t.tileClass)),s=e._context||{};if(t.width&&(o.width=t.width),t.height&&(o.height=t.height),"thumbnail"===t.tileClass||"themes__thumb"===t.tileClass){o.annotations=[];var l=Object.keys(o);for(n=0;n<l.length;n++)cu(l[n])&&(o[l[n]].title="");for(n=0;n<a.length;n++){var u=a[n];u.showscale=!1,u.marker&&(u.marker.showscale=!1),"pie"===u.type&&(u.textposition="none")}}if(Array.isArray(t.annotations))for(n=0;n<t.annotations.length;n++)o.annotations.push(t.annotations[n]);var c=Object.keys(o).filter(function(e){return e.match(/^scene\d*$/)});if(c.length){var d={};for("thumbnail"===t.tileClass&&(d={title:"",showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),n=0;n<c.length;n++){var f=o[c[n]];f.xaxis||(f.xaxis={}),f.yaxis||(f.yaxis={}),f.zaxis||(f.zaxis={}),QV(f.xaxis,d),QV(f.yaxis,d),QV(f.zaxis,d),f._scene=null}}var h=document.createElement("div");t.tileClass&&(h.className=t.tileClass);var p={gd:h,td:h,layout:o,data:a,config:{staticPlot:void 0===t.staticPlot||t.staticPlot,plotGlPixelRatio:void 0===t.plotGlPixelRatio?2:t.plotGlPixelRatio,displaylogo:t.displaylogo||!1,showLink:t.showLink||!1,showTips:t.showTips||!1,mapboxAccessToken:s.mapboxAccessToken}};return"transparent"!==t.setBackground&&(p.config.setBackground=t.setBackground||"opaque"),p.gd.defaultLayout=uu(t.tileClass),p},tH=YL.EventEmitter,nH=du,rH={getDelay:OV.getDelay,getRedrawFunc:OV.getRedrawFunc,clone:eH,toSVG:FV,svgToImg:RV,toImage:nH,downloadImage:JV},iH=rH,aH=function(e){EP.hasLines(e)&&eP(e,"line")&&WE(e,e.line.color,"line","c"),EP.hasMarkers(e)&&(eP(e,"marker")&&WE(e,e.marker.color,"marker","c"),eP(e,"marker.line")&&WE(e,e.marker.line.color,"marker.line","c"))},oH=uE.isArrayOrTypedArray,sH=AC.BADNUM,lH={calc:fu,calcMarkerSize:pu,calcAxisExpansion:hu},uH=function(e){for(var t=0;t<e.length;t++){var n=e[t];if("scatter"===n.type){var r=n.fill;if("none"!==r&&"toself"!==r&&(n.opacity=void 0,"tonexty"===r||"tonextx"===r))for(var i=t-1;i>=0;i--){var a=e[i];if("scatter"===a.type&&a.xaxis===n.xaxis&&a.yaxis===n.yaxis){a.opacity=void 0;break}}}}},cH=uE.isArrayOrTypedArray,dH=function(e,t,n,r){var i=!1;if(t.marker){var a=t.marker.color,o=(t.marker.line||{}).color;a&&!cH(a)?i=a:o&&!cH(o)&&(i=o)}r("fillcolor",jE.addOpacity((t.line||{}).color||i||n,.5))},fH=uE.isArrayOrTypedArray,hH=function(e,t,n,r,i,a){var o=(e.marker||{}).color;if(i("line.color",n),eP(e,"line"))QE(e,t,r,i,{prefix:"line.",cLetter:"c"});else{i("line.color",!fH(o)&&o||n)}i("line.width"),(a||{}).noDash||i("line.dash")},pH=function(e,t,n){"spline"===n("line.shape")&&n("line.smoothing")},mH=function(e,t,n,r,i,a){var o,s=EP.isBubble(e),l=(e.line||{}).color;if(a=a||{},l&&(n=l),i("marker.symbol"),i("marker.opacity",s?.7:1),i("marker.size"),i("marker.color",n),eP(e,"marker")&&QE(e,t,r,i,{prefix:"marker.",cLetter:"c"}),a.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),a.noLine||(o=l&&!Array.isArray(l)&&t.marker.color!==l?l:s?jE.background:jE.defaultLine,i("marker.line.color",o),eP(e,"marker.line")&&QE(e,t,r,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",s?1:0)),s&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),a.gradient){"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},gH=function(e,t,n,r,i){i=i||{},r("textposition"),uE.coerceFont(r,"textfont",n.font),i.noSelect||(r("selected.textfont.color"),r("unselected.textfont.color"))},yH=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,YP,n,r)}var a=NL(e,t,r,i),o=a<WP.PTS_LINESONLY?"lines+markers":"lines";if(!a)return void(t.visible=!1);i("text"),i("hovertext"),i("mode",o),EP.hasLines(t)&&(hH(e,t,n,r,i),pH(0,0,i),i("connectgaps"),i("line.simplify")),EP.hasMarkers(t)&&mH(e,t,n,r,i,{gradient:!0}),EP.hasText(t)&&gH(0,0,r,i);var s=[];(EP.hasMarkers(t)||EP.hasText(t))&&(i("cliponaxis"),i("marker.maxdisplayed"),s.push("points")),i("fill"),"none"!==t.fill&&(dH(0,t,n,i),EP.hasLines(t)||pH(0,0,i)),"tonext"!==t.fill&&"toself"!==t.fill||s.push("fills"),i("hoveron",s.join("+")||"points");var l=rS.getComponentMethod("errorbars","supplyDefaults");l(e,t,n,{axis:"y"}),l(e,t,n,{axis:"x",inherit:"y"}),uE.coerceSelectionMarkerOpacity(t,i)},vH=function(e,t){var n,r;if("lines"===e.mode)return n=e.line.color,n&&jE.opacity(n)?n:e.fillcolor;if("none"===e.mode)return e.fill?e.fillcolor:"";var i=t.mcc||(e.marker||{}).color,a=t.mlcc||((e.marker||{}).line||{}).color;return r=i&&jE.opacity(i)?i:a&&jE.opacity(a)&&(t.mlw||((e.marker||{}).line||{}).width)?a:"",r?jE.opacity(r)<.3?jE.addOpacity(r,.3):r:(n=(e.line||{}).color,n&&jE.opacity(n)&&EP.hasLines(e)&&e.line.width?n:e.fillcolor)},_H=function(e,t,n,r){var i=e.cd,a=i[0].trace,o=e.xa,s=e.ya,l=o.c2p(t),u=s.c2p(n),c=[l,u],d=a.hoveron||"",f=-1!==a.mode.indexOf("markers")?3:.5;if(-1!==d.indexOf("points")){var h=function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(o.c2p(e.x)-l);return r<t?n*r/t:r-t+n},p=function(e){var t=Math.max(3,e.mrc||0),n=1-1/t,r=Math.abs(s.c2p(e.y)-u);return r<t?n*r/t:r-t+n},m=function(e){var t=Math.max(f,e.mrc||0),n=o.c2p(e.x)-l,r=s.c2p(e.y)-u;return Math.max(Math.sqrt(n*n+r*r)-t,1-f/t)},g=kO.getDistanceFunction(r,h,p,m);if(kO.getClosest(i,g,e),!1!==e.index){var y=i[e.index],v=o.c2p(y.x,!0),_=s.c2p(y.y,!0),b=y.mrc||1;return uE.extendFlat(e,{color:vH(a,y),x0:v-b,x1:v+b,xLabelVal:y.x,y0:_-b,y1:_+b,yLabelVal:y.y,spikeDistance:m(y)}),TO(y,a,e),rS.getComponentMethod("errorbars","hoverInfo")(y,a,e),[e]}}if(-1!==d.indexOf("fills")&&a._polygons){var x,w,k,T,M,A,C,S,E,P=a._polygons,I=[],L=!1,O=1/0,z=-1/0,R=1/0,D=-1/0;for(x=0;x<P.length;x++)k=P[x],k.contains(c)&&(L=!L,I.push(k),R=Math.min(R,k.ymin),D=Math.max(D,k.ymax));if(L){R=Math.max(R,0),D=Math.min(D,s._length);var N=(R+D)/2;for(x=0;x<I.length;x++)for(T=I[x].pts,w=1;w<T.length;w++)S=T[w-1][1],E=T[w][1],S>N!==E>=N&&(A=T[w-1][0],C=T[w][0],E-S&&(M=A+(C-A)*(N-S)/(E-S),O=Math.min(O,M),z=Math.max(z,M)));O=Math.max(O,0),z=Math.min(z,o._length);var F=jE.defaultLine;return jE.opacity(a.fillcolor)?F=a.fillcolor:jE.opacity((a.line||{}).color)&&(F=a.line.color),uE.extendFlat(e,{distance:e.maxHoverDistance,x0:O,x1:z,y0:N,y1:N,color:F}),delete e.index,a.text&&!Array.isArray(a.text)?e.text=String(a.text):e.text=a.name,[e]}}},bH=AC.BADNUM,xH=uE.segmentsIntersect,wH=uE.constrain,kH=function(e,t){function n(t){var n=e[t],r=P.c2p(n.x),i=I.c2p(n.y);return r===bH||i===bH?n.intoCenter||!1:[r,i]}function r(e){var t=e[0]/P._length,n=e[1]/I._length;return(1+WP.toleranceGrowth*Math.max(0,-t,t-1,-n,n-1))*z}function i(e,t){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function a(e,t){for(var n=[],r=0,a=0;a<4;a++){var o=$[a],s=xH(e[0],e[1],t[0],t[1],o[0],o[1],o[2],o[3]);s&&(!r||Math.abs(s.x-n[0][0])>1||Math.abs(s.y-n[0][1])>1)&&(s=[s.x,s.y],r&&i(s,e)<i(n[0],e)?n.unshift(s):n.push(s),r++)}return n}function o(e){if(e[0]<Z||e[0]>J||e[1]<K||e[1]>Q)return[wH(e[0],Z,J),wH(e[1],K,Q)]}function s(e,t){return e[0]===t[0]&&(e[0]===Z||e[0]===J)||(e[1]===t[1]&&(e[1]===K||e[1]===Q)||void 0)}function l(e,t){var n=[],r=o(e),i=o(t);return r&&i&&s(r,i)?n:(r&&n.push(r),i&&n.push(i),n)}function u(e,t,n){return function(r,i){var a=o(r),l=o(i),u=[];if(a&&l&&s(a,l))return u;a&&u.push(a),l&&u.push(l);var c=2*uE.constrain((r[e]+i[e])/2,t,n)-((a||r)[e]+(l||i)[e]);if(c){var d;d=a&&l?c>0===a[e]>l[e]?a:l:a||l,d[e]+=c}return u}}function c(e,t){var n=t[0]-e[0],r=(t[1]-e[1])/n;return(e[1]*t[0]-t[1]*e[0])/n>0?[r>0?Z:J,Q]:[r>0?J:Z,K]}function d(e){var t=e[0],n=e[1],r=t===j[B-1][0],i=n===j[B-1][1];if(!r||!i)if(B>1){var a=t===j[B-2][0],o=n===j[B-2][1];r&&(t===Z||t===J)&&a?o?B--:j[B-1]=e:i&&(n===K||n===Q)&&o?a?B--:j[B-1]=e:j[B++]=e}else j[B++]=e}function f(e){j[B-1][0]!==e[0]&&j[B-1][1]!==e[1]&&d([H,W]),d(e),q=null,H=W=0}function h(e){if(U=e[0]<Z?Z:e[0]>J?J:0,V=e[1]<K?K:e[1]>Q?Q:0,U||V){if(B)if(q){var t=Y(q,e);t.length>1&&(f(t[0]),j[B++]=t[1])}else G=Y(j[B-1],e)[0],j[B++]=G;else j[B++]=[U||e[0],V||e[1]];var n=j[B-1];U&&V&&(n[0]!==U||n[1]!==V)?(q&&(H!==U&&W!==V?d(H&&W?c(q,e):[H||U,W||V]):H&&W&&d([H,W])),d([U,V])):H-U&&W-V&&d([U||H,V||W]),q=e,H=U,W=V}else q&&f(Y(q,e)[0]),j[B++]=e}var p,m,g,y,v,_,b,x,w,k,T,M,A,C,S,E,P=t.xaxis,I=t.yaxis,L=t.simplify,O=t.connectGaps,z=t.baseTolerance,R=t.shape,D="linear"===R,N=[],F=WP.minTolerance,j=new Array(e.length),B=0;L||(z=F=-1);var U,V,H,W,q,G,Y,X=WP.maxScreensAway,Z=-P._length*X,J=P._length*(1+X),K=-I._length*X,Q=I._length*(1+X),$=[[Z,K,J,K],[J,K,J,Q],[J,Q,Z,Q],[Z,Q,Z,K]];for("linear"===R||"spline"===R?Y=a:"hv"===R||"vh"===R?Y=l:"hvh"===R?Y=u(0,Z,J):"vhv"===R&&(Y=u(1,K,Q)),p=0;p<e.length;p++)if(m=n(p)){for(B=0,q=null,h(m),p++;p<e.length;p++){if(!(y=n(p))){if(O)continue;break}if(D){if(!((k=i(y,m))<r(y)*F)){for(x=[(y[0]-m[0])/k,(y[1]-m[1])/k],v=m,T=k,M=C=S=0,b=!1,g=y,p++;p<e.length;p++){if(!(_=n(p))){if(O)continue;break}if(w=[_[0]-m[0],_[1]-m[1]],E=w[0]*x[1]-w[1]*x[0],C=Math.min(C,E),(S=Math.max(S,E))-C>r(_))break;g=_,A=w[0]*x[0]+w[1]*x[1],A>T?(T=A,y=_,b=!1):A<M&&(M=A,v=_,b=!0)}if(b?(h(y),g!==v&&h(v)):(v!==m&&h(v),g!==y&&h(y)),h(g),p>=e.length||!_)break;h(_),m=_}}else h(y)}q&&d([H||q[0],W||q[1]]),N.push(j.slice(0,B))}return N},TH=function(e,t,n){var r,i,a=null;for(i=0;i<n.length;++i)r=n[i][0].trace,!0===r.visible?(r._nexttrace=null,-1!==["tonextx","tonexty","tonext"].indexOf(r.fill)&&(r._prevtrace=a,a&&(a._nexttrace=r)),a=r):r._prevtrace=r._nexttrace=null},MH=TD.tester,AH=function(e,t,n,r,i){var a,o,s,l,u,c=t.plot.select("g.scatterlayer"),d=!r,f=!!r&&r.duration>0;for(s=c.selectAll("g.trace"),l=s.data(n,function(e){return e[0].trace.uid}),l.enter().append("g").attr("class",function(e){return"trace scatter trace"+e[0].trace.uid}).style("stroke-miterlimit",2),TH(e,t,n),mu(e,c,t),a=0,o={};a<n.length;a++)o[n[a][0].trace.uid]=a;if(c.selectAll("g.trace").sort(function(e,t){return o[e[0].trace.uid]>o[t[0].trace.uid]?1:-1}),f){i&&(u=i());CC.transition().duration(r.duration).ease(r.easing).each("end",function(){u&&u()}).each("interrupt",function(){u&&u()}).each(function(){c.selectAll("g.trace").each(function(i,a){gu(e,a,t,i,n,this,r)})})}else c.selectAll("g.trace").each(function(i,a){gu(e,a,t,i,n,this,r)});d&&l.exit().remove(),c.selectAll("path:not([d])").remove()},CH=function(e,t){var n,r,i,a,o=e.cd,s=e.xaxis,l=e.yaxis,u=[],c=o[0].trace;if(!EP.hasMarkers(c)&&!EP.hasText(c))return[];if(!1===t)for(n=0;n<o.length;n++)o[n].selected=0;else for(n=0;n<o.length;n++)r=o[n],i=s.c2p(r.x),a=l.c2p(r.y),t.contains([i,a])?(u.push({pointNumber:n,x:s.c2d(r.x),y:l.c2d(r.y)}),r.selected=1):r.selected=0;return u},SH={style:vu,stylePoints:_u},EH={};EH.hasLines=EP.hasLines,EH.hasMarkers=EP.hasMarkers,EH.hasText=EP.hasText,EH.isBubble=EP.isBubble,EH.attributes=YP,EH.supplyDefaults=yH,EH.cleanData=uH,EH.calc=lH.calc,EH.arraysToCalcdata=gN,EH.plot=AH,EH.colorbar=YO,EH.style=SH.style,EH.hoverPoints=_H,EH.selectPoints=CH,EH.animatable=!0,EH.moduleType="trace",EH.name="scatter",EH.basePlotModule=xL,EH.categories=["cartesian","symbols","markerColorscale","errorBarsOK","showLegend","scatter-like"],EH.meta={};var PH=EH,IH={};IH.version="1.35.2",wj.polyfill();for(var LH=IH.register=rS.register,OH=Object.keys(KV),zH=0;zH<OH.length;zH++){var RH=OH[zH];IH[RH]=KV[RH],LH({moduleType:"apiMethod",name:RH,fn:KV[RH]})}LH(PH),LH([kO,PB,Dj,qj,sU,fB,OU,xU,JB,UB,oB,tB]),LH([FU,NU]),IH.Icons=mj,IH.Plots=lI,IH.Fx=kO,IH.Snapshot=iH,IH.PlotSchema=eI,IH.Queue=DU,IH.d3=CC;var DH=IH,NH={},FH=KI.pointsAccessorFunction,jH=RN.COMPARISON_OPS,BH=RN.INTERVAL_OPS,UH=RN.SET_OPS;NH.moduleType="transform",NH.name="filter",NH.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(jH).concat(BH).concat(UH),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},NH.supplyDefaults=function(e){function t(t,r){return uE.coerce(e,n,NH.attributes,t,r)}var n={};if(t("enabled")){t("preservegaps"),t("operation"),t("value"),t("target");var r=rS.getComponentMethod("calendars","handleDefaults");r(e,n,"valuecalendar",null),r(e,n,"targetcalendar",null)}return n},NH.calcTransform=function(e,t,n){function r(e,n){for(var r=0;r<l.length;r++){e(uE.nestedProperty(t,l[r]),n)}}if(n.enabled){var i=uE.getTargetArray(t,n);if(i){var a=n.target,o=i.length,s=n.targetcalendar,l=t._arrayAttrs;if("string"===typeof a){var u=uE.nestedProperty(t,a+"calendar").get();u&&(s=u)}var c,d,f=PI.getDataToCoordFunc(e,t,a,i),h=bu(n,f,s),p={},m={},g=0;n.preservegaps?(c=function(e){p[e.astr]=uE.extendDeep([],e.get()),e.set(new Array(o))},d=function(e,t){var n=p[e.astr][t];e.get()[t]=n}):(c=function(e){p[e.astr]=uE.extendDeep([],e.get()),e.set([])},d=function(e,t){var n=p[e.astr][t];e.get().push(n)}),r(c);for(var y=FH(t.transforms,n),v=0;v<o;v++){h(i[v])&&(r(d,v),m[g++]=y(v))}n._indexToPoints=m,t._length=g}}};var VH=NH,HH={},WH=KI.pointsAccessorFunction;HH.moduleType="transform",HH.name="groupby",HH.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc"},editType:"calc"},editType:"calc"},HH.supplyDefaults=function(e,t,n){function r(t,n){return uE.coerce(e,a,HH.attributes,t,n)}var i,a={};if(!r("enabled"))return a;r("groups"),r("nameformat",n._dataLength>1?"%{group} (%{trace})":"%{group}");var o=e.styles,s=a.styles=[];if(o)for(i=0;i<o.length;i++)s[i]={},uE.coerce(o[i],s[i],HH.attributes.styles,"target"),uE.coerce(o[i],s[i],HH.attributes.styles,"value");return a},HH.transform=function(e,t){var n,r,i,a=[];for(r=0;r<e.length;r++)for(n=xu(e[r],t),i=0;i<n.length;i++)a.push(n[i]);return a};var qH=HH,GH=function(e,t,n){!1===n("zsmooth")&&(n("xgap"),n("ygap")),n("zhoverformat")},YH=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,NN,n,r)}if(!PF(e,t,i,r))return void(t.visible=!1);i("text"),GH(0,0,i),i("connectgaps",ZN(t)&&!1!==t.zsmooth),QE(e,t,r,i,{prefix:"",cLetter:"z"})},XH={};XH.attributes=NN,XH.supplyDefaults=YH,XH.calc=gF,XH.plot=UF,XH.colorbar=IN,XH.style=WF,XH.hoverPoints=LF,XH.moduleType="trace",XH.name="heatmap",XH.basePlotModule=xL,XH.categories=["cartesian","2dMap"],XH.meta={};var ZH=XH,JH=ZH,KH=Tu,QH=Pu,$H=Iu,eW=Ou,tW={},nW={body:"",args:[],thisVars:[],localVars:[]},rW={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in rW){var t=rW[e];tW[e]=Du({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),tW[e+"eq"]=Du({args:["array","array"],body:{args:["a","b"],body:"a"+t+"=b"},rvalue:!0,funcName:e+"eq"}),tW[e+"s"]=Du({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),tW[e+"seq"]=Du({args:["array","scalar"],body:{args:["a","s"],body:"a"+t+"=s"},rvalue:!0,funcName:e+"seq"})}}();var iW={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in iW){var t=iW[e];tW[e]=Du({args:["array","array"],body:{args:["a","b"],body:"a="+t+"b"},funcName:e}),tW[e+"eq"]=Du({args:["array"],body:{args:["a"],body:"a="+t+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var aW={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in aW){var t=aW[e];tW[e]=Du({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+t+"c"},funcName:e}),tW[e+"s"]=Du({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+t+"s"},funcName:e+"s"}),tW[e+"eq"]=Du({args:["array","array"],body:{args:["a","b"],body:"a=a"+t+"b"},rvalue:!0,count:2,funcName:e+"eq"}),tW[e+"seq"]=Du({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+t+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var oW=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<oW.length;++e){var t=oW[e];tW[t]=Du({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:t}),tW[t+"eq"]=Du({args:["array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"})}}();var sW=["max","min","atan2","pow"];!function(){for(var e=0;e<sW.length;++e){var t=sW[e];tW[t]=Du({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t}),tW[t+"s"]=Du({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:t+"s"}),tW[t+"eq"]=Du({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"eq"}),tW[t+"seq"]=Du({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"seq"})}}();var lW=["atan2","pow"];!function(){for(var e=0;e<lW.length;++e){var t=lW[e];tW[t+"op"]=Du({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"op"}),tW[t+"ops"]=Du({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:t+"ops"}),tW[t+"opeq"]=Du({args:["array","array"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opeq"}),tW[t+"opseq"]=Du({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+t,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:t+"opseq"})}}(),tW.any=eW({args:["array"],pre:nW,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),tW.all=eW({args:["array"],pre:nW,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),tW.sum=eW({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),tW.prod=eW({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),tW.norm2squared=eW({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),tW.norm2=eW({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),tW.norminf=eW({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),tW.norm1=eW({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),tW.sup=eW({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),tW.inf=eW({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),tW.argmin=eW({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),tW.argmax=eW({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),tW.random=Du({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),tW.assign=Du({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),tW.assigns=Du({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),tW.equals=eW({args:["array","array"],pre:nW,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"});var uW=Nu,cW=function(e){return null!=e&&(Fu(e)||ju(e)||!!e._isBuffer)},dW="undefined"!==typeof Float64Array,fW={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],buffer:[],generic:[]},hW=Wu,pW={};pW.INT_BITS=32,pW.INT_MAX=2147483647,pW.INT_MIN=-1<<31,pW.sign=function(e){return(e>0)-(e<0)},pW.abs=function(e){var t=e>>31;return(e^t)-t},pW.min=function(e,t){return t^(e^t)&-(e<t)},pW.max=function(e,t){return e^(e^t)&-(e<t)},pW.isPow2=function(e){return!(e&e-1)&&!!e},pW.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,(t|=n)|e>>1},pW.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},pW.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},pW.countTrailingZeros=qu,pW.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},pW.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},pW.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var mW=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(mW),pW.reverse=function(e){return mW[255&e]<<24|mW[e>>>8&255]<<16|mW[e>>>16&255]<<8|mW[e>>>24&255]},pW.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},pW.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},pW.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},pW.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},pW.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>qu(e)+1};var gW={};gW.byteLength=Yu,gW.toByteArray=Xu,gW.fromByteArray=Ku;for(var yW=[],vW=[],_W="undefined"!==typeof Uint8Array?Uint8Array:Array,bW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",xW=0,wW=bW.length;xW<wW;++xW)yW[xW]=bW[xW],vW[bW.charCodeAt(xW)]=xW;vW["-".charCodeAt(0)]=62,vW["_".charCodeAt(0)]=63;var kW={};kW.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)},kW.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*m};var TW={};TW.Buffer=$u,TW.SlowBuffer=uc,TW.INSPECT_MAX_BYTES=50;var MW=2147483647;TW.kMaxLength=MW,$u.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()}catch(e){return!1}}(),$u.TYPED_ARRAY_SUPPORT||"undefined"===typeof console||"function"!==typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty($u.prototype,"parent",{get:function(){if(this instanceof $u)return this.buffer}}),Object.defineProperty($u.prototype,"offset",{get:function(){if(this instanceof $u)return this.byteOffset}}),"undefined"!==typeof Symbol&&Symbol.species&&$u[Symbol.species]===$u&&Object.defineProperty($u,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),$u.poolSize=8192,$u.from=function(e,t,n){return ec(e,t,n)},$u.prototype.__proto__=Uint8Array.prototype,$u.__proto__=Uint8Array,$u.alloc=function(e,t,n){return nc(e,t,n)},$u.allocUnsafe=function(e){return rc(e)},$u.allocUnsafeSlow=function(e){return rc(e)},$u.isBuffer=function(e){return null!=e&&!0===e._isBuffer},$u.compare=function(e,t){if(!$u.isBuffer(e)||!$u.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},$u.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},$u.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return $u.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=$u.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var a=e[n];if(ArrayBuffer.isView(a)&&(a=$u.from(a)),!$u.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(r,i),i+=a.length}return r},$u.byteLength=cc,$u.prototype._isBuffer=!0,$u.prototype.swap16=function(){var e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)fc(this,t,t+1);return this},$u.prototype.swap32=function(){var e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)fc(this,t,t+3),fc(this,t+1,t+2);return this},$u.prototype.swap64=function(){var e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)fc(this,t,t+7),fc(this,t+1,t+6),fc(this,t+2,t+5),fc(this,t+3,t+4);return this},$u.prototype.toString=function(){var e=this.length;return 0===e?"":0===arguments.length?wc(this,0,e):dc.apply(this,arguments)},$u.prototype.toLocaleString=$u.prototype.toString,$u.prototype.equals=function(e){if(!$u.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===$u.compare(this,e)},$u.prototype.inspect=function(){var e="",t=TW.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,t).match(/.{2}/g).join(" "),this.length>t&&(e+=" ... ")),"<Buffer "+e+">"},$u.prototype.compare=function(e,t,n,r,i){if(!$u.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var a=i-r,o=n-t,s=Math.min(a,o),l=this.slice(r,i),u=e.slice(t,n),c=0;c<s;++c)if(l[c]!==u[c]){a=l[c],o=u[c];break}return a<o?-1:o<a?1:0},$u.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},$u.prototype.indexOf=function(e,t,n){return hc(this,e,t,n,!0)},$u.prototype.lastIndexOf=function(e,t,n){return hc(this,e,t,n,!1)},$u.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"===typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return mc(this,e,t,n);case"utf8":case"utf-8":return gc(this,e,t,n);case"ascii":return yc(this,e,t,n);case"latin1":case"binary":return vc(this,e,t,n);case"base64":return _c(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return bc(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},$u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var AW=4096;$u.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r=this.subarray(e,t);return r.__proto__=$u.prototype,r},$u.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Sc(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},$u.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Sc(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},$u.prototype.readUInt8=function(e,t){return e>>>=0,t||Sc(e,1,this.length),this[e]},$u.prototype.readUInt16LE=function(e,t){return e>>>=0,t||Sc(e,2,this.length),this[e]|this[e+1]<<8},$u.prototype.readUInt16BE=function(e,t){return e>>>=0,t||Sc(e,2,this.length),this[e]<<8|this[e+1]},$u.prototype.readUInt32LE=function(e,t){return e>>>=0,t||Sc(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},$u.prototype.readUInt32BE=function(e,t){return e>>>=0,t||Sc(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},$u.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||Sc(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},$u.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||Sc(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},$u.prototype.readInt8=function(e,t){return e>>>=0,t||Sc(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},$u.prototype.readInt16LE=function(e,t){e>>>=0,t||Sc(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},$u.prototype.readInt16BE=function(e,t){e>>>=0,t||Sc(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},$u.prototype.readInt32LE=function(e,t){return e>>>=0,t||Sc(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},$u.prototype.readInt32BE=function(e,t){return e>>>=0,t||Sc(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},$u.prototype.readFloatLE=function(e,t){return e>>>=0,t||Sc(e,4,this.length),kW.read(this,e,!0,23,4)},$u.prototype.readFloatBE=function(e,t){return e>>>=0,t||Sc(e,4,this.length),kW.read(this,e,!1,23,4)},$u.prototype.readDoubleLE=function(e,t){return e>>>=0,t||Sc(e,8,this.length),kW.read(this,e,!0,52,8)},$u.prototype.readDoubleBE=function(e,t){return e>>>=0,t||Sc(e,8,this.length),kW.read(this,e,!1,52,8)},$u.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){Ec(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},$u.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t>>>=0,n>>>=0,!r){Ec(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},$u.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,1,255,0),this[t]=255&e,t+1},$u.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},$u.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},$u.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},$u.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},$u.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ec(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},$u.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){var i=Math.pow(2,8*n-1);Ec(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},$u.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},$u.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},$u.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},$u.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},$u.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||Ec(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},$u.prototype.writeFloatLE=function(e,t,n){return Ic(this,e,t,!0,n)},$u.prototype.writeFloatBE=function(e,t,n){return Ic(this,e,t,!1,n)},$u.prototype.writeDoubleLE=function(e,t,n){return Lc(this,e,t,!0,n)},$u.prototype.writeDoubleBE=function(e,t,n){return Lc(this,e,t,!1,n)},$u.prototype.copy=function(e,t,n,r){if(!$u.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i=r-n;if(this===e&&"function"===typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,n,r);else if(this===e&&n<t&&t<r)for(var a=i-1;a>=0;--a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,r),t);return i},$u.prototype.fill=function(e,t,n,r){if("string"===typeof e){if("string"===typeof t?(r=t,t=0,n=this.length):"string"===typeof n&&(r=n,n=this.length),void 0!==r&&"string"!==typeof r)throw new TypeError("encoding must be a string");if("string"===typeof r&&!$u.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){var i=e.charCodeAt(0);("utf8"===r&&i<128||"latin1"===r)&&(e=i)}}else"number"===typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var a;if("number"===typeof e)for(a=t;a<n;++a)this[a]=e;else{var o=$u.isBuffer(e)?e:new $u(e,r),s=o.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(a=0;a<n-t;++a)this[a+t]=o[a%s]}return this};var CW=/[^+\/0-9A-Za-z-_]/g,SW=Wc,EW={};(function(e,t){"use strict";function n(e){if(e){var t=e.length||e.byteLength,n=pW.log2(t);v[n].push(e)}}function r(e){n(e.buffer)}function i(e){var e=pW.nextPow2(e),t=pW.log2(e),n=v[t];return n.length>0?n.pop():new ArrayBuffer(e)}function a(e){return new Uint8Array(i(e),0,e)}function o(e){return new Uint16Array(i(2*e),0,e)}function s(e){return new Uint32Array(i(4*e),0,e)}function l(e){return new Int8Array(i(e),0,e)}function u(e){return new Int16Array(i(2*e),0,e)}function c(e){return new Int32Array(i(4*e),0,e)}function d(e){return new Float32Array(i(4*e),0,e)}function f(e){return new Float64Array(i(8*e),0,e)}function h(e){return g?new Uint8ClampedArray(i(e),0,e):a(e)}function p(e){return new DataView(i(e),0,e)}function m(e){e=pW.nextPow2(e);var n=pW.log2(e),r=_[n];return r.length>0?r.pop():new t(e)}e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:SW([32,0]),UINT16:SW([32,0]),UINT32:SW([32,0]),INT8:SW([32,0]),INT16:SW([32,0]),INT32:SW([32,0]),FLOAT:SW([32,0]),DOUBLE:SW([32,0]),DATA:SW([32,0]),UINT8C:SW([32,0]),BUFFER:SW([32,0])});var g="undefined"!==typeof Uint8ClampedArray,y=e.__TYPEDARRAY_POOL;y.UINT8C||(y.UINT8C=SW([32,0])),y.BUFFER||(y.BUFFER=SW([32,0]));var v=y.DATA,_=y.BUFFER;EW.free=function(e){if(t.isBuffer(e))_[pW.log2(e.length)].push(e);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(e)&&(e=e.buffer),!e)return;var n=e.length||e.byteLength,r=0|pW.log2(n);v[r].push(e)}},EW.freeUint8=EW.freeUint16=EW.freeUint32=EW.freeInt8=EW.freeInt16=EW.freeInt32=EW.freeFloat32=EW.freeFloat=EW.freeFloat64=EW.freeDouble=EW.freeUint8Clamped=EW.freeDataView=r,EW.freeArrayBuffer=n,EW.freeBuffer=function(e){_[pW.log2(e.length)].push(e)},EW.malloc=function(e,t){if(void 0===t||"arraybuffer"===t)return i(e);switch(t){case"uint8":return a(e);case"uint16":return o(e);case"uint32":return s(e);case"int8":return l(e);case"int16":return u(e);case"int32":return c(e);case"float":case"float32":return d(e);case"double":case"float64":return f(e);case"uint8_clamped":return h(e);case"buffer":return m(e);case"data":case"dataview":return p(e);default:return null}return null},EW.mallocArrayBuffer=i,EW.mallocUint8=a,EW.mallocUint16=o,EW.mallocUint32=s,EW.mallocInt8=l,EW.mallocInt16=u,EW.mallocInt32=c,EW.mallocFloat32=EW.mallocFloat=d,EW.mallocFloat64=EW.mallocDouble=f,EW.mallocUint8Clamped=h,EW.mallocDataView=p,EW.mallocBuffer=m,EW.clearCache=function(){for(var e=0;e<32;++e)y.UINT8[e].length=0,y.UINT16[e].length=0,y.UINT32[e].length=0,y.INT8[e].length=0,y.INT16[e].length=0,y.INT32[e].length=0,y.FLOAT[e].length=0,y.DOUBLE[e].length=0,y.UINT8C[e].length=0,v[e].length=0,_[e].length=0}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},TW.Buffer);var PW=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"],IW=qc.prototype;IW.bind=function(){this.gl.bindBuffer(this.type,this.handle)},IW.unbind=function(){this.gl.bindBuffer(this.type,null)},IW.dispose=function(){this.gl.deleteBuffer(this.handle)},IW.update=function(e,t){if("number"!==typeof t&&(t=-1),this.bind(),"object"===typeof e&&"undefined"!==typeof e.shape){var n=e.dtype;if(PW.indexOf(n)<0&&(n="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){n=gl.getExtension("OES_element_index_uint")&&"uint16"!==n?"uint32":"uint16"}if(n===e.dtype&&Xc(e.shape,e.stride))0===e.offset&&e.data.length===e.shape[0]?this.length=Gc(this.gl,this.type,this.length,this.usage,e.data,t):this.length=Gc(this.gl,this.type,this.length,this.usage,e.data.subarray(e.offset,e.shape[0]),t);else{var r=EW.malloc(e.size,n),i=hW(r,e.shape);tW.assign(i,e),this.length=t<0?Gc(this.gl,this.type,this.length,this.usage,r,t):Gc(this.gl,this.type,this.length,this.usage,r.subarray(0,e.size),t),EW.free(r)}}else if(Array.isArray(e)){var a;a=this.type===this.gl.ELEMENT_ARRAY_BUFFER?Yc(e,"uint16"):Yc(e,"float32"),this.length=t<0?Gc(this.gl,this.type,this.length,this.usage,a,t):Gc(this.gl,this.type,this.length,this.usage,a.subarray(0,e.length),t),EW.free(a)}else if("object"===typeof e&&"number"===typeof e.length)this.length=Gc(this.gl,this.type,this.length,this.usage,e,t);else{if("number"!==typeof e&&void 0!==e)throw new Error("gl-buffer: Invalid data type");if(t>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");e|=0,e<=0&&(e=1),this.gl.bufferData(this.type,0|e,this.usage),this.length=e}};var LW=Zc,OW=function(e){"string"===typeof e&&(e=[e]);for(var t=[].slice.call(arguments,1),n=[],r=0;r<e.length-1;r++)n.push(e[r],t[r]||"");return n.push(e[r]),n.join("")},zW=OW(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]),RW={lineVert:OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:zW,textVert:OW(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:zW,gridVert:OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:zW,boxVert:OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])};Jc.prototype=new Error,Jc.prototype.name="GLError",Jc.prototype.constructor=Jc;var DW=Jc,NW=ed,FW=Kc.prototype;FW.pointer=function(e,t,n,r){var i=this,a=i._gl,o=i._locations[i._index];a.vertexAttribPointer(o,i._dimension,e||a.FLOAT,!!t,n||0,r||0),a.enableVertexAttribArray(o)},FW.set=function(e,t,n,r){return this._constFunc(this._locations[this._index],e,t,n,r)},Object.defineProperty(FW,"location",{get:function(){return this._locations[this._index]},set:function(e){return e!==this._locations[this._index]&&(this._locations[this._index]=0|e,this._wrapper.program=null),0|e}});var jW=td,BW=id,UW={};UW.uniforms=od,UW.attributes=sd;var VW,HW={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},WW=null,qW="",GW=ld,YW=function(e,t,n){return n="undefined"!==typeof n?n+"":" ",GW(n,t)+e},XW=ud,ZW={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"},JW=function(e){return ZW[e]},KW=function(e){return atob(e)},QW=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"];QW=QW.slice().filter(function(e){return!/^(gl\_|texture)/.test(e)});var $W=QW.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"]),eq=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"],tq=eq.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uint","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"]),nq=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"],rq=cd,iq=999,aq=9999,oq=0,sq=1,lq=2,uq=3,cq=4,dq=5,fq=6,hq=7,pq=8,mq=9,gq=10,yq=11,vq=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"],_q=dd,bq=fd,xq={};!function(){"use strict";function e(e){return n(r(e),arguments)}function t(t,n){return e.apply(null,[t].concat(n||[]))}function n(t,n){var r,a,o,s,l,u,c,d,f,h=1,p=t.length,m="";for(a=0;a<p;a++)if("string"===typeof t[a])m+=t[a];else if(Array.isArray(t[a])){if(s=t[a],s[2])for(r=n[h],o=0;o<s[2].length;o++){if(!r.hasOwnProperty(s[2][o]))throw new Error(e('[sprintf] property "%s" does not exist',s[2][o]));r=r[s[2][o]]}else r=s[1]?n[s[1]]:n[h++];if(i.not_type.test(s[8])&&i.not_primitive.test(s[8])&&r instanceof Function&&(r=r()),i.numeric_arg.test(s[8])&&"number"!==typeof r&&isNaN(r))throw new TypeError(e("[sprintf] expecting number but found %T",r));switch(i.number.test(s[8])&&(d=r>=0),s[8]){case"b":r=parseInt(r,10).toString(2);break;case"c":r=String.fromCharCode(parseInt(r,10));break;case"d":case"i":r=parseInt(r,10);break;case"j":r=JSON.stringify(r,null,s[6]?parseInt(s[6]):0);break;case"e":r=s[7]?parseFloat(r).toExponential(s[7]):parseFloat(r).toExponential();break;case"f":r=s[7]?parseFloat(r).toFixed(s[7]):parseFloat(r);break;case"g":r=s[7]?String(Number(r.toPrecision(s[7]))):parseFloat(r);break;case"o":r=(parseInt(r,10)>>>0).toString(8);break;case"s":r=String(r),r=s[7]?r.substring(0,s[7]):r;break;case"t":r=String(!!r),r=s[7]?r.substring(0,s[7]):r;break;case"T":r=Object.prototype.toString.call(r).slice(8,-1).toLowerCase(),r=s[7]?r.substring(0,s[7]):r;break;case"u":r=parseInt(r,10)>>>0;break;case"v":r=r.valueOf(),r=s[7]?r.substring(0,s[7]):r;break;case"x":r=(parseInt(r,10)>>>0).toString(16);break;case"X":r=(parseInt(r,10)>>>0).toString(16).toUpperCase()}i.json.test(s[8])?m+=r:(!i.number.test(s[8])||d&&!s[3]?f="":(f=d?"+":"-",r=r.toString().replace(i.sign,"")),u=s[4]?"0"===s[4]?"0":s[4].charAt(1):" ",c=s[6]-(f+r).length,l=s[6]&&c>0?u.repeat(c):"",m+=s[5]?f+r+l:"0"===u?f+l+r:l+f+r)}return m}function r(e){if(a[e])return a[e];for(var t,n=e,r=[],o=0;n;){if(null!==(t=i.text.exec(n)))r.push(t[0]);else if(null!==(t=i.modulo.exec(n)))r.push("%");else{if(null===(t=i.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(t[2]){o|=1;var s=[],l=t[2],u=[];if(null===(u=i.key.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s.push(u[1]);""!==(l=l.substring(u[0].length));)if(null!==(u=i.key_access.exec(l)))s.push(u[1]);else{if(null===(u=i.index_access.exec(l)))throw new SyntaxError("[sprintf] failed to parse named argument key");s.push(u[1])}t[2]=s}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push(t)}n=n.substring(t[0].length)}return a[e]=r}var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/},a=Object.create(null);"undefined"!==typeof xq&&(xq.sprintf=e,xq.vsprintf=t),"undefined"!==typeof window&&(window.sprintf=e,window.vsprintf=t,"function"===typeof MC&&MC.amd&&MC(function(){return{sprintf:e,vsprintf:t}}))}();var wq=xq.sprintf,kq=hd,Tq=pd,Mq=md,Aq=gd,Cq={};Cq.shader=wd,Cq.program=kd;var Sq="undefined"===typeof WeakMap?Aq:WeakMap,Eq=new Sq,Pq=0;yd.prototype.dispose=function(){if(0===--this.count){for(var e=this.cache,t=e.gl,n=this.programs,r=0,i=n.length;r<i;++r){var a=e.programs[n[r]];a&&(delete e.programs[r],t.deleteProgram(a))}t.deleteShader(this.shader),delete e.shaders[this.type===t.FRAGMENT_SHADER|0][this.src]}};var Iq=vd.prototype;Iq.getShaderReference=function(e,t){var n=this.gl,r=this.shaders[e===n.FRAGMENT_SHADER|0],i=r[t];if(i&&n.isShader(i.shader))i.count+=1;else{var a=_d(n,e,t);i=r[t]=new yd(Pq++,t,e,a,[],1,this)}return i},Iq.getProgram=function(e,t,n,r){var i=[e.id,t.id,n.join(":"),r.join(":")].join("@"),a=this.programs[i];return a&&this.gl.isProgram(a)||(this.programs[i]=a=bd(this.gl,e.shader,t.shader,n,r),e.programs.push(i),t.programs.push(i)),a};var Lq=Td.prototype;Lq.bind=function(){this.program||this._relink();var e,t=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),n=this.gl.lastAttribCount;if(t>n)for(e=n;e<t;e++)this.gl.enableVertexAttribArray(e);else if(n>t)for(e=t;e<n;e++)this.gl.disableVertexAttribArray(e);this.gl.lastAttribCount=t,this.gl.useProgram(this.program)},Lq.dispose=function(){for(var e=this.gl.lastAttribCount,t=0;t<e;t++)this.gl.disableVertexAttribArray(t);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},Lq.update=function(e,t,n,r){function i(){o.program=Cq.program(s,o._vref,o._fref,p,m);for(var e=0;e<n.length;++e)x[e]=s.getUniformLocation(o.program,n[e].name)}if(!t||1===arguments.length){var a=e;e=a.vertex,t=a.fragment,n=a.uniforms,r=a.attributes}var o=this,s=o.gl,l=o._vref;o._vref=Cq.shader(s,s.VERTEX_SHADER,e),l&&l.dispose(),o.vertShader=o._vref.shader;var u=this._fref;if(o._fref=Cq.shader(s,s.FRAGMENT_SHADER,t),u&&u.dispose(),o.fragShader=o._fref.shader,!n||!r){var c=s.createProgram();if(s.attachShader(c,o.fragShader),s.attachShader(c,o.vertShader),s.linkProgram(c),!s.getProgramParameter(c,s.LINK_STATUS)){var d=s.getProgramInfoLog(c);throw new DW(d,"Error linking program:"+d)}n=n||UW.uniforms(s,c),r=r||UW.attributes(s,c),s.deleteProgram(c)}r=r.slice(),r.sort(Md);var f,h=[],p=[],m=[];for(f=0;f<r.length;++f){var g=r[f];if(g.type.indexOf("mat")>=0){for(var y=0|g.type.charAt(g.type.length-1),v=new Array(y),_=0;_<y;++_)v[_]=m.length,p.push(g.name+"["+_+"]"),"number"===typeof g.location?m.push(g.location+_):Array.isArray(g.location)&&g.location.length===y&&"number"===typeof g.location[_]?m.push(0|g.location[_]):m.push(-1);h.push({name:g.name,type:g.type,locations:v})}else h.push({name:g.name,type:g.type,locations:[m.length]}),p.push(g.name),"number"===typeof g.location?m.push(0|g.location):m.push(-1)}var b=0;for(f=0;f<m.length;++f)if(m[f]<0){for(;m.indexOf(b)>=0;)b+=1;m[f]=b}var x=new Array(n.length);i(),o._relink=i,o.types={uniforms:jW(n),attributes:jW(r)},o.attributes=NW(s,o,h,m),Object.defineProperty(o,"uniforms",BW(s,o,n,x))};var Oq=Ad,zq=Sd,Rq=Cd.prototype;Rq.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},Rq.drawBox=function(){var e=[0,0],t=[0,0];return function(n,r,i,a,o){var s=this.plot,l=this.shader,u=s.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=a,l.uniforms.lo=e,l.uniforms.hi=t,l.uniforms.color=o,u.drawArrays(u.TRIANGLE_STRIP,0,4)}}(),Rq.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var Dq={ge:Pd(">=",!1,"GE"),gt:Pd(">",!1,"GT"),lt:Pd("<",!0,"LT"),le:Pd("<=",!0,"LE"),eq:Pd("-",!0,"EQ",!0)},Nq={ge:Ld(">=",!1,"GE"),gt:Ld(">",!1,"GT"),lt:Ld("<",!0,"LT"),le:Ld("<=",!0,"LE"),eq:Ld("-",!0,"EQ",!0)},Fq=Rd,jq=Od.prototype;jq.draw=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){for(var r=this.plot,i=this.vbo,a=this.shader,o=this.ticks,s=r.gl,l=r._tickBounds,u=r.dataBox,c=r.viewBox,d=r.gridLineWidth,f=r.gridLineColor,h=r.gridLineEnable,p=r.pixelRatio,m=0;m<2;++m){var g=l[m],y=l[m+2],v=y-g,_=.5*(u[m+2]+u[m]),b=u[m+2]-u[m];t[m]=2*v/b,e[m]=2*(g-_)/b}a.bind(),i.bind(),a.attributes.dataCoord.pointer(),a.uniforms.dataShift=e,a.uniforms.dataScale=t;for(var x=0,m=0;m<2;++m){n[0]=n[1]=0,n[m]=1,a.uniforms.dataAxis=n,a.uniforms.lineWidth=d[m]/(c[m+2]-c[m])*p,a.uniforms.color=f[m];var w=6*o[m].length;h[m]&&w&&s.drawArrays(s.TRIANGLES,x,w),x+=w}}}(),jq.drawTickMarks=function(){var e=[0,0],t=[0,0],n=[1,0],r=[0,1],i=[0,0],a=[0,0];return function(){for(var o=this.plot,s=this.vbo,l=this.tickShader,u=this.ticks,c=o.gl,d=o._tickBounds,f=o.dataBox,h=o.viewBox,p=o.pixelRatio,m=o.screenBox,g=m[2]-m[0],y=m[3]-m[1],v=h[2]-h[0],_=h[3]-h[1],b=0;b<2;++b){var x=d[b],w=d[b+2],k=w-x,T=.5*(f[b+2]+f[b]),M=f[b+2]-f[b];t[b]=2*k/M,e[b]=2*(x-T)/M}t[0]*=v/g,e[0]*=v/g,t[1]*=_/y,e[1]*=_/y,l.bind(),s.bind(),l.attributes.dataCoord.pointer();var A=l.uniforms;A.dataShift=e,A.dataScale=t;var C=o.tickMarkLength,S=o.tickMarkWidth,E=o.tickMarkColor,P=6*u[0].length,I=Math.min(Nq.ge(u[0],(f[0]-d[0])/(d[2]-d[0]),zd),u[0].length),L=Math.min(Nq.gt(u[0],(f[2]-d[0])/(d[2]-d[0]),zd),u[0].length),O=0+6*I,z=6*Math.max(0,L-I),R=Math.min(Nq.ge(u[1],(f[1]-d[1])/(d[3]-d[1]),zd),u[1].length),D=Math.min(Nq.gt(u[1],(f[3]-d[1])/(d[3]-d[1]),zd),u[1].length),N=P+6*R,F=6*Math.max(0,D-R);i[0]=2*(h[0]-C[1])/g-1,i[1]=(h[3]+h[1])/y-1,a[0]=C[1]*p/g,a[1]=S[1]*p/y,F&&(A.color=E[1],A.tickScale=a,A.dataAxis=r,A.screenOffset=i,c.drawArrays(c.TRIANGLES,N,F)),i[0]=(h[2]+h[0])/g-1,i[1]=2*(h[1]-C[0])/y-1,a[0]=S[0]*p/g,a[1]=C[0]*p/y,z&&(A.color=E[0],A.tickScale=a,A.dataAxis=n,A.screenOffset=i,c.drawArrays(c.TRIANGLES,O,z)),i[0]=2*(h[2]+C[3])/g-1,i[1]=(h[3]+h[1])/y-1,a[0]=C[3]*p/g,a[1]=S[3]*p/y,F&&(A.color=E[3],A.tickScale=a,A.dataAxis=r,A.screenOffset=i,c.drawArrays(c.TRIANGLES,N,F)),i[0]=(h[2]+h[0])/g-1,i[1]=2*(h[3]+C[2])/y-1,a[0]=S[2]*p/g,a[1]=C[2]*p/y,z&&(A.color=E[2],A.tickScale=a,A.dataAxis=n,A.screenOffset=i,c.drawArrays(c.TRIANGLES,O,z))}}(),jq.update=function(){var e=[1,1,-1,-1,1,-1],t=[1,-1,1,1,-1,-1];return function(n){for(var r=n.ticks,i=n.bounds,a=new Float32Array(18*(r[0].length+r[1].length)),o=(this.plot.zeroLineEnable,0),s=[[],[]],l=0;l<2;++l)for(var u=s[l],c=r[l],d=i[l],f=i[l+2],h=0;h<c.length;++h){var p=(c[h].x-d)/(f-d);u.push(p);for(var m=0;m<6;++m)a[o++]=p,a[o++]=e[m],a[o++]=t[m]}this.ticks=s,this.vbo.update(a)}}(),jq.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};var Bq=Nd,Uq=Dd.prototype;Uq.bind=function(){var e=this.shader;this.vbo.bind(),this.shader.bind(),e.attributes.coord.pointer(),e.uniforms.screenBox=this.plot.screenBox},Uq.drawLine=function(){var e=[0,0],t=[0,0];return function(n,r,i,a,o,s){var l=this.plot,u=this.shader,c=l.gl;e[0]=n,e[1]=r,t[0]=i,t[1]=a,u.uniforms.start=e,u.uniforms.end=t,u.uniforms.width=o*l.pixelRatio,u.uniforms.color=s,c.drawArrays(c.TRIANGLE_STRIP,0,4)}}(),Uq.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var Vq=Fd,Hq=+(Math.pow(2,27)+1),Wq=jd,qq=Bd,Gq=Vd,Yq=Wd,Xq={},Zq=6,Jq=[$d,ef,tf];!function(){for(;Jq.length<=Zq;)Jq.push(Qd(Jq.length));for(var e=[],t=["slow"],n=0;n<=Zq;++n)e.push("a"+n),t.push("o"+n);for(var r=["function testInSphere(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=Zq;++n)r.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere"),t.push(r.join(""));var i=Function.apply(void 0,t);Xq=i.apply(void 0,[nf].concat(Jq));for(var n=0;n<=Zq;++n)Xq[n]=Jq[n]}();var Kq=Xq[4],Qq=af,$q=cf;of.prototype.locate=function(){var e=[0,0,0];return function(t,n,r){var i=t,a=n,o=r;return n<r?n<t&&(i=n,a=r,o=t):r<t&&(i=r,a=t,o=n),i<0?-1:(e[0]=i,e[1]=a,e[2]=o,Dq.eq(this.cells,e,sf))}}();var eG={},tG=5,nG=gf(3),rG=gf(4),iG=[function(){return 0},function(){return 0},function(e,t){return t[0]-e[0]},function(e,t,n){var r,i=(e[1]-n[1])*(t[0]-n[0]),a=(e[0]-n[0])*(t[1]-n[1]),o=i-a;if(i>0){if(a<=0)return o;r=i+a}else{if(!(i<0))return o;if(a>=0)return o;r=-(i+a)}var s=3.3306690738754716e-16*r;return o>=s||o<=-s?o:nG(e,t,n)},function(e,t,n,r){var i=e[0]-r[0],a=t[0]-r[0],o=n[0]-r[0],s=e[1]-r[1],l=t[1]-r[1],u=n[1]-r[1],c=e[2]-r[2],d=t[2]-r[2],f=n[2]-r[2],h=a*u,p=o*l,m=o*s,g=i*u,y=i*l,v=a*s,_=c*(h-p)+d*(m-g)+f*(y-v),b=(Math.abs(h)+Math.abs(p))*Math.abs(c)+(Math.abs(m)+Math.abs(g))*Math.abs(d)+(Math.abs(y)+Math.abs(v))*Math.abs(f),x=7.771561172376103e-16*b;return _>x||-_>x?_:rG(e,t,n,r)}];!function(){for(;iG.length<=tG;)iG.push(gf(iG.length));for(var e=[],t=["slow"],n=0;n<=tG;++n)e.push("a"+n),t.push("o"+n);for(var r=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"],n=2;n<=tG;++n)r.push("case ",n,":return o",n,"(",e.slice(0,n).join(),");");r.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),t.push(r.join(""));var i=Function.apply(void 0,t);eG=i.apply(void 0,[yf].concat(iG));for(var n=0;n<=tG;++n)eG[n]=iG[n]}();var aG=eG[3],oG=0,sG=1,lG=2,uG=Af,cG=Ef,dG=Cf.prototype;dG.isConstraint=function(){function e(e,t){return e[0]-t[0]||e[1]-t[1]}var t=[0,0];return function(n,r){return t[0]=Math.min(n,r),t[1]=Math.max(n,r),Dq.eq(this.edges,t,e)>=0}}(),dG.removeTriangle=function(e,t,n){var r=this.stars;Sf(r[e],t,n),Sf(r[t],n,e),Sf(r[n],e,t)},dG.addTriangle=function(e,t,n){var r=this.stars;r[e].push(t,n),r[t].push(n,e),r[n].push(e,t)},dG.opposite=function(e,t){for(var n=this.stars[t],r=1,i=n.length;r<i;r+=2)if(n[r]===e)return n[r-1];return-1},dG.flip=function(e,t){var n=this.opposite(e,t),r=this.opposite(t,e);this.removeTriangle(e,t,n),this.removeTriangle(t,e,r),this.addTriangle(e,r,n),this.addTriangle(t,n,r)},dG.edges=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;a+=2)t.push([i[a],i[a+1]]);return t},dG.cells=function(){for(var e=this.stars,t=[],n=0,r=e.length;n<r;++n)for(var i=e[n],a=0,o=i.length;a<o;a+=2){var s=i[a],l=i[a+1];n<Math.min(s,l)&&t.push([n,s,l])}return t};var fG=zf,hG=Rf,pG={},mG={exports:{}};!function(e,t){"use strict";function n(e,t){if(!e)throw new Error(t||"Assertion failed")}function r(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}function i(e,t,n){if(i.isBN(e))return e;this.negative=0,this.words=null,this.length=0,this.red=null,null!==e&&("le"!==t&&"be"!==t||(n=t,t=10),this._init(e||0,t||10,n||"be"))}function a(e,t,n){for(var r=0,i=Math.min(e.length,n),a=t;a<i;a++){var o=e.charCodeAt(a)-48;r<<=4,r|=o>=49&&o<=54?o-49+10:o>=17&&o<=22?o-17+10:15&o}return r}function o(e,t,n,r){for(var i=0,a=Math.min(e.length,n),o=t;o<a;o++){var s=e.charCodeAt(o)-48;i*=r,i+=s>=49?s-49+10:s>=17?s-17+10:s}return i}function s(e){for(var t=new Array(e.bitLength()),n=0;n<t.length;n++){var r=n/26|0,i=n%26;t[n]=(e.words[r]&1<<i)>>>i}return t}function l(e,t,n){n.negative=t.negative^e.negative;var r=e.length+t.length|0;n.length=r,r=r-1|0;var i=0|e.words[0],a=0|t.words[0],o=i*a,s=67108863&o,l=o/67108864|0;n.words[0]=s;for(var u=1;u<r;u++){for(var c=l>>>26,d=67108863&l,f=Math.min(u,t.length-1),h=Math.max(0,u-e.length+1);h<=f;h++){var p=u-h|0;i=0|e.words[p],a=0|t.words[h],o=i*a+d,c+=o/67108864|0,d=67108863&o}n.words[u]=0|d,l=0|c}return 0!==l?n.words[u]=0|l:n.length--,n.strip()}function u(e,t,n){n.negative=t.negative^e.negative,n.length=e.length+t.length;for(var r=0,i=0,a=0;a<n.length-1;a++){var o=i;i=0;for(var s=67108863&r,l=Math.min(a,t.length-1),u=Math.max(0,a-e.length+1);u<=l;u++){var c=a-u,d=0|e.words[c],f=0|t.words[u],h=d*f,p=67108863&h;o=o+(h/67108864|0)|0,p=p+s|0,s=67108863&p,o=o+(p>>>26)|0,i+=o>>>26,o&=67108863}n.words[a]=s,r=o,o=i}return 0!==r?n.words[a]=r:n.length--,n.strip()}function c(e,t,n){return(new d).mulp(e,t,n)}function d(e,t){this.x=e,this.y=t}function f(e,t){this.name=e,this.p=new i(t,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function h(){f.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function p(){f.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function m(){f.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function g(){f.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function y(e){if("string"===typeof e){var t=i._prime(e);this.m=t.p,this.prime=t}else n(e.gtn(1),"modulus must be greater than 1"),this.m=e,this.prime=null}function v(e){y.call(this,e),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}"object"===typeof e?e.exports=i:t.BN=i,i.BN=i,i.wordSize=26;var _;try{_=pG.Buffer}catch(e){}i.isBN=function(e){return e instanceof i||null!==e&&"object"===typeof e&&e.constructor.wordSize===i.wordSize&&Array.isArray(e.words)},i.max=function(e,t){return e.cmp(t)>0?e:t},i.min=function(e,t){return e.cmp(t)<0?e:t},i.prototype._init=function(e,t,r){if("number"===typeof e)return this._initNumber(e,t,r);if("object"===typeof e)return this._initArray(e,t,r);"hex"===t&&(t=16),n(t===(0|t)&&t>=2&&t<=36),e=e.toString().replace(/\s+/g,"");var i=0;"-"===e[0]&&i++,16===t?this._parseHex(e,i):this._parseBase(e,t,i),"-"===e[0]&&(this.negative=1),this.strip(),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initNumber=function(e,t,r){e<0&&(this.negative=1,e=-e),e<67108864?(this.words=[67108863&e],this.length=1):e<4503599627370496?(this.words=[67108863&e,e/67108864&67108863],this.length=2):(n(e<9007199254740992),this.words=[67108863&e,e/67108864&67108863,1],this.length=3),"le"===r&&this._initArray(this.toArray(),t,r)},i.prototype._initArray=function(e,t,r){if(n("number"===typeof e.length),e.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(e.length/3),this.words=new Array(this.length);for(var i=0;i<this.length;i++)this.words[i]=0;var a,o,s=0;if("be"===r)for(i=e.length-1,a=0;i>=0;i-=3)o=e[i]|e[i-1]<<8|e[i-2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);else if("le"===r)for(i=0,a=0;i<e.length;i+=3)o=e[i]|e[i+1]<<8|e[i+2]<<16,this.words[a]|=o<<s&67108863,this.words[a+1]=o>>>26-s&67108863,(s+=24)>=26&&(s-=26,a++);return this.strip()},i.prototype._parseHex=function(e,t){this.length=Math.ceil((e.length-t)/6),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var r,i,o=0;for(n=e.length-6,r=0;n>=t;n-=6)i=a(e,n,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303,(o+=24)>=26&&(o-=26,r++);n+6!==t&&(i=a(e,t,n+6),this.words[r]|=i<<o&67108863,this.words[r+1]|=i>>>26-o&4194303),this.strip()},i.prototype._parseBase=function(e,t,n){this.words=[0],this.length=1;for(var r=0,i=1;i<=67108863;i*=t)r++;r--,i=i/t|0;for(var a=e.length-n,s=a%r,l=Math.min(a,a-s)+n,u=0,c=n;c<l;c+=r)u=o(e,c,c+r,t),this.imuln(i),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u);if(0!==s){var d=1;for(u=o(e,c,e.length,t),c=0;c<s;c++)d*=t;this.imuln(d),this.words[0]+u<67108864?this.words[0]+=u:this._iaddn(u)}},i.prototype.copy=function(e){e.words=new Array(this.length);for(var t=0;t<this.length;t++)e.words[t]=this.words[t];e.length=this.length,e.negative=this.negative,e.red=this.red},i.prototype.clone=function(){var e=new i(null);return this.copy(e),e},i.prototype._expand=function(e){for(;this.length<e;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var b=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],w=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];i.prototype.toString=function(e,t){e=e||10,t=0|t||1;var r;if(16===e||"hex"===e){r="";for(var i=0,a=0,o=0;o<this.length;o++){var s=this.words[o],l=(16777215&(s<<i|a)).toString(16);a=s>>>24-i&16777215,r=0!==a||o!==this.length-1?b[6-l.length]+l+r:l+r,i+=2,i>=26&&(i-=26,o--)}for(0!==a&&(r=a.toString(16)+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}if(e===(0|e)&&e>=2&&e<=36){var u=x[e],c=w[e];r="";var d=this.clone();for(d.negative=0;!d.isZero();){var f=d.modn(c).toString(e);d=d.idivn(c),r=d.isZero()?f+r:b[u-f.length]+f+r}for(this.isZero()&&(r="0"+r);r.length%t!==0;)r="0"+r;return 0!==this.negative&&(r="-"+r),r}n(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var e=this.words[0];return 2===this.length?e+=67108864*this.words[1]:3===this.length&&1===this.words[2]?e+=4503599627370496+67108864*this.words[1]:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-e:e},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(e,t){return n("undefined"!==typeof _),this.toArrayLike(_,e,t)},i.prototype.toArray=function(e,t){return this.toArrayLike(Array,e,t)},i.prototype.toArrayLike=function(e,t,r){var i=this.byteLength(),a=r||Math.max(1,i);n(i<=a,"byte array longer than desired length"),n(a>0,"Requested array length <= 0"),this.strip();var o,s,l="le"===t,u=new e(a),c=this.clone();if(l){for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),u[s]=o;for(;s<a;s++)u[s]=0}else{for(s=0;s<a-i;s++)u[s]=0;for(s=0;!c.isZero();s++)o=c.andln(255),c.iushrn(8),u[a-s-1]=o}return u},Math.clz32?i.prototype._countBits=function(e){return 32-Math.clz32(e)}:i.prototype._countBits=function(e){var t=e,n=0;return t>=4096&&(n+=13,t>>>=13),t>=64&&(n+=7,t>>>=7),t>=8&&(n+=4,t>>>=4),t>=2&&(n+=2,t>>>=2),n+t},i.prototype._zeroBits=function(e){if(0===e)return 26;var t=e,n=0;return 0===(8191&t)&&(n+=13,t>>>=13),0===(127&t)&&(n+=7,t>>>=7),0===(15&t)&&(n+=4,t>>>=4),0===(3&t)&&(n+=2,t>>>=2),0===(1&t)&&n++,n},i.prototype.bitLength=function(){var e=this.words[this.length-1],t=this._countBits(e);return 26*(this.length-1)+t},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var e=0,t=0;t<this.length;t++){var n=this._zeroBits(this.words[t]);if(e+=n,26!==n)break}return e},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(e){return 0!==this.negative?this.abs().inotn(e).iaddn(1):this.clone()},i.prototype.fromTwos=function(e){return this.testn(e-1)?this.notn(e).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(e){for(;this.length<e.length;)this.words[this.length++]=0;for(var t=0;t<e.length;t++)this.words[t]=this.words[t]|e.words[t];return this.strip()},i.prototype.ior=function(e){return n(0===(this.negative|e.negative)),this.iuor(e)},i.prototype.or=function(e){return this.length>e.length?this.clone().ior(e):e.clone().ior(this)},i.prototype.uor=function(e){return this.length>e.length?this.clone().iuor(e):e.clone().iuor(this)},i.prototype.iuand=function(e){var t;t=this.length>e.length?e:this;for(var n=0;n<t.length;n++)this.words[n]=this.words[n]&e.words[n];return this.length=t.length,this.strip()},i.prototype.iand=function(e){return n(0===(this.negative|e.negative)),this.iuand(e)},i.prototype.and=function(e){return this.length>e.length?this.clone().iand(e):e.clone().iand(this)},i.prototype.uand=function(e){return this.length>e.length?this.clone().iuand(e):e.clone().iuand(this)},i.prototype.iuxor=function(e){var t,n;this.length>e.length?(t=this,n=e):(t=e,n=this);for(var r=0;r<n.length;r++)this.words[r]=t.words[r]^n.words[r];if(this!==t)for(;r<t.length;r++)this.words[r]=t.words[r];return this.length=t.length,this.strip()},i.prototype.ixor=function(e){return n(0===(this.negative|e.negative)),this.iuxor(e)},i.prototype.xor=function(e){return this.length>e.length?this.clone().ixor(e):e.clone().ixor(this)},i.prototype.uxor=function(e){return this.length>e.length?this.clone().iuxor(e):e.clone().iuxor(this)},i.prototype.inotn=function(e){n("number"===typeof e&&e>=0);var t=0|Math.ceil(e/26),r=e%26;this._expand(t),r>0&&t--;for(var i=0;i<t;i++)this.words[i]=67108863&~this.words[i];return r>0&&(this.words[i]=~this.words[i]&67108863>>26-r),this.strip()},i.prototype.notn=function(e){return this.clone().inotn(e)},i.prototype.setn=function(e,t){n("number"===typeof e&&e>=0);var r=e/26|0,i=e%26;return this._expand(r+1),this.words[r]=t?this.words[r]|1<<i:this.words[r]&~(1<<i),this.strip()},i.prototype.iadd=function(e){var t;if(0!==this.negative&&0===e.negative)return this.negative=0,t=this.isub(e),this.negative^=1,this._normSign();if(0===this.negative&&0!==e.negative)return e.negative=0,t=this.isub(e),e.negative=1,t._normSign();var n,r;this.length>e.length?(n=this,r=e):(n=e,r=this);for(var i=0,a=0;a<r.length;a++)t=(0|n.words[a])+(0|r.words[a])+i,this.words[a]=67108863&t,i=t>>>26;for(;0!==i&&a<n.length;a++)t=(0|n.words[a])+i,this.words[a]=67108863&t,i=t>>>26;if(this.length=n.length,0!==i)this.words[this.length]=i,this.length++;else if(n!==this)for(;a<n.length;a++)this.words[a]=n.words[a];return this},i.prototype.add=function(e){var t;return 0!==e.negative&&0===this.negative?(e.negative=0,t=this.sub(e),e.negative^=1,t):0===e.negative&&0!==this.negative?(this.negative=0,t=e.sub(this),this.negative=1,t):this.length>e.length?this.clone().iadd(e):e.clone().iadd(this)},i.prototype.isub=function(e){if(0!==e.negative){e.negative=0;var t=this.iadd(e);return e.negative=1,t._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(e),this.negative=1,this._normSign();var n=this.cmp(e);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;var r,i;n>0?(r=this,i=e):(r=e,i=this);for(var a=0,o=0;o<i.length;o++)t=(0|r.words[o])-(0|i.words[o])+a,a=t>>26,this.words[o]=67108863&t;for(;0!==a&&o<r.length;o++)t=(0|r.words[o])+a,a=t>>26,this.words[o]=67108863&t;if(0===a&&o<r.length&&r!==this)for(;o<r.length;o++)this.words[o]=r.words[o];return this.length=Math.max(this.length,o),r!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(e){return this.clone().isub(e)};var k=function(e,t,n){var r,i,a,o=e.words,s=t.words,l=n.words,u=0,c=0|o[0],d=8191&c,f=c>>>13,h=0|o[1],p=8191&h,m=h>>>13,g=0|o[2],y=8191&g,v=g>>>13,_=0|o[3],b=8191&_,x=_>>>13,w=0|o[4],k=8191&w,T=w>>>13,M=0|o[5],A=8191&M,C=M>>>13,S=0|o[6],E=8191&S,P=S>>>13,I=0|o[7],L=8191&I,O=I>>>13,z=0|o[8],R=8191&z,D=z>>>13,N=0|o[9],F=8191&N,j=N>>>13,B=0|s[0],U=8191&B,V=B>>>13,H=0|s[1],W=8191&H,q=H>>>13,G=0|s[2],Y=8191&G,X=G>>>13,Z=0|s[3],J=8191&Z,K=Z>>>13,Q=0|s[4],$=8191&Q,ee=Q>>>13,te=0|s[5],ne=8191&te,re=te>>>13,ie=0|s[6],ae=8191&ie,oe=ie>>>13,se=0|s[7],le=8191&se,ue=se>>>13,ce=0|s[8],de=8191&ce,fe=ce>>>13,he=0|s[9],pe=8191&he,me=he>>>13;n.negative=e.negative^t.negative,n.length=19,r=Math.imul(d,U),i=Math.imul(d,V),i=i+Math.imul(f,U)|0,a=Math.imul(f,V);var ge=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(ge>>>26)|0,ge&=67108863,r=Math.imul(p,U),i=Math.imul(p,V),i=i+Math.imul(m,U)|0,a=Math.imul(m,V),r=r+Math.imul(d,W)|0,i=i+Math.imul(d,q)|0,i=i+Math.imul(f,W)|0,a=a+Math.imul(f,q)|0;var ye=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(ye>>>26)|0,ye&=67108863,r=Math.imul(y,U),i=Math.imul(y,V),i=i+Math.imul(v,U)|0,a=Math.imul(v,V),r=r+Math.imul(p,W)|0,i=i+Math.imul(p,q)|0,i=i+Math.imul(m,W)|0,a=a+Math.imul(m,q)|0,r=r+Math.imul(d,Y)|0,i=i+Math.imul(d,X)|0,i=i+Math.imul(f,Y)|0,a=a+Math.imul(f,X)|0;var ve=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(ve>>>26)|0,ve&=67108863,r=Math.imul(b,U),i=Math.imul(b,V),i=i+Math.imul(x,U)|0,a=Math.imul(x,V),r=r+Math.imul(y,W)|0,i=i+Math.imul(y,q)|0,i=i+Math.imul(v,W)|0,a=a+Math.imul(v,q)|0,r=r+Math.imul(p,Y)|0,i=i+Math.imul(p,X)|0,i=i+Math.imul(m,Y)|0,a=a+Math.imul(m,X)|0,r=r+Math.imul(d,J)|0,i=i+Math.imul(d,K)|0,i=i+Math.imul(f,J)|0,a=a+Math.imul(f,K)|0;var _e=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(_e>>>26)|0,_e&=67108863,r=Math.imul(k,U),i=Math.imul(k,V),i=i+Math.imul(T,U)|0,a=Math.imul(T,V),r=r+Math.imul(b,W)|0,i=i+Math.imul(b,q)|0,i=i+Math.imul(x,W)|0,a=a+Math.imul(x,q)|0,r=r+Math.imul(y,Y)|0,i=i+Math.imul(y,X)|0,i=i+Math.imul(v,Y)|0,a=a+Math.imul(v,X)|0,r=r+Math.imul(p,J)|0,i=i+Math.imul(p,K)|0,i=i+Math.imul(m,J)|0,a=a+Math.imul(m,K)|0,r=r+Math.imul(d,$)|0,i=i+Math.imul(d,ee)|0,i=i+Math.imul(f,$)|0,a=a+Math.imul(f,ee)|0;var be=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(be>>>26)|0,be&=67108863,r=Math.imul(A,U),i=Math.imul(A,V),i=i+Math.imul(C,U)|0,a=Math.imul(C,V),r=r+Math.imul(k,W)|0,i=i+Math.imul(k,q)|0,i=i+Math.imul(T,W)|0,a=a+Math.imul(T,q)|0,r=r+Math.imul(b,Y)|0,i=i+Math.imul(b,X)|0,i=i+Math.imul(x,Y)|0,a=a+Math.imul(x,X)|0,r=r+Math.imul(y,J)|0,i=i+Math.imul(y,K)|0,i=i+Math.imul(v,J)|0,a=a+Math.imul(v,K)|0,r=r+Math.imul(p,$)|0,i=i+Math.imul(p,ee)|0,i=i+Math.imul(m,$)|0,a=a+Math.imul(m,ee)|0,r=r+Math.imul(d,ne)|0,i=i+Math.imul(d,re)|0,i=i+Math.imul(f,ne)|0,a=a+Math.imul(f,re)|0;var xe=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(xe>>>26)|0,xe&=67108863,r=Math.imul(E,U),i=Math.imul(E,V),i=i+Math.imul(P,U)|0,a=Math.imul(P,V),r=r+Math.imul(A,W)|0,i=i+Math.imul(A,q)|0,i=i+Math.imul(C,W)|0,a=a+Math.imul(C,q)|0,r=r+Math.imul(k,Y)|0,i=i+Math.imul(k,X)|0,i=i+Math.imul(T,Y)|0,a=a+Math.imul(T,X)|0,r=r+Math.imul(b,J)|0,i=i+Math.imul(b,K)|0,i=i+Math.imul(x,J)|0,a=a+Math.imul(x,K)|0,r=r+Math.imul(y,$)|0,i=i+Math.imul(y,ee)|0,i=i+Math.imul(v,$)|0,a=a+Math.imul(v,ee)|0,r=r+Math.imul(p,ne)|0,i=i+Math.imul(p,re)|0,i=i+Math.imul(m,ne)|0,a=a+Math.imul(m,re)|0,r=r+Math.imul(d,ae)|0,i=i+Math.imul(d,oe)|0,i=i+Math.imul(f,ae)|0,a=a+Math.imul(f,oe)|0;var we=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(we>>>26)|0,we&=67108863,r=Math.imul(L,U),i=Math.imul(L,V),i=i+Math.imul(O,U)|0,a=Math.imul(O,V),r=r+Math.imul(E,W)|0,i=i+Math.imul(E,q)|0,i=i+Math.imul(P,W)|0,a=a+Math.imul(P,q)|0,r=r+Math.imul(A,Y)|0,i=i+Math.imul(A,X)|0,i=i+Math.imul(C,Y)|0,a=a+Math.imul(C,X)|0,r=r+Math.imul(k,J)|0,i=i+Math.imul(k,K)|0,i=i+Math.imul(T,J)|0,a=a+Math.imul(T,K)|0,r=r+Math.imul(b,$)|0,i=i+Math.imul(b,ee)|0,i=i+Math.imul(x,$)|0,a=a+Math.imul(x,ee)|0,r=r+Math.imul(y,ne)|0,i=i+Math.imul(y,re)|0,i=i+Math.imul(v,ne)|0,a=a+Math.imul(v,re)|0,r=r+Math.imul(p,ae)|0,i=i+Math.imul(p,oe)|0,i=i+Math.imul(m,ae)|0,a=a+Math.imul(m,oe)|0,r=r+Math.imul(d,le)|0,i=i+Math.imul(d,ue)|0,i=i+Math.imul(f,le)|0,a=a+Math.imul(f,ue)|0;var ke=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(ke>>>26)|0,ke&=67108863,r=Math.imul(R,U),i=Math.imul(R,V),i=i+Math.imul(D,U)|0,a=Math.imul(D,V),r=r+Math.imul(L,W)|0,i=i+Math.imul(L,q)|0,i=i+Math.imul(O,W)|0,a=a+Math.imul(O,q)|0,r=r+Math.imul(E,Y)|0,i=i+Math.imul(E,X)|0,i=i+Math.imul(P,Y)|0,a=a+Math.imul(P,X)|0,r=r+Math.imul(A,J)|0,i=i+Math.imul(A,K)|0,i=i+Math.imul(C,J)|0,a=a+Math.imul(C,K)|0,r=r+Math.imul(k,$)|0,i=i+Math.imul(k,ee)|0,i=i+Math.imul(T,$)|0,a=a+Math.imul(T,ee)|0,r=r+Math.imul(b,ne)|0,i=i+Math.imul(b,re)|0,i=i+Math.imul(x,ne)|0,a=a+Math.imul(x,re)|0,r=r+Math.imul(y,ae)|0,i=i+Math.imul(y,oe)|0,i=i+Math.imul(v,ae)|0,a=a+Math.imul(v,oe)|0,r=r+Math.imul(p,le)|0,i=i+Math.imul(p,ue)|0,i=i+Math.imul(m,le)|0,a=a+Math.imul(m,ue)|0,r=r+Math.imul(d,de)|0,i=i+Math.imul(d,fe)|0,i=i+Math.imul(f,de)|0,a=a+Math.imul(f,fe)|0;var Te=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Te>>>26)|0,Te&=67108863,r=Math.imul(F,U),i=Math.imul(F,V),i=i+Math.imul(j,U)|0,a=Math.imul(j,V),r=r+Math.imul(R,W)|0,i=i+Math.imul(R,q)|0,i=i+Math.imul(D,W)|0,a=a+Math.imul(D,q)|0,r=r+Math.imul(L,Y)|0,i=i+Math.imul(L,X)|0,i=i+Math.imul(O,Y)|0,a=a+Math.imul(O,X)|0,r=r+Math.imul(E,J)|0,i=i+Math.imul(E,K)|0,i=i+Math.imul(P,J)|0,a=a+Math.imul(P,K)|0,r=r+Math.imul(A,$)|0,i=i+Math.imul(A,ee)|0,i=i+Math.imul(C,$)|0,a=a+Math.imul(C,ee)|0,r=r+Math.imul(k,ne)|0,i=i+Math.imul(k,re)|0,i=i+Math.imul(T,ne)|0,a=a+Math.imul(T,re)|0,r=r+Math.imul(b,ae)|0,i=i+Math.imul(b,oe)|0,i=i+Math.imul(x,ae)|0,a=a+Math.imul(x,oe)|0,r=r+Math.imul(y,le)|0,i=i+Math.imul(y,ue)|0,i=i+Math.imul(v,le)|0,a=a+Math.imul(v,ue)|0,r=r+Math.imul(p,de)|0,i=i+Math.imul(p,fe)|0,i=i+Math.imul(m,de)|0,a=a+Math.imul(m,fe)|0,r=r+Math.imul(d,pe)|0,i=i+Math.imul(d,me)|0,i=i+Math.imul(f,pe)|0,a=a+Math.imul(f,me)|0;var Me=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Me>>>26)|0,Me&=67108863,r=Math.imul(F,W),i=Math.imul(F,q),i=i+Math.imul(j,W)|0,a=Math.imul(j,q),r=r+Math.imul(R,Y)|0,i=i+Math.imul(R,X)|0,i=i+Math.imul(D,Y)|0,a=a+Math.imul(D,X)|0,r=r+Math.imul(L,J)|0,i=i+Math.imul(L,K)|0,i=i+Math.imul(O,J)|0,a=a+Math.imul(O,K)|0,r=r+Math.imul(E,$)|0,i=i+Math.imul(E,ee)|0,i=i+Math.imul(P,$)|0,a=a+Math.imul(P,ee)|0,r=r+Math.imul(A,ne)|0,i=i+Math.imul(A,re)|0,i=i+Math.imul(C,ne)|0,a=a+Math.imul(C,re)|0,r=r+Math.imul(k,ae)|0,i=i+Math.imul(k,oe)|0,i=i+Math.imul(T,ae)|0,a=a+Math.imul(T,oe)|0,r=r+Math.imul(b,le)|0,i=i+Math.imul(b,ue)|0,i=i+Math.imul(x,le)|0,a=a+Math.imul(x,ue)|0,r=r+Math.imul(y,de)|0,i=i+Math.imul(y,fe)|0,i=i+Math.imul(v,de)|0,a=a+Math.imul(v,fe)|0,r=r+Math.imul(p,pe)|0,i=i+Math.imul(p,me)|0,i=i+Math.imul(m,pe)|0,a=a+Math.imul(m,me)|0;var Ae=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,r=Math.imul(F,Y),i=Math.imul(F,X),i=i+Math.imul(j,Y)|0,a=Math.imul(j,X),r=r+Math.imul(R,J)|0,i=i+Math.imul(R,K)|0,i=i+Math.imul(D,J)|0,a=a+Math.imul(D,K)|0,r=r+Math.imul(L,$)|0,i=i+Math.imul(L,ee)|0,i=i+Math.imul(O,$)|0,a=a+Math.imul(O,ee)|0,r=r+Math.imul(E,ne)|0,i=i+Math.imul(E,re)|0,i=i+Math.imul(P,ne)|0,a=a+Math.imul(P,re)|0,r=r+Math.imul(A,ae)|0,i=i+Math.imul(A,oe)|0,i=i+Math.imul(C,ae)|0,a=a+Math.imul(C,oe)|0,r=r+Math.imul(k,le)|0,i=i+Math.imul(k,ue)|0,i=i+Math.imul(T,le)|0,a=a+Math.imul(T,ue)|0,r=r+Math.imul(b,de)|0,i=i+Math.imul(b,fe)|0,i=i+Math.imul(x,de)|0,a=a+Math.imul(x,fe)|0,r=r+Math.imul(y,pe)|0,i=i+Math.imul(y,me)|0,i=i+Math.imul(v,pe)|0,a=a+Math.imul(v,me)|0;var Ce=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Ce>>>26)|0,Ce&=67108863,r=Math.imul(F,J),i=Math.imul(F,K),i=i+Math.imul(j,J)|0,a=Math.imul(j,K),r=r+Math.imul(R,$)|0,i=i+Math.imul(R,ee)|0,i=i+Math.imul(D,$)|0,a=a+Math.imul(D,ee)|0,r=r+Math.imul(L,ne)|0,i=i+Math.imul(L,re)|0,i=i+Math.imul(O,ne)|0,a=a+Math.imul(O,re)|0,r=r+Math.imul(E,ae)|0,i=i+Math.imul(E,oe)|0,i=i+Math.imul(P,ae)|0,a=a+Math.imul(P,oe)|0,r=r+Math.imul(A,le)|0,i=i+Math.imul(A,ue)|0,i=i+Math.imul(C,le)|0,a=a+Math.imul(C,ue)|0,r=r+Math.imul(k,de)|0,i=i+Math.imul(k,fe)|0,i=i+Math.imul(T,de)|0,a=a+Math.imul(T,fe)|0,r=r+Math.imul(b,pe)|0,i=i+Math.imul(b,me)|0,i=i+Math.imul(x,pe)|0,a=a+Math.imul(x,me)|0;var Se=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Se>>>26)|0,Se&=67108863,r=Math.imul(F,$),i=Math.imul(F,ee),i=i+Math.imul(j,$)|0,a=Math.imul(j,ee),r=r+Math.imul(R,ne)|0,i=i+Math.imul(R,re)|0,i=i+Math.imul(D,ne)|0,a=a+Math.imul(D,re)|0,r=r+Math.imul(L,ae)|0,i=i+Math.imul(L,oe)|0,i=i+Math.imul(O,ae)|0,a=a+Math.imul(O,oe)|0,r=r+Math.imul(E,le)|0,i=i+Math.imul(E,ue)|0,i=i+Math.imul(P,le)|0,a=a+Math.imul(P,ue)|0,r=r+Math.imul(A,de)|0,i=i+Math.imul(A,fe)|0,i=i+Math.imul(C,de)|0,a=a+Math.imul(C,fe)|0,r=r+Math.imul(k,pe)|0,i=i+Math.imul(k,me)|0,i=i+Math.imul(T,pe)|0,a=a+Math.imul(T,me)|0;var Ee=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Ee>>>26)|0,Ee&=67108863,r=Math.imul(F,ne),i=Math.imul(F,re),i=i+Math.imul(j,ne)|0,a=Math.imul(j,re),r=r+Math.imul(R,ae)|0,i=i+Math.imul(R,oe)|0,i=i+Math.imul(D,ae)|0,a=a+Math.imul(D,oe)|0,r=r+Math.imul(L,le)|0,i=i+Math.imul(L,ue)|0,i=i+Math.imul(O,le)|0,a=a+Math.imul(O,ue)|0,r=r+Math.imul(E,de)|0,i=i+Math.imul(E,fe)|0,i=i+Math.imul(P,de)|0,a=a+Math.imul(P,fe)|0,r=r+Math.imul(A,pe)|0,i=i+Math.imul(A,me)|0,i=i+Math.imul(C,pe)|0,a=a+Math.imul(C,me)|0;var Pe=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Pe>>>26)|0,Pe&=67108863,r=Math.imul(F,ae),i=Math.imul(F,oe),i=i+Math.imul(j,ae)|0,a=Math.imul(j,oe),r=r+Math.imul(R,le)|0,i=i+Math.imul(R,ue)|0,i=i+Math.imul(D,le)|0,a=a+Math.imul(D,ue)|0,r=r+Math.imul(L,de)|0,i=i+Math.imul(L,fe)|0,i=i+Math.imul(O,de)|0,a=a+Math.imul(O,fe)|0,r=r+Math.imul(E,pe)|0,i=i+Math.imul(E,me)|0,i=i+Math.imul(P,pe)|0,a=a+Math.imul(P,me)|0;var Ie=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Ie>>>26)|0,Ie&=67108863,r=Math.imul(F,le),i=Math.imul(F,ue),i=i+Math.imul(j,le)|0,a=Math.imul(j,ue),r=r+Math.imul(R,de)|0,i=i+Math.imul(R,fe)|0,i=i+Math.imul(D,de)|0,a=a+Math.imul(D,fe)|0,r=r+Math.imul(L,pe)|0,i=i+Math.imul(L,me)|0,i=i+Math.imul(O,pe)|0,a=a+Math.imul(O,me)|0;var Le=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Le>>>26)|0,Le&=67108863,r=Math.imul(F,de),i=Math.imul(F,fe),i=i+Math.imul(j,de)|0,a=Math.imul(j,fe),r=r+Math.imul(R,pe)|0,i=i+Math.imul(R,me)|0,i=i+Math.imul(D,pe)|0,a=a+Math.imul(D,me)|0;var Oe=(u+r|0)+((8191&i)<<13)|0;u=(a+(i>>>13)|0)+(Oe>>>26)|0,Oe&=67108863,r=Math.imul(F,pe),i=Math.imul(F,me),i=i+Math.imul(j,pe)|0,a=Math.imul(j,me);var ze=(u+r|0)+((8191&i)<<13)|0;return u=(a+(i>>>13)|0)+(ze>>>26)|0,ze&=67108863,l[0]=ge,l[1]=ye,l[2]=ve,l[3]=_e,l[4]=be,l[5]=xe,l[6]=we,l[7]=ke,l[8]=Te,l[9]=Me,l[10]=Ae,l[11]=Ce,l[12]=Se,l[13]=Ee,l[14]=Pe,l[15]=Ie,l[16]=Le,l[17]=Oe,l[18]=ze,0!==u&&(l[19]=u,n.length++),n};Math.imul||(k=l),i.prototype.mulTo=function(e,t){var n=this.length+e.length;return 10===this.length&&10===e.length?k(this,e,t):n<63?l(this,e,t):n<1024?u(this,e,t):c(this,e,t)},d.prototype.makeRBT=function(e){for(var t=new Array(e),n=i.prototype._countBits(e)-1,r=0;r<e;r++)t[r]=this.revBin(r,n,e);return t},d.prototype.revBin=function(e,t,n){if(0===e||e===n-1)return e;for(var r=0,i=0;i<t;i++)r|=(1&e)<<t-i-1,e>>=1;return r},d.prototype.permute=function(e,t,n,r,i,a){for(var o=0;o<a;o++)r[o]=t[e[o]],i[o]=n[e[o]]},d.prototype.transform=function(e,t,n,r,i,a){this.permute(a,e,t,n,r,i);for(var o=1;o<i;o<<=1)for(var s=o<<1,l=Math.cos(2*Math.PI/s),u=Math.sin(2*Math.PI/s),c=0;c<i;c+=s)for(var d=l,f=u,h=0;h<o;h++){var p=n[c+h],m=r[c+h],g=n[c+h+o],y=r[c+h+o],v=d*g-f*y;y=d*y+f*g,g=v,n[c+h]=p+g,r[c+h]=m+y,n[c+h+o]=p-g,r[c+h+o]=m-y,h!==s&&(v=l*d-u*f,f=l*f+u*d,d=v)}},d.prototype.guessLen13b=function(e,t){var n=1|Math.max(t,e),r=1&n,i=0;for(n=n/2|0;n;n>>>=1)i++;return 1<<i+1+r},d.prototype.conjugate=function(e,t,n){if(!(n<=1))for(var r=0;r<n/2;r++){var i=e[r];e[r]=e[n-r-1],e[n-r-1]=i,i=t[r],t[r]=-t[n-r-1],t[n-r-1]=-i}},d.prototype.normalize13b=function(e,t){for(var n=0,r=0;r<t/2;r++){var i=8192*Math.round(e[2*r+1]/t)+Math.round(e[2*r]/t)+n;e[r]=67108863&i,n=i<67108864?0:i/67108864|0}return e},d.prototype.convert13b=function(e,t,r,i){for(var a=0,o=0;o<t;o++)a+=0|e[o],r[2*o]=8191&a,a>>>=13,r[2*o+1]=8191&a,a>>>=13;for(o=2*t;o<i;++o)r[o]=0;n(0===a),n(0===(-8192&a))},d.prototype.stub=function(e){for(var t=new Array(e),n=0;n<e;n++)t[n]=0;return t},d.prototype.mulp=function(e,t,n){var r=2*this.guessLen13b(e.length,t.length),i=this.makeRBT(r),a=this.stub(r),o=new Array(r),s=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),d=new Array(r),f=n.words;f.length=r,this.convert13b(e.words,e.length,o,r),this.convert13b(t.words,t.length,u,r),this.transform(o,a,s,l,r,i),this.transform(u,a,c,d,r,i);for(var h=0;h<r;h++){var p=s[h]*c[h]-l[h]*d[h];l[h]=s[h]*d[h]+l[h]*c[h],s[h]=p}return this.conjugate(s,l,r),this.transform(s,l,f,a,r,i),this.conjugate(f,a,r),this.normalize13b(f,r),n.negative=e.negative^t.negative,n.length=e.length+t.length,n.strip()},i.prototype.mul=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),this.mulTo(e,t)},i.prototype.mulf=function(e){var t=new i(null);return t.words=new Array(this.length+e.length),c(this,e,t)},i.prototype.imul=function(e){return this.clone().mulTo(e,this)},i.prototype.imuln=function(e){n("number"===typeof e),n(e<67108864);for(var t=0,r=0;r<this.length;r++){var i=(0|this.words[r])*e,a=(67108863&i)+(67108863&t);t>>=26,t+=i/67108864|0,t+=a>>>26,this.words[r]=67108863&a}return 0!==t&&(this.words[r]=t,this.length++),this},i.prototype.muln=function(e){return this.clone().imuln(e)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(e){var t=s(e);if(0===t.length)return new i(1);for(var n=this,r=0;r<t.length&&0===t[r];r++,n=n.sqr());if(++r<t.length)for(var a=n.sqr();r<t.length;r++,a=a.sqr())0!==t[r]&&(n=n.mul(a));return n},i.prototype.iushln=function(e){n("number"===typeof e&&e>=0);var t,r=e%26,i=(e-r)/26,a=67108863>>>26-r<<26-r;if(0!==r){var o=0;for(t=0;t<this.length;t++){var s=this.words[t]&a,l=(0|this.words[t])-s<<r;this.words[t]=l|o,o=s>>>26-r}o&&(this.words[t]=o,this.length++)}if(0!==i){for(t=this.length-1;t>=0;t--)this.words[t+i]=this.words[t];for(t=0;t<i;t++)this.words[t]=0;this.length+=i}return this.strip()},i.prototype.ishln=function(e){return n(0===this.negative),this.iushln(e)},i.prototype.iushrn=function(e,t,r){n("number"===typeof e&&e>=0);var i;i=t?(t-t%26)/26:0;var a=e%26,o=Math.min((e-a)/26,this.length),s=67108863^67108863>>>a<<a,l=r;if(i-=o,i=Math.max(0,i),l){for(var u=0;u<o;u++)l.words[u]=this.words[u];l.length=o}if(0===o);else if(this.length>o)for(this.length-=o,u=0;u<this.length;u++)this.words[u]=this.words[u+o];else this.words[0]=0,this.length=1;var c=0;for(u=this.length-1;u>=0&&(0!==c||u>=i);u--){var d=0|this.words[u];this.words[u]=c<<26-a|d>>>a,c=d&s}return l&&0!==c&&(l.words[l.length++]=c),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(e,t,r){return n(0===this.negative),this.iushrn(e,t,r)},i.prototype.shln=function(e){return this.clone().ishln(e)},i.prototype.ushln=function(e){return this.clone().iushln(e)},i.prototype.shrn=function(e){return this.clone().ishrn(e)},i.prototype.ushrn=function(e){return this.clone().iushrn(e)},i.prototype.testn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26,i=1<<t;return!(this.length<=r)&&!!(this.words[r]&i)},i.prototype.imaskn=function(e){n("number"===typeof e&&e>=0);var t=e%26,r=(e-t)/26;if(n(0===this.negative,"imaskn works only with positive numbers"),this.length<=r)return this;if(0!==t&&r++,this.length=Math.min(r,this.length),0!==t){var i=67108863^67108863>>>t<<t;this.words[this.length-1]&=i}return this.strip()},i.prototype.maskn=function(e){return this.clone().imaskn(e)},i.prototype.iaddn=function(e){return n("number"===typeof e),n(e<67108864),e<0?this.isubn(-e):0!==this.negative?1===this.length&&(0|this.words[0])<e?(this.words[0]=e-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(e),this.negative=1,this):this._iaddn(e)},i.prototype._iaddn=function(e){this.words[0]+=e;for(var t=0;t<this.length&&this.words[t]>=67108864;t++)this.words[t]-=67108864,t===this.length-1?this.words[t+1]=1:this.words[t+1]++;return this.length=Math.max(this.length,t+1),this},i.prototype.isubn=function(e){if(n("number"===typeof e),n(e<67108864),e<0)return this.iaddn(-e);if(0!==this.negative)return this.negative=0,this.iaddn(e),this.negative=1,this;if(this.words[0]-=e,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var t=0;t<this.length&&this.words[t]<0;t++)this.words[t]+=67108864,this.words[t+1]-=1;return this.strip()},i.prototype.addn=function(e){return this.clone().iaddn(e)},i.prototype.subn=function(e){return this.clone().isubn(e)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(e,t,r){var i,a=e.length+r;this._expand(a);var o,s=0;for(i=0;i<e.length;i++){o=(0|this.words[i+r])+s;var l=(0|e.words[i])*t;o-=67108863&l,s=(o>>26)-(l/67108864|0),this.words[i+r]=67108863&o}for(;i<this.length-r;i++)o=(0|this.words[i+r])+s,s=o>>26,this.words[i+r]=67108863&o;if(0===s)return this.strip();for(n(-1===s),s=0,i=0;i<this.length;i++)o=-(0|this.words[i])+s,s=o>>26,this.words[i]=67108863&o;return this.negative=1,this.strip()},i.prototype._wordDiv=function(e,t){var n=this.length-e.length,r=this.clone(),a=e,o=0|a.words[a.length-1];0!==(n=26-this._countBits(o))&&(a=a.ushln(n),r.iushln(n),o=0|a.words[a.length-1]);var s,l=r.length-a.length;if("mod"!==t){s=new i(null),s.length=l+1,s.words=new Array(s.length);for(var u=0;u<s.length;u++)s.words[u]=0}var c=r.clone()._ishlnsubmul(a,1,l);0===c.negative&&(r=c,s&&(s.words[l]=1));for(var d=l-1;d>=0;d--){var f=67108864*(0|r.words[a.length+d])+(0|r.words[a.length+d-1]);for(f=Math.min(f/o|0,67108863),r._ishlnsubmul(a,f,d);0!==r.negative;)f--,r.negative=0,r._ishlnsubmul(a,1,d),r.isZero()||(r.negative^=1);s&&(s.words[d]=f)}return s&&s.strip(),r.strip(),"div"!==t&&0!==n&&r.iushrn(n),{div:s||null,mod:r}},i.prototype.divmod=function(e,t,r){if(n(!e.isZero()),this.isZero())return{div:new i(0),mod:new i(0)};var a,o,s;return 0!==this.negative&&0===e.negative?(s=this.neg().divmod(e,t),"mod"!==t&&(a=s.div.neg()),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.iadd(e)),{div:a,mod:o}):0===this.negative&&0!==e.negative?(s=this.divmod(e.neg(),t),"mod"!==t&&(a=s.div.neg()),{div:a,mod:s.mod}):0!==(this.negative&e.negative)?(s=this.neg().divmod(e.neg(),t),"div"!==t&&(o=s.mod.neg(),r&&0!==o.negative&&o.isub(e)),{div:s.div,mod:o}):e.length>this.length||this.cmp(e)<0?{div:new i(0),mod:this}:1===e.length?"div"===t?{div:this.divn(e.words[0]),mod:null}:"mod"===t?{div:null,mod:new i(this.modn(e.words[0]))}:{div:this.divn(e.words[0]),mod:new i(this.modn(e.words[0]))}:this._wordDiv(e,t)},i.prototype.div=function(e){return this.divmod(e,"div",!1).div},i.prototype.mod=function(e){return this.divmod(e,"mod",!1).mod},i.prototype.umod=function(e){return this.divmod(e,"mod",!0).mod},i.prototype.divRound=function(e){var t=this.divmod(e);if(t.mod.isZero())return t.div;var n=0!==t.div.negative?t.mod.isub(e):t.mod,r=e.ushrn(1),i=e.andln(1),a=n.cmp(r);return a<0||1===i&&0===a?t.div:0!==t.div.negative?t.div.isubn(1):t.div.iaddn(1)},i.prototype.modn=function(e){n(e<=67108863);for(var t=(1<<26)%e,r=0,i=this.length-1;i>=0;i--)r=(t*r+(0|this.words[i]))%e;return r},i.prototype.idivn=function(e){n(e<=67108863);for(var t=0,r=this.length-1;r>=0;r--){var i=(0|this.words[r])+67108864*t;this.words[r]=i/e|0,t=i%e}return this.strip()},i.prototype.divn=function(e){return this.clone().idivn(e)},i.prototype.egcd=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),o=new i(0),s=new i(0),l=new i(1),u=0;t.isEven()&&r.isEven();)t.iushrn(1),r.iushrn(1),++u;for(var c=r.clone(),d=t.clone();!t.isZero();){for(var f=0,h=1;0===(t.words[0]&h)&&f<26;++f,h<<=1);if(f>0)for(t.iushrn(f);f-- >0;)(a.isOdd()||o.isOdd())&&(a.iadd(c),o.isub(d)),a.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(r.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(r.iushrn(p);p-- >0;)(s.isOdd()||l.isOdd())&&(s.iadd(c),l.isub(d)),s.iushrn(1),l.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(s),o.isub(l)):(r.isub(t),s.isub(a),l.isub(o))}return{a:s,b:l,gcd:r.iushln(u)}},i.prototype._invmp=function(e){n(0===e.negative),n(!e.isZero());var t=this,r=e.clone();t=0!==t.negative?t.umod(e):t.clone();for(var a=new i(1),o=new i(0),s=r.clone();t.cmpn(1)>0&&r.cmpn(1)>0;){for(var l=0,u=1;0===(t.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(t.iushrn(l);l-- >0;)a.isOdd()&&a.iadd(s),a.iushrn(1);for(var c=0,d=1;0===(r.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(r.iushrn(c);c-- >0;)o.isOdd()&&o.iadd(s),o.iushrn(1);t.cmp(r)>=0?(t.isub(r),a.isub(o)):(r.isub(t),o.isub(a))}var f;return f=0===t.cmpn(1)?a:o,f.cmpn(0)<0&&f.iadd(e),f},i.prototype.gcd=function(e){if(this.isZero())return e.abs();if(e.isZero())return this.abs();var t=this.clone(),n=e.clone();t.negative=0,n.negative=0;for(var r=0;t.isEven()&&n.isEven();r++)t.iushrn(1),n.iushrn(1);for(;;){for(;t.isEven();)t.iushrn(1);for(;n.isEven();)n.iushrn(1);var i=t.cmp(n);if(i<0){var a=t;t=n,n=a}else if(0===i||0===n.cmpn(1))break;t.isub(n)}return n.iushln(r)},i.prototype.invm=function(e){return this.egcd(e).a.umod(e)},i.prototype.isEven=function(){return 0===(1&this.words[0])},i.prototype.isOdd=function(){return 1===(1&this.words[0])},i.prototype.andln=function(e){return this.words[0]&e},i.prototype.bincn=function(e){n("number"===typeof e);var t=e%26,r=(e-t)/26,i=1<<t;if(this.length<=r)return this._expand(r+1),this.words[r]|=i,this;for(var a=i,o=r;0!==a&&o<this.length;o++){var s=0|this.words[o];s+=a,a=s>>>26,s&=67108863,this.words[o]=s}return 0!==a&&(this.words[o]=a,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(e){var t=e<0;if(0!==this.negative&&!t)return-1;if(0===this.negative&&t)return 1;this.strip();var r;if(this.length>1)r=1;else{t&&(e=-e),n(e<=67108863,"Number is too big");var i=0|this.words[0];r=i===e?0:i<e?-1:1}return 0!==this.negative?0|-r:r},i.prototype.cmp=function(e){if(0!==this.negative&&0===e.negative)return-1;if(0===this.negative&&0!==e.negative)return 1;var t=this.ucmp(e);return 0!==this.negative?0|-t:t},i.prototype.ucmp=function(e){if(this.length>e.length)return 1;if(this.length<e.length)return-1;for(var t=0,n=this.length-1;n>=0;n--){var r=0|this.words[n],i=0|e.words[n];if(r!==i){r<i?t=-1:r>i&&(t=1);break}}return t},i.prototype.gtn=function(e){return 1===this.cmpn(e)},i.prototype.gt=function(e){return 1===this.cmp(e)},i.prototype.gten=function(e){return this.cmpn(e)>=0},i.prototype.gte=function(e){return this.cmp(e)>=0},i.prototype.ltn=function(e){return-1===this.cmpn(e)},i.prototype.lt=function(e){return-1===this.cmp(e)},i.prototype.lten=function(e){return this.cmpn(e)<=0},i.prototype.lte=function(e){return this.cmp(e)<=0},i.prototype.eqn=function(e){return 0===this.cmpn(e)},i.prototype.eq=function(e){return 0===this.cmp(e)},i.red=function(e){return new y(e)},i.prototype.toRed=function(e){return n(!this.red,"Already a number in reduction context"),n(0===this.negative,"red works only with positives"),e.convertTo(this)._forceRed(e)},i.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(e){return this.red=e,this},i.prototype.forceRed=function(e){return n(!this.red,"Already a number in reduction context"),this._forceRed(e)},i.prototype.redAdd=function(e){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,e)},i.prototype.redIAdd=function(e){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,e)},i.prototype.redSub=function(e){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,e)},i.prototype.redISub=function(e){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,e)},i.prototype.redShl=function(e){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,e)},i.prototype.redMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.mul(this,e)},i.prototype.redIMul=function(e){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,e),this.red.imul(this,e)},i.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(e){return n(this.red&&!e.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,e)};var T={k256:null,p224:null,p192:null,p25519:null};f.prototype._tmp=function(){var e=new i(null);return e.words=new Array(Math.ceil(this.n/13)),e},f.prototype.ireduce=function(e){var t,n=e;do{this.split(n,this.tmp),n=this.imulK(n),n=n.iadd(this.tmp),t=n.bitLength()}while(t>this.n);var r=t<this.n?-1:n.ucmp(this.p);return 0===r?(n.words[0]=0,n.length=1):r>0?n.isub(this.p):n.strip(),n},f.prototype.split=function(e,t){e.iushrn(this.n,0,t)},f.prototype.imulK=function(e){return e.imul(this.k)},r(h,f),h.prototype.split=function(e,t){for(var n=Math.min(e.length,9),r=0;r<n;r++)t.words[r]=e.words[r];if(t.length=n,e.length<=9)return e.words[0]=0,void(e.length=1);var i=e.words[9];for(t.words[t.length++]=4194303&i,r=10;r<e.length;r++){var a=0|e.words[r];e.words[r-10]=(4194303&a)<<4|i>>>22,i=a}i>>>=22,e.words[r-10]=i,0===i&&e.length>10?e.length-=10:e.length-=9},h.prototype.imulK=function(e){e.words[e.length]=0,e.words[e.length+1]=0,e.length+=2;for(var t=0,n=0;n<e.length;n++){var r=0|e.words[n];t+=977*r,e.words[n]=67108863&t,t=64*r+(t/67108864|0)}return 0===e.words[e.length-1]&&(e.length--,0===e.words[e.length-1]&&e.length--),e},r(p,f),r(m,f),r(g,f),g.prototype.imulK=function(e){for(var t=0,n=0;n<e.length;n++){var r=19*(0|e.words[n])+t,i=67108863&r;r>>>=26,e.words[n]=i,t=r}return 0!==t&&(e.words[e.length++]=t),e},i._prime=function(e){if(T[e])return T[e];var t;if("k256"===e)t=new h;else if("p224"===e)t=new p;else if("p192"===e)t=new m;else{if("p25519"!==e)throw new Error("Unknown prime "+e);t=new g}return T[e]=t,t},y.prototype._verify1=function(e){n(0===e.negative,"red works only with positives"),n(e.red,"red works only with red numbers")},y.prototype._verify2=function(e,t){n(0===(e.negative|t.negative),"red works only with positives"),n(e.red&&e.red===t.red,"red works only with red numbers")},y.prototype.imod=function(e){return this.prime?this.prime.ireduce(e)._forceRed(this):e.umod(this.m)._forceRed(this)},y.prototype.neg=function(e){return e.isZero()?e.clone():this.m.sub(e)._forceRed(this)},y.prototype.add=function(e,t){this._verify2(e,t);var n=e.add(t);return n.cmp(this.m)>=0&&n.isub(this.m),n._forceRed(this)},y.prototype.iadd=function(e,t){this._verify2(e,t);var n=e.iadd(t);return n.cmp(this.m)>=0&&n.isub(this.m),n},y.prototype.sub=function(e,t){this._verify2(e,t);var n=e.sub(t);return n.cmpn(0)<0&&n.iadd(this.m),n._forceRed(this)},y.prototype.isub=function(e,t){this._verify2(e,t);var n=e.isub(t);return n.cmpn(0)<0&&n.iadd(this.m),n},y.prototype.shl=function(e,t){return this._verify1(e),this.imod(e.ushln(t))},y.prototype.imul=function(e,t){return this._verify2(e,t),this.imod(e.imul(t))},y.prototype.mul=function(e,t){return this._verify2(e,t),this.imod(e.mul(t))},y.prototype.isqr=function(e){return this.imul(e,e.clone())},y.prototype.sqr=function(e){return this.mul(e,e)},y.prototype.sqrt=function(e){if(e.isZero())return e.clone();var t=this.m.andln(3);if(n(t%2===1),3===t){var r=this.m.add(new i(1)).iushrn(2);return this.pow(e,r)}for(var a=this.m.subn(1),o=0;!a.isZero()&&0===a.andln(1);)o++,a.iushrn(1);n(!a.isZero());var s=new i(1).toRed(this),l=s.redNeg(),u=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new i(2*c*c).toRed(this);0!==this.pow(c,u).cmp(l);)c.redIAdd(l);for(var d=this.pow(c,a),f=this.pow(e,a.addn(1).iushrn(1)),h=this.pow(e,a),p=o;0!==h.cmp(s);){for(var m=h,g=0;0!==m.cmp(s);g++)m=m.redSqr();n(g<p);var y=this.pow(d,new i(1).iushln(p-g-1));f=f.redMul(y),d=y.redSqr(),h=h.redMul(d),p=g}return f},y.prototype.invm=function(e){var t=e._invmp(this.m);return 0!==t.negative?(t.negative=0,this.imod(t).redNeg()):this.imod(t)},y.prototype.pow=function(e,t){if(t.isZero())return new i(1).toRed(this);if(0===t.cmpn(1))return e.clone();var n=new Array(16);n[0]=new i(1).toRed(this),n[1]=e;for(var r=2;r<n.length;r++)n[r]=this.mul(n[r-1],e);var a=n[0],o=0,s=0,l=t.bitLength()%26;for(0===l&&(l=26),r=t.length-1;r>=0;r--){for(var u=t.words[r],c=l-1;c>=0;c--){var d=u>>c&1;a!==n[0]&&(a=this.sqr(a)),0!==d||0!==o?(o<<=1,o|=d,(4===++s||0===r&&0===c)&&(a=this.mul(a,n[o]),s=0,o=0)):s=0}l=26}return a},y.prototype.convertTo=function(e){var t=e.umod(this.m);return t===e?t.clone():t},y.prototype.convertFrom=function(e){var t=e.clone();return t.red=null,t},i.mont=function(e){return new v(e)},r(v,y),v.prototype.convertTo=function(e){return this.imod(e.ushln(this.shift))},v.prototype.convertFrom=function(e){var t=this.imod(e.mul(this.rinv));return t.red=null,t},v.prototype.imul=function(e,t){if(e.isZero()||t.isZero())return e.words[0]=0,e.length=1,e;var n=e.imul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),i=n.isub(r).iushrn(this.shift),a=i;return i.cmp(this.m)>=0?a=i.isub(this.m):i.cmpn(0)<0&&(a=i.iadd(this.m)),a._forceRed(this)},v.prototype.mul=function(e,t){if(e.isZero()||t.isZero())return new i(0)._forceRed(this);var n=e.mul(t),r=n.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),a=n.isub(r).iushrn(this.shift),o=a;return a.cmp(this.m)>=0?o=a.isub(this.m):a.cmpn(0)<0&&(o=a.iadd(this.m)),o._forceRed(this)},v.prototype.invm=function(e){return this.imod(e._invmp(this.m).mul(this.r2))._forceRed(this)}}(mG,this),mG=mG.exports;var gG=Df,yG={};(function(e){function t(e,t){return f[0]=e,f[1]=t,d[0]}function n(e){return d[0]=e,f[0]}function r(e){return d[0]=e,f[1]}function i(e,t){return f[1]=e,f[0]=t,d[0]}function a(e){return d[0]=e,f[1]}function o(e){return d[0]=e,f[0]}function s(e,t){return h.writeUInt32LE(e,0,!0),h.writeUInt32LE(t,4,!0),h.readDoubleLE(0,!0)}function l(e){return h.writeDoubleLE(e,0,!0),h.readUInt32LE(0,!0)}function u(e){return h.writeDoubleLE(e,0,!0),h.readUInt32LE(4,!0)}var c=!1;if("undefined"!==typeof Float64Array){var d=new Float64Array(1),f=new Uint32Array(d.buffer);d[0]=1,c=!0,1072693248===f[1]?(yG=function(e){return d[0]=e,[f[0],f[1]]},yG.pack=t,yG.lo=n,yG.hi=r):1072693248===f[0]?(yG=function(e){return d[0]=e,[f[1],f[0]]},yG.pack=i,yG.lo=a,yG.hi=o):c=!1}if(!c){var h=new e(8);yG=function(e){return h.writeDoubleLE(e,0,!0),[h.readUInt32LE(0,!0),h.readUInt32LE(4,!0)]},yG.pack=s,yG.lo=l,yG.hi=u}yG.sign=function(e){return yG.hi(e)>>>31},yG.exponent=function(e){return(yG.hi(e)<<1>>>21)-1023},yG.fraction=function(e){var t=yG.lo(e),n=yG.hi(e),r=1048575&n;return 2146435072&n&&(r+=1<<20),[t,r]},yG.denormalized=function(e){return!(2146435072&yG.hi(e))}}).call(this,TW.Buffer);var vG=Nf,_G=Ff,bG=jf,xG=Bf,wG=Uf,kG=Vf,TG=Hf,MG=Wf,AG=pW.countTrailingZeros,CG=qf,SG=Gf,EG={},PG="d",IG="ax",LG="vv",OG="fp",zG="es",RG="rs",DG="re",NG="rb",FG="ri",jG="rp",BG="bs",UG="be",VG="bb",HG="bi",WG="bp",qG="rv",GG="Q",YG=[PG,IG,LG,RG,DG,NG,FG,BG,UG,VG,HG];EG.partial=Xf(!1),EG.full=Xf(!0);var XG,ZG=Zf,JG="for(var j=2*a,k=j*c,l=k,m=c,n=b,o=a+b,p=c;d>p;++p,k+=j){var _;if($)if(m===p)m+=1,l+=j;else{for(var s=0;j>s;++s){var t=e[k+s];e[k+s]=e[l],e[l++]=t}var u=f[p];f[p]=f[m],f[m++]=u}}return m",KG=Kf,QG=ZG("lo<p0",["p0"]),$G=8,eY=Qf,tY=32,nY={init:sh,sweepBipartite:ch,sweepComplete:dh,scanBipartite:fh,scanComplete:hh},rY=1<<28,iY=EW.mallocInt32(1024),aY=EW.mallocInt32(1024),oY=EW.mallocInt32(1024),sY=EW.mallocInt32(1024),lY=EW.mallocInt32(1024),uY=EW.mallocInt32(1024),cY=EW.mallocDouble(8192),dY=vh,fY=EG.partial,hY=EG.full,pY=128,mY=1<<22,gY=1<<22,yY=ZG("!(lo>=p0)&&!(p1>=hi)",["p0","p1"]),vY=ZG("lo===p0",["p0"]),_Y=ZG("lo<p0",["p0"]),bY=ZG("hi<=p0",["p0"]),xY=ZG("lo<=p0&&p0<=hi",["p0"]),wY=ZG("lo<p0&&p0<=hi",["p0"]),kY=6,TY=2,MY=EW.mallocInt32(1024),AY=EW.mallocDouble(1024),CY=Mh,SY=Ah,EY=Ch,PY=Sh,IY=Eh,LY=Ph,OY=Ih,zY=Lh,RY=zh,DY=Math.pow(2,-1074),NY=-1>>>0,FY=Rh,jY=Dh,BY=Fh,UY=eG[3],VY=jh,HY=jh.prototype;Object.defineProperty(HY,"length",{get:function(){return this.roots.length}}),HY.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},HY.find=function(e){for(var t=e,n=this.roots;n[e]!==e;)e=n[e];for(;n[t]!==e;){var r=n[t];n[t]=e,t=r}return e},HY.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,a=this.roots,o=i[n],s=i[r];o<s?a[n]=r:s<o?a[r]=n:(a[r]=n,++i[n])}};var WY=Qh,qY=$h,GY=ep,YY=function(e){return e<0?-1:e>0?1:0},XY=np,ZY=rp,JY=ip,KY={ge:op(">=",!1,"GE"),gt:op(">",!1,"GT"),lt:op("<",!0,"LT"),le:op("<=",!0,"LE"),eq:op("-",!0,"EQ",!0)},QY=0,$Y=1,eX=bp,tX=sp.prototype;tX.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},tX.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?cp(this,e):this.left.insert(e):this.left=vp([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?cp(this,e):this.right.insert(e):this.right=vp([e]);else{var n=KY.ge(this.leftPoints,e,gp),r=KY.ge(this.rightPoints,e,yp);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}},tX.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return QY;if(4*(this.right?this.right.count:0)>3*(t-1))return dp(this,e);var n=this.left.remove(e);return 2===n?(this.left=null,this.count-=1,$Y):(n===$Y&&(this.count-=1),n)}if(e[0]>this.mid){if(!this.right)return QY;if(4*(this.left?this.left.count:0)>3*(t-1))return dp(this,e);var n=this.right.remove(e);return 2===n?(this.right=null,this.count-=1,$Y):(n===$Y&&(this.count-=1),n)}if(1===this.count)return this.leftPoints[0]===e?2:QY;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var r=this,i=this.left;i.right;)r=i,i=i.right;if(r===this)i.right=this.right;else{var a=this.left,n=this.right;r.count-=i.count,r.right=i.left,i.left=a,i.right=n}lp(this,i),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?lp(this,this.left):lp(this,this.right);return $Y}for(var a=KY.ge(this.leftPoints,e,gp);a<this.leftPoints.length&&this.leftPoints[a][0]===e[0];++a)if(this.leftPoints[a]===e){this.count-=1,this.leftPoints.splice(a,1);for(var n=KY.ge(this.rightPoints,e,yp);n<this.rightPoints.length&&this.rightPoints[n][1]===e[1];++n)if(this.rightPoints[n]===e)return this.rightPoints.splice(n,1),$Y}return QY},tX.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return fp(this.leftPoints,e,t)}if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return hp(this.rightPoints,e,t)}return pp(this.leftPoints,t)},tX.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?fp(this.leftPoints,t,n):e>this.mid?hp(this.rightPoints,e,n):pp(this.leftPoints,n)};var nX=_p.prototype;nX.insert=function(e){this.root?this.root.insert(e):this.root=new sp(e[0],null,null,[e],[e])},nX.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),t!==QY}return!1},nX.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},nX.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(nX,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(nX,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});var rX=Op,iX=0,aX=1,oX=Mp.prototype;Object.defineProperty(oX,"keys",{get:function(){var e=[];return this.forEach(function(t,n){e.push(t)}),e}}),Object.defineProperty(oX,"values",{get:function(){var e=[];return this.forEach(function(t,n){e.push(n)}),e}}),Object.defineProperty(oX,"length",{get:function(){return this.root?this.root._count:0}}),oX.insert=function(e,t){for(var n=this._compare,r=this.root,i=[],a=[];r;){var o=n(e,r.key);i.push(r),a.push(o),r=o<=0?r.left:r.right}i.push(new xp(iX,e,t,null,null,1));for(var s=i.length-2;s>=0;--s){var r=i[s];a[s]<=0?i[s]=new xp(r._color,r.key,r.value,i[s+1],r.right,r._count+1):i[s]=new xp(r._color,r.key,r.value,r.left,i[s+1],r._count+1)}for(var s=i.length-1;s>1;--s){var l=i[s-1],r=i[s];if(l._color===aX||r._color===aX)break;var u=i[s-2];if(u.left===l)if(l.left===r){var c=u.right;if(!c||c._color!==iX){if(u._color=iX,u.left=l.right,l._color=aX,l.right=u,i[s-2]=l,i[s-1]=r,Tp(u),Tp(l),s>=3){var d=i[s-3];d.left===u?d.left=l:d.right=l}break}l._color=aX,u.right=kp(aX,c),u._color=iX,s-=1}else{var c=u.right;if(!c||c._color!==iX){if(l.right=r.left,u._color=iX,u.left=r.right,r._color=aX,r.left=l,r.right=u,i[s-2]=r,i[s-1]=l,Tp(u),Tp(l),Tp(r),s>=3){var d=i[s-3];d.left===u?d.left=r:d.right=r}break}l._color=aX,u.right=kp(aX,c),u._color=iX,s-=1}else if(l.right===r){var c=u.left;if(!c||c._color!==iX){if(u._color=iX,u.right=l.left,l._color=aX,l.left=u,i[s-2]=l,i[s-1]=r,Tp(u),Tp(l),s>=3){var d=i[s-3];d.right===u?d.right=l:d.left=l}break}l._color=aX,u.left=kp(aX,c),u._color=iX,s-=1}else{var c=u.left;if(!c||c._color!==iX){if(l.left=r.right,u._color=iX,u.right=r.left,r._color=aX,r.right=l,r.left=u,i[s-2]=r,i[s-1]=l,Tp(u),Tp(l),Tp(r),s>=3){var d=i[s-3];d.right===u?d.right=r:d.left=r}break}l._color=aX,u.left=kp(aX,c),u._color=iX,s-=1}}return i[0]._color=aX,new Mp(n,i[0])},oX.forEach=function(e,t,n){if(this.root)switch(arguments.length){case 1:return Ap(e,this.root);case 2:return Cp(t,this._compare,e,this.root);case 3:if(this._compare(t,n)>=0)return;return Sp(t,n,this._compare,e,this.root)}},Object.defineProperty(oX,"begin",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.left;return new Ep(this,e)}}),Object.defineProperty(oX,"end",{get:function(){for(var e=[],t=this.root;t;)e.push(t),t=t.right;return new Ep(this,e)}}),oX.at=function(e){if(e<0)return new Ep(this,[]);for(var t=this.root,n=[];;){if(n.push(t),t.left){if(e<t.left._count){t=t.left;continue}e-=t.left._count}if(!e)return new Ep(this,n);if(e-=1,!t.right)break;if(e>=t.right._count)break;t=t.right}return new Ep(this,[])},oX.ge=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a<=0&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new Ep(this,r)},oX.gt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a<0&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new Ep(this,r)},oX.lt=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a>0&&(i=r.length),n=a<=0?n.left:n.right}return r.length=i,new Ep(this,r)},oX.le=function(e){for(var t=this._compare,n=this.root,r=[],i=0;n;){var a=t(e,n.key);r.push(n),a>=0&&(i=r.length),n=a<0?n.left:n.right}return r.length=i,new Ep(this,r)},oX.find=function(e){for(var t=this._compare,n=this.root,r=[];n;){var i=t(e,n.key);if(r.push(n),0===i)return new Ep(this,r);n=i<=0?n.left:n.right}return new Ep(this,[])},oX.remove=function(e){var t=this.find(e);return t?t.remove():this},oX.get=function(e){for(var t=this._compare,n=this.root;n;){var r=t(e,n.key);if(0===r)return n.value;n=r<=0?n.left:n.right}};var sX=Ep.prototype;Object.defineProperty(sX,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(sX,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),sX.clone=function(){return new Ep(this.tree,this._stack.slice())},sX.remove=function(){var e=this._stack;if(0===e.length)return this.tree;var t=new Array(e.length),n=e[e.length-1];t[t.length-1]=new xp(n._color,n.key,n.value,n.left,n.right,n._count);for(var r=e.length-2;r>=0;--r){var n=e[r];n.left===e[r+1]?t[r]=new xp(n._color,n.key,n.value,t[r+1],n.right,n._count):t[r]=new xp(n._color,n.key,n.value,n.left,t[r+1],n._count)}if(n=t[t.length-1],n.left&&n.right){var i=t.length;for(n=n.left;n.right;)t.push(n),n=n.right;var a=t[i-1];t.push(new xp(n._color,a.key,a.value,n.left,n.right,n._count)),t[i-1].key=n.key,t[i-1].value=n.value;for(var r=t.length-2;r>=i;--r)n=t[r],t[r]=new xp(n._color,n.key,n.value,n.left,t[r+1],n._count);t[i-1].left=t[i]}if(n=t[t.length-1],n._color===iX){var o=t[t.length-2];o.left===n?o.left=null:o.right===n&&(o.right=null),t.pop();for(var r=0;r<t.length;++r)t[r]._count--;return new Mp(this.tree._compare,t[0])}if(n.left||n.right){n.left?Pp(n,n.left):n.right&&Pp(n,n.right),n._color=aX;for(var r=0;r<t.length-1;++r)t[r]._count--;return new Mp(this.tree._compare,t[0])}if(1===t.length)return new Mp(this.tree._compare,null);for(var r=0;r<t.length;++r)t[r]._count--;var s=t[t.length-2];return Ip(t),s.left===n?s.left=null:s.right=null,new Mp(this.tree._compare,t[0])},Object.defineProperty(sX,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(sX,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(sX,"index",{get:function(){var e=0,t=this._stack;if(0===t.length){var n=this.tree.root;return n?n._count:0}t[t.length-1].left&&(e=t[t.length-1].left._count);for(var r=t.length-2;r>=0;--r)t[r+1]===t[r].right&&(++e,t[r].left&&(e+=t[r].left._count));return e},enumerable:!0}),sX.next=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.right)for(t=t.right;t;)e.push(t),t=t.left;else for(e.pop();e.length>0&&e[e.length-1].right===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(sX,"hasNext",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].right)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].left===e[t])return!0;return!1}}),sX.update=function(e){var t=this._stack;if(0===t.length)throw new Error("Can't update empty node!");var n=new Array(t.length),r=t[t.length-1];n[n.length-1]=new xp(r._color,r.key,e,r.left,r.right,r._count);for(var i=t.length-2;i>=0;--i)r=t[i],r.left===t[i+1]?n[i]=new xp(r._color,r.key,r.value,n[i+1],r.right,r._count):n[i]=new xp(r._color,r.key,r.value,r.left,n[i+1],r._count);return new Mp(this.tree._compare,n[0])},sX.prev=function(){var e=this._stack;if(0!==e.length){var t=e[e.length-1];if(t.left)for(t=t.left;t;)e.push(t),t=t.right;else for(e.pop();e.length>0&&e[e.length-1].left===t;)t=e[e.length-1],e.pop()}},Object.defineProperty(sX,"hasPrev",{get:function(){var e=this._stack;if(0===e.length)return!1;if(e[e.length-1].left)return!0;for(var t=e.length-1;t>0;--t)if(e[t-1].right===e[t])return!0;return!1}});var lX=Rp,uX=Up;Dp.prototype.castUp=function(e){var t=KY.le(this.coordinates,e[0]);if(t<0)return-1;var n=(this.slabs[t],Fp(this.slabs[t],e)),r=-1;if(n&&(r=n.value),this.coordinates[t]===e[0]){var i=null;if(n&&(i=n.key),t>0){var a=Fp(this.slabs[t-1],e);a&&(i?lX(a.key,i)>0&&(i=a.key,r=a.value):(r=a.value,i=a.key))}var o=this.horizontal[t];if(o.length>0){var s=KY.ge(o,e[1],Np);if(s<o.length){var l=o[s];if(e[1]===l.y){if(l.closed)return l.index;for(;s<o.length-1&&o[s+1].y===e[1];)if(s+=1,l=o[s],l.closed)return l.index;if(l.y===e[1]&&!l.start){if((s+=1)>=o.length)return r;l=o[s]}}if(l.start)if(i){var u=eG(i[0],i[1],[e[0],l.y]);i[0][0]>i[1][0]&&(u=-u),u>0&&(r=l.index)}else r=l.index;else l.y!==e[1]&&(r=l.index)}}}return r};var cX=Zp,dX=eG[3],fX=Qp,hX={};hX.dimension=$p,hX.countVertices=em,hX.cloneCells=tm,hX.compareCells=nm,hX.normalize=im,hX.unique=am,hX.findCell=om,hX.incidence=sm,hX.dual=lm,hX.explode=um,hX.skeleton=cm,hX.boundary=dm,hX.connectedComponents=pm;var pX={};pX.INT_BITS=32,pX.INT_MAX=2147483647,pX.INT_MIN=-1<<31,pX.sign=function(e){return(e>0)-(e<0)},pX.abs=function(e){var t=e>>31;return(e^t)-t},pX.min=function(e,t){return t^(e^t)&-(e<t)},pX.max=function(e,t){return e^(e^t)&-(e<t)},pX.isPow2=function(e){return!(e&e-1)&&!!e},pX.log2=function(e){var t,n;return t=(e>65535)<<4,e>>>=t,n=(e>255)<<3,e>>>=n,t|=n,n=(e>15)<<2,e>>>=n,t|=n,n=(e>3)<<1,e>>>=n,(t|=n)|e>>1},pX.log10=function(e){return e>=1e9?9:e>=1e8?8:e>=1e7?7:e>=1e6?6:e>=1e5?5:e>=1e4?4:e>=1e3?3:e>=100?2:e>=10?1:0},pX.popCount=function(e){return e-=e>>>1&1431655765,16843009*((e=(858993459&e)+(e>>>2&858993459))+(e>>>4)&252645135)>>>24},pX.countTrailingZeros=mm,pX.nextPow2=function(e){return e+=0===e,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)+1},pX.prevPow2=function(e){return e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,(e|=e>>>16)-(e>>>1)},pX.parity=function(e){return e^=e>>>16,e^=e>>>8,e^=e>>>4,27030>>>(e&=15)&1};var mX=new Array(256);!function(e){for(var t=0;t<256;++t){var n=t,r=t,i=7;for(n>>>=1;n;n>>>=1)r<<=1,r|=1&n,--i;e[t]=r<<i&255}}(mX),pX.reverse=function(e){return mX[255&e]<<24|mX[e>>>8&255]<<16|mX[e>>>16&255]<<8|mX[e>>>24&255]},pX.interleave2=function(e,t){return e&=65535,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t&=65535,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1},pX.deinterleave2=function(e,t){return e=e>>>t&1431655765,e=858993459&(e|e>>>1),e=252645135&(e|e>>>2),e=16711935&(e|e>>>4),(e=65535&(e|e>>>16))<<16>>16},pX.interleave3=function(e,t,n){return e&=1023,e=4278190335&(e|e<<16),e=251719695&(e|e<<8),e=3272356035&(e|e<<4),e=1227133513&(e|e<<2),t&=1023,t=4278190335&(t|t<<16),t=251719695&(t|t<<8),t=3272356035&(t|t<<4),t=1227133513&(t|t<<2),e|=t<<1,n&=1023,n=4278190335&(n|n<<16),n=251719695&(n|n<<8),n=3272356035&(n|n<<4),n=1227133513&(n|n<<2),e|n<<2},pX.deinterleave3=function(e,t){return e=e>>>t&1227133513,e=3272356035&(e|e>>>2),e=251719695&(e|e>>>4),e=4278190335&(e|e>>>8),(e=1023&(e|e>>>16))<<22>>22},pX.nextCombination=function(e){var t=e|e-1;return t+1|(~t&-~t)-1>>>mm(e)+1};var gX=gm;gm.prototype.length=function(){return this.roots.length},gm.prototype.makeSet=function(){var e=this.roots.length;return this.roots.push(e),this.ranks.push(0),e},gm.prototype.find=function(e){for(var t=this.roots;t[e]!==e;){var n=t[e];t[e]=t[n],e=n}return e},gm.prototype.link=function(e,t){var n=this.find(e),r=this.find(t);if(n!==r){var i=this.ranks,a=this.roots,o=i[n],s=i[r];o<s?a[n]=r:s<o?a[r]=n:(a[r]=n,++i[n])}};var yX={};yX.dimension=ym,yX.countVertices=vm,yX.cloneCells=_m,yX.compareCells=bm,yX.normalize=wm,yX.unique=km,yX.findCell=Tm,yX.incidence=Mm,yX.dual=Am,yX.explode=Cm,yX.skeleton=Sm,yX.boundary=Em,yX.connectedComponents=Lm;var vX=zm,_X=Qm,bX="V",xX="P",wX="N",kX="Q",TX="X",MX="T",AX={},CX=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7],SX=607/128,EX=[.9999999999999971,57.15623566586292,-59.59796035547549,14.136097974741746,-.4919138160976202,3399464998481189e-20,4652362892704858e-20,-9837447530487956e-20,.0001580887032249125,-.00021026444172410488,.00021743961811521265,-.0001643181065367639,8441822398385275e-20,-26190838401581408e-21,36899182659531625e-22];AX=function e(t){if(t<.5)return Math.PI/(Math.sin(Math.PI*t)*e(1-t));if(t>100)return Math.exp($m(t));t-=1;for(var n=CX[0],r=1;r<9;r++)n+=CX[r]/(t+r);var i=t+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(i,t+.5)*Math.exp(-i)*n},AX.log=$m;var PX=eg,IX=32,LX=tg,OX={};OX.rank=ng,OX.unrank=rg;var zX=ig,RX=eW({args:["array",{offset:[1],array:0},"scalar","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\n        var _inline_1_da = _inline_1_arg0_ - _inline_1_arg3_\n        var _inline_1_db = _inline_1_arg1_ - _inline_1_arg3_\n        if((_inline_1_da >= 0) !== (_inline_1_db >= 0)) {\n          _inline_1_arg2_.push(_inline_1_arg4_[0] + 0.5 + 0.5 * (_inline_1_da + _inline_1_db) / (_inline_1_da - _inline_1_db))\n        }\n      }",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg3_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:["_inline_1_da","_inline_1_db"]},funcName:"zeroCrossings"}),DX=ag,NX=lg,FX={},jX={};jX=pg,jX.processPixels=hg;var BX=mg,UX=null,VX=null;"undefined"!==typeof document&&(UX=document.createElement("canvas"),UX.width=8192,UX.height=1024,VX=UX.getContext("2d"));var HX={};(function(e){"use strict";function t(e){for(var t=e.cells,n=e.positions,r=new Float32Array(6*t.length),i=0,a=0,o=0;o<t.length;++o)for(var s=t[o],l=0;l<3;++l){var u=n[s[l]];r[i++]=u[0],r[i++]=u[1]+1.4,a=Math.max(u[0],a)}return{data:r,shape:a}}function n(e,r,a){var a=a||{},o=i[e];o||(o=i[e]={" ":{data:new Float32Array(0),shape:.2}});var s=o[r];if(!s)if(r.length<=1||!/\d/.test(r))s=o[r]=t(BX(r,{triangles:!0,font:e,textAlign:a.textAlign||"left",textBaseline:"alphabetic"}));else{for(var l=r.split(/(\d|\s)/),u=new Array(l.length),c=0,d=0,f=0;f<l.length;++f)u[f]=n(e,l[f]),c+=u[f].data.length,d+=u[f].shape,f>0&&(d+=.02);for(var h=new Float32Array(c),p=0,m=-.5*d,f=0;f<u.length;++f){for(var g=u[f].data,y=0;y<g.length;y+=2)h[p++]=g[y]+m,h[p++]=g[y+1];m+=u[f].shape+.02}s=o[r]={data:h,shape:d}}return s}HX=n;var r=window||e.global||{},i=r.__TEXT_CACHE||{};r.__TEXT_CACHE={}}).call(this,gj);var WX=yg,qX=gg.prototype;qX.drawTicks=function(){var e=[0,0],t=[0,0],n=[0,0];return function(r){var i=this.plot,a=this.shader,o=this.tickX[r],s=this.tickOffset[r],l=i.gl,u=i.viewBox,c=i.dataBox,d=i.screenBox,f=i.pixelRatio,h=i.tickEnable,p=i.tickPad,m=i.tickColor,g=i.tickAngle,y=i.labelEnable,v=i.labelPad,_=i.labelColor,b=i.labelAngle,x=this.labelOffset[r],w=this.labelCount[r],k=Nq.lt(o,c[r]),T=Nq.le(o,c[r+2]);e[0]=e[1]=0,e[r]=1,t[r]=(u[2+r]+u[r])/(d[2+r]-d[r])-1;var M=2/d[2+(1^r)]-d[1^r];t[1^r]=M*u[1^r]-1,h[r]&&(t[1^r]-=M*f*p[r],k<T&&s[T]>s[k]&&(a.uniforms.dataAxis=e,a.uniforms.screenOffset=t,a.uniforms.color=m[r],a.uniforms.angle=g[r],l.drawArrays(l.TRIANGLES,s[k],s[T]-s[k]))),y[r]&&w&&(t[1^r]-=M*f*v[r],a.uniforms.dataAxis=n,a.uniforms.screenOffset=t,a.uniforms.color=_[r],a.uniforms.angle=b[r],l.drawArrays(l.TRIANGLES,x,w)),t[1^r]=M*u[2+(1^r)]-1,h[r+2]&&(t[1^r]+=M*f*p[r+2],k<T&&s[T]>s[k]&&(a.uniforms.dataAxis=e,a.uniforms.screenOffset=t,a.uniforms.color=m[r+2],a.uniforms.angle=g[r+2],l.drawArrays(l.TRIANGLES,s[k],s[T]-s[k]))),y[r+2]&&w&&(t[1^r]+=M*f*v[r+2],a.uniforms.dataAxis=n,a.uniforms.screenOffset=t,a.uniforms.color=_[r+2],a.uniforms.angle=b[r+2],l.drawArrays(l.TRIANGLES,x,w))}}(),qX.drawTitle=function(){var e=[0,0],t=[0,0];return function(){var n=this.plot,r=this.shader,i=n.gl,a=n.screenBox,o=n.titleCenter,s=n.titleAngle,l=n.titleColor,u=n.pixelRatio;if(this.titleCount){for(var c=0;c<2;++c)t[c]=2*(o[c]*u-a[c])/(a[2+c]-a[c])-1;r.bind(),r.uniforms.dataAxis=e,r.uniforms.screenOffset=t,r.uniforms.angle=s,r.uniforms.color=l,i.drawArrays(i.TRIANGLES,this.titleOffset,this.titleCount)}}}(),qX.bind=function(){var e=[0,0],t=[0,0],n=[0,0];return function(){var r=this.plot,i=this.shader,a=r._tickBounds,o=r.dataBox,s=r.screenBox,l=r.viewBox;i.bind();for(var u=0;u<2;++u){var c=a[u],d=a[u+2],f=d-c,h=.5*(o[u+2]+o[u]),p=o[u+2]-o[u],m=l[u],g=l[u+2],y=g-m,v=s[u],_=s[u+2],b=_-v;t[u]=2*f/p*y/b,e[u]=2*(c-h)/p*y/b}n[1]=2*r.pixelRatio/(s[3]-s[1]),n[0]=n[1]*(s[3]-s[1])/(s[2]-s[0]),i.uniforms.dataScale=t,i.uniforms.dataShift=e,i.uniforms.textScale=n,this.vbo.bind(),i.attributes.textCoordinate.pointer()}}(),qX.update=function(e){var t,n,r,i,a,o=[],s=e.ticks,l=e.bounds;for(a=0;a<2;++a){var u=[Math.floor(o.length/3)],c=[-1/0],d=s[a];for(t=0;t<d.length;++t){var f=d[t],h=f.x,p=f.text,m=f.font||"sans-serif";i=f.fontSize||12;for(var g=1/(l[a+2]-l[a]),y=l[a],v=p.split("\n"),_=0;_<v.length;_++)for(r=HX(m,v[_]).data,n=0;n<r.length;n+=2)o.push(r[n]*i,-r[n+1]*i-_*i*1.2,(h-y)*g);u.push(Math.floor(o.length/3)),c.push(h)}this.tickOffset[a]=u,this.tickX[a]=c}for(a=0;a<2;++a){for(this.labelOffset[a]=Math.floor(o.length/3),r=HX(e.labelFont[a],e.labels[a],{textAlign:"center"}).data,i=e.labelSize[a],t=0;t<r.length;t+=2)o.push(r[t]*i,-r[t+1]*i,0);this.labelCount[a]=Math.floor(o.length/3)-this.labelOffset[a]}for(this.titleOffset=Math.floor(o.length/3),r=HX(e.titleFont,e.title).data,i=e.titleSize,t=0;t<r.length;t+=2)o.push(r[t]*i,-r[t+1]*i,0);this.titleCount=Math.floor(o.length/3)-this.titleOffset,this.vbo.update(o)},qX.dispose=function(){this.vbo.dispose(),this.shader.dispose()};var GX=eW,YX=Sg,XX=null,ZX=null,JX=null,KX=function(e,t){tW.muls(e,t,255)},QX=xg.prototype;Object.defineProperties(QX,{minFilter:{get:function(){return this._minFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&XX.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),ZX.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e),this._minFilter=e}},magFilter:{get:function(){return this._magFilter},set:function(e){this.bind();var t=this.gl;if(this.type===t.FLOAT&&XX.indexOf(e)>=0&&(t.getExtension("OES_texture_float_linear")||(e=t.NEAREST)),ZX.indexOf(e)<0)throw new Error("gl-texture2d: Unknown filter mode "+e);return t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,e),this._magFilter=e}},mipSamples:{get:function(){return this._anisoSamples},set:function(e){var t=this._anisoSamples;if(this._anisoSamples=0|Math.max(e,1),t!==this._anisoSamples){var n=this.gl.getExtension("EXT_texture_filter_anisotropic");n&&this.gl.texParameterf(this.gl.TEXTURE_2D,n.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(e){if(this.bind(),JX.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,e),this._wrapS=e}},wrapT:{get:function(){return this._wrapT},set:function(e){if(this.bind(),JX.indexOf(e)<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,e),this._wrapT=e}},wrap:{get:function(){return this._wrapVector},set:function(e){if(Array.isArray(e)||(e=[e,e]),2!==e.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var t=0;t<2;++t)if(JX.indexOf(e[t])<0)throw new Error("gl-texture2d: Unknown wrap mode "+e);this._wrapS=e[0],this._wrapT=e[1];var n=this.gl;return this.bind(),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,this._wrapS),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,this._wrapT),e}},shape:{get:function(){return this._shapeVector},set:function(e){if(Array.isArray(e)){if(2!==e.length)throw new Error("gl-texture2d: Invalid texture shape")}else e=[0|e,0|e];return bg(this,0|e[0],0|e[1]),[0|e[0],0|e[1]]}},width:{get:function(){return this._shape[0]},set:function(e){return e|=0,bg(this,e,this._shape[1]),e}},height:{get:function(){return this._shape[1]},set:function(e){return e|=0,bg(this,this._shape[0],e),e}}}),QX.bind=function(e){var t=this.gl;return void 0!==e&&t.activeTexture(t.TEXTURE0+(0|e)),t.bindTexture(t.TEXTURE_2D,this.handle),void 0!==e?0|e:t.getParameter(t.ACTIVE_TEXTURE)-t.TEXTURE0},QX.dispose=function(){this.gl.deleteTexture(this.handle)},QX.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var e=Math.min(this._shape[0],this._shape[1]),t=0;e>0;++t,e>>>=1)this._mipLevels.indexOf(t)<0&&this._mipLevels.push(t)},QX.setPixels=function(e,t,n,r){var i=this.gl;this.bind(),Array.isArray(t)?(r=n,n=0|t[1],t=0|t[0]):(t=t||0,n=n||0),r=r||0;var a=_g(e)?e:e.raw;if(a){this._mipLevels.indexOf(r)<0?(i.texImage2D(i.TEXTURE_2D,0,this.format,this.format,this.type,a),this._mipLevels.push(r)):i.texSubImage2D(i.TEXTURE_2D,r,t,n,this.format,this.type,a)}else{if(!(e.shape&&e.stride&&e.data))throw new Error("gl-texture2d: Unsupported data type");if(e.shape.length<2||t+e.shape[1]>this._shape[1]>>>r||n+e.shape[0]>this._shape[0]>>>r||t<0||n<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");kg(i,t,n,r,this.format,this.type,this._mipLevels,e)}};var $X,eZ,tZ,nZ,rZ=Fg,iZ=null,aZ=Dg.prototype;Object.defineProperties(aZ,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(e){if(Array.isArray(e)||(e=[0|e,0|e]),2!==e.length)throw new Error("gl-fbo: Shape vector must be length 2");var t=0|e[0],n=0|e[1];return Ng(this,t,n),[t,n]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(e){return e|=0,Ng(this,e,this._shape[1]),e},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(e){return e|=0,Ng(this,this._shape[0],e),e},enumerable:!1}}),aZ.bind=function(){if(!this._destroyed){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,this.handle),e.viewport(0,0,this._shape[0],this._shape[1])}},aZ.dispose=function(){if(!this._destroyed){this._destroyed=!0;var e=this.gl;e.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(e.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var t=0;t<this.color.length;++t)this.color[t].dispose(),this.color[t]=null;this._color_rb&&(e.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};var oZ=Ug,sZ=pW.nextPow2,lZ=GX({args:["array",{offset:[0,0,1],array:0},{offset:[0,0,2],array:0},{offset:[0,0,3],array:0},"scalar","scalar","index"],pre:{body:"{this_closestD2=1e8,this_closestX=-1,this_closestY=-1}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},body:{body:"{if(_inline_16_arg0_<255||_inline_16_arg1_<255||_inline_16_arg2_<255||_inline_16_arg3_<255){var _inline_16_l=_inline_16_arg4_-_inline_16_arg6_[0],_inline_16_a=_inline_16_arg5_-_inline_16_arg6_[1],_inline_16_f=_inline_16_l*_inline_16_l+_inline_16_a*_inline_16_a;_inline_16_f<this_closestD2&&(this_closestD2=_inline_16_f,this_closestX=_inline_16_arg6_[0],this_closestY=_inline_16_arg6_[1])}}",args:[{name:"_inline_16_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg4_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg5_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_16_arg6_",lvalue:!1,rvalue:!0,count:4}],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:["_inline_16_a","_inline_16_f","_inline_16_l"]},post:{body:"{return[this_closestX,this_closestY,this_closestD2]}",args:[],thisVars:["this_closestD2","this_closestX","this_closestY"],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),uZ=Bg.prototype;Object.defineProperty(uZ,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(e){if(this.gl){this.fbo.shape=e;var t=this.fbo.shape[0],n=this.fbo.shape[1];if(n*t*4>this.buffer.length){EW.free(this.buffer);for(var r=this.buffer=EW.mallocUint8(sZ(n*t*4)),i=0;i<n*t*4;++i)r[i]=255}return e}}}),uZ.begin=function(){var e=this.gl;this.shape;e&&(this.fbo.bind(),e.clearColor(1,1,1,1),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT))},uZ.end=function(){var e=this.gl;e&&(e.bindFramebuffer(e.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},uZ.query=function(e,t,n){if(!this.gl)return null;var r=this.fbo.shape.slice();e|=0,t|=0,"number"!==typeof n&&(n=1);var i=0|Math.min(Math.max(e-n,0),r[0]),a=0|Math.min(Math.max(e+n,0),r[0]),o=0|Math.min(Math.max(t-n,0),r[1]),s=0|Math.min(Math.max(t+n,0),r[1]);if(a<=i||s<=o)return null;var l=[a-i,s-o],u=hW(this.buffer,[l[0],l[1],4],[4,4*r[0],1],4*(i+r[0]*o)),c=lZ(u.hi(l[0],l[1],1),n,n),d=c[0],f=c[1];return d<0||Math.pow(this.radius,2)<c[2]?null:new jg(d+i|0,f+o|0,u.get(d,f,0),[u.get(d,f,1),u.get(d,f,2),u.get(d,f,3)],Math.sqrt(c[2]))},uZ.dispose=function(){this.gl&&(this.fbo.dispose(),EW.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};var cZ=qg,dZ=Vg.prototype;dZ.setDirty=function(){this.dirty=this.pickDirty=!0},dZ.setOverlayDirty=function(){this.dirty=!0},dZ.nextDepthValue=function(){return this._depthCounter++/65536},dZ.draw=function(){return function(){var e=this.gl,t=this.screenBox,n=this.viewBox,r=this.dataBox,i=this.pixelRatio,a=this.grid,o=this.line,s=this.text,l=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,e.bindFramebuffer(e.FRAMEBUFFER,null),e.enable(e.SCISSOR_TEST),e.disable(e.DEPTH_TEST),e.depthFunc(e.LESS),e.depthMask(!1),e.enable(e.BLEND),e.blendEquation(e.FUNC_ADD,e.FUNC_ADD),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),this.borderColor){e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]);var u=this.borderColor;e.clearColor(u[0]*u[3],u[1]*u[3],u[2]*u[3],u[3]),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}e.scissor(n[0],n[1],n[2]-n[0],n[3]-n[1]),e.viewport(n[0],n[1],n[2]-n[0],n[3]-n[1]);var c=this.backgroundColor;e.clearColor(c[0]*c[3],c[1]*c[3],c[2]*c[3],c[3]),e.clear(e.COLOR_BUFFER_BIT),a.draw();var d=this.zeroLineEnable,f=this.zeroLineColor,h=this.zeroLineWidth;if(d[0]||d[1]){o.bind();for(var p=0;p<2;++p)if(d[p]&&r[p]<=0&&r[p+2]>=0){var m=t[p]-r[p]*(t[p+2]-t[p])/(r[p+2]-r[p]);0===p?o.drawLine(m,t[1],m,t[3],h[p],f[p]):o.drawLine(t[0],m,t[2],m,h[p],f[p])}}for(var p=0;p<l.length;++p)l[p].draw();e.viewport(t[0],t[1],t[2]-t[0],t[3]-t[1]),e.scissor(t[0],t[1],t[2]-t[0],t[3]-t[1]),this.grid.drawTickMarks(),o.bind();var g=this.borderLineEnable,y=this.borderLineWidth,v=this.borderLineColor;g[1]&&o.drawLine(n[0],n[1]-.5*y[1]*i,n[0],n[3]+.5*y[3]*i,y[1],v[1]),g[0]&&o.drawLine(n[0]-.5*y[0]*i,n[1],n[2]+.5*y[2]*i,n[1],y[0],v[0]),g[3]&&o.drawLine(n[2],n[1]-.5*y[1]*i,n[2],n[3]+.5*y[3]*i,y[3],v[3]),g[2]&&o.drawLine(n[0]-.5*y[0]*i,n[3],n[2]+.5*y[2]*i,n[3],y[2],v[2]),s.bind();for(var p=0;p<2;++p)s.drawTicks(p);this.titleEnable&&s.drawTitle();for(var _=this.overlays,p=0;p<_.length;++p)_[p].draw();e.disable(e.SCISSOR_TEST),e.disable(e.BLEND),e.depthMask(!0)}}}(),dZ.drawPick=function(){return function(){if(!this.static){var e=this.pickBuffer;this.gl;this._pickTimeout=null,e.begin();for(var t=1,n=this.objects,r=0;r<n.length;++r)t=n[r].drawPick(t);e.end()}}}(),dZ.pick=function(){return function(e,t){if(!this.static){var n=this.pixelRatio,r=this.pickPixelRatio,i=this.viewBox,a=0|Math.round((e-i[0]/n)*r),o=0|Math.round((t-i[1]/n)*r),s=this.pickBuffer.query(a,o,this.pickRadius);if(!s)return null;for(var l=s.id+(s.value[0]<<8)+(s.value[1]<<16)+(s.value[2]<<24),u=this.objects,c=0;c<u.length;++c){var d=u[c].pick(a,o,l);if(d)return d}return null}}}(),dZ.setScreenBox=function(e){var t=this.screenBox,n=this.pixelRatio;t[0]=0|Math.round(e[0]*n),t[1]=0|Math.round(e[1]*n),t[2]=0|Math.round(e[2]*n),t[3]=0|Math.round(e[3]*n),this.setDirty()},dZ.setDataBox=function(e){var t=this.dataBox;(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]||t[3]!==e[3])&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],this.setDirty())},dZ.setViewBox=function(e){var t=this.pixelRatio,n=this.viewBox;n[0]=0|Math.round(e[0]*t),n[1]=0|Math.round(e[1]*t),n[2]=0|Math.round(e[2]*t),n[3]=0|Math.round(e[3]*t);var r=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((e[2]-e[0])*r),0|Math.round((e[3]-e[1])*r)],this.setDirty()},dZ.update=function(e){e=e||{};var t=this.gl;this.pixelRatio=e.pixelRatio||1;var n=this.pixelRatio;this.pickPixelRatio=Math.max(n,1),this.setScreenBox(e.screenBox||[0,0,t.drawingBufferWidth/n,t.drawingBufferHeight/n]);this.screenBox;this.setViewBox(e.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/n,.125*(this.screenBox[3]-this.screenBox[1])/n,.875*(this.screenBox[2]-this.screenBox[0])/n,.875*(this.screenBox[3]-this.screenBox[1])/n]);var r=this.viewBox,i=(r[2]-r[0])/(r[3]-r[1]);this.setDataBox(e.dataBox||[-10,-10/i,10,10/i]),this.borderColor=!1!==e.borderColor&&(e.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(e.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(e.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(e.gridLineWidth||[1,1]).slice(),this.gridLineColor=Hg(e.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(e.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(e.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=Hg(e.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(e.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(e.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=Hg(e.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(e.titleCenter||[.5*(r[0]+r[2])/n,(r[3]+120)/n]).slice(),this.titleEnable=!("titleEnable"in e)||!!e.titleEnable,this.titleAngle=e.titleAngle||0,this.titleColor=(e.titleColor||[0,0,0,1]).slice(),this.labelPad=(e.labelPad||[15,15,15,15]).slice(),this.labelAngle=(e.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(e.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=Hg(e.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(e.tickPad||[15,15,15,15]).slice(),this.tickAngle=(e.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(e.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=Hg(e.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(e.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(e.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=Hg(e.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var a=e.ticks||[[],[]],o=this._tickBounds;o[0]=o[1]=1/0,o[2]=o[3]=-1/0;for(var s=0;s<2;++s){var l=a[s].slice(0);0!==l.length&&(l.sort(Wg),o[s]=Math.min(o[s],l[0].x),o[s+2]=Math.max(o[s+2],l[l.length-1].x))}this.grid.update({bounds:o,ticks:a}),this.text.update({bounds:o,ticks:a,labels:e.labels||["x","y"],labelSize:e.labelSize||[12,12],labelFont:e.labelFont||["sans-serif","sans-serif"],title:e.title||"",titleSize:e.titleSize||18,titleFont:e.titleFont||"sans-serif"}),this.static=!!e.static,this.setDirty()},dZ.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var e=this.objects.length-1;e>=0;--e)this.objects[e].dispose();this.objects.length=0;for(var e=this.overlays.length-1;e>=0;--e)this.overlays[e].dispose();this.overlays.length=0,this.gl=null},dZ.addObject=function(e){this.objects.indexOf(e)<0&&(this.objects.push(e),this.setDirty())},dZ.removeObject=function(e){for(var t=this.objects,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setDirty();break}},dZ.addOverlay=function(e){this.overlays.indexOf(e)<0&&(this.overlays.push(e),this.setOverlayDirty())},dZ.removeOverlay=function(e){for(var t=this.overlays,n=0;n<t.length;++n)if(t[n]===e){t.splice(n,1),this.setOverlayDirty();break}};var fZ={};fZ.boxVertex=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),fZ.boxFragment=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"]);var hZ=Yg,pZ=Gg.prototype;pZ.draw=function(){if(this.enabled){var e=this.plot,t=this.selectBox,n=this.borderWidth,r=(this.innerFill,this.innerColor),i=(this.outerFill,this.outerColor),a=this.borderColor,o=e.box,s=e.screenBox,l=e.dataBox,u=e.viewBox,c=e.pixelRatio,d=(t[0]-l[0])*(u[2]-u[0])/(l[2]-l[0])+u[0],f=(t[1]-l[1])*(u[3]-u[1])/(l[3]-l[1])+u[1],h=(t[2]-l[0])*(u[2]-u[0])/(l[2]-l[0])+u[0],p=(t[3]-l[1])*(u[3]-u[1])/(l[3]-l[1])+u[1];if(d=Math.max(d,u[0]),f=Math.max(f,u[1]),h=Math.min(h,u[2]),p=Math.min(p,u[3]),!(h<d||p<f)){o.bind();var m=s[2]-s[0],g=s[3]-s[1];if(this.outerFill&&(o.drawBox(0,0,m,f,i),o.drawBox(0,f,d,p,i),o.drawBox(0,p,m,g,i),o.drawBox(h,f,m,p,i)),this.innerFill&&o.drawBox(d,f,h,p,r),n>0){var y=n*c;o.drawBox(d-y,f-y,h+y,f+y,a),o.drawBox(d-y,p-y,h+y,p+y,a),o.drawBox(d-y,f-y,d+y,p+y,a),o.drawBox(h-y,f-y,h+y,p+y,a)}}}},pZ.update=function(e){e=e||{},this.innerFill=!!e.innerFill,this.outerFill=!!e.outerFill,this.innerColor=(e.innerColor||[0,0,0,.5]).slice(),this.outerColor=(e.outerColor||[0,0,0,.5]).slice(),this.borderColor=(e.borderColor||[0,0,0,1]).slice(),this.borderWidth=e.borderWidth||0,this.selectBox=(e.selectBox||this.selectBox).slice()},pZ.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};var mZ=Zg,gZ=Xg.prototype;gZ.update=function(e){e=e||{},this.enable=(e.enable||[!0,!0,!1,!1]).slice(),this.width=(e.width||[1,1,1,1]).slice(),this.color=(e.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(e){return e.slice()}),this.center=(e.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},gZ.draw=function(){var e=this.enable,t=this.width,n=this.color,r=this.center,i=this.plot,a=i.line,o=i.dataBox,s=i.viewBox;if(a.bind(),o[0]<=r[0]&&r[0]<=o[2]&&o[1]<=r[1]&&r[1]<=o[3]){var l=s[0]+(r[0]-o[0])/(o[2]-o[0])*(s[2]-s[0]),u=s[1]+(r[1]-o[1])/(o[3]-o[1])*(s[3]-s[1]);e[0]&&a.drawLine(l,u,s[0],u,t[0],n[0]),e[1]&&a.drawLine(l,u,l,s[1],t[1],n[1]),e[2]&&a.drawLine(l,u,s[2],u,t[2],n[2]),e[3]&&a.drawLine(l,u,l,s[3],t[3],n[3])}},gZ.dispose=function(){this.plot.removeOverlay(this)};var yZ=Jg,vZ=function(e){return yZ("webgl",e)},_Z=Kg,bZ={" ":" ",0:"\u2070",1:"\xb9",2:"\xb2",3:"\xb3",4:"\u2074",5:"\u2075",6:"\u2076",7:"\u2077",8:"\u2078",9:"\u2079","+":"\u207a","-":"\u207b",a:"\u1d43",b:"\u1d47",c:"\u1d9c",d:"\u1d48",e:"\u1d49",f:"\u1da0",g:"\u1d4d",h:"\u02b0",i:"\u2071",j:"\u02b2",k:"\u1d4f",l:"\u02e1",m:"\u1d50",n:"\u207f",o:"\u1d52",p:"\u1d56",r:"\u02b3",s:"\u02e2",t:"\u1d57",u:"\u1d58",v:"\u1d5b",w:"\u02b7",x:"\u02e3",y:"\u02b8",z:"\u1dbb"},xZ=ny,wZ=function(){},kZ=function(e){for(var t in e)"function"===typeof e[t]&&(e[t]=wZ);e.destroy=function(){e.container.parentNode.removeChild(e.container)};var n=document.createElement("div");return n.textContent="Webgl is not supported by your browser - visit http://get.webgl.org for more info",n.style.cursor="pointer",n.style.fontSize="24px",n.style.color=jE.defaults[0],e.container.appendChild(n),e.container.style.background="#FFFFFF",e.container.onclick=function(){window.open("http://get.webgl.org")},!1},TZ={};TZ.buttons=ry,TZ.element=iy,TZ.x=ay,TZ.y=oy;var MZ=sy,AZ=function(e,t){t||(t=[0,""]),e=String(e);var n=parseFloat(e,10);return t[0]=n,t[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",t},CZ=cy,SZ=96,EZ=dy,PZ=hy,IZ=py,LZ={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},OZ=function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},zZ=Object.prototype.toString,RZ=function(e){var t;return"[object Object]"===zZ.call(e)&&(null===(t=Object.getPrototypeOf(e))||t===Object.getPrototypeOf({}))},DZ={};(function(e){"use strict";function t(t){var r,i,a=[],o=1;if("string"===typeof t)if(LZ[t])a=LZ[t].slice(),i="rgb";else if("transparent"===t)o=0,i="rgb",a=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var s=t.slice(1),l=s.length,u=l<=4;o=1,u?(a=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===l&&(o=parseInt(s[3]+s[3],16)/255)):(a=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===l&&(o=parseInt(s[6]+s[7],16)/255)),a[0]||(a[0]=0),a[1]||(a[1]=0),a[2]||(a[2]=0),i="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var c=r[1],s=c.replace(/a$/,"");i=s;var l="cmyk"===s?4:"gray"===s?1:3;a=r[2].trim().split(/\s*,\s*/).map(function(e,t){if(/%$/.test(e))return t===l?parseFloat(e)/100:"rgb"===s?255*parseFloat(e)/100:parseFloat(e);if("h"===s[t]){if(/deg$/.test(e))return parseFloat(e);if(void 0!==n[e])return n[e]}return parseFloat(e)}),c===s&&a.push(1),o=void 0===a[l]?1:a[l],a=a.slice(0,l)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(a=t.match(/([0-9]+)/g).map(function(e){return parseFloat(e)}),i=t.match(/([a-z])/gi).join("").toLowerCase());else if("number"===typeof t)i="rgb",a=[t>>>16,(65280&t)>>>8,255&t];else if(RZ(t)){var d=OZ(t.r,t.red,t.R,null);null!==d?(i="rgb",a=[d,OZ(t.g,t.green,t.G),OZ(t.b,t.blue,t.B)]):(i="hsl",a=[OZ(t.h,t.hue,t.H),OZ(t.s,t.saturation,t.S),OZ(t.l,t.lightness,t.L,t.b,t.brightness)]),o=OZ(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(o/=100)}else(Array.isArray(t)||e.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(a=[t[0],t[1],t[2]],i="rgb",o=4===t.length?t[3]:1);return{space:i,values:a,alpha:o}}DZ=t;var n={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var NZ={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(e){var t,n,r,i,a,o=e[0]/360,s=e[1]/100,l=e[2]/100;if(0===s)return a=255*l,[a,a,a];n=l<.5?l*(1+s):l+s-l*s,t=2*l-n,i=[0,0,0];for(var u=0;u<3;u++)r=o+1/3*-(u-1),r<0?r++:r>1&&r--,a=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[u]=255*a;return i}};({name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}).hsl=function(e){var t,n,r,i=e[0]/255,a=e[1]/255,o=e[2]/255,s=Math.min(i,a,o),l=Math.max(i,a,o),u=l-s;return l===s?t=0:i===l?t=(a-o)/u:a===l?t=2+(o-i)/u:o===l&&(t=4+(i-a)/u),t=Math.min(60*t,360),t<0&&(t+=360),r=(s+l)/2,n=l===s?0:r<=.5?u/(l+s):u/(2-l-s),[t,100*n,100*r]};var FZ=function(e){var t;if("string"!==typeof e)throw Error("Argument should be a string");var n=DZ(e);return n.space?(t=Array(3),t[0]=IZ(n.values[0],0,255),t[1]=IZ(n.values[1],0,255),t[2]=IZ(n.values[2],0,255),"h"===n.space[0]&&(t=NZ.rgb(t)),t.push(IZ(n.alpha,0,1)),t):[]},jZ=function(e){switch(e){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}},BZ=function(e,t){"float"!==t&&t||(t="array"),"uint"===t&&(t="uint8"),"uint_clamped"===t&&(t="uint8_clamped");var n=jZ(t),r=new n(4);if(e instanceof n)return Array.isArray(e)?e.slice():(r.set(e),r);var i="uint8"!==t&&"uint8_clamped"!==t;return e instanceof Uint8Array||e instanceof Uint8ClampedArray?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=null!=e[3]?e[3]:255,i&&(r[0]/=255,r[1]/=255,r[2]/=255,r[3]/=255),r):(e.length&&"string"!==typeof e||(e=FZ(e),e[0]/=255,e[1]/=255,e[2]/=255),i?(r[0]=e[0],r[1]=e[1],r[2]=e[2],r[3]=null!=e[3]?e[3]:1):(r[0]=IZ(Math.round(255*e[0]),0,255),r[1]=IZ(Math.round(255*e[1]),0,255),r[2]=IZ(Math.round(255*e[2]),0,255),r[3]=null==e[3]?255:IZ(Math.floor(255*e[3]),0,255)),r)},UZ=my,VZ=gy.prototype,HZ=["xaxis","yaxis"];VZ.merge=function(e){this.titleEnable=!1,this.backgroundColor=UZ(e.plot_bgcolor);var t,n,r,i,a,o,s,l,u,c,d;for(c=0;c<2;++c){t=HZ[c];var f=t.charAt(0);for(n=e[this.scene[t]._name],r=n.title===this.scene.fullLayout._dfltTitle[f]?"":n.title,d=0;d<=2;d+=2)this.labelEnable[c+d]=!1,this.labels[c+d]=xZ(r),this.labelColor[c+d]=UZ(n.titlefont.color),this.labelFont[c+d]=n.titlefont.family,this.labelSize[c+d]=n.titlefont.size,this.labelPad[c+d]=this.getLabelPad(t,n),this.tickEnable[c+d]=!1,this.tickColor[c+d]=UZ((n.tickfont||{}).color),this.tickAngle[c+d]="auto"===n.tickangle?0:Math.PI*-n.tickangle/180,this.tickPad[c+d]=this.getTickPad(n),this.tickMarkLength[c+d]=0,this.tickMarkWidth[c+d]=n.tickwidth||0,this.tickMarkColor[c+d]=UZ(n.tickcolor),this.borderLineEnable[c+d]=!1,this.borderLineColor[c+d]=UZ(n.linecolor),this.borderLineWidth[c+d]=n.linewidth||0;s=this.hasSharedAxis(n),a=this.hasAxisInDfltPos(t,n)&&!s,o=this.hasAxisInAltrPos(t,n)&&!s,i=n.mirror||!1,l=s?-1!==String(i).indexOf("all"):!!i,u=s?"allticks"===i:-1!==String(i).indexOf("ticks"),a?this.labelEnable[c]=!0:o&&(this.labelEnable[c+2]=!0),a?this.tickEnable[c]=n.showticklabels:o&&(this.tickEnable[c+2]=n.showticklabels),(a||l)&&(this.borderLineEnable[c]=n.showline),(o||l)&&(this.borderLineEnable[c+2]=n.showline),(a||u)&&(this.tickMarkLength[c]=this.getTickMarkLength(n)),(o||u)&&(this.tickMarkLength[c+2]=this.getTickMarkLength(n)),this.gridLineEnable[c]=n.showgrid,this.gridLineColor[c]=UZ(n.gridcolor),this.gridLineWidth[c]=n.gridwidth,this.zeroLineEnable[c]=n.zeroline,this.zeroLineColor[c]=UZ(n.zerolinecolor),this.zeroLineWidth[c]=n.zerolinewidth}},VZ.hasSharedAxis=function(e){var t=this.scene,n=t.fullLayout._subplots.gl2d;return 0!==PI.findSubplotsWithAxis(n,e).indexOf(t.id)},VZ.hasAxisInDfltPos=function(e,t){var n=t.side;return"xaxis"===e?"bottom"===n:"yaxis"===e?"left"===n:void 0},VZ.hasAxisInAltrPos=function(e,t){var n=t.side;return"xaxis"===e?"top"===n:"yaxis"===e?"right"===n:void 0},VZ.getLabelPad=function(e,t){var n=t.titlefont.size,r=t.showticklabels;return"xaxis"===e?"top"===t.side?n*(1.5+(r?1:0))-10:n*(1.5+(r?.5:0))-10:"yaxis"===e?"right"===t.side?10+n*(1.5+(r?1:.5)):10+n*(1.5+(r?.5:0)):void 0},VZ.getTickPad=function(e){return"outside"===e.ticks?10+e.ticklen:15},VZ.getTickMarkLength=function(e){if(!e.ticks)return 0;var t=e.ticklen;return"inside"===e.ticks?-t:t};var WZ,qZ,GZ=yy,YZ=pV.enforce,XZ=pV.clean,ZZ=bI.doAutoRange,JZ=["xaxis","yaxis"],KZ=EE.SUBPLOT_PATTERN,QZ=vy,$Z=vy.prototype;$Z.makeFramework=function(){if(this.staticPlot){if(!qZ&&(WZ=document.createElement("canvas"),!(qZ=vZ({canvas:WZ,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=WZ,this.gl=qZ}else{var e=this.container.querySelector(".gl-canvas-focus"),t=vZ({canvas:e,preserveDrawingBuffer:!0,premultipliedAlpha:!0});t||kZ(this),this.canvas=e,this.gl=t}var n=this.canvas;n.style.width="100%",n.style.height="100%",n.style.position="absolute",n.style.top="0px",n.style.left="0px",n.style["pointer-events"]="none",this.updateSize(n),n.className+=" user-select-none";var r=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");r.style.position="absolute",r.style.top=r.style.left="0px",r.style.width=r.style.height="100%",r.style["z-index"]=20,r.style["pointer-events"]="none";var i=this.mouseContainer=document.createElement("div");i.style.position="absolute",i.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var a=this.container;a.appendChild(r),a.appendChild(i);var o=this;i.addEventListener("mouseout",function(){o.isMouseOver=!1,o.unhover()}),i.addEventListener("mouseover",function(){o.isMouseOver=!0})},$Z.toImage=function(e){e||(e="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(WZ),this.updateSize(this.canvas);var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.clearColor(1,1,1,0),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var a=0,o=r-1;a<o;++a,--o)for(var s=0;s<n;++s)for(var l=0;l<4;++l){var u=i[4*(n*a+s)+l];i[4*(n*a+s)+l]=i[4*(n*o+s)+l],i[4*(n*o+s)+l]=u}var c=document.createElement("canvas");c.width=n,c.height=r;var d=c.getContext("2d"),f=d.createImageData(n,r);f.data.set(i),d.putImageData(f,0,0);var h;switch(e){case"jpeg":h=c.toDataURL("image/jpeg");break;case"webp":h=c.toDataURL("image/webp");break;default:h=c.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(WZ),h},$Z.updateSize=function(e){e||(e=this.canvas);var t=this.pixelRatio,n=this.fullLayout,r=n.width,i=n.height,a=0|Math.ceil(t*r),o=0|Math.ceil(t*i);return e.width===a&&e.height===o||(e.width=a,e.height=o),e},$Z.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var e=[PI.calcTicks(this.xaxis),PI.calcTicks(this.yaxis)],t=0;t<2;++t)for(var n=0;n<e[t].length;++n)e[t][n].text=xZ(e[t][n].text+"");return e},$Z.updateRefs=function(e){this.fullLayout=e;var t=this.id.match(KZ),n="xaxis"+t[1],r="yaxis"+t[2];this.xaxis=this.fullLayout[n],this.yaxis=this.fullLayout[r]},$Z.relayoutCallback=function(){var e=this.graphDiv,t=this.xaxis,n=this.yaxis,r=e.layout;r.xaxis.autorange=t.autorange,r.xaxis.range=t.range.slice(0),r.yaxis.autorange=n.autorange,r.yaxis.range=n.range.slice(0);var i={lastInputTime:this.camera.lastInputTime};i[t._name]=t.range.slice(0),i[n._name]=n.range.slice(0),e.emit("plotly_relayout",i)},$Z.cameraChanged=function(){var e=this.camera;this.glplot.setDataBox(this.calcDataBox());var t=this.computeTickMarks();_y(t,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=t,this.glplotOptions.dataBox=e.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},$Z.handleAnnotations=function(){for(var e=this.graphDiv,t=this.fullLayout.annotations,n=0;n<t.length;n++){var r=t[n];r.xref===this.xaxis._id&&r.yref===this.yaxis._id&&rS.getComponentMethod("annotations","drawOne")(e,n)}},$Z.destroy=function(){if(this.glplot){var e=this.traces;e&&Object.keys(e).map(function(t){e[t].dispose(),delete e[t]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},$Z.plot=function(e,t,n){var r=this.glplot;this.updateRefs(n),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(e,t),this.updateFx(n.dragmode);var i=n.width,a=n.height;this.updateSize(this.canvas);var o=this.glplotOptions;o.merge(n),o.screenBox=[0,0,i,a];var s={_fullLayout:{_axisConstraintGroups:this.graphDiv._fullLayout._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis}};XZ(s,this.xaxis),XZ(s,this.yaxis);var l=n._size,u=this.xaxis.domain,c=this.yaxis.domain;o.viewBox=[l.l+u[0]*l.w,l.b+c[0]*l.h,i-l.r-(1-u[1])*l.w,a-l.t-(1-c[1])*l.h],this.mouseContainer.style.width=l.w*(u[1]-u[0])+"px",this.mouseContainer.style.height=l.h*(c[1]-c[0])+"px",this.mouseContainer.height=l.h*(c[1]-c[0]),this.mouseContainer.style.left=l.l+u[0]*l.w+"px",this.mouseContainer.style.top=l.t+(1-c[1])*l.h+"px";var d,f;for(f=0;f<2;++f)d=this[JZ[f]],d._length=o.viewBox[f+2]-o.viewBox[f],ZZ(d),d.setScale();YZ(s),o.ticks=this.computeTickMarks(),o.dataBox=this.calcDataBox(),o.merge(n),r.update(o),this.glplot.draw()},$Z.calcDataBox=function(){var e=this.xaxis,t=this.yaxis,n=e.range,r=t.range,i=e.r2l,a=t.r2l;return[i(n[0]),a(r[0]),i(n[1]),a(r[1])]},$Z.setRanges=function(e){var t=this.xaxis,n=this.yaxis,r=t.l2r,i=n.l2r;t.range=[r(e[0]),r(e[2])],n.range=[i(e[1]),i(e[3])]},$Z.updateTraces=function(e,t){var n,r,i,a=Object.keys(this.traces);this.fullData=e;e:for(n=0;n<a.length;n++){var o=a[n],s=this.traces[o];for(r=0;r<e.length;r++)if(i=e[r],i.uid===o&&i.type===s.type)continue e;s.dispose(),delete this.traces[o]}for(n=0;n<e.length;n++){i=e[n];var l=t[n],u=this.traces[i.uid];u?u.update(i,l):(u=i._module.plot(this,i,l),this.traces[i.uid]=u)}this.glplot.objects.sort(function(e,t){return e._trace.index-t._trace.index})},$Z.updateFx=function(e){"lasso"===e||"select"===e?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===e?"move":"zoom"===e?"crosshair":null},$Z.emitPointAction=function(e,t){for(var n,r=e.trace.uid,i=e.pointIndex,a=0;a<this.fullData.length;a++)this.fullData[a].uid===r&&(n=this.fullData[a]);var o={x:e.traceCoord[0],y:e.traceCoord[1],curveNumber:n.index,pointNumber:i,data:n._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};kO.appendArrayPointValue(o,n,i),this.graphDiv.emit(t,{points:[o]})},$Z.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var e=this.glplot,t=this.camera,n=t.mouseListener,r=1===this.lastButtonState&&0===n.buttons,i=this.fullLayout;this.lastButtonState=n.buttons,this.cameraChanged();var a,o=n.x*e.pixelRatio,s=this.canvas.height-e.pixelRatio*n.y;if(t.boxEnabled&&"zoom"===i.dragmode){this.selectBox.enabled=!0;for(var l=this.selectBox.selectBox=[Math.min(t.boxStart[0],t.boxEnd[0]),Math.min(t.boxStart[1],t.boxEnd[1]),Math.max(t.boxStart[0],t.boxEnd[0]),Math.max(t.boxStart[1],t.boxEnd[1])],u=0;u<2;u++)t.boxStart[u]===t.boxEnd[u]&&(l[u]=e.dataBox[u],l[u+2]=e.dataBox[u+2]);e.setDirty()}else if(!t.panning&&this.isMouseOver){this.selectBox.enabled=!1;var c=i._size,d=this.xaxis.domain,f=this.yaxis.domain;a=e.pick(o/e.pixelRatio+c.l+d[0]*c.w,s/e.pixelRatio-(c.t+(1-f[1])*c.h));var h=a&&a.object._trace.handlePick(a);if(h&&r&&this.emitPointAction(h,"plotly_click"),a&&"skip"!==a.object._trace.hoverinfo&&i.hovermode&&h&&(!this.lastPickResult||this.lastPickResult.traceUid!==h.trace.uid||this.lastPickResult.dataCoord[0]!==h.dataCoord[0]||this.lastPickResult.dataCoord[1]!==h.dataCoord[1])){var p=h;this.lastPickResult={traceUid:h.trace?h.trace.uid:null,dataCoord:h.dataCoord.slice()},this.spikes.update({center:a.dataCoord}),p.screenCoord=[((e.viewBox[2]-e.viewBox[0])*(a.dataCoord[0]-e.dataBox[0])/(e.dataBox[2]-e.dataBox[0])+e.viewBox[0])/e.pixelRatio,(this.canvas.height-(e.viewBox[3]-e.viewBox[1])*(a.dataCoord[1]-e.dataBox[1])/(e.dataBox[3]-e.dataBox[1])-e.viewBox[1])/e.pixelRatio],this.emitPointAction(h,"plotly_hover");var m=this.fullData[p.trace.index]||{},g=p.pointIndex,y=kO.castHoverinfo(m,i,g);if(y&&"all"!==y){var v=y.split("+");-1===v.indexOf("x")&&(p.traceCoord[0]=void 0),-1===v.indexOf("y")&&(p.traceCoord[1]=void 0),-1===v.indexOf("z")&&(p.traceCoord[2]=void 0),-1===v.indexOf("text")&&(p.textLabel=void 0),-1===v.indexOf("name")&&(p.name=void 0)}kO.loneHover({x:p.screenCoord[0],y:p.screenCoord[1],xLabel:this.hoverFormatter("xaxis",p.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",p.traceCoord[1]),zLabel:p.traceCoord[2],text:p.textLabel,name:p.name,color:kO.castHoverOption(m,g,"bgcolor")||p.color,borderColor:kO.castHoverOption(m,g,"bordercolor"),fontFamily:kO.castHoverOption(m,g,"font.family"),fontSize:kO.castHoverOption(m,g,"font.size"),fontColor:kO.castHoverOption(m,g,"font.color")},{container:this.svgContainer,gd:this.graphDiv})}}a||this.unhover(),e.draw()}},$Z.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),kO.loneUnhover(this.svgContainer))},$Z.hoverFormatter=function(e,t){if(void 0!==t){var n=this[e];return PI.tickText(n,n.c2l(t),"hover").text}};var eJ={},tJ=TE.overrideAll,nJ=_L.getSubplotData;eJ.name="gl2d",eJ.attr=["xaxis","yaxis"],eJ.idRoot=["x","y"],eJ.idRegex=EE.idRegex,eJ.attrRegex=EE.attrRegex,eJ.attributes=iL,eJ.supplyLayoutDefaults=function(e,t,n){t._has("cartesian")||xL.supplyLayoutDefaults(e,t,n)},eJ.layoutAttrOverrides=tJ(xL.layoutAttributes,"plot","from-root"),eJ.baseLayoutAttrOverrides=tJ({plot_bgcolor:nS.plot_bgcolor,hoverlabel:bO.hoverlabel},"plot","nested"),eJ.plot=function(e){for(var t=e._fullLayout,n=e._fullData,r=t._subplots.gl2d,i=0;i<r.length;i++){var a=r[i],o=t._plots[a],s=nJ(n,"gl2d",a),l=o._scene2d;void 0===l&&(l=new QZ({id:a,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),o._scene2d=l),l.plot(s,e.calcdata,t,e.layout)}},eJ.clean=function(e,t,n,r){for(var i=r._subplots.gl2d||[],a=0;a<i.length;a++){var o=i[a],s=r._plots[o];if(s._scene2d){0===nJ(e,"gl2d",o).length&&(s._scene2d.destroy(),delete r._plots[o])}}xL.clean.apply(this,arguments)},eJ.drawFramework=function(e){e._context.staticPlot||xL.drawFramework(e)},eJ.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.gl2d,r=0;r<n.length;r++){var i=t._plots[n[r]],a=i._scene2d,o=a.toImage("png");t._glimages.append("svg:image").attr({xmlns:aP.svg,"xlink:href":o,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),a.destroy()}},eJ.updateFx=function(e){for(var t=e._subplots.gl2d,n=0;n<t.length;n++){e._plots[t[n]]._scene2d.updateFx(e.dragmode)}};for(var rJ=WC.extendFlat,iJ=TE.overrideAll,aJ=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],oJ={},sJ=0;sJ<aJ.length;sJ++){var lJ=aJ[sJ];oJ[lJ]=NN[lJ]}rJ(oJ,DE,{autocolorscale:rJ({},DE.autocolorscale,{dflt:!1})},{colorbar:RE});var uJ=iJ(oJ,"calc","nested"),cJ={fragment:OW(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:OW(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])},dJ={ge:xy(">=",!1,"GE"),gt:xy(">",!1,"GT"),lt:xy("<",!0,"LT"),le:xy("<=",!0,"LE"),eq:xy("-",!0,"EQ",!0)},fJ=ky,hJ=wy.prototype,pJ=[0,0,1,0,0,1,1,0,1,1,0,1];hJ.draw=function(){var e=[1,0,0,0,1,0,0,0,1];return function(){var t=this.plot,n=this.shader,r=this.bounds,i=this.numVertices;if(!(i<=0)){var a=t.gl,o=t.dataBox,s=r[2]-r[0],l=r[3]-r[1],u=o[2]-o[0],c=o[3]-o[1];e[0]=2*s/u,e[4]=2*l/c,e[6]=2*(r[0]-o[0])/u-1,e[7]=2*(r[1]-o[1])/c-1,n.bind();var d=n.uniforms;d.viewTransform=e,d.shape=this.shape;var f=n.attributes;this.positionBuffer.bind(),f.position.pointer(),this.weightBuffer.bind(),f.weight.pointer(a.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),f.color.pointer(a.UNSIGNED_BYTE,!0),a.drawArrays(a.TRIANGLES,0,i)}}}(),hJ.drawPick=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=this.plot,i=this.pickShader,a=this.bounds,o=this.numVertices;if(!(o<=0)){var s=r.gl,l=r.dataBox,u=a[2]-a[0],c=a[3]-a[1],d=l[2]-l[0],f=l[3]-l[1];e[0]=2*u/d,e[4]=2*c/f,e[6]=2*(a[0]-l[0])/d-1,e[7]=2*(a[1]-l[1])/f-1;for(var h=0;h<4;++h)t[h]=n>>8*h&255;this.pickOffset=n,i.bind();var p=i.uniforms;p.viewTransform=e,p.pickOffset=t,p.shape=this.shape;var m=i.attributes;return this.positionBuffer.bind(),m.position.pointer(),this.weightBuffer.bind(),m.weight.pointer(s.UNSIGNED_BYTE,!1),this.idBuffer.bind(),m.pickId.pointer(s.UNSIGNED_BYTE,!1),s.drawArrays(s.TRIANGLES,0,o),n+this.shape[0]*this.shape[1]}}}(),hJ.pick=function(e,t,n){var r=this.pickOffset,i=this.shape[0]*this.shape[1];if(n<r||n>=r+i)return null;var a=n-r,o=this.xData,s=this.yData;return{object:this,pointId:a,dataCoord:[o[a%this.shape[0]],s[a/this.shape[0]|0]]}},hJ.update=function(e){e=e||{};var t=e.shape||[0,0],n=e.x||uW(t[0]),r=e.y||uW(t[1]),i=e.z||new Float32Array(t[0]*t[1]);this.xData=n,this.yData=r;var a=e.colorLevels||[0],o=e.colorValues||[0,0,0,1],s=a.length,l=this.bounds,u=l[0]=n[0],c=l[1]=r[0],d=l[2]=n[n.length-1],f=l[3]=r[r.length-1],h=1/(d-u),p=1/(f-c),m=t[0],g=t[1];this.shape=[m,g];var y=(m-1)*(g-1)*(pJ.length>>>1);this.numVertices=y;for(var v=EW.mallocUint8(4*y),_=EW.mallocFloat32(2*y),b=EW.mallocUint8(2*y),x=EW.mallocUint32(y),w=0,k=0;k<g-1;++k)for(var T=p*(r[k]-c),M=p*(r[k+1]-c),A=0;A<m-1;++A)for(var C=h*(n[A]-u),S=h*(n[A+1]-u),E=0;E<pJ.length;E+=2){var P,I,L,O,z=pJ[E],R=pJ[E+1],D=(k+R)*m+(A+z),N=i[D],F=dJ.le(a,N);if(F<0)P=o[0],I=o[1],L=o[2],O=o[3];else if(F===s-1)P=o[4*s-4],I=o[4*s-3],L=o[4*s-2],O=o[4*s-1];else{var j=(N-a[F])/(a[F+1]-a[F]),B=1-j,U=4*F,V=4*(F+1);P=B*o[U]+j*o[V],I=B*o[U+1]+j*o[V+1],L=B*o[U+2]+j*o[V+2],O=B*o[U+3]+j*o[V+3]}v[4*w]=255*P,v[4*w+1]=255*I,v[4*w+2]=255*L,v[4*w+3]=255*O,_[2*w]=.5*C+.5*S,_[2*w+1]=.5*T+.5*M,b[2*w]=z,b[2*w+1]=R,x[w]=k*m+A,w+=1}this.positionBuffer.update(_),this.weightBuffer.update(b),this.colorBuffer.update(v),this.idBuffer.update(x),EW.free(_),EW.free(v),EW.free(b),EW.free(x)},hJ.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};var mJ=Ty.prototype;mJ.handlePick=function(e){var t=this.options,n=t.shape,r=e.pointId,i=r%n[0],a=Math.floor(r/n[0]),o=r;return{trace:this,dataCoord:e.dataCoord,traceCoord:[t.x[i],t.y[a],t.z[o]],textLabel:this.textLabels[r],name:this.name,pointIndex:[a,i],hoverinfo:this.hoverinfo}},mJ.update=function(e,t){var n=t[0];this.index=e.index,this.name=e.name,this.hoverinfo=e.hoverinfo;var r=n.z;this.options.z=[].concat.apply([],r);var i=r[0].length,a=r.length;this.options.shape=[i,a],this.options.x=n.x,this.options.y=n.y;var o=My(e);this.options.colorLevels=o.colorLevels,this.options.colorValues=o.colorValues,this.textLabels=[].concat.apply([],e.text),this.heatmap.update(this.options),PI.expand(this.scene.xaxis,n.x),PI.expand(this.scene.yaxis,n.y)},mJ.dispose=function(){this.heatmap.dispose()};var gJ=Ay,yJ={};yJ.attributes=uJ,yJ.supplyDefaults=YH,yJ.colorbar=IN,yJ.calc=gF,yJ.plot=gJ,yJ.moduleType="trace",yJ.name="heatmapgl",yJ.basePlotModule=eJ,yJ.categories=["gl","gl2d","2dMap"],yJ.meta={};var vJ=yJ,_J=vJ,bJ={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},text:LL.text,orientation:LL.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},autobinx:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"xbins.start":void 0,"xbins.end":void 0,"xbins.size":void 0}},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:Cy("x"),autobiny:{valType:"boolean",dflt:null,editType:"calc",impliedEdits:{"ybins.start":void 0,"ybins.end":void 0,"ybins.size":void 0}},nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:Cy("y"),marker:LL.marker,selected:LL.selected,unselected:LL.unselected,_deprecated:{bardir:LL._deprecated.bardir}},xJ=AC.ONEAVGMONTH,wJ=function(e,t){if(!0===t.visible){var n,r=[],i=[],a=PI.getFromId(e,"h"===t.orientation?t.yaxis||"y":t.xaxis||"x"),o="h"===t.orientation?"y":"x",s={x:"y",y:"x"}[o],l=t[o+"calendar"],u=t.cumulative;hF(t,a,o);var c,d,f,h=Sy(e,t,a,o),p=h[0],m=h[1],g="string"===typeof p.size,y=[],v=g?y:p,_=[],b=[],x=[],w=0,k=t.histnorm,T=t.histfunc,M=-1!==k.indexOf("density");u.enabled&&M&&(k=k.replace(/ ?density$/,""),M=!1);var A,C="max"===T||"min"===T,S=C?null:0,E=tF.count,P=pF[k],I=!1,L=function(e){return a.r2c(e,0,l)};for(uE.isArrayOrTypedArray(t[s])&&"count"!==T&&(A=t[s],I="avg"===T,E=tF[T]),n=L(p.start),d=L(p.end)+(n-PI.tickIncrement(n,p.size,!1,l))/1e6;n<d&&r.length<1e6&&(c=PI.tickIncrement(n,p.size,!1,l),r.push((n+c)/2),i.push(S),x.push([]),y.push(n),M&&_.push(1/(c-n)),I&&b.push(0),!(c<=n));)n=c;y.push(n),g||"date"!==a.type||(v={start:L(v.start),end:L(v.end),size:v.size});var O=i.length,z=!0,R=1/0,D=1/0,N={};for(n=0;n<m.length;n++){var F=m[n];f=uE.findBin(F,v),f>=0&&f<O&&(w+=E(f,n,i,A,b),z&&x[f].length&&F!==m[x[f][0]]&&(z=!1),x[f].push(n),N[n]=f,R=Math.min(R,F-y[f]),D=Math.min(D,y[f+1]-F))}var j;z||(j=uF(R,D,y,a,l)),I&&(w=eF(i,b)),P&&P(i,w,_),u.enabled&&Oy(i,u.direction,u.currentbin);var B=Math.min(r.length,i.length),U=[],V=0,H=B-1;for(n=0;n<B;n++)if(i[n]){V=n;break}for(n=B-1;n>=V;n--)if(i[n]){H=n;break}for(n=V;n<=H;n++)if(SC(r[n])&&SC(i[n])){var W={p:r[n],s:i[n],b:0};u.enabled||(W.pts=x[n],z?W.p0=W.p1=x[n].length?m[x[n][0]]:r[n]:(W.p0=j(y[n]),W.p1=j(y[n+1],!0))),U.push(W)}return 1===U.length&&(U[0].width1=PI.tickIncrement(U[0].p,p.size,!1,l)-U[0].p),TL(U,t),uE.isArrayOrTypedArray(t.selectedpoints)&&uE.tagSelected(U,t,N),U}},kJ=function(e,t,n,r){return n("histnorm"),r.forEach(function(e){n(e+"bins.start"),n(e+"bins.end"),n(e+"bins.size"),!1!==n("autobin"+e)&&n("nbins"+e)}),t},TJ=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,bJ,n,r)}var a=i("x"),o=i("y");i("cumulative.enabled")&&(i("cumulative.direction"),i("cumulative.currentbin")),i("text");var s=i("orientation",o&&!a?"h":"v"),l=t["v"===s?"x":"y"];if(!l||!l.length)return void(t.visible=!1);rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),t["h"===s?"x":"y"]&&i("histfunc"),kJ(0,t,i,"h"===s?["y"]:["x"]),DL(e,t,i,n,r);var u=rS.getComponentMethod("errorbars","supplyDefaults");u(e,t,jE.defaultLine,{axis:"y"}),u(e,t,jE.defaultLine,{axis:"x",inherit:"y"}),uE.coerceSelectionMarkerOpacity(t,i)},MJ=function(e,t,n,r,i){if(e.x="xVal"in t?t.xVal:t.x,e.y="yVal"in t?t.yVal:t.y,t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),!(n.cumulative||{}).enabled){var a=Array.isArray(i)?r[0].pts[i[0]][i[1]]:r[i].pts;e.pointNumbers=a,e.binNumber=e.pointNumber,delete e.pointNumber,delete e.pointIndex;var o;if(n._indexToPoints){o=[];for(var s=0;s<a.length;s++)o=o.concat(n._indexToPoints[a[s]])}else o=a;e.pointIndices=o}return e},AJ=PI.hoverLabelText,CJ=function(e,t,n,r){var i=MO(e,t,n,r);if(i){e=i[0];var a=e.cd[e.index],o=e.cd[0].trace;if(!o.cumulative.enabled){var s="h"===o.orientation?"y":"x";e[s+"Label"]=AJ(e[s+"a"],a.p0,a.p1)}return i}},SJ={};SJ.attributes=bJ,SJ.layoutAttributes=AO,SJ.supplyDefaults=TJ,SJ.supplyLayoutDefaults=CO,SJ.calc=wJ,SJ.setPositions=BO,SJ.plot=zO,SJ.style=UO,SJ.colorbar=YO,SJ.hoverPoints=CJ,SJ.selectPoints=RO,SJ.eventData=MJ,SJ.moduleType="trace",SJ.name="histogram",SJ.basePlotModule=xL,SJ.categories=["cartesian","bar","histogram","oriented","errorBarsOK","showLegend"],SJ.meta={};var EJ=SJ,PJ=EJ,IJ=WC.extendFlat,LJ=IJ({},{x:bJ.x,y:bJ.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:bJ.histnorm,histfunc:bJ.histfunc,autobinx:bJ.autobinx,nbinsx:bJ.nbinsx,xbins:bJ.xbins,autobiny:bJ.autobiny,nbinsy:bJ.nbinsy,ybins:bJ.ybins,xgap:NN.xgap,ygap:NN.ygap,zsmooth:NN.zsmooth,zhoverformat:NN.zhoverformat},DE,{autocolorscale:IJ({},DE.autocolorscale,{dflt:!1})},{colorbar:RE}),OJ=function(e,t,n,r){var i=n("x"),a=n("y");if(!(i&&i.length&&a&&a.length))return void(t.visible=!1);rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y"],r),(n("z")||n("marker.color"))&&n("histfunc"),kJ(0,t,n,["x","y"])},zJ=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,LJ,n,r)}OJ(e,t,i,r),!1!==t.visible&&(GH(0,0,i),QE(e,t,r,i,{prefix:"",cLetter:"z"}))},RJ=PI.hoverLabelText,DJ=function(e,t,n,r,i,a){var o=LF(e,t,n,0,0,a);if(o){e=o[0];var s=e.index,l=s[0],u=s[1],c=e.cd[0],d=c.xRanges[u],f=c.yRanges[l];return e.xLabel=RJ(e.xa,d[0],d[1]),e.yLabel=RJ(e.ya,f[0],f[1]),o}},NJ={};NJ.attributes=LJ,NJ.supplyDefaults=zJ,NJ.calc=gF,NJ.plot=UF,NJ.colorbar=IN,NJ.style=WF,NJ.hoverPoints=DJ,NJ.eventData=MJ,NJ.moduleType="trace",NJ.name="histogram2d",NJ.basePlotModule=xL,NJ.categories=["cartesian","2dMap","histogram"],NJ.meta={};var FJ=NJ,jJ=FJ,BJ=WC.extendFlat,UJ=BJ({x:LJ.x,y:LJ.y,z:LJ.z,marker:LJ.marker,histnorm:LJ.histnorm,histfunc:LJ.histfunc,autobinx:LJ.autobinx,nbinsx:LJ.nbinsx,xbins:LJ.xbins,autobiny:LJ.autobiny,nbinsy:LJ.nbinsy,ybins:LJ.ybins,autocontour:HN.autocontour,ncontours:HN.ncontours,contours:HN.contours,line:HN.line,zhoverformat:LJ.zhoverformat},DE,{zmin:BJ({},DE.zmin,{editType:"calc"}),zmax:BJ({},DE.zmax,{editType:"calc"})},{colorbar:RE}),VJ=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,UJ,n,r)}function a(n){return uE.coerce2(e,t,UJ,n)}OJ(e,t,i,r),!1!==t.visible&&(CF(0,t,i,a),SF(e,t,i,r))},HJ={};HJ.attributes=UJ,HJ.supplyDefaults=VJ,HJ.calc=yF,HJ.plot=VF.plot,HJ.style=qF,HJ.colorbar=bF,HJ.hoverPoints=OF,HJ.moduleType="trace",HJ.name="histogram2dcontour",HJ.basePlotModule=xL,HJ.categories=["cartesian","2dMap","contour","histogram"],HJ.meta={};var WJ=HJ,qJ=WJ,GJ={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}},YJ=WC.extendFlat,XJ=TE.overrideAll,ZJ=XJ({visible:LE.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:jE.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:LE.color,categoryorder:LE.categoryorder,categoryarray:LE.categoryarray,title:LE.title,titlefont:LE.titlefont,type:LE.type,autorange:LE.autorange,rangemode:LE.rangemode,range:LE.range,tickmode:LE.tickmode,nticks:LE.nticks,tick0:LE.tick0,dtick:LE.dtick,tickvals:LE.tickvals,ticktext:LE.ticktext,ticks:LE.ticks,mirror:LE.mirror,ticklen:LE.ticklen,tickwidth:LE.tickwidth,tickcolor:LE.tickcolor,showticklabels:LE.showticklabels,tickfont:LE.tickfont,tickangle:LE.tickangle,tickprefix:LE.tickprefix,showtickprefix:LE.showtickprefix,ticksuffix:LE.ticksuffix,showticksuffix:LE.showticksuffix,showexponent:LE.showexponent,exponentformat:LE.exponentformat,separatethousands:LE.separatethousands,tickformat:LE.tickformat,tickformatstops:LE.tickformatstops,hoverformat:LE.hoverformat,showline:LE.showline,linecolor:LE.linecolor,linewidth:LE.linewidth,showgrid:LE.showgrid,gridcolor:YJ({},LE.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:LE.gridwidth,zeroline:LE.zeroline,zerolinecolor:LE.zerolinecolor,zerolinewidth:LE.zerolinewidth},"plot","from-root"),JJ=zC.mix,KJ=["xaxis","yaxis","zaxis"],QJ=function(e,t,n){function r(e,t){return uE.coerce(i,a,ZJ,e,t)}for(var i,a,o=0;o<KJ.length;o++){var s=KJ[o];i=e[s]||{},a=t[s]={_id:s[0]+n.scene,_name:s},mL(i,a,r,n.data),cL(i,a,r,{font:n.font,letter:s[0],data:n.data,showGrid:!0,bgColor:n.bgColor,calendar:n.calendar},n.fullLayout),r("gridcolor",JJ(a.color,n.bgColor,13600/187).toRgbString()),r("title",s[0]),a.setScale=uE.noop,r("showspikes")&&(r("spikesides"),r("spikethickness"),r("spikecolor",a.color)),r("showaxeslabels"),r("showbackground")&&r("backgroundcolor")}},$J=qD.attributes,eK=WC.extendFlat,tK=uE.counterRegex,nK={_arrayAttrRegexps:[tK("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:eK(zy(0,0,1),{}),center:eK(zy(0,0,0),{}),eye:eK(zy(1.25,1.25,1.25),{}),editType:"camera"},domain:$J({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:ZJ,yaxis:ZJ,zaxis:ZJ,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],dflt:"turntable",editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}},rK=function(e,t,n){function r(t){if(!i){return uE.validate(e[t],nK[t])?e[t]:void 0}}var i=t._basePlotModules.length>1;QD(e,t,0,{type:"gl3d",attributes:nK,handleDefaults:Ry,fullLayout:t,font:t.font,fullData:n,getDfltFromLayout:r,paper_bgcolor:t.paper_bgcolor,calendar:t.calendar})},iK=Dy,aK=Ny,oK=Fy,sK=jy,lK=By,uK=Uy,cK=Vy,dK=Hy,fK=Wy,hK=qy,pK=Gy,mK=Yy,gK=Xy,yK=Zy,vK=Jy,_K=Ky,bK=Qy,xK=function(e,t){var n=t[15];if(0===n)return!1;for(var r=1/n,i=0;i<16;i++)e[i]=t[i]*r;return!0},wK={length:bK,normalize:fK,dot:_K,cross:vK},kK=gK(),TK=gK(),MK=[0,0,0,0],AK=[[0,0,0],[0,0,0],[0,0,0]],CK=[0,0,0],SK=function(e,t,n,r,i,a){if(t||(t=[0,0,0]),n||(n=[0,0,0]),r||(r=[0,0,0]),i||(i=[0,0,0,1]),a||(a=[0,0,0,1]),!xK(kK,e))return!1;if(mK(TK,kK),TK[3]=0,TK[7]=0,TK[11]=0,TK[15]=1,Math.abs(hK(TK)<1e-8))return!1;var o=kK[3],s=kK[7],l=kK[11],u=kK[12],c=kK[13],d=kK[14],f=kK[15];if(0!==o||0!==s||0!==l){MK[0]=o,MK[1]=s,MK[2]=l,MK[3]=f;if(!iK(TK,TK))return!1;yK(TK,TK),$y(i,MK,TK)}else i[0]=i[1]=i[2]=0,i[3]=1;if(t[0]=u,t[1]=c,t[2]=d,ev(AK,kK),n[0]=wK.length(AK[0]),wK.normalize(AK[0],AK[0]),r[0]=wK.dot(AK[0],AK[1]),tv(AK[1],AK[1],AK[0],1,-r[0]),n[1]=wK.length(AK[1]),wK.normalize(AK[1],AK[1]),r[0]/=n[1],r[1]=wK.dot(AK[0],AK[2]),tv(AK[2],AK[2],AK[0],1,-r[1]),r[2]=wK.dot(AK[1],AK[2]),tv(AK[2],AK[2],AK[1],1,-r[2]),n[2]=wK.length(AK[2]),wK.normalize(AK[2],AK[2]),r[1]/=n[2],r[2]/=n[2],wK.cross(CK,AK[1],AK[2]),wK.dot(AK[0],CK)<0)for(var h=0;h<3;h++)n[h]*=-1,AK[h][0]*=-1,AK[h][1]*=-1,AK[h][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+AK[0][0]-AK[1][1]-AK[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-AK[0][0]+AK[1][1]-AK[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-AK[0][0]-AK[1][1]+AK[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+AK[0][0]+AK[1][1]+AK[2][2],0)),AK[2][1]>AK[1][2]&&(a[0]=-a[0]),AK[0][2]>AK[2][0]&&(a[1]=-a[1]),AK[1][0]>AK[0][1]&&(a[2]=-a[2]),!0},EK=nv,PK=rv,IK={identity:aK,translate:dK,multiply:PK,create:gK,scale:cK,fromRotationTranslation:EK},LK=(IK.create(),IK.create()),OK=function(e,t,n,r,i,a){return IK.identity(e),IK.fromRotationTranslation(e,a,t),e[3]=i[0],e[7]=i[1],e[11]=i[2],e[15]=i[3],IK.identity(LK),0!==r[2]&&(LK[9]=r[2],IK.multiply(e,e,LK)),0!==r[1]&&(LK[9]=0,LK[8]=r[1],IK.multiply(e,e,LK)),0!==r[0]&&(LK[8]=0,LK[4]=r[0],IK.multiply(e,e,LK)),IK.scale(e,e,n),e},zK=iv,RK=zK,DK=ov(),NK=ov(),FK=ov(),jK=av,BK=[0,0,0],UK=cv,VK=uv.prototype;VK.recalcMatrix=function(e){var t=this._time,n=KY.le(t,e),r=this.computedMatrix;if(!(n<0)){var i=this._components;if(n===t.length-1)for(var a=16*n,o=0;o<16;++o)r[o]=i[a++];else{for(var s=t[n+1]-t[n],a=16*n,l=this.prevMatrix,u=!0,o=0;o<16;++o)l[o]=i[a++];for(var c=this.nextMatrix,o=0;o<16;++o)c[o]=i[a++],u=u&&l[o]===c[o];if(s<1e-6||u)for(var o=0;o<16;++o)r[o]=l[o];else jK(r,l,c,(e-t[n])/s)}var d=this.computedUp;d[0]=r[1],d[1]=r[5],d[2]=r[9],fK(d,d);var f=this.computedInverse;iK(f,r);var h=this.computedEye,p=f[15];h[0]=f[12]/p,h[1]=f[13]/p,h[2]=f[14]/p;for(var m=this.computedCenter,g=Math.exp(this.computedRadius[0]),o=0;o<3;++o)m[o]=h[o]-r[2+4*o]*g}},VK.idle=function(e){if(!(e<this.lastT())){for(var t=this._components,n=t.length-16,r=0;r<16;++r)t.push(t[n++]);this._time.push(e)}},VK.flush=function(e){var t=KY.gt(this._time,e)-2;t<0||(this._time.splice(0,t),this._components.splice(0,16*t))},VK.lastT=function(){return this._time[this._time.length-1]},VK.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||BK,r=r||this.computedUp,this.setMatrix(e,oK(this.computedMatrix,t,n,r));for(var i=0,a=0;a<3;++a)i+=Math.pow(n[a]-t[a],2);i=Math.log(Math.sqrt(i)),this.computedRadius[0]=i},VK.rotate=function(e,t,n,r){this.recalcMatrix(e);var i=this.computedInverse;t&&lK(i,i,t),n&&sK(i,i,n),r&&uK(i,i,r),this.setMatrix(e,iK(this.computedMatrix,i))};var HK=[0,0,0];VK.pan=function(e,t,n,r){HK[0]=-(t||0),HK[1]=-(n||0),HK[2]=-(r||0),this.recalcMatrix(e);var i=this.computedInverse;dK(i,i,HK),this.setMatrix(e,iK(i,i))},VK.translate=function(e,t,n,r){HK[0]=t||0,HK[1]=n||0,HK[2]=r||0,this.recalcMatrix(e);var i=this.computedMatrix;dK(i,i,HK),this.setMatrix(e,i)},VK.setMatrix=function(e,t){if(!(e<this.lastT())){this._time.push(e);for(var n=0;n<16;++n)this._components.push(t[n])}},VK.setDistance=function(e,t){this.computedRadius[0]=t},VK.setDistanceLimits=function(e,t){var n=this._limits;n[0]=e,n[1]=t},VK.getDistanceLimits=function(e){var t=this._limits;return e?(e[0]=t[0],e[1]=t[1],e):t};var WK={};WK=fv,WK.derivative=dv;var qK=gv,GK=pv.prototype;GK.flush=function(e){var t=KY.gt(this._time,e)-1;t<=0||(this._time.splice(0,t),this._state.splice(0,t*this.dimension),this._velocity.splice(0,t*this.dimension))},GK.curve=function(e){var t=this._time,n=t.length,r=KY.le(t,e),i=this._scratch[0],a=this._state,o=this._velocity,s=this.dimension,l=this.bounds;if(r<0)for(var u=s-1,c=0;c<s;++c,--u)i[c]=a[u];else if(r>=n-1)for(var u=a.length-1,d=e-t[n-1],c=0;c<s;++c,--u)i[c]=a[u]+d*o[u];else{for(var u=s*(r+1)-1,f=t[r],h=t[r+1],p=h-f||1,m=this._scratch[1],g=this._scratch[2],y=this._scratch[3],v=this._scratch[4],_=!0,c=0;c<s;++c,--u)m[c]=a[u],y[c]=o[u]*p,g[c]=a[u+s],v[c]=o[u+s]*p,_=_&&m[c]===g[c]&&y[c]===v[c]&&0===y[c];if(_)for(var c=0;c<s;++c)i[c]=m[c];else WK(m,y,g,v,(e-f)/p,i)}for(var b=l[0],x=l[1],c=0;c<s;++c)i[c]=hv(b[c],x[c],i[c]);return i},GK.dcurve=function(e){var t=this._time,n=t.length,r=KY.le(t,e),i=this._scratch[0],a=this._state,o=this._velocity,s=this.dimension;if(r>=n-1)for(var l=a.length-1,u=(t[n-1],0);u<s;++u,--l)i[u]=o[l];else{for(var l=s*(r+1)-1,c=t[r],d=t[r+1],f=d-c||1,h=this._scratch[1],p=this._scratch[2],m=this._scratch[3],g=this._scratch[4],y=!0,u=0;u<s;++u,--l)h[u]=a[l],m[u]=o[l]*f,p[u]=a[l+s],g[u]=o[l+s]*f,y=y&&h[u]===p[u]&&m[u]===g[u]&&0===m[u];if(y)for(var u=0;u<s;++u)i[u]=0;else{WK.derivative(h,m,p,g,(e-c)/f,i);for(var u=0;u<s;++u)i[u]/=f}}return i},GK.lastT=function(){var e=this._time;return e[e.length-1]},GK.stable=function(){for(var e=this._velocity,t=e.length,n=this.dimension-1;n>=0;--n)if(e[--t])return!1;return!0},GK.jump=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,o=this.bounds,s=o[0],l=o[1];this._time.push(t,e);for(var u=0;u<2;++u)for(var c=0;c<n;++c)r.push(r[a++]),i.push(0);this._time.push(e);for(var c=n;c>0;--c)r.push(hv(s[c-1],l[c-1],arguments[c])),i.push(0)}},GK.push=function(e){var t=this.lastT(),n=this.dimension;if(!(e<t||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,o=e-t,s=this.bounds,l=s[0],u=s[1],c=o>1e-6?1/o:0;this._time.push(e);for(var d=n;d>0;--d){var f=hv(l[d-1],u[d-1],arguments[d]);r.push(f),i.push((f-r[a++])*c)}}},GK.set=function(e){var t=this.dimension;if(!(e<this.lastT()||arguments.length!==t+1)){var n=this._state,r=this._velocity,i=this.bounds,a=i[0],o=i[1];this._time.push(e);for(var s=t;s>0;--s)n.push(hv(a[s-1],o[s-1],arguments[s])),r.push(0)}},GK.move=function(e){var t=this.lastT(),n=this.dimension;if(!(e<=t||arguments.length!==n+1)){var r=this._state,i=this._velocity,a=r.length-this.dimension,o=this.bounds,s=o[0],l=o[1],u=e-t,c=u>1e-6?1/u:0;this._time.push(e);for(var d=n;d>0;--d){var f=arguments[d];r.push(hv(s[d-1],l[d-1],r[a++]+f)),i.push(f*c)}}},GK.idle=function(e){var t=this.lastT();if(!(e<t)){var n=this.dimension,r=this._state,i=this._velocity,a=r.length-n,o=this.bounds,s=o[0],l=o[1],u=e-t;this._time.push(e);for(var c=n-1;c>=0;--c)r.push(hv(s[c],l[c],r[a]+u*i[a])),i.push(0),a+=1}};var YK=yv,XK=wv,ZK=xv.prototype;ZK.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},ZK.recalcMatrix=function(e){this.radius.curve(e),this.center.curve(e),this.rotation.curve(e);var t=this.computedRotation;bv(t,t);var n=this.computedMatrix;jU(n,t);var r=this.computedCenter,i=this.computedEye,a=this.computedUp,o=Math.exp(this.computedRadius[0]);i[0]=r[0]+o*n[2],i[1]=r[1]+o*n[6],i[2]=r[2]+o*n[10],a[0]=n[1],a[1]=n[5],a[2]=n[9];for(var s=0;s<3;++s){for(var l=0,u=0;u<3;++u)l+=n[s+4*u]*i[u];n[12+s]=-l}},ZK.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n},ZK.idle=function(e){this.center.idle(e),this.radius.idle(e),this.rotation.idle(e)},ZK.flush=function(e){this.center.flush(e),this.radius.flush(e),this.rotation.flush(e)},ZK.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,a=i[1],o=i[5],s=i[9],l=vv(a,o,s);a/=l,o/=l,s/=l;var u=i[0],c=i[4],d=i[8],f=u*a+c*o+d*s;u-=a*f,c-=o*f,d-=s*f;var h=vv(u,c,d);u/=h,c/=h,d/=h;var p=i[2],m=i[6],g=i[10],y=p*a+m*o+g*s,v=p*u+m*c+g*d;p-=y*a+v*u,m-=y*o+v*c,g-=y*s+v*d;var _=vv(p,m,g);p/=_,m/=_,g/=_;var b=u*t+a*n,x=c*t+o*n,w=d*t+s*n;this.center.move(e,b,x,w);var k=Math.exp(this.computedRadius[0]);k=Math.max(1e-4,k+r),this.radius.set(e,Math.log(k))},ZK.rotate=function(e,t,n,r){this.recalcMatrix(e),t=t||0,n=n||0;var i=this.computedMatrix,a=i[0],o=i[4],s=i[8],l=i[1],u=i[5],c=i[9],d=i[2],f=i[6],h=i[10],p=t*a+n*l,m=t*o+n*u,g=t*s+n*c,y=-(f*g-h*m),v=-(h*p-d*g),_=-(d*m-f*p),b=Math.sqrt(Math.max(0,1-Math.pow(y,2)-Math.pow(v,2)-Math.pow(_,2))),x=_v(y,v,_,b);x>1e-6?(y/=x,v/=x,_/=x,b/=x):(y=v=_=0,b=1);var w=this.computedRotation,k=w[0],T=w[1],M=w[2],A=w[3],C=k*b+A*y+T*_-M*v,S=T*b+A*v+M*y-k*_,E=M*b+A*_+k*v-T*y,P=A*b-k*y-T*v-M*_;if(r){y=d,v=f,_=h;var I=Math.sin(r)/vv(y,v,_);y*=I,v*=I,_*=I,b=Math.cos(t),C=C*b+P*y+S*_-E*v,S=S*b+P*v+E*y-C*_,E=E*b+P*_+C*v-S*y,P=P*b-C*y-S*v-E*_}var L=_v(C,S,E,P);L>1e-6?(C/=L,S/=L,E/=L,P/=L):(C=S=E=0,P=1),this.rotation.set(e,C,S,E,P)},ZK.lookAt=function(e,t,n,r){this.recalcMatrix(e),n=n||this.computedCenter,t=t||this.computedEye,r=r||this.computedUp;var i=this.computedMatrix;oK(i,t,n,r);var a=this.computedRotation;YK(a,i[0],i[1],i[2],i[4],i[5],i[6],i[8],i[9],i[10]),bv(a,a),this.rotation.set(e,a[0],a[1],a[2],a[3]);for(var o=0,s=0;s<3;++s)o+=Math.pow(n[s]-t[s],2);this.radius.set(e,.5*Math.log(Math.max(o,1e-6))),this.center.set(e,n[0],n[1],n[2])},ZK.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},ZK.setMatrix=function(e,t){var n=this.computedRotation;YK(n,t[0],t[1],t[2],t[4],t[5],t[6],t[8],t[9],t[10]),bv(n,n),this.rotation.set(e,n[0],n[1],n[2],n[3]);var r=this.computedMatrix;iK(r,t);var i=r[15];if(Math.abs(i)>1e-6){var a=r[12]/i,o=r[13]/i,s=r[14]/i;this.recalcMatrix(e);var l=Math.exp(this.computedRadius[0]);this.center.set(e,a-r[2]*l,o-r[6]*l,s-r[10]*l),this.radius.idle(e)}else this.center.idle(e),this.radius.idle(e)},ZK.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},ZK.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},ZK.getDistanceLimits=function(e){var t=this.radius.bounds;return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},ZK.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},ZK.fromJSON=function(e){var t=this.lastT(),n=e.center;n&&this.center.set(t,n[0],n[1],n[2]);var r=e.rotation;r&&this.rotation.set(t,r[0],r[1],r[2],r[3]);var i=e.distance;i&&i>0&&this.radius.set(t,Math.log(i)),this.setDistanceLimits(e.zoomMin,e.zoomMax)};var JK=kv,KK=Sv,QK=Cv.prototype;QK.setDistanceLimits=function(e,t){e=e>0?Math.log(e):-1/0,t=t>0?Math.log(t):1/0,t=Math.max(t,e),this.radius.bounds[0][0]=e,this.radius.bounds[1][0]=t},QK.getDistanceLimits=function(e){var t=this.radius.bounds[0];return e?(e[0]=Math.exp(t[0][0]),e[1]=Math.exp(t[1][0]),e):[Math.exp(t[0][0]),Math.exp(t[1][0])]},QK.recalcMatrix=function(e){this.center.curve(e),this.up.curve(e),this.right.curve(e),this.radius.curve(e),this.angle.curve(e);for(var t=this.computedUp,n=this.computedRight,r=0,i=0,a=0;a<3;++a)i+=t[a]*n[a],r+=t[a]*t[a];for(var o=Math.sqrt(r),s=0,a=0;a<3;++a)n[a]-=t[a]*i/r,s+=n[a]*n[a],t[a]/=o;for(var l=Math.sqrt(s),a=0;a<3;++a)n[a]/=l;var u=this.computedToward;vK(u,t,n),fK(u,u);for(var c=Math.exp(this.computedRadius[0]),d=this.computedAngle[0],f=this.computedAngle[1],h=Math.cos(d),p=Math.sin(d),m=Math.cos(f),g=Math.sin(f),y=this.computedCenter,v=h*m,_=p*m,b=g,x=-h*g,w=-p*g,k=m,T=this.computedEye,M=this.computedMatrix,a=0;a<3;++a){var A=v*n[a]+_*u[a]+b*t[a];M[4*a+1]=x*n[a]+w*u[a]+k*t[a],M[4*a+2]=A,M[4*a+3]=0}var C=M[1],S=M[5],E=M[9],P=M[2],I=M[6],L=M[10],O=S*L-E*I,z=E*P-C*L,R=C*I-S*P,D=Tv(O,z,R);O/=D,z/=D,R/=D,M[0]=O,M[4]=z,M[8]=R;for(var a=0;a<3;++a)T[a]=y[a]+M[2+4*a]*c;for(var a=0;a<3;++a){for(var s=0,N=0;N<3;++N)s+=M[a+4*N]*T[N];M[12+a]=-s}M[15]=1},QK.getMatrix=function(e,t){this.recalcMatrix(e);var n=this.computedMatrix;if(t){for(var r=0;r<16;++r)t[r]=n[r];return t}return n};var $K=[0,0,0];QK.rotate=function(e,t,n,r){if(this.angle.move(e,t,n),r){this.recalcMatrix(e);var i=this.computedMatrix;$K[0]=i[2],$K[1]=i[6],$K[2]=i[10];for(var a=this.computedUp,o=this.computedRight,s=this.computedToward,l=0;l<3;++l)i[4*l]=a[l],i[4*l+1]=o[l],i[4*l+2]=s[l];JK(i,i,r,$K);for(var l=0;l<3;++l)a[l]=i[4*l],o[l]=i[4*l+1];this.up.set(e,a[0],a[1],a[2]),this.right.set(e,o[0],o[1],o[2])}},QK.pan=function(e,t,n,r){t=t||0,n=n||0,r=r||0,this.recalcMatrix(e);var i=this.computedMatrix,a=(Math.exp(this.computedRadius[0]),i[1]),o=i[5],s=i[9],l=Tv(a,o,s);a/=l,o/=l,s/=l;var u=i[0],c=i[4],d=i[8],f=u*a+c*o+d*s;u-=a*f,c-=o*f,d-=s*f;var h=Tv(u,c,d);u/=h,c/=h,d/=h;var p=u*t+a*n,m=c*t+o*n,g=d*t+s*n;this.center.move(e,p,m,g);var y=Math.exp(this.computedRadius[0]);y=Math.max(1e-4,y+r),this.radius.set(e,Math.log(y))},QK.translate=function(e,t,n,r){this.center.move(e,t||0,n||0,r||0)},QK.setMatrix=function(e,t,n,r){var i=1;"number"===typeof n&&(i=0|n),(i<0||i>3)&&(i=1);var a=(i+2)%3;t||(this.recalcMatrix(e),t=this.computedMatrix);var o=t[i],s=t[i+4],l=t[i+8];if(r){var u=Math.abs(o),c=Math.abs(s),d=Math.abs(l),f=Math.max(u,c,d);u===f?(o=o<0?-1:1,s=l=0):d===f?(l=l<0?-1:1,o=s=0):(s=s<0?-1:1,o=l=0)}else{var h=Tv(o,s,l);o/=h,s/=h,l/=h}var p=t[a],m=t[a+4],g=t[a+8],y=p*o+m*s+g*l;p-=o*y,m-=s*y,g-=l*y;var v=Tv(p,m,g);p/=v,m/=v,g/=v;var _=s*g-l*m,b=l*p-o*g,x=o*m-s*p,w=Tv(_,b,x);_/=w,b/=w,x/=w,this.center.jump(e,U,V,H),this.radius.idle(e),this.up.jump(e,o,s,l),this.right.jump(e,p,m,g);var k,T;if(2===i){var M=t[1],A=t[5],C=t[9],S=M*p+A*m+C*g,E=M*_+A*b+C*x;k=O<0?-Math.PI/2:Math.PI/2,T=Math.atan2(E,S)}else{var P=t[2],I=t[6],L=t[10],O=P*o+I*s+L*l,z=P*p+I*m+L*g,R=P*_+I*b+L*x;k=Math.asin(Mv(O)),T=Math.atan2(R,z)}this.angle.jump(e,T,k),this.recalcMatrix(e);var D=t[2],N=t[6],F=t[10],j=this.computedMatrix;iK(j,t);var B=j[15],U=j[12]/B,V=j[13]/B,H=j[14]/B,W=Math.exp(this.computedRadius[0]);this.center.jump(e,U-D*W,V-N*W,H-F*W)},QK.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},QK.idle=function(e){this.center.idle(e),this.up.idle(e),this.right.idle(e),this.radius.idle(e),this.angle.idle(e)},QK.flush=function(e){this.center.flush(e),this.up.flush(e),this.right.flush(e),this.radius.flush(e),this.angle.flush(e)},QK.setDistance=function(e,t){t>0&&this.radius.set(e,Math.log(t))},QK.lookAt=function(e,t,n,r){this.recalcMatrix(e),t=t||this.computedEye,n=n||this.computedCenter,r=r||this.computedUp;var i=r[0],a=r[1],o=r[2],s=Tv(i,a,o);if(!(s<1e-6)){i/=s,a/=s,o/=s;var l=t[0]-n[0],u=t[1]-n[1],c=t[2]-n[2],d=Tv(l,u,c);if(!(d<1e-6)){l/=d,u/=d,c/=d;var f=this.computedRight,h=f[0],p=f[1],m=f[2],g=i*h+a*p+o*m;h-=g*i,p-=g*a,m-=g*o;var y=Tv(h,p,m);if(!(y<.01&&(h=a*c-o*u,p=o*l-i*c,m=i*u-a*l,(y=Tv(h,p,m))<1e-6))){h/=y,p/=y,m/=y,this.up.set(e,i,a,o),this.right.set(e,h,p,m),this.center.set(e,n[0],n[1],n[2]),this.radius.set(e,Math.log(d));var v=a*m-o*p,_=o*h-i*m,b=i*p-a*h,x=Tv(v,_,b);v/=x,_/=x,b/=x;var w=i*l+a*u+o*c,k=h*l+p*u+m*c,T=v*l+_*u+b*c,M=Math.asin(Mv(w)),A=Math.atan2(T,k),C=this.angle._state,S=C[C.length-1],E=C[C.length-2];S%=2*Math.PI;var P=Math.abs(S+2*Math.PI-A),I=Math.abs(S-A),L=Math.abs(S-2*Math.PI-A);P<I&&(S+=2*Math.PI),L<I&&(S-=2*Math.PI),this.angle.jump(this.angle.lastT(),S,E),this.angle.set(e,A,M)}}}};var eQ=Pv,tQ=Ev.prototype;[["flush",1],["idle",1],["lookAt",4],["rotate",4],["pan",4],["translate",4],["setMatrix",2],["setDistanceLimits",2],["setDistance",2]].forEach(function(e){for(var t=e[0],n=[],r=0;r<e[1];++r)n.push("a"+r);var i="var cc=this._controllerList;for(var i=0;i<cc.length;++i){cc[i]."+e[0]+"("+n.join()+")}";tQ[t]=Function.apply(null,n.concat(i))}),tQ.recalcMatrix=function(e){this._active.recalcMatrix(e)},tQ.getDistance=function(e){return this._active.getDistance(e)},tQ.getDistanceLimits=function(e){return this._active.getDistanceLimits(e)},tQ.lastT=function(){return this._active.lastT()},tQ.setMode=function(e){if(e!==this._mode){var t=this._controllerNames.indexOf(e);if(!(t<0)){var n=this._active,r=this._controllerList[t],i=Math.max(n.lastT(),r.lastT());n.recalcMatrix(i),r.setMatrix(i,n.computedMatrix),this._active=r,this._mode=e,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},tQ.getMode=function(){return this._mode};var nQ={};(function(e){nQ=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var rQ=Iv,iQ=Lv;Ov.prototype.bind=function(){iQ(this.gl,this._elements,this._attributes)},Ov.prototype.update=function(e,t,n){this._elements=t,this._attributes=e,this._elementsType=n||this.gl.UNSIGNED_SHORT},Ov.prototype.dispose=function(){},Ov.prototype.unbind=function(){},Ov.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._elements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)};var aQ=zv;Rv.prototype.bind=function(e){switch(this.dimension){case 1:e.vertexAttrib1f(this.location,this.a);break;case 2:e.vertexAttrib2f(this.location,this.a,this.b);break;case 3:e.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:e.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},Dv.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var e=0;e<this._attribs.length;++e)this._attribs[e].bind(this.gl)},Dv.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},Dv.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},Dv.prototype.update=function(e,t,n){if(this.bind(),iQ(this.gl,t,e),this.unbind(),this._attribs.length=0,e)for(var r=0;r<e.length;++r){var i=e[r];"number"===typeof i?this._attribs.push(new Rv(r,1,i)):Array.isArray(i)&&this._attribs.push(new Rv(r,i.length,i[0],i[1],i[2],i[3]))}this._useElements=!!t,this._elementsType=n||this.gl.UNSIGNED_SHORT},Dv.prototype.draw=function(e,t,n){n=n||0;var r=this.gl;this._useElements?r.drawElements(e,t,this._elementsType,n):r.drawArrays(e,n,t)};var oQ=Nv,sQ=jv,lQ={};!function(){"use strict";function e(t){t.permitHostObjects___&&t.permitHostObjects___(e)}function t(e){return!(e.substr(0,f.length)==f&&"___"===e.substr(e.length-3))}function n(e){if(e!==Object(e))throw new TypeError("Not an object: "+e);var t=e[h];if(t&&t.key===e)return t;if(d(e)){t={key:e};try{return c(e,h,{value:t,writable:!1,enumerable:!1,configurable:!1}),t}catch(e){return}}}function r(e){return e.prototype=null,Object.freeze(e)}function i(){y||"undefined"===typeof console||(y=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}if("undefined"===typeof ses||!ses.ok||ses.ok()){"undefined"!==typeof ses&&(ses.weakMapPermitHostObjects=e);var a=!1;if("function"===typeof WeakMap){var o=WeakMap;if("undefined"!==typeof navigator&&/Firefox/.test(navigator.userAgent));else{var s=new o,l=Object.freeze({});if(s.set(l,1),1===s.get(l))return void(lQ=WeakMap);a=!0}}var u=(Object.prototype.hasOwnProperty,Object.getOwnPropertyNames),c=Object.defineProperty,d=Object.isExtensible,f="weakmap:",h=f+"ident:"+Math.random()+"___";if("undefined"!==typeof crypto&&"function"===typeof crypto.getRandomValues&&"function"===typeof ArrayBuffer&&"function"===typeof Uint8Array){var p=new ArrayBuffer(25),m=new Uint8Array(p);crypto.getRandomValues(m),h=f+"rand:"+Array.prototype.map.call(m,function(e){return(e%36).toString(36)}).join("")+"___"}if(c(Object,"getOwnPropertyNames",{value:function(e){return u(e).filter(t)}}),"getPropertyNames"in Object){var g=Object.getPropertyNames;c(Object,"getPropertyNames",{value:function(e){return g(e).filter(t)}})}!function(){var e=Object.freeze;c(Object,"freeze",{value:function(t){return n(t),e(t)}});var t=Object.seal;c(Object,"seal",{value:function(e){return n(e),t(e)}});var r=Object.preventExtensions;c(Object,"preventExtensions",{value:function(e){return n(e),r(e)}})}();var y=!1,v=0,_=function(){function e(e,t){var r,i=n(e);return i?u in i?i[u]:t:(r=s.indexOf(e),r>=0?l[r]:t)}function t(e){var t=n(e);return t?u in t:s.indexOf(e)>=0}function a(e,t){var r,i=n(e);return i?i[u]=t:(r=s.indexOf(e),r>=0?l[r]=t:(r=s.length,l[r]=t,s[r]=e)),this}function o(e){var t,r,i=n(e);return i?u in i&&delete i[u]:!((t=s.indexOf(e))<0)&&(r=s.length-1,s[t]=void 0,l[t]=l[r],s[t]=s[r],s.length=r,l.length=r,!0)}this instanceof _||i();var s=[],l=[],u=v++;return Object.create(_.prototype,{get___:{value:r(e)},has___:{value:r(t)},set___:{value:r(a)},delete___:{value:r(o)}})};_.prototype=Object.create(Object.prototype,{get:{value:function(e,t){return this.get___(e,t)},writable:!0,configurable:!0},has:{value:function(e){return this.has___(e)},writable:!0,configurable:!0},set:{value:function(e,t){return this.set___(e,t)},writable:!0,configurable:!0},delete:{value:function(e){return this.delete___(e)},writable:!0,configurable:!0}}),"function"===typeof o?function(){function t(){function t(e,t){return c?u.has(e)?u.get(e):c.get___(e,t):u.get(e,t)}function n(e){return u.has(e)||!!c&&c.has___(e)}function s(e){var t=!!u.delete(e);return c?c.delete___(e)||t:t}this instanceof _||i();var l,u=new o,c=void 0,d=!1;return l=a?function(e,t){return u.set(e,t),u.has(e)||(c||(c=new _),c.set(e,t)),this}:function(e,t){if(d)try{u.set(e,t)}catch(n){c||(c=new _),c.set___(e,t)}else u.set(e,t);return this},Object.create(_.prototype,{get___:{value:r(t)},has___:{value:r(n)},set___:{value:r(l)},delete___:{value:r(s)},permitHostObjects___:{value:r(function(t){if(t!==e)throw new Error("bogus call to permitHostObjects___");d=!0})}})}a&&"undefined"!==typeof Proxy&&(Proxy=void 0),t.prototype=_.prototype,lQ=t,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!==typeof Proxy&&(Proxy=void 0),lQ=_)}}();var uQ="undefined"===typeof WeakMap?lQ:WeakMap,cQ=new uQ,dQ=Bv,fQ={},hQ=OW(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),pQ=OW(["precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);fQ.line=function(e){return Oq(e,hQ,pQ,null,[{name:"position",type:"vec3"}])};var mQ=OW(["#define GLSLIFY 1\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvoid main() {  \n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n  mat2 planeXform = scale * mat2(cos(angle), sin(angle),\n                                -sin(angle), cos(angle));\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n  vec4 worldPosition = model * vec4(dataPosition, 1);\n  \n  //Compute clip position\n  vec4 viewPosition = view * worldPosition;\n  vec4 clipPosition = projection * viewPosition;\n  clipPosition /= clipPosition.w;\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec4(viewOffset, 0, 0);\n\n  //Done\n  gl_Position = clipPosition;\n}"]),gQ=OW(["precision mediump float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);fQ.text=function(e){return Oq(e,mQ,gQ,null,[{name:"position",type:"vec3"}])};var yQ=OW(["#define GLSLIFY 1\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  if(dot(normal, enable) > 0.0) {\n    vec3 nPosition = mix(bounds[0], bounds[1], 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n  colorChannel = abs(normal);\n}"]),vQ=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] + \n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);fQ.bg=function(e){return Oq(e,yQ,vQ,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])};var _Q=Vv,bQ=fQ.bg,xQ=Uv.prototype;xQ.draw=function(e,t,n,r,i,a){for(var o=!1,s=0;s<3;++s)o=o||i[s];if(o){var l=this.gl;l.enable(l.POLYGON_OFFSET_FILL),l.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:e,view:t,projection:n,bounds:r,enable:i,colors:a},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),l.disable(l.POLYGON_OFFSET_FILL)}},xQ.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};var wQ=Hv,kQ={};kQ=Gv,kQ.positive=Yv,kQ.negative=Xv;var TQ=Kv,MQ=new Array(16),AQ=(new Array(16),new Array(8)),CQ=new Array(8),SQ=new Array(3),EQ=[0,0,0];!function(){for(var e=0;e<8;++e)AQ[e]=[1,1,1,1],CQ[e]=[1,1,1]}();var PQ=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]],IQ=[1,1,1],LQ=[0,0,0],OQ={cubeEdges:IQ,axis:LQ},zQ=t_,RQ=fQ.line,DQ=[0,0,0],NQ=[0,0,0],FQ=[0,0,0],jQ=[0,0,0],BQ=[1,1],UQ=e_.prototype;UQ.bind=function(e,t,n){this.shader.bind(),this.shader.uniforms.model=e,this.shader.uniforms.view=t,this.shader.uniforms.projection=n,BQ[0]=this.gl.drawingBufferWidth,BQ[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=BQ,this.vao.bind()},UQ.unbind=function(){this.vao.unbind()},UQ.drawAxisLine=function(e,t,n,r,i){var a=Qv(NQ);this.shader.uniforms.majorAxis=NQ,a[e]=t[1][e]-t[0][e],this.shader.uniforms.minorAxis=a;var o=$v(jQ,n);o[e]+=t[0][e],this.shader.uniforms.offset=o,this.shader.uniforms.lineWidth=i,this.shader.uniforms.color=r;var s=Qv(FQ);s[(e+2)%3]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,6);var s=Qv(FQ);s[(e+1)%3]=1,this.shader.uniforms.screenAxis=s,this.vao.draw(this.gl.TRIANGLES,6)},UQ.drawAxisTicks=function(e,t,n,r,i){if(this.tickCount[e]){var a=Qv(DQ);a[e]=1,this.shader.uniforms.majorAxis=a,this.shader.uniforms.offset=t,this.shader.uniforms.minorAxis=n,this.shader.uniforms.color=r,this.shader.uniforms.lineWidth=i;var o=Qv(FQ);o[e]=1,this.shader.uniforms.screenAxis=o,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}},UQ.drawGrid=function(e,t,n,r,i,a){if(this.gridCount[e]){var o=Qv(NQ);o[t]=n[1][t]-n[0][t],this.shader.uniforms.minorAxis=o;var s=$v(jQ,r);s[t]+=n[0][t],this.shader.uniforms.offset=s;var l=Qv(DQ);l[e]=1,this.shader.uniforms.majorAxis=l;var u=Qv(FQ);u[e]=1,this.shader.uniforms.screenAxis=u,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,this.gridCount[e],this.gridOffset[e])}},UQ.drawZero=function(e,t,n,r,i,a){var o=Qv(NQ);this.shader.uniforms.majorAxis=o,o[e]=n[1][e]-n[0][e],this.shader.uniforms.minorAxis=o;var s=$v(jQ,r);s[e]+=n[0][e],this.shader.uniforms.offset=s;var l=Qv(FQ);l[t]=1,this.shader.uniforms.screenAxis=l,this.shader.uniforms.lineWidth=a,this.shader.uniforms.color=i,this.vao.draw(this.gl.TRIANGLES,6)},UQ.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};var VQ={};(function(e){"use strict";function t(e,t,n,r){this.gl=e,this.shader=t,this.buffer=n,this.vao=r,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}function n(e,t){try{return BX(e,t)}catch(e){return console.warn("error vectorizing text:",e),{cells:[],positions:[]}}}function r(e,n,r,a,o,s){var l=LW(e),u=sQ(e,[{buffer:l,size:3}]),c=i(e);c.attributes.position.location=0;var d=new t(e,c,l,u);return d.update(n,r,a,o,s),d}VQ=r;var i=fQ.text,a=window||e.global||{},o=a.__TEXT_CACHE||{};a.__TEXT_CACHE={};var s=t.prototype,l=[0,0];s.bind=function(e,t,n,r){this.vao.bind(),this.shader.bind();var i=this.shader.uniforms;i.model=e,i.view=t,i.projection=n,i.pixelScale=r,l[0]=this.gl.drawingBufferWidth,l[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=l},s.unbind=function(){this.vao.unbind()},s.update=function(e,t,r,i,a){function s(e,t,r,i){var a=o[r];a||(a=o[r]={});var s=a[t];s||(s=a[t]=n(t,{triangles:!0,font:r,textAlign:"center",textBaseline:"middle"}));for(var u=(i||12)/12,c=s.positions,d=s.cells,f=0,h=d.length;f<h;++f)for(var p=d[f],m=2;m>=0;--m){var g=c[p[m]];l.push(u*g[0],-u*g[1],e)}}for(var l=(this.gl,[]),u=[0,0,0],c=[0,0,0],d=[0,0,0],f=[0,0,0],h=0;h<3;++h){d[h]=l.length/3|0,s(.5*(e[0][h]+e[1][h]),t[h],r),f[h]=(l.length/3|0)-d[h],u[h]=l.length/3|0;for(var p=0;p<i[h].length;++p)i[h][p].text&&s(i[h][p].x,i[h][p].text,i[h][p].font||a,i[h][p].fontSize||12);c[h]=(l.length/3|0)-u[h]}this.buffer.update(l),this.tickOffset=u,this.tickCount=c,this.labelOffset=d,this.labelCount=f};var u=[0,0,0];s.drawTicks=function(e,t,n,r,i){if(this.tickCount[e]){var a=u;a[0]=a[1]=a[2]=0,a[e]=1,this.shader.uniforms.axis=a,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.tickCount[e],this.tickOffset[e])}};var c=[0,0,0];s.drawLabel=function(e,t,n,r,i){this.labelCount[e]&&(this.shader.uniforms.axis=c,this.shader.uniforms.color=i,this.shader.uniforms.angle=n,this.shader.uniforms.scale=t,this.shader.uniforms.offset=r,this.vao.draw(this.gl.TRIANGLES,this.labelCount[e],this.labelOffset[e]))},s.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this,gj);var HQ={};HQ.create=r_,HQ.equal=i_;var WQ=u_,qQ=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),GQ=o_.prototype;GQ.update=function(e){function t(t,n,r){if(r in e){var i,a=e[r],o=this[r];(t?Array.isArray(a)&&Array.isArray(a[0]):Array.isArray(a))?this[r]=i=[n(a[0]),n(a[1]),n(a[2])]:this[r]=i=[n(a),n(a),n(a)];for(var s=0;s<3;++s)if(i[s]!==o[s])return!0}return!1}e=e||{};var n,r=t.bind(this,!1,Number),i=t.bind(this,!1,Boolean),a=t.bind(this,!1,String),o=t.bind(this,!0,function(e){if(Array.isArray(e)){if(3===e.length)return[+e[0],+e[1],+e[2],1];if(4===e.length)return[+e[0],+e[1],+e[2],+e[3]]}return[0,0,0,1]}),s=!1,l=!1;if("bounds"in e)for(var u=e.bounds,c=0;c<2;++c)for(var d=0;d<3;++d)u[c][d]!==this.bounds[c][d]&&(l=!0),this.bounds[c][d]=u[c][d];if("ticks"in e){n=e.ticks,s=!0,this.autoTicks=!1;for(var c=0;c<3;++c)this.tickSpacing[c]=0}else r("tickSpacing")&&(this.autoTicks=!0,l=!0);if(this._firstInit&&("ticks"in e||"tickSpacing"in e||(this.autoTicks=!0),l=!0,s=!0,this._firstInit=!1),l&&this.autoTicks&&(n=HQ.create(this.bounds,this.tickSpacing),s=!0),s){for(var c=0;c<3;++c)n[c].sort(function(e,t){return e.x-t.x});HQ.equal(n,this.ticks)?s=!1:this.ticks=n}i("tickEnable"),a("tickFont")&&(s=!0),r("tickSize"),r("tickAngle"),r("tickPad"),o("tickColor");var f=a("labels");a("labelFont")&&(f=!0),i("labelEnable"),r("labelSize"),r("labelPad"),o("labelColor"),i("lineEnable"),i("lineMirror"),r("lineWidth"),o("lineColor"),i("lineTickEnable"),i("lineTickMirror"),r("lineTickLength"),r("lineTickWidth"),o("lineTickColor"),i("gridEnable"),r("gridWidth"),o("gridColor"),i("zeroEnable"),o("zeroLineColor"),r("zeroLineWidth"),i("backgroundEnable"),o("backgroundColor"),this._text?this._text&&(f||s)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=VQ(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&s&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=zQ(this.gl,this.bounds,this.ticks))};var YQ=[new s_,new s_,new s_],XQ=[0,0,0],ZQ={model:qQ,view:qQ,projection:qQ};GQ.isOpaque=function(){return!0},GQ.isTransparent=function(){return!1},GQ.drawTransparent=function(e){};var JQ=[0,0,0],KQ=[0,0,0],QQ=[0,0,0];GQ.draw=function(e){e=e||ZQ;for(var t=this.gl,n=e.model||qQ,r=e.view||qQ,i=e.projection||qQ,a=this.bounds,o=TQ(n,r,i,a),s=o.cubeEdges,l=o.axis,u=r[12],c=r[13],d=r[14],f=r[15],h=this.pixelRatio*(i[3]*u+i[7]*c+i[11]*d+i[15]*f)/t.drawingBufferHeight,p=0;p<3;++p)this.lastCubeProps.cubeEdges[p]=s[p],this.lastCubeProps.axis[p]=l[p];for(var m=YQ,p=0;p<3;++p)l_(YQ[p],p,this.bounds,s,l);for(var t=this.gl,g=XQ,p=0;p<3;++p)this.backgroundEnable[p]?g[p]=l[p]:g[p]=0;this._background.draw(n,r,i,a,g,this.backgroundColor),this._lines.bind(n,r,i,this);for(var p=0;p<3;++p){var y=[0,0,0];l[p]>0?y[p]=a[1][p]:y[p]=a[0][p];for(var v=0;v<2;++v){var _=(p+1+v)%3,b=(p+1+(1^v))%3;this.gridEnable[_]&&this._lines.drawGrid(_,b,this.bounds,y,this.gridColor[_],this.gridWidth[_]*this.pixelRatio)}for(var v=0;v<2;++v){var _=(p+1+v)%3,b=(p+1+(1^v))%3;this.zeroEnable[b]&&a[0][b]<=0&&a[1][b]>=0&&this._lines.drawZero(_,b,this.bounds,y,this.zeroLineColor[b],this.zeroLineWidth[b]*this.pixelRatio)}}for(var p=0;p<3;++p){this.lineEnable[p]&&this._lines.drawAxisLine(p,this.bounds,m[p].primalOffset,this.lineColor[p],this.lineWidth[p]*this.pixelRatio),this.lineMirror[p]&&this._lines.drawAxisLine(p,this.bounds,m[p].mirrorOffset,this.lineColor[p],this.lineWidth[p]*this.pixelRatio);for(var x=a_(JQ,m[p].primalMinor),w=a_(KQ,m[p].mirrorMinor),k=this.lineTickLength,v=0;v<3;++v){var T=h/n[5*v];x[v]*=k[v]*T,w[v]*=k[v]*T}this.lineTickEnable[p]&&this._lines.drawAxisTicks(p,m[p].primalOffset,x,this.lineTickColor[p],this.lineTickWidth[p]*this.pixelRatio),this.lineTickMirror[p]&&this._lines.drawAxisTicks(p,m[p].mirrorOffset,w,this.lineTickColor[p],this.lineTickWidth[p]*this.pixelRatio)}this._lines.unbind(),this._text.bind(n,r,i,this.pixelRatio);for(var p=0;p<3;++p){for(var M=m[p].primalMinor,A=a_(QQ,m[p].primalOffset),v=0;v<3;++v)this.lineTickEnable[p]&&(A[v]+=h*M[v]*Math.max(this.lineTickLength[v],0)/n[5*v]);if(this.tickEnable[p]){for(var v=0;v<3;++v)A[v]+=h*M[v]*this.tickPad[v]/n[5*v];this._text.drawTicks(p,this.tickSize[p],this.tickAngle[p],A,this.tickColor[p])}if(this.labelEnable[p]){for(var v=0;v<3;++v)A[v]+=h*M[v]*this.labelPad[v]/n[5*v];A[p]+=.5*(a[0][p]+a[1][p]),this._text.drawLabel(p,this.labelSize[p],this.labelAngle[p],A,this.labelColor[p])}}this._text.unbind()},GQ.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};var $Q=c_,e$=d_,t$=p_,n$=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),r$=new Float32Array(16),i$=[0,0,0,1],a$=[0,0,0,1],o$=[new f_(1/0,-1/0,1/0),new f_(1/0,-1/0,1/0),new f_(1/0,-1/0,1/0)],s$=[0,0,0],l$=m_,u$=OW(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),c$=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]),d$=function(e){return Oq(e,u$,c$,null,[{name:"position",type:"vec2"}])},f$=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),h$=OW(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]),p$=function(e){return Oq(e,f$,h$,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])},m$=y_,g$=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y$=g_.prototype,v$=[0,0,0],_$=[0,0,0],b$=[0,0];y$.isTransparent=function(){return!1},y$.drawTransparent=function(e){},y$.draw=function(e){var t=this.gl,n=this.vao,r=this.shader;n.bind(),r.bind();var i,a=e.model||g$,o=e.view||g$,s=e.projection||g$;this.axes&&(i=this.axes.lastCubeProps.axis);for(var l=v$,u=_$,c=0;c<3;++c)i&&i[c]<0?(l[c]=this.bounds[0][c],u[c]=this.bounds[1][c]):(l[c]=this.bounds[1][c],u[c]=this.bounds[0][c]);b$[0]=t.drawingBufferWidth,b$[1]=t.drawingBufferHeight,r.uniforms.model=a,r.uniforms.view=o,r.uniforms.projection=s,r.uniforms.coordinates=[this.position,l,u],r.uniforms.colors=this.colors,r.uniforms.screenShape=b$;for(var c=0;c<3;++c)r.uniforms.lineWidth=this.lineWidth[c]*this.pixelRatio,this.enabled[c]&&(n.draw(t.TRIANGLES,6,6*c),this.drawSides[c]&&n.draw(t.TRIANGLES,12,18+12*c));n.unbind()},y$.update=function(e){e&&("bounds"in e&&(this.bounds=e.bounds),"position"in e&&(this.position=e.position),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"colors"in e&&(this.colors=e.colors),"enabled"in e&&(this.enabled=e.enabled),"drawSides"in e&&(this.drawSides=e.drawSides))},y$.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};var x$=v_,w$=k_,k$=x$(),T$=T_,M$=["xaxis","yaxis","zaxis"];M_.prototype.merge=function(e){for(var t=this,n=0;n<3;++n){var r=e[M$[n]];r.visible?(t.labels[n]=xZ(r.title),"titlefont"in r&&(r.titlefont.color&&(t.labelColor[n]=UZ(r.titlefont.color)),r.titlefont.family&&(t.labelFont[n]=r.titlefont.family),r.titlefont.size&&(t.labelSize[n]=r.titlefont.size)),"showline"in r&&(t.lineEnable[n]=r.showline),"linecolor"in r&&(t.lineColor[n]=UZ(r.linecolor)),"linewidth"in r&&(t.lineWidth[n]=r.linewidth),"showgrid"in r&&(t.gridEnable[n]=r.showgrid),"gridcolor"in r&&(t.gridColor[n]=UZ(r.gridcolor)),"gridwidth"in r&&(t.gridWidth[n]=r.gridwidth),"log"===r.type?t.zeroEnable[n]=!1:"zeroline"in r&&(t.zeroEnable[n]=r.zeroline),"zerolinecolor"in r&&(t.zeroLineColor[n]=UZ(r.zerolinecolor)),"zerolinewidth"in r&&(t.zeroLineWidth[n]=r.zerolinewidth),"ticks"in r&&r.ticks?t.lineTickEnable[n]=!0:t.lineTickEnable[n]=!1,"ticklen"in r&&(t.lineTickLength[n]=t._defaultLineTickLength[n]=r.ticklen),"tickcolor"in r&&(t.lineTickColor[n]=UZ(r.tickcolor)),"tickwidth"in r&&(t.lineTickWidth[n]=r.tickwidth),"tickangle"in r&&(t.tickAngle[n]="auto"===r.tickangle?0:Math.PI*-r.tickangle/180),"showticklabels"in r&&(t.tickEnable[n]=r.showticklabels),"tickfont"in r&&(r.tickfont.color&&(t.tickColor[n]=UZ(r.tickfont.color)),r.tickfont.family&&(t.tickFont[n]=r.tickfont.family),r.tickfont.size&&(t.tickSize[n]=r.tickfont.size)),"mirror"in r?-1!==["ticks","all","allticks"].indexOf(r.mirror)?(t.lineTickMirror[n]=!0,t.lineMirror[n]=!0):!0===r.mirror?(t.lineTickMirror[n]=!1,t.lineMirror[n]=!0):(t.lineTickMirror[n]=!1,t.lineMirror[n]=!1):t.lineMirror[n]=!1,"showbackground"in r&&!1!==r.showbackground?(t.backgroundEnable[n]=!0,t.backgroundColor[n]=UZ(r.backgroundcolor)):t.backgroundEnable[n]=!1):(t.tickEnable[n]=!1,t.labelEnable[n]=!1,t.lineEnable[n]=!1,t.lineTickEnable[n]=!1,t.gridEnable[n]=!1,t.zeroEnable[n]=!1,t.backgroundEnable[n]=!1)}};var A$=A_,C$=["xaxis","yaxis","zaxis"];C_.prototype.merge=function(e){for(var t=0;t<3;++t){var n=e[C$[t]];n.visible?(this.enabled[t]=n.showspikes,this.colors[t]=UZ(n.spikecolor),this.drawSides[t]=n.spikesides,this.lineWidth[t]=n.spikethickness):(this.enabled[t]=!1,this.drawSides[t]=!1)}};var S$,E$,P$=S_,I$=P_,L$=["xaxis","yaxis","zaxis"],O$=[0,0,0],z$=O_.prototype;z$.recoverContext=function(){function e(){return n.isContextLost()?void requestAnimationFrame(e):L_(t,t.fullLayout,r,n)?void t.plot.apply(t,t.plotArgs):void uE.error("Catastrophic and unrecoverable WebGL error. Context lost.")}var t=this,n=this.glplot.gl,r=this.glplot.canvas;this.glplot.dispose(),requestAnimationFrame(e)};var R$=["xaxis","yaxis","zaxis"];z$.plot=function(e,t,n){if(this.plotArgs=[e,t,n],!this.glplot.contextLost){var r,i,a,o,s,l,u=t[this.id],c=n[this.id];u.bgcolor?this.glplot.clearColor=UZ(u.bgcolor):this.glplot.clearColor=[0,0,0,0],this.glplot.snapToData=!0,this.fullLayout=t,this.fullSceneLayout=u,this.glplotLayout=u,this.axesOptions.merge(u),this.spikeOptions.merge(u),this.setCamera(u.camera),this.updateFx(u.dragmode,u.hovermode),this.glplot.update({}),this.setConvert(s),e?Array.isArray(e)||(e=[e]):e=[];var d=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(a=0;a<e.length;++a)r=e[a],!0===r.visible&&R_(this,r,d);var f=[1,1,1];for(o=0;o<3;++o)d[0][o]>d[1][o]?f[o]=1:d[1][o]===d[0][o]?f[o]=1:f[o]=1/(d[1][o]-d[0][o]);for(this.dataScale=f,this.convertAnnotations(this),a=0;a<e.length;++a)r=e[a],!0===r.visible&&(i=this.traces[r.uid],i?i.update(r):(i=r._module.plot(this,r),this.traces[r.uid]=i),i.name=r.name);var h=Object.keys(this.traces);e:for(a=0;a<h.length;++a){for(o=0;o<e.length;++o)if(e[o].uid===h[a]&&!0===e[o].visible)continue e;i=this.traces[h[a]],i.dispose(),delete this.traces[h[a]]}this.glplot.objects.sort(function(e,t){return e._trace.data.index-t._trace.data.index});var p=[[0,0,0],[0,0,0]],m=[],g={};for(a=0;a<3;++a){if(s=u[R$[a]],l=s.type,l in g?(g[l].acc*=f[a],g[l].count+=1):g[l]={acc:f[a],count:1},s.autorange){p[0][a]=1/0,p[1][a]=-1/0;var y=this.glplot.objects,v=this.fullSceneLayout.annotations||[],_=s._name.charAt(0);for(o=0;o<y.length;o++){var b=y[o].bounds;p[0][a]=Math.min(p[0][a],b[0][a]/f[a]),p[1][a]=Math.max(p[1][a],b[1][a]/f[a])}for(o=0;o<v.length;o++){var x=v[o];if(x.visible){var w=s.r2l(x[_]);p[0][a]=Math.min(p[0][a],w),p[1][a]=Math.max(p[1][a],w)}}if("rangemode"in s&&"tozero"===s.rangemode&&(p[0][a]=Math.min(p[0][a],0),p[1][a]=Math.max(p[1][a],0)),p[0][a]>p[1][a])p[0][a]=-1,p[1][a]=1;else{var k=p[1][a]-p[0][a];p[0][a]-=k/32,p[1][a]+=k/32}}else{var T=s.range;p[0][a]=s.r2l(T[0]),p[1][a]=s.r2l(T[1])}p[0][a]===p[1][a]&&(p[0][a]-=1,p[1][a]+=1),m[a]=p[1][a]-p[0][a],this.glplot.bounds[0][a]=p[0][a]*f[a],this.glplot.bounds[1][a]=p[1][a]*f[a]}var M=[1,1,1];for(a=0;a<3;++a){s=u[R$[a]],l=s.type;var A=g[l];M[a]=Math.pow(A.acc,1/A.count)/f[a]}var C;if("auto"===u.aspectmode)C=Math.max.apply(null,M)/Math.min.apply(null,M)<=4?M:[1,1,1];else if("cube"===u.aspectmode)C=[1,1,1];else if("data"===u.aspectmode)C=M;else{if("manual"!==u.aspectmode)throw new Error("scene.js aspectRatio was not one of the enumerated types");var S=u.aspectratio;C=[S.x,S.y,S.z]}u.aspectratio.x=c.aspectratio.x=C[0],u.aspectratio.y=c.aspectratio.y=C[1],u.aspectratio.z=c.aspectratio.z=C[2],this.glplot.aspect=C;var E=u.domain||null,P=t._size||null;if(E&&P){var I=this.container.style;I.position="absolute",I.left=P.l+E.x[0]*P.w+"px",I.top=P.t+(1-E.y[1])*P.h+"px",I.width=P.w*(E.x[1]-E.x[0])+"px",I.height=P.h*(E.y[1]-E.y[0])+"px"}this.glplot.redraw()}},z$.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=this.glplot.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},z$.getCamera=function(){return this.glplot.camera.view.recalcMatrix(this.camera.view.lastT()),N_(this.glplot.camera)},z$.setCamera=function(e){this.glplot.camera.lookAt.apply(this,D_(e))},z$.saveCamera=function(e){var t=this.getCamera(),n=uE.nestedProperty(e,this.id+".camera"),r=n.get(),i=!1;if(void 0===r)i=!0;else for(var a=0;a<3;a++)for(var o=0;o<3;o++)if(!function(e,t,n,r){var i=["up","center","eye"],a=["x","y","z"];return t[i[n]]&&e[i[n]][a[r]]===t[i[n]][a[r]]}(t,r,a,o)){i=!0;break}return i&&n.set(t),i},z$.updateFx=function(e,t){var n=this.camera;n&&("orbit"===e?(n.mode="orbit",n.keyBindingMode="rotate"):"turntable"===e?(n.up=[0,0,1],n.mode="turntable",n.keyBindingMode="rotate"):n.keyBindingMode=e),this.fullSceneLayout.hovermode=t},z$.toImage=function(e){e||(e="png"),this.staticMode&&this.container.appendChild(S$),this.glplot.redraw();var t=this.glplot.gl,n=t.drawingBufferWidth,r=t.drawingBufferHeight;t.bindFramebuffer(t.FRAMEBUFFER,null);var i=new Uint8Array(n*r*4);t.readPixels(0,0,n,r,t.RGBA,t.UNSIGNED_BYTE,i);for(var a=0,o=r-1;a<o;++a,--o)for(var s=0;s<n;++s)for(var l=0;l<4;++l){var u=i[4*(n*a+s)+l];i[4*(n*a+s)+l]=i[4*(n*o+s)+l],i[4*(n*o+s)+l]=u}var c=document.createElement("canvas");c.width=n,c.height=r;var d=c.getContext("2d"),f=d.createImageData(n,r);f.data.set(i),d.putImageData(f,0,0);var h;switch(e){case"jpeg":h=c.toDataURL("image/jpeg");break;case"webp":h=c.toDataURL("image/webp");break;default:h=c.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(S$),h},z$.setConvert=function(){for(var e=0;e<3;e++){var t=this.fullSceneLayout[R$[e]];PI.setConvert(t,this.fullLayout),t.setScale=uE.noop}};var D$=O_,N$={},F$=TE.overrideAll,j$=_L.getSubplotData;N$.name="gl3d",N$.attr="scene",N$.idRoot="scene",N$.idRegex=N$.attrRegex=uE.counterRegex("scene"),N$.attributes=GJ,N$.layoutAttributes=nK,N$.baseLayoutAttrOverrides=F$({hoverlabel:bO.hoverlabel},"plot","nested"),N$.supplyLayoutDefaults=rK,N$.plot=function(e){for(var t=e._fullLayout,n=e._fullData,r=t._subplots.gl3d,i=0;i<r.length;i++){var a=r[i],o=j$(n,"gl3d",a),s=t[a],l=s._scene;l||(l=new D$({id:a,graphDiv:e,container:e.querySelector(".gl-container"),staticPlot:e._context.staticPlot,plotGlPixelRatio:e._context.plotGlPixelRatio},t),s._scene=l),l.cameraInitial||(l.cameraInitial=uE.extendDeep({},s.camera)),l.plot(o,t,e.layout)}},N$.clean=function(e,t,n,r){for(var i=r._subplots.gl3d||[],a=0;a<i.length;a++){var o=i[a];!t[o]&&r[o]._scene&&(r[o]._scene.destroy(),r._infolayer&&r._infolayer.selectAll(".annotation-"+o).remove())}},N$.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.gl3d,r=t._size,i=0;i<n.length;i++){var a=t[n[i]],o=a.domain,s=a._scene,l=s.toImage("png");t._glimages.append("svg:image").attr({xmlns:aP.svg,"xlink:href":l,x:r.l+r.w*o.x[0],y:r.t+r.h*(1-o.y[1]),width:r.w*(o.x[1]-o.x[0]),height:r.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},N$.cleanId=function(e){if(e.match(/^scene[0-9]*$/)){var t=e.substr(5);return"1"===t&&(t=""),"scene"+t}},N$.updateFx=function(e){for(var t=e._subplots.gl3d,n=0;n<t.length;n++){e[t[n]]._scene.updateFx(e.dragmode,e.hovermode)}};var B$={},U$=WC.extendFlat,V$=TE.overrideAll,H$=B$=V$({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},surfacecolor:{valType:"data_array"},cauto:DE.zauto,cmin:DE.zmin,cmax:DE.zmax,colorscale:DE.colorscale,autocolorscale:U$({},DE.autocolorscale,{dflt:!1}),reversescale:DE.reversescale,showscale:DE.showscale,colorbar:RE,contours:{x:j_("x"),y:j_("y"),z:j_("z")},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},_deprecated:{zauto:U$({},DE.zauto,{}),zmin:U$({},DE.zmin,{}),zmax:U$({},DE.zmax,{})},hoverinfo:U$({},$C.hoverinfo)},"calc","nested");H$.x.editType=H$.y.editType=H$.z.editType="calc+clearAxisTypes";var W$=WC.extendFlat,q$=W$(FE(0,"calc",!1),{x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},opacity:B$.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:W$({},B$.contours.x.show,{}),color:B$.contours.x.color,width:B$.contours.x.width,editType:"calc"},showscale:DE.showscale,colorbar:RE,lightposition:{x:W$({},B$.lightposition.x,{dflt:1e5}),y:W$({},B$.lightposition.y,{dflt:1e5}),z:W$({},B$.lightposition.z,{dflt:0}),editType:"calc"},lighting:W$({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},B$.lighting),hoverinfo:W$({},$C.hoverinfo,{editType:"calc"})}),G$=function(e,t){t.intensity&&WE(t,t.intensity,"","c")},Y$=function(e,t){var n=t[0].trace,r="cb"+n.uid,i=n.cmin,a=n.cmax,o=n.intensity||[];if(SC(i)||(i=uE.aggNums(Math.min,null,o)),SC(a)||(a=uE.aggNums(Math.max,null,o)),e._fullLayout._infolayer.selectAll("."+r).remove(),!n.showscale)return void lI.autoMargin(e,r);var s=t[0].t.cb=GO(e,r),l=nP.makeColorScaleFunc(nP.extractScale(n.colorscale,i,a),{noNumericCheck:!0});s.fillcolor(l).filllevels({start:i,end:a,size:(a-i)/254}).options(n.colorbar)()},X$=B_,Z$={},J$=6,K$=[function(){return[0]},function(e){return[e[0][0]]}];!function(){for(;K$.length<J$;)K$.push(G_(K$.length));for(var e=[],t=["function robustDeterminant(m){switch(m.length){"],n=0;n<J$;++n)e.push("det"+n),t.push("case ",n,":return det",n,"(m);");t.push("}var det=CACHE[m.length];if(!det)det=CACHE[m.length]=gen(m.length);return det(m);}return robustDeterminant"),e.push("CACHE","gen",t.join(""));var r=Function.apply(void 0,e);Z$=r.apply(void 0,K$.concat([K$,G_]));for(var n=0;n<K$.length;++n)Z$[n]=K$[n]}();var Q$={},$$=6,e0=[X_,Z_];!function(){for(;e0.length<$$;)e0.push(Y_(e0.length));for(var e=[],t=["function dispatchLinearSolve(A,b){switch(A.length){"],n=0;n<$$;++n)e.push("s"+n),t.push("case ",n,":return s",n,"(A,b);");t.push("}var s=CACHE[A.length];if(!s)s=CACHE[A.length]=g(A.length);return s(A,b)}return dispatchLinearSolve"),e.push("CACHE","g",t.join(""));var r=Function.apply(void 0,e);Q$=r.apply(void 0,e0.concat([e0,Y_]));for(var n=0;n<$$;++n)Q$[n]=e0[n]}(),Q_.barycenetric=K_;var t0=Q_,n0=$_,r0=ab,i0=hX.compareCells;eb.prototype.flip=function(){var e=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=e;var t=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=t};var a0=[],o0=ib.prototype;o0.handleBoundaryDegeneracy=function(e,t){var n=this.dimension,r=this.vertices.length-1,i=this.tuple,a=this.vertices,o=[e];for(e.lastVisited=-r;o.length>0;){e=o.pop();for(var s=(e.vertices,e.adjacent),l=0;l<=n;++l){var u=s[l];if(u.boundary&&!(u.lastVisited<=-r)){for(var c=u.vertices,d=0;d<=n;++d){var f=c[d];i[d]=f<0?t:a[f]}var h=this.orient();if(h>0)return u;u.lastVisited=-r,0===h&&o.push(u)}}}return null},o0.walk=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,a=this.tuple,o=t?this.interior.length*Math.random()|0:this.interior.length-1,s=this.interior[o];e:for(;!s.boundary;){for(var l=s.vertices,u=s.adjacent,c=0;c<=r;++c)a[c]=i[l[c]];s.lastVisited=n;for(var c=0;c<=r;++c){var d=u[c];if(!(d.lastVisited>=n)){var f=a[c];a[c]=e;var h=this.orient();if(a[c]=f,h<0){s=d;continue e}d.boundary?d.lastVisited=-n:d.lastVisited=n}}return}return s},o0.addPeaks=function(e,t){var n=this.vertices.length-1,r=this.dimension,i=this.vertices,a=this.tuple,o=this.interior,s=this.simplices,l=[t];t.lastVisited=n,t.vertices[t.vertices.indexOf(-1)]=n,t.boundary=!1,o.push(t);for(var u=[];l.length>0;){var t=l.pop(),c=t.vertices,d=t.adjacent,f=c.indexOf(n);if(!(f<0))for(var h=0;h<=r;++h)if(h!==f){var p=d[h];if(p.boundary&&!(p.lastVisited>=n)){var m=p.vertices;if(p.lastVisited!==-n){for(var g=0,y=0;y<=r;++y)m[y]<0?(g=y,a[y]=e):a[y]=i[m[y]];var v=this.orient();if(v>0){m[g]=n,p.boundary=!1,o.push(p),l.push(p),p.lastVisited=n;continue}p.lastVisited=-n}var _=p.adjacent,b=c.slice(),x=d.slice(),w=new eb(b,x,!0);s.push(w);var k=_.indexOf(t);if(!(k<0)){_[k]=w,x[f]=p,b[h]=-1,x[h]=t,d[h]=w,w.flip();for(var y=0;y<=r;++y){var T=b[y];if(!(T<0||T===n)){for(var M=new Array(r-1),A=0,C=0;C<=r;++C){var S=b[C];S<0||C===y||(M[A++]=S)}u.push(new tb(M,w,y))}}}}}}u.sort(nb);for(var h=0;h+1<u.length;h+=2){var E=u[h],P=u[h+1],I=E.index,L=P.index;I<0||L<0||(E.cell.adjacent[E.index]=P.cell,P.cell.adjacent[P.index]=E.cell)}},o0.insert=function(e,t){var n=this.vertices;n.push(e);var r=this.walk(e,t);if(r){for(var i=this.dimension,a=this.tuple,o=0;o<=i;++o){var s=r.vertices[o];a[o]=s<0?e:n[s]}var l=this.orient(a);l<0||(0!==l||(r=this.handleBoundaryDegeneracy(r,e)))&&this.addPeaks(e,r)}},o0.boundary=function(){for(var e=this.dimension,t=[],n=this.simplices,r=n.length,i=0;i<r;++i){var a=n[i];if(a.boundary){for(var o=new Array(e),s=a.vertices,l=0,u=0,c=0;c<=e;++c)s[c]>=0?o[l++]=s[c]:u=1&c;if(u===(1&e)){var d=o[0];o[0]=o[1],o[1]=d}t.push(o)}}return t};var s0=ub,l0=cb,u0=db,c0=fb,d0=pb,f0=Math.min,h0=mb,p0=gb,m0=yb,g0=vb,y0=_b,v0=bb,_0=eG[3],b0=xb,x0=kb,w0=Ab,k0=Cb,T0={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],cool:[{index:0,rgb:[0,255,255]},{index:1,rgb:[255,0,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]},M0=Sb,A0=Eb,C0=zb,S0=new Float64Array(4),E0=new Float64Array(4),P0=new Float64Array(4),I0=Rb,L0=Bb,O0={},z0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec4 m_position  = model * vec4(position, 1.0);\n  vec4 t_position  = view * m_position;\n  gl_Position      = projection * t_position;\n  f_color          = color;\n  f_normal         = normal;\n  f_data           = position;\n  f_eyeDirection   = eyePosition   - position;\n  f_lightDirection = lightPosition - position;\n  f_uv             = uv;\n}"]),R0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular\n            , opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n  \n  if(!gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = cookTorranceSpecular(L, V, N, roughness, fresnel);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}"]),D0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),N0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(f_data, clipBounds[0])) || \n     any(greaterThan(f_data, clipBounds[1]))) {\n    discard;\n  }\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),F0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),j0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5,0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),B0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),U0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(f_position, clipBounds[0])) || \n     any(greaterThan(f_position, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),V0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || \n     any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),H0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),W0=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor,1);\n}\n"]);O0.meshShader={vertex:z0,fragment:R0,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},O0.wireShader={vertex:D0,fragment:N0,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},O0.pointShader={vertex:F0,fragment:j0,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},O0.pickShader={vertex:B0,fragment:U0,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},O0.pointPickShader={vertex:V0,fragment:U0,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},O0.contourShader={vertex:H0,fragment:W0,attributes:[{name:"position",type:"vec3"}]};var q0={};q0.vertexNormals=function(e,t,n){for(var r=t.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o)i[o]=[0,0,0];for(var o=0;o<e.length;++o)for(var s=e[o],l=0,u=s[s.length-1],c=s[0],d=0;d<s.length;++d){l=u,u=c,c=s[(d+1)%s.length];for(var f=t[l],h=t[u],p=t[c],m=new Array(3),g=0,y=new Array(3),v=0,_=0;_<3;++_)m[_]=f[_]-h[_],g+=m[_]*m[_],y[_]=p[_]-h[_],v+=y[_]*y[_];if(g*v>a)for(var b=i[u],x=1/Math.sqrt(g*v),_=0;_<3;++_){var w=(_+1)%3,k=(_+2)%3;b[_]+=x*(y[w]*m[k]-y[k]*m[w])}}for(var o=0;o<r;++o){for(var b=i[o],T=0,_=0;_<3;++_)T+=b[_]*b[_];if(T>a)for(var x=1/Math.sqrt(T),_=0;_<3;++_)b[_]*=x;else for(var _=0;_<3;++_)b[_]=0}return i},q0.faceNormals=function(e,t,n){for(var r=e.length,i=new Array(r),a=void 0===n?1e-6:n,o=0;o<r;++o){for(var s=e[o],l=new Array(3),u=0;u<3;++u)l[u]=t[s[u]];for(var c=new Array(3),d=new Array(3),u=0;u<3;++u)c[u]=l[1][u]-l[0][u],d[u]=l[2][u]-l[0][u];for(var f=new Array(3),h=0,u=0;u<3;++u){var p=(u+1)%3,m=(u+2)%3;f[u]=c[p]*d[m]-c[m]*d[p],h+=f[u]*f[u]}h=h>a?1/Math.sqrt(h):0;for(var u=0;u<3;++u)f[u]*=h;i[o]=f}return i};var G0=32,Y0=qb,X0={},Z0=Gb,J0=Zb,K0=Kb,Q0={},$0=ix,e1=O0.meshShader,t1=O0.wireShader,n1=O0.pointShader,r1=O0.pickShader,i1=O0.pointPickShader,a1=O0.contourShader,o1=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],s1=ax.prototype;s1.isOpaque=function(){return this.opacity>=1},s1.isTransparent=function(){return this.opacity<1},s1.pickSlots=1,s1.setPickBase=function(e){this.pickId=e},s1.highlight=function(e){if(!e||!this.contourEnable)return void(this.contourCount=0);for(var t=$0(this.cells,this.intensity,e.intensity),n=t.cells,r=t.vertexIds,i=t.vertexWeights,a=n.length,o=EW.mallocFloat32(6*a),s=0,l=0;l<a;++l)for(var u=n[l],c=0;c<2;++c){var d=u[0];2===u.length&&(d=u[c]);for(var f=r[d][0],h=r[d][1],p=i[d],m=1-p,g=this.positions[f],y=this.positions[h],v=0;v<3;++v)o[s++]=p*g[v]+m*y[v]}this.contourCount=s/3|0,this.contourPositions.update(o.subarray(0,s)),EW.free(o)},s1.update=function(e){e=e||{};var t=this.gl;this.dirty=!0,"contourEnable"in e&&(this.contourEnable=e.contourEnable),"contourColor"in e&&(this.contourColor=e.contourColor),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"lightPosition"in e&&(this.lightPosition=e.lightPosition),"opacity"in e&&(this.opacity=e.opacity),"ambient"in e&&(this.ambientLight=e.ambient),"diffuse"in e&&(this.diffuseLight=e.diffuse),"specular"in e&&(this.specularLight=e.specular),"roughness"in e&&(this.roughness=e.roughness),"fresnel"in e&&(this.fresnel=e.fresnel),e.texture?(this.texture.dispose(),this.texture=YX(t,e.texture)):e.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=t.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=t.LINEAR,this.texture.setPixels(ox(e.colormap)),this.texture.generateMipmap());var n=e.cells,r=e.positions;if(r&&n){var i=[],a=[],o=[],s=[],l=[],u=[],c=[],d=[],f=[],h=[],p=[],m=[],g=[],y=[];this.cells=n,this.positions=r;var v=e.vertexNormals,_=e.cellNormals,b=void 0===e.vertexNormalsEpsilon?1e-6:e.vertexNormalsEpsilon,x=void 0===e.faceNormalsEpsilon?1e-6:e.faceNormalsEpsilon;e.useFacetNormals&&!_&&(_=q0.faceNormals(n,r,x)),_||v||(v=q0.vertexNormals(n,r,b));var w=e.vertexColors,k=e.cellColors,T=e.meshColor||[1,1,1,1],M=e.vertexUVs,A=e.vertexIntensity,C=e.cellUVs,S=e.cellIntensity,E=1/0,P=-1/0;if(!M&&!C)if(A)if(e.vertexIntensityBounds)E=+e.vertexIntensityBounds[0],P=+e.vertexIntensityBounds[1];else for(var I=0;I<A.length;++I){var L=A[I];E=Math.min(E,L),P=Math.max(P,L)}else if(S)for(var I=0;I<S.length;++I){var L=S[I];E=Math.min(E,L),P=Math.max(P,L)}else for(var I=0;I<r.length;++I){var L=r[I][2];E=Math.min(E,L),P=Math.max(P,L)}this.intensity=A||(S?sx(n,r.length,S):lx(r));var O=e.pointSizes,z=e.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var I=0;I<r.length;++I)for(var R=r[I],D=0;D<3;++D)!isNaN(R[D])&&isFinite(R[D])&&(this.bounds[0][D]=Math.min(this.bounds[0][D],R[D]),this.bounds[1][D]=Math.max(this.bounds[1][D],R[D]));var N=0,F=0,j=0;e:for(var I=0;I<n.length;++I){var B=n[I];switch(B.length){case 1:for(var U=B[0],R=r[U],D=0;D<3;++D)if(isNaN(R[D])||!isFinite(R[D]))continue e;h.push(R[0],R[1],R[2]);var V;V=w?w[U]:k?k[I]:T,3===V.length?p.push(V[0],V[1],V[2],1):p.push(V[0],V[1],V[2],V[3]);var H;H=M?M[U]:A?[(A[U]-E)/(P-E),0]:C?C[I]:S?[(S[I]-E)/(P-E),0]:[(R[2]-E)/(P-E),0],m.push(H[0],H[1]),O?g.push(O[U]):g.push(z),y.push(I),j+=1;break;case 2:for(var D=0;D<2;++D)for(var U=B[D],R=r[U],W=0;W<3;++W)if(isNaN(R[W])||!isFinite(R[W]))continue e;for(var D=0;D<2;++D){var U=B[D],R=r[U];u.push(R[0],R[1],R[2]);var V;V=w?w[U]:k?k[I]:T,3===V.length?c.push(V[0],V[1],V[2],1):c.push(V[0],V[1],V[2],V[3]);var H;H=M?M[U]:A?[(A[U]-E)/(P-E),0]:C?C[I]:S?[(S[I]-E)/(P-E),0]:[(R[2]-E)/(P-E),0],d.push(H[0],H[1]),f.push(I)}F+=1;break;case 3:for(var D=0;D<3;++D)for(var U=B[D],R=r[U],W=0;W<3;++W)if(isNaN(R[W])||!isFinite(R[W]))continue e;for(var D=0;D<3;++D){var U=B[D],R=r[U];i.push(R[0],R[1],R[2]);var V;V=w?w[U]:k?k[I]:T,3===V.length?a.push(V[0],V[1],V[2],1):a.push(V[0],V[1],V[2],V[3]);var H;H=M?M[U]:A?[(A[U]-E)/(P-E),0]:C?C[I]:S?[(S[I]-E)/(P-E),0]:[(R[2]-E)/(P-E),0],s.push(H[0],H[1]);var q;q=v?v[U]:_[I],o.push(q[0],q[1],q[2]),l.push(I)}N+=1}}this.pointCount=j,this.edgeCount=F,this.triangleCount=N,this.pointPositions.update(h),this.pointColors.update(p),this.pointUVs.update(m),this.pointSizes.update(g),this.pointIds.update(new Uint32Array(y)),this.edgePositions.update(u),this.edgeColors.update(c),this.edgeUVs.update(d),this.edgeIds.update(new Uint32Array(f)),this.trianglePositions.update(i),this.triangleColors.update(a),this.triangleUVs.update(s),this.triangleNormals.update(o),this.triangleIds.update(new Uint32Array(l))}},s1.drawTransparent=s1.draw=function(e){e=e||{};for(var t=this.gl,n=e.model||o1,r=e.view||o1,i=e.projection||o1,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);var s={model:n,view:r,projection:i,clipBounds:a,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,contourColor:this.contourColor,texture:0};this.texture.bind(0);var l=new Array(16);PK(l,s.view,s.model),PK(l,s.projection,l),iK(l,l);for(var o=0;o<3;++o)s.eyePosition[o]=l[12+o]/l[15];for(var u=l[15],o=0;o<3;++o)u+=this.lightPosition[o]*l[4*o+3];for(var o=0;o<3;++o){for(var c=l[12+o],d=0;d<3;++d)c+=l[4*d+o]*this.lightPosition[d];s.lightPosition[o]=c/u}if(this.triangleCount>0){var f=this.triShader;f.bind(),f.uniforms=s,this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var f=this.lineShader;f.bind(),f.uniforms=s,this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()}if(this.pointCount>0){var f=this.pointShader;f.bind(),f.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var f=this.contourShader;f.bind(),f.uniforms=s,this.contourVAO.bind(),t.drawArrays(t.LINES,0,this.contourCount),this.contourVAO.unbind()}},s1.drawPick=function(e){e=e||{};for(var t=this.gl,n=e.model||o1,r=e.view||o1,i=e.projection||o1,a=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],o=0;o<3;++o)a[0][o]=Math.max(a[0][o],this.clipBounds[0][o]),a[1][o]=Math.min(a[1][o],this.clipBounds[1][o]);this._model=[].slice.call(n),this._view=[].slice.call(r),this._projection=[].slice.call(i),this._resolution=[t.drawingBufferWidth,t.drawingBufferHeight];var s={model:n,view:r,projection:i,clipBounds:a,pickId:this.pickId/255},l=this.pickShader;if(l.bind(),l.uniforms=s,this.triangleCount>0&&(this.triangleVAO.bind(),t.drawArrays(t.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),t.lineWidth(this.lineWidth),t.drawArrays(t.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0){var l=this.pointPickShader;l.bind(),l.uniforms=s,this.pointVAO.bind(),t.drawArrays(t.POINTS,0,this.pointCount),this.pointVAO.unbind()}},s1.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;for(var t=e.value[0]+256*e.value[1]+65536*e.value[2],n=this.cells[t],r=this.positions,i=new Array(n.length),a=0;a<n.length;++a)i[a]=r[n[a]];var o=L0(i,[e.coord[0],this._resolution[1]-e.coord[1]],this._model,this._view,this._projection,this._resolution);if(!o)return null;for(var s=o[2],l=0,a=0;a<n.length;++a)l+=s[a]*this.intensity[n[a]];return{position:o[1],index:n[o[0]],cell:n,cellId:t,intensity:l,dataCoordinate:this.positions[n[o[0]]]}},s1.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};var l1=mx,u1=gx.prototype;u1.handlePick=function(e){if(e.object===this.mesh){var t=e.index=e.data.index;e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]];var n=this.data.text;return Array.isArray(n)&&void 0!==n[t]?e.textLabel=n[t]:n&&(e.textLabel=n),!0}},u1.update=function(e){function t(e,t,n,r){return t.map(function(t){return e.d2l(t,0,r)*n})}var n=this.scene,r=n.fullSceneLayout;this.data=e;var i,a=_x(t(r.xaxis,e.x,n.dataScale[0],e.xcalendar),t(r.yaxis,e.y,n.dataScale[1],e.ycalendar),t(r.zaxis,e.z,n.dataScale[2],e.zcalendar));if(e.i&&e.j&&e.k)i=_x(e.i,e.j,e.k);else if(0===e.alphahull)i=k0(a);else if(e.alphahull>0)i=g0(e.alphahull,a);else{var o=["x","y","z"].indexOf(e.delaunayaxis);i=s0(a.map(function(e){return[e[(o+1)%3],e[(o+2)%3]]}))}var s={positions:a,cells:i,lightPosition:[e.lightposition.x,e.lightposition.y,e.lightposition.z],ambient:e.lighting.ambient,diffuse:e.lighting.diffuse,specular:e.lighting.specular,roughness:e.lighting.roughness,fresnel:e.lighting.fresnel,vertexNormalsEpsilon:e.lighting.vertexnormalsepsilon,faceNormalsEpsilon:e.lighting.facenormalsepsilon,opacity:e.opacity,contourEnable:e.contour.show,contourColor:UZ(e.contour.color).slice(0,3),contourWidth:e.contour.width,useFacetNormals:e.flatshading};e.intensity?(this.color="#fff",s.vertexIntensity=e.intensity,s.vertexIntensityBounds=[e.cmin,e.cmax],s.colormap=yx(e.colorscale)):e.vertexcolor?(this.color=e.vertexcolor[0],s.vertexColors=vx(e.vertexcolor)):e.facecolor?(this.color=e.facecolor[0],s.cellColors=vx(e.facecolor)):(this.color=e.color,s.meshColor=UZ(e.color)),this.mesh.update(s)},u1.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var c1=bx,d1=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,q$,n,r)}function a(e){var t=e.map(function(e){var t=i(e);return t&&uE.isArrayOrTypedArray(t)?t:null});return t.every(function(e){return e&&e.length===t[0].length})&&t}var o=a(["x","y","z"]),s=a(["i","j","k"]);if(!o)return void(t.visible=!1);s&&s.forEach(function(e){for(var t=0;t<e.length;++t)e[t]|=0}),rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],r),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","contour.show","contour.color","contour.width","colorscale","reversescale","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(e){i(e)}),"intensity"in e?(i("intensity"),QE(e,t,r,i,{prefix:"",cLetter:"c"})):(t.showscale=!1,"facecolor"in e?i("facecolor"):"vertexcolor"in e?i("vertexcolor"):i("color",n)),i("text")},f1={};f1.attributes=q$,f1.supplyDefaults=d1,f1.calc=G$,f1.colorbar=Y$,f1.plot=c1,f1.moduleType="trace",f1.name="mesh3d",f1.basePlotModule=N$,f1.categories=["gl3d"],f1.meta={};var h1=f1,p1=h1,m1=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,nR,n,r)}if(oR.pushDummyTransformOpts(e,t),0===sR(e,t,i,r))return void(t.visible=!1);i("line.width"),i("line.dash"),xx(e,t,i,"increasing"),xx(e,t,i,"decreasing"),i("text"),i("tickwidth")},g1={},y1=uE._;g1.moduleType="transform",g1.name="ohlc",g1.attributes={},g1.supplyDefaults=function(e,t,n,r){return oR.clearEphemeralTransformOpts(r),oR.copyOHLC(e,t),e},g1.transform=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r];"ohlc"===i.type?n.push(wx(i,t,"increasing"),wx(i,t,"decreasing")):n.push(i)}return oR.addRangeSlider(n,t.layout),n},g1.calcTransform=function(e,t,n){var r,i=n.direction,a=oR.getFilterFn(i),o=oI.getFromTrace(e,t,"x"),s=oI.getFromTrace(e,t,"y"),l=Tx(e,o,t),u=t.open,c=t.high,d=t.low,f=t.close,h=t.text,p=y1(e,"open:")+" ",m=y1(e,"high:")+" ",g=y1(e,"low:")+" ",y=y1(e,"close:")+" ",v=u.length,_=[],b=[],x=[];r=t._fullInput.x?function(e){var n=t.x[e],r=t.xcalendar,i=o.d2c(n,0,r);_.push(o.c2d(i-l,0,r),n,n,n,n,o.c2d(i+l,0,r),null)}:function(e){_.push(e-l,e,e,e,e,e+l,null)};for(var w=function(e,t){return PI.tickText(e,e.c2l(t),"hover").text},k=t._fullInput.hoverinfo,T=k.split("+"),M="all"===k,A=M||-1!==T.indexOf("y"),C=M||-1!==T.indexOf("text"),S=Array.isArray(h)?function(e){return h[e]||""}:function(){return h},E=0;E<v;E++)a(u[E],f[E])&&SC(c[E])&&SC(d[E])&&(r(E),function(e,t,n,r){b.push(e,e,t,n,r,r,null)}(u[E],c[E],d[E],f[E]),function(e,t,n,r,i){var a=[];A&&(a.push(p+w(s,t)),a.push(m+w(s,n)),a.push(g+w(s,r)),a.push(y+w(s,i))),C&&a.push(S(e));var o=a.join("<br>");x.push(o,o,o,o,o,o,null)}(E,u[E],c[E],d[E],f[E]));t.x=_,t.y=b,t.text=x,t._length=_.length};var v1={moduleType:"trace",name:"ohlc",basePlotModule:xL,categories:["cartesian","showLegend"],meta:{},attributes:nR,supplyDefaults:m1};rS.register(PH),rS.register(g1);var _1=v1,b1=qD.attributes,x1=WC.extendDeepAll,w1=WC.extendFlat,k1={domain:b1({name:"parcoords",trace:!0,editType:"calc"}),labelfont:KC({editType:"calc"}),tickfont:KC({editType:"calc"}),rangefont:KC({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},tickvals:w1({},LE.tickvals,{editType:"calc"}),ticktext:w1({},LE.ticktext,{editType:"calc"}),tickformat:{valType:"string",dflt:"3s",editType:"calc"},visible:{valType:"boolean",dflt:!0,editType:"calc"},range:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},constraintrange:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},values:{valType:"data_array",editType:"calc"},editType:"calc"},line:w1(x1(FE(0,"calc"),{colorscale:{dflt:RC.Viridis},autocolorscale:{dflt:!1}}),{showscale:{valType:"boolean",dflt:!1,editType:"calc"},colorbar:RE,editType:"calc"})},T1={exports:{}};!function(e,t){"object"===typeof T1.exports?T1.exports=t():"function"===typeof MC&&MC.amd?MC(t):e.createREGL=t()}(this,function(){function e(e,t){this.id=X++,this.type=e,this.data=t}function t(e){if(0===e.length)return[];var n=e.charAt(0),r=e.charAt(e.length-1);if(1<e.length&&n===r&&('"'===n||"'"===n))return['"'+e.substr(1,e.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(n=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(e))return t(e.substr(0,n.index)).concat(t(n[1])).concat(t(e.substr(n.index+n[0].length)));if(n=e.split("."),1===n.length)return['"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(e=[],r=0;r<n.length;++r)e=e.concat(t(n[r]));return e}function n(e){return"["+t(e).join("][")+"]"}function r(){var e={"":0},t=[""];return{id:function(n){var r=e[n];return r||(r=e[n]=t.length,t.push(n),r)},str:function(e){return t[e]}}}function i(e,t,n){function r(){var t=window.innerWidth,r=window.innerHeight;e!==document.body&&(r=e.getBoundingClientRect(),t=r.right-r.left,r=r.bottom-r.top),i.width=n*t,i.height=n*r,Y(i.style,{width:t+"px",height:r+"px"})}var i=document.createElement("canvas");return Y(i.style,{border:0,margin:0,padding:0,top:0,left:0}),e.appendChild(i),e===document.body&&(i.style.position="absolute",Y(e.style,{margin:0,padding:0})),window.addEventListener("resize",r,!1),r(),{canvas:i,onDestroy:function(){window.removeEventListener("resize",r),e.removeChild(i)}}}function a(e,t){function n(n){try{return e.getContext(n,t)}catch(e){return null}}return n("webgl")||n("experimental-webgl")||n("webgl-experimental")}function o(e){return"string"===typeof e?e.split():e}function s(e){return"string"===typeof e?document.querySelector(e):e}function l(e){var t,n,r,l,u=e||{};e={};var c=[],d=[],f="undefined"===typeof window?1:window.devicePixelRatio,h=!1,p=function(e){},m=function(){};if("string"===typeof u?t=document.querySelector(u):"object"===typeof u&&("string"===typeof u.nodeName&&"function"===typeof u.appendChild&&"function"===typeof u.getBoundingClientRect?t=u:"function"===typeof u.drawArrays||"function"===typeof u.drawElements?(l=u,r=l.canvas):("gl"in u?l=u.gl:"canvas"in u?r=s(u.canvas):"container"in u&&(n=s(u.container)),"attributes"in u&&(e=u.attributes),"extensions"in u&&(c=o(u.extensions)),"optionalExtensions"in u&&(d=o(u.optionalExtensions)),"onDone"in u&&(p=u.onDone),"profile"in u&&(h=!!u.profile),"pixelRatio"in u&&(f=+u.pixelRatio))),t&&("canvas"===t.nodeName.toLowerCase()?r=t:n=t),!l){if(!r){if(!(t=i(n||document.body,p,f)))return null;r=t.canvas,m=t.onDestroy}l=a(r,e)}return l?{gl:l,canvas:r,container:n,extensions:c,optionalExtensions:d,pixelRatio:f,profile:h,onDone:p,onDestroy:m}:(m(),p("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function u(e,t){function n(t){t=t.toLowerCase();var n;try{n=r[t]=e.getExtension(t)}catch(e){}return!!n}for(var r={},i=0;i<t.extensions.length;++i){var a=t.extensions[i];if(!n(a))return t.onDestroy(),t.onDone('"'+a+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return t.optionalExtensions.forEach(n),{extensions:r,restore:function(){Object.keys(r).forEach(function(e){if(!n(e))throw Error("(regl): error restoring extension "+e)})}}}function c(e){return!!e&&"object"===typeof e&&Array.isArray(e.shape)&&Array.isArray(e.stride)&&"number"===typeof e.offset&&e.shape.length===e.stride.length&&(Array.isArray(e.data)||$(e.data))}function d(e,t){for(var n=Array(e),r=0;r<e;++r)n[r]=t(r);return n}function f(e){var t,n;return t=(65535<e)<<4,e>>>=t,n=(255<e)<<3,e>>>=n,t|=n,n=(15<e)<<2,e>>>=n,t|=n,n=(3<e)<<1,t|n|e>>>n>>1}function h(e){e:{for(var t=16;268435456>=t;t*=16)if(e<=t){e=t;break e}e=0}return t=te[f(e)>>2],0<t.length?t.pop():new ArrayBuffer(e)}function p(e){te[f(e.byteLength)>>2].push(e)}function m(e,t,n,r,i,a){for(var o=0;o<t;++o)for(var s=e[o],l=0;l<n;++l)for(var u=s[l],c=0;c<r;++c)i[a++]=u[c]}function g(e,t,n,r,i){for(var a=1,o=n+1;o<t.length;++o)a*=t[o];var s=t[n];if(4===t.length-n){var l=t[n+1],u=t[n+2];for(t=t[n+3],o=0;o<s;++o)m(e[o],l,u,t,r,i),i+=a}else for(o=0;o<s;++o)g(e[o],t,n+1,r,i),i+=a}function y(e){return 0|ie[Object.prototype.toString.call(e)]}function v(e,t){for(var n=0;n<t.length;++n)e[n]=t[n]}function _(e,t,n,r,i,a,o){for(var s=0,l=0;l<n;++l)for(var u=0;u<r;++u)e[s++]=t[i*l+a*u+o]}function b(e,t,n){function r(t){this.id=s++,this.buffer=e.createBuffer(),this.type=t,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,n.profile&&(this.stats={size:0})}function i(t,n,r){t.byteLength=n.byteLength,e.bufferData(t.type,n,r)}function a(e,t,n,r,a,o){if(e.usage=n,Array.isArray(t)){if(e.dtype=r||5126,0<t.length)if(Array.isArray(t[0])){a=le(t);for(var s=r=1;s<a.length;++s)r*=a[s];e.dimension=r,t=se(t,a,e.dtype),i(e,t,n),o?e.persistentData=t:ne.freeType(t)}else"number"===typeof t[0]?(e.dimension=a,a=ne.allocType(e.dtype,t.length),v(a,t),i(e,a,n),o?e.persistentData=a:ne.freeType(a)):$(t[0])&&(e.dimension=t[0].length,e.dtype=r||y(t[0])||5126,t=se(t,[t.length,t[0].length],e.dtype),i(e,t,n),o?e.persistentData=t:ne.freeType(t))}else if($(t))e.dtype=r||y(t),e.dimension=a,i(e,t,n),o&&(e.persistentData=new Uint8Array(new Uint8Array(t.buffer)));else if(c(t)){a=t.shape;var l=t.stride,s=t.offset,u=0,d=0,f=0,h=0;1===a.length?(u=a[0],d=1,f=l[0],h=0):2===a.length&&(u=a[0],d=a[1],f=l[0],h=l[1]),e.dtype=r||y(t.data)||5126,e.dimension=d,a=ne.allocType(e.dtype,u*d),_(a,t.data,u,d,f,h,s),i(e,a,n),o?e.persistentData=a:ne.freeType(a)}}function o(n){t.bufferCount--,e.deleteBuffer(n.buffer),n.buffer=null,delete l[n.id]}var s=0,l={};r.prototype.bind=function(){e.bindBuffer(this.type,this.buffer)},r.prototype.destroy=function(){o(this)};var u=[];return n.profile&&(t.getTotalBufferSize=function(){var e=0;return Object.keys(l).forEach(function(t){e+=l[t].stats.size}),e}),{create:function(i,s,u,d){function f(t){var r=35044,i=null,o=0,s=0,l=1;return Array.isArray(t)||$(t)||c(t)?i=t:"number"===typeof t?o=0|t:t&&("data"in t&&(i=t.data),"usage"in t&&(r=oe[t.usage]),"type"in t&&(s=ae[t.type]),"dimension"in t&&(l=0|t.dimension),"length"in t&&(o=0|t.length)),h.bind(),i?a(h,i,r,s,l,d):(e.bufferData(h.type,o,r),h.dtype=s||5121,h.usage=r,h.dimension=l,h.byteLength=o),n.profile&&(h.stats.size=h.byteLength*ue[h.dtype]),f}t.bufferCount++;var h=new r(s);return l[h.id]=h,u||f(i),f._reglType="buffer",f._buffer=h,f.subdata=function(t,n){var r,i=0|(n||0);if(h.bind(),$(t))e.bufferSubData(h.type,i,t);else if(Array.isArray(t)){if(0<t.length)if("number"===typeof t[0]){var a=ne.allocType(h.dtype,t.length);v(a,t),e.bufferSubData(h.type,i,a),ne.freeType(a)}else(Array.isArray(t[0])||$(t[0]))&&(r=le(t),a=se(t,r,h.dtype),e.bufferSubData(h.type,i,a),ne.freeType(a))}else if(c(t)){r=t.shape;var o=t.stride,s=a=0,l=0,u=0;1===r.length?(a=r[0],s=1,l=o[0],u=0):2===r.length&&(a=r[0],s=r[1],l=o[0],u=o[1]),r=Array.isArray(t.data)?h.dtype:y(t.data),r=ne.allocType(r,a*s),_(r,t.data,a,s,l,u,t.offset),e.bufferSubData(h.type,i,r),ne.freeType(r)}return f},n.profile&&(f.stats=h.stats),f.destroy=function(){o(h)},f},createStream:function(e,t){var n=u.pop();return n||(n=new r(e)),n.bind(),a(n,t,35040,0,1,!1),n},destroyStream:function(e){u.push(e)},clear:function(){ee(l).forEach(o),u.forEach(o)},getBuffer:function(e){return e&&e._buffer instanceof r?e._buffer:null},restore:function(){ee(l).forEach(function(t){t.buffer=e.createBuffer(),e.bindBuffer(t.type,t.buffer),e.bufferData(t.type,t.persistentData||t.byteLength,t.usage)})},_initBuffer:a}}function x(e,t,n,r){function i(e){this.id=l++,s[this.id]=this,this.buffer=e,this.primType=4,this.type=this.vertCount=0}function a(r,i,a,o,s,l,u){if(r.buffer.bind(),i){var d=u;u||$(i)&&(!c(i)||$(i.data))||(d=t.oes_element_index_uint?5125:5123),n._initBuffer(r.buffer,i,a,d,3)}else e.bufferData(34963,l,a),r.buffer.dtype=d||5121,r.buffer.usage=a,r.buffer.dimension=3,r.buffer.byteLength=l;if(d=u,!u){switch(r.buffer.dtype){case 5121:case 5120:d=5121;break;case 5123:case 5122:d=5123;break;case 5125:case 5124:d=5125}r.buffer.dtype=d}r.type=d,i=s,0>i&&(i=r.buffer.byteLength,5123===d?i>>=1:5125===d&&(i>>=2)),r.vertCount=i,i=o,0>o&&(i=4,o=r.buffer.dimension,1===o&&(i=0),2===o&&(i=1),3===o&&(i=4)),r.primType=i}function o(e){r.elementsCount--,delete s[e.id],e.buffer.destroy(),e.buffer=null}var s={},l=0,u={uint8:5121,uint16:5123};t.oes_element_index_uint&&(u.uint32=5125),i.prototype.bind=function(){this.buffer.bind()};var d=[];return{create:function(e,t){function s(e){if(e)if("number"===typeof e)l(e),d.primType=4,d.vertCount=0|e,d.type=5121;else{var t=null,n=35044,r=-1,i=-1,o=0,f=0;Array.isArray(e)||$(e)||c(e)?t=e:("data"in e&&(t=e.data),"usage"in e&&(n=oe[e.usage]),"primitive"in e&&(r=ce[e.primitive]),"count"in e&&(i=0|e.count),"type"in e&&(f=u[e.type]),"length"in e?o=0|e.length:(o=i,5123===f||5122===f?o*=2:5125!==f&&5124!==f||(o*=4))),a(d,t,n,r,i,o,f)}else l(),d.primType=4,d.vertCount=0,d.type=5121;return s}var l=n.create(null,34963,!0),d=new i(l._buffer);return r.elementsCount++,s(e),s._reglType="elements",s._elements=d,s.subdata=function(e,t){return l.subdata(e,t),s},s.destroy=function(){o(d)},s},createStream:function(e){var t=d.pop();return t||(t=new i(n.create(null,34963,!0,!1)._buffer)),a(t,e,35040,-1,-1,0,0),t},destroyStream:function(e){d.push(e)},getElements:function(e){return"function"===typeof e&&e._elements instanceof i?e._elements:null},clear:function(){ee(s).forEach(o)}}}function w(e){for(var t=ne.allocType(5123,e.length),n=0;n<e.length;++n)if(isNaN(e[n]))t[n]=65535;else if(1/0===e[n])t[n]=31744;else if(-1/0===e[n])t[n]=64512;else{de[0]=e[n];var r=fe[0],i=r>>>31<<15,a=(r<<1>>>24)-127,r=r>>13&1023;t[n]=-24>a?i:-14>a?i+(r+1024>>-14-a):15<a?i+31744:i+(a+15<<10)+r}return t}function k(e){return Array.isArray(e)||$(e)}function T(e){return Array.isArray(e)&&(0===e.length||"number"===typeof e[0])}function M(e){return!(!Array.isArray(e)||0===e.length||!k(e[0]))}function A(e){return Object.prototype.toString.call(e)}function C(e){if(!e)return!1;var t=A(e);return 0<=ge.indexOf(t)||(T(e)||M(e)||c(e))}function S(e,t){36193===e.type?(e.data=w(t),ne.freeType(t)):e.data=t}function E(e,t,n,r,i,a){if(e="undefined"!==typeof ve[e]?ve[e]:me[e]*ye[t],a&&(e*=6),i){for(r=0;1<=n;)r+=e*n*n,n/=2;return r}return e*n*r}function P(e,t,n,r,i,a,o){function s(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function l(e,t){e.internalformat=t.internalformat,e.format=t.format,e.type=t.type,e.compressed=t.compressed,e.premultiplyAlpha=t.premultiplyAlpha,e.flipY=t.flipY,e.unpackAlignment=t.unpackAlignment,e.colorSpace=t.colorSpace,e.width=t.width,e.height=t.height,e.channels=t.channels}function u(e,t){if("object"===typeof t&&t){"premultiplyAlpha"in t&&(e.premultiplyAlpha=t.premultiplyAlpha),"flipY"in t&&(e.flipY=t.flipY),"alignment"in t&&(e.unpackAlignment=t.alignment),"colorSpace"in t&&(e.colorSpace=V[t.colorSpace]),"type"in t&&(e.type=H[t.type]);var n=e.width,r=e.height,i=e.channels,a=!1;"shape"in t?(n=t.shape[0],r=t.shape[1],3===t.shape.length&&(i=t.shape[2],a=!0)):("radius"in t&&(n=r=t.radius),"width"in t&&(n=t.width),"height"in t&&(r=t.height),"channels"in t&&(i=t.channels,a=!0)),e.width=0|n,e.height=0|r,e.channels=0|i,n=!1,"format"in t&&(n=t.format,r=e.internalformat=W[n],e.format=ae[r],n in H&&!("type"in t)&&(e.type=H[n]),n in q&&(e.compressed=!0),n=!0),!a&&n?e.channels=me[e.format]:a&&!n&&e.channels!==pe[e.format]&&(e.format=e.internalformat=pe[e.channels])}}function d(t){e.pixelStorei(37440,t.flipY),e.pixelStorei(37441,t.premultiplyAlpha),e.pixelStorei(37443,t.colorSpace),e.pixelStorei(3317,t.unpackAlignment)}function f(){s.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function h(e,t){var n=null;if(C(t)?n=t:t&&(u(e,t),"x"in t&&(e.xOffset=0|t.x),"y"in t&&(e.yOffset=0|t.y),C(t.data)&&(n=t.data)),t.copy){var r=i.viewportWidth,a=i.viewportHeight;e.width=e.width||r-e.xOffset,e.height=e.height||a-e.yOffset,e.needsCopy=!0}else if(n){if($(n))e.channels=e.channels||4,e.data=n,"type"in t||5121!==e.type||(e.type=0|ie[Object.prototype.toString.call(n)]);else if(T(n)){switch(e.channels=e.channels||4,r=n,a=r.length,e.type){case 5121:case 5123:case 5125:case 5126:a=ne.allocType(e.type,a),a.set(r),e.data=a;break;case 36193:e.data=w(r)}e.alignment=1,e.needsFree=!0}else if(c(n)){r=n.data,Array.isArray(r)||5121!==e.type||(e.type=0|ie[Object.prototype.toString.call(r)]);var o,s,l,d,a=n.shape,f=n.stride;3===a.length?(l=a[2],d=f[2]):d=l=1,o=a[0],s=a[1],a=f[0],f=f[1],e.alignment=1,e.width=o,e.height=s,e.channels=l,e.format=e.internalformat=pe[l],e.needsFree=!0,o=d,n=n.offset,l=e.width,d=e.height,s=e.channels;for(var h=ne.allocType(36193===e.type?5126:e.type,l*d*s),p=0,m=0;m<d;++m)for(var g=0;g<l;++g)for(var y=0;y<s;++y)h[p++]=r[a*g+f*m+o*y+n];S(e,h)}else if("[object HTMLCanvasElement]"===A(n)||"[object CanvasRenderingContext2D]"===A(n))"[object HTMLCanvasElement]"===A(n)?e.element=n:e.element=n.canvas,e.width=e.element.width,e.height=e.element.height,e.channels=4;else if("[object HTMLImageElement]"===A(n))e.element=n,e.width=n.naturalWidth,e.height=n.naturalHeight,e.channels=4;else if("[object HTMLVideoElement]"===A(n))e.element=n,e.width=n.videoWidth,e.height=n.videoHeight,e.channels=4;else if(M(n)){for(r=e.width||n[0].length,a=e.height||n.length,f=e.channels,f=k(n[0][0])?f||n[0][0].length:f||1,o=re.shape(n),l=1,d=0;d<o.length;++d)l*=o[d];l=ne.allocType(36193===e.type?5126:e.type,l),re.flatten(n,o,"",l),S(e,l),e.alignment=1,e.width=r,e.height=a,e.channels=f,e.format=e.internalformat=pe[f],e.needsFree=!0}}else e.width=e.width||1,e.height=e.height||1,e.channels=e.channels||4}function p(t,n,i,a,o){var s=t.element,l=t.data,u=t.internalformat,c=t.format,f=t.type,h=t.width,p=t.height;d(t),s?e.texSubImage2D(n,o,i,a,c,f,s):t.compressed?e.compressedTexSubImage2D(n,o,i,a,u,h,p,l):t.needsCopy?(r(),e.copyTexSubImage2D(n,o,i,a,t.xOffset,t.yOffset,h,p)):e.texSubImage2D(n,o,i,a,h,p,c,f,l)}function m(){return oe.pop()||new f}function g(e){e.needsFree&&ne.freeType(e.data),f.call(e),oe.push(e)}function y(){s.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function v(e,t,n){var r=e.images[0]=m();e.mipmask=1,r.width=e.width=t,r.height=e.height=n,r.channels=e.channels=4}function _(e,t){var n=null;if(C(t))n=e.images[0]=m(),l(n,e),h(n,t),e.mipmask=1;else if(u(e,t),Array.isArray(t.mipmap))for(var r=t.mipmap,i=0;i<r.length;++i)n=e.images[i]=m(),l(n,e),n.width>>=i,n.height>>=i,h(n,r[i]),e.mipmask|=1<<i;else n=e.images[0]=m(),l(n,e),h(n,t),e.mipmask=1;l(e,e.images[0])}function b(t,n){for(var i=t.images,a=0;a<i.length&&i[a];++a){var o=i[a],s=n,l=a,u=o.element,c=o.data,f=o.internalformat,h=o.format,p=o.type,m=o.width,g=o.height;d(o),u?e.texImage2D(s,l,h,h,p,u):o.compressed?e.compressedTexImage2D(s,l,f,m,g,0,c):o.needsCopy?(r(),e.copyTexImage2D(s,l,h,o.xOffset,o.yOffset,m,g,0)):e.texImage2D(s,l,h,m,g,0,h,p,c)}}function x(){var e=se.pop()||new y;s.call(e);for(var t=e.mipmask=0;16>t;++t)e.images[t]=null;return e}function P(e){for(var t=e.images,n=0;n<t.length;++n)t[n]&&g(t[n]),t[n]=null;se.push(e)}function I(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function L(e,t){"min"in t&&(e.minFilter=U[t.min],0<=he.indexOf(e.minFilter)&&(e.genMipmaps=!0)),"mag"in t&&(e.magFilter=B[t.mag]);var n=e.wrapS,r=e.wrapT;if("wrap"in t){var i=t.wrap;"string"===typeof i?n=r=j[i]:Array.isArray(i)&&(n=j[i[0]],r=j[i[1]])}else"wrapS"in t&&(n=j[t.wrapS]),"wrapT"in t&&(r=j[t.wrapT]);if(e.wrapS=n,e.wrapT=r,"anisotropic"in t&&(e.anisotropic=t.anisotropic),"mipmap"in t){switch(n=!1,typeof t.mipmap){case"string":e.mipmapHint=F[t.mipmap],n=e.genMipmaps=!0;break;case"boolean":n=e.genMipmaps=t.mipmap;break;case"object":e.genMipmaps=!1,n=!0}!n||"min"in t||(e.minFilter=9984)}}function O(n,r){e.texParameteri(r,10241,n.minFilter),e.texParameteri(r,10240,n.magFilter),e.texParameteri(r,10242,n.wrapS),e.texParameteri(r,10243,n.wrapT),t.ext_texture_filter_anisotropic&&e.texParameteri(r,34046,n.anisotropic),n.genMipmaps&&(e.hint(33170,n.mipmapHint),e.generateMipmap(r))}function z(t){s.call(this),this.mipmask=0,this.internalformat=6408,this.id=le++,this.refCount=1,this.target=t,this.texture=e.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new I,o.profile&&(this.stats={size:0})}function R(t){e.activeTexture(33984),e.bindTexture(t.target,t.texture)}function D(){var t=de[0];t?e.bindTexture(t.target,t.texture):e.bindTexture(3553,null)}function N(t){var n=t.texture,r=t.unit,i=t.target;0<=r&&(e.activeTexture(33984+r),e.bindTexture(i,null),de[r]=null),e.deleteTexture(n),t.texture=null,t.params=null,t.pixels=null,t.refCount=0,delete ue[t.id],a.textureCount--}var F={"don't care":4352,"dont care":4352,nice:4354,fast:4353},j={repeat:10497,clamp:33071,mirror:33648},B={nearest:9728,linear:9729},U=Y({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},B),V={none:0,browser:37444},H={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},W={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},q={};t.ext_srgb&&(W.srgb=35904,W.srgba=35906),t.oes_texture_float&&(H.float32=H.float=5126),t.oes_texture_half_float&&(H.float16=H["half float"]=36193),t.webgl_depth_texture&&(Y(W,{depth:6402,"depth stencil":34041}),Y(H,{uint16:5123,uint32:5125,"depth stencil":34042})),t.webgl_compressed_texture_s3tc&&Y(q,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),t.webgl_compressed_texture_atc&&Y(q,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),t.webgl_compressed_texture_pvrtc&&Y(q,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),t.webgl_compressed_texture_etc1&&(q["rgb etc1"]=36196);var G=Array.prototype.slice.call(e.getParameter(34467));Object.keys(q).forEach(function(e){var t=q[e];0<=G.indexOf(t)&&(W[e]=t)});var X=Object.keys(W);n.textureFormats=X;var Z=[];Object.keys(W).forEach(function(e){Z[W[e]]=e});var J=[];Object.keys(H).forEach(function(e){J[H[e]]=e});var K=[];Object.keys(B).forEach(function(e){K[B[e]]=e});var Q=[];Object.keys(U).forEach(function(e){Q[U[e]]=e});var te=[];Object.keys(j).forEach(function(e){te[j[e]]=e});var ae=X.reduce(function(e,t){var n=W[t];return 6409===n||6406===n||6409===n||6410===n||6402===n||34041===n?e[n]=n:32855===n||0<=t.indexOf("rgba")?e[n]=6408:e[n]=6407,e},{}),oe=[],se=[],le=0,ue={},ce=n.maxTextureUnits,de=Array(ce).map(function(){return null});return Y(z.prototype,{bind:function(){this.bindCount+=1;var t=this.unit;if(0>t){for(var n=0;n<ce;++n){var r=de[n];if(r){if(0<r.bindCount)continue;r.unit=-1}de[n]=this,t=n;break}o.profile&&a.maxTextureUnits<t+1&&(a.maxTextureUnits=t+1),this.unit=t,e.activeTexture(33984+t),e.bindTexture(this.target,this.texture)}return t},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&N(this)}}),o.profile&&(a.getTotalTextureSize=function(){var e=0;return Object.keys(ue).forEach(function(t){e+=ue[t].stats.size}),e}),{create2D:function(t,n){function r(e,t){var n=i.texInfo;I.call(n);var a=x();return"number"===typeof e?"number"===typeof t?v(a,0|e,0|t):v(a,0|e,0|e):e?(L(n,e),_(a,e)):v(a,1,1),n.genMipmaps&&(a.mipmask=(a.width<<1)-1),i.mipmask=a.mipmask,l(i,a),i.internalformat=a.internalformat,r.width=a.width,r.height=a.height,R(i),b(a,3553),O(n,3553),D(),P(a),o.profile&&(i.stats.size=E(i.internalformat,i.type,a.width,a.height,n.genMipmaps,!1)),r.format=Z[i.internalformat],r.type=J[i.type],r.mag=K[n.magFilter],r.min=Q[n.minFilter],r.wrapS=te[n.wrapS],r.wrapT=te[n.wrapT],r}var i=new z(3553);return ue[i.id]=i,a.textureCount++,r(t,n),r.subimage=function(e,t,n,a){t|=0,n|=0,a|=0;var o=m();return l(o,i),o.width=0,o.height=0,h(o,e),o.width=o.width||(i.width>>a)-t,o.height=o.height||(i.height>>a)-n,R(i),p(o,3553,t,n,a),D(),g(o),r},r.resize=function(t,n){var a=0|t,s=0|n||a;if(a===i.width&&s===i.height)return r;r.width=i.width=a,r.height=i.height=s,R(i);for(var l=0;i.mipmask>>l;++l)e.texImage2D(3553,l,i.format,a>>l,s>>l,0,i.format,i.type,null);return D(),o.profile&&(i.stats.size=E(i.internalformat,i.type,a,s,!1,!1)),r},r._reglType="texture2d",r._texture=i,o.profile&&(r.stats=i.stats),r.destroy=function(){i.decRef()},r},createCube:function(t,n,r,i,s,c){function d(e,t,n,r,i,a){var s,c=f.texInfo;for(I.call(c),s=0;6>s;++s)y[s]=x();if("number"!==typeof e&&e){if("object"===typeof e)if(t)_(y[0],e),_(y[1],t),_(y[2],n),_(y[3],r),_(y[4],i),_(y[5],a);else if(L(c,e),u(f,e),"faces"in e)for(e=e.faces,s=0;6>s;++s)l(y[s],f),_(y[s],e[s]);else for(s=0;6>s;++s)_(y[s],e)}else for(e=0|e||1,s=0;6>s;++s)v(y[s],e,e);for(l(f,y[0]),f.mipmask=c.genMipmaps?(y[0].width<<1)-1:y[0].mipmask,f.internalformat=y[0].internalformat,d.width=y[0].width,d.height=y[0].height,R(f),s=0;6>s;++s)b(y[s],34069+s);for(O(c,34067),D(),o.profile&&(f.stats.size=E(f.internalformat,f.type,d.width,d.height,c.genMipmaps,!0)),d.format=Z[f.internalformat],d.type=J[f.type],d.mag=K[c.magFilter],d.min=Q[c.minFilter],d.wrapS=te[c.wrapS],d.wrapT=te[c.wrapT],s=0;6>s;++s)P(y[s]);return d}var f=new z(34067);ue[f.id]=f,a.cubeCount++;var y=Array(6);return d(t,n,r,i,s,c),d.subimage=function(e,t,n,r,i){n|=0,r|=0,i|=0;var a=m();return l(a,f),a.width=0,a.height=0,h(a,t),a.width=a.width||(f.width>>i)-n,a.height=a.height||(f.height>>i)-r,R(f),p(a,34069+e,n,r,i),D(),g(a),d},d.resize=function(t){if((t|=0)!==f.width){d.width=f.width=t,d.height=f.height=t,R(f);for(var n=0;6>n;++n)for(var r=0;f.mipmask>>r;++r)e.texImage2D(34069+n,r,f.format,t>>r,t>>r,0,f.format,f.type,null);return D(),o.profile&&(f.stats.size=E(f.internalformat,f.type,d.width,d.height,!1,!0)),d}},d._reglType="textureCube",d._texture=f,o.profile&&(d.stats=f.stats),d.destroy=function(){f.decRef()},d},clear:function(){for(var t=0;t<ce;++t)e.activeTexture(33984+t),e.bindTexture(3553,null),de[t]=null;ee(ue).forEach(N),a.cubeCount=0,a.textureCount=0},getTexture:function(e){return null},restore:function(){ee(ue).forEach(function(t){t.texture=e.createTexture(),e.bindTexture(t.target,t.texture);for(var n=0;32>n;++n)if(0!==(t.mipmask&1<<n))if(3553===t.target)e.texImage2D(3553,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);else for(var r=0;6>r;++r)e.texImage2D(34069+r,n,t.internalformat,t.width>>n,t.height>>n,0,t.internalformat,t.type,null);O(t.texInfo,t.target)})}}}function I(e,t,n,r,i,a){function o(e,t,n){this.target=e,this.texture=t,this.renderbuffer=n;var r=e=0;t?(e=t.width,r=t.height):n&&(e=n.width,r=n.height),this.width=e,this.height=r}function s(e){e&&(e.texture&&e.texture._texture.decRef(),e.renderbuffer&&e.renderbuffer._renderbuffer.decRef())}function l(e,t,n){e&&(e.texture?e.texture._texture.refCount+=1:e.renderbuffer._renderbuffer.refCount+=1)}function u(t,n){n&&(n.texture?e.framebufferTexture2D(36160,t,n.target,n.texture._texture.texture,0):e.framebufferRenderbuffer(36160,t,36161,n.renderbuffer._renderbuffer.renderbuffer))}function c(e){var t=3553,n=null,r=null,i=e;return"object"===typeof e&&(i=e.data,"target"in e&&(t=0|e.target)),e=i._reglType,"texture2d"===e?n=i:"textureCube"===e?n=i:"renderbuffer"===e&&(r=i,t=36161),new o(t,n,r)}function d(e,t,n,a,s){return n?(e=r.create2D({width:e,height:t,format:a,type:s}),e._texture.refCount=0,new o(3553,e,null)):(e=i.create({width:e,height:t,format:a}),e._renderbuffer.refCount=0,new o(36161,null,e))}function f(e){return e&&(e.texture||e.renderbuffer)}function h(e,t,n){e&&(e.texture?e.texture.resize(t,n):e.renderbuffer&&e.renderbuffer.resize(t,n))}function p(){this.id=k++,T[this.id]=this,this.framebuffer=e.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function m(e){e.colorAttachments.forEach(s),s(e.depthAttachment),s(e.stencilAttachment),s(e.depthStencilAttachment)}function g(t){e.deleteFramebuffer(t.framebuffer),t.framebuffer=null,a.framebufferCount--,delete T[t.id]}function y(t){var r;e.bindFramebuffer(36160,t.framebuffer);var i=t.colorAttachments;for(r=0;r<i.length;++r)u(36064+r,i[r]);for(r=i.length;r<n.maxColorAttachments;++r)e.framebufferTexture2D(36160,36064+r,3553,null,0);e.framebufferTexture2D(36160,33306,3553,null,0),e.framebufferTexture2D(36160,36096,3553,null,0),e.framebufferTexture2D(36160,36128,3553,null,0),u(36096,t.depthAttachment),u(36128,t.stencilAttachment),u(33306,t.depthStencilAttachment),e.checkFramebufferStatus(36160),e.bindFramebuffer(36160,_.next),_.cur=_.next,e.getError()}function v(e,t){function n(e,t){var i,a=0,o=0,s=!0,u=!0;i=null;var h=!0,p="rgba",g="uint8",v=1,_=null,w=null,k=null,T=!1;"number"===typeof e?(a=0|e,o=0|t||a):e?("shape"in e?(o=e.shape,a=o[0],o=o[1]):("radius"in e&&(a=o=e.radius),"width"in e&&(a=e.width),"height"in e&&(o=e.height)),("color"in e||"colors"in e)&&(i=e.color||e.colors,Array.isArray(i)),i||("colorCount"in e&&(v=0|e.colorCount),"colorTexture"in e&&(h=!!e.colorTexture,p="rgba4"),"colorType"in e&&(g=e.colorType,!h)&&("half float"===g||"float16"===g?p="rgba16f":"float"!==g&&"float32"!==g||(p="rgba32f")),"colorFormat"in e&&(p=e.colorFormat,0<=b.indexOf(p)?h=!0:0<=x.indexOf(p)&&(h=!1))),("depthTexture"in e||"depthStencilTexture"in e)&&(T=!(!e.depthTexture&&!e.depthStencilTexture)),"depth"in e&&("boolean"===typeof e.depth?s=e.depth:(_=e.depth,u=!1)),"stencil"in e&&("boolean"===typeof e.stencil?u=e.stencil:(w=e.stencil,s=!1)),"depthStencil"in e&&("boolean"===typeof e.depthStencil?s=u=e.depthStencil:(k=e.depthStencil,u=s=!1))):a=o=1;var M=null,A=null,C=null,S=null;if(Array.isArray(i))M=i.map(c);else if(i)M=[c(i)];else for(M=Array(v),i=0;i<v;++i)M[i]=d(a,o,h,p,g);for(a=a||M[0].width,o=o||M[0].height,_?A=c(_):s&&!u&&(A=d(a,o,T,"depth","uint32")),w?C=c(w):u&&!s&&(C=d(a,o,!1,"stencil","uint8")),k?S=c(k):!_&&!w&&u&&s&&(S=d(a,o,T,"depth stencil","depth stencil")),s=null,i=0;i<M.length;++i)l(M[i],a,o),M[i]&&M[i].texture&&(u=xe[M[i].texture._texture.format]*we[M[i].texture._texture.type],null===s&&(s=u));return l(A,a,o),l(C,a,o),l(S,a,o),m(r),r.width=a,r.height=o,r.colorAttachments=M,r.depthAttachment=A,r.stencilAttachment=C,r.depthStencilAttachment=S,n.color=M.map(f),n.depth=f(A),n.stencil=f(C),n.depthStencil=f(S),n.width=r.width,n.height=r.height,y(r),n}var r=new p;return a.framebufferCount++,n(e,t),Y(n,{resize:function(e,t){var i=0|e,a=0|t||i;if(i===r.width&&a===r.height)return n;for(var o=r.colorAttachments,s=0;s<o.length;++s)h(o[s],i,a);return h(r.depthAttachment,i,a),h(r.stencilAttachment,i,a),h(r.depthStencilAttachment,i,a),r.width=n.width=i,r.height=n.height=a,y(r),n},_reglType:"framebuffer",_framebuffer:r,destroy:function(){g(r),m(r)},use:function(e){_.setFBO({framebuffer:n},e)}})}var _={cur:null,next:null,dirty:!1,setFBO:null},b=["rgba"],x=["rgba4","rgb565","rgb5 a1"];t.ext_srgb&&x.push("srgba"),t.ext_color_buffer_half_float&&x.push("rgba16f","rgb16f"),t.webgl_color_buffer_float&&x.push("rgba32f");var w=["uint8"];t.oes_texture_half_float&&w.push("half float","float16"),t.oes_texture_float&&w.push("float","float32");var k=0,T={};return Y(_,{getFramebuffer:function(e){return"function"===typeof e&&"framebuffer"===e._reglType&&(e=e._framebuffer)instanceof p?e:null},create:v,createCube:function(e){function t(e){var i,a={color:null},o=0,s=null;i="rgba";var l="uint8",u=1;if("number"===typeof e?o=0|e:e?("shape"in e?o=e.shape[0]:("radius"in e&&(o=0|e.radius),"width"in e?o=0|e.width:"height"in e&&(o=0|e.height)),("color"in e||"colors"in e)&&(s=e.color||e.colors,Array.isArray(s)),s||("colorCount"in e&&(u=0|e.colorCount),"colorType"in e&&(l=e.colorType),"colorFormat"in e&&(i=e.colorFormat)),"depth"in e&&(a.depth=e.depth),"stencil"in e&&(a.stencil=e.stencil),"depthStencil"in e&&(a.depthStencil=e.depthStencil)):o=1,s)if(Array.isArray(s))for(e=[],i=0;i<s.length;++i)e[i]=s[i];else e=[s];else for(e=Array(u),s={radius:o,format:i,type:l},i=0;i<u;++i)e[i]=r.createCube(s);for(a.color=Array(e.length),i=0;i<e.length;++i)u=e[i],o=o||u.width,a.color[i]={target:34069,data:e[i]};for(i=0;6>i;++i){for(u=0;u<e.length;++u)a.color[u].target=34069+i;0<i&&(a.depth=n[0].depth,a.stencil=n[0].stencil,a.depthStencil=n[0].depthStencil),n[i]?n[i](a):n[i]=v(a)}return Y(t,{width:o,height:o,color:e})}var n=Array(6);return t(e),Y(t,{faces:n,resize:function(e){var r=0|e;if(r===t.width)return t;var i=t.color;for(e=0;e<i.length;++e)i[e].resize(r);for(e=0;6>e;++e)n[e].resize(r);return t.width=t.height=r,t},_reglType:"framebufferCube",destroy:function(){n.forEach(function(e){e.destroy()})}})},clear:function(){ee(T).forEach(g)},restore:function(){ee(T).forEach(function(t){t.framebuffer=e.createFramebuffer(),y(t)})}})}function L(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function O(e,t,n,r,i){for(e=n.maxAttributes,t=Array(e),n=0;n<e;++n)t[n]=new L;return{Record:L,scope:{},state:t}}function z(e,t,n,r){function i(e,t,n,r){this.name=e,this.id=t,this.location=n,this.info=r}function a(e,t){for(var n=0;n<e.length;++n)if(e[n].id===t.id)return void(e[n].location=t.location);e.push(t)}function o(n,r,i){i=35632===n?u:c;var a=i[r];if(!a){var o=t.str(r),a=e.createShader(n);e.shaderSource(a,o),e.compileShader(a),i[r]=a}return a}function s(e,t){this.id=h++,this.fragId=e,this.vertId=t,this.program=null,this.uniforms=[],this.attributes=[],r.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function l(n,s){var l,u;l=o(35632,n.fragId),u=o(35633,n.vertId);var c=n.program=e.createProgram();e.attachShader(c,l),e.attachShader(c,u),e.linkProgram(c);var d=e.getProgramParameter(c,35718);r.profile&&(n.stats.uniformsCount=d);var f=n.uniforms;for(l=0;l<d;++l)if(u=e.getActiveUniform(c,l))if(1<u.size)for(var h=0;h<u.size;++h){var p=u.name.replace("[0]","["+h+"]");a(f,new i(p,t.id(p),e.getUniformLocation(c,p),u))}else a(f,new i(u.name,t.id(u.name),e.getUniformLocation(c,u.name),u));for(d=e.getProgramParameter(c,35721),r.profile&&(n.stats.attributesCount=d),f=n.attributes,l=0;l<d;++l)(u=e.getActiveAttrib(c,l))&&a(f,new i(u.name,t.id(u.name),e.getAttribLocation(c,u.name),u))}var u={},c={},d={},f=[],h=0;return r.profile&&(n.getMaxUniformsCount=function(){var e=0;return f.forEach(function(t){t.stats.uniformsCount>e&&(e=t.stats.uniformsCount)}),e},n.getMaxAttributesCount=function(){var e=0;return f.forEach(function(t){t.stats.attributesCount>e&&(e=t.stats.attributesCount)}),e}),{clear:function(){var t=e.deleteShader.bind(e);ee(u).forEach(t),u={},ee(c).forEach(t),c={},f.forEach(function(t){e.deleteProgram(t.program)}),f.length=0,d={},n.shaderCount=0},program:function(e,t,r){var i=d[t];i||(i=d[t]={});var a=i[e];return a||(a=new s(t,e),n.shaderCount++,l(a,r),i[e]=a,f.push(a)),a},restore:function(){u={},c={};for(var e=0;e<f.length;++e)l(f[e])},shader:o,frag:-1,vert:-1}}function R(e,t,n,r,i,a){function o(i){var a;a=null===t.next?5121:t.next.colorAttachments[0].texture._texture.type;var o=0,s=0,l=r.framebufferWidth,u=r.framebufferHeight,c=null;return $(i)?c=i:i&&(o=0|i.x,s=0|i.y,l=0|(i.width||r.framebufferWidth-o),u=0|(i.height||r.framebufferHeight-s),c=i.data||null),n(),i=l*u*4,c||(5121===a?c=new Uint8Array(i):5126===a&&(c=c||new Float32Array(i))),e.pixelStorei(3333,4),e.readPixels(o,s,l,u,6408,a,c),c}function s(e){var n;return t.setFBO({framebuffer:e.framebuffer},function(){n=o(e)}),n}return function(e){return e&&"framebuffer"in e?s(e):o(e)}}function D(e){return Array.prototype.slice.call(e)}function N(e){return D(e).join("")}function F(){function e(){var e=[],t=[];return Y(function(){e.push.apply(e,D(arguments))},{def:function(){var r="v"+n++;return t.push(r),0<arguments.length&&(e.push(r,"="),e.push.apply(e,D(arguments)),e.push(";")),r},toString:function(){return N([0<t.length?"var "+t+";":"",N(e)])}})}function t(){function t(e,t){r(e,t,"=",n.def(e,t),";")}var n=e(),r=e(),i=n.toString,a=r.toString;return Y(function(){n.apply(n,D(arguments))},{def:n.def,entry:n,exit:r,save:t,set:function(e,r,i){t(e,r),n(e,r,"=",i,";")},toString:function(){return i()+a()}})}var n=0,r=[],i=[],a=e(),o={};return{global:a,link:function(e){for(var t=0;t<i.length;++t)if(i[t]===e)return r[t];return t="g"+n++,r.push(t),i.push(e),t},block:e,proc:function(e,n){function r(){var e="a"+i.length;return i.push(e),e}var i=[];n=n||0;for(var a=0;a<n;++a)r();var a=t(),s=a.toString;return o[e]=Y(a,{arg:r,toString:function(){return N(["function(",i.join(),"){",s(),"}"])}})},scope:t,cond:function(){var e=N(arguments),n=t(),r=t(),i=n.toString,a=r.toString;return Y(n,{then:function(){return n.apply(n,D(arguments)),this},else:function(){return r.apply(r,D(arguments)),this},toString:function(){var t=a();return t&&(t="else{"+t+"}"),N(["if(",e,"){",i(),"}",t])}})},compile:function(){var e=['"use strict";',a,"return {"];Object.keys(o).forEach(function(t){e.push('"',t,'":',o[t].toString(),",")}),e.push("}");var t=N(e).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,r.concat(t)).apply(null,i)}}}function j(e){return Array.isArray(e)||$(e)||c(e)}function B(e){return e.sort(function(e,t){return"viewport"===e?-1:"viewport"===t?1:e<t?-1:1})}function U(e,t,n,r){this.thisDep=e,this.contextDep=t,this.propDep=n,this.append=r}function V(e){return e&&!(e.thisDep||e.contextDep||e.propDep)}function H(e){return new U(!1,!1,!1,e)}function W(e,t){var n=e.type;return 0===n?(n=e.data.length,new U(!0,1<=n,2<=n,t)):4===n?(n=e.data,new U(n.thisDep,n.contextDep,n.propDep,t)):new U(3===n,2===n,1===n,t)}function q(e,t,n,r,i,a,o,s,l,u,c,f,h,p,m){function g(e){return e.replace(".","_")}function y(e,t,n){var r=g(e);de.push(e),ue[r]=le[r]=!!n,fe[r]=t}function v(e,t,n){var r=g(e);de.push(e),Array.isArray(n)?(le[r]=n.slice(),ue[r]=n.slice()):le[r]=ue[r]=n,he[r]=t}function _(){var e=F(),n=e.link,r=e.global;e.id=ge++,e.batchId="0";var i=n(pe),a=e.shared={props:"a0"};Object.keys(pe).forEach(function(e){a[e]=r.def(i,".",e)});var o=e.next={},s=e.current={};Object.keys(he).forEach(function(e){Array.isArray(le[e])&&(o[e]=r.def(a.next,".",e),s[e]=r.def(a.current,".",e))});var l=e.constants={};Object.keys(me).forEach(function(e){l[e]=r.def(JSON.stringify(me[e]))}),e.invoke=function(t,r){switch(r.type){case 0:var i=["this",a.context,a.props,e.batchId];return t.def(n(r.data),".call(",i.slice(0,Math.max(r.data.length+1,4)),")");case 1:return t.def(a.props,r.data);case 2:return t.def(a.context,r.data);case 3:return t.def("this",r.data);case 4:return r.data.append(e,t),r.data.ref}},e.attribCache={};var c={};return e.scopeAttrib=function(e){if((e=t.id(e))in c)return c[e];var r=u.scope[e];return r||(r=u.scope[e]=new re),c[e]=n(r)},e}function b(e){var t=e.static;e=e.dynamic;var n;if("profile"in t){var r=!!t.profile;n=H(function(e,t){return r}),n.enable=r}else if("profile"in e){var i=e.profile;n=W(i,function(e,t){return e.invoke(t,i)})}return n}function x(e,t){var n=e.static,r=e.dynamic;if("framebuffer"in n){var i=n.framebuffer;return i?(i=s.getFramebuffer(i),H(function(e,t){var n=e.link(i),r=e.shared;return t.set(r.framebuffer,".next",n),r=r.context,t.set(r,".framebufferWidth",n+".width"),t.set(r,".framebufferHeight",n+".height"),n})):H(function(e,t){var n=e.shared;return t.set(n.framebuffer,".next","null"),n=n.context,t.set(n,".framebufferWidth",n+".drawingBufferWidth"),t.set(n,".framebufferHeight",n+".drawingBufferHeight"),"null"})}if("framebuffer"in r){var a=r.framebuffer;return W(a,function(e,t){var n=e.invoke(t,a),r=e.shared,i=r.framebuffer,n=t.def(i,".getFramebuffer(",n,")");return t.set(i,".next",n),r=r.context,t.set(r,".framebufferWidth",n+"?"+n+".width:"+r+".drawingBufferWidth"),t.set(r,".framebufferHeight",n+"?"+n+".height:"+r+".drawingBufferHeight"),n})}return null}function w(e,t,n){function r(e){if(e in i){var n=i[e];e=!0;var r,o,s=0|n.x,l=0|n.y;return"width"in n?r=0|n.width:e=!1,"height"in n?o=0|n.height:e=!1,new U(!e&&t&&t.thisDep,!e&&t&&t.contextDep,!e&&t&&t.propDep,function(e,t){var i=e.shared.context,a=r;"width"in n||(a=t.def(i,".","framebufferWidth","-",s));var u=o;return"height"in n||(u=t.def(i,".","framebufferHeight","-",l)),[s,l,a,u]})}if(e in a){var u=a[e];return e=W(u,function(e,t){var n=e.invoke(t,u),r=e.shared.context,i=t.def(n,".x|0"),a=t.def(n,".y|0"),o=t.def('"width" in ',n,"?",n,".width|0:","(",r,".","framebufferWidth","-",i,")"),n=t.def('"height" in ',n,"?",n,".height|0:","(",r,".","framebufferHeight","-",a,")");return[i,a,o,n]}),t&&(e.thisDep=e.thisDep||t.thisDep,e.contextDep=e.contextDep||t.contextDep,e.propDep=e.propDep||t.propDep),e}return t?new U(t.thisDep,t.contextDep,t.propDep,function(e,t){var n=e.shared.context;return[0,0,t.def(n,".","framebufferWidth"),t.def(n,".","framebufferHeight")]}):null}var i=e.static,a=e.dynamic;if(e=r("viewport")){var o=e;e=new U(e.thisDep,e.contextDep,e.propDep,function(e,t){var n=o.append(e,t),r=e.shared.context;return t.set(r,".viewportWidth",n[2]),t.set(r,".viewportHeight",n[3]),n})}return{viewport:e,scissor_box:r("scissor.box")}}function T(e){function n(e){if(e in r){var n=t.id(r[e]);return e=H(function(){return n}),e.id=n,e}if(e in i){var a=i[e];return W(a,function(e,t){var n=e.invoke(t,a);return t.def(e.shared.strings,".id(",n,")")})}return null}var r=e.static,i=e.dynamic,a=n("frag"),o=n("vert"),s=null;return V(a)&&V(o)?(s=c.program(o.id,a.id),e=H(function(e,t){return e.link(s)})):e=new U(a&&a.thisDep||o&&o.thisDep,a&&a.contextDep||o&&o.contextDep,a&&a.propDep||o&&o.propDep,function(e,t){var n,r=e.shared.shader;n=a?a.append(e,t):t.def(r,".","frag");var i;return i=o?o.append(e,t):t.def(r,".","vert"),t.def(r+".program("+i+","+n+")")}),{frag:a,vert:o,progVar:e,program:s}}function M(e,t){function n(e,t){if(e in r){var n=0|r[e];return H(function(e,r){return t&&(e.OFFSET=n),n})}if(e in i){var a=i[e];return W(a,function(e,n){var r=e.invoke(n,a);return t&&(e.OFFSET=r),r})}return t&&o?H(function(e,t){return e.OFFSET="0",0}):null}var r=e.static,i=e.dynamic,o=function(){if("elements"in r){var e=r.elements;j(e)?e=a.getElements(a.create(e,!0)):e&&(e=a.getElements(e));var t=H(function(t,n){if(e){var r=t.link(e);return t.ELEMENTS=r}return t.ELEMENTS=null});return t.value=e,t}if("elements"in i){var n=i.elements;return W(n,function(e,t){var r=e.shared,i=r.isBufferArgs,r=r.elements,a=e.invoke(t,n),o=t.def("null"),i=t.def(i,"(",a,")"),a=e.cond(i).then(o,"=",r,".createStream(",a,");").else(o,"=",r,".getElements(",a,");");return t.entry(a),t.exit(e.cond(i).then(r,".destroyStream(",o,");")),e.ELEMENTS=o})}return null}(),s=n("offset",!0);return{elements:o,primitive:function(){if("primitive"in r){var e=r.primitive;return H(function(t,n){return ce[e]})}if("primitive"in i){var t=i.primitive;return W(t,function(e,n){var r=e.constants.primTypes,i=e.invoke(n,t);return n.def(r,"[",i,"]")})}return o?V(o)?H(o.value?function(e,t){return t.def(e.ELEMENTS,".primType")}:function(){return 4}):new U(o.thisDep,o.contextDep,o.propDep,function(e,t){var n=e.ELEMENTS;return t.def(n,"?",n,".primType:",4)}):null}(),count:function(){if("count"in r){var e=0|r.count;return H(function(){return e})}if("count"in i){var t=i.count;return W(t,function(e,n){return e.invoke(n,t)})}return o?V(o)?o?s?new U(s.thisDep,s.contextDep,s.propDep,function(e,t){return t.def(e.ELEMENTS,".vertCount-",e.OFFSET)}):H(function(e,t){return t.def(e.ELEMENTS,".vertCount")}):H(function(){return-1}):new U(o.thisDep||s.thisDep,o.contextDep||s.contextDep,o.propDep||s.propDep,function(e,t){var n=e.ELEMENTS;return e.OFFSET?t.def(n,"?",n,".vertCount-",e.OFFSET,":-1"):t.def(n,"?",n,".vertCount:-1")}):null}(),instances:n("instances",!1),offset:s}}function A(e,t){var n=e.static,r=e.dynamic,i={};return de.forEach(function(e){function t(t,o){if(e in n){var s=t(n[e]);i[a]=H(function(){return s})}else if(e in r){var l=r[e];i[a]=W(l,function(e,t){return o(e,t,e.invoke(t,l))})}}var a=g(e);switch(e){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return t(function(e){return e},function(e,t,n){return n});case"depth.func":return t(function(e){return Ae[e]},function(e,t,n){return t.def(e.constants.compareFuncs,"[",n,"]")});case"depth.range":return t(function(e){return e},function(e,t,n){return e=t.def("+",n,"[0]"),t=t.def("+",n,"[1]"),[e,t]});case"blend.func":return t(function(e){return[Me["srcRGB"in e?e.srcRGB:e.src],Me["dstRGB"in e?e.dstRGB:e.dst],Me["srcAlpha"in e?e.srcAlpha:e.src],Me["dstAlpha"in e?e.dstAlpha:e.dst]]},function(e,t,n){function r(e,r){return t.def('"',e,r,'" in ',n,"?",n,".",e,r,":",n,".",e)}e=e.constants.blendFuncs;var i=r("src","RGB"),a=r("dst","RGB"),i=t.def(e,"[",i,"]"),o=t.def(e,"[",r("src","Alpha"),"]"),a=t.def(e,"[",a,"]");return e=t.def(e,"[",r("dst","Alpha"),"]"),[i,a,o,e]});case"blend.equation":return t(function(e){return"string"===typeof e?[ie[e],ie[e]]:"object"===typeof e?[ie[e.rgb],ie[e.alpha]]:void 0},function(e,t,n){var r=e.constants.blendEquations,i=t.def(),a=t.def();return e=e.cond("typeof ",n,'==="string"'),e.then(i,"=",a,"=",r,"[",n,"];"),e.else(i,"=",r,"[",n,".rgb];",a,"=",r,"[",n,".alpha];"),t(e),[i,a]});case"blend.color":return t(function(e){return d(4,function(t){return+e[t]})},function(e,t,n){return d(4,function(e){return t.def("+",n,"[",e,"]")})});case"stencil.mask":return t(function(e){return 0|e},function(e,t,n){return t.def(n,"|0")});case"stencil.func":return t(function(e){return[Ae[e.cmp||"keep"],e.ref||0,"mask"in e?e.mask:-1]},function(e,t,n){e=t.def('"cmp" in ',n,"?",e.constants.compareFuncs,"[",n,".cmp]",":",7680);var r=t.def(n,".ref|0");return t=t.def('"mask" in ',n,"?",n,".mask|0:-1"),[e,r,t]});case"stencil.opFront":case"stencil.opBack":return t(function(t){return["stencil.opBack"===e?1029:1028,Ce[t.fail||"keep"],Ce[t.zfail||"keep"],Ce[t.zpass||"keep"]]},function(t,n,r){function i(e){return n.def('"',e,'" in ',r,"?",a,"[",r,".",e,"]:",7680)}var a=t.constants.stencilOps;return["stencil.opBack"===e?1029:1028,i("fail"),i("zfail"),i("zpass")]});case"polygonOffset.offset":return t(function(e){return[0|e.factor,0|e.units]},function(e,t,n){return e=t.def(n,".factor|0"),t=t.def(n,".units|0"),[e,t]});case"cull.face":return t(function(e){var t=0;return"front"===e?t=1028:"back"===e&&(t=1029),t},function(e,t,n){return t.def(n,'==="front"?',1028,":",1029)});case"lineWidth":return t(function(e){return e},function(e,t,n){return n});case"frontFace":return t(function(e){return Se[e]},function(e,t,n){return t.def(n+'==="cw"?2304:2305')});case"colorMask":return t(function(e){return e.map(function(e){return!!e})},function(e,t,n){return d(4,function(e){return"!!"+n+"["+e+"]"})});case"sample.coverage":return t(function(e){return["value"in e?e.value:1,!!e.invert]},function(e,t,n){return e=t.def('"value" in ',n,"?+",n,".value:1"),t=t.def("!!",n,".invert"),[e,t]})}}),i}function C(e,t){var n=e.static,r=e.dynamic,i={};return Object.keys(n).forEach(function(e){var t,r=n[e];if("number"===typeof r||"boolean"===typeof r)t=H(function(){return r});else if("function"===typeof r){var a=r._reglType;"texture2d"===a||"textureCube"===a?t=H(function(e){return e.link(r)}):"framebuffer"!==a&&"framebufferCube"!==a||(t=H(function(e){return e.link(r.color[0])}))}else k(r)&&(t=H(function(e){return e.global.def("[",d(r.length,function(e){return r[e]}),"]")}));t.value=r,i[e]=t}),Object.keys(r).forEach(function(e){var t=r[e];i[e]=W(t,function(e,n){return e.invoke(n,t)})}),i}function S(e,n){var r=e.static,a=e.dynamic,o={};return Object.keys(r).forEach(function(e){var n=r[e],a=t.id(e),s=new re;if(j(n))s.state=1,s.buffer=i.getBuffer(i.create(n,34962,!1,!0)),s.type=0;else{var l=i.getBuffer(n);if(l)s.state=1,s.buffer=l,s.type=0;else if(n.constant){var u=n.constant;s.buffer="null",s.state=2,"number"===typeof u?s.x=u:ke.forEach(function(e,t){t<u.length&&(s[e]=u[t])})}else{var l=j(n.buffer)?i.getBuffer(i.create(n.buffer,34962,!1,!0)):i.getBuffer(n.buffer),c=0|n.offset,d=0|n.stride,f=0|n.size,h=!!n.normalized,p=0;"type"in n&&(p=ae[n.type]),n=0|n.divisor,s.buffer=l,s.state=1,s.size=f,s.normalized=h,s.type=p||l.dtype,s.offset=c,s.stride=d,s.divisor=n}}o[e]=H(function(e,t){var n=e.attribCache;if(a in n)return n[a];var r={isStream:!1};return Object.keys(s).forEach(function(e){r[e]=s[e]}),s.buffer&&(r.buffer=e.link(s.buffer),r.type=r.type||r.buffer+".dtype"),n[a]=r})}),Object.keys(a).forEach(function(e){var t=a[e];o[e]=W(t,function(e,n){function r(e){n(l[e],"=",i,".",e,"|0;")}var i=e.invoke(n,t),a=e.shared,o=a.isBufferArgs,s=a.buffer,l={isStream:n.def(!1)},u=new re;u.state=1,Object.keys(u).forEach(function(e){l[e]=n.def(""+u[e])});var c=l.buffer,d=l.type;return n("if(",o,"(",i,")){",l.isStream,"=true;",c,"=",s,".createStream(",34962,",",i,");",d,"=",c,".dtype;","}else{",c,"=",s,".getBuffer(",i,");","if(",c,"){",d,"=",c,".dtype;",'}else if("constant" in ',i,"){",l.state,"=",2,";","if(typeof "+i+'.constant === "number"){',l[ke[0]],"=",i,".constant;",ke.slice(1).map(function(e){return l[e]}).join("="),"=0;","}else{",ke.map(function(e,t){return l[e]+"="+i+".constant.length>="+t+"?"+i+".constant["+t+"]:0;"}).join(""),"}}else{","if(",o,"(",i,".buffer)){",c,"=",s,".createStream(",34962,",",i,".buffer);","}else{",c,"=",s,".getBuffer(",i,".buffer);","}",d,'="type" in ',i,"?",a.glTypes,"[",i,".type]:",c,".dtype;",l.normalized,"=!!",i,".normalized;"),r("size"),r("offset"),r("stride"),r("divisor"),n("}}"),n.exit("if(",l.isStream,"){",s,".destroyStream(",c,");","}"),l})}),o}function E(e){var t=e.static,n=e.dynamic,r={};return Object.keys(t).forEach(function(e){var n=t[e];r[e]=H(function(e,t){return"number"===typeof n||"boolean"===typeof n?""+n:e.link(n)})}),Object.keys(n).forEach(function(e){var t=n[e];r[e]=W(t,function(e,n){return e.invoke(n,t)})}),r}function P(e,t,n,r,i){var a=x(e,i),o=w(e,a,i),s=M(e,i),l=A(e,i),u=T(e,i),c=o.viewport;return c&&(l.viewport=c),c=g("scissor.box"),(o=o[c])&&(l[c]=o),o=0<Object.keys(l).length,a={framebuffer:a,draw:s,shader:u,state:l,dirty:o},a.profile=b(e,i),a.uniforms=C(n,i),a.attributes=S(t,i),a.context=E(r,i),a}function I(e,t,n){var r=e.shared.context,i=e.scope();Object.keys(n).forEach(function(a){t.save(r,"."+a),i(r,".",a,"=",n[a].append(e,t),";")}),t(i)}function L(e,t,n,r){var i,a=e.shared,o=a.gl,s=a.framebuffer;se&&(i=t.def(a.extensions,".webgl_draw_buffers"));var l=e.constants,a=l.drawBuffer,l=l.backBuffer;e=n?n.append(e,t):t.def(s,".next"),r||t("if(",e,"!==",s,".cur){"),t("if(",e,"){",o,".bindFramebuffer(",36160,",",e,".framebuffer);"),se&&t(i,".drawBuffersWEBGL(",a,"[",e,".colorAttachments.length]);"),t("}else{",o,".bindFramebuffer(",36160,",null);"),se&&t(i,".drawBuffersWEBGL(",l,");"),t("}",s,".cur=",e,";"),r||t("}")}function O(e,t,n){var r=e.shared,i=r.gl,a=e.current,o=e.next,s=r.current,l=r.next,u=e.cond(s,".dirty");de.forEach(function(t){if(!((t=g(t))in n.state)){var r,c;if(t in o){r=o[t],c=a[t];var f=d(le[t].length,function(e){return u.def(r,"[",e,"]")});u(e.cond(f.map(function(e,t){return e+"!=="+c+"["+t+"]"}).join("||")).then(i,".",he[t],"(",f,");",f.map(function(e,t){return c+"["+t+"]="+e}).join(";"),";"))}else r=u.def(l,".",t),f=e.cond(r,"!==",s,".",t),u(f),t in fe?f(e.cond(r).then(i,".enable(",fe[t],");").else(i,".disable(",fe[t],");"),s,".",t,"=",r,";"):f(i,".",he[t],"(",r,");",s,".",t,"=",r,";")}}),0===Object.keys(n.state).length&&u(s,".dirty=false;"),t(u)}function z(e,t,n,r){var i=e.shared,a=e.current,o=i.current,s=i.gl;B(Object.keys(n)).forEach(function(i){var l=n[i];if(!r||r(l)){var u=l.append(e,t);if(fe[i]){var c=fe[i];V(l)?u?t(s,".enable(",c,");"):t(s,".disable(",c,");"):t(e.cond(u).then(s,".enable(",c,");").else(s,".disable(",c,");")),t(o,".",i,"=",u,";")}else if(k(u)){var d=a[i];t(s,".",he[i],"(",u,");",u.map(function(e,t){return d+"["+t+"]="+e}).join(";"),";")}else t(s,".",he[i],"(",u,");",o,".",i,"=",u,";")}})}function R(e,t){oe&&(e.instancing=t.def(e.shared.extensions,".angle_instanced_arrays"))}function D(e,t,n,r,i){function a(){return"undefined"===typeof performance?"Date.now()":"performance.now()"}function o(e){h=t.def(),e(h,"=",a(),";"),"string"===typeof i?e(c,".count+=",i,";"):e(c,".count++;"),p&&(r?(m=t.def(),e(m,"=",f,".getNumPendingQueries();")):e(f,".beginQuery(",c,");"))}function s(e){e(c,".cpuTime+=",a(),"-",h,";"),p&&(r?e(f,".pushScopeStats(",m,",",f,".getNumPendingQueries(),",c,");"):e(f,".endQuery();"))}function l(e){var n=t.def(d,".profile");t(d,".profile=",e,";"),t.exit(d,".profile=",n,";")}var u=e.shared,c=e.stats,d=u.current,f=u.timer;n=n.profile;var h,m;if(n){if(V(n))return void(n.enable?(o(t),s(t.exit),l("true")):l("false"));n=n.append(e,t),l(n)}else n=t.def(d,".profile");u=e.block(),o(u),t("if(",n,"){",u,"}"),e=e.block(),s(e),t.exit("if(",n,"){",e,"}")}function N(e,t,n,r,i){function a(e){switch(e){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function o(n,r,i){function a(){t("if(!",c,".buffer){",l,".enableVertexAttribArray(",u,");}");var n,a=i.type;n=i.size?t.def(i.size,"||",r):r,t("if(",c,".type!==",a,"||",c,".size!==",n,"||",h.map(function(e){return c+"."+e+"!=="+i[e]}).join("||"),"){",l,".bindBuffer(",34962,",",d,".buffer);",l,".vertexAttribPointer(",[u,n,a,i.normalized,i.stride,i.offset],");",c,".type=",a,";",c,".size=",n,";",h.map(function(e){return c+"."+e+"="+i[e]+";"}).join(""),"}"),oe&&(a=i.divisor,t("if(",c,".divisor!==",a,"){",e.instancing,".vertexAttribDivisorANGLE(",[u,a],");",c,".divisor=",a,";}"))}function o(){t("if(",c,".buffer){",l,".disableVertexAttribArray(",u,");","}if(",ke.map(function(e,t){return c+"."+e+"!=="+f[t]}).join("||"),"){",l,".vertexAttrib4f(",u,",",f,");",ke.map(function(e,t){return c+"."+e+"="+f[t]+";"}).join(""),"}")}var l=s.gl,u=t.def(n,".location"),c=t.def(s.attributes,"[",u,"]");n=i.state;var d=i.buffer,f=[i.x,i.y,i.z,i.w],h=["buffer","normalized","offset","stride"];1===n?a():2===n?o():(t("if(",n,"===",1,"){"),a(),t("}else{"),o(),t("}"))}var s=e.shared;r.forEach(function(r){var s,l=r.name,u=n.attributes[l];if(u){if(!i(u))return;s=u.append(e,t)}else{if(!i(Ee))return;var c=e.scopeAttrib(l);s={},Object.keys(new re).forEach(function(e){s[e]=t.def(c,".",e)})}o(e.link(r),a(r.info.type),s)})}function q(e,n,r,i,a){for(var o,s=e.shared,l=s.gl,u=0;u<i.length;++u){var c,f=i[u],h=f.name,p=f.info.type,m=r.uniforms[h],f=e.link(f)+".location";if(m){if(!a(m))continue;if(V(m)){if(h=m.value,35678===p||35680===p)p=e.link(h._texture||h.color[0]._texture),n(l,".uniform1i(",f,",",p+".bind());"),n.exit(p,".unbind();");else if(35674===p||35675===p||35676===p)h=e.global.def("new Float32Array(["+Array.prototype.slice.call(h)+"])"),m=2,35675===p?m=3:35676===p&&(m=4),n(l,".uniformMatrix",m,"fv(",f,",false,",h,");");else{switch(p){case 5126:o="1f";break;case 35664:o="2f";break;case 35665:o="3f";break;case 35666:o="4f";break;case 35670:case 5124:o="1i";break;case 35671:case 35667:o="2i";break;case 35672:case 35668:o="3i";break;case 35673:o="4i";break;case 35669:o="4i"}n(l,".uniform",o,"(",f,",",k(h)?Array.prototype.slice.call(h):h,");")}continue}c=m.append(e,n)}else{if(!a(Ee))continue;c=n.def(s.uniforms,"[",t.id(h),"]")}switch(35678===p?n("if(",c,"&&",c,'._reglType==="framebuffer"){',c,"=",c,".color[0];","}"):35680===p&&n("if(",c,"&&",c,'._reglType==="framebufferCube"){',c,"=",c,".color[0];","}"),h=1,p){case 35678:case 35680:p=n.def(c,"._texture"),n(l,".uniform1i(",f,",",p,".bind());"),n.exit(p,".unbind();");continue;case 5124:case 35670:o="1i";break;case 35667:case 35671:o="2i",h=2;break;case 35668:case 35672:o="3i",h=3;break;case 35669:case 35673:o="4i",h=4;break;case 5126:o="1f";break;case 35664:o="2f",h=2;break;case 35665:o="3f",h=3;break;case 35666:o="4f",h=4;break;case 35674:o="Matrix2fv";break;case 35675:o="Matrix3fv";break;case 35676:o="Matrix4fv"}if(n(l,".uniform",o,"(",f,","),"M"===o.charAt(0)){var f=Math.pow(p-35674+2,2),g=e.global.def("new Float32Array(",f,")");n("false,(Array.isArray(",c,")||",c," instanceof Float32Array)?",c,":(",d(f,function(e){return g+"["+e+"]="+c+"["+e+"]"}),",",g,")")}else n(1<h?d(h,function(e){return c+"["+e+"]"}):c);n(");")}}function G(e,t,n,r){function i(i){var a=c[i];return a?a.contextDep&&r.contextDynamic||a.propDep?a.append(e,n):a.append(e,t):t.def(u,".",i)}function a(){function e(){n(g,".drawElementsInstancedANGLE(",[f,p,y,h+"<<(("+y+"-5121)>>1)",m],");")}function t(){n(g,".drawArraysInstancedANGLE(",[f,h,p,m],");")}d?v?e():(n("if(",d,"){"),e(),n("}else{"),t(),n("}")):t()}function o(){function e(){n(l+".drawElements("+[f,p,y,h+"<<(("+y+"-5121)>>1)"]+");")}function t(){n(l+".drawArrays("+[f,h,p]+");")}d?v?e():(n("if(",d,"){"),e(),n("}else{"),t(),n("}")):t()}var s=e.shared,l=s.gl,u=s.draw,c=r.draw,d=function(){var i=c.elements,a=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(a=n),i=i.append(e,a)):i=a.def(u,".","elements"),i&&a("if("+i+")"+l+".bindBuffer(34963,"+i+".buffer.buffer);"),i}(),f=i("primitive"),h=i("offset"),p=function(){var i=c.count,a=t;return i?((i.contextDep&&r.contextDynamic||i.propDep)&&(a=n),i=i.append(e,a)):i=a.def(u,".","count"),i}();if("number"===typeof p){if(0===p)return}else n("if(",p,"){"),n.exit("}");var m,g;oe&&(m=i("instances"),g=e.instancing);var y=d+".type",v=c.elements&&V(c.elements);oe&&("number"!==typeof m||0<=m)?"string"===typeof m?(n("if(",m,">0){"),a(),n("}else if(",m,"<0){"),o(),n("}")):a():o()}function Y(e,t,n,r,i){return t=_(),i=t.proc("body",i),oe&&(t.instancing=i.def(t.shared.extensions,".angle_instanced_arrays")),e(t,i,n,r),t.compile().body}function X(e,t,n,r){R(e,t),N(e,t,n,r.attributes,function(){return!0}),q(e,t,n,r.uniforms,function(){return!0}),G(e,t,t,n)}function J(e,t){var n=e.proc("draw",1);R(e,n),I(e,n,t.context),L(e,n,t.framebuffer),O(e,n,t),z(e,n,t.state),D(e,n,t,!1,!0);var r=t.shader.progVar.append(e,n);if(n(e.shared.gl,".useProgram(",r,".program);"),t.shader.program)X(e,n,t,t.shader.program);else{var i=e.global.def("{}"),a=n.def(r,".id"),o=n.def(i,"[",a,"]");n(e.cond(o).then(o,".call(this,a0);").else(o,"=",i,"[",a,"]=",e.link(function(n){return Y(X,e,t,n,1)}),"(",r,");",o,".call(this,a0);"))}0<Object.keys(t.state).length&&n(e.shared.current,".dirty=true;")}function K(e,t,n,r){function i(){return!0}e.batchId="a1",R(e,t),N(e,t,n,r.attributes,i),q(e,t,n,r.uniforms,i),G(e,t,t,n)}function Q(e,t,n,r){function i(e){return e.contextDep&&o||e.propDep}function a(e){return!i(e)}R(e,t);var o=n.contextDep,s=t.def(),l=t.def();e.shared.props=l,e.batchId=s;var u=e.scope(),c=e.scope();t(u.entry,"for(",s,"=0;",s,"<","a1",";++",s,"){",l,"=","a0","[",s,"];",c,"}",u.exit),n.needsContext&&I(e,c,n.context),n.needsFramebuffer&&L(e,c,n.framebuffer),z(e,c,n.state,i),n.profile&&i(n.profile)&&D(e,c,n,!1,!0),r?(N(e,u,n,r.attributes,a),N(e,c,n,r.attributes,i),q(e,u,n,r.uniforms,a),q(e,c,n,r.uniforms,i),G(e,u,c,n)):(t=e.global.def("{}"),r=n.shader.progVar.append(e,c),l=c.def(r,".id"),u=c.def(t,"[",l,"]"),c(e.shared.gl,".useProgram(",r,".program);","if(!",u,"){",u,"=",t,"[",l,"]=",e.link(function(t){return Y(K,e,n,t,2)}),"(",r,");}",u,".call(this,a0[",s,"],",s,");"))}function $(e,t){function n(e){return e.contextDep&&i||e.propDep}var r=e.proc("batch",2);e.batchId="0",R(e,r);var i=!1,a=!0;Object.keys(t.context).forEach(function(e){i=i||t.context[e].propDep}),i||(I(e,r,t.context),a=!1);var o=t.framebuffer,s=!1;if(o?(o.propDep?i=s=!0:o.contextDep&&i&&(s=!0),s||L(e,r,o)):L(e,r,null),t.state.viewport&&t.state.viewport.propDep&&(i=!0),O(e,r,t),z(e,r,t.state,function(e){return!n(e)}),t.profile&&n(t.profile)||D(e,r,t,!1,"a1"),t.contextDep=i,t.needsContext=a,t.needsFramebuffer=s,a=t.shader.progVar,a.contextDep&&i||a.propDep)Q(e,r,t,null);else if(a=a.append(e,r),r(e.shared.gl,".useProgram(",a,".program);"),t.shader.program)Q(e,r,t,t.shader.program);else{var o=e.global.def("{}"),s=r.def(a,".id"),l=r.def(o,"[",s,"]");r(e.cond(l).then(l,".call(this,a0,a1);").else(l,"=",o,"[",s,"]=",e.link(function(n){return Y(Q,e,t,n,2)}),"(",a,");",l,".call(this,a0,a1);"))}0<Object.keys(t.state).length&&r(e.shared.current,".dirty=true;")}function ee(e,n){function r(t){var r=n.shader[t];r&&i.set(a.shader,"."+t,r.append(e,i))}var i=e.proc("scope",3);e.batchId="a2";var a=e.shared,o=a.current;I(e,i,n.context),n.framebuffer&&n.framebuffer.append(e,i),B(Object.keys(n.state)).forEach(function(t){var r=n.state[t].append(e,i);k(r)?r.forEach(function(n,r){i.set(e.next[t],"["+r+"]",n)}):i.set(a.next,"."+t,r)}),D(e,i,n,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(t){var r=n.draw[t];r&&i.set(a.draw,"."+t,""+r.append(e,i))}),Object.keys(n.uniforms).forEach(function(r){i.set(a.uniforms,"["+t.id(r)+"]",n.uniforms[r].append(e,i))}),Object.keys(n.attributes).forEach(function(t){var r=n.attributes[t].append(e,i),a=e.scopeAttrib(t);Object.keys(new re).forEach(function(e){i.set(a,"."+e,r[e])})}),r("vert"),r("frag"),0<Object.keys(n.state).length&&(i(o,".dirty=true;"),i.exit(o,".dirty=true;")),i("a1(",e.shared.context,",a0,",e.batchId,");")}function te(e){if("object"===typeof e&&!k(e)){for(var t=Object.keys(e),n=0;n<t.length;++n)if(Z.isDynamic(e[t[n]]))return!0;return!1}}function ne(e,t,n){function r(e,t){o.forEach(function(n){var r=i[n];Z.isDynamic(r)&&(r=e.invoke(t,r),t(c,".",n,"=",r,";"))})}var i=t.static[n];if(i&&te(i)){var a=e.global,o=Object.keys(i),s=!1,l=!1,u=!1,c=e.global.def("{}");o.forEach(function(t){var n=i[t];if(Z.isDynamic(n))"function"===typeof n&&(n=i[t]=Z.unbox(n)),t=W(n,null),s=s||t.thisDep,u=u||t.propDep,l=l||t.contextDep;else{switch(a(c,".",t,"="),typeof n){case"number":a(n);break;case"string":a('"',n,'"');break;case"object":Array.isArray(n)&&a("[",n.join(),"]");break;default:a(e.link(n))}a(";")}}),t.dynamic[n]=new Z.DynamicVariable(4,{thisDep:s,contextDep:l,propDep:u,ref:c,append:r}),delete t.static[n]}}var re=u.Record,ie={add:32774,subtract:32778,"reverse subtract":32779};n.ext_blend_minmax&&(ie.min=32775,ie.max=32776);var oe=n.angle_instanced_arrays,se=n.webgl_draw_buffers,le={dirty:!0,profile:m.profile},ue={},de=[],fe={},he={};y("dither",3024),y("blend.enable",3042),v("blend.color","blendColor",[0,0,0,0]),v("blend.equation","blendEquationSeparate",[32774,32774]),v("blend.func","blendFuncSeparate",[1,0,1,0]),y("depth.enable",2929,!0),v("depth.func","depthFunc",513),v("depth.range","depthRange",[0,1]),v("depth.mask","depthMask",!0),v("colorMask","colorMask",[!0,!0,!0,!0]),y("cull.enable",2884),v("cull.face","cullFace",1029),v("frontFace","frontFace",2305),v("lineWidth","lineWidth",1),y("polygonOffset.enable",32823),v("polygonOffset.offset","polygonOffset",[0,0]),y("sample.alpha",32926),y("sample.enable",32928),v("sample.coverage","sampleCoverage",[1,!1]),y("stencil.enable",2960),v("stencil.mask","stencilMask",-1),v("stencil.func","stencilFunc",[519,0,-1]),v("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),v("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),y("scissor.enable",3089),v("scissor.box","scissor",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]),v("viewport","viewport",[0,0,e.drawingBufferWidth,e.drawingBufferHeight]);var pe={gl:e,context:h,strings:t,next:ue,current:le,draw:f,elements:a,buffer:i,shader:c,attributes:u.state,uniforms:l,framebuffer:s,extensions:n,timer:p,isBufferArgs:j},me={primTypes:ce,compareFuncs:Ae,blendFuncs:Me,blendEquations:ie,stencilOps:Ce,glTypes:ae,orientationType:Se};se&&(me.backBuffer=[1029],me.drawBuffer=d(r.maxDrawbuffers,function(e){return 0===e?[0]:d(e,function(e){return 36064+e})}));var ge=0;return{next:ue,current:le,procs:function(){var t=_(),n=t.proc("poll"),i=t.proc("refresh"),a=t.block();n(a),i(a);var o=t.shared,s=o.gl,l=o.next,u=o.current;a(u,".dirty=false;"),L(t,n),L(t,i,null,!0);var c,f=e.getExtension("angle_instanced_arrays");f&&(c=t.link(f));for(var h=0;h<r.maxAttributes;++h){var p=i.def(o.attributes,"[",h,"]"),m=t.cond(p,".buffer");m.then(s,".enableVertexAttribArray(",h,");",s,".bindBuffer(",34962,",",p,".buffer.buffer);",s,".vertexAttribPointer(",h,",",p,".size,",p,".type,",p,".normalized,",p,".stride,",p,".offset);").else(s,".disableVertexAttribArray(",h,");",s,".vertexAttrib4f(",h,",",p,".x,",p,".y,",p,".z,",p,".w);",p,".buffer=null;"),i(m),f&&i(c,".vertexAttribDivisorANGLE(",h,",",p,".divisor);")}return Object.keys(fe).forEach(function(e){var r=fe[e],o=a.def(l,".",e),c=t.block();c("if(",o,"){",s,".enable(",r,")}else{",s,".disable(",r,")}",u,".",e,"=",o,";"),i(c),n("if(",o,"!==",u,".",e,"){",c,"}")}),Object.keys(he).forEach(function(e){var r,o,c=he[e],f=le[e],h=t.block();h(s,".",c,"("),k(f)?(c=f.length,r=t.global.def(l,".",e),o=t.global.def(u,".",e),h(d(c,function(e){return r+"["+e+"]"}),");",d(c,function(e){return o+"["+e+"]="+r+"["+e+"];"}).join("")),n("if(",d(c,function(e){return r+"["+e+"]!=="+o+"["+e+"]"}).join("||"),"){",h,"}")):(r=a.def(l,".",e),o=a.def(u,".",e),h(r,");",u,".",e,"=",r,";"),n("if(",r,"!==",o,"){",h,"}")),i(h)}),t.compile()}(),compile:function(e,t,n,r,i){var a=_();return a.stats=a.link(i),Object.keys(t.static).forEach(function(e){ne(a,t,e)}),Te.forEach(function(t){ne(a,e,t)}),n=P(e,t,n,r,a),J(a,n),ee(a,n),$(a,n),a.compile()}}}function G(e,t){for(var n=0;n<e.length;++n)if(e[n]===t)return n;return-1}var Y=function(e,t){for(var n=Object.keys(t),r=0;r<n.length;++r)e[n[r]]=t[n[r]];return e},X=0,Z={DynamicVariable:e,define:function(t,r){return new e(t,n(r+""))},isDynamic:function(t){return"function"===typeof t&&!t._reglType||t instanceof e},unbox:function(t,n){return"function"===typeof t?new e(0,t):t},accessor:n},J={next:"function"===typeof requestAnimationFrame?function(e){return requestAnimationFrame(e)}:function(e){return setTimeout(e,16)},cancel:"function"===typeof cancelAnimationFrame?function(e){return cancelAnimationFrame(e)}:clearTimeout},K="undefined"!==typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},Q=function(e,t){var n=1;t.ext_texture_filter_anisotropic&&(n=e.getParameter(34047));var r=1,i=1;return t.webgl_draw_buffers&&(r=e.getParameter(34852),i=e.getParameter(36063)),{colorBits:[e.getParameter(3410),e.getParameter(3411),e.getParameter(3412),e.getParameter(3413)],depthBits:e.getParameter(3414),stencilBits:e.getParameter(3415),subpixelBits:e.getParameter(3408),extensions:Object.keys(t).filter(function(e){return!!t[e]}),maxAnisotropic:n,maxDrawbuffers:r,maxColorAttachments:i,pointSizeDims:e.getParameter(33901),lineWidthDims:e.getParameter(33902),maxViewportDims:e.getParameter(3386),maxCombinedTextureUnits:e.getParameter(35661),maxCubeMapSize:e.getParameter(34076),maxRenderbufferSize:e.getParameter(34024),maxTextureUnits:e.getParameter(34930),maxTextureSize:e.getParameter(3379),maxAttributes:e.getParameter(34921),maxVertexUniforms:e.getParameter(36347),maxVertexTextureUnits:e.getParameter(35660),maxVaryingVectors:e.getParameter(36348),maxFragmentUniforms:e.getParameter(36349),glsl:e.getParameter(35724),renderer:e.getParameter(7937),vendor:e.getParameter(7936),version:e.getParameter(7938)}},$=function(e){return e instanceof Uint8Array||e instanceof Uint16Array||e instanceof Uint32Array||e instanceof Int8Array||e instanceof Int16Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array||e instanceof Uint8ClampedArray},ee=function(e){return Object.keys(e).map(function(t){return e[t]})},te=d(8,function(){return[]}),ne={alloc:h,free:p,allocType:function(e,t){var n=null;switch(e){case 5120:n=new Int8Array(h(t),0,t);break;case 5121:n=new Uint8Array(h(t),0,t);break;case 5122:n=new Int16Array(h(2*t),0,t);break;case 5123:n=new Uint16Array(h(2*t),0,t);break;case 5124:n=new Int32Array(h(4*t),0,t);break;case 5125:n=new Uint32Array(h(4*t),0,t);break;case 5126:n=new Float32Array(h(4*t),0,t);break;default:return null}return n.length!==t?n.subarray(0,t):n},freeType:function(e){p(e.buffer)}},re={shape:function(e){for(var t=[];e.length;e=e[0])t.push(e.length);return t},flatten:function(e,t,n,r){var i=1;if(t.length)for(var a=0;a<t.length;++a)i*=t[a];else i=0;switch(n=r||ne.allocType(n,i),t.length){case 0:break;case 1:for(r=t[0],t=0;t<r;++t)n[t]=e[t];break;case 2:for(r=t[0],t=t[1],a=i=0;a<r;++a)for(var o=e[a],s=0;s<t;++s)n[i++]=o[s];break;case 3:m(e,t[0],t[1],t[2],n,0);break;default:g(e,t,0,n,0)}return n}},ie={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},oe={dynamic:35048,stream:35040,static:35044},se=re.flatten,le=re.shape,ue=[];ue[5120]=1,ue[5122]=2,ue[5124]=4,ue[5121]=1,ue[5123]=2,ue[5125]=4,ue[5126]=4;var ce={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},de=new Float32Array(1),fe=new Uint32Array(de.buffer),he=[9984,9986,9985,9987],pe=[0,6409,6410,6407,6408],me={};me[6409]=me[6406]=me[6402]=1,me[34041]=me[6410]=2,me[6407]=me[35904]=3,me[6408]=me[35906]=4;var ge=Object.keys(ie).concat(["[object HTMLCanvasElement]","[object CanvasRenderingContext2D]","[object HTMLImageElement]","[object HTMLVideoElement]"]),ye=[];ye[5121]=1,ye[5126]=4,ye[36193]=2,ye[5123]=2,ye[5125]=4;var ve=[];ve[32854]=2,ve[32855]=2,ve[36194]=2,ve[34041]=4,ve[33776]=.5,ve[33777]=.5,ve[33778]=1,ve[33779]=1,ve[35986]=.5,ve[35987]=1,ve[34798]=1,ve[35840]=.5,ve[35841]=.25,ve[35842]=.5,ve[35843]=.25,ve[36196]=.5;var _e=[];_e[32854]=2,_e[32855]=2,_e[36194]=2,_e[33189]=2,_e[36168]=1,_e[34041]=4,_e[35907]=4,_e[34836]=16,_e[34842]=8,_e[34843]=6;var be=function(e,t,n,r,i){function a(e){this.id=u++,this.refCount=1,this.renderbuffer=e,this.format=32854,this.height=this.width=0,i.profile&&(this.stats={size:0})}function o(t){var n=t.renderbuffer;e.bindRenderbuffer(36161,null),e.deleteRenderbuffer(n),t.renderbuffer=null,t.refCount=0,delete c[t.id],r.renderbufferCount--}var s={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};t.ext_srgb&&(s.srgba=35907),t.ext_color_buffer_half_float&&(s.rgba16f=34842,s.rgb16f=34843),t.webgl_color_buffer_float&&(s.rgba32f=34836);var l=[];Object.keys(s).forEach(function(e){l[s[e]]=e});var u=0,c={};return a.prototype.decRef=function(){0>=--this.refCount&&o(this)},i.profile&&(r.getTotalRenderbufferSize=function(){var e=0;return Object.keys(c).forEach(function(t){e+=c[t].stats.size}),e}),{create:function(t,n){function o(t,n){var r=0,a=0,c=32854;if("object"===typeof t&&t?("shape"in t?(a=t.shape,r=0|a[0],a=0|a[1]):("radius"in t&&(r=a=0|t.radius),"width"in t&&(r=0|t.width),"height"in t&&(a=0|t.height)),"format"in t&&(c=s[t.format])):"number"===typeof t?(r=0|t,a="number"===typeof n?0|n:r):t||(r=a=1),r!==u.width||a!==u.height||c!==u.format)return o.width=u.width=r,o.height=u.height=a,u.format=c,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,c,r,a),i.profile&&(u.stats.size=_e[u.format]*u.width*u.height),o.format=l[u.format],o}var u=new a(e.createRenderbuffer());return c[u.id]=u,r.renderbufferCount++,o(t,n),o.resize=function(t,n){var r=0|t,a=0|n||r;return r===u.width&&a===u.height?o:(o.width=u.width=r,o.height=u.height=a,e.bindRenderbuffer(36161,u.renderbuffer),e.renderbufferStorage(36161,u.format,r,a),i.profile&&(u.stats.size=_e[u.format]*u.width*u.height),o)},o._reglType="renderbuffer",o._renderbuffer=u,i.profile&&(o.stats=u.stats),o.destroy=function(){u.decRef()},o},clear:function(){ee(c).forEach(o)},restore:function(){ee(c).forEach(function(t){t.renderbuffer=e.createRenderbuffer(),e.bindRenderbuffer(36161,t.renderbuffer),e.renderbufferStorage(36161,t.format,t.width,t.height)}),e.bindRenderbuffer(36161,null)}}},xe=[];xe[6408]=4;var we=[];we[5121]=1,we[5126]=4,we[36193]=2;var ke=["x","y","z","w"],Te="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Me={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},Ae={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Ce={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Se={cw:2304,ccw:2305},Ee=new U(!1,!1,!1,function(){}),Pe=function(e,t){function n(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function r(e,t,r){var i=s.pop()||new n;i.startQueryIndex=e,i.endQueryIndex=t,i.sum=0,i.stats=r,l.push(i)}var i=t.ext_disjoint_timer_query;if(!i)return null;var a=[],o=[],s=[],l=[],u=[],c=[];return{beginQuery:function(e){var t=a.pop()||i.createQueryEXT();i.beginQueryEXT(35007,t),o.push(t),r(o.length-1,o.length,e)},endQuery:function(){i.endQueryEXT(35007)},pushScopeStats:r,update:function(){var e,t;if(0!==(e=o.length)){c.length=Math.max(c.length,e+1),u.length=Math.max(u.length,e+1),u[0]=0;var n=c[0]=0;for(t=e=0;t<o.length;++t){var r=o[t];i.getQueryObjectEXT(r,34919)?(n+=i.getQueryObjectEXT(r,34918),a.push(r)):o[e++]=r,u[t+1]=n,c[t+1]=e}for(o.length=e,t=e=0;t<l.length;++t){var n=l[t],d=n.startQueryIndex,r=n.endQueryIndex;n.sum+=u[r]-u[d],d=c[d],r=c[r],r===d?(n.stats.gpuTime+=n.sum/1e6,s.push(n)):(n.startQueryIndex=d,n.endQueryIndex=r,l[e++]=n)}l.length=e}},getNumPendingQueries:function(){return o.length},clear:function(){a.push.apply(a,o);for(var e=0;e<a.length;e++)i.deleteQueryEXT(a[e]);o.length=0,a.length=0},restore:function(){o.length=0,a.length=0}}};return function(e){function t(){if(0===W.length)T&&T.update(),te=null;else{te=J.next(t),h();for(var e=W.length-1;0<=e;--e){var n=W[e];n&&n(S,null,0)}g.flush(),T&&T.update()}}function n(){!te&&0<W.length&&(te=J.next(t))}function i(){te&&(J.cancel(t),te=null)}function a(e){e.preventDefault(),i(),X.forEach(function(e){e()})}function o(e){g.getError(),v.restore(),N.restore(),L.restore(),F.restore(),j.restore(),B.restore(),T&&T.restore(),U.procs.refresh(),n(),$.forEach(function(e){e()})}function s(e){function t(e){var t={},n={};return Object.keys(e).forEach(function(r){var i=e[r];Z.isDynamic(i)?n[r]=Z.unbox(i,r):t[r]=i}),{dynamic:n,static:t}}function n(e){for(;c.length<e;)c.push(null);return c}var r=t(e.context||{}),i=t(e.uniforms||{}),a=t(e.attributes||{}),o=t(function(e){function t(e){if(e in n){var t=n[e];delete n[e],Object.keys(t).forEach(function(r){n[e+"."+r]=t[r]})}}var n=Y({},e);return delete n.uniforms,delete n.attributes,delete n.context,"stencil"in n&&n.stencil.op&&(n.stencil.opBack=n.stencil.opFront=n.stencil.op,delete n.stencil.op),t("blend"),t("depth"),t("cull"),t("stencil"),t("polygonOffset"),t("scissor"),t("sample"),n}(e));e={gpuTime:0,cpuTime:0,count:0};var r=U.compile(o,a,i,r,e),s=r.draw,l=r.batch,u=r.scope,c=[];return Y(function(e,t){var r;if("function"===typeof e)return u.call(this,null,e,0);if("function"===typeof t)if("number"===typeof e)for(r=0;r<e;++r)u.call(this,null,t,r);else{if(!Array.isArray(e))return u.call(this,e,t,0);for(r=0;r<e.length;++r)u.call(this,e[r],t,r)}else if("number"===typeof e){if(0<e)return l.call(this,n(0|e),0|e)}else{if(!Array.isArray(e))return s.call(this,e);if(e.length)return l.call(this,e,e.length)}},{stats:e})}function c(e,t){var n=0;U.procs.poll();var r=t.color;r&&(g.clearColor(+r[0]||0,+r[1]||0,+r[2]||0,+r[3]||0),n|=16384),"depth"in t&&(g.clearDepth(+t.depth),n|=256),"stencil"in t&&(g.clearStencil(0|t.stencil),n|=1024),g.clear(n)}function d(e){return W.push(e),n(),{cancel:function(){function t(){var e=G(W,t);W[e]=W[W.length-1],0>=--W.length&&i()}var n=G(W,e);W[n]=t}}}function f(){var e=V.viewport,t=V.scissor_box;e[0]=e[1]=t[0]=t[1]=0,S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=e[2]=t[2]=g.drawingBufferWidth,S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=e[3]=t[3]=g.drawingBufferHeight}function h(){S.tick+=1,S.time=m(),f(),U.procs.poll()}function p(){f(),U.procs.refresh(),T&&T.update()}function m(){return(K()-M)/1e3}if(!(e=l(e)))return null;var g=e.gl,y=g.getContextAttributes();g.isContextLost();var v=u(g,e);if(!v)return null;var _=r(),w={bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},k=v.extensions,T=Pe(0,k),M=K(),A=g.drawingBufferWidth,C=g.drawingBufferHeight,S={tick:0,time:0,viewportWidth:A,viewportHeight:C,framebufferWidth:A,framebufferHeight:C,drawingBufferWidth:A,drawingBufferHeight:C,pixelRatio:e.pixelRatio},E=Q(g,k),L=b(g,w,e),D=x(g,k,L,w),A=O(g,k,E,L,_),N=z(g,_,w,e),F=P(g,k,E,function(){U.procs.poll()},S,w,e),j=be(g,k,0,w,e),B=I(g,k,E,F,j,w),U=q(g,_,k,E,L,D,F,B,{},A,N,{elements:null,primitive:4,count:-1,offset:0,instances:-1},S,T,e),_=R(g,B,U.procs.poll,S,y,k),V=U.next,H=g.canvas,W=[],X=[],$=[],ee=[e.onDestroy],te=null;H&&(H.addEventListener("webglcontextlost",a,!1),H.addEventListener("webglcontextrestored",o,!1));var ne=B.setFBO=s({framebuffer:Z.define.call(null,1,"framebuffer")});return p(),y=Y(s,{clear:function(e){if("framebuffer"in e)if(e.framebuffer&&"framebufferCube"===e.framebuffer_reglType)for(var t=0;6>t;++t)ne(Y({framebuffer:e.framebuffer.faces[t]},e),c);else ne(e,c);else c(null,e)},prop:Z.define.bind(null,1),context:Z.define.bind(null,2),this:Z.define.bind(null,3),draw:s({}),buffer:function(e){return L.create(e,34962,!1,!1)},elements:function(e){return D.create(e,!1)},texture:F.create2D,cube:F.createCube,renderbuffer:j.create,framebuffer:B.create,framebufferCube:B.createCube,attributes:y,frame:d,on:function(e,t){var n;switch(e){case"frame":return d(t);case"lost":n=X;break;case"restore":n=$;break;case"destroy":n=ee}return n.push(t),{cancel:function(){for(var e=0;e<n.length;++e)if(n[e]===t){n[e]=n[n.length-1],n.pop();break}}}},limits:E,hasExtension:function(e){return 0<=E.extensions.indexOf(e.toLowerCase())},read:_,destroy:function(){W.length=0,i(),H&&(H.removeEventListener("webglcontextlost",a),H.removeEventListener("webglcontextrestored",o)),N.clear(),B.clear(),j.clear(),F.clear(),D.clear(),L.clear(),T&&T.clear(),ee.forEach(function(e){e()})},_gl:g,_refresh:p,poll:function(){h(),T&&T.update()},now:m,stats:w}),e.onDone(null,y),y}}),T1=T1.exports;var M1={keyFun:function(e){return e.key},repeat:Mx,descend:qS,wrap:Mx,unwrap:function(e){return e[0]}},A1={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,scatter:!1,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,bar:{width:4,capturewidth:10,fillcolor:"magenta",fillopacity:1,strokecolor:"white",strokeopacity:1,strokewidth:1,handleheight:16,handleopacity:1,handleoverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}},C1=OW(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // visible coloring\n    float clampedColorIndex = clamp((prominence - colorClamp[0]) / (colorClamp[1] - colorClamp[0]), 0.0, 1.0);\n    fragColor = texture2D(palette, vec2((clampedColorIndex * 255.0 + 0.5) / 256.0, 0.5));\n}\n"]),S1=OW(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 p0, p1, p2, p3,\n               p4, p5, p6, p7,\n               p8, p9, pa, pb,\n               pc, pd, pe;\n\nattribute vec4 pf;\n\nuniform mat4 dim1A, dim2A, dim1B, dim2B, dim1C, dim2C, dim1D, dim2D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution,\n             viewBoxPosition,\n             viewBoxSize;\n\nuniform sampler2D palette;\n\nuniform vec2 colorClamp;\n\nuniform float scatter;\n\nvarying vec4 fragColor;\n\nvec4 zero = vec4(0, 0, 0, 0);\nvec4 unit = vec4(1, 1, 1, 1);\nvec2 xyProjection = vec2(1, 1);\n\nmat4 mclamp(mat4 m, mat4 lo, mat4 hi) {\n    return mat4(clamp(m[0], lo[0], hi[0]),\n                clamp(m[1], lo[1], hi[1]),\n                clamp(m[2], lo[2], hi[2]),\n                clamp(m[3], lo[3], hi[3]));\n}\n\nbool mshow(mat4 p, mat4 lo, mat4 hi) {\n    return mclamp(p, lo, hi) == p;\n}\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * unit, unit);\n}\n\nvoid main() {\n\n    float x = 0.5 * sign(pf[3]) + 0.5;\n    float prominence = abs(pf[3]);\n    float depth = 1.0 - prominence;\n\n    mat4 pA = mat4(p0, p1, p2, p3);\n    mat4 pB = mat4(p4, p5, p6, p7);\n    mat4 pC = mat4(p8, p9, pa, pb);\n    mat4 pD = mat4(pc, pd, pe, abs(pf));\n\n    float show = float(mshow(pA, loA, hiA) &&\n                       mshow(pB, loB, hiB) &&\n                       mshow(pC, loC, hiC) &&\n                       mshow(pD, loD, hiD));\n\n    vec2 yy = show * vec2(val(pA, dim2A) + val(pB, dim2B) + val(pC, dim2C) + val(pD, dim2D),\n                          val(pA, dim1A) + val(pB, dim1B) + val(pC, dim1C) + val(pD, dim1D));\n\n    vec2 dimensionToggle = vec2(x, 1.0 - x);\n\n    vec2 scatterToggle = vec2(scatter, 1.0 - scatter);\n\n    float y = dot(yy, dimensionToggle);\n    mat2 xy = mat2(viewBoxSize * yy + dimensionToggle, viewBoxSize * vec2(x, y));\n\n    vec2 viewBoxXY = viewBoxPosition + xy * scatterToggle;\n\n    float depthOrHide = depth + 2.0 * (1.0 - show);\n\n    gl_Position = vec4(\n        xyProjection * (2.0 * viewBoxXY / resolution - 1.0),\n        depthOrHide,\n        1.0\n    );\n\n    // pick coloring\n    fragColor = vec4(pf.rgb, 1.0);\n}\n"]),E1=OW(["precision lowp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),P1=1e-6,I1=64,L1=2,O1=4,z1=[119,119,119],R1=new Uint8Array(4),D1=new Uint8Array(4),N1=function(e,t,n){function r(e){z[0]=e[0],z[1]=e[1]}function i(e,t,n,r,i,a,o,s,l,c,f){var m,g,y,_,b=[e,t],w=A1.verticalPadding/a,k=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})}),T=[0,1].map(function(){return[0,1,2,3].map(function(){return new Float32Array(16)})});for(m=0;m<2;m++)for(_=b[m],g=0;g<4;g++)for(y=0;y<16;y++){var M=y+16*g;k[m][g][y]=y+16*g===_?1:0,T[m][g][y]=(!v&&Rx(y,16*g,S)?x[0===M?0:1+(M-1)%(x.length-1)].filter[m]:m)+(2*m-1)*w}return{key:o,resolution:[h,p],viewBoxPosition:[n+C,r],viewBoxSize:[i,a],i:e,ii:t,dim1A:k[0][0],dim1B:k[0][1],dim1C:k[0][2],dim1D:k[0][3],dim2A:k[1][0],dim2B:k[1][1],dim2C:k[1][2],dim2D:k[1][3],loA:T[0][0],loB:T[0][1],loC:T[0][2],loD:T[0][3],hiA:T[1][0],hiB:T[1][1],hiC:T[1][2],hiD:T[1][3],colorClamp:z,scatter:s||0,scissorX:(l===c?0:n+C)+(u.pad.l-C)+u.layoutWidth*d.x[0],scissorWidth:(l===f?h-n+C:i+.5)+(l===c?n+C:0),scissorY:r+u.pad.b+u.layoutHeight*d.y[0],scissorHeight:a,viewportX:u.pad.l-C+u.layoutWidth*d.x[0],viewportY:u.pad.b+u.layoutHeight*d.y[0],viewportWidth:h,viewportHeight:p}}function a(e,t,r){var a,o,s,l=1/0,u=-1/0;for(a=0;a<S;a++)e[a].dim2.canvasX>u&&(u=e[a].dim2.canvasX,s=a),e[a].dim1.canvasX<l&&(l=e[a].dim1.canvasX,o=a);for(0===S&&Cx(I,0,0,h,p),a=0;a<S;a++){var c=e[a],d=c.dim1,m=d.crossfilterDimensionIndex,g=c.canvasX,y=c.canvasY,v=c.dim2,_=v.crossfilterDimensionIndex,x=c.panelSizeX,w=c.panelSizeY,T=g+x;if(t||!R[m]||R[m][0]!==g||R[m][1]!==T){R[m]=[g,T];var M=i(m,_,g,y,x,w,d.crossfilterDimensionIndex,n||d.scatter?1:0,a,o,s);b.clearOnly=r,Sx(I,O,b,t?f.blockLineCount:k,k,M)}}}function o(e,t){return I.read({x:e,y:t,width:1,height:1,data:D1}),D1}function s(e,t,n,r){var i=new Uint8Array(4*n*r);return I.read({x:e,y:t,width:n,height:r,data:i}),i}function l(){e.style["pointer-events"]="none",L.destroy()}var u=t.model,c=t.viewModel,d=u.domain,f=u.lines,h=u.canvasWidth,p=u.canvasHeight,m=c.dimensions,g=c.panels,y=u.unitToColor,v=t.context,_=t.pick,b={currentRafs:{},drawCompleted:!0,clearOnly:!1},x=m.slice(),w=x.length,k=x[0]?x[0].values.length:0,T=v,M=_?f.color.map(function(e,t){return t/f.color.length}):f.color,A=Math.max(1/255,Math.pow(1/M.length,1/3)),C=f.canvasOverdrag,S=g.length,E=Lx(k,w,x,M),P=zx(k,E),I=t.regl,L=I.texture({shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest",data:Px(y,v,Math.round(255*(v?A:1)))}),O=I({profile:!1,blend:{enable:T,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!T,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:I.prop("scissorX"),y:I.prop("scissorY"),width:I.prop("scissorWidth"),height:I.prop("scissorHeight")}},viewport:{x:I.prop("viewportX"),y:I.prop("viewportY"),width:I.prop("viewportWidth"),height:I.prop("viewportHeight")},dither:!1,vert:_?S1:C1,frag:E1,primitive:"lines",lineWidth:1,attributes:P,uniforms:{resolution:I.prop("resolution"),viewBoxPosition:I.prop("viewBoxPosition"),viewBoxSize:I.prop("viewBoxSize"),dim1A:I.prop("dim1A"),dim2A:I.prop("dim2A"),dim1B:I.prop("dim1B"),dim2B:I.prop("dim2B"),dim1C:I.prop("dim1C"),dim2C:I.prop("dim2C"),dim1D:I.prop("dim1D"),dim2D:I.prop("dim2D"),loA:I.prop("loA"),hiA:I.prop("hiA"),loB:I.prop("loB"),hiB:I.prop("hiB"),loC:I.prop("loC"),hiC:I.prop("hiC"),loD:I.prop("loD"),hiD:I.prop("hiD"),palette:L,colorClamp:I.prop("colorClamp"),scatter:I.prop("scatter")},offset:I.prop("offset"),count:I.prop("count")}),z=[0,1],R=[];return{setColorDomain:r,render:a,readPixel:o,readPixels:s,destroy:l}},F1=M1.keyFun,j1=M1.repeat,B1=M1.unwrap,U1=function(e,t,n,r,i,a){function o(e){var t=e.selectAll("defs").data(j1,F1);t.enter().append("defs");var n=t.selectAll("#"+A1.id.filterBarPattern).data(j1,F1);n.enter().append("pattern").attr("id",A1.id.filterBarPattern).attr("patternUnits","userSpaceOnUse"),n.attr("x",-A1.bar.width).attr("width",A1.bar.capturewidth).attr("height",function(e){return e.model.height});var r=n.selectAll("rect").data(j1,F1);r.enter().append("rect").attr("shape-rendering","crispEdges"),r.attr("height",function(e){return e.model.height}).attr("width",A1.bar.width).attr("x",A1.bar.width/2).attr("fill",A1.bar.fillcolor).attr("fill-opacity",A1.bar.fillopacity).attr("stroke",A1.bar.strokecolor).attr("stroke-opacity",A1.bar.strokeopacity).attr("stroke-width",A1.bar.strokewidth)}function s(e){return e.dimensions.some(function(e){return 0!==e.filter[0]||1!==e.filter[1]})}function l(e,t){for(var n=t.panels||(t.panels=[]),r=e.each(function(e){return e})[t.key].map(function(e){return e.__data__}),i=r.length-1,a=0;a<1;a++)for(var o=0;o<i;o++){var s=n[o+a*i]||(n[o+a*i]={}),l=r[o],u=r[o+1];s.dim1=l,s.dim2=u,s.canvasX=l.canvasX,s.panelSizeX=u.canvasX-l.canvasX,s.panelSizeY=t.model.canvasHeight/1,s.y=a*s.panelSizeY,s.canvasY=t.model.canvasHeight-s.y-s.panelSizeY}}function u(e,t){for(var n=t.panels||(t.panels=[]),r=e.each(function(e){return e})[t.key].map(function(e){return e.__data__}),i=r.length-1,a=i,o=0;o<i;o++)for(var s=0;s<i;s++){var l=n[s+o*i]||(n[s+o*i]={}),u=r[s],c=r[s+1];l.dim1=r[o+1],l.dim2=c,l.canvasX=u.canvasX,l.panelSizeX=c.canvasX-u.canvasX,l.panelSizeY=t.model.canvasHeight/a,l.y=o*l.panelSizeY,l.canvasY=t.model.canvasHeight-l.y-l.panelSizeY}}function c(e,t){return(A1.scatter?u:l)(e,t)}function d(e){return e.ordinal?function(){return""}:CC.format(e.tickFormat)}function f(){R=!0,m=!0}function h(e){g=!1;var t=e.parent,n=e.brush.extent(),r=t.dimensions,i=r[e.xIndex].filter,a=R&&n[0]===n[1];a&&(e.brush.clear(),CC.select(this).select("rect.extent").attr("y",-100));var o=a?[0,1]:n.slice();if(o[0]!==i[0]||o[1]!==i[1]){r[e.xIndex].filter=o,t.focusLayer&&t.focusLayer.render(t.panels,!0);var l=s(t);!D&&l?(t.contextLayer&&t.contextLayer.render(t.panels,!0),D=!0):D&&!l&&(t.contextLayer&&t.contextLayer.render(t.panels,!0,!0),D=!1)}R=!1}function p(e){var t=e.parent,n=e.brush.extent(),r=n[0]===n[1],i=t.dimensions,o=i[e.xIndex].filter;if(!r&&e.ordinal&&(o[0]=Fx(e.ordinalScale,o[0]),o[1]=Fx(e.ordinalScale,o[1]),o[0]===o[1]&&(o[0]=Math.max(0,o[0]-.05),o[1]=Math.min(1,o[1]+.05)),CC.select(this).transition().duration(150).call(e.brush.extent(o)),t.focusLayer.render(t.panels,!0)),t.pickLayer&&t.pickLayer.render(t.panels,!0),g=!0,m="ending",a&&a.filterChanged){var s=e.domainToUnitScale.invert,l=o.map(s);a.filterChanged(t.key,e.visibleIndex,l)}}var m=!1,g=!0,y=r.filter(function(e){return B1(e).trace.visible}).map(qx.bind(0,i)).map(Gx);n.each(function(e,t){return uE.extendFlat(e,y[t])});var v=n.selectAll(".gl-canvas").each(function(e){e.viewModel=y[0],e.model=e.viewModel?e.viewModel.model:null}),_={renderers:[],dimensions:[]},b=null;v.filter(function(e){return e.pick}).style("pointer-events","auto").on("mousemove",function(e){if(g&&e.lineLayer&&a&&a.hover){var t=CC.event,n=this.width,r=this.height,i=CC.mouse(this),o=i[0],s=i[1];if(o<0||s<0||o>=n||s>=r)return;var l=e.lineLayer.readPixel(o,r-1-s),u=0!==l[3],c=u?l[2]+256*(l[1]+256*l[0]):null,d={x:o,y:s,clientX:t.clientX,clientY:t.clientY,dataIndex:e.model.key,curveNumber:c};c!==b&&(u?a.hover(d):a.unhover&&a.unhover(d),b=c)}}),v.style("opacity",function(e){return e.pick?.01:1}),t.style("background","rgba(255, 255, 255, 0)");var x=t.selectAll("."+A1.cn.parcoords).data(y,F1);x.exit().remove(),x.enter().append("g").classed(A1.cn.parcoords,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","none").call(o),x.attr("width",function(e){return e.model.width+e.model.pad.l+e.model.pad.r}).attr("height",function(e){return e.model.height+e.model.pad.t+e.model.pad.b}).attr("transform",function(e){return"translate("+e.model.translateX+","+e.model.translateY+")"});var w=x.selectAll("."+A1.cn.parcoordsControlView).data(j1,F1);w.enter().append("g").classed(A1.cn.parcoordsControlView,!0).style("box-sizing","content-box"),w.attr("transform",function(e){return"translate("+e.model.pad.l+","+e.model.pad.t+")"});var k=w.selectAll("."+A1.cn.yAxis).data(function(e){return e.dimensions},F1);k.enter().append("g").classed(A1.cn.yAxis,!0).each(function(e){_.dimensions.push(e)}),w.each(function(e){c(k,e)}),v.filter(function(e){return!!e.viewModel}).each(function(e){e.lineLayer=N1(this,e,A1.scatter),e.viewModel[e.key]=e.lineLayer,_.renderers.push(function(){e.lineLayer.render(e.viewModel.panels,!0)}),e.lineLayer.render(e.viewModel.panels,!e.context)}),k.attr("transform",function(e){return"translate("+e.xScale(e.xIndex)+", 0)"}),k.call(CC.behavior.drag().origin(function(e){return e}).on("drag",function(e){var t=e.parent;g=!1,m||(e.x=Math.max(-A1.overdrag,Math.min(e.model.width+A1.overdrag,CC.event.x)),e.canvasX=e.x*e.model.canvasPixelRatio,k.sort(function(e,t){return e.x-t.x}).each(function(t,n){t.xIndex=n,t.x=e===t?t.x:t.xScale(t.xIndex),t.canvasX=t.x*t.model.canvasPixelRatio}),c(k,t),k.filter(function(t){return 0!==Math.abs(e.xIndex-t.xIndex)}).attr("transform",function(e){return"translate("+e.xScale(e.xIndex)+", 0)"}),CC.select(this).attr("transform","translate("+e.x+", 0)"),k.each(function(n,r,i){i===e.parent.key&&(t.dimensions[r]=n)}),t.contextLayer&&t.contextLayer.render(t.panels,!1,!s(t)),t.focusLayer.render&&t.focusLayer.render(t.panels))}).on("dragend",function(e){var t=e.parent;if(m)return void("ending"===m&&(m=!1));e.x=e.xScale(e.xIndex),e.canvasX=e.x*e.model.canvasPixelRatio,c(k,t),CC.select(this).attr("transform",function(e){return"translate("+e.x+", 0)"}),t.contextLayer&&t.contextLayer.render(t.panels,!1,!s(t)),t.focusLayer&&t.focusLayer.render(t.panels),t.pickLayer&&t.pickLayer.render(t.panels,!0),g=!0,a&&a.axesMoved&&a.axesMoved(t.key,t.dimensions.map(function(e){return e.crossfilterDimensionIndex}))})),k.exit().remove();var T=k.selectAll("."+A1.cn.axisOverlays).data(j1,F1);T.enter().append("g").classed(A1.cn.axisOverlays,!0),T.selectAll("."+A1.cn.axis).remove();var M=T.selectAll("."+A1.cn.axis).data(j1,F1);M.enter().append("g").classed(A1.cn.axis,!0),M.each(function(e){var t=e.model.height/e.model.tickDistance,n=e.domainScale,r=n.domain();CC.select(this).call(CC.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(t,e.tickFormat).tickValues(e.ordinal?r:null).tickFormat(e.ordinal?function(e){return e}:null).scale(n)),PP.font(M.selectAll("text"),e.model.tickFont)}),M.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),M.selectAll("text").style("text-shadow","1px 1px 1px #fff, -1px -1px 1px #fff, 1px -1px 1px #fff, -1px 1px 1px #fff").style("cursor","default").style("user-select","none");var A=T.selectAll("."+A1.cn.axisHeading).data(j1,F1);A.enter().append("g").classed(A1.cn.axisHeading,!0);var C=A.selectAll("."+A1.cn.axisTitle).data(j1,F1);C.enter().append("text").classed(A1.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("user-select","none").style("pointer-events","auto"),C.attr("transform","translate(0,"+-A1.axisTitleOffset+")").text(function(e){return e.label}).each(function(e){PP.font(C,e.model.labelFont)});var S=T.selectAll("."+A1.cn.axisExtent).data(j1,F1);S.enter().append("g").classed(A1.cn.axisExtent,!0);var E=S.selectAll("."+A1.cn.axisExtentTop).data(j1,F1);E.enter().append("g").classed(A1.cn.axisExtentTop,!0),E.attr("transform","translate(0,"+-A1.axisExtentOffset+")");var P=E.selectAll("."+A1.cn.axisExtentTopText).data(j1,F1);P.enter().append("text").classed(A1.cn.axisExtentTopText,!0).call(Yx),P.text(function(e){return d(e)(e.domainScale.domain().slice(-1)[0])}).each(function(e){PP.font(P,e.model.rangeFont)});var I=S.selectAll("."+A1.cn.axisExtentBottom).data(j1,F1);I.enter().append("g").classed(A1.cn.axisExtentBottom,!0),I.attr("transform",function(e){return"translate(0,"+(e.model.height+A1.axisExtentOffset)+")"});var L=I.selectAll("."+A1.cn.axisExtentBottomText).data(j1,F1);L.enter().append("text").classed(A1.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(Yx),L.text(function(e){return d(e)(e.domainScale.domain()[0])}).each(function(e){PP.font(L,e.model.rangeFont)});var O=T.selectAll("."+A1.cn.axisBrush).data(j1,F1),z=O.enter().append("g").classed(A1.cn.axisBrush,!0);O.each(function(e){e.brush||(e.brush=CC.svg.brush().y(e.unitScale).on("brushstart",f).on("brush",h).on("brushend",p),0===e.filter[0]&&1===e.filter[1]||e.brush.extent(e.filter),CC.select(this).call(e.brush))}),z.selectAll("rect").attr("x",-A1.bar.capturewidth/2).attr("width",A1.bar.capturewidth),z.selectAll("rect.extent").attr("fill","url(#"+A1.id.filterBarPattern+")").style("cursor","ns-resize").filter(function(e){return 0===e.filter[0]&&1===e.filter[1]}).attr("y",-100),z.selectAll(".resize rect").attr("height",A1.bar.handleheight).attr("opacity",0).style("visibility","visible"),z.selectAll(".resize.n rect").style("cursor","n-resize").attr("y",A1.bar.handleoverlap-A1.bar.handleheight),z.selectAll(".resize.s rect").style("cursor","s-resize").attr("y",A1.bar.handleoverlap);var R=!1,D=!1;return _},V1={};(function(e){"use strict";V1=function(t,n){var r=t._fullLayout,i=r._toppaper,a=(r._paperdiv,r._glcontainer);r._glcanvas.each(function(n){n.regl||(n.regl=T1({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||e.devicePixelRatio}))});var o={},s={},l=r._size;n.forEach(function(e,n){o[n]=t.data[n].dimensions,s[n]=t.data[n].dimensions.slice()});var u=function(e,n,r){var i=s[e][n],a=i.constraintrange;a&&2===a.length||(a=i.constraintrange=[]),a[0]=r[0],a[1]=r[1],t.emit("plotly_restyle")},c=function(e){t.emit("plotly_hover",e)},d=function(e){t.emit("plotly_unhover",e)},f=function(e,n){function r(e){return!("visible"in e)||e.visible}function i(e,t,n){var r=t.indexOf(n),i=e.indexOf(r);return-1===i&&(i+=t.length),i}var a=function(e){return function(t,r){return i(n,e,t)-i(n,e,r)}}(s[e].filter(r));o[e].sort(a),s[e].filter(function(e){return!r(e)}).sort(function(t){return s[e].indexOf(t)}).forEach(function(t){o[e].splice(o[e].indexOf(t),1),o[e].splice(s[e].indexOf(t),0,t)}),t.emit("plotly_restyle")};U1(0,i,a,n,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},{filterChanged:u,hover:c,unhover:d,axesMoved:f})}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var H1={},W1=_L.getModuleCalcData;H1.name="parcoords",H1.plot=function(e){var t=W1(e.calcdata,"parcoords");t.length&&V1(e,t)},H1.clean=function(e,t,n,r){var i=r._has&&r._has("parcoords"),a=t._has&&t._has("parcoords");i&&!a&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},H1.toSVG=function(e){function t(){var e=this,t=e.toDataURL("image/png");n.append("svg:image").attr({xmlns:aP.svg,"xlink:href":t,preserveAspectRatio:"none",x:0,y:0,width:e.width,height:e.height})}var n=e._fullLayout._glimages,r=CC.select(e).selectAll(".svg-container");r.filter(function(e,t){return t===r.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(t),window.setTimeout(function(){CC.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)};var q1=M1.wrap,G1=function(e,t){var n=!!t.line.colorscale&&uE.isArrayOrTypedArray(t.line.color),r=n?t.line.color:Xx(t._commonLength),i=n?t.line.colorscale:[[0,t.line.color],[1,t.line.color]];return eP(t,"line")&&WE(t,r,"line","c"),q1({lineColor:r,cscale:i})},Y1=function(e,t){var n=t[0].trace,r=n.line,i="cb"+n.uid;if(e._fullLayout._infolayer.selectAll("."+i).remove(),void 0===r||!r.showscale)return void lI.autoMargin(e,i);var a=r.color,o=r.cmin,s=r.cmax;SC(o)||(o=uE.aggNums(Math.min,null,a)),SC(s)||(s=uE.aggNums(Math.max,null,a));var l=t[0].t.cb=GO(e,i),u=nP.makeColorScaleFunc(nP.extractScale(r.colorscale,o,s),{noNumericCheck:!0});l.fillcolor(u).filllevels({start:o,end:s,size:(s-o)/254}).options(r.colorbar)()},X1=A1.maxDimensionCount,Z1=qD.defaults,J1=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,k1,n,r)}var a=Jx(e,t);Zx(e,t,n,r,i),Z1(t,r,i),Array.isArray(a)&&a.length||(t.visible=!1);for(var o=0;o<a.length;o++)a[o].visible&&(a[o]._length=t._commonLength);var s={family:r.font.family,size:Math.round(r.font.size/1.2),color:r.font.color};uE.coerceFont(i,"labelfont",s),uE.coerceFont(i,"tickfont",s),uE.coerceFont(i,"rangefont",s)},K1={};K1.attributes=k1,K1.supplyDefaults=J1,K1.calc=G1,K1.plot=V1,K1.colorbar=Y1,K1.moduleType="trace",K1.name="parcoords",K1.basePlotModule=H1,K1.categories=["gl","regl","noOpacity"],K1.meta={};var Q1=K1,$1=Q1,e2=qD.attributes,t2=WC.extendFlat,n2=KC({editType:"calc",colorEditType:"style"}),r2={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:eS.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:t2({},$C.hoverinfo,{flags:["label","text","value","percent","name"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},textfont:t2({},n2,{}),insidetextfont:t2({},n2,{}),outsidetextfont:t2({},n2,{}),domain:e2({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"}},i2={};i2.name="pie",i2.plot=function(e){var t=rS.getModule("pie"),n=Kx(e.calcdata,t);n.length&&t.plot(e,n)},i2.clean=function(e,t,n,r){var i=r._has&&r._has("pie"),a=t._has&&t._has("pie");i&&!a&&r._pielayer.selectAll("g.trace").remove()};var a2,o2=uE.isArrayOrTypedArray,s2=function(e,t){function n(e,t){return!!e&&(e=zC(e),!!e.isValid()&&(e=jE.addOpacity(e,e.getAlpha()),m[t]||(m[t]=e),e))}var r,i,a,o,s,l=t.values,u=o2(l)&&l.length,c=t.labels,d=t.marker.colors||[],f=[],h=e._fullLayout,p=h.colorway,m=h._piecolormap,g={},y=0,v=h.hiddenlabels||[];if(h._piecolorway||p===jE.defaults||(h._piecolorway=$x(p)),t.dlabel)for(c=new Array(l.length),r=0;r<l.length;r++)c[r]=String(t.label0+r*t.dlabel);var _=(u?l:c).length;for(r=0;r<_;r++){if(u){if(i=l[r],!SC(i))continue;if((i=+i)<0)continue}else i=1;a=c[r],void 0!==a&&""!==a||(a=r),a=String(a);var b=g[a];void 0===b?(g[a]=f.length,o=-1!==v.indexOf(a),o||(y+=i),f.push({v:i,label:a,color:n(d[r]),i:r,pts:[r],hidden:o})):(s=f[b],s.v+=i,s.pts.push(r),s.hidden||(y+=i),!1===s.color&&d[r]&&(s.color=n(d[r],a)))}for(t.sort&&f.sort(function(e,t){return t.v-e.v}),r=0;r<f.length;r++)s=f[r],!1===s.color&&(m[s.label]?s.color=m[s.label]:(m[s.label]=s.color=Qx(h._piedefaultcolorcount,h._piecolorway),h._piedefaultcolorcount++));if(f[0]&&(f[0].vTotal=y),t.textinfo&&"none"!==t.textinfo){var x,w=-1!==t.textinfo.indexOf("label"),k=-1!==t.textinfo.indexOf("text"),T=-1!==t.textinfo.indexOf("value"),M=-1!==t.textinfo.indexOf("percent"),A=h.separators;for(r=0;r<f.length;r++){if(s=f[r],x=w?[s.label]:[],k){var C=xB.getFirstFilled(t.text,s.pts);C&&x.push(C)}T&&x.push(xB.formatPieValue(s.v,A)),M&&x.push(xB.formatPiePercent(s.v/y,A)),s.text=x.join("<br>")}}return f},l2=qD.defaults,u2=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,r2,n,r)}var a=uE.coerceFont,o=i("values"),s=i("labels");if(!Array.isArray(s)){if(!uE.isArrayOrTypedArray(o)||!o.length)return void(t.visible=!1);i("label0"),i("dlabel")}i("marker.line.width")&&i("marker.line.color"),i("marker.colors"),i("scalegroup");var l=i("text"),u=i("textinfo",Array.isArray(l)?"text+percent":"percent");if(i("hovertext"),u&&"none"!==u){var c=i("textposition"),d=Array.isArray(c)||"auto"===c,f=d||"inside"===c,h=d||"outside"===c;if(f||h){var p=a(i,"textfont",r.font);f&&a(i,"insidetextfont",p),h&&a(i,"outsidetextfont",p)}}l2(t,r,i),i("hole"),i("sort"),i("direction"),i("rotation"),i("pull")},c2={hiddenlabels:{valType:"data_array",editType:"calc"}},d2=function(e,t){!function(n,r){uE.coerce(e,t,c2,n,r)}("hiddenlabels")},f2=nO.appendArrayMultiPointValues,h2=function(e,t){var n={curveNumber:t.index,pointNumbers:e.pts,data:t._input,fullData:t,label:e.label,color:e.color,value:e.v,v:e.v};return 1===e.pts.length&&(n.pointNumber=n.i=e.pts[0]),f2(n,t,e.pts),n},p2=function(e,t){var n=e._fullLayout;iw(t,n._size);var r=n._pielayer.selectAll("g.trace").data(t);r.enter().append("g").attr({"stroke-linejoin":"round",class:"trace"}),r.exit().remove(),r.order(),r.each(function(t){var r=CC.select(this),i=t[0],a=i.trace;aw(t),r.each(function(){var r=CC.select(this).selectAll("g.slice").data(t);r.enter().append("g").classed("slice",!0),r.exit().remove();var o=[[[],[]],[[],[]]],s=!1;r.each(function(t){function r(){var r=e._fullLayout,o=e._fullData[a.index];if(!e._dragging&&!1!==r.hovermode){var s=o.hoverinfo;if(Array.isArray(s)&&(s=kO.castHoverinfo({hoverinfo:[xB.castOption(s,t.pts)],_module:a._module},r,0)),"all"===s&&(s="label+text+value+percent+name"),"none"!==s&&"skip"!==s&&s){var l=tw(t,i),u=d+t.pxmid[0]*(1-l),c=f+t.pxmid[1]*(1-l),h=n.separators,p=[];if(-1!==s.indexOf("label")&&p.push(t.label),-1!==s.indexOf("text")){var y=xB.castOption(o.hovertext||o.text,t.pts);y&&p.push(y)}-1!==s.indexOf("value")&&p.push(xB.formatPieValue(t.v,h)),-1!==s.indexOf("percent")&&p.push(xB.formatPiePercent(t.v/i.vTotal,h));var v=a.hoverlabel,_=v.font;kO.loneHover({x0:u-l*i.r,x1:u+l*i.r,y:c,text:p.join("<br>"),name:-1!==s.indexOf("name")?o.name:void 0,idealAlign:t.pxmid[0]<0?"left":"right",color:xB.castOption(v.bgcolor,t.pts)||t.color,borderColor:xB.castOption(v.bordercolor,t.pts),fontFamily:xB.castOption(_.family,t.pts),fontSize:xB.castOption(_.size,t.pts),fontColor:xB.castOption(_.color,t.pts)},{container:r._hoverlayer.node(),outerContainer:r._paper.node(),gd:e}),m=!0}e.emit("plotly_hover",{points:[h2(t,o)],event:CC.event}),g=!0}}function l(n){var r=e._fullLayout,i=e._fullData[a.index];g&&(n.originalEvent=CC.event,e.emit("plotly_unhover",{points:[h2(t,i)],event:CC.event}),g=!1),m&&(kO.loneUnhover(r._hoverlayer.node()),m=!1)}function u(){var n=e._fullLayout,r=e._fullData[a.index];e._dragging||!1===n.hovermode||(e._hoverdata=[h2(t,r)],kO.click(e,CC.event))}function c(e,n,r,a){return"a"+a*i.r+","+a*i.r+" 0 "+t.largeArc+(r?" 1 ":" 0 ")+a*(n[0]-e[0])+","+a*(n[1]-e[1])}if(t.hidden)return void CC.select(this).selectAll("path,g").remove();t.pointNumber=t.i,t.curveNumber=a.index,o[t.pxmid[1]<0?0:1][t.pxmid[0]<0?0:1].push(t);var d=i.cx,f=i.cy,h=CC.select(this),p=h.selectAll("path.surface").data([t]),m=!1,g=!1;if(p.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),h.select("path.textline").remove(),h.on("mouseover",r).on("mouseout",l).on("click",u),a.pull){var y=+xB.castOption(a.pull,t.pts)||0;y>0&&(d+=y*t.pxmid[0],f+=y*t.pxmid[1])}t.cxFinal=d,t.cyFinal=f;var v=a.hole;if(t.v===i.vTotal){var _="M"+(d+t.px0[0])+","+(f+t.px0[1])+c(t.px0,t.pxmid,!0,1)+c(t.pxmid,t.px0,!0,1)+"Z";v?p.attr("d","M"+(d+v*t.px0[0])+","+(f+v*t.px0[1])+c(t.px0,t.pxmid,!1,v)+c(t.pxmid,t.px0,!1,v)+"Z"+_):p.attr("d",_)}else{var b=c(t.px0,t.px1,!0,1);if(v){var x=1-v;p.attr("d","M"+(d+v*t.px1[0])+","+(f+v*t.px1[1])+c(t.px1,t.px0,!1,v)+"l"+x*t.px0[0]+","+x*t.px0[1]+b+"Z")}else p.attr("d","M"+d+","+f+"l"+t.px0[0]+","+t.px0[1]+b+"Z")}var w=xB.castOption(a.textposition,t.pts),k=h.selectAll("g.slicetext").data(t.text&&"none"!==w?[0]:[]);k.enter().append("g").classed("slicetext",!0),k.exit().remove(),k.each(function(){var n=CC.select(this).selectAll("text").data([0]);n.enter().append("text").attr("data-notex",1),n.exit().remove(),n.text(t.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(PP.font,"outside"===w?a.outsidetextfont:a.insidetextfont).call(sP.convertToTspans,e);var r,o=PP.bBox(n.node());"outside"===w?r=nw(o,t):(r=ew(o,t,i),"auto"===w&&r.scale<1&&(n.call(PP.font,a.outsidetextfont),a.outsidetextfont.family===a.insidetextfont.family&&a.outsidetextfont.size===a.insidetextfont.size||(o=PP.bBox(n.node())),r=nw(o,t)));var l=d+t.pxmid[0]*r.rCenter+(r.x||0),u=f+t.pxmid[1]*r.rCenter+(r.y||0);r.outside&&(t.yLabelMin=u-o.height/2,t.yLabelMid=u,t.yLabelMax=u+o.height/2,t.labelExtraX=0,t.labelExtraY=0,s=!0),n.attr("transform","translate("+l+","+u+")"+(r.scale<1?"scale("+r.scale+")":"")+(r.rotate?"rotate("+r.rotate+")":"")+"translate("+-(o.left+o.right)/2+","+-(o.top+o.bottom)/2+")")})}),s&&rw(o,a),r.each(function(e){if(e.labelExtraX||e.labelExtraY){var t=CC.select(this),n=t.select("g.slicetext text");n.attr("transform","translate("+e.labelExtraX+","+e.labelExtraY+")"+n.attr("transform"));var r=e.cxFinal+e.pxmid[0],i=e.cyFinal+e.pxmid[1],o="M"+r+","+i,s=(e.yLabelMax-e.yLabelMin)*(e.pxmid[0]<0?-1:1)/4;if(e.labelExtraX){var l=e.labelExtraX*e.pxmid[1]/e.pxmid[0],u=e.yLabelMid+e.labelExtraY-(e.cyFinal+e.pxmid[1]);Math.abs(l)>Math.abs(u)?o+="l"+u*e.pxmid[0]/e.pxmid[1]+","+u+"H"+(r+e.labelExtraX+s):o+="l"+e.labelExtraX+","+l+"v"+(u-l)+"h"+s}else o+="V"+(e.yLabelMid+e.labelExtraY)+"h"+s;t.append("path").classed("textline",!0).call(jE.stroke,a.outsidetextfont.color).attr({"stroke-width":Math.min(2,a.outsidetextfont.size/8),d:o,fill:"none"})}})})}),setTimeout(function(){r.selectAll("tspan").each(function(){var e=CC.select(this);e.attr("dy")&&e.attr("dy",e.attr("dy"))})},0)},m2=function(e){e._fullLayout._pielayer.selectAll(".trace").each(function(e){var t=e[0],n=t.trace,r=CC.select(this);r.style({opacity:n.opacity}),r.selectAll("path.surface").each(function(e){CC.select(this).call(kB,e,n)})})},g2={};g2.attributes=r2,g2.supplyDefaults=u2,g2.supplyLayoutDefaults=d2,g2.layoutAttributes=c2,g2.calc=s2,g2.plot=p2,g2.style=m2,g2.styleOne=kB,g2.moduleType="trace",g2.name="pie",g2.basePlotModule=i2,g2.categories=["pie","showLegend"],g2.meta={};var y2=g2,v2=y2,_2={x:YP.x,y:YP.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:YP.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"}},b2={};b2.pointVertex=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),b2.pointFragment=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),b2.pickVertex=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),b2.pickFragment=OW(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"]);var x2=lw,w2=ow.prototype;w2.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},w2.update=function(e){function t(t,n){return t in e?e[t]:n}var n;e=e||{},this.sizeMin=t("sizeMin",.5),this.sizeMax=t("sizeMax",20),this.color=t("color",[1,0,0,1]).slice(),this.areaRatio=t("areaRatio",1),this.borderColor=t("borderColor",[0,0,0,1]).slice(),this.blend=t("blend",!1);var r=e.positions.length>>>1,i=e.positions instanceof Float32Array,a=e.idToIndex instanceof Int32Array&&e.idToIndex.length>=r,o=e.positions,s=i?o:EW.mallocFloat32(o.length),l=a?e.idToIndex:EW.mallocInt32(r);if(i||s.set(o),!a)for(s.set(o),n=0;n<r;n++)l[n]=n;this.points=o,this.offsetBuffer.update(s),this.pickBuffer.update(l),i||EW.free(s),a||EW.free(l),this.pointCount=r,this.pickOffset=0},w2.unifiedDraw=function(){var e=[1,0,0,0,1,0,0,0,1],t=[0,0,0,0];return function(n){var r=void 0!==n,i=r?this.pickShader:this.shader,a=this.plot.gl,o=this.plot.dataBox;if(0===this.pointCount)return n;var s=o[2]-o[0],l=o[3]-o[1],u=sw(this.points,o),c=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(u,.33333)));e[0]=2/s,e[4]=2/l,e[6]=-2*o[0]/s-1,e[7]=-2*o[1]/l-1,this.offsetBuffer.bind(),i.bind(),i.attributes.position.pointer(),i.uniforms.matrix=e,i.uniforms.color=this.color,i.uniforms.borderColor=this.borderColor,i.uniforms.pointCloud=c<5,i.uniforms.pointSize=c,i.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),r&&(t[0]=255&n,t[1]=n>>8&255,t[2]=n>>16&255,t[3]=n>>24&255,this.pickBuffer.bind(),i.attributes.pickId.pointer(a.UNSIGNED_BYTE),i.uniforms.pickOffset=t,this.pickOffset=n);var d=a.getParameter(a.BLEND),f=a.getParameter(a.DITHER);return d&&!this.blend&&a.disable(a.BLEND),f&&a.disable(a.DITHER),a.drawArrays(a.POINTS,0,this.pointCount),d&&!this.blend&&a.enable(a.BLEND),f&&a.enable(a.DITHER),n+this.pointCount}}(),w2.draw=w2.unifiedDraw,w2.drawPick=w2.unifiedDraw,w2.pick=function(e,t,n){var r=this.pickOffset,i=this.pointCount;if(n<r||n>=r+i)return null;var a=n-r,o=this.points;return{object:this,pointId:a,dataCoord:[o[2*a],o[2*a+1]]}};var k2=bI.expand,T2=uw.prototype;T2.handlePick=function(e){var t=this.idToIndex[e.pointId];return{trace:this,dataCoord:e.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*t],this.pickXYData[2*t+1]]:[this.pickXData[t],this.pickYData[t]],textLabel:Array.isArray(this.textLabels)?this.textLabels[t]:this.textLabels,color:this.color,name:this.name,pointIndex:t,hoverinfo:this.hoverinfo}},T2.update=function(e){this.index=e.index,this.textLabels=e.text,this.name=e.name,this.hoverinfo=e.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(e),this.color=vH(e,{})},T2.updateFast=function(e){var t,n,r,i,a,o,s=this.xData=this.pickXData=e.x,l=this.yData=this.pickYData=e.y,u=this.pickXYData=e.xy,c=e.xbounds&&e.ybounds,d=e.indices,f=this.bounds;if(u){if(r=u,t=u.length>>>1,c)f[0]=e.xbounds[0],f[2]=e.xbounds[1],f[1]=e.ybounds[0],f[3]=e.ybounds[1];else for(o=0;o<t;o++)i=r[2*o],a=r[2*o+1],i<f[0]&&(f[0]=i),i>f[2]&&(f[2]=i),a<f[1]&&(f[1]=a),a>f[3]&&(f[3]=a);if(d)n=d;else for(n=new Int32Array(t),o=0;o<t;o++)n[o]=o}else for(t=s.length,r=new Float32Array(2*t),n=new Int32Array(t),o=0;o<t;o++)i=s[o],a=l[o],n[o]=o,r[2*o]=i,r[2*o+1]=a,i<f[0]&&(f[0]=i),i>f[2]&&(f[2]=i),a<f[1]&&(f[1]=a),a>f[3]&&(f[3]=a);this.idToIndex=n,this.pointcloudOptions.idToIndex=n,this.pointcloudOptions.positions=r;var h=UZ(e.marker.color),p=UZ(e.marker.border.color),m=e.opacity*e.marker.opacity;h[3]*=m,this.pointcloudOptions.color=h;var g=e.marker.blend;if(null===g){g=s.length<100||l.length<100}this.pointcloudOptions.blend=g,p[3]*=m,this.pointcloudOptions.borderColor=p;var y=e.marker.sizemin,v=Math.max(e.marker.sizemax,e.marker.sizemin);this.pointcloudOptions.sizeMin=y,this.pointcloudOptions.sizeMax=v,this.pointcloudOptions.areaRatio=e.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions),this.expandAxesFast(f,v/2)},T2.expandAxesFast=function(e,t){var n=t||.5;k2(this.scene.xaxis,[e[0],e[2]],{ppad:n}),k2(this.scene.yaxis,[e[1],e[3]],{ppad:n})},T2.dispose=function(){this.pointcloud.dispose()};var M2=cw,A2=function(e,t,n){function r(n,r){return uE.coerce(e,t,_2,n,r)}r("x"),r("y"),r("xbounds"),r("ybounds"),e.xy&&e.xy instanceof Float32Array&&(t.xy=e.xy),e.indices&&e.indices instanceof Int32Array&&(t.indices=e.indices),r("text"),r("marker.color",n),r("marker.opacity"),r("marker.blend"),r("marker.sizemin"),r("marker.sizemax"),r("marker.border.color",n),r("marker.border.arearatio")},C2=function(e,t){var n=[{x:!1,y:!1,trace:t,t:{}}];return gN(n,t),aH(t),n},S2={};S2.attributes=_2,S2.supplyDefaults=A2,S2.calc=C2,S2.plot=M2,S2.moduleType="trace",S2.name="pointcloud",S2.basePlotModule=eJ,S2.categories=["gl","gl2d","showLegend"],S2.meta={};var E2=S2,P2=E2,I2=qD.attributes,L2=WC.extendFlat,O2=TE.overrideAll,z2=O2({hoverinfo:L2({},$C.hoverinfo,{flags:["label","text","value","percent","name"]}),hoverlabel:QC.hoverlabel,domain:I2({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s"},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:KC({}),node:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:eS.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20}},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},line:{color:{valType:"color",dflt:eS.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]}}},"calc","nested"),R2={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"cubic-in-out",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeCapture:"node-capture",nodeCentered:"node-entered",nodeLabelGuide:"node-label-guide",nodeLabel:"node-label",nodeLabelTextPath:"node-label-text-path"}},D2={exports:{}};!function(e,t){"object"===typeof D2.exports?t(D2.exports):"function"===typeof MC&&MC.amd?MC(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e){return function(t,n){return o(e(t),n)}}function n(e,t){return[e,t]}function r(e,t,n){var r=(t-e)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=T?10:a>=M?5:a>=A?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=T?10:a>=M?5:a>=A?2:1)}function i(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=T?i*=10:a>=M?i*=5:a>=A&&(i*=2),t<e?-i:i}function a(e){return e.length}var o=function(e,t){return e<t?-1:e>t?1:e>=t?0:NaN},s=function(e){return 1===e.length&&(e=t(e)),{left:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)<0?r=a+1:i=a}return r},right:function(t,n,r,i){for(null==r&&(r=0),null==i&&(i=t.length);r<i;){var a=r+i>>>1;e(t[a],n)>0?i=a:r=a+1}return r}}},l=s(o),u=l.right,c=l.left,d=function(e,t){null==t&&(t=n);for(var r=0,i=e.length-1,a=e[0],o=new Array(i<0?0:i);r<i;)o[r]=t(a,a=e[++r]);return o},f=function(e,t,r){var i,a,o,s,l=e.length,u=t.length,c=new Array(l*u);for(null==r&&(r=n),i=o=0;i<l;++i)for(s=e[i],a=0;a<u;++a,++o)c[o]=r(s,t[a]);return c},h=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},p=function(e){return null===e?NaN:+e},m=function(e,t){var n,r,i=e.length,a=0,o=-1,s=0,l=0;if(null==t)for(;++o<i;)isNaN(n=p(e[o]))||(r=n-s,s+=r/++a,l+=r*(n-s));else for(;++o<i;)isNaN(n=p(t(e[o],o,e)))||(r=n-s,s+=r/++a,l+=r*(n-s));if(a>1)return l/(a-1)},g=function(e,t){var n=m(e,t);return n?Math.sqrt(n):n},y=function(e,t){var n,r,i,a=e.length,o=-1;if(null==t){for(;++o<a;)if(null!=(n=e[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=e[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=t(e[o],o,e))&&n>=n)for(r=i=n;++o<a;)null!=(n=t(e[o],o,e))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]},v=Array.prototype,_=v.slice,b=v.map,x=function(e){return function(){return e}},w=function(e){return e},k=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),a=new Array(i);++r<i;)a[r]=e+r*n;return a},T=Math.sqrt(50),M=Math.sqrt(10),A=Math.sqrt(2),C=function(e,t,n){var i,a,o,s,l=-1;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((i=t<e)&&(a=e,e=t,t=a),0===(s=r(e,t,n))||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),o=new Array(a=Math.ceil(t-e+1));++l<a;)o[l]=(e+l)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),o=new Array(a=Math.ceil(e-t+1));++l<a;)o[l]=(e-l)/s;return i&&o.reverse(),o},S=function(e){return Math.ceil(Math.log(e.length)/Math.LN2)+1},E=function(){function e(e){var a,o,s=e.length,l=new Array(s);for(a=0;a<s;++a)l[a]=t(e[a],a,e);var c=n(l),d=c[0],f=c[1],h=r(l,d,f);Array.isArray(h)||(h=i(d,f,h),h=k(Math.ceil(d/h)*h,Math.floor(f/h)*h,h));for(var p=h.length;h[0]<=d;)h.shift(),--p;for(;h[p-1]>f;)h.pop(),--p;var m,g=new Array(p+1);for(a=0;a<=p;++a)m=g[a]=[],m.x0=a>0?h[a-1]:d,m.x1=a<p?h[a]:f;for(a=0;a<s;++a)o=l[a],d<=o&&o<=f&&g[u(h,o,0,p)].push(e[a]);return g}var t=w,n=y,r=S;return e.value=function(n){return arguments.length?(t="function"===typeof n?n:x(n),e):t},e.domain=function(t){return arguments.length?(n="function"===typeof t?t:x([t[0],t[1]]),e):n},e.thresholds=function(t){return arguments.length?(r="function"===typeof t?t:x(Array.isArray(t)?_.call(t):t),e):r},e},P=function(e,t,n){if(null==n&&(n=p),r=e.length){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e);return o+(+n(e[a+1],a+1,e)-o)*(i-a)}},I=function(e,t,n){return e=b.call(e,p).sort(o),Math.ceil((n-t)/(2*(P(e,.75)-P(e,.25))*Math.pow(e.length,-1/3)))},L=function(e,t,n){return Math.ceil((n-t)/(3.5*g(e)*Math.pow(e.length,-1/3)))},O=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&n>r&&(r=n);return r},z=function(e,t){var n,r=e.length,i=r,a=-1,o=0;if(null==t)for(;++a<r;)isNaN(n=p(e[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=p(t(e[a],a,e)))?--i:o+=n;if(i)return o/i},R=function(e,t){var n,r=e.length,i=-1,a=[];if(null==t)for(;++i<r;)isNaN(n=p(e[i]))||a.push(n);else for(;++i<r;)isNaN(n=p(t(e[i],i,e)))||a.push(n);return P(a.sort(o),.5)},D=function(e){for(var t,n,r,i=e.length,a=-1,o=0;++a<i;)o+=e[a].length;for(n=new Array(o);--i>=0;)for(r=e[i],t=r.length;--t>=0;)n[--o]=r[t];return n},N=function(e,t){var n,r,i=e.length,a=-1;if(null==t){for(;++a<i;)if(null!=(n=e[a])&&n>=n)for(r=n;++a<i;)null!=(n=e[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=t(e[a],a,e))&&n>=n)for(r=n;++a<i;)null!=(n=t(e[a],a,e))&&r>n&&(r=n);return r},F=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},j=function(e,t){if(n=e.length){var n,r,i=0,a=0,s=e[a];for(null==t&&(t=o);++i<n;)(t(r=e[i],s)<0||0!==t(s,s))&&(s=r,a=i);return 0===t(s,s)?a:void 0}},B=function(e,t,n){for(var r,i,a=(null==n?e.length:n)-(t=null==t?0:+t);a;)i=Math.random()*a--|0,r=e[a+t],e[a+t]=e[i+t],e[i+t]=r;return e},U=function(e,t){var n,r=e.length,i=-1,a=0;if(null==t)for(;++i<r;)(n=+e[i])&&(a+=n);else for(;++i<r;)(n=+t(e[i],i,e))&&(a+=n);return a},V=function(e){if(!(i=e.length))return[];for(var t=-1,n=N(e,a),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},H=function(){return V(arguments)};e.bisect=u,e.bisectRight=u,e.bisectLeft=c,e.ascending=o,e.bisector=s,e.cross=f,e.descending=h,e.deviation=g,e.extent=y,e.histogram=E,e.thresholdFreedmanDiaconis=I,e.thresholdScott=L,e.thresholdSturges=S,e.max=O,e.mean=z,e.median=R,e.merge=D,e.min=N,e.pairs=d,e.permute=F,e.quantile=P,e.range=k,e.scan=j,e.shuffle=B,e.sum=U,e.ticks=C,e.tickIncrement=r,e.tickStep=i,e.transpose=V,e.variance=m,e.zip=H,Object.defineProperty(e,"__esModule",{value:!0})}),D2=D2.exports;var N2={exports:{}};!function(e,t){"object"===typeof N2.exports?t(N2.exports):"function"===typeof MC&&MC.amd?MC(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(){}function n(e,n){var r=new t;if(e instanceof t)e.each(function(e,t){r.set(t,e)});else if(Array.isArray(e)){var i,a=-1,o=e.length;if(null==n)for(;++a<o;)r.set(a,e[a]);else for(;++a<o;)r.set(n(i=e[a],a,e),i)}else if(e)for(var s in e)r.set(s,e[s]);return r}function r(){return{}}function i(e,t,n){e[t]=n}function a(){return n()}function o(e,t,n){e.set(t,n)}function s(){}function l(e,t){var n=new s;if(e instanceof s)e.each(function(e){n.add(e)});else if(e){var r=-1,i=e.length;if(null==t)for(;++r<i;)n.add(e[r]);else for(;++r<i;)n.add(t(e[r],r,e))}return n}t.prototype=n.prototype={constructor:t,has:function(e){return"$"+e in this},get:function(e){return this["$"+e]},set:function(e,t){return this["$"+e]=t,this},remove:function(e){var t="$"+e;return t in this&&delete this[t]},clear:function(){for(var e in this)"$"===e[0]&&delete this[e]},keys:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)"$"===t[0]&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)"$"===t[0]&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)"$"===t[0]&&++e;return e},empty:function(){for(var e in this)if("$"===e[0])return!1;return!0},each:function(e){for(var t in this)"$"===t[0]&&e(this[t],t.slice(1),this)}};var u=function(){function e(t,r,i,a){if(r>=c.length)return null!=s&&t.sort(s),null!=l?l(t):t;for(var o,u,d,f=-1,h=t.length,p=c[r++],m=n(),g=i();++f<h;)(d=m.get(o=p(u=t[f])+""))?d.push(u):m.set(o,[u]);return m.each(function(t,n){a(g,n,e(t,r,i,a))}),g}function t(e,n){if(++n>c.length)return e;var r,i=d[n-1];return null!=l&&n>=c.length?r=e.entries():(r=[],e.each(function(e,i){r.push({key:i,values:t(e,n)})})),null!=i?r.sort(function(e,t){return i(e.key,t.key)}):r}var s,l,u,c=[],d=[];return u={object:function(t){return e(t,0,r,i)},map:function(t){return e(t,0,a,o)},entries:function(n){return t(e(n,0,a,o),0)},key:function(e){return c.push(e),u},sortKeys:function(e){return d[c.length-1]=e,u},sortValues:function(e){return s=e,u},rollup:function(e){return l=e,u}}},c=n.prototype;s.prototype=l.prototype={constructor:s,has:c.has,add:function(e){return e+="",this["$"+e]=e,this},remove:c.remove,clear:c.clear,values:c.keys,size:c.size,empty:c.empty,each:c.each};var d=function(e){var t=[];for(var n in e)t.push(n);return t},f=function(e){var t=[];for(var n in e)t.push(e[n]);return t},h=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t};e.nest=u,e.set=l,e.map=n,e.keys=d,e.values=f,e.entries=h,Object.defineProperty(e,"__esModule",{value:!0})}),N2=N2.exports;var F2={exports:{}};!function(e,t){"object"===typeof F2.exports?t(F2.exports):"function"===typeof MC&&MC.amd?MC(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function n(){}function r(e){var t;return e=(e+"").trim().toLowerCase(),(t=I.exec(e))?(t=parseInt(t[1],16),new l(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1)):(t=L.exec(e))?i(parseInt(t[1],16)):(t=O.exec(e))?new l(t[1],t[2],t[3],1):(t=z.exec(e))?new l(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=R.exec(e))?a(t[1],t[2],t[3],t[4]):(t=D.exec(e))?a(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=N.exec(e))?u(t[1],t[2]/100,t[3]/100,1):(t=F.exec(e))?u(t[1],t[2]/100,t[3]/100,t[4]):j.hasOwnProperty(e)?i(j[e]):"transparent"===e?new l(NaN,NaN,NaN,0):null}function i(e){return new l(e>>16&255,e>>8&255,255&e,1)}function a(e,t,n,r){return r<=0&&(e=t=n=NaN),new l(e,t,n,r)}function o(e){return e instanceof n||(e=r(e)),e?(e=e.rgb(),new l(e.r,e.g,e.b,e.opacity)):new l}function s(e,t,n,r){return 1===arguments.length?o(e):new l(e,t,n,null==r?1:r)}function l(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function u(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new f(e,t,n,r)}function c(e){if(e instanceof f)return new f(e.h,e.s,e.l,e.opacity);if(e instanceof n||(e=r(e)),!e)return new f;if(e instanceof f)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,o=Math.min(t,i,a),s=Math.max(t,i,a),l=NaN,u=s-o,c=(s+o)/2;return u?(l=t===s?(i-a)/u+6*(i<a):i===s?(a-t)/u+2:(t-i)/u+4,u/=c<.5?s+o:2-s-o,l*=60):u=c>0&&c<1?0:l,new f(l,u,c,e.opacity)}function d(e,t,n,r){return 1===arguments.length?c(e):new f(e,t,n,null==r?1:r)}function f(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function h(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function p(e){if(e instanceof g)return new g(e.l,e.a,e.b,e.opacity);if(e instanceof k){var t=e.h*B;return new g(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}e instanceof l||(e=o(e));var n=b(e.r),r=b(e.g),i=b(e.b),a=y((.4124564*n+.3575761*r+.1804375*i)/V),s=y((.2126729*n+.7151522*r+.072175*i)/H);return new g(116*s-16,500*(a-s),200*(s-y((.0193339*n+.119192*r+.9503041*i)/W)),e.opacity)}function m(e,t,n,r){return 1===arguments.length?p(e):new g(e,t,n,null==r?1:r)}function g(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}function y(e){return e>X?Math.pow(e,1/3):e/Y+q}function v(e){return e>G?e*e*e:Y*(e-q)}function _(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function b(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function x(e){if(e instanceof k)return new k(e.h,e.c,e.l,e.opacity);e instanceof g||(e=p(e));var t=Math.atan2(e.b,e.a)*U;return new k(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function w(e,t,n,r){return 1===arguments.length?x(e):new k(e,t,n,null==r?1:r)}function k(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function T(e){if(e instanceof A)return new A(e.h,e.s,e.l,e.opacity);e instanceof l||(e=o(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(ne*r+ee*t-te*n)/(ne+ee-te),a=r-i,s=($*(n-i)-K*a)/Q,u=Math.sqrt(s*s+a*a)/($*i*(1-i)),c=u?Math.atan2(s,a)*U-120:NaN;return new A(c<0?c+360:c,u,i,e.opacity)}function M(e,t,n,r){return 1===arguments.length?T(e):new A(e,t,n,null==r?1:r)}function A(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}var C=function(e,t,n){e.prototype=t.prototype=n,n.constructor=e},S="\\s*([+-]?\\d+)\\s*",E="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",P="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",I=/^#([0-9a-f]{3})$/,L=/^#([0-9a-f]{6})$/,O=new RegExp("^rgb\\("+[S,S,S]+"\\)$"),z=new RegExp("^rgb\\("+[P,P,P]+"\\)$"),R=new RegExp("^rgba\\("+[S,S,S,E]+"\\)$"),D=new RegExp("^rgba\\("+[P,P,P,E]+"\\)$"),N=new RegExp("^hsl\\("+[E,P,P]+"\\)$"),F=new RegExp("^hsla\\("+[E,P,P,E]+"\\)$"),j={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};C(n,r,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),C(l,s,t(n,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new l(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new l(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(1===e?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}})),C(f,d,t(n,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new f(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new f(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new l(h(e>=240?e-240:e+120,i,r),h(e,i,r),h(e<120?e+240:e-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var B=Math.PI/180,U=180/Math.PI,V=.95047,H=1,W=1.08883,q=4/29,G=6/29,Y=3*G*G,X=G*G*G;C(g,m,t(n,{brighter:function(e){return new g(this.l+18*(null==e?1:e),this.a,this.b,this.opacity)},darker:function(e){return new g(this.l-18*(null==e?1:e),this.a,this.b,this.opacity)},rgb:function(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return e=H*v(e),t=V*v(t),n=W*v(n),new l(_(3.2404542*t-1.5371385*e-.4985314*n),_(-.969266*t+1.8760108*e+.041556*n),_(.0556434*t-.2040259*e+1.0572252*n),this.opacity)}})),C(k,w,t(n,{brighter:function(e){return new k(this.h,this.c,this.l+18*(null==e?1:e),this.opacity)},darker:function(e){return new k(this.h,this.c,this.l-18*(null==e?1:e),this.opacity)},rgb:function(){return p(this).rgb()}}));var Z=-.14861,J=1.78277,K=-.29227,Q=-.90649,$=1.97294,ee=$*Q,te=$*J,ne=J*K-Q*Z;C(A,M,t(n,{brighter:function(e){return e=null==e?1/.7:Math.pow(1/.7,e),new A(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?.7:Math.pow(.7,e),new A(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*B,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new l(255*(t+n*(Z*r+J*i)),255*(t+n*(K*r+Q*i)),255*(t+n*($*r)),this.opacity)}})),e.color=r,e.rgb=s,e.hsl=d,e.lab=m,e.hcl=w,e.cubehelix=M,Object.defineProperty(e,"__esModule",{value:!0})}),F2=F2.exports;var j2={exports:{}};!function(e,t){"object"===typeof j2.exports?t(j2.exports,F2):"function"===typeof MC&&MC.amd?MC(["exports","d3-color"],t):t(e.d3=e.d3||{},e.d3)}(this,function(e,t){"use strict";function n(e,t,n,r,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*n+(1+3*e+3*a-3*o)*r+o*i)/6}function r(e,t){return function(n){return e+n*t}}function i(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function a(e,t){var n=t-e;return n?r(e,n>180||n<-180?n-360*Math.round(n/360):n):C(isNaN(e)?t:e)}function o(e){return 1===(e=+e)?s:function(t,n){return n-t?i(t,n,e):C(isNaN(t)?n:t)}}function s(e,t){var n=t-e;return n?r(e,n):C(isNaN(e)?t:e)}function l(e){return function(n){var r,i,a=n.length,o=new Array(a),s=new Array(a),l=new Array(a);for(r=0;r<a;++r)i=t.rgb(n[r]),o[r]=i.r||0,s[r]=i.g||0,l[r]=i.b||0;return o=e(o),s=e(s),l=e(l),i.opacity=1,function(e){return i.r=o(e),i.g=s(e),i.b=l(e),i+""}}}function u(e){return function(){return e}}function c(e){return function(t){return e(t)+""}}function d(e){return"none"===e?U:(x||(x=document.createElement("DIV"),w=document.documentElement,k=document.defaultView),x.style.transform=e,e=k.getComputedStyle(w.appendChild(x),null).getPropertyValue("transform"),w.removeChild(x),e=e.slice(7,-1).split(","),V(+e[0],+e[1],+e[2],+e[3],+e[4],+e[5]))}function f(e){return null==e?U:(T||(T=document.createElementNS("http://www.w3.org/2000/svg","g")),T.setAttribute("transform",e),(e=T.transform.baseVal.consolidate())?(e=e.matrix,V(e.a,e.b,e.c,e.d,e.e,e.f)):U)}function h(e,t,n,r){function i(e){return e.length?e.pop()+" ":""}function a(e,r,i,a,o,s){if(e!==i||r!==a){var l=o.push("translate(",null,t,null,n);s.push({i:l-4,x:O(e,i)},{i:l-2,x:O(r,a)})}else(i||a)&&o.push("translate("+i+t+a+n)}function o(e,t,n,a){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:O(e,t)})):t&&n.push(i(n)+"rotate("+t+r)}function s(e,t,n,a){e!==t?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:O(e,t)}):t&&n.push(i(n)+"skewX("+t+r)}function l(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+"scale(",null,",",null,")");o.push({i:s-4,x:O(e,n)},{i:s-2,x:O(t,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),l(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t,n=-1,a=i.length;++n<a;)r[(t=i[n]).i]=t.x(e);return r.join("")}}}function p(e){return((e=Math.exp(e))+1/e)/2}function m(e){return((e=Math.exp(e))-1/e)/2}function g(e){return((e=Math.exp(2*e))-1)/(e+1)}function y(e){return function(n,r){var i=e((n=t.hsl(n)).h,(r=t.hsl(r)).h),a=s(n.s,r.s),o=s(n.l,r.l),l=s(n.opacity,r.opacity);return function(e){return n.h=i(e),n.s=a(e),n.l=o(e),n.opacity=l(e),n+""}}}function v(e,n){var r=s((e=t.lab(e)).l,(n=t.lab(n)).l),i=s(e.a,n.a),a=s(e.b,n.b),o=s(e.opacity,n.opacity);return function(t){return e.l=r(t),e.a=i(t),e.b=a(t),e.opacity=o(t),e+""}}function _(e){return function(n,r){var i=e((n=t.hcl(n)).h,(r=t.hcl(r)).h),a=s(n.c,r.c),o=s(n.l,r.l),l=s(n.opacity,r.opacity);return function(e){return n.h=i(e),n.c=a(e),n.l=o(e),n.opacity=l(e),n+""}}}function b(e){return function n(r){function i(n,i){var a=e((n=t.cubehelix(n)).h,(i=t.cubehelix(i)).h),o=s(n.s,i.s),l=s(n.l,i.l),u=s(n.opacity,i.opacity);return function(e){return n.h=a(e),n.s=o(e),n.l=l(Math.pow(e,r)),n.opacity=u(e),n+""}}return r=+r,i.gamma=n,i}(1)}var x,w,k,T,M=function(e){var t=e.length-1;return function(r){var i=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),a=e[i],o=e[i+1],s=i>0?e[i-1]:2*a-o,l=i<t-1?e[i+2]:2*o-a;return n((r-i/t)*t,s,a,o,l)}},A=function(e){var t=e.length;return function(r){var i=Math.floor(((r%=1)<0?++r:r)*t),a=e[(i+t-1)%t],o=e[i%t],s=e[(i+1)%t],l=e[(i+2)%t];return n((r-i/t)*t,a,o,s,l)}},C=function(e){return function(){return e}},S=function e(n){function r(e,n){var r=i((e=t.rgb(e)).r,(n=t.rgb(n)).r),a=i(e.g,n.g),o=i(e.b,n.b),l=s(e.opacity,n.opacity);return function(t){return e.r=r(t),e.g=a(t),e.b=o(t),e.opacity=l(t),e+""}}var i=o(n);return r.gamma=e,r}(1),E=l(M),P=l(A),I=function(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,a=new Array(i),o=new Array(r);for(n=0;n<i;++n)a[n]=F(e[n],t[n]);for(;n<r;++n)o[n]=t[n];return function(e){for(n=0;n<i;++n)o[n]=a[n](e);return o}},L=function(e,t){var n=new Date;return e=+e,t-=e,function(r){return n.setTime(e+t*r),n}},O=function(e,t){return e=+e,t-=e,function(n){return e+t*n}},z=function(e,t){var n,r={},i={};null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={});for(n in t)n in e?r[n]=F(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}},R=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,D=new RegExp(R.source,"g"),N=function(e,t){var n,r,i,a=R.lastIndex=D.lastIndex=0,o=-1,s=[],l=[];for(e+="",t+="";(n=R.exec(e))&&(r=D.exec(t));)(i=r.index)>a&&(i=t.slice(a,i),s[o]?s[o]+=i:s[++o]=i),(n=n[0])===(r=r[0])?s[o]?s[o]+=r:s[++o]=r:(s[++o]=null,l.push({i:o,x:O(n,r)})),a=D.lastIndex;return a<t.length&&(i=t.slice(a),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?c(l[0].x):u(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})},F=function(e,n){var r,i=typeof n;return null==n||"boolean"===i?C(n):("number"===i?O:"string"===i?(r=t.color(n))?(n=r,S):N:n instanceof t.color?S:n instanceof Date?L:Array.isArray(n)?I:"function"!==typeof n.valueOf&&"function"!==typeof n.toString||isNaN(n)?z:O)(e,n)},j=function(e,t){return e=+e,t-=e,function(n){return Math.round(e+t*n)}},B=180/Math.PI,U={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},V=function(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*B,skewX:Math.atan(l)*B,scaleX:o,scaleY:s}},H=h(d,"px, ","px)","deg)"),W=h(f,", ",")",")"),q=Math.SQRT2,G=function(e,t){var n,r,i=e[0],a=e[1],o=e[2],s=t[0],l=t[1],u=t[2],c=s-i,d=l-a,f=c*c+d*d;if(f<1e-12)r=Math.log(u/o)/q,n=function(e){return[i+e*c,a+e*d,o*Math.exp(q*e*r)]};else{var h=Math.sqrt(f),y=(u*u-o*o+4*f)/(2*o*2*h),v=(u*u-o*o-4*f)/(2*u*2*h),_=Math.log(Math.sqrt(y*y+1)-y),b=Math.log(Math.sqrt(v*v+1)-v);r=(b-_)/q,n=function(e){var t=e*r,n=p(_),s=o/(2*h)*(n*g(q*t+_)-m(_));return[i+s*c,a+s*d,o*n/p(q*t+_)]}}return n.duration=1e3*r,n},Y=y(a),X=y(s),Z=_(a),J=_(s),K=b(a),Q=b(s),$=function(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n};e.interpolate=F,e.interpolateArray=I,e.interpolateBasis=M,e.interpolateBasisClosed=A,e.interpolateDate=L,e.interpolateNumber=O,e.interpolateObject=z,e.interpolateRound=j,e.interpolateString=N,e.interpolateTransformCss=H,e.interpolateTransformSvg=W,e.interpolateZoom=G,e.interpolateRgb=S,e.interpolateRgbBasis=E,e.interpolateRgbBasisClosed=P,e.interpolateHsl=Y,e.interpolateHslLong=X,e.interpolateLab=v,e.interpolateHcl=Z,e.interpolateHclLong=J,e.interpolateCubehelix=K,e.interpolateCubehelixLong=Q,e.quantize=$,Object.defineProperty(e,"__esModule",{value:!0})}),j2=j2.exports;var B2={exports:{}};!function(e,t){"object"===typeof B2.exports?t(B2.exports,D2,N2,j2):"function"===typeof MC&&MC.amd?MC(["exports","d3-array","d3-collection","d3-interpolate"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3)}(this,function(e,t,n,r){"use strict";var i=function(){function e(){g.forEach(function(e){e.sourceLinks=[],e.targetLinks=[]}),y.forEach(function(e,t){var n=e.source,r=e.target;"number"===typeof n&&(n=e.source=g[e.source]),"number"===typeof r&&(r=e.target=g[e.target]),e.originalIndex=t,n.sourceLinks.push(e),r.targetLinks.push(e)})}function i(){g.forEach(function(e){e.value=Math.max(t.sum(e.sourceLinks,d),t.sum(e.targetLinks,d))})}function a(){for(var e,t=g,n=0;t.length;)e=[],t.forEach(function(t){t.x=n,t.dx=h,t.sourceLinks.forEach(function(t){e.indexOf(t.target)<0&&e.push(t.target)})}),t=e,++n;o(n),s((m[0]-h)/(n-1))}function o(e){g.forEach(function(t){t.sourceLinks.length||(t.x=e-1)})}function s(e){g.forEach(function(t){t.x*=e})}function l(e){function r(){a.forEach(function(e){var t,n,r,a=0,o=e.length;for(e.sort(i),r=0;r<o;++r)t=e[r],n=a-t.y,n>0&&(t.y+=n),a=t.y+t.dy+p;if((n=a-p-m[1])>0)for(a=t.y-=n,r=o-2;r>=0;--r)t=e[r],n=t.y+t.dy+p-a,n>0&&(t.y-=n),a=t.y})}function i(e,t){return e.y-t.y}var a=n.nest().key(function(e){return e.x}).sortKeys(t.ascending).entries(g).map(function(e){return e.values});!function(){var e=t.min(a,function(e){return(m[1]-(e.length-1)*p)/t.sum(e,d)});a.forEach(function(t){t.forEach(function(t,n){t.y=n,t.dy=t.value*e})}),y.forEach(function(t){t.dy=t.value*e})}(),r();for(var o=1;e>0;--e)!function(e){function n(e){return c(e.target)*e.value}a.slice().reverse().forEach(function(r){r.forEach(function(r){if(r.sourceLinks.length){var i=t.sum(r.sourceLinks,n)/t.sum(r.sourceLinks,d);r.y+=(i-c(r))*e}})})}(o*=.99),r(),function(e){function n(e){return c(e.source)*e.value}a.forEach(function(r){r.forEach(function(r){if(r.targetLinks.length){var i=t.sum(r.targetLinks,n)/t.sum(r.targetLinks,d);r.y+=(i-c(r))*e}})})}(o),r()}function u(){function e(e,t){return e.source.y-t.source.y||e.originalIndex-t.originalIndex}function t(e,t){return e.target.y-t.target.y||e.originalIndex-t.originalIndex}g.forEach(function(n){n.sourceLinks.sort(t),n.targetLinks.sort(e)}),g.forEach(function(e){var t=0,n=0;e.sourceLinks.forEach(function(e){e.sy=t,t+=e.dy}),e.targetLinks.forEach(function(e){e.ty=n,n+=e.dy})})}function c(e){return e.y+e.dy/2}function d(e){return e.value}var f={},h=24,p=8,m=[1,1],g=[],y=[];return f.nodeWidth=function(e){return arguments.length?(h=+e,f):h},f.nodePadding=function(e){return arguments.length?(p=+e,f):p},f.nodes=function(e){return arguments.length?(g=e,f):g},f.links=function(e){return arguments.length?(y=e,f):y},f.size=function(e){return arguments.length?(m=e,f):m},f.layout=function(t){return e(),i(),a(),l(t),u(),f},f.relayout=function(){return u(),f},f.link=function(){function e(e){var n=e.source.x+e.source.dx,i=e.target.x,a=r.interpolateNumber(n,i),o=a(t),s=a(1-t),l=e.source.y+e.sy,u=l+e.dy,c=e.target.y+e.ty,d=c+e.dy;return"M"+n+","+l+"C"+o+","+l+" "+s+","+c+" "+i+","+c+"L"+i+","+d+"C"+s+","+d+" "+o+","+u+" "+n+","+u+"Z"}var t=.5;return e.curvature=function(n){return arguments.length?(t=+n,e):t},e},f};e.sankey=i,Object.defineProperty(e,"__esModule",{value:!0})}),B2=B2.exports;var U2={exports:{}};!function(e,t){"object"===typeof U2.exports?t(U2.exports):"function"===typeof MC&&MC.amd?MC(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(){for(var e,t=0,r=arguments.length,i={};t<r;++t){if(!(e=arguments[t]+"")||e in i)throw new Error("illegal type: "+e);i[e]=[]}return new n(i)}function n(e){this._=e}function r(e,t){return e.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw new Error("unknown type: "+e);return{type:e,name:n}})}function i(e,t){for(var n,r=0,i=e.length;r<i;++r)if((n=e[r]).name===t)return n.value}function a(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=o,e=e.slice(0,r).concat(e.slice(r+1));break}return null!=n&&e.push({name:t,value:n}),e}var o={value:function(){}};n.prototype=t.prototype={constructor:n,on:function(e,t){var n,o=this._,s=r(e+"",o),l=-1,u=s.length;{if(!(arguments.length<2)){if(null!=t&&"function"!==typeof t)throw new Error("invalid callback: "+t);for(;++l<u;)if(n=(e=s[l]).type)o[n]=a(o[n],e.name,t);else if(null==t)for(n in o)o[n]=a(o[n],e.name,null);return this}for(;++l<u;)if((n=(e=s[l]).type)&&(n=i(o[n],e.name)))return n}},copy:function(){var e={},t=this._;for(var r in t)e[r]=t[r].slice();return new n(e)},call:function(e,t){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],a=0,n=r.length;a<n;++a)r[a].value.apply(t,i)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}},e.dispatch=t,Object.defineProperty(e,"__esModule",{value:!0})}),U2=U2.exports;var V2={exports:{}};!function(e,t){"object"===typeof V2.exports?t(V2.exports):"function"===typeof MC&&MC.amd?MC(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,a,o,s,l,u,c,d,f,h=e._root,p={data:r},m=e._x0,g=e._y0,y=e._x1,v=e._y1;if(!h)return e._root=p,e;for(;h.length;)if((u=t>=(a=(m+y)/2))?m=a:y=a,(c=n>=(o=(g+v)/2))?g=o:v=o,i=h,!(h=h[d=c<<1|u]))return i[d]=p,e;if(s=+e._x.call(null,h.data),l=+e._y.call(null,h.data),t===s&&n===l)return p.next=h,i?i[d]=p:e._root=p,e;do{i=i?i[d]=new Array(4):e._root=new Array(4),(u=t>=(a=(m+y)/2))?m=a:y=a,(c=n>=(o=(g+v)/2))?g=o:v=o}while((d=c<<1|u)===(f=(l>=o)<<1|s>=a));return i[f]=h,i[d]=p,e}function n(e){var n,r,i,a,o=e.length,s=new Array(o),l=new Array(o),u=1/0,c=1/0,d=-1/0,f=-1/0;for(r=0;r<o;++r)isNaN(i=+this._x.call(null,n=e[r]))||isNaN(a=+this._y.call(null,n))||(s[r]=i,l[r]=a,i<u&&(u=i),i>d&&(d=i),a<c&&(c=a),a>f&&(f=a));for(d<u&&(u=this._x0,d=this._x1),f<c&&(c=this._y0,f=this._y1),this.cover(u,c).cover(d,f),r=0;r<o;++r)t(this,s[r],l[r],e[r]);return this}function r(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function i(e){return e[0]}function a(e){return e[1]}function o(e,t,n){var r=new s(null==t?i:t,null==n?a:n,NaN,NaN,NaN,NaN);return null==e?r:r.addAll(e)}function s(e,t,n,r,i,a){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function l(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var u=function(e){var n=+this._x.call(null,e),r=+this._y.call(null,e);return t(this.cover(n,r),n,r,e)},c=function(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,a=(r=Math.floor(t))+1;else{if(!(n>e||e>i||r>t||t>a))return this;var o,s,l=i-n,u=this._root;switch(s=(t<(r+a)/2)<<1|e<(n+i)/2){case 0:do{o=new Array(4),o[s]=u,u=o}while(l*=2,i=n+l,a=r+l,e>i||t>a);break;case 1:do{o=new Array(4),o[s]=u,u=o}while(l*=2,n=i-l,a=r+l,n>e||t>a);break;case 2:do{o=new Array(4),o[s]=u,u=o}while(l*=2,i=n+l,r=a-l,e>i||r>t);break;case 3:do{o=new Array(4),o[s]=u,u=o}while(l*=2,n=i-l,r=a-l,n>e||r>t)}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this},d=function(){var e=[];return this.visit(function(t){if(!t.length)do{e.push(t.data)}while(t=t.next)}),e},f=function(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},h=function(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i},p=function(e,t,n){var r,i,a,o,s,l,u,c=this._x0,d=this._y0,f=this._x1,p=this._y1,m=[],g=this._root;for(g&&m.push(new h(g,c,d,f,p)),null==n?n=1/0:(c=e-n,d=t-n,f=e+n,p=t+n,n*=n);l=m.pop();)if(!(!(g=l.node)||(i=l.x0)>f||(a=l.y0)>p||(o=l.x1)<c||(s=l.y1)<d))if(g.length){var y=(i+o)/2,v=(a+s)/2;m.push(new h(g[3],y,v,o,s),new h(g[2],i,v,y,s),new h(g[1],y,a,o,v),new h(g[0],i,a,y,v)),(u=(t>=v)<<1|e>=y)&&(l=m[m.length-1],m[m.length-1]=m[m.length-1-u],m[m.length-1-u]=l)}else{var _=e-+this._x.call(null,g.data),b=t-+this._y.call(null,g.data),x=_*_+b*b;if(x<n){var w=Math.sqrt(n=x);c=e-w,d=t-w,f=e+w,p=t+w,r=g.data}}return r},m=function(e){if(isNaN(a=+this._x.call(null,e))||isNaN(o=+this._y.call(null,e)))return this;var t,n,r,i,a,o,s,l,u,c,d,f,h=this._root,p=this._x0,m=this._y0,g=this._x1,y=this._y1;if(!h)return this;if(h.length)for(;;){if((u=a>=(s=(p+g)/2))?p=s:g=s,(c=o>=(l=(m+y)/2))?m=l:y=l,t=h,!(h=h[d=c<<1|u]))return this;if(!h.length)break;(t[d+1&3]||t[d+2&3]||t[d+3&3])&&(n=t,f=d)}for(;h.data!==e;)if(r=h,!(h=h.next))return this;return(i=h.next)&&delete h.next,r?(i?r.next=i:delete r.next,this):t?(i?t[d]=i:delete t[d],(h=t[0]||t[1]||t[2]||t[3])&&h===(t[3]||t[2]||t[1]||t[0])&&!h.length&&(n?n[f]=h:this._root=h),this):(this._root=i,this)},g=function(){return this._root},y=function(){var e=0;return this.visit(function(t){if(!t.length)do{++e}while(t=t.next)}),e},v=function(e){var t,n,r,i,a,o,s=[],l=this._root;for(l&&s.push(new h(l,this._x0,this._y0,this._x1,this._y1));t=s.pop();)if(!e(l=t.node,r=t.x0,i=t.y0,a=t.x1,o=t.y1)&&l.length){var u=(r+a)/2,c=(i+o)/2;(n=l[3])&&s.push(new h(n,u,c,a,o)),(n=l[2])&&s.push(new h(n,r,c,u,o)),(n=l[1])&&s.push(new h(n,u,i,a,c)),(n=l[0])&&s.push(new h(n,r,i,u,c))}return this},_=function(e){var t,n=[],r=[];for(this._root&&n.push(new h(this._root,this._x0,this._y0,this._x1,this._y1));t=n.pop();){var i=t.node;if(i.length){var a,o=t.x0,s=t.y0,l=t.x1,u=t.y1,c=(o+l)/2,d=(s+u)/2;(a=i[0])&&n.push(new h(a,o,s,c,d)),(a=i[1])&&n.push(new h(a,c,s,l,d)),(a=i[2])&&n.push(new h(a,o,d,c,u)),(a=i[3])&&n.push(new h(a,c,d,l,u))}r.push(t)}for(;t=r.pop();)e(t.node,t.x0,t.y0,t.x1,t.y1);return this},b=function(e){return arguments.length?(this._x=e,this):this._x},x=function(e){return arguments.length?(this._y=e,this):this._y},w=o.prototype=s.prototype;w.copy=function(){var e,t,n=new s(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=l(r),n;for(e=[{source:r,target:n._root=new Array(4)}];r=e.pop();)for(var i=0;i<4;++i)(t=r.source[i])&&(t.length?e.push({source:t,target:r.target[i]=new Array(4)}):r.target[i]=l(t));return n},w.add=u,w.addAll=n,w.cover=c,w.data=d,w.extent=f,w.find=p,w.remove=m,w.removeAll=r,w.root=g,w.size=y,w.visit=v,w.visitAfter=_,w.x=b,w.y=x,e.quadtree=o,Object.defineProperty(e,"__esModule",{value:!0})}),V2=V2.exports;var H2={exports:{}};!function(e,t){"object"===typeof H2.exports?t(H2.exports):"function"===typeof MC&&MC.amd?MC(["exports"],t):t(e.d3=e.d3||{})}(this,function(e){"use strict";function t(){return y||(b(n),y=_.now()+v)}function n(){y=0}function r(){this._call=this._time=this._next=null}function i(e,t,n){var i=new r;return i.restart(e,t,n),i}function a(){t(),++f;for(var e,n=c;n;)(e=y-n._time)>=0&&n._call.call(null,e),n=n._next;--f}function o(){y=(g=_.now())+v,f=h=0;try{a()}finally{f=0,l(),y=0}}function s(){var e=_.now(),t=e-g;t>m&&(v-=t,g=e)}function l(){for(var e,t,n=c,r=1/0;n;)n._call?(r>n._time&&(r=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:c=t);d=e,u(r)}function u(e){if(!f){h&&(h=clearTimeout(h));e-y>24?(e<1/0&&(h=setTimeout(o,e-_.now()-v)),p&&(p=clearInterval(p))):(p||(g=_.now(),p=setInterval(s,m)),f=1,b(o))}}var c,d,f=0,h=0,p=0,m=1e3,g=0,y=0,v=0,_="object"===typeof performance&&performance.now?performance:Date,b="object"===typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};r.prototype=i.prototype={constructor:r,restart:function(e,n,r){if("function"!==typeof e)throw new TypeError("callback is not a function");r=(null==r?t():+r)+(null==n?0:+n),this._next||d===this||(d?d._next=this:c=this,d=this),this._call=e,this._time=r,u()},stop:function(){this._call&&(this._call=null,this._time=1/0,u())}};var x=function(e,t,n){var i=new r;return t=null==t?0:+t,i.restart(function(n){i.stop(),e(n+t)},t,n),i},w=function(e,n,i){var a=new r,o=n;return null==n?(a.restart(e,n,i),a):(n=+n,i=null==i?t():+i,a.restart(function t(r){r+=o,a.restart(t,o+=n,i),e(r)},n,i),a)};e.now=t,e.timer=i,e.timerFlush=a,e.timeout=x,e.interval=w,Object.defineProperty(e,"__esModule",{value:!0})}),H2=H2.exports;var W2={exports:{}};!function(e,t){"object"===typeof W2.exports?t(W2.exports,V2,N2,U2,H2):"function"===typeof MC&&MC.amd?MC(["exports","d3-quadtree","d3-collection","d3-dispatch","d3-timer"],t):t(e.d3=e.d3||{},e.d3,e.d3,e.d3,e.d3)}(this,function(e,t,n,r,i){"use strict";function a(e){return e.x+e.vx}function o(e){return e.y+e.vy}function s(e){return e.index}function l(e,t){var n=e.get(t);if(!n)throw new Error("missing: "+t);return n}function u(e){return e.x}function c(e){return e.y}var d=function(e,t){function n(){var n,i,a=r.length,o=0,s=0;for(n=0;n<a;++n)i=r[n],o+=i.x,s+=i.y;for(o=o/a-e,s=s/a-t,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=s}var r;return null==e&&(e=0),null==t&&(t=0),n.initialize=function(e){r=e},n.x=function(t){return arguments.length?(e=+t,n):e},n.y=function(e){return arguments.length?(t=+e,n):t},n},f=function(e){return function(){return e}},h=function(){return 1e-6*(Math.random()-.5)},p=function(e){function n(){function e(e,t,n,r,i){var a=e.data,o=e.r,s=m+o;{if(!a)return t>f+s||r<f-s||n>p+s||i<p-s;if(a.index>d.index){var l=f-a.x-a.vx,c=p-a.y-a.vy,y=l*l+c*c;y<s*s&&(0===l&&(l=h(),y+=l*l),0===c&&(c=h(),y+=c*c),y=(s-(y=Math.sqrt(y)))/y*u,d.vx+=(l*=y)*(s=(o*=o)/(g+o)),d.vy+=(c*=y)*s,a.vx-=l*(s=1-s),a.vy-=c*s)}}}for(var n,i,d,f,p,m,g,y=s.length,v=0;v<c;++v)for(i=t.quadtree(s,a,o).visitAfter(r),n=0;n<y;++n)d=s[n],m=l[d.index],g=m*m,f=d.x+d.vx,p=d.y+d.vy,i.visit(e)}function r(e){if(e.data)return e.r=l[e.data.index];for(var t=e.r=0;t<4;++t)e[t]&&e[t].r>e.r&&(e.r=e[t].r)}function i(){if(s){var t,n,r=s.length;for(l=new Array(r),t=0;t<r;++t)n=s[t],l[n.index]=+e(n,t,s)}}var s,l,u=1,c=1;return"function"!==typeof e&&(e=f(null==e?1:+e)),n.initialize=function(e){s=e,i()},n.iterations=function(e){return arguments.length?(c=+e,n):c},n.strength=function(e){return arguments.length?(u=+e,n):u},n.radius=function(t){return arguments.length?(e="function"===typeof t?t:f(+t),i(),n):e},n},m=function(e){function t(e){return 1/Math.min(p[e.source.index],p[e.target.index])}function r(t){for(var n=0,r=e.length;n<_;++n)for(var i,a,o,s,l,d,f,p=0;p<r;++p)i=e[p],a=i.source,o=i.target,s=o.x+o.vx-a.x-a.vx||h(),l=o.y+o.vy-a.y-a.vy||h(),d=Math.sqrt(s*s+l*l),d=(d-c[p])/d*t*u[p],s*=d,l*=d,o.vx-=s*(f=m[p]),o.vy-=l*f,a.vx+=s*(f=1-f),a.vy+=l*f}function i(){if(d){var t,r,i=d.length,s=e.length,f=n.map(d,g);for(t=0,p=new Array(i);t<s;++t)r=e[t],r.index=t,"object"!==typeof r.source&&(r.source=l(f,r.source)),"object"!==typeof r.target&&(r.target=l(f,r.target)),p[r.source.index]=(p[r.source.index]||0)+1,p[r.target.index]=(p[r.target.index]||0)+1;for(t=0,m=new Array(s);t<s;++t)r=e[t],m[t]=p[r.source.index]/(p[r.source.index]+p[r.target.index]);u=new Array(s),a(),c=new Array(s),o()}}function a(){if(d)for(var t=0,n=e.length;t<n;++t)u[t]=+y(e[t],t,e)}function o(){if(d)for(var t=0,n=e.length;t<n;++t)c[t]=+v(e[t],t,e)}var u,c,d,p,m,g=s,y=t,v=f(30),_=1;return null==e&&(e=[]),r.initialize=function(e){d=e,i()},r.links=function(t){return arguments.length?(e=t,i(),r):e},r.id=function(e){return arguments.length?(g=e,r):g},r.iterations=function(e){return arguments.length?(_=+e,r):_},r.strength=function(e){return arguments.length?(y="function"===typeof e?e:f(+e),a(),r):y},r.distance=function(e){return arguments.length?(v="function"===typeof e?e:f(+e),o(),r):v},r},g=10,y=Math.PI*(3-Math.sqrt(5)),v=function(e){function t(){a(),v.call("tick",l),u<c&&(m.stop(),v.call("end",l))}function a(){var t,n,r=e.length;for(u+=(f-u)*d,p.each(function(e){e(u)}),t=0;t<r;++t)n=e[t],null==n.fx?n.x+=n.vx*=h:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=h:(n.y=n.fy,n.vy=0)}function o(){for(var t,n=0,r=e.length;n<r;++n){if(t=e[n],t.index=n,isNaN(t.x)||isNaN(t.y)){var i=g*Math.sqrt(n),a=n*y;t.x=i*Math.cos(a),t.y=i*Math.sin(a)}(isNaN(t.vx)||isNaN(t.vy))&&(t.vx=t.vy=0)}}function s(t){return t.initialize&&t.initialize(e),t}var l,u=1,c=.001,d=1-Math.pow(c,1/300),f=0,h=.6,p=n.map(),m=i.timer(t),v=r.dispatch("tick","end");return null==e&&(e=[]),o(),l={tick:a,restart:function(){return m.restart(t),l},stop:function(){return m.stop(),l},nodes:function(t){return arguments.length?(e=t,o(),p.each(s),l):e},alpha:function(e){return arguments.length?(u=+e,l):u},alphaMin:function(e){return arguments.length?(c=+e,l):c},alphaDecay:function(e){return arguments.length?(d=+e,l):+d},alphaTarget:function(e){return arguments.length?(f=+e,l):f},velocityDecay:function(e){return arguments.length?(h=1-e,l):1-h},force:function(e,t){return arguments.length>1?(null==t?p.remove(e):p.set(e,s(t)),l):p.get(e)},find:function(t,n,r){var i,a,o,s,l,u=0,c=e.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)s=e[u],i=t-s.x,a=n-s.y,(o=i*i+a*a)<r&&(l=s,r=o);return l},on:function(e,t){return arguments.length>1?(v.on(e,t),l):v.on(e)}}},_=function(){function e(e){var n,l=a.length,d=t.quadtree(a,u,c).visitAfter(r);for(s=e,n=0;n<l;++n)o=a[n],d.visit(i)}function n(){if(a){var e,t,n=a.length;for(l=new Array(n),e=0;e<n;++e)t=a[e],l[t.index]=+d(t,e,a)}}function r(e){var t,n,r,i,a,o=0,s=0;if(e.length){for(r=i=a=0;a<4;++a)(t=e[a])&&(n=Math.abs(t.value))&&(o+=t.value,s+=n,r+=n*t.x,i+=n*t.y);e.x=r/s,e.y=i/s}else{t=e,t.x=t.data.x,t.y=t.data.y;do{o+=l[t.data.index]}while(t=t.next)}e.value=o}function i(e,t,n,r){if(!e.value)return!0;var i=e.x-o.x,a=e.y-o.y,u=r-t,c=i*i+a*a;if(u*u/g<c)return c<m&&(0===i&&(i=h(),c+=i*i),0===a&&(a=h(),c+=a*a),c<p&&(c=Math.sqrt(p*c)),o.vx+=i*e.value*s/c,o.vy+=a*e.value*s/c),!0;if(!(e.length||c>=m)){(e.data!==o||e.next)&&(0===i&&(i=h(),c+=i*i),0===a&&(a=h(),c+=a*a),c<p&&(c=Math.sqrt(p*c)));do{e.data!==o&&(u=l[e.data.index]*s/c,o.vx+=i*u,o.vy+=a*u)}while(e=e.next)}}var a,o,s,l,d=f(-30),p=1,m=1/0,g=.81;return e.initialize=function(e){a=e,n()},e.strength=function(t){return arguments.length?(d="function"===typeof t?t:f(+t),n(),e):d},e.distanceMin=function(t){return arguments.length?(p=t*t,e):Math.sqrt(p)},e.distanceMax=function(t){return arguments.length?(m=t*t,e):Math.sqrt(m)},e.theta=function(t){return arguments.length?(g=t*t,e):Math.sqrt(g)},e},b=function(e,t,n){function r(e){for(var r=0,i=a.length;r<i;++r){var l=a[r],u=l.x-t||1e-6,c=l.y-n||1e-6,d=Math.sqrt(u*u+c*c),f=(s[r]-d)*o[r]*e/d;l.vx+=u*f,l.vy+=c*f}}function i(){if(a){var t,n=a.length;for(o=new Array(n),s=new Array(n),t=0;t<n;++t)s[t]=+e(a[t],t,a),o[t]=isNaN(s[t])?0:+l(a[t],t,a)}}var a,o,s,l=f(.1);return"function"!==typeof e&&(e=f(+e)),null==t&&(t=0),null==n&&(n=0),r.initialize=function(e){a=e,i()},r.strength=function(e){return arguments.length?(l="function"===typeof e?e:f(+e),i(),r):l},r.radius=function(t){return arguments.length?(e="function"===typeof t?t:f(+t),i(),r):e},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(e){return arguments.length?(n=+e,r):n},r},x=function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vx+=(a[n]-t.x)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=f(.1);return"function"!==typeof e&&(e=f(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"===typeof e?e:f(+e),n(),t):o},t.x=function(r){return arguments.length?(e="function"===typeof r?r:f(+r),n(),t):e},t},w=function(e){function t(e){for(var t,n=0,o=r.length;n<o;++n)t=r[n],t.vy+=(a[n]-t.y)*i[n]*e}function n(){if(r){var t,n=r.length;for(i=new Array(n),a=new Array(n),t=0;t<n;++t)i[t]=isNaN(a[t]=+e(r[t],t,r))?0:+o(r[t],t,r)}}var r,i,a,o=f(.1);return"function"!==typeof e&&(e=f(null==e?0:+e)),t.initialize=function(e){r=e,n()},t.strength=function(e){return arguments.length?(o="function"===typeof e?e:f(+e),n(),t):o},t.y=function(r){return arguments.length?(e="function"===typeof r?r:f(+r),n(),t):e},t};e.forceCenter=d,e.forceCollide=p,e.forceLink=m,e.forceManyBody=_,e.forceRadial=b,e.forceSimulation=v,e.forceX=x,e.forceY=w,Object.defineProperty(e,"__esModule",{value:!0})}),W2=W2.exports;var q2=B2.sankey,G2=M1.keyFun,Y2=M1.repeat,X2=M1.unwrap,Z2=function(e,t,n,r){var i=e.selectAll("."+R2.cn.sankey).data(t.filter(function(e){return X2(e).trace.visible}).map(gw.bind(null,n)),G2);i.exit().remove(),i.enter().append("g").classed(R2.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").style("box-sizing","content-box").attr("transform",Mw),i.transition().ease(R2.ease).duration(R2.duration).attr("transform",Mw);var a=i.selectAll("."+R2.cn.sankeyLinks).data(Y2,G2);a.enter().append("g").classed(R2.cn.sankeyLinks,!0).style("fill","none");var o=a.selectAll("."+R2.cn.sankeyLink).data(function(e){var t={};return e.sankey.links().filter(function(e){return e.value}).map(yw.bind(null,t,e))},G2);o.enter().append("path").classed(R2.cn.sankeyLink,!0).attr("d",bw).call(Lw,i,r.linkEvents),o.style("stroke",function(e){return Tw(e)?jE.tinyRGB(zC(e.linkLineColor)):e.tinyColorHue}).style("stroke-opacity",function(e){return Tw(e)?jE.opacity(e.linkLineColor):e.tinyColorAlpha}).style("stroke-width",function(e){return Tw(e)?e.linkLineWidth:1}).style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha}),o.transition().ease(R2.ease).duration(R2.duration).attr("d",bw),o.exit().transition().ease(R2.ease).duration(R2.duration).style("opacity",0).remove();var s=i.selectAll("."+R2.cn.sankeyNodeSet).data(Y2,G2);s.enter().append("g").classed(R2.cn.sankeyNodeSet,!0),s.style("cursor",function(e){switch(e.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var l=s.selectAll("."+R2.cn.sankeyNode).data(function(e){var t=e.sankey.nodes(),n={};return dw(t),t.filter(function(e){return e.value}).map(vw.bind(null,n,e))},G2);l.enter().append("g").classed(R2.cn.sankeyNode,!0).call(_w).call(Lw,i,r.nodeEvents),l.call(Ow,o,r),l.transition().ease(R2.ease).duration(R2.duration).call(_w),l.exit().transition().ease(R2.ease).duration(R2.duration).style("opacity",0).remove();var u=l.selectAll("."+R2.cn.nodeRect).data(Y2);u.enter().append("rect").classed(R2.cn.nodeRect,!0).call(kw),u.style("stroke-width",function(e){return e.nodeLineWidth}).style("stroke",function(e){return jE.tinyRGB(zC(e.nodeLineColor))}).style("stroke-opacity",function(e){return jE.opacity(e.nodeLineColor)}).style("fill",function(e){return e.tinyColorHue}).style("fill-opacity",function(e){return e.tinyColorAlpha}),u.transition().ease(R2.ease).duration(R2.duration).call(kw);var c=l.selectAll("."+R2.cn.nodeCapture).data(Y2);c.enter().append("rect").classed(R2.cn.nodeCapture,!0).style("fill-opacity",0),c.attr("x",function(e){return e.zoneX}).attr("y",function(e){return e.zoneY}).attr("width",function(e){return e.zoneWidth}).attr("height",function(e){return e.zoneHeight});var d=l.selectAll("."+R2.cn.nodeCentered).data(Y2);d.enter().append("g").classed(R2.cn.nodeCentered,!0).attr("transform",Aw),d.transition().ease(R2.ease).duration(R2.duration).attr("transform",Aw);var f=d.selectAll("."+R2.cn.nodeLabelGuide).data(Y2);f.enter().append("path").classed(R2.cn.nodeLabelGuide,!0).attr("id",function(e){return e.uniqueNodeLabelPathId}).attr("d",Cw).attr("transform",Sw),f.transition().ease(R2.ease).duration(R2.duration).attr("d",Cw).attr("transform",Sw);var h=d.selectAll("."+R2.cn.nodeLabel).data(Y2);h.enter().append("text").classed(R2.cn.nodeLabel,!0).attr("transform",Ew).style("user-select","none").style("cursor","default").style("fill","black"),h.style("text-shadow",function(e){return e.horizontal?"-1px 1px 1px #fff, 1px 1px 1px #fff, 1px -1px 1px #fff, -1px -1px 1px #fff":"none"}).each(function(e){PP.font(h,e.textFont)}),h.transition().ease(R2.ease).duration(R2.duration).attr("transform",Ew);var p=h.selectAll("."+R2.cn.nodeLabelTextPath).data(Y2);p.enter().append("textPath").classed(R2.cn.nodeLabelTextPath,!0).attr("alignment-baseline","middle").attr("xlink:href",function(e){return"#"+e.uniqueNodeLabelPathId}).attr("startOffset",Iw).style("fill",Pw),p.text(function(e){return e.horizontal||e.node.dy>5?e.node.label:""}).attr("text-anchor",function(e){return e.horizontal&&e.left?"end":"start"}),p.transition().ease(R2.ease).duration(R2.duration).attr("startOffset",Iw).style("fill",Pw)},J2=R2.cn,K2=uE._,Q2=function(e,t){var n=e._fullLayout,r=n._paper,i=n._size,a=function(t,n){var r=n.link;r.originalEvent=CC.event,e._hoverdata=[r],kO.click(e,{target:!0})},o=function(t,n,r){CC.select(t).call(qw.bind(0,n,r,!0)),e.emit("plotly_hover",{event:CC.event,points:[n.link]})},s=K2(e,"source:")+" ",l=K2(e,"target:")+" ",u=K2(e,"incoming flow count:")+" ",c=K2(e,"outgoing flow count:")+" ",d=function(t,r){var i=r.link.trace,a=e._fullLayout._paperdiv.node().getBoundingClientRect(),o=t.getBoundingClientRect(),u=o.left+o.width/2,c=o.top+o.height/2,d=kO.loneHover({x:u-a.left,y:c-a.top,name:CC.format(r.valueFormat)(r.link.value)+r.valueSuffix,text:[r.link.label||"",s+r.link.source.label,l+r.link.target.label].filter(Nw).join("<br>"),color:Yw(i,"bgcolor")||jE.addOpacity(r.tinyColorHue,1),borderColor:Yw(i,"bordercolor"),fontFamily:Yw(i,"font.family"),fontSize:Yw(i,"font.size"),fontColor:Yw(i,"font.color"),idealAlign:CC.event.x<u?"right":"left"},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e});jw(d,.65),Bw(d)},f=function(t,r,i){CC.select(t).call(Gw.bind(0,r,i,!0)),e.emit("plotly_unhover",{event:CC.event,points:[r.link]}),kO.loneUnhover(n._hoverlayer.node())},h=function(t,n,r){var i=n.node;i.originalEvent=CC.event,e._hoverdata=[i],CC.select(t).call(Ww,n,r),kO.click(e,{target:!0})},p=function(t,n,r){CC.select(t).call(Hw,n,r),e.emit("plotly_hover",{event:CC.event,points:[n.node]})},m=function(t,r){var i=r.node.trace,a=CC.select(t).select("."+J2.nodeRect),o=e._fullLayout._paperdiv.node().getBoundingClientRect(),s=a.node().getBoundingClientRect(),l=s.left-2-o.left,d=s.right+2-o.left,f=s.top+s.height/4-o.top,h=kO.loneHover({x0:l,x1:d,y:f,name:CC.format(r.valueFormat)(r.node.value)+r.valueSuffix,text:[r.node.label,u+r.node.targetLinks.length,c+r.node.sourceLinks.length].filter(Nw).join("<br>"),color:Yw(i,"bgcolor")||r.tinyColorHue,borderColor:Yw(i,"bordercolor"),fontFamily:Yw(i,"font.family"),fontSize:Yw(i,"font.size"),fontColor:Yw(i,"font.color"),idealAlign:"left"},{container:n._hoverlayer.node(),outerContainer:n._paper.node(),gd:e});jw(h,.85),Bw(h)},g=function(t,r,i){CC.select(t).call(Ww,r,i),e.emit("plotly_unhover",{event:CC.event,points:[r.node]}),kO.loneUnhover(n._hoverlayer.node())};Z2(r,t,{width:i.w,height:i.h,margin:{t:i.t,r:i.r,b:i.b,l:i.l}},{linkEvents:{hover:o,follow:d,unhover:f,select:a},nodeEvents:{hover:p,follow:m,unhover:g,select:h}})},$2={},e3=TE.overrideAll,t3=_L.getModuleCalcData;$2.name="sankey",$2.baseLayoutAttrOverrides=e3({hoverlabel:bO.hoverlabel},"plot","nested"),$2.plot=function(e){var t=t3(e.calcdata,"sankey");Q2(e,t)},$2.clean=function(e,t,n,r){var i=r._has&&r._has("sankey"),a=t._has&&t._has("sankey");i&&!a&&r._paperdiv.selectAll(".sankey").remove()};var n3=Xw,r3=M1.wrap,i3=function(e,t){return Zw(t.node.label,t.link.source,t.link.target)&&(uE.error("Circularity is present in the Sankey data. Removing all nodes and links."),t.link.label=[],t.link.source=[],t.link.target=[],t.link.value=[],t.link.color=[],t.node.label=[],t.node.color=[]),r3({link:t.link,node:t.node})},a3=qD.defaults,o3=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,z2,n,r)}i("node.label"),i("node.pad"),i("node.thickness"),i("node.line.color"),i("node.line.width");var a=r.colorway,o=function(e){return a[e%a.length]};i("node.color",t.node.label.map(function(e,t){return jE.addOpacity(o(t),.8)})),i("link.label"),i("link.source"),i("link.target"),i("link.value"),i("link.line.color"),i("link.line.width"),i("link.color",t.link.value.map(function(){return zC(r.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)"})),a3(t,r,i),i("orientation"),i("valueformat"),i("valuesuffix"),i("arrangement"),uE.coerceFont(i,"textfont",uE.extendFlat({},r.font));var s=function(e,n){return-1===t.link.source.indexOf(n)&&-1===t.link.target.indexOf(n)};t.node.label.some(s)&&uE.warn("Some of the nodes are neither sources nor targets, they will not be displayed.")},s3={};s3.attributes=z2,s3.supplyDefaults=o3,s3.calc=i3,s3.plot=Q2,s3.moduleType="trace",s3.name="sankey",s3.basePlotModule=$2,s3.categories=["noOpacity"],s3.meta={};var l3=s3,u3=l3,c3={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"},d3={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]},f3={},h3=WC.extendFlat,p3=TE.overrideAll,m3=YP.line,g3=YP.marker,y3=g3.line,v3=f3=p3({x:YP.x,y:YP.y,z:{valType:"data_array"},text:h3({},YP.text,{}),hovertext:h3({},YP.hovertext,{}),mode:h3({},YP.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:Jw("x"),y:Jw("y"),z:Jw("z")},connectgaps:YP.connectgaps,line:h3({width:m3.width,dash:{valType:"enumerated",values:Object.keys(d3),dflt:"solid"},showscale:{valType:"boolean",dflt:!1}},FE()),marker:h3({symbol:{valType:"enumerated",values:Object.keys(c3),dflt:"circle",arrayOk:!0},size:h3({},g3.size,{dflt:8}),sizeref:g3.sizeref,sizemin:g3.sizemin,sizemode:g3.sizemode,opacity:h3({},g3.opacity,{arrayOk:!1}),showscale:g3.showscale,colorbar:g3.colorbar,line:h3({width:h3({},y3.width,{arrayOk:!1})},FE())},FE()),textposition:h3({},YP.textposition,{dflt:"top center"}),textfont:YP.textfont,hoverinfo:h3({},$C.hoverinfo)},"calc","nested");v3.x.editType=v3.y.editType=v3.z.editType="calc+clearAxisTypes";var _3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),b3=OW(["precision mediump float;\n#define GLSLIFY 1\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(fragPosition, clipBounds[0])) || any(greaterThan(fragPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = opacity * fragColor;\n}"]),x3=function(e){return Oq(e,_3,b3,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])},w3=ek,k3=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T3=Kw.prototype;T3.isOpaque=function(){return this.opacity>=1},T3.isTransparent=function(){return this.opacity<1},T3.drawTransparent=T3.draw=function(e){var t=this.gl,n=this.shader.uniforms;this.shader.bind();var r=n.view=e.view||k3,i=n.projection=e.projection||k3;n.model=e.model||k3,n.clipBounds=this.clipBounds,n.opacity=this.opacity;var a=r[12],o=r[13],s=r[14],l=r[15],u=this.pixelRatio*(i[3]*a+i[7]*o+i[11]*s+i[15]*l)/t.drawingBufferHeight;this.vao.bind();for(var c=0;c<3;++c)t.lineWidth(this.lineWidth[c]),n.capSize=this.capSize[c]*u,this.lineCount[c]&&t.drawArrays(t.LINES,this.lineOffset[c],this.lineCount[c]);this.vao.unbind()};var M3=function(){for(var e=new Array(3),t=0;t<3;++t){for(var n=[],r=1;r<=2;++r)for(var i=-1;i<=1;i+=2){var a=(r+t)%3,o=[0,0,0];o[a]=i,n.push(o)}e[t]=n}return e}();T3.update=function(e){e=e||{},"lineWidth"in e&&(this.lineWidth=e.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in e&&(this.capSize=e.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),"opacity"in e&&(this.opacity=e.opacity);var t=e.color||[[0,0,0],[0,0,0],[0,0,0]],n=e.position,r=e.error;if(Array.isArray(t[0])||(t=[t,t,t]),n&&r){var i=[],a=n.length,o=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var s=0;s<3;++s){this.lineOffset[s]=o;e:for(var l=0;l<a;++l){for(var u=n[l],c=0;c<3;++c)if(isNaN(u[c])||!isFinite(u[c]))continue e;var d=r[l],f=t[s];if(Array.isArray(f[0])&&(f=t[l]),3===f.length&&(f=[f[0],f[1],f[2],1]),!isNaN(d[0][s])&&!isNaN(d[1][s])){if(d[0][s]<0){var h=u.slice();h[s]+=d[0][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,h[0],h[1],h[2],f[0],f[1],f[2],f[3],0,0,0),Qw(this.bounds,h),o+=2+$w(i,h,f,s)}if(d[1][s]>0){var h=u.slice();h[s]+=d[1][s],i.push(u[0],u[1],u[2],f[0],f[1],f[2],f[3],0,0,0,h[0],h[1],h[2],f[0],f[1],f[2],f[3],0,0,0),Qw(this.bounds,h),o+=2+$w(i,h,f,s)}}}this.lineCount[s]=o-this.lineOffset[s]}this.buffer.update(i)}},T3.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};var A3={},C3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvoid main() {\n  vec4 projected = projection * view * model * vec4(position, 1.0);\n  vec4 tangentClip = projection * view * model * vec4(nextPosition - position, 0.0);\n  vec2 tangent = normalize(screenShape * tangentClip.xy);\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(tangent.y, -tangent.x) / screenShape;\n\n  gl_Position = vec4(projected.xy + projected.w * offset, projected.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),S3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),E3=OW(["precision mediump float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\nlowp vec4 encode_float_1540259130(highp float v) {\n  highp float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  highp vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  highp float e = floor(log2(av));\n  highp float m = av * pow(2.0, -e) - 1.0;\n  \n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n  \n  //Unpack exponent\n  highp float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0; \n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if(any(lessThan(worldPosition, clipBounds[0])) || any(greaterThan(worldPosition, clipBounds[1]))) {\n    discard;\n  }\n  gl_FragColor = vec4(pickId/255.0, encode_float_1540259130(pixelArcLength).xyz);\n}"]),P3=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];A3.createShader=function(e){return Oq(e,C3,S3,null,P3)},A3.createPickShader=function(e){return Oq(e,C3,E3,null,P3)};var I3=tk,L3=new Uint8Array(4),O3=new Float32Array(L3.buffer),z3=ok,R3=A3.createShader,D3=A3.createPickShader,N3=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],F3=ak.prototype;F3.isTransparent=function(){return this.opacity<1},F3.isOpaque=function(){return this.opacity>=1},F3.pickSlots=1,F3.setPickBase=function(e){this.pickId=e},F3.drawTransparent=F3.draw=function(e){var t=this.gl,n=this.shader,r=this.vao;n.bind(),n.uniforms={model:e.model||N3,view:e.view||N3,projection:e.projection||N3,clipBounds:rk(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind()},F3.drawPick=function(e){var t=this.gl,n=this.pickShader,r=this.vao;n.bind(),n.uniforms={model:e.model||N3,view:e.view||N3,projection:e.projection||N3,pickId:this.pickId,clipBounds:rk(this.clipBounds),screenShape:[t.drawingBufferWidth,t.drawingBufferHeight],pixelRatio:this.pixelRatio},r.bind(),r.draw(t.TRIANGLE_STRIP,this.vertexCount),r.unbind()},F3.update=function(e){var t,n;this.dirty=!0;var r=!!e.connectGaps;"dashScale"in e&&(this.dashScale=e.dashScale),"opacity"in e&&(this.opacity=+e.opacity);var i=e.position||e.positions;if(i){var a=e.color||e.colors||[0,0,0,1],o=e.lineWidth||1,s=[],l=[],u=[],c=0,d=0,f=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],h=!1;e:for(t=1;t<i.length;++t){var p=i[t-1],m=i[t];for(l.push(c),u.push(p.slice()),n=0;n<3;++n){if(isNaN(p[n])||isNaN(m[n])||!isFinite(p[n])||!isFinite(m[n])){if(!r&&s.length>0){for(var g=0;g<24;++g)s.push(s[s.length-12]);d+=2,h=!0}continue e}f[0][n]=Math.min(f[0][n],p[n],m[n]),f[1][n]=Math.max(f[1][n],p[n],m[n])}var y,v;Array.isArray(a[0])?(y=a[t-1],v=a[t]):y=v=a,3===y.length&&(y=[y[0],y[1],y[2],1]),3===v.length&&(v=[v[0],v[1],v[2],1]);var _;_=Array.isArray(o)?o[t-1]:o;var b=c;if(c+=nk(p,m),h){for(n=0;n<2;++n)s.push(p[0],p[1],p[2],m[0],m[1],m[2],b,_,y[0],y[1],y[2],y[3]);d+=2,h=!1}s.push(p[0],p[1],p[2],m[0],m[1],m[2],b,_,y[0],y[1],y[2],y[3],p[0],p[1],p[2],m[0],m[1],m[2],b,-_,y[0],y[1],y[2],y[3],m[0],m[1],m[2],p[0],p[1],p[2],c,-_,v[0],v[1],v[2],v[3],m[0],m[1],m[2],p[0],p[1],p[2],c,_,v[0],v[1],v[2],v[3]),d+=4}if(this.buffer.update(s),l.push(c),u.push(i[i.length-1].slice()),this.bounds=f,this.vertexCount=d,this.points=u,this.arcLength=l,"dashes"in e){var x=e.dashes,w=x.slice();for(w.unshift(0),t=1;t<w.length;++t)w[t]=w[t-1]+w[t];var k=hW(new Array(1024),[256,1,4]);for(t=0;t<256;++t){for(n=0;n<4;++n)k.set(t,0,n,0);1&KY.le(w,w[w.length-1]*t/255)?k.set(t,0,0,0):k.set(t,0,0,255)}this.texture.setPixels(k)}}},F3.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},F3.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=I3(e.value[0],e.value[1],e.value[2],0),n=KY.le(this.arcLength,t);if(n<0)return null;if(n===this.arcLength.length-1)return new ik(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),n);for(var r=this.points[n],i=this.points[Math.min(n+1,this.points.length-1)],a=(t-this.arcLength[n])/(this.arcLength[n+1]-this.arcLength[n]),o=1-a,s=[0,0,0],l=0;l<3;++l)s[l]=o*r[l]+a*i[l];var u=Math.min(a<.5?n:n+1,this.points.length-1);return new ik(t,s,u,this.points[u])};var j3=sk,B3={},U3={},V3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   || \n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n    \n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),H3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0])) || any(greaterThan(position, clipBounds[1]))) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n    \n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),W3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(position, clipBounds[0]))   ||\n     any(greaterThan(position, clipBounds[1])) ) {\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),q3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   ||\n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = interpColor * opacity;\n  }\n}\n"]),G3=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if(any(lessThan(dataCoordinate, fragClipBounds[0]))   || \n     any(greaterThan(dataCoordinate, fragClipBounds[1])) ) {\n    discard;\n  } else {\n    gl_FragColor = vec4(pickGroup, pickId.bgr);\n  }\n}"]),Y3=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],X3={vertex:V3,fragment:q3,attributes:Y3},Z3={vertex:H3,fragment:q3,attributes:Y3},J3={vertex:W3,fragment:q3,attributes:Y3},K3={vertex:V3,fragment:G3,attributes:Y3},Q3={vertex:H3,fragment:G3,attributes:Y3},$3={vertex:W3,fragment:G3,attributes:Y3};U3.createPerspective=function(e){return lk(e,X3)},U3.createOrtho=function(e){return lk(e,Z3)},U3.createProject=function(e){return lk(e,J3)},U3.createPickPerspective=function(e){return lk(e,K3)},U3.createPickOrtho=function(e){return lk(e,Q3)},U3.createPickProject=function(e){return lk(e,$3)};var e5=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t5=_k,n5=fk.prototype;n5.pickSlots=1,n5.setPickBase=function(e){this.pickId=e},n5.isTransparent=function(){if(this.opacity<1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]<1)return!0;return!1},n5.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this.axesProject[e]&&this.projectOpacity[e]>=1)return!0;return!1};var r5=[0,0],i5=[0,0,0],a5=[0,0,0],o5=[0,0,0,1],s5=[0,0,0,1],l5=e5.slice(),u5=[0,0,0],c5=[[0,0,0],[0,0,0]],d5=[-1e8,-1e8,-1e8],f5=[1e8,1e8,1e8],h5=[d5,f5];n5.draw=function(e){vk(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,!1,!1)},n5.drawTransparent=function(e){vk(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,e,!0,!1)},n5.drawPick=function(e){vk(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,e,!1,!0)},n5.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=e.value[2]+(e.value[1]<<8)+(e.value[0]<<16);if(t>=this.pointCount||t<0)return null;var n=this.points[t],r=this._selectResult;r.index=t;for(var i=0;i<3;++i)r.position[i]=r.dataCoordinate[i]=n[i];return r},n5.highlight=function(e){if(e){var t=e.index,n=255&t,r=t>>8&255,i=t>>16&255;this.highlightId=[n/255,r/255,i/255,0]}else this.highlightId=[1,1,1,1]},n5.update=function(e){if(e=e||{},"perspective"in e&&(this.useOrtho=!e.perspective),"orthographic"in e&&(this.useOrtho=!!e.orthographic),"lineWidth"in e&&(this.lineWidth=e.lineWidth),"project"in e)if(Array.isArray(e.project))this.axesProject=e.project;else{var t=!!e.project;this.axesProject=[t,t,t]}if("projectScale"in e)if(Array.isArray(e.projectScale))this.projectScale=e.projectScale.slice();else{var n=+e.projectScale;this.projectScale=[n,n,n]}if("projectOpacity"in e)if(Array.isArray(e.projectOpacity))this.projectOpacity=e.projectOpacity.slice();else{var n=+e.projectOpacity;this.projectOpacity=[n,n,n]}"opacity"in e&&(this.opacity=e.opacity),this.dirty=!0;var r=e.position;if(r){var i=e.font||"normal",a=e.alignment||[0,0],o=[1/0,1/0,1/0],s=[-1/0,-1/0,-1/0],l=e.glyph,u=e.color,c=e.size,d=e.angle,f=e.lineColor,h=0,p=0,m=0,g=r.length;e:for(var y=0;y<g;++y){for(var v=r[y],_=0;_<3;++_)if(isNaN(v[_])||!isFinite(v[_]))continue e;var b;b=Array.isArray(l)?j3(l[y],i):l?j3(l,i):j3("\u25cf",i);var x=b[0],w=b[1],k=b[2];p+=3*x.cells.length,m+=2*w.edges.length}var T=p+m,M=EW.mallocFloat(3*T),A=EW.mallocFloat(4*T),C=EW.mallocFloat(2*T),S=EW.mallocUint32(T),E=[0,a[1]],P=0,I=p,L=[0,0,0,1],O=[0,0,0,1],z=Array.isArray(u)&&Array.isArray(u[0]),R=Array.isArray(f)&&Array.isArray(f[0]);e:for(var y=0;y<g;++y){for(var v=r[y],_=0;_<3;++_){if(isNaN(v[_])||!isFinite(v[_])){h+=1;continue e}s[_]=Math.max(s[_],v[_]),o[_]=Math.min(o[_],v[_])}var b;b=Array.isArray(l)?j3(l[y],i):l?j3(l,i):j3("\u25cf",i);var x=b[0],w=b[1],k=b[2];if(Array.isArray(u)){var D;if(D=z?u[y]:u,3===D.length){for(var _=0;_<3;++_)L[_]=D[_];L[3]=1}else if(4===D.length)for(var _=0;_<4;++_)L[_]=D[_]}else L[0]=L[1]=L[2]=0,L[3]=1;if(Array.isArray(f)){var D;if(D=R?f[y]:f,3===D.length){for(var _=0;_<3;++_)O[_]=D[_];O[_]=1}else if(4===D.length)for(var _=0;_<4;++_)O[_]=D[_]}else O[0]=O[1]=O[2]=0,O[3]=1;var N=.5;Array.isArray(c)?N=+c[y]:c?N=+c:this.useOrtho&&(N=12);var F=0;Array.isArray(d)?F=+d[y]:d&&(F=+d);for(var j=Math.cos(F),B=Math.sin(F),v=r[y],_=0;_<3;++_)s[_]=Math.max(s[_],v[_]),o[_]=Math.min(o[_],v[_]);a[0]<0?E[0]=a[0]*(1+k[1][0]):a[0]>0&&(E[0]=-a[0]*(1+k[0][0]));for(var U=x.cells,V=x.positions,_=0;_<U.length;++_)for(var H=U[_],W=0;W<3;++W){for(var q=0;q<3;++q)M[3*P+q]=v[q];for(var q=0;q<4;++q)A[4*P+q]=L[q];S[P]=h;var G=V[H[W]];C[2*P]=N*(j*G[0]-B*G[1]+E[0]),C[2*P+1]=N*(B*G[0]+j*G[1]+E[1]),P+=1}for(var U=w.edges,V=w.positions,_=0;_<U.length;++_)for(var H=U[_],W=0;W<2;++W){for(var q=0;q<3;++q)M[3*I+q]=v[q];for(var q=0;q<4;++q)A[4*I+q]=O[q];S[I]=h;var G=V[H[W]];C[2*I]=N*(j*G[0]-B*G[1]+E[0]),C[2*I+1]=N*(B*G[0]+j*G[1]+E[1]),I+=1}h+=1}this.vertexCount=p,this.lineVertexCount=m,this.pointBuffer.update(M),this.colorBuffer.update(A),this.glyphBuffer.update(C),this.idBuffer.update(new Uint32Array(S)),EW.free(M),EW.free(A),EW.free(C),EW.free(S),this.bounds=[o,s],this.points=r,this.pointCount=r.length}},n5.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};var p5=eS.defaultLine,m5=BZ(p5),g5=1,y5=kk,v5=Ak,_5=Ck.prototype;_5.handlePick=function(e){if(e.object&&(e.object===this.linePlot||e.object===this.delaunayMesh||e.object===this.textMarkers||e.object===this.scatterPlot)){e.object.highlight&&e.object.highlight(null),this.scatterPlot&&(e.object=this.scatterPlot,this.scatterPlot.highlight(e.data)),this.textLabels?void 0!==this.textLabels[e.data.index]?e.textLabel=this.textLabels[e.data.index]:e.textLabel=this.textLabels:e.textLabel="";var t=e.index=e.data.index;return e.traceCoordinate=[this.data.x[t],this.data.y[t],this.data.z[t]],!0}},_5.update=function(e){var t,n,r,i,a=this.scene.glplot.gl,o=d3.solid;this.data=e;var s=zk(this.scene,e);"mode"in s&&(this.mode=s.mode),"lineDashes"in s&&s.lineDashes in d3&&(o=d3[s.lineDashes]),this.color=Rk(s.scatterColor)||Rk(s.lineColor),this.dataPoints=s.position,t={gl:a,position:s.position,color:s.lineColor,lineWidth:s.lineWidth||1,dashes:o[0],dashScale:o[1],opacity:e.opacity,connectGaps:e.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(t):(this.linePlot=z3(t),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var l=e.opacity;if(e.marker&&e.marker.opacity&&(l*=e.marker.opacity),n={gl:a,position:s.position,color:s.scatterColor,size:s.scatterSize,glyph:s.scatterMarker,opacity:l,orthographic:!0,lineWidth:s.scatterLineWidth,lineColor:s.scatterLineColor,project:s.project,projectScale:s.projectScale,projectOpacity:s.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(n):(this.scatterPlot=t5(n),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),i={gl:a,position:s.position,glyph:s.text,color:s.textColor,size:s.textSize,angle:s.textAngle,alignment:s.textOffset,font:s.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:e.opacity},this.textLabels=e.hovertext||e.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(i):(this.textMarkers=t5(i),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),r={gl:a,position:s.position,color:s.errorColor,error:s.errorBounds,lineWidth:s.errorLineWidth,capSize:s.errorCapSize,opacity:e.opacity},this.errorBars?s.errorBounds?this.errorBars.update(r):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):s.errorBounds&&(this.errorBars=w3(r),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),s.delaunayAxis>=0){var u=Sk(s.position,s.delaunayColor,s.delaunayAxis);u.opacity=e.opacity,this.delaunayMesh?this.delaunayMesh.update(u):(u.gl=a,this.delaunayMesh=l1(u),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},_5.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};var b5=Dk,x5=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,f3,n,r)}if(!Nk(e,t,i,r))return void(t.visible=!1);i("text"),i("hovertext"),i("mode"),EP.hasLines(t)&&(i("connectgaps"),hH(e,t,n,r,i)),EP.hasMarkers(t)&&mH(e,t,n,r,i,{noSelect:!0}),EP.hasText(t)&&gH(0,0,r,i,{noSelect:!0});var a=(t.line||{}).color,o=(t.marker||{}).color;i("surfaceaxis")>=0&&i("surfacecolor",a||o);for(var s=["x","y","z"],l=0;l<3;++l){var u="projection."+s[l];i(u+".show")&&(i(u+".opacity"),i(u+".scale"))}var c=rS.getComponentMethod("errorbars","supplyDefaults");c(e,t,n,{axis:"z"}),c(e,t,n,{axis:"y",inherit:"z"}),c(e,t,n,{axis:"x",inherit:"z"})},w5={};w5.plot=b5,w5.attributes=f3,w5.markerSymbols=c3,w5.supplyDefaults=x5,w5.colorbar=YO,w5.calc=C2,w5.moduleType="trace",w5.name="scatter3d",w5.basePlotModule=N$,w5.categories=["gl3d","symbols","markerColorscale","showLegend"],w5.meta={};var k5=w5,T5=k5,M5=WC.extendFlat,A5=YP.marker,C5=YP.line,S5=A5.line,E5={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:M5({},YP.mode,{dflt:"markers"}),text:M5({},YP.text,{}),line:{color:C5.color,width:C5.width,dash:C5.dash,shape:M5({},C5.shape,{values:["linear","spline"]}),smoothing:C5.smoothing,editType:"calc"},connectgaps:YP.connectgaps,fill:M5({},YP.fill,{values:["none","toself","tonext"]}),fillcolor:YP.fillcolor,marker:M5({symbol:A5.symbol,opacity:A5.opacity,maxdisplayed:A5.maxdisplayed,size:A5.size,sizeref:A5.sizeref,sizemin:A5.sizemin,sizemode:A5.sizemode,line:M5({width:S5.width,editType:"calc"},FE()),gradient:A5.gradient,editType:"calc"},FE(),{showscale:A5.showscale,colorbar:RE}),textfont:YP.textfont,textposition:YP.textposition,selected:YP.selected,unselected:YP.unselected,hoverinfo:M5({},$C.hoverinfo,{flags:["a","b","text","name"]}),hoveron:YP.hoveron},P5=lH.calcMarkerSize,I5=function(e,t){var n=t.carpetTrace=$F(e,t);if(n&&n.visible&&"legendonly"!==n.visible){var r;t.xaxis=n.xaxis,t.yaxis=n.yaxis;var i,a,o=t.a.length,s=new Array(o),l=!1;for(r=0;r<o;r++)if(i=t.a[r],a=t.b[r],SC(i)&&SC(a)){var u=n.ab2xy(+i,+a,!0),c=n.isVisible(+i,+a);c||(l=!0),s[r]={x:u[0],y:u[1],a:i,b:a,vis:c}}else s[r]={x:!1,y:!1};return t._needsCull=l,s[0].carpet=n,s[0].trace=t,P5(t,o),aH(t),gN(s,t),OL(s,t),s}},L5=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,E5,n,r)}i("carpet"),t.xaxis="x",t.yaxis="y";var a,o=i("a"),s=i("b");if(!(a=Math.min(o.length,s.length)))return void(t.visible=!1);o&&a<o.length&&(t.a=o.slice(0,a)),s&&a<s.length&&(t.b=s.slice(0,a)),i("text"),i("mode",a<WP.PTS_LINESONLY?"lines+markers":"lines"),EP.hasLines(t)&&(hH(e,t,n,r,i),pH(0,0,i),i("connectgaps")),EP.hasMarkers(t)&&mH(e,t,n,r,i,{gradient:!0}),EP.hasText(t)&&gH(0,0,r,i);var l=[];(EP.hasMarkers(t)||EP.hasText(t))&&(i("marker.maxdisplayed"),l.push("points")),i("fill"),"none"!==t.fill&&(dH(0,t,n,i),EP.hasLines(t)||pH(0,0,i)),"tonext"!==t.fill&&"toself"!==t.fill||l.push("fills"),i("hoveron",l.join("+")||"points"),uE.coerceSelectionMarkerOpacity(t,i)},O5=function(e,t,n,r,i){var a=r[i];return e.a=a.a,e.b=a.b,e},z5=function(e,t,n,r){function i(e,t){var n;n=e.labelprefix&&e.labelprefix.length>0?e.labelprefix.replace(/ = $/,""):e._hovertitle,g.push(n+": "+t.toFixed(3)+e.labelsuffix)}var a=_H(e,t,n,r);if(a&&!1!==a[0].index){var o=a[0];if(void 0===o.index){var s=1-o.y0/e.ya._length,l=e.xa._length,u=l*s/2,c=l-u;return o.x0=Math.max(Math.min(o.x0,c),u),o.x1=Math.max(Math.min(o.x1,c),u),a}var d=o.cd[o.index];o.a=d.a,o.b=d.b,o.xLabelVal=void 0,o.yLabelVal=void 0;var f=o.trace,h=f._carpet,p=d.hi||f.hoverinfo,m=p.split("+"),g=[];-1!==m.indexOf("all")&&(m=["a","b"]),-1!==m.indexOf("a")&&i(h.aaxis,d.a),-1!==m.indexOf("b")&&i(h.baxis,d.b);var y=h.ab2ij([d.a,d.b]),v=Math.floor(y[0]),_=y[0]-v,b=Math.floor(y[1]),x=y[1]-b,w=h.evalxy([],v,b,_,x);return g.push("y: "+w[1].toFixed(3)),o.extraText=g.join("<br>"),a}},R5=function(e,t,n){var r,i,a,o=n[0][0].carpet,s={xaxis:PI.getFromId(e,o.xaxis||"x"),yaxis:PI.getFromId(e,o.yaxis||"y"),plot:t.plot};for(AH(e,s,n),r=0;r<n.length;r++)i=n[r][0].trace,a=s.plot.selectAll("g.trace"+i.uid+" .js-line"),PP.setClipUrl(a,o._clipPathId)},D5={};D5.attributes=E5,D5.supplyDefaults=L5,D5.colorbar=YO,D5.calc=I5,D5.plot=R5,D5.style=SH.style,D5.hoverPoints=z5,D5.selectPoints=CH,D5.eventData=O5,D5.moduleType="trace",D5.name="scattercarpet",D5.basePlotModule=xL,D5.categories=["carpet","symbols","markerColorscale","showLegend","carpetDependent"],D5.meta={};var N5=D5,F5=N5,j5=AC.BADNUM,B5=uE._,U5=function(e,t){for(var n=Array.isArray(t.locations),r=n?t.locations.length:t._length,i=new Array(r),a=0;a<r;a++){var o=i[a]={};if(n){var s=t.locations[a];o.loc="string"===typeof s?s:null}else{var l=t.lon[a],u=t.lat[a];SC(l)&&SC(u)?o.lonlat=[+l,+u]:o.lonlat=[j5,j5]}}return gN(i,t),aH(t),OL(i,t),r&&(i[0].t={labels:{lat:B5(e,"lat:")+" ",lon:B5(e,"lon:")+" "}}),i},V5=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,dN,n,r)}if(!Fk(e,t,i))return void(t.visible=!1);i("text"),i("hovertext"),i("mode"),EP.hasLines(t)&&(hH(e,t,n,r,i),i("connectgaps")),EP.hasMarkers(t)&&mH(e,t,n,r,i,{gradient:!0}),EP.hasText(t)&&gH(0,0,r,i),i("fill"),"none"!==t.fill&&dH(0,t,n,i)},H5=function(e,t){return e.lon=t.lon,e.lat=t.lat,e.location=t.loc?t.loc:null,e},W5=AC.BADNUM,q5=function(e,t,n){function r(e){var r=e.lonlat;if(r[0]===W5)return 1/0;if(u(r))return 1/0;var i=c(r),a=c([t,n]),o=Math.abs(i[0]-a[0]),s=Math.abs(i[1]-a[1]),l=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(o*o+s*s)-l,1-3/l)}var i=e.cd,a=i[0].trace,o=e.xa,s=e.ya,l=e.subplot,u=l.projection.isLonLatOverEdges,c=l.project;if(kO.getClosest(i,r,e),!1!==e.index){var d=i[e.index],f=d.lonlat,h=[o.c2p(f),s.c2p(f)],p=d.mrc||1;return e.x0=h[0]-p,e.x1=h[0]+p,e.y0=h[1]-p,e.y1=h[1]+p,e.loc=d.loc,e.lon=f[0],e.lat=f[1],e.color=vH(a,d),e.extraText=jk(a,d,l.mockAxis,i[0].t.labels),[e]}},G5={},Y5=AC.BADNUM;G5.calcTraceToLineCoords=function(e){for(var t=e[0].trace,n=t.connectgaps,r=[],i=[],a=0;a<e.length;a++){var o=e[a],s=o.lonlat;s[0]!==Y5?i.push(s):!n&&i.length>0&&(r.push(i),i=[])}return i.length>0&&r.push(i),r},G5.makeLine=function(e){return 1===e.length?{type:"LineString",coordinates:e[0]}:{type:"MultiLineString",coordinates:e}},G5.makePolygon=function(e){if(1===e.length)return{type:"Polygon",coordinates:e};for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=[e[n]];return{type:"MultiPolygon",coordinates:t}},G5.makeBlank=function(){return{type:"Point",coordinates:[]}};var X5=SH.stylePoints,Z5=function(e,t){t&&Bk(e,t)},J5=AC.BADNUM,K5=oD.getTopojsonFeatures,Q5=kN.locationToFeature,$5=function(e,t,n){function r(e){return e[0].trace.uid}function i(e,t){e.lonlat[0]===J5&&CC.select(t).remove()}for(var a=0;a<n.length;a++)Uk(n[a],t.topojson);var o=t.layers.frontplot.select(".scatterlayer").selectAll("g.trace.scattergeo").data(n,r);o.enter().append("g").attr("class","trace scattergeo"),o.exit().remove(),o.selectAll("*").remove(),o.each(function(t){var n=t[0].node3=CC.select(this),r=t[0].trace;if(EP.hasLines(r)||"none"!==r.fill){var a=G5.calcTraceToLineCoords(t),o="none"!==r.fill?G5.makePolygon(a):G5.makeLine(a);n.selectAll("path.js-line").data([{geojson:o,trace:r}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}EP.hasMarkers(r)&&n.selectAll("path.point").data(uE.identity).enter().append("path").classed("point",!0).each(function(e){i(e,this)}),EP.hasText(r)&&n.selectAll("g").data(uE.identity).enter().append("g").append("text").each(function(e){i(e,this)}),Z5(e,t)})},e4=function(e,t){var n,r,i,a,o,s=e.cd,l=e.xaxis,u=e.yaxis,c=[],d=s[0].trace;if(!EP.hasMarkers(d)&&!EP.hasText(d))return[];if(!1===t)for(o=0;o<s.length;o++)s[o].selected=0;else for(o=0;o<s.length;o++)n=s[o],r=n.lonlat,i=l.c2p(r),a=u.c2p(r),t.contains([i,a])?(c.push({pointNumber:o,lon:r[0],lat:r[1]}),n.selected=1):n.selected=0;return c},t4={};t4.attributes=dN,t4.supplyDefaults=V5,t4.colorbar=YO,t4.calc=U5,t4.plot=$5,t4.style=Z5,t4.hoverPoints=q5,t4.eventData=H5,t4.selectPoints=e4,t4.moduleType="trace",t4.name="scattergeo",t4.basePlotModule=tN,t4.categories=["geo","symbols","markerColorscale","showLegend","scatter-like"],t4.meta={};var n4=t4,r4=n4,i4=function(e,t){var n="number"===typeof e,r="number"===typeof t;n&&!r?(t=e,e=0):n||r||(e=0,t=0),e|=0,t|=0;var i=t-e;if(i<0)throw new Error("array length must be positive");for(var a=new Array(i),o=0,s=e;o<i;o++,s++)a[o]=s;return a},a4=Vk;Vk.prototype.range=function(e,t,n,r){for(var i,a,o=this.ids,s=this.coords,l=this.nodeSize,u=[0,o.length-1,0],c=[];u.length;){var d=u.pop(),f=u.pop(),h=u.pop();if(f-h<=l)for(var p=h;p<=f;p++)i=s[2*p],a=s[2*p+1],i>=e&&i<=n&&a>=t&&a<=r&&c.push(o[p]);else{var m=Math.floor((h+f)/2);i=s[2*m],a=s[2*m+1],i>=e&&i<=n&&a>=t&&a<=r&&c.push(o[m]);var g=(d+1)%2;(0===d?e<=i:t<=a)&&(u.push(h),u.push(m-1),u.push(g)),(0===d?n>=i:r>=a)&&(u.push(m+1),u.push(f),u.push(g))}}return c},Vk.prototype.within=function(e,t,n){for(var r=this.ids,i=this.coords,a=this.nodeSize,o=[0,r.length-1,0],s=[],l=n*n;o.length;){var u=o.pop(),c=o.pop(),d=o.pop();if(c-d<=a)for(var f=d;f<=c;f++)Hk(i[2*f],i[2*f+1],e,t)<=l&&s.push(r[f]);else{var h=Math.floor((d+c)/2),p=i[2*h],m=i[2*h+1];Hk(p,m,e,t)<=l&&s.push(r[h]);var g=(u+1)%2;(0===u?e-n<=p:t-n<=m)&&(o.push(d),o.push(h-1),o.push(g)),(0===u?e+n>=p:t+n>=m)&&(o.push(h+1),o.push(c),o.push(g))}}return s};var o4=Xk,s4=Zk,l4=function(e,t,n){var r,i,a={};if("string"===typeof t&&(t=Jk(t)),Array.isArray(t)){var o={};for(i=0;i<t.length;i++)o[t[i]]=!0;t=o}for(r in t)t[r]=Jk(t[r]);var s={};for(r in t){var l=t[r];if(Array.isArray(l))for(i=0;i<l.length;i++){var u=l[i];if(n&&(s[u]=!0),u in e){if(a[r]=e[u],n)for(var c=i;c<l.length;c++)s[l[c]]=!0;break}}else r in e&&(t[r]&&(a[r]=e[r]),n&&(s[r]=!0))}if(n)for(r in e)s[r]||(a[r]=e[r]);return a},u4={},c4={};c4=Qk,c4.float32=c4.float=Qk,c4.fract32=c4.fract=Kk;var d4=function(e,t,n){Array.isArray(n)||(n=[].slice.call(arguments,2));for(var r=0,i=n.length;r<i;r++){var a=n[r];for(var o in a)if((void 0===t[o]||Array.isArray(t[o])||e[o]!==t[o])&&o in t){var s;if(!0===a[o])s=t[o];else{if(!1===a[o])continue;if("function"===typeof a[o]&&void 0===(s=a[o](t[o],e,t)))continue}e[o]=s}}return e},f4=c4.float32,h4=c4.fract32,p4=$k,m4=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]],g4=eT,y4={};y4=tT,y4.default=tT,tT.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(ET(e,0,a,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(ET(e,u,c,n))}var d=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,h=r[s+1]*n,p=r[s+2]*n;d+=Math.abs((e[f]-e[p])*(e[h+1]-e[f+1])-(e[f]-e[h])*(e[p+1]-e[f+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},tT.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n};var v4=PT,_4={};_4=OT,_4.to=OT,_4.from=zT;var b4="undefined"!==typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)),x4=RT,w4={ge:NT(">=",!1,"GE"),gt:NT(">",!1,"GT"),lt:NT("<",!0,"LT"),le:NT("<=",!0,"LE"),eq:NT("-",!0,"EQ",!0)},k4=FT,T4=32,M4=ZT,A4=c4.float32,C4=c4.fract32,S4=JT,E4=KT,P4=1e20,I4=eM,L4=Math.PI,O4=oM(120),z4=tM,R4={M:"moveTo",C:"bezierCurveTo"},D4=function(e,t){e.beginPath(),z4(I4(t)).forEach(function(t){var n=t[0],r=t.slice(1);e[R4[n]].apply(e,r)}),e.closePath()},N4=function(e){return"string"===typeof e&&(e=e.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(e)&&/[\dz]$/i.test(e)&&e.length>4))},F4=sM,j4={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},B4=/([astvzqmhlc])([^astvzqmhlc]*)/gi,U4=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi,V4={};V4="function"===typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e};var H4=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8},W4={};(function(e,t){function n(e,t){var n={seen:[],stylize:i};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),h(t)?n.showHidden=t:t&&W4._extend(n,t),_(n.showHidden)&&(n.showHidden=!1),_(n.depth)&&(n.depth=2),_(n.colors)&&(n.colors=!1),_(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=r),o(n,e,n.depth)}function r(e,t){var r=n.styles[t];return r?"\x1b["+n.colors[r][0]+"m"+e+"\x1b["+n.colors[r][1]+"m":e}function i(e,t){return e}function a(e){var t={};return e.forEach(function(e,n){t[e]=!0}),t}function o(e,t,n){if(e.customInspect&&t&&T(t.inspect)&&t.inspect!==W4.inspect&&(!t.constructor||t.constructor.prototype!==t)){var r=t.inspect(n,e);return y(r)||(r=o(e,r,n)),r}var i=s(e,t);if(i)return i;var h=Object.keys(t),p=a(h);if(e.showHidden&&(h=Object.getOwnPropertyNames(t)),k(t)&&(h.indexOf("message")>=0||h.indexOf("description")>=0))return l(t);if(0===h.length){if(T(t)){var m=t.name?": "+t.name:"";return e.stylize("[Function"+m+"]","special")}if(b(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(w(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return l(t)}var g="",v=!1,_=["{","}"];if(f(t)&&(v=!0,_=["[","]"]),T(t)){g=" [Function"+(t.name?": "+t.name:"")+"]"}if(b(t)&&(g=" "+RegExp.prototype.toString.call(t)),w(t)&&(g=" "+Date.prototype.toUTCString.call(t)),k(t)&&(g=" "+l(t)),0===h.length&&(!v||0==t.length))return _[0]+g+_[1];if(n<0)return b(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return x=v?u(e,t,n,p,h):h.map(function(r){return c(e,t,n,p,r,v)}),e.seen.pop(),d(x,g,_)}function s(e,t){if(_(t))return e.stylize("undefined","undefined");if(y(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return g(t)?e.stylize(""+t,"number"):h(t)?e.stylize(""+t,"boolean"):p(t)?e.stylize("null","null"):void 0}function l(e){return"["+Error.prototype.toString.call(e)+"]"}function u(e,t,n,r,i){for(var a=[],o=0,s=t.length;o<s;++o)E(t,String(o))?a.push(c(e,t,n,r,String(o),!0)):a.push("");return i.forEach(function(i){i.match(/^\d+$/)||a.push(c(e,t,n,r,i,!0))}),a}function c(e,t,n,r,i,a){var s,l,u;if(u=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},u.get?l=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(l=e.stylize("[Setter]","special")),E(r,i)||(s="["+i+"]"),l||(e.seen.indexOf(u.value)<0?(l=p(n)?o(e,u.value,null):o(e,u.value,n-1),l.indexOf("\n")>-1&&(l=a?l.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+l.split("\n").map(function(e){return"   "+e}).join("\n"))):l=e.stylize("[Circular]","special")),_(s)){if(a&&i.match(/^\d+$/))return l;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=e.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=e.stylize(s,"string"))}return s+": "+l}function d(e,t,n){var r=0;return e.reduce(function(e,t){return r++,t.indexOf("\n")>=0&&r++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function f(e){return Array.isArray(e)}function h(e){return"boolean"===typeof e}function p(e){return null===e}function m(e){return null==e}function g(e){return"number"===typeof e}function y(e){return"string"===typeof e}function v(e){return"symbol"===typeof e}function _(e){return void 0===e}function b(e){return x(e)&&"[object RegExp]"===A(e)}function x(e){return"object"===typeof e&&null!==e}function w(e){return x(e)&&"[object Date]"===A(e)}function k(e){return x(e)&&("[object Error]"===A(e)||e instanceof Error)}function T(e){return"function"===typeof e}function M(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function A(e){return Object.prototype.toString.call(e)}function C(e){return e<10?"0"+e.toString(10):e.toString(10)}function S(){var e=new Date,t=[C(e.getHours()),C(e.getMinutes()),C(e.getSeconds())].join(":");return[e.getDate(),O[e.getMonth()],t].join(" ")}function E(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var P=/%[sdj%]/g;W4.format=function(e){if(!y(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(n(arguments[r]));return t.join(" ")}for(var r=1,i=arguments,a=i.length,o=String(e).replace(P,function(e){if("%%"===e)return"%";if(r>=a)return e;switch(e){case"%s":return String(i[r++]);case"%d":return Number(i[r++]);case"%j":try{return JSON.stringify(i[r++])}catch(e){return"[Circular]"}default:return e}}),s=i[r];r<a;s=i[++r])p(s)||!x(s)?o+=" "+s:o+=" "+n(s);return o},W4.deprecate=function(n,r){function i(){if(!a){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}if(_(t.process))return function(){return W4.deprecate(n,r).apply(this,arguments)};if(!0===e.noDeprecation)return n;var a=!1;return i};var I,L={};W4.debuglog=function(t){if(_(I)&&(I=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!L[t])if(new RegExp("\\b"+t+"\\b","i").test(I)){var n=e.pid;L[t]=function(){var e=W4.format.apply(W4,arguments);console.error("%s %d: %s",t,n,e)}}else L[t]=function(){};return L[t]},W4.inspect=n,n.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},n.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},W4.isArray=f,W4.isBoolean=h,W4.isNull=p,W4.isNullOrUndefined=m,W4.isNumber=g,W4.isString=y,W4.isSymbol=v,W4.isUndefined=_,W4.isRegExp=b,W4.isObject=x,W4.isDate=w,W4.isError=k,W4.isFunction=T,W4.isPrimitive=M,W4.isBuffer=H4;var O=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];W4.log=function(){console.log("%s - %s",S(),W4.format.apply(W4,arguments))},W4.inherits=V4,W4._extend=function(e,t){if(!t||!x(t))return e;for(var n=Object.keys(t),r=n.length;r--;)e[n[r]]=t[n[r]];return e}}).call(this,gj,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var q4={};(function(e){"use strict";function t(e,t){if(e===t)return 0;for(var n=e.length,r=t.length,i=0,a=Math.min(n,r);i<a;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0}function n(t){return e.Buffer&&"function"===typeof e.Buffer.isBuffer?e.Buffer.isBuffer(t):!(null==t||!t._isBuffer)}function r(e){return Object.prototype.toString.call(e)}function i(t){return!n(t)&&("function"===typeof e.ArrayBuffer&&("function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(t):!!t&&(t instanceof DataView||!!(t.buffer&&t.buffer instanceof ArrayBuffer))))}function a(e){if(W4.isFunction(e)){if(b)return e.name;var t=e.toString(),n=t.match(w);return n&&n[1]}}function o(e,t){return"string"===typeof e?e.length<t?e:e.slice(0,t):e}function s(e){if(b||!W4.isFunction(e))return W4.inspect(e);var t=a(e);return"[Function"+(t?": "+t:"")+"]"}function l(e){return o(s(e.actual),128)+" "+e.operator+" "+o(s(e.expected),128)}function u(e,t,n,r,i){throw new x.AssertionError({message:n,actual:e,expected:t,operator:r,stackStartFunction:i})}function c(e,t){e||u(e,!0,t,"==",x.ok)}function d(e,a,o,s){if(e===a)return!0;if(n(e)&&n(a))return 0===t(e,a);if(W4.isDate(e)&&W4.isDate(a))return e.getTime()===a.getTime();if(W4.isRegExp(e)&&W4.isRegExp(a))return e.source===a.source&&e.global===a.global&&e.multiline===a.multiline&&e.lastIndex===a.lastIndex&&e.ignoreCase===a.ignoreCase;if(null!==e&&"object"===typeof e||null!==a&&"object"===typeof a){if(i(e)&&i(a)&&r(e)===r(a)&&!(e instanceof Float32Array||e instanceof Float64Array))return 0===t(new Uint8Array(e.buffer),new Uint8Array(a.buffer));if(n(e)!==n(a))return!1;s=s||{actual:[],expected:[]};var l=s.actual.indexOf(e);return-1!==l&&l===s.expected.indexOf(a)||(s.actual.push(e),s.expected.push(a),h(e,a,o,s))}return o?e===a:e==a}function f(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function h(e,t,n,r){if(null===e||void 0===e||null===t||void 0===t)return!1;if(W4.isPrimitive(e)||W4.isPrimitive(t))return e===t;if(n&&Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;var i=f(e),a=f(t);if(i&&!a||!i&&a)return!1;if(i)return e=_.call(e),t=_.call(t),d(e,t,n);var o,s,l=k(e),u=k(t);if(l.length!==u.length)return!1;for(l.sort(),u.sort(),s=l.length-1;s>=0;s--)if(l[s]!==u[s])return!1;for(s=l.length-1;s>=0;s--)if(o=l[s],!d(e[o],t[o],n,r))return!1;return!0}function p(e,t,n){d(e,t,!0)&&u(e,t,n,"notDeepStrictEqual",p)}function m(e,t){if(!e||!t)return!1;if("[object RegExp]"==Object.prototype.toString.call(t))return t.test(e);try{if(e instanceof t)return!0}catch(e){}return!Error.isPrototypeOf(t)&&!0===t.call({},e)}function g(e){var t;try{e()}catch(e){t=e}return t}function y(e,t,n,r){var i;if("function"!==typeof t)throw new TypeError('"block" argument must be a function');"string"===typeof n&&(r=n,n=null),i=g(t),r=(n&&n.name?" ("+n.name+").":".")+(r?" "+r:"."),e&&!i&&u(i,n,"Missing expected exception"+r);var a="string"===typeof r,o=!e&&W4.isError(i),s=!e&&i&&!n;if((o&&a&&m(i,n)||s)&&u(i,n,"Got unwanted exception"+r),e&&i&&n&&!m(i,n)||!e&&i)throw i}var v=Object.prototype.hasOwnProperty,_=Array.prototype.slice,b=function(){return"foo"===function(){}.name}(),x=q4=c,w=/\s*function\s+([^\(\s]*)\s*/;x.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=l(this),this.generatedMessage=!0);var t=e.stackStartFunction||u;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var n=new Error;if(n.stack){var r=n.stack,i=a(t),o=r.indexOf("\n"+i);if(o>=0){var s=r.indexOf("\n",o+1);r=r.substring(s+1)}this.stack=r}}},W4.inherits(x.AssertionError,Error),x.fail=u,x.ok=c,x.equal=function(e,t,n){e!=t&&u(e,t,n,"==",x.equal)},x.notEqual=function(e,t,n){e==t&&u(e,t,n,"!=",x.notEqual)},x.deepEqual=function(e,t,n){d(e,t,!1)||u(e,t,n,"deepEqual",x.deepEqual)},x.deepStrictEqual=function(e,t,n){d(e,t,!0)||u(e,t,n,"deepStrictEqual",x.deepStrictEqual)},x.notDeepEqual=function(e,t,n){d(e,t,!1)&&u(e,t,n,"notDeepEqual",x.notDeepEqual)},x.notDeepStrictEqual=p,x.strictEqual=function(e,t,n){e!==t&&u(e,t,n,"===",x.strictEqual)},x.notStrictEqual=function(e,t,n){e===t&&u(e,t,n,"!==",x.notStrictEqual)},x.throws=function(e,t,n){y(!0,e,t,n)},x.doesNotThrow=function(e,t,n){y(!1,e,t,n)},x.ifError=function(e){if(e)throw e};var k=Object.keys||function(e){var t=[];for(var n in e)v.call(e,n)&&t.push(n);return t}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var G4={};Object.defineProperty(G4,"__esModule",{value:!0});var Y4=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(r=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),X4=2*Math.PI,Z4=function(e,t,n,r,i,a,o){var s=e.x,l=e.y;return s*=t,l*=n,{x:r*s-i*l+a,y:i*s+r*l+o}},J4=function(e,t){var n=4/3*Math.tan(t/4),r=Math.cos(e),i=Math.sin(e),a=Math.cos(e+t),o=Math.sin(e+t);return[{x:r-i*n,y:i+r*n},{x:a+o*n,y:o-a*n},{x:a,y:o}]},K4=function(e,t,n,r){var i=e*r-t*n<0?-1:1,a=Math.sqrt(e*e+t*t),o=Math.sqrt(e*e+t*t),s=e*n+t*r,l=s/(a*o);return l>1&&(l=1),l<-1&&(l=-1),i*Math.acos(l)},Q4=function(e,t,n,r,i,a,o,s,l,u,c,d){var f=Math.pow(i,2),h=Math.pow(a,2),p=Math.pow(c,2),m=Math.pow(d,2),g=f*h-f*m-h*p;g<0&&(g=0),g/=f*m+h*p,g=Math.sqrt(g)*(o===s?-1:1);var y=g*i/a*d,v=g*-a/i*c,_=u*y-l*v+(e+n)/2,b=l*y+u*v+(t+r)/2,x=(c-y)/i,w=(d-v)/a,k=(-c-y)/i,T=(-d-v)/a,M=K4(1,0,x,w),A=K4(x,w,k,T);return 0===s&&A>0&&(A-=X4),1===s&&A<0&&(A+=X4),[_,b,M,A]},$4=function(e){var t=e.px,n=e.py,r=e.cx,i=e.cy,a=e.rx,o=e.ry,s=e.xAxisRotation,l=void 0===s?0:s,u=e.largeArcFlag,c=void 0===u?0:u,d=e.sweepFlag,f=void 0===d?0:d,h=[];if(0===a||0===o)return[];var p=Math.sin(l*X4/360),m=Math.cos(l*X4/360),g=m*(t-r)/2+p*(n-i)/2,y=-p*(t-r)/2+m*(n-i)/2;if(0===g&&0===y)return[];a=Math.abs(a),o=Math.abs(o);var v=Math.pow(g,2)/Math.pow(a,2)+Math.pow(y,2)/Math.pow(o,2);v>1&&(a*=Math.sqrt(v),o*=Math.sqrt(v));var _=Q4(t,n,r,i,a,o,c,f,p,m,g,y),b=Y4(_,4),x=b[0],w=b[1],k=b[2],T=b[3],M=Math.max(Math.ceil(Math.abs(T)/(X4/4)),1);T/=M;for(var A=0;A<M;A++)h.push(J4(k,T)),k+=T;return h.map(function(e){var t=Z4(e[0],a,o,m,p,x,w),n=t.x,r=t.y,i=Z4(e[1],a,o,m,p,x,w),s=i.x,l=i.y,u=Z4(e[2],a,o,m,p,x,w);return{x1:n,y1:r,x2:s,y2:l,x:u.x,y:u.y}})};G4.default=$4,G4=G4.default;var e6=uM,t6=fM,n6={};(function(e){"use strict";function t(t,i){if(!N4(t))throw Error("Argument should be valid svg path string");i||(i={});var a,o;i.shape?(a=i.shape[0],o=i.shape[1]):(a=n.width=i.w||i.width||200,o=n.height=i.h||i.height||200);var s=Math.min(a,o),l=i.stroke||0,u=i.viewbox||i.viewBox||t6(t),c=[a/(u[2]-u[0]),o/(u[3]-u[1])],d=Math.min(c[0]||0,c[1]||0)/2;if(r.fillStyle="black",r.fillRect(0,0,a,o),r.fillStyle="white",l&&("number"!=typeof l&&(l=1),r.strokeStyle=l>0?"white":"black",r.lineWidth=Math.abs(l)),r.translate(.5*a,.5*o),r.scale(d,d),e.Path2D){var f=new Path2D(t);r.fill(f),l&&r.stroke(f)}else{var h=F4(t);D4(r,h),r.fill(),l&&r.stroke()}return r.setTransform(1,0,0,1,0,0),E4(r,{cutoff:null!=i.cutoff?i.cutoff:.5,radius:null!=i.radius?i.radius:.5*s})}var n=document.createElement("canvas"),r=n.getContext("2d");n6=t}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var r6={solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]},i6={},a6=WC.extendFlat,o6=TE.overrideAll,s6=YP.line,l6=YP.marker,u6=l6.line,c6=i6=o6({x:YP.x,x0:YP.x0,dx:YP.dx,y:YP.y,y0:YP.y0,dy:YP.dy,text:a6({},YP.text,{}),mode:{valType:"flaglist",flags:["lines","markers"],extras:["none"]},line:{color:s6.color,width:s6.width,dash:{valType:"enumerated",values:Object.keys(r6),dflt:"solid"}},marker:a6({},FE(),{symbol:l6.symbol,size:l6.size,sizeref:l6.sizeref,sizemin:l6.sizemin,sizemode:l6.sizemode,opacity:l6.opacity,showscale:l6.showscale,colorbar:l6.colorbar,line:a6({},FE(),{width:u6.width})}),connectgaps:YP.connectgaps,fill:YP.fill,fillcolor:YP.fillcolor,hoveron:YP.hoveron,selected:{marker:YP.selected.marker},unselected:{marker:YP.unselected.marker},opacity:$C.opacity},"calc","nested");c6.x.editType=c6.y.editType=c6.x0.editType=c6.y0.editType="calc+clearAxisTypes";var d6=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,i6,n,r)}var a=!!e.marker&&/-open/.test(e.marker.symbol),o=EP.isBubble(e),s=NL(e,t,r,i);if(!s)return void(t.visible=!1);i("text"),i("mode",s<WP.PTS_LINESONLY?"lines+markers":"lines"),EP.hasLines(t)&&(i("connectgaps"),hH(e,t,n,r,i));var l=[];EP.hasMarkers(t)&&(mH(e,t,n,r,i),i("marker.line.width",a||o?1:0),l.push("points")),i("fill"),"none"!==t.fill&&dH(0,t,n,i),"tonext"!==t.fill&&"toself"!==t.fill||l.push("fills"),i("hoveron",l.join("+")||"points");var u=rS.getComponentMethod("errorbars","supplyDefaults");u(e,t,n,{axis:"y"}),u(e,t,n,{axis:"x",inherit:"y"}),uE.coerceSelectionMarkerOpacity(t,i)},f6={};(function(e){"use strict";function t(e,t){var i,a,o,s=e._fullLayout,l=oI.getFromId(e,t.xaxis),f=oI.getFromId(e,t.yaxis),h=s._plots[t.xaxis+t.yaxis],p=t._length,m=2*p,g={},v=l.makeCalcdata(t,"x"),_=f.makeCalcdata(t,"y"),b=new Array(m);for(i=0;i<p;i++)a=v[i],o=_[i],b[2*i]=a===d?NaN:a,b[2*i+1]=o===d?NaN:o;if("log"===l.type)for(i=0;i<m;i+=2)b[i]=l.c2l(b[i]);if("log"===f.type)for(i=1;i<m;i+=2)b[i]=f.c2l(b[i]);if("log"!==l.type&&"log"!==f.type)g.tree=a4(b,512);else{var x=g.ids=new Array(p);for(i=0;i<p;i++)x[i]=i}aH(t);var w,k=n(e,h,t,b),T=k.marker,M=r(e,h);return p<y?w=u(t,p):T&&(w=2*(T.sizeAvg||Math.max(T.size,3))),c(e,t,l,f,v,_,w),k.fill&&!M.fill2d&&(M.fill2d=!0),k.marker&&!M.scatter2d&&(M.scatter2d=!0),k.line&&!M.line2d&&(M.line2d=!0),!k.errorX&&!k.errorY||M.error2d||(M.error2d=!0),M.lineOptions.push(k.line),M.errorXOptions.push(k.errorX),M.errorYOptions.push(k.errorY),M.fillOptions.push(k.fill),M.markerOptions.push(k.marker),M.selectedOptions.push(k.selected),M.unselectedOptions.push(k.unselected),M.count++,g.scene=M,g.index=M.count-1,g.x=v,g.y=_,g.positions=b,g.count=p,e.firstscatter=!1,[{x:!1,y:!1,t:g,trace:t}]}function n(e,t,n,r){function a(t,i,a){var o={};o.positions=r;for(var s=oI.getFromId(e,n[t+"axis"]),l=o.errors=new Float64Array(4*m),u={x:0,y:1}[t],c={x:[0,1,2,3],y:[2,3,0,1]}[t],d=0,f=0;d<m;d++,f+=4)l[f+c[0]]=r[2*d+u]-s.d2l(a[d][t+"s"])||0,l[f+c[1]]=s.d2l(a[d][t+"h"])-r[2*d+u]||0,l[f+c[2]]=0,l[f+c[3]]=0;return i.copy_ystyle&&(i=n.error_y),o.capSize=2*i.width,o.lineWidth=i.thickness,o.color=i.color,o}function o(e,t){var n={};return e?(e.marker&&e.marker.symbol?n=s(uE.extendFlat({},t,e.marker)):(n={},e.marker.size&&(n.sizes=e.marker.size),e.marker.color&&(n.colors=e.marker.color),void 0!==e.marker.opacity&&(n.opacity=e.marker.opacity)),n):n}function s(e){var t,r,a={},o=Array.isArray(e.symbol),s=uE.isArrayOrTypedArray(e.color),l=uE.isArrayOrTypedArray(e.line.color),u=uE.isArrayOrTypedArray(e.opacity),c=uE.isArrayOrTypedArray(e.size),d=uE.isArrayOrTypedArray(e.line.width);if(o||(r=_.test(e.symbol)),o||s||l||u){a.colors=new Array(m),a.borderColors=new Array(m);var f=y5(e,e.opacity,m),h=y5(e.line,e.opacity,m);if(!Array.isArray(h[0])){var p=h;for(h=Array(m),t=0;t<m;t++)h[t]=p}if(!Array.isArray(f[0])){var g=f;for(f=Array(m),t=0;t<m;t++)f[t]=g}for(a.colors=f,a.borderColors=h,t=0;t<m;t++){if(o){var y=e.symbol[t];r=_.test(y)}r&&(h[t]=f[t].slice(),f[t]=f[t].slice(),f[t][3]=0)}a.opacity=n.opacity}else r?(a.color=BZ(e.color,"uint8"),a.color[3]=0,a.borderColor=BZ(e.color,"uint8")):(a.color=BZ(e.color,"uint8"),a.borderColor=BZ(e.line.color,"uint8")),a.opacity=n.opacity*e.opacity;if(o)for(a.markers=new Array(m),t=0;t<m;t++)a.markers[t]=i(e.symbol[t]);else a.marker=i(e.symbol);var v,b=SP(n);if(c||d){var x,w=a.sizes=new Array(m),k=a.borderSizes=new Array(m),T=0;if(c){for(t=0;t<m;t++)w[t]=b(e.size[t]),T+=w[t];x=T/m}else for(v=b(e.size),t=0;t<m;t++)w[t]=v;if(d)for(t=0;t<m;t++)k[t]=b(e.line.width[t]);else for(v=b(e.line.width),t=0;t<m;t++)k[t]=v;a.sizeAvg=x}else a.size=b(e&&e.size||10),a.borderSizes=b(e.line.width);return a}var l,u,c,d,f,h,p=e._fullLayout,m=r.length/2,g=n.marker;!0!==n.visible?(u=!1,c=!1,d=!1,f=!1,h=!1):(u=EP.hasLines(n)&&r.length>1,c=n.error_x&&!0===n.error_x.visible,d=n.error_y&&!0===n.error_y.visible,f=EP.hasMarkers(n),h=!!n.fill&&"none"!==n.fill);var v,b,x,w,k,T,M,A;if(c||d){var C=rS.getComponentMethod("errorbars","calcFromTrace"),S=C(n,p);c&&(w=a("x",n.error_x,S)),d&&(k=a("y",n.error_y,S))}if(u){v={},v.thickness=n.line.width,v.color=n.line.color,v.opacity=n.opacity,v.overlay=!0;var E=(r6[n.line.dash]||[1]).slice();for(l=0;l<E.length;++l)E[l]*=v.thickness;if(v.dashes=E,"hv"===n.line.shape){for(A=[],l=0;l<Math.floor(r.length/2)-1;l++)isNaN(r[2*l])||isNaN(r[2*l+1])?(A.push(NaN),A.push(NaN),A.push(NaN),A.push(NaN)):(A.push(r[2*l]),A.push(r[2*l+1]),A.push(r[2*l+2]),A.push(r[2*l+1]));A.push(r[r.length-2]),A.push(r[r.length-1])}else if("vh"===n.line.shape){for(A=[],l=0;l<Math.floor(r.length/2)-1;l++)isNaN(r[2*l])||isNaN(r[2*l+1])?(A.push(NaN),A.push(NaN),A.push(NaN),A.push(NaN)):(A.push(r[2*l]),A.push(r[2*l+1]),A.push(r[2*l]),A.push(r[2*l+3]));A.push(r[r.length-2]),A.push(r[r.length-1])}else A=r;var P=!1;for(l=0;l<A.length;l++)if(isNaN(A[l])){P=!0;break}if(v.join=P||A.length>y?"rect":f?"rect":"round",P&&n.connectgaps){var I=A[0],L=A[1];for(l=0;l<A.length;l+=2)isNaN(A[l])||isNaN(A[l+1])?(A[l]=I,A[l+1]=L):(I=A[l],L=A[l+1])}v.positions=A}return h&&(x={},x.fill=n.fillcolor,x.thickness=0,x.closed=!0),f&&(b=s(g),T=o(n.selected,g),M=o(n.unselected,g),b.positions=r),{line:v,marker:b,errorX:w,errorY:k,fill:x,selected:T,unselected:M}}function r(e,t){var n=t._scene,r=e._fullLayout,i={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],selectedOptions:[],unselectedOptions:[],errorXOptions:[],errorYOptions:[]},a={selectBatch:null,unselectBatch:null,fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,select2d:null};return t._scene||(n=t._scene=uE.extendFlat({},i,a),n.update=function(e){for(var t=new Array(n.count),r=0;r<n.count;r++)t[r]=e;n.fill2d&&n.fill2d.update(t),n.scatter2d&&n.scatter2d.update(t),n.line2d&&n.line2d.update(t),n.error2d&&n.error2d.update(t.concat(t)),n.select2d&&n.select2d.update(t),n.draw()},n.draw=function(){var e;for(e=0;e<n.count;e++)n.fill2d&&n.fillOptions[e]&&n.fill2d.draw(e);for(e=0;e<n.count;e++)n.line2d&&n.lineOptions[e]&&n.line2d.draw(e),n.error2d&&n.errorXOptions[e]&&n.error2d.draw(e),n.error2d&&n.errorYOptions[e]&&n.error2d.draw(e+n.count),!n.scatter2d||!n.markerOptions[e]||n.selectBatch&&n.selectBatch[e]||n.scatter2d.draw(e);n.scatter2d&&n.select2d&&n.selectBatch&&(n.select2d.draw(n.selectBatch),n.scatter2d.draw(n.unselectBatch)),n.dirty=!1},n.clear=function(){var e,i,a,o=r._size,s=r.width,l=r.height,u=t.xaxis,c=t.yaxis;e=u&&u.domain&&c&&c.domain?[o.l+u.domain[0]*o.w,o.b+c.domain[0]*o.h,s-o.r-(1-u.domain[1])*o.w,l-o.t-(1-c.domain[1])*o.h]:[o.l,o.b,s-o.r,l-o.t],n.select2d&&(a=n.select2d.regl,i=a._gl,i.enable(i.SCISSOR_TEST),i.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT)),n.scatter2d&&(a=n.scatter2d.regl,i=a._gl,i.enable(i.SCISSOR_TEST),i.scissor(e[0],e[1],e[2]-e[0],e[3]-e[1]),i.clearColor(0,0,0,0),i.clear(i.COLOR_BUFFER_BIT))},n.clearSelect=function(){n.selectBatch&&(n.selectBatch=null,n.unselectBatch=null,n.scatter2d.update(n.markerOptions),n.clear(),n.draw())},n.destroy=function(){n.fill2d&&n.fill2d.destroy(),n.scatter2d&&n.scatter2d.destroy(),n.error2d&&n.error2d.destroy(),n.line2d&&n.line2d.destroy(),n.select2d&&n.select2d.destroy(),n.lineOptions=null,n.fillOptions=null,n.markerOptions=null,n.selectedOptions=null,n.unselectedOptions=null,n.errorXOptions=null,n.errorYOptions=null,n.selectBatch=null,n.unselectBatch=null,t._scene=null}),n.dirty||uE.extendFlat(n,i),n}function i(e){if("circle"===e)return null;var t,n,r=PP.symbolNumber(e),i=PP.symbolFuncs[r%100],a=!!PP.symbolNoDot[r%100],o=!!PP.symbolNoFill[r%100],s=v.test(e);return m[e]?m[e]:(t=s&&!a?i(1.1*h)+g:i(h),n=n6(t,{w:f,h:f,viewBox:[-h,-h,h,h],stroke:o?p:-p}),m[e]=n,n||null)}function a(t,n,r){if(r.length){var i=t._fullLayout,a=r[0][0].t.scene,o=i.dragmode;if(a){var s=i._size,l=i.width,u=i.height;i._glcanvas.each(function(n){n.regl||n.pick||(n.regl=T1({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},extensions:["ANGLE_instanced_arrays","OES_element_index_uint"],pixelRatio:t._context.plotGlPixelRatio||e.devicePixelRatio}))});var c=i._glcanvas.data()[0].regl;if(TH(t,n,r),a.dirty){if(!0===a.error2d&&(a.error2d=p4(c)),!0===a.line2d&&(a.line2d=v4(c)),!0===a.scatter2d&&(a.scatter2d=S4(c)),!0===a.fill2d&&(a.fill2d=v4(c)),a.line2d&&a.line2d.update(a.lineOptions),a.error2d){var d=(a.errorXOptions||[]).concat(a.errorYOptions||[]);a.error2d.update(d)}a.scatter2d&&a.scatter2d.update(a.markerOptions),a.fill2d&&(a.fillOptions=a.fillOptions.map(function(e,t){var n=r[t];if(!e||!n||!n[0]||!n[0].trace)return null;var i,o,s=n[0],l=s.trace,u=s.t,c=a.lineOptions[t],d=[],f=c&&c.positions||u.positions;if("tozeroy"===l.fill)d=[f[0],0],d=d.concat(f),d.push(f[f.length-2]),d.push(0);else if("tozerox"===l.fill)d=[0,f[1]],d=d.concat(f),d.push(0),d.push(f[f.length-1]);else if("toself"===l.fill||"tonext"===l.fill){for(d=[],i=0,o=0;o<f.length;o+=2)(isNaN(f[o])||isNaN(f[o+1]))&&(d=d.concat(f.slice(i,o)),d.push(f[i],f[i+1]),i=o+2);d=d.concat(f.slice(i)),i&&d.push(f[i],f[i+1])}else{var h=l._nexttrace;if(h){var p=a.lineOptions[t+1];if(p){var m=p.positions;if("tonexty"===l.fill){for(d=f.slice(),t=Math.floor(m.length/2);t--;){var g=m[2*t],y=m[2*t+1];isNaN(g)||isNaN(y)||(d.push(g),d.push(y))}e.fill=h.fillcolor}}}}if(l._prevtrace&&"tonext"===l._prevtrace.fill){var v=a.lineOptions[t-1].positions,_=d.length/2;i=_;var b=[i];for(o=0;o<v.length;o+=2)(isNaN(v[o])||isNaN(v[o+1]))&&(b.push(o/2+_+1),i=o+2);d=d.concat(v),e.hole=b}return e.opacity=l.opacity,e.positions=d,e}),a.fill2d.update(a.fillOptions))}var f="lasso"===o||"select"===o,h=r.map(function(e){if(e&&e[0]&&e[0].trace){var r,i=e[0],o=i.trace,c=i.t,d=c.index,h=c.x,p=c.y,m=n.xaxis||oI.getFromId(t,o.xaxis||"x"),g=n.yaxis||oI.getFromId(t,o.yaxis||"y"),y=[(m._rl||m.range)[0],(g._rl||g.range)[0],(m._rl||m.range)[1],(g._rl||g.range)[1]],v=[s.l+m.domain[0]*s.w,s.b+g.domain[0]*s.h,l-s.r-(1-m.domain[1])*s.w,u-s.t-(1-g.domain[1])*s.h];if(o.selectedpoints||f){if(f||(f=!0),a.selectBatch||(a.selectBatch=[]),a.unselectBatch||(a.unselectBatch=[]),o.selectedpoints){a.selectBatch[d]=o.selectedpoints;var _=o.selectedpoints,b={};for(r=0;r<_.length;r++)b[_[r]]=!0;var x=[];for(r=0;r<c.count;r++)b[r]||x.push(r);a.unselectBatch[d]=x}var w=new Array(c.count),k=new Array(c.count);for(r=0;r<c.count;r++)w[r]=m.c2p(h[r]),k[r]=g.c2p(p[r]);c.xpx=w,c.ypx=k}else c.xpx=c.ypx=null;return o.visible?{viewport:v,range:y}:null}});f&&(a.select2d||(a.select2d=S4(i._glcanvas.data()[1].regl,{clone:a.scatter2d})),a.scatter2d&&a.selectBatch&&a.selectBatch.length&&a.scatter2d.update(a.unselectedOptions.map(function(e,t){return a.selectBatch[t]?e:null})),a.select2d&&(a.select2d.update(a.markerOptions),a.select2d.update(a.selectedOptions))),a.fill2d&&a.fill2d.update(h),a.line2d&&a.line2d.update(h),a.error2d&&a.error2d.update(h.concat(h)),a.scatter2d&&a.scatter2d.update(h),a.select2d&&a.select2d.update(h),a.draw()}}}function o(e,t,n,r){var i,a=e.cd,o=a[0].t,s=a[0].trace,l=e.xa,u=e.ya,c=o.x,d=o.y,f=l.c2p(t),h=u.c2p(n),p=e.distance;if(o.tree){var m=l.p2c(f-p),g=l.p2c(f+p),y=u.p2c(h-p),v=u.p2c(h+p);i="x"===r?o.tree.range(Math.min(m,g),Math.min(u._rl[0],u._rl[1]),Math.max(m,g),Math.max(u._rl[0],u._rl[1])):o.tree.range(Math.min(m,g),Math.min(y,v),Math.max(m,g),Math.max(y,v))}else{if(!o.ids)return[e];i=o.ids}var _,b,x,w,k,T,M,A,C=p;if("x"===r)for(w=0;w<i.length;w++)b=c[i[w]],(k=Math.abs(l.c2p(b)-f))<C&&(C=k,T=u.c2p(d[i[w]])-h,A=Math.sqrt(k*k+T*T),_=i[w]);else for(w=0;w<i.length;w++)b=c[i[w]],x=d[i[w]],k=l.c2p(b)-f,T=u.c2p(x)-h,(M=Math.sqrt(k*k+T*T))<C&&(C=A=M,_=i[w]);if(e.index=_,void 0===_)return[e];var S={pointNumber:_,x:c[_],y:d[_]};S.tx=Array.isArray(s.text)?s.text[_]:s.text,S.htx=Array.isArray(s.hovertext)?s.hovertext[_]:s.hovertext,S.data=Array.isArray(s.customdata)?s.customdata[_]:s.customdata,S.tp=Array.isArray(s.textposition)?s.textposition[_]:s.textposition;var E=s.textfont;E&&(S.ts=Array.isArray(E.size)?E.size[_]:E.size,S.tc=Array.isArray(E.color)?E.color[_]:E.color,S.tf=Array.isArray(E.family)?E.family[_]:E.family);var P=s.marker;P&&(S.ms=uE.isArrayOrTypedArray(P.size)?P.size[_]:P.size,S.mo=uE.isArrayOrTypedArray(P.opacity)?P.opacity[_]:P.opacity,S.mx=Array.isArray(P.symbol)?P.symbol[_]:P.symbol,S.mc=uE.isArrayOrTypedArray(P.color)?P.color[_]:P.color);var I=P&&P.line;I&&(S.mlc=Array.isArray(I.color)?I.color[_]:I.color,S.mlw=uE.isArrayOrTypedArray(I.width)?I.width[_]:I.width);var L=P&&P.gradient;L&&"none"!==L.type&&(S.mgt=Array.isArray(L.type)?L.type[_]:L.type,S.mgc=Array.isArray(L.color)?L.color[_]:L.color);var O=l.c2p(S.x,!0),z=u.c2p(S.y,!0),R=S.mrc||1,D=s.hoverlabel;D&&(S.hbg=Array.isArray(D.bgcolor)?D.bgcolor[_]:D.bgcolor,S.hbc=Array.isArray(D.bordercolor)?D.bordercolor[_]:D.bordercolor,S.hts=Array.isArray(D.font.size)?D.font.size[_]:D.font.size,S.htc=Array.isArray(D.font.color)?D.font.color[_]:D.font.color,S.htf=Array.isArray(D.font.family)?D.font.family[_]:D.font.family,S.hnl=Array.isArray(D.namelength)?D.namelength[_]:D.namelength);var N=s.hoverinfo;N&&(S.hi=Array.isArray(N)?N[_]:N);var F={};return F[e.index]=S,uE.extendFlat(e,{color:vH(s,S),x0:O-R,x1:O+R,xLabelVal:S.x,y0:z-R,y1:z+R,yLabelVal:S.y,cd:F,distance:C,spikeDistance:A}),S.htx?e.text=S.htx:S.tx?e.text=S.tx:s.text&&(e.text=s.text),TO(S,s,e),rS.getComponentMethod("errorbars","hoverInfo")(S,s,e),[e]}function s(e,t){var n=e.cd,r=[],i=n[0].trace,a=n[0].t,o=a.x,s=a.y,l=a.scene;if(!l)return r;var u=!EP.hasMarkers(i)&&!EP.hasText(i);if(!0!==i.visible||u)return r;var c,d=null,f=null;if(!1===t||t.degenerate)f=i4(a.count);else for(d=[],f=[],c=0;c<a.count;c++)t.contains([a.xpx[c],a.ypx[c]])?(d.push(c),r.push({pointNumber:c,x:o[c],y:s[c]})):f.push(c);if(l.selectBatch||(l.selectBatch=[],l.unselectBatch=[]),!l.selectBatch[a.index]){for(c=0;c<l.count;c++)l.selectBatch[c]=[],l.unselectBatch[c]=[];l.scatter2d.update(l.unselectedOptions)}return l.selectBatch[a.index]=d,l.unselectBatch[a.index]=f,r}function l(e,t){if(t){var n=t[0].t,r=n.scene;r.clear(),r.draw()}}var u=lH.calcMarkerSize,c=lH.calcAxisExpansion,d=AC.BADNUM,f=200,h=20,p=h/20,m={},g=PP.symbolFuncs[0](.05*h),y=1e5,v=/-dot/,_=/-open/;f6={moduleType:"trace",name:"scattergl",basePlotModule:xL,categories:["gl","regl","cartesian","symbols","errorBarsOK","markerColorscale","showLegend","scatter-like"],attributes:i6,supplyDefaults:d6,cleanData:uH,colorbar:YO,calc:t,plot:a,hoverPoints:o,style:l,selectPoints:s,sceneOptions:n,sceneUpdate:r,meta:{}}}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h6=f6,p6={exports:{}};(function(e){"use strict";!function(t){if("object"===typeof p6.exports)p6.exports=t();else if("function"===typeof MC&&MC.amd)MC([],t);else{var n;n="undefined"!==typeof window?window:"undefined"!==typeof e?e:"undefined"!==typeof self?self:this,n.mapboxgl=t()}}(function(){var e;return function e(t,n,i){function a(s,l){if(!n[s]){if(!t[s]){var u="function"==typeof r&&r;if(!l&&u)return r(s,!0);if(o)return o(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var d=n[s]={exports:{}};t[s][0].call(d.exports,function(e){var n=t[s][1][e];return a(n||e)},d,d.exports,e,t,n,i)}return n[s].exports}for(var o="function"==typeof r&&r,s=0;s<i.length;s++)a(i[s]);return a}({1:[function(e,t,n){function r(e){var t,n=0;switch(e.type){case"Polygon":return i(e.coordinates);case"MultiPolygon":for(t=0;t<e.coordinates.length;t++)n+=i(e.coordinates[t]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(t=0;t<e.geometries.length;t++)n+=r(e.geometries[t]);return n}}function i(e){var t=0;if(e&&e.length>0){t+=Math.abs(a(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(a(e[n]))}return t}function a(e){var t,n,r,i,a,l,u,c=0,d=e.length;if(d>2){for(u=0;u<d;u++)u===d-2?(i=d-2,a=d-1,l=0):u===d-1?(i=d-1,a=0,l=1):(i=u,a=u+1,l=u+2),t=e[i],n=e[a],r=e[l],c+=(o(r[0])-o(t[0]))*Math.sin(o(n[1]));c=c*s.RADIUS*s.RADIUS/2}return c}function o(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=r,t.exports.ring=a},{wgs84:37}],2:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.glMatrix=i()}(this,function(){function e(e,t,n){var r=t[0],i=t[1],a=t[2];return e[0]=r*n[0]+i*n[3]+a*n[6],e[1]=r*n[1]+i*n[4]+a*n[7],e[2]=r*n[2]+i*n[5]+a*n[8],e}function t(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3];return e[0]=n[0]*r+n[4]*i+n[8]*a+n[12]*o,e[1]=n[1]*r+n[5]*i+n[9]*a+n[13]*o,e[2]=n[2]*r+n[6]*i+n[10]*a+n[14]*o,e[3]=n[3]*r+n[7]*i+n[11]*a+n[15]*o,e}function n(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function r(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=Math.sin(n),l=Math.cos(n);return e[0]=r*l+a*s,e[1]=i*l+o*s,e[2]=r*-s+a*l,e[3]=i*-s+o*l,e}function i(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=n[0],l=n[1];return e[0]=r*s,e[1]=i*s,e[2]=a*l,e[3]=o*l,e}function a(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function o(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=-n,e[4]=r,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],d=t[9],f=t[10],h=t[11],p=t[12],m=t[13],g=t[14],y=t[15],v=n*s-r*o,_=n*l-i*o,b=n*u-a*o,x=r*l-i*s,w=r*u-a*s,k=i*u-a*l,T=c*m-d*p,M=c*g-f*p,A=c*y-h*p,C=d*g-f*m,S=d*y-h*m,E=f*y-h*g,P=v*E-_*S+b*C+x*A-w*M+k*T;return P?(P=1/P,e[0]=(s*E-l*S+u*C)*P,e[1]=(i*S-r*E-a*C)*P,e[2]=(m*k-g*w+y*x)*P,e[3]=(f*w-d*k-h*x)*P,e[4]=(l*A-o*E-u*M)*P,e[5]=(n*E-i*A+a*M)*P,e[6]=(g*b-p*k-y*_)*P,e[7]=(c*k-f*b+h*_)*P,e[8]=(o*S-s*A+u*T)*P,e[9]=(r*A-n*S-a*T)*P,e[10]=(p*w-m*b+y*v)*P,e[11]=(d*b-c*w-h*v)*P,e[12]=(s*M-o*C-l*T)*P,e[13]=(n*C-r*M+i*T)*P,e[14]=(m*_-p*x-g*v)*P,e[15]=(c*x-d*_+f*v)*P,e):null}function c(e,t,n){var r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],m=t[12],g=t[13],y=t[14],v=t[15],_=n[0],b=n[1],x=n[2],w=n[3];return e[0]=_*r+b*s+x*d+w*m,e[1]=_*i+b*l+x*f+w*g,e[2]=_*a+b*u+x*h+w*y,e[3]=_*o+b*c+x*p+w*v,_=n[4],b=n[5],x=n[6],w=n[7],e[4]=_*r+b*s+x*d+w*m,e[5]=_*i+b*l+x*f+w*g,e[6]=_*a+b*u+x*h+w*y,e[7]=_*o+b*c+x*p+w*v,_=n[8],b=n[9],x=n[10],w=n[11],e[8]=_*r+b*s+x*d+w*m,e[9]=_*i+b*l+x*f+w*g,e[10]=_*a+b*u+x*h+w*y,e[11]=_*o+b*c+x*p+w*v,_=n[12],b=n[13],x=n[14],w=n[15],e[12]=_*r+b*s+x*d+w*m,e[13]=_*i+b*l+x*f+w*g,e[14]=_*a+b*u+x*h+w*y,e[15]=_*o+b*c+x*p+w*v,e}function d(e,t,n){var r,i,a,o,s,l,u,c,d,f,h,p,m=n[0],g=n[1],y=n[2];return t===e?(e[12]=t[0]*m+t[4]*g+t[8]*y+t[12],e[13]=t[1]*m+t[5]*g+t[9]*y+t[13],e[14]=t[2]*m+t[6]*g+t[10]*y+t[14],e[15]=t[3]*m+t[7]*g+t[11]*y+t[15]):(r=t[0],i=t[1],a=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],d=t[8],f=t[9],h=t[10],p=t[11],e[0]=r,e[1]=i,e[2]=a,e[3]=o,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=d,e[9]=f,e[10]=h,e[11]=p,e[12]=r*m+s*g+d*y+t[12],e[13]=i*m+l*g+f*y+t[13],e[14]=a*m+u*g+h*y+t[14],e[15]=o*m+c*g+p*y+t[15]),e}function f(e,t,n){var r=n[0],i=n[1],a=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*a,e[9]=t[9]*a,e[10]=t[10]*a,e[11]=t[11]*a,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function h(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],d=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=a*i+u*r,e[5]=o*i+c*r,e[6]=s*i+d*r,e[7]=l*i+f*r,e[8]=u*i-a*r,e[9]=c*i-o*r,e[10]=d*i-s*r,e[11]=f*i-l*r,e}function p(e,t,n){var r=Math.sin(n),i=Math.cos(n),a=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],d=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=a*i+u*r,e[1]=o*i+c*r,e[2]=s*i+d*r,e[3]=l*i+f*r,e[4]=u*i-a*r,e[5]=c*i-o*r,e[6]=d*i-s*r,e[7]=f*i-l*r,e}function m(e,t,n,r,i){var a=1/Math.tan(t/2),o=1/(r-i);return e[0]=a/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=a,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+r)*o,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*r*o,e[15]=0,e}function g(e,t,n,r,i,a,o){var s=1/(t-n),l=1/(r-i),u=1/(a-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(i+r)*l,e[14]=(o+a)*u,e[15]=1,e}return function(){var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0}(),function(){var e=new Float32Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=0}(),{vec3:{transformMat3:e},vec4:{transformMat4:t},mat2:{create:n,rotate:r,scale:i},mat3:{create:a,fromRotation:o},mat4:{create:s,identity:l,translate:d,scale:f,multiply:c,perspective:m,rotateX:h,rotateZ:p,invert:u,ortho:g}}})},{}],3:[function(e,t,n){function r(e){return!!(i()&&a()&&o()&&s()&&l()&&u()&&c()&&d(e&&e.failIfMajorPerformanceCaveat))}function i(){return"undefined"!=typeof window&&"undefined"!=typeof document}function a(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function o(){return Function.prototype&&Function.prototype.bind}function s(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function l(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function u(){if(!("Worker"in window&&"Blob"in window))return!1;var e,t,n=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(n);try{t=new Worker(r),e=!0}catch(t){e=!1}return t&&t.terminate(),URL.revokeObjectURL(r),e}function c(){return"Uint8ClampedArray"in window}function d(e){return void 0===h[e]&&(h[e]=f(e)),h[e]}function f(e){var t=document.createElement("canvas"),n=Object.create(r.webGLContextAttributes);return n.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",n)||t.probablySupportsContext("experimental-webgl",n):t.supportsContext?t.supportsContext("webgl",n)||t.supportsContext("experimental-webgl",n):t.getContext("webgl",n)||t.getContext("experimental-webgl",n)}"undefined"!=typeof t&&t.exports?t.exports=r:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=r);var h={};r.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],4:[function(e,t,n){function r(e,t){this.x=e,this.y=t}t.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),a=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=a,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},{}],5:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?n.exports=i():"function"==typeof e&&e.amd?e(i):t.ShelfPack=i()}(this,function(){function e(e,t,n){n=n||{},this.w=e||64,this.h=t||64,this.autoResize=!!n.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,n){this.x=0,this.y=e,this.w=this.free=t,this.h=n}function n(e,t,n,r,i,a,o){this.id=e,this.x=t,this.y=n,this.w=r,this.h=i,this.maxw=a||r,this.maxh=o||i,this.refcount=0}return e.prototype.pack=function(e,t){var n=this;e=[].concat(e),t=t||{};for(var r,i,a,o,s=[],l=0;l<e.length;l++)if(r=e[l].w||e[l].width,i=e[l].h||e[l].height,a=e[l].id,r&&i){if(!(o=n.packOne(r,i,a)))continue;t.inPlace&&(e[l].x=o.x,e[l].y=o.y,e[l].id=o.id),s.push(o)}return this.shrink(),s},e.prototype.packOne=function(e,n,r){var i,a,o,s,l=this,u={freebin:-1,shelf:-1,waste:1/0},c=0;if("string"==typeof r||"number"==typeof r){if(i=this.getBin(r))return this.ref(i),i;"number"==typeof r&&(this.maxId=Math.max(r,this.maxId))}else r=++this.maxId;for(s=0;s<this.freebins.length;s++){if(i=l.freebins[s],n===i.maxh&&e===i.maxw)return l.allocFreebin(s,e,n,r);n>i.maxh||e>i.maxw||n<=i.maxh&&e<=i.maxw&&(o=i.maxw*i.maxh-e*n)<u.waste&&(u.waste=o,u.freebin=s)}for(s=0;s<this.shelves.length;s++)if(a=l.shelves[s],c+=a.h,!(e>a.free)){if(n===a.h)return l.allocShelf(s,e,n,r);n>a.h||n<a.h&&(o=(a.h-n)*e)<u.waste&&(u.freebin=-1,u.waste=o,u.shelf=s)}if(-1!==u.freebin)return this.allocFreebin(u.freebin,e,n,r);if(-1!==u.shelf)return this.allocShelf(u.shelf,e,n,r);if(n<=this.h-c&&e<=this.w)return a=new t(c,this.w,n),this.allocShelf(this.shelves.push(a)-1,e,n,r);if(this.autoResize){var d,f,h,p;return d=f=this.h,h=p=this.w,(h<=d||e>h)&&(p=2*Math.max(e,h)),(d<h||n>d)&&(f=2*Math.max(n,d)),this.resize(p,f),this.packOne(e,n,r)}return null},e.prototype.allocFreebin=function(e,t,n,r){var i=this.freebins.splice(e,1)[0];return i.id=r,i.w=t,i.h=n,i.refcount=0,this.bins[r]=i,this.ref(i),i},e.prototype.allocShelf=function(e,t,n,r){var i=this.shelves[e],a=i.alloc(t,n,r);return this.bins[r]=a,this.ref(a),a},e.prototype.shrink=function(){var e=this;if(this.shelves.length>0){for(var t=0,n=0,r=0;r<this.shelves.length;r++){var i=e.shelves[r];n+=i.h,t=Math.max(i.w-i.free,t)}this.resize(t,n)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1==++e.refcount){var t=e.h;this.stats[t]=1+(0|this.stats[t])}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0==--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){var n=this;this.w=e,this.h=t;for(var r=0;r<this.shelves.length;r++)n.shelves[r].resize(e);return!0},t.prototype.alloc=function(e,t,r){if(e>this.free||t>this.h)return null;var i=this.x;return this.x+=e,this.free-=e,new n(r,i,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],6:[function(e,t,n){function r(e,t,n,r,i,a){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=r||.25,this.fontFamily=i||"sans-serif",this.fontWeight=a||"normal",this.radius=n||8;var o=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(o*o),this.gridInner=new Float64Array(o*o),this.f=new Float64Array(o),this.d=new Float64Array(o),this.z=new Float64Array(o+1),this.v=new Int16Array(o),this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function i(e,t,n,r,i,o,s){for(var l=0;l<t;l++){for(var u=0;u<n;u++)r[u]=e[u*t+l];for(a(r,i,o,s,n),u=0;u<n;u++)e[u*t+l]=i[u]}for(u=0;u<n;u++){for(l=0;l<t;l++)r[l]=e[u*t+l];for(a(r,i,o,s,t),l=0;l<t;l++)e[u*t+l]=Math.sqrt(i[l])}}function a(e,t,n,r,i){n[0]=0,r[0]=-o,r[1]=+o;for(var a=1,s=0;a<i;a++){for(var l=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);l<=r[s];)s--,l=(e[a]+a*a-(e[n[s]]+n[s]*n[s]))/(2*a-2*n[s]);s++,n[s]=a,r[s]=l,r[s+1]=+o}for(a=0,s=0;a<i;a++){for(;r[s+1]<a;)s++;t[a]=(a-n[s])*(a-n[s])+e[n[s]]}}t.exports=r;var o=1e20;r.prototype.draw=function(e){var t=this;this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var n=this.ctx.getImageData(0,0,this.size,this.size),r=new Uint8ClampedArray(this.size*this.size),a=0;a<this.size*this.size;a++){var s=n.data[4*a+3]/255;t.gridOuter[a]=1===s?0:0===s?o:Math.pow(Math.max(0,.5-s),2),t.gridInner[a]=1===s?o:0===s?0:Math.pow(Math.max(0,s-.5),2)}for(i(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),i(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),a=0;a<this.size*this.size;a++){var l=t.gridOuter[a]-t.gridInner[a];r[a]=Math.max(0,Math.min(255,Math.round(255-255*(l/t.radius+t.cutoff))))}return r}},{}],7:[function(e,t,n){function r(e,t,n,r){this.cx=3*e,this.bx=3*(n-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(r-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=r,this.p2x=n,this.p2y=r}t.exports=r,r.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},r.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},r.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},r.prototype.solveCurveX=function(e,t){var n=this;void 0===t&&(t=1e-6);var r,i,a,o,s;for(a=e,s=0;s<8;s++){if(o=n.sampleCurveX(a)-e,Math.abs(o)<t)return a;var l=n.sampleCurveDerivativeX(a);if(Math.abs(l)<1e-6)break;a-=o/l}if(r=0,i=1,(a=e)<r)return r;if(a>i)return i;for(;r<i;){if(o=n.sampleCurveX(a),Math.abs(o-e)<t)return a;e>o?r=a:i=a,a=.5*(i-r)+r}return a},r.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],8:[function(e,t,n){t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":9,"./lib/vectortilefeature.js":10,"./lib/vectortilelayer.js":11}],9:[function(e,t,n){function r(e,t){this.layers=e.readFields(i,{},t)}function i(e,t,n){if(3===e){var r=new a(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var a=e("./vectortilelayer");t.exports=r},{"./vectortilelayer":11}],10:[function(e,t,n){function r(e,t,n,r,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(i,this,t)}function i(e,t,n){1==e?t.id=n.readVarint():2==e?a(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function a(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}function o(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],a=0;a<t;a++){var o=s(e[a]);0!==o&&(void 0===r&&(r=o<0),r===o<0?(n&&i.push(n),n=[e[a]]):n.push(e[a]))}return n&&i.push(n),i}function s(e){for(var t,n,r=0,i=0,a=e.length,o=a-1;i<a;o=i++)t=e[i],n=e[o],r+=(n.x-t.x)*(t.y+n.y);return r}var l=e("@mapbox/point-geometry");t.exports=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,r=1,i=0,a=0,o=0,s=[];e.pos<n;){if(!i){var u=e.readVarint();r=7&u,i=u>>3}if(i--,1===r||2===r)a+=e.readSVarint(),o+=e.readSVarint(),1===r&&(t&&s.push(t),t=[]),t.push(new l(a,o));else{if(7!==r)throw new Error("unknown command "+r);t&&t.push(t[0].clone())}}return t&&s.push(t),s},r.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,a=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=e.readSVarint(),a+=e.readSVarint(),i<o&&(o=i),i>s&&(s=i),a<l&&(l=a),a>u&&(u=a);else if(7!==n)throw new Error("unknown command "+n)}return[o,l,s,u]},r.prototype.toGeoJSON=function(e,t,n){function i(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+c)/l;e[t]=[360*(n.x+u)/l-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}var a,s,l=this.extent*Math.pow(2,n),u=this.extent*e,c=this.extent*t,d=this.loadGeometry(),f=r.types[this.type];switch(this.type){case 1:var h=[];for(a=0;a<d.length;a++)h[a]=d[a][0];d=h,i(d);break;case 2:for(a=0;a<d.length;a++)i(d[a]);break;case 3:for(d=o(d),a=0;a<d.length;a++)for(s=0;s<d[a].length;s++)i(d[a][s])}1===d.length?d=d[0]:f="Multi"+f;var p={type:"Feature",geometry:{type:f,coordinates:d},properties:this.properties};return"id"in this&&(p.id=this.id),p}},{"@mapbox/point-geometry":4}],11:[function(e,t,n){function r(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(i,this,t),this.length=this._features.length}function i(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(a(n))}function a(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}var o=e("./vectortilefeature.js");t.exports=r,r.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new o(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":10}],12:[function(t,n,r){!function(t,i){"object"==typeof r&&"undefined"!=typeof n?i(r):"function"==typeof e&&e.amd?e(["exports"],i):i(t.WhooTS=t.WhooTS||{})}(this,function(e){function t(e,t,r,i,a,o){return o=o||{},e+"?"+["bbox="+n(r,i,a),"format="+(o.format||"image/png"),"service="+(o.service||"WMS"),"version="+(o.version||"1.1.1"),"request="+(o.request||"GetMap"),"srs="+(o.srs||"EPSG:3857"),"width="+(o.width||256),"height="+(o.height||256),"layers="+t].join("&")}function n(e,t,n){t=Math.pow(2,n)-t-1;var i=r(256*e,256*t,n),a=r(256*(e+1),256*(t+1),n);return i[0]+","+i[1]+","+a[0]+","+a[1]}function r(e,t,n){var r=2*Math.PI*6378137/256/Math.pow(2,n);return[e*r-2*Math.PI*6378137/2,t*r-2*Math.PI*6378137/2]}e.getURL=t,e.getTileBBox=n,e.getMercCoords=r,Object.defineProperty(e,"__esModule",{value:!0})})},{}],13:[function(e,t,n){function r(e){return e=Math.round(e),e<0?0:e>255?255:e}function i(e){return e<0?0:e>1?1:e}function a(e){return r("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function o(e){return i("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function s(e,t,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function l(e){var t=e.replace(/ /g,"").toLowerCase();if(t in u)return u[t].slice();if("#"===t[0]){if(4===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null}if(7===t.length){var n=parseInt(t.substr(1),16);return n>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null}return null}var i=t.indexOf("("),l=t.indexOf(")");if(-1!==i&&l+1===t.length){var c=t.substr(0,i),d=t.substr(i+1,l-(i+1)).split(","),f=1;switch(c){case"rgba":if(4!==d.length)return null;f=o(d.pop());case"rgb":return 3!==d.length?null:[a(d[0]),a(d[1]),a(d[2]),f];case"hsla":if(4!==d.length)return null;f=o(d.pop());case"hsl":if(3!==d.length)return null;var h=(parseFloat(d[0])%360+360)%360/360,p=o(d[1]),m=o(d[2]),g=m<=.5?m*(p+1):m+p-m*p,y=2*m-g;return[r(255*s(y,g,h+1/3)),r(255*s(y,g,h)),r(255*s(y,g,h-1/3)),f];default:return null}}return null}var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{n.parseCSSColor=l}catch(e){}},{}],14:[function(e,t,n){function r(e,t,n){n=n||2;var r=t&&t.length,a=r?t[0]*n:e.length,s=i(e,0,a,n,!0),l=[];if(!s)return l;var u,c,f,h,p,m,g;if(r&&(s=d(e,t,s,n)),e.length>80*n){u=f=e[0],c=h=e[1];for(var y=n;y<a;y+=n)p=e[y],m=e[y+1],p<u&&(u=p),m<c&&(c=m),p>f&&(f=p),m>h&&(h=m);g=Math.max(f-u,h-c),g=0!==g?1/g:0}return o(s,l,n,u,c,g),l}function i(e,t,n,r,i){var a,o;if(i===I(e,t,n,r)>0)for(a=t;a<n;a+=r)o=S(a,e[a],e[a+1],o);else for(a=n-r;a>=t;a-=r)o=S(a,e[a],e[a+1],o);return o&&w(o,o.next)&&(E(o),o=o.next),o}function a(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!w(r,r.next)&&0!==x(r.prev,r,r.next))r=r.next;else{if(E(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function o(e,t,n,r,i,d,f){if(e){!f&&d&&m(e,r,i,d);for(var h,p,g=e;e.prev!==e.next;)if(h=e.prev,p=e.next,d?l(e,r,i,d):s(e))t.push(h.i/n),t.push(e.i/n),t.push(p.i/n),E(e),e=p.next,g=p.next;else if((e=p)===g){f?1===f?(e=u(e,t,n),o(e,t,n,r,i,d,2)):2===f&&c(e,t,n,r,i,d):o(a(e),t,n,r,i,d,1);break}}}function s(e){var t=e.prev,n=e,r=e.next;if(x(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(_(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&x(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,n,r){var i=e.prev,a=e,o=e.next;if(x(i,a,o)>=0)return!1;for(var s=i.x<a.x?i.x<o.x?i.x:o.x:a.x<o.x?a.x:o.x,l=i.y<a.y?i.y<o.y?i.y:o.y:a.y<o.y?a.y:o.y,u=i.x>a.x?i.x>o.x?i.x:o.x:a.x>o.x?a.x:o.x,c=i.y>a.y?i.y>o.y?i.y:o.y:a.y>o.y?a.y:o.y,d=y(s,l,t,n,r),f=y(u,c,t,n,r),h=e.prevZ,p=e.nextZ;h&&h.z>=d&&p&&p.z<=f;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;if(h=h.prevZ,p!==e.prev&&p!==e.next&&_(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;h&&h.z>=d;){if(h!==e.prev&&h!==e.next&&_(i.x,i.y,a.x,a.y,o.x,o.y,h.x,h.y)&&x(h.prev,h,h.next)>=0)return!1;h=h.prevZ}for(;p&&p.z<=f;){if(p!==e.prev&&p!==e.next&&_(i.x,i.y,a.x,a.y,o.x,o.y,p.x,p.y)&&x(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function u(e,t,n){var r=e;do{var i=r.prev,a=r.next.next;!w(i,a)&&k(i,r,r.next,a)&&M(i,a)&&M(a,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(a.i/n),E(r),E(r.next),r=e=a),r=r.next}while(r!==e);return r}function c(e,t,n,r,i,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&b(l,u)){var c=C(l,u);return l=a(l,l.next),c=a(c,c.next),o(l,t,n,r,i,s),void o(c,t,n,r,i,s)}u=u.next}l=l.next}while(l!==e)}function d(e,t,n,r){var o,s,l,u,c,d=[];for(o=0,s=t.length;o<s;o++)l=t[o]*r,u=o<s-1?t[o+1]*r:e.length,c=i(e,l,u,r,!1),c===c.next&&(c.steiner=!0),d.push(v(c));for(d.sort(f),o=0;o<d.length;o++)h(d[o],n),n=a(n,n.next);return n}function f(e,t){return e.x-t.x}function h(e,t){if(t=p(e,t)){var n=C(t,e);a(n,n.next)}}function p(e,t){var n,r=t,i=e.x,a=e.y,o=-1/0;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){var s=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=i&&s>o){if(o=s,s===i){if(a===r.y)return r;if(a===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===o)return n.prev;var l,u=n,c=n.x,d=n.y,f=1/0;for(r=n.next;r!==u;)i>=r.x&&r.x>=c&&i!==r.x&&_(a<d?i:o,a,c,d,a<d?o:i,a,r.x,r.y)&&((l=Math.abs(a-r.y)/(i-r.x))<f||l===f&&r.x>n.x)&&M(r,e)&&(n=r,f=l),r=r.next;return n}function m(e,t,n,r){var i=e;do{null===i.z&&(i.z=y(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,g(i)}function g(e){var t,n,r,i,a,o,s,l,u=1;do{for(n=e,e=null,a=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ);t++);for(l=u;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),a?a.nextZ=i:e=i,i.prevZ=a,a=i;n=r}a.nextZ=null,u*=2}while(o>1);return e}function y(e,t,n,r,i){return e=32767*(e-n)*i,t=32767*(t-r)*i,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function v(e){var t=e,n=e;do{t.x<n.x&&(n=t),t=t.next}while(t!==e);return n}function _(e,t,n,r,i,a,o,s){return(i-o)*(t-s)-(e-o)*(a-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(a-s)-(i-o)*(r-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!T(e,t)&&M(e,t)&&M(t,e)&&A(e,t)}function x(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function k(e,t,n,r){return!!(w(e,t)&&w(n,r)||w(e,r)&&w(n,t))||x(e,t,n)>0!=x(e,t,r)>0&&x(n,r,e)>0!=x(n,r,t)>0}function T(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&k(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function M(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function A(e,t){var n=e,r=!1,i=(e.x+t.x)/2,a=(e.y+t.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&i<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}function C(e,t){var n=new P(e.i,e.x,e.y),r=new P(t.i,t.x,t.y),i=e.next,a=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,a.next=r,r.prev=a,r}function S(e,t,n,r){var i=new P(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function E(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function P(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,n,r){for(var i=0,a=t,o=n-r;a<n;a+=r)i+=(e[o]-e[a])*(e[a+1]+e[o+1]),o=a;return i}t.exports=r,t.exports.default=r,r.deviation=function(e,t,n,r){var i=t&&t.length,a=i?t[0]*n:e.length,o=Math.abs(I(e,0,a,n));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(I(e,u,c,n))}var d=0;for(s=0;s<r.length;s+=3){var f=r[s]*n,h=r[s+1]*n,p=r[s+2]*n;d+=Math.abs((e[f]-e[p])*(e[h+1]-e[f+1])-(e[f]-e[h])*(e[p+1]-e[f+1]))}return 0===o&&0===d?0:Math.abs((d-o)/o)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var a=0;a<e[i].length;a++)for(var o=0;o<t;o++)n.vertices.push(e[i][a][o]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},{}],15:[function(e,t,n){function r(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(i(r,t)),e;case"Feature":return e.geometry=r(e.geometry,t),e;case"Polygon":case"MultiPolygon":return a(e,t);default:return e}}function i(e,t){return function(n){return e(n,t)}}function a(e,t){return"Polygon"===e.type?e.coordinates=o(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(i(o,t))),e}function o(e,t){t=!!t,e[0]=s(e[0],t);for(var n=1;n<e.length;n++)e[n]=s(e[n],!t);return e}function s(e,t){return l(e)===t?e:e.reverse()}function l(e){return u.ring(e)>=0}var u=e("@mapbox/geojson-area");t.exports=r},{"@mapbox/geojson-area":1}],16:[function(e,t,n){function r(e,t,n,r,s,l,u){if(n/=t,r/=t,l>=n&&u<=r)return e;if(l>r||u<n)return null;for(var d=[],f=0;f<e.length;f++){var h=e[f],p=h.geometry,m=h.type,g=0===s?h.minX:h.minY,y=0===s?h.maxX:h.maxY;if(g>=n&&y<=r)d.push(h);else if(!(g>r||y<n)){var v=[];if("Point"===m||"MultiPoint"===m)i(p,v,n,r,s);else if("LineString"===m)a(p,v,n,r,s,!1);else if("MultiLineString"===m)o(p,v,n,r,s,!1);else if("Polygon"===m)o(p,v,n,r,s,!0);else if("MultiPolygon"===m)for(var _=0;_<p.length;_++){var b=[];o(p[_],b,n,r,s,!0),b.length&&v.push(b)}v.length&&("LineString"!==m&&"MultiLineString"!==m||(1===v.length?(m="LineString",v=v[0]):m="MultiLineString"),"Point"!==m&&"MultiPoint"!==m||(m=3===v.length?"Point":"MultiPoint"),d.push(c(h.id,m,v,h.tags)))}}return d.length?d:null}function i(e,t,n,r,i){for(var a=0;a<e.length;a+=3){var o=e[a+i];o>=n&&o<=r&&(t.push(e[a]),t.push(e[a+1]),t.push(e[a+2]))}}function a(e,t,n,r,i,a){for(var o=[],c=0===i?l:u,d=0;d<e.length-3;d+=3){var f=e[d],h=e[d+1],p=e[d+2],m=e[d+3],g=e[d+4],y=0===i?f:h,v=0===i?m:g,_=!1;y<n?v>=n&&c(o,f,h,m,g,n):y>r?v<=r&&c(o,f,h,m,g,r):s(o,f,h,p),v<n&&y>=n&&(c(o,f,h,m,g,n),_=!0),v>r&&y<=r&&(c(o,f,h,m,g,r),_=!0),!a&&_&&(o.size=e.size,t.push(o),o=[])}var b=e.length-3;f=e[b],h=e[b+1],p=e[b+2],y=0===i?f:h,y>=n&&y<=r&&s(o,f,h,p),b=o.length-3,a&&b>=3&&(o[b]!==o[0]||o[b+1]!==o[1])&&s(o,o[0],o[1],o[2]),o.length&&(o.size=e.size,t.push(o))}function o(e,t,n,r,i,o){for(var s=0;s<e.length;s++)a(e[s],t,n,r,i,o)}function s(e,t,n,r){e.push(t),e.push(n),e.push(r)}function l(e,t,n,r,i,a){e.push(a),e.push(n+(a-t)*(i-n)/(r-t)),e.push(1)}function u(e,t,n,r,i,a){e.push(t+(a-n)*(r-t)/(i-n)),e.push(a),e.push(1)}t.exports=r;var c=e("./feature")},{"./feature":18}],17:[function(e,t,n){function r(e,t){var n=[];if("FeatureCollection"===e.type)for(var r=0;r<e.features.length;r++)i(n,e.features[r],t);else"Feature"===e.type?i(n,e,t):i(n,{geometry:e},t);return n}function i(e,t,n){if(t.geometry){var r=t.geometry.coordinates,l=t.geometry.type,u=n*n,c=[];if("Point"===l)a(r,c);else if("MultiPoint"===l)for(var f=0;f<r.length;f++)a(r[f],c);else if("LineString"===l)o(r,c,u,!1);else if("MultiLineString"===l)s(r,c,u,!1);else if("Polygon"===l)s(r,c,u,!0);else{if("MultiPolygon"!==l){if("GeometryCollection"===l){for(f=0;f<t.geometry.geometries.length;f++)i(e,{geometry:t.geometry.geometries[f],properties:t.properties},n);return}throw new Error("Input data is not a valid GeoJSON object.")}for(f=0;f<r.length;f++){var h=[];s(r[f],h,u,!0),c.push(h)}}e.push(d(t.id,l,c,t.properties))}}function a(e,t){t.push(l(e[0])),t.push(u(e[1])),t.push(0)}function o(e,t,n,r){for(var i,a,o=0,s=0;s<e.length;s++){var d=l(e[s][0]),f=u(e[s][1]);t.push(d),t.push(f),t.push(0),s>0&&(o+=r?(i*f-d*a)/2:Math.sqrt(Math.pow(d-i,2)+Math.pow(f-a,2))),i=d,a=f}var h=t.length-3;t[2]=1,c(t,0,h,n),t[h+2]=1,t.size=Math.abs(o)}function s(e,t,n,r){for(var i=0;i<e.length;i++){var a=[];o(e[i],a,n,r),t.push(a)}}function l(e){return e/360+.5}function u(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}t.exports=r;var c=e("./simplify"),d=e("./feature")},{"./feature":18,"./simplify":20}],18:[function(e,t,n){function r(e,t,n,r){var a={id:e||null,type:t,geometry:n,tags:r,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return i(a),a}function i(e){var t=e.geometry,n=e.type;if("Point"===n||"MultiPoint"===n||"LineString"===n)a(e,t);else if("Polygon"===n||"MultiLineString"===n)for(var r=0;r<t.length;r++)a(e,t[r]);else if("MultiPolygon"===n)for(r=0;r<t.length;r++)for(var i=0;i<t[r].length;i++)a(e,t[r][i])}function a(e,t){for(var n=0;n<t.length;n+=3)e.minX=Math.min(e.minX,t[n]),e.minY=Math.min(e.minY,t[n+1]),e.maxX=Math.max(e.maxX,t[n]),e.maxY=Math.max(e.maxY,t[n+1])}t.exports=r},{}],19:[function(e,t,n){function r(e,t){return new i(e,t)}function i(e,t){t=this.options=o(Object.create(this.options),t);var n=t.debug;if(n&&console.time("preprocess data"),t.maxZoom<0||t.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");var r=1<<t.maxZoom,i=s(e,t.tolerance/(r*t.extent));this.tiles={},this.tileCoords=[],n&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),i=c(i,t.buffer/t.extent),i.length&&this.splitTile(i,0,0,0),n&&(i.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function a(e,t,n){return 32*((1<<e)*n+t)+e}function o(e,t){for(var n in t)e[n]=t[n];return e}t.exports=r;var s=e("./convert"),l=e("./transform"),u=e("./clip"),c=e("./wrap"),d=e("./tile");i.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,debug:0},i.prototype.splitTile=function(e,t,n,r,i,o,s){for(var l=this,c=[e,t,n,r],f=this.options,h=f.debug;c.length;){r=c.pop(),n=c.pop(),t=c.pop(),e=c.pop();var p=1<<t,m=a(t,n,r),g=l.tiles[m],y=t===f.maxZoom?0:f.tolerance/(p*f.extent);if(!g&&(h>1&&console.time("creation"),g=l.tiles[m]=d(e,p,n,r,y,t===f.maxZoom),l.tileCoords.push({z:t,x:n,y:r}),h)){h>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,n,r,g.numFeatures,g.numPoints,g.numSimplified),console.timeEnd("creation"));var v="z"+t;l.stats[v]=(l.stats[v]||0)+1,l.total++}if(g.source=e,i){if(t===f.maxZoom||t===i)continue;var _=1<<i-t;if(n!==Math.floor(o/_)||r!==Math.floor(s/_))continue}else if(t===f.indexMaxZoom||g.numPoints<=f.indexMaxPoints)continue;if(g.source=null,0!==e.length){h>1&&console.time("clipping");var b,x,w,k,T,M,A=.5*f.buffer/f.extent,C=.5-A,S=.5+A,E=1+A;b=x=w=k=null,T=u(e,p,n-A,n+S,0,g.minX,g.maxX),M=u(e,p,n+C,n+E,0,g.minX,g.maxX),e=null,T&&(b=u(T,p,r-A,r+S,1,g.minY,g.maxY),x=u(T,p,r+C,r+E,1,g.minY,g.maxY),T=null),M&&(w=u(M,p,r-A,r+S,1,g.minY,g.maxY),k=u(M,p,r+C,r+E,1,g.minY,g.maxY),M=null),h>1&&console.timeEnd("clipping"),c.push(b||[],t+1,2*n,2*r),c.push(x||[],t+1,2*n,2*r+1),c.push(w||[],t+1,2*n+1,2*r),c.push(k||[],t+1,2*n+1,2*r+1)}}},i.prototype.getTile=function(e,t,n){var r=this,i=this.options,o=i.extent,s=i.debug;if(e<0||e>24)return null;var u=1<<e;t=(t%u+u)%u;var c=a(e,t,n);if(this.tiles[c])return l.tile(this.tiles[c],o);s>1&&console.log("drilling down to z%d-%d-%d",e,t,n);for(var d,f=e,h=t,p=n;!d&&f>0;)f--,h=Math.floor(h/2),p=Math.floor(p/2),d=r.tiles[a(f,h,p)];return d&&d.source?(s>1&&console.log("found parent tile z%d-%d-%d",f,h,p),s>1&&console.time("drilling down"),this.splitTile(d.source,f,h,p,e,t,n),s>1&&console.timeEnd("drilling down"),this.tiles[c]?l.tile(this.tiles[c],o):null):null}},{"./clip":16,"./convert":17,"./tile":21,"./transform":22,"./wrap":23}],20:[function(e,t,n){function r(e,t,n,a){for(var o,s=a,l=e[t],u=e[t+1],c=e[n],d=e[n+1],f=t+3;f<n;f+=3){var h=i(e[f],e[f+1],l,u,c,d);h>s&&(o=f,s=h)}s>a&&(o-t>3&&r(e,t,o,a),e[o+2]=s,n-o>3&&r(e,o,n,a))}function i(e,t,n,r,i,a){var o=i-n,s=a-r;if(0!==o||0!==s){var l=((e-n)*o+(t-r)*s)/(o*o+s*s);l>1?(n=i,r=a):l>0&&(n+=o*l,r+=s*l)}return o=e-n,s=t-r,o*o+s*s}t.exports=r},{}],21:[function(e,t,n){function r(e,t,n,r,a,o){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:n,y:r,z2:t,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},l=0;l<e.length;l++){s.numFeatures++,i(s,e[l],a,o);var u=e[l].minX,c=e[l].minY,d=e[l].maxX,f=e[l].maxY;u<s.minX&&(s.minX=u),c<s.minY&&(s.minY=c),d>s.maxX&&(s.maxX=d),f>s.maxY&&(s.maxY=f)}return s}function i(e,t,n,r){var i=t.geometry,o=t.type,s=[];if("Point"===o||"MultiPoint"===o)for(var l=0;l<i.length;l+=3)s.push(i[l]),s.push(i[l+1]),e.numPoints++,e.numSimplified++;else if("LineString"===o)a(s,i,e,n,r,!1,!1);else if("MultiLineString"===o||"Polygon"===o)for(l=0;l<i.length;l++)a(s,i[l],e,n,r,"Polygon"===o,0===l);else if("MultiPolygon"===o)for(var u=0;u<i.length;u++){var c=i[u];for(l=0;l<c.length;l++)a(s,c[l],e,n,r,!0,0===l)}if(s.length){var d={geometry:s,type:"Polygon"===o||"MultiPolygon"===o?3:"LineString"===o||"MultiLineString"===o?2:1,tags:t.tags||null};null!==t.id&&(d.id=t.id),e.features.push(d)}}function a(e,t,n,r,i,a,s){var l=r*r;if(!i&&t.size<(a?l:r))return void(n.numPoints+=t.length/3);for(var u=[],c=0;c<t.length;c+=3)(i||t[c+2]>l)&&(n.numSimplified++,u.push(t[c]),u.push(t[c+1])),n.numPoints++;a&&o(u,s),e.push(u)}function o(e,t){for(var n=0,r=0,i=e.length,a=i-2;r<i;a=r,r+=2)n+=(e[r]-e[a])*(e[r+1]+e[a+1]);if(n>0===t)for(r=0,i=e.length;r<i/2;r+=2){var o=e[r],s=e[r+1];e[r]=e[i-2-r],e[r+1]=e[i-1-r],e[i-2-r]=o,e[i-1-r]=s}}t.exports=r},{}],22:[function(e,t,n){function r(e,t){if(e.transformed)return e;var n,r,a,o=e.z2,s=e.x,l=e.y;for(n=0;n<e.features.length;n++){var u=e.features[n],c=u.geometry,d=u.type;if(u.geometry=[],1===d)for(r=0;r<c.length;r+=2)u.geometry.push(i(c[r],c[r+1],t,o,s,l));else for(r=0;r<c.length;r++){var f=[];for(a=0;a<c[r].length;a+=2)f.push(i(c[r][a],c[r][a+1],t,o,s,l));u.geometry.push(f)}}return e.transformed=!0,e}function i(e,t,n,r,i,a){return[Math.round(n*(e*r-i)),Math.round(n*(t*r-a))]}n.tile=r,n.point=i},{}],23:[function(e,t,n){function r(e,t){var n=e,r=o(e,1,-1-t,t,0,-1,2),a=o(e,1,1-t,2+t,0,-1,2);return(r||a)&&(n=o(e,1,-t,1+t,0,-1,2)||[],r&&(n=i(r,1).concat(n)),a&&(n=n.concat(i(a,-1)))),n}function i(e,t){for(var n=[],r=0;r<e.length;r++){var i,o=e[r],l=o.type;if("Point"===l||"MultiPoint"===l||"LineString"===l)i=a(o.geometry,t);else if("MultiLineString"===l||"Polygon"===l){i=[];for(var u=0;u<o.geometry.length;u++)i.push(a(o.geometry[u],t))}else if("MultiPolygon"===l)for(i=[],u=0;u<o.geometry.length;u++){for(var c=[],d=0;d<o.geometry[u].length;d++)c.push(a(o.geometry[u][d],t));i.push(c)}n.push(s(o.id,l,i,o.tags))}return n}function a(e,t){var n=[];n.size=e.size;for(var r=0;r<e.length;r+=3)n.push(e[r]+t,e[r+1],e[r+2]);return n}var o=e("./clip"),s=e("./feature");t.exports=r},{"./clip":16,"./feature":18}],24:[function(e,t,n){function r(e,t,n){var r=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var a=new Int32Array(this.arrayBuffer);e=a[0],t=a[1],n=a[2],this.d=t+2*n;for(var o=0;o<this.d*this.d;o++){var s=a[i+o],l=a[i+o+1];r.push(s===l?null:a.subarray(s,l))}var u=a[i+r.length],c=a[i+r.length+1];this.keys=a.subarray(u,c),this.bboxes=a.subarray(c),this.insert=this._insertReadonly}else{this.d=t+2*n;for(var d=0;d<this.d*this.d;d++)r.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=n,this.scale=t/e,this.uid=0;var f=n/t*e;this.min=-f,this.max=e+f}t.exports=r;var i=3;r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},r.prototype._insertCell=function(e,t,n,r,i,a){this.cells[i].push(a)},r.prototype.query=function(e,t,n,r){var i=this.min,a=this.max;if(e<=i&&t<=i&&a<=n&&a<=r)return Array.prototype.slice.call(this.keys);var o=[],s={};return this._forEachCell(e,t,n,r,this._queryCell,o,s),o},r.prototype._queryCell=function(e,t,n,r,i,a,o){var s=this.cells[i];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var d=s[c];if(void 0===o[d]){var f=4*d;e<=u[f+2]&&t<=u[f+3]&&n>=u[f+0]&&r>=u[f+1]?(o[d]=!0,a.push(l[d])):o[d]=!1}}},r.prototype._forEachCell=function(e,t,n,r,i,a,o){for(var s=this,l=this._convertToCellCoord(e),u=this._convertToCellCoord(t),c=this._convertToCellCoord(n),d=this._convertToCellCoord(r),f=l;f<=c;f++)for(var h=u;h<=d;h++){var p=s.d*h+f;if(i.call(s,e,t,n,r,p,a,o))return}},r.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},r.prototype.toArrayBuffer=function(){var e=this;if(this.arrayBuffer)return this.arrayBuffer;for(var t=this.cells,n=i+this.cells.length+1+1,r=0,a=0;a<this.cells.length;a++)r+=e.cells[a].length;var o=new Int32Array(n+r+this.keys.length+this.bboxes.length);o[0]=this.extent,o[1]=this.n,o[2]=this.padding;for(var s=n,l=0;l<t.length;l++){var u=t[l];o[i+l]=s,o.set(u,s),s+=u.length}return o[i+t.length]=s,o.set(this.keys,s),s+=this.keys.length,o[i+t.length+1]=s,o.set(this.bboxes,s),s+=this.bboxes.length,o.buffer}},{}],25:[function(e,t,n){n.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,d=n?i-1:0,f=n?-1:1,h=e[t+d];for(d+=f,a=h&(1<<-c)-1,h>>=-c,c+=s;c>0;a=256*a+e[t+d],d+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=r;c>0;o=256*o+e[t+d],d+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(h?-1:1);o+=Math.pow(2,r),a-=u}return(h?-1:1)*o*Math.pow(2,a-r)},n.write=function(e,t,n,r,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,d=c>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:a-1,p=r?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),t+=o+d>=1?f/l:f*Math.pow(2,1-d),t*l>=2&&(o++,l/=2),o+d>=c?(s=0,o=c):o+d>=1?(s=(t*l-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+h]=255&s,h+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+h]=255&o,h+=p,o/=256,u-=8);e[n+h-p]|=128*m}},{}],26:[function(e,t,n){function r(e,t,n,r,a){return new i(e,t,n,r,a)}function i(e,t,n,r,i){var l=this;t=t||a,n=n||o,i=i||Array,this.nodeSize=r||64,this.points=e,this.ids=new i(e.length),this.coords=new i(2*e.length);for(var u=0;u<e.length;u++)l.ids[u]=u,l.coords[2*u]=t(e[u]),l.coords[2*u+1]=n(e[u]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function a(e){return e[0]}function o(e){return e[1]}var s=e("./sort"),l=e("./range"),u=e("./within");t.exports=r,i.prototype={range:function(e,t,n,r){return l(this.ids,this.coords,e,t,n,r,this.nodeSize)},within:function(e,t,n){return u(this.ids,this.coords,e,t,n,this.nodeSize)}}},{"./range":27,"./sort":28,"./within":29}],27:[function(e,t,n){function r(e,t,n,r,i,a,o){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var d=u.pop(),f=u.pop(),h=u.pop();if(f-h<=o)for(var p=h;p<=f;p++)s=t[2*p],l=t[2*p+1],s>=n&&s<=i&&l>=r&&l<=a&&c.push(e[p]);else{var m=Math.floor((h+f)/2);s=t[2*m],l=t[2*m+1],s>=n&&s<=i&&l>=r&&l<=a&&c.push(e[m]);var g=(d+1)%2;(0===d?n<=s:r<=l)&&(u.push(h),u.push(m-1),u.push(g)),(0===d?i>=s:a>=l)&&(u.push(m+1),u.push(f),u.push(g))}}return c}t.exports=r},{}],28:[function(e,t,n){function r(e,t,n,a,o,s){if(!(o-a<=n)){var l=Math.floor((a+o)/2);i(e,t,l,a,o,s%2),r(e,t,n,a,l-1,s+1),r(e,t,n,l+1,o,s+1)}}function i(e,t,n,r,o,s){for(;o>r;){if(o-r>600){var l=o-r+1,u=n-r+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1);i(e,t,n,Math.max(r,Math.floor(n-u*d/l+f)),Math.min(o,Math.floor(n+(l-u)*d/l+f)),s)}var h=t[2*n+s],p=r,m=o;for(a(e,t,r,n),t[2*o+s]>h&&a(e,t,r,o);p<m;){for(a(e,t,p,m),p++,m--;t[2*p+s]<h;)p++;for(;t[2*m+s]>h;)m--}t[2*r+s]===h?a(e,t,r,m):(m++,a(e,t,m,o)),m<=n&&(r=m+1),n<=m&&(o=m-1)}}function a(e,t,n,r){o(e,n,r),o(t,2*n,2*r),o(t,2*n+1,2*r+1)}function o(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}t.exports=r},{}],29:[function(e,t,n){function r(e,t,n,r,a,o){for(var s=[0,e.length-1,0],l=[],u=a*a;s.length;){var c=s.pop(),d=s.pop(),f=s.pop();if(d-f<=o)for(var h=f;h<=d;h++)i(t[2*h],t[2*h+1],n,r)<=u&&l.push(e[h]);else{var p=Math.floor((f+d)/2),m=t[2*p],g=t[2*p+1];i(m,g,n,r)<=u&&l.push(e[p]);var y=(c+1)%2;(0===c?n-a<=m:r-a<=g)&&(s.push(f),s.push(p-1),s.push(y)),(0===c?n+a>=m:r+a>=g)&&(s.push(p+1),s.push(d),s.push(y))}}return l}function i(e,t,n,r){var i=e-n,a=t-r;return i*i+a*a}t.exports=r},{}],30:[function(e,t,n){function r(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function i(e,t,n){var r,i,a=n.buf;if(i=a[n.pos++],r=(112&i)>>4,i<128)return o(e,r,t);if(i=a[n.pos++],r|=(127&i)<<3,i<128)return o(e,r,t);if(i=a[n.pos++],r|=(127&i)<<10,i<128)return o(e,r,t);if(i=a[n.pos++],r|=(127&i)<<17,i<128)return o(e,r,t);if(i=a[n.pos++],r|=(127&i)<<24,i<128)return o(e,r,t);if(i=a[n.pos++],r|=(1&i)<<31,i<128)return o(e,r,t);throw new Error("Expected varint not more than 10 bytes")}function a(e){return e.type===r.Bytes?e.readVarint()+e.pos:e.pos+1}function o(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),4294967295^n?n=n+1|0:(n=0,r=r+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),l(n,r,t),u(r,t)}function l(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}function u(e,t){var n=(7&e)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function c(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function d(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function g(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function v(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function _(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function x(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function k(e,t,n){for(var r="",i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s>n)break;var l,u,c;1===s?a<128&&(o=a):2===s?128==(192&(l=e[i+1]))&&(o=(31&a)<<6|63&l)<=127&&(o=null):3===s?(l=e[i+1],u=e[i+2],128==(192&l)&&128==(192&u)&&((o=(15&a)<<12|(63&l)<<6|63&u)<=2047||o>=55296&&o<=57343)&&(o=null)):4===s&&(l=e[i+1],u=e[i+2],c=e[i+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&((o=(15&a)<<18|(63&l)<<12|(63&u)<<6|63&c)<=65535||o>=1114112)&&(o=null)),null===o?(o=65533,s=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|1023&o),r+=String.fromCharCode(o),i+=s}return r}function T(e,t,n){for(var r,i,a=0;a<t.length;a++){if((r=t.charCodeAt(a))>55295&&r<57344){if(!i){r>56319||a+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}t.exports=r;var M=e("ieee754");r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;r.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){var r=this;for(n=n||this.length;this.pos<n;){var i=r.readVarint(),a=i>>3,o=r.pos;r.type=7&i,e(a,t,r),r.pos===o&&r.skip(i)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=M.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=M.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return n=r[this.pos++],t=127&n,n<128?t:(n=r[this.pos++],t|=(127&n)<<7,n<128?t:(n=r[this.pos++],t|=(127&n)<<14,n<128?t:(n=r[this.pos++],t|=(127&n)<<21,n<128?t:(n=r[this.pos],t|=(15&n)<<28,i(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=k(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=this,r=a(this);for(e=e||[];this.pos<r;)e.push(n.readVarint(t));return e},readPackedSVarint:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readSVarint());return e},readPackedBoolean:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readBoolean());return e},readPackedFloat:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readFloat());return e},readPackedDouble:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readDouble());return e},readPackedFixed32:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readFixed32());return e},readPackedSFixed32:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readSFixed32());return e},readPackedFixed64:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readFixed64());return e},readPackedSFixed64:function(e){var t=this,n=a(this);for(e=e||[];this.pos<n;)e.push(t.readSFixed64());return e},skip:function(e){var t=7&e;if(t===r.Varint)for(;this.buf[this.pos++]>127;);else if(t===r.Bytes)this.pos=this.readVarint()+this.pos;else if(t===r.Fixed32)this.pos+=4;else{if(t!==r.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){if((e=+e||0)>268435455||e<0)return void s(e,this);this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=T(this.buf,e,this.pos);var n=this.pos-t;n>=128&&c(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),M.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),M.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=this,n=e.length;this.writeVarint(n),this.realloc(n);for(var r=0;r<n;r++)t.buf[t.pos++]=e[r]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&c(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,r.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,d,t)},writePackedSVarint:function(e,t){this.writeMessage(e,f,t)},writePackedBoolean:function(e,t){this.writeMessage(e,m,t)},writePackedFloat:function(e,t){this.writeMessage(e,h,t)},writePackedDouble:function(e,t){this.writeMessage(e,p,t)},writePackedFixed32:function(e,t){this.writeMessage(e,g,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedFixed64:function(e,t){this.writeMessage(e,v,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,_,t)},writeBytesField:function(e,t){this.writeTag(e,r.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,r.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,r.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,r.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,r.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,r.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,r.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},{ieee754:25}],31:[function(e,t,n){function r(e,t,n,o,s){for(n=n||0,o=o||e.length-1,s=s||a;o>n;){if(o-n>600){var l=o-n+1,u=t-n+1,c=Math.log(l),d=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*d*(l-d)/l)*(u-l/2<0?-1:1);r(e,t,Math.max(n,Math.floor(t-u*d/l+f)),Math.min(o,Math.floor(t+(l-u)*d/l+f)),s)}var h=e[t],p=n,m=o;for(i(e,n,t),s(e[o],h)>0&&i(e,n,o);p<m;){for(i(e,p,m),p++,m--;s(e[p],h)<0;)p++;for(;s(e[m],h)>0;)m--}0===s(e[n],h)?i(e,n,m):(m++,i(e,m,o)),m<=t&&(n=m+1),t<=m&&(o=m-1)}}function i(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function a(e,t){return e<t?-1:e>t?1:0}t.exports=r},{}],32:[function(e,t,n){function r(e){return new i(e)}function i(e){this.options=h(Object.create(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function a(e,t,n,r,i){return{x:e,y:t,zoom:1/0,id:r,properties:i,parentId:-1,numPoints:n}}function o(e,t){var n=e.geometry.coordinates;return{x:u(n[0]),y:c(n[1]),zoom:1/0,id:t,parentId:-1}}function s(e){return{type:"Feature",properties:l(e),geometry:{type:"Point",coordinates:[d(e.x),f(e.y)]}}}function l(e){var t=e.numPoints,n=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return h(h({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:n})}function u(e){return e/360+.5}function c(e){var t=Math.sin(e*Math.PI/180),n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n<0?0:n>1?1:n}function d(e){return 360*(e-.5)}function f(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function h(e,t){for(var n in t)e[n]=t[n];return e}function p(e){return e.x}function m(e){return e.y}var g=e("kdbush");t.exports=r,i.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this,n=this.options.log;n&&console.time("total time");var r="prepare "+e.length+" points";n&&console.time(r),this.points=e;var i=e.map(o);n&&console.timeEnd(r);for(var a=this.options.maxZoom;a>=this.options.minZoom;a--){var s=+Date.now();t.trees[a+1]=g(i,p,m,t.options.nodeSize,Float32Array),i=t._cluster(i,a),n&&console.log("z%d: %d clusters in %dms",a,i.length,+Date.now()-s)}return this.trees[this.options.minZoom]=g(i,p,m,this.options.nodeSize,Float32Array),n&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var n=this,r=this.trees[this._limitZoom(t)],i=r.range(u(e[0]),c(e[3]),u(e[2]),c(e[1])),a=[],o=0;o<i.length;o++){var l=r.points[i[o]];a.push(l.numPoints?s(l):n.points[l.id])}return a},getChildren:function(e,t){for(var n=this,r=this.trees[t+1].points[e],i=this.options.radius/(this.options.extent*Math.pow(2,t)),a=this.trees[t+1].within(r.x,r.y,i),o=[],l=0;l<a.length;l++){var u=n.trees[t+1].points[a[l]];u.parentId===e&&o.push(u.numPoints?s(u):n.points[u.id])}return o},getLeaves:function(e,t,n,r){n=n||10,r=r||0;var i=[];return this._appendLeaves(i,e,t,n,r,0),i},getTile:function(e,t,n){var r=this.trees[this._limitZoom(e)],i=Math.pow(2,e),a=this.options.extent,o=this.options.radius,s=o/a,l=(n-s)/i,u=(n+1+s)/i,c={features:[]};return this._addTileFeatures(r.range((t-s)/i,l,(t+1+s)/i,u),r.points,t,n,i,c),0===t&&this._addTileFeatures(r.range(1-s/i,l,1,u),r.points,i,n,i,c),t===i-1&&this._addTileFeatures(r.range(0,l,s/i,u),r.points,-1,n,i,c),c.features.length?c:null},getClusterExpansionZoom:function(e,t){for(var n=this;t<this.options.maxZoom;){var r=n.getChildren(e,t);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t},_appendLeaves:function(e,t,n,r,i,a){for(var o=this,s=this.getChildren(t,n),l=0;l<s.length;l++){var u=s[l].properties;if(u.cluster?a+u.point_count<=i?a+=u.point_count:a=o._appendLeaves(e,u.cluster_id,n+1,r,i,a):a<i?a++:e.push(s[l]),e.length===r)break}return a},_addTileFeatures:function(e,t,n,r,i,a){for(var o=this,s=0;s<e.length;s++){var u=t[e[s]];a.features.push({type:1,geometry:[[Math.round(o.options.extent*(u.x*i-n)),Math.round(o.options.extent*(u.y*i-r))]],tags:u.numPoints?l(u):o.points[u.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var n=this,r=[],i=this.options.radius/(this.options.extent*Math.pow(2,t)),o=0;o<e.length;o++){var s=e[o];if(!(s.zoom<=t)){s.zoom=t;var l=n.trees[t+1],u=l.within(s.x,s.y,i),c=s.numPoints||1,d=s.x*c,f=s.y*c,h=null;n.options.reduce&&(h=n.options.initial(),n._accumulate(h,s));for(var p=0;p<u.length;p++){var m=l.points[u[p]];if(t<m.zoom){var g=m.numPoints||1;m.zoom=t,d+=m.x*g,f+=m.y*g,c+=g,m.parentId=o,n.options.reduce&&n._accumulate(h,m)}}1===c?r.push(s):(s.parentId=o,r.push(a(d/c,f/c,c,o,h)))}}return r},_accumulate:function(e,t){var n=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,n)}}},{kdbush:26}],33:[function(e,t,n){function r(e,t){var n=this;if(!(this instanceof r))return new r(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||i,this.length>0)for(var a=this.length>>1;a>=0;a--)n._down(a)}function i(e,t){return e<t?-1:e>t?1:0}t.exports=r,r.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,n=this.compare,r=t[e];e>0;){var i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r},_down:function(e){for(var t=this.data,n=this.compare,r=this.length,i=r>>1,a=t[e];e<i;){var o=1+(e<<1),s=o+1,l=t[o];if(s<r&&n(t[s],l)<0&&(o=s,l=t[s]),n(l,a)>=0)break;t[e]=l,e=o}t[e]=a}}},{}],34:[function(e,t,n){function r(e){var t=new h;return a(e,t),t.finish()}function i(e){var t={};for(var n in e)t[n]=new p(e[n].features),t[n].name=n;return r({layers:t})}function a(e,t){for(var n in e.layers)t.writeMessage(3,o,e.layers[n])}function o(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var n,r={keys:[],values:[],keycache:{},valuecache:{}};for(n=0;n<e.length;n++)r.feature=e.feature(n),t.writeMessage(2,s,r);var i=r.keys;for(n=0;n<i.length;n++)t.writeStringField(3,i[n]);var a=r.values;for(n=0;n<a.length;n++)t.writeMessage(4,f,a[n])}function s(e,t){var n=e.feature;void 0!==n.id&&t.writeVarintField(1,n.id),t.writeMessage(2,l,e),t.writeVarintField(3,n.type),t.writeMessage(4,d,n)}function l(e,t){var n=e.feature,r=e.keys,i=e.values,a=e.keycache,o=e.valuecache;for(var s in n.properties){var l=a[s];void 0===l&&(r.push(s),l=r.length-1,a[s]=l),t.writeVarint(l);var u=n.properties[s],c=typeof u;"string"!==c&&"boolean"!==c&&"number"!==c&&(u=JSON.stringify(u));var d=c+":"+u,f=o[d];void 0===f&&(i.push(u),f=i.length-1,o[d]=f),t.writeVarint(f)}}function u(e,t){return(t<<3)+(7&e)}function c(e){return e<<1^e>>31}function d(e,t){for(var n=e.loadGeometry(),r=e.type,i=0,a=0,o=n.length,s=0;s<o;s++){var l=n[s],d=1;1===r&&(d=l.length),t.writeVarint(u(1,d));for(var f=0;f<l.length;f++){1===f&&1!==r&&t.writeVarint(u(2,l.length-1));var h=l[f].x-i,p=l[f].y-a;t.writeVarint(c(h)),t.writeVarint(c(p)),i+=h,a+=p}}}function f(e,t){var n=typeof e;"string"===n?t.writeStringField(1,e):"boolean"===n?t.writeBooleanField(7,e):"number"===n&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}var h=e("pbf"),p=e("./lib/geojson_wrapper");t.exports=r,t.exports.fromVectorTileJs=r,t.exports.fromGeojsonVt=i,t.exports.GeoJSONWrapper=p},{"./lib/geojson_wrapper":35,pbf:30}],35:[function(e,t,n){function r(e){this.features=e,this.length=e.length}function i(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var a=e("@mapbox/point-geometry"),o=e("@mapbox/vector-tile").VectorTileFeature;t.exports=r,r.prototype.feature=function(e){return new i(this.features[e])},i.prototype.loadGeometry=function(){var e=this,t=this.rawGeometry;this.geometry=[];for(var n=0;n<t.length;n++){for(var r=t[n],i=[],o=0;o<r.length;o++)i.push(new a(r[o][0],r[o][1]));e.geometry.push(i)}return this.geometry},i.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,n=-1/0,r=1/0,i=-1/0,a=0;a<e.length;a++)for(var o=e[a],s=0;s<o.length;s++){var l=o[s];t=Math.min(t,l.x),n=Math.max(n,l.x),r=Math.min(r,l.y),i=Math.max(i,l.y)}return[t,r,n,i]},i.prototype.toGeoJSON=o.prototype.toGeoJSON},{"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],36:[function(e,t,n){var r=arguments[3],i=arguments[4],a=arguments[5],o=JSON.stringify;t.exports=function(e,t){function n(e){g[e]=!0;for(var t in i[e][1]){var r=i[e][1][t];g[r]||n(r)}}for(var s,l=Object.keys(a),u=0,c=l.length;u<c;u++){var d=l[u],f=a[d].exports;if(f===e||f&&f.default===e){s=d;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var h={},u=0,c=l.length;u<c;u++){var d=l[u];h[d]=d}i[s]=["function(require,module,exports){"+e+"(self); }",h]}var p=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,i[p]=["function(require,module,exports){var f = require("+o(s)+");(f.default ? f.default : f)(self);}",m];var g={};n(p);var y="("+r+")({"+Object.keys(g).map(function(e){return o(e)+":["+i[e][0]+","+o(i[e][1])+"]"}).join(",")+"},{},["+o(p)+"])",v=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([y],{type:"text/javascript"});if(t&&t.bare)return _;var b=v.createObjectURL(_),x=new Worker(b);return x.objectURL=b,x}},{}],37:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],38:[function(e,t,n){t.exports={version:"0.44.1"}},{}],39:[function(e,t,n){var r=e("../util/struct_array"),i=r.StructArray,a=e("../util/struct_array"),o=a.Struct,s=e("../util/web_worker_transfer"),l=s.register,u=e("@mapbox/point-geometry"),c=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.int16[r+0]=e,this.int16[r+1]=t,n},t}(i);c.prototype.bytesPerElement=4,l("StructArrayLayout2i4",c);var d=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;this.resize(i+1);var a=4*i;return this.int16[a+0]=e,this.int16[a+1]=t,this.int16[a+2]=n,this.int16[a+3]=r,i},t}(i);d.prototype.bytesPerElement=8,l("StructArrayLayout4i8",d);var f=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=a,o},t}(i);f.prototype.bytesPerElement=12,l("StructArrayLayout2i4i12",f);var h=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s){var l=this.length;this.resize(l+1);var u=6*l,c=12*l;return this.int16[u+0]=e,this.int16[u+1]=t,this.int16[u+2]=n,this.int16[u+3]=r,this.uint8[c+8]=i,this.uint8[c+9]=a,this.uint8[c+10]=o,this.uint8[c+11]=s,l},t}(i);h.prototype.bytesPerElement=12,l("StructArrayLayout4i4ub12",h);var p=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s){var l=this.length;this.resize(l+1);var u=8*l;return this.int16[u+0]=e,this.int16[u+1]=t,this.int16[u+2]=n,this.int16[u+3]=r,this.uint16[u+4]=i,this.uint16[u+5]=a,this.uint16[u+6]=o,this.uint16[u+7]=s,l},t}(i);p.prototype.bytesPerElement=16,l("StructArrayLayout4i4ui16",p);var m=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.float32[i+0]=e,this.float32[i+1]=t,this.float32[i+2]=n,r},t}(i);m.prototype.bytesPerElement=12,l("StructArrayLayout3f12",m);var g=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.uint32[n+0]=e,t},t}(i);g.prototype.bytesPerElement=4,l("StructArrayLayout1ul4",g);var y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s,l,u,c){var d=this.length;this.resize(d+1);var f=12*d,h=6*d;return this.int16[f+0]=e,this.int16[f+1]=t,this.int16[f+2]=n,this.int16[f+3]=r,this.int16[f+4]=i,this.int16[f+5]=a,this.uint32[h+3]=o,this.uint16[f+8]=s,this.uint16[f+9]=l,this.int16[f+10]=u,this.int16[f+11]=c,d},t}(i);y.prototype.bytesPerElement=24,l("StructArrayLayout6i1ul2ui2i24",y);var v=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a){var o=this.length;this.resize(o+1);var s=6*o;return this.int16[s+0]=e,this.int16[s+1]=t,this.int16[s+2]=n,this.int16[s+3]=r,this.int16[s+4]=i,this.int16[s+5]=a,o},t}(i);v.prototype.bytesPerElement=12,l("StructArrayLayout2i2i2i12",v);var _=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=4*n;return this.uint8[r+0]=e,this.uint8[r+1]=t,n},t}(i);_.prototype.bytesPerElement=4,l("StructArrayLayout2ub4",_);var b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r,i,a,o,s,l,u,c,d,f,h){var p=this.length;this.resize(p+1);var m=20*p,g=10*p,y=40*p;return this.int16[m+0]=e,this.int16[m+1]=t,this.uint16[m+2]=n,this.uint16[m+3]=r,this.uint32[g+2]=i,this.uint32[g+3]=a,this.uint32[g+4]=o,this.uint16[m+10]=s,this.uint16[m+11]=l,this.uint16[m+12]=u,this.float32[g+7]=c,this.float32[g+8]=d,this.uint8[y+36]=f,this.uint8[y+37]=h,p},t}(i);b.prototype.bytesPerElement=40,l("StructArrayLayout2i2ui3ul3ui2f2ub40",b);var x=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e){var t=this.length;this.resize(t+1);var n=1*t;return this.float32[n+0]=e,t},t}(i);x.prototype.bytesPerElement=4,l("StructArrayLayout1f4",x);var w=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.int16[i+0]=e,this.int16[i+1]=t,this.int16[i+2]=n,r},t}(i);w.prototype.bytesPerElement=6,l("StructArrayLayout3i6",w);var k=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=2*r,a=4*r;return this.uint32[i+0]=e,this.uint16[a+2]=t,this.uint16[a+3]=n,r},t}(i);k.prototype.bytesPerElement=8,l("StructArrayLayout1ul2ui8",k);var T=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n){var r=this.length;this.resize(r+1);var i=3*r;return this.uint16[i+0]=e,this.uint16[i+1]=t,this.uint16[i+2]=n,r},t}(i);T.prototype.bytesPerElement=6,l("StructArrayLayout3ui6",T);var M=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.uint16[r+0]=e,this.uint16[r+1]=t,n},t}(i);M.prototype.bytesPerElement=4,l("StructArrayLayout2ui4",M);var A=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t){var n=this.length;this.resize(n+1);var r=2*n;return this.float32[r+0]=e,this.float32[r+1]=t,n},t}(i);A.prototype.bytesPerElement=8,l("StructArrayLayout2f8",A);var C=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},t.prototype.emplaceBack=function(e,t,n,r){var i=this.length;this.resize(i+1);var a=4*i;return this.float32[a+0]=e,this.float32[a+1]=t,this.float32[a+2]=n,this.float32[a+3]=r,i},t}(i);C.prototype.bytesPerElement=16,l("StructArrayLayout4f16",C);var S=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorPointX:{},anchorPointY:{},x1:{},y1:{},x2:{},y2:{},featureIndex:{},sourceLayerIndex:{},bucketIndex:{},radius:{},signedDistanceFromAnchor:{},anchorPoint:{}};return n.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorPointX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorPointY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.x1.get=function(){return this._structArray.int16[this._pos2+2]},n.x1.set=function(e){this._structArray.int16[this._pos2+2]=e},n.y1.get=function(){return this._structArray.int16[this._pos2+3]},n.y1.set=function(e){this._structArray.int16[this._pos2+3]=e},n.x2.get=function(){return this._structArray.int16[this._pos2+4]},n.x2.set=function(e){this._structArray.int16[this._pos2+4]=e},n.y2.get=function(){return this._structArray.int16[this._pos2+5]},n.y2.set=function(e){this._structArray.int16[this._pos2+5]=e},n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+8]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+9]=e},n.radius.get=function(){return this._structArray.int16[this._pos2+10]},n.radius.set=function(e){this._structArray.int16[this._pos2+10]=e},n.signedDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+11]},n.signedDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+11]=e},n.anchorPoint.get=function(){return new u(this.anchorPointX,this.anchorPointY)},Object.defineProperties(t.prototype,n),t}(o);S.prototype.size=24;var E=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new S(this,e)},t}(y);l("CollisionBoxArray",E);var P=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={anchorX:{},anchorY:{},glyphStartIndex:{},numGlyphs:{},vertexStartIndex:{},lineStartIndex:{},lineLength:{},segment:{},lowerSize:{},upperSize:{},lineOffsetX:{},lineOffsetY:{},writingMode:{},hidden:{}};return n.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},n.anchorX.set=function(e){this._structArray.int16[this._pos2+0]=e},n.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},n.anchorY.set=function(e){this._structArray.int16[this._pos2+1]=e},n.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.glyphStartIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},n.numGlyphs.set=function(e){this._structArray.uint16[this._pos2+3]=e},n.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},n.vertexStartIndex.set=function(e){this._structArray.uint32[this._pos4+2]=e},n.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},n.lineStartIndex.set=function(e){this._structArray.uint32[this._pos4+3]=e},n.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},n.lineLength.set=function(e){this._structArray.uint32[this._pos4+4]=e},n.segment.get=function(){return this._structArray.uint16[this._pos2+10]},n.segment.set=function(e){this._structArray.uint16[this._pos2+10]=e},n.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},n.lowerSize.set=function(e){this._structArray.uint16[this._pos2+11]=e},n.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},n.upperSize.set=function(e){this._structArray.uint16[this._pos2+12]=e},n.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},n.lineOffsetX.set=function(e){this._structArray.float32[this._pos4+7]=e},n.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},n.lineOffsetY.set=function(e){this._structArray.float32[this._pos4+8]=e},n.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},n.writingMode.set=function(e){this._structArray.uint8[this._pos1+36]=e},n.hidden.get=function(){return this._structArray.uint8[this._pos1+37]},n.hidden.set=function(e){this._structArray.uint8[this._pos1+37]=e},Object.defineProperties(t.prototype,n),t}(o);P.prototype.size=40;var I=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new P(this,e)},t}(b);l("PlacedSymbolArray",I);var L=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={offsetX:{}};return n.offsetX.get=function(){return this._structArray.float32[this._pos4+0]},n.offsetX.set=function(e){this._structArray.float32[this._pos4+0]=e},Object.defineProperties(t.prototype,n),t}(o);L.prototype.size=4;var O=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getoffsetX=function(e){return this.float32[1*e+0]},t.prototype.get=function(e){return new L(this,e)},t}(x);l("GlyphOffsetArray",O);var z=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={x:{},y:{},tileUnitDistanceFromAnchor:{}};return n.x.get=function(){return this._structArray.int16[this._pos2+0]},n.x.set=function(e){this._structArray.int16[this._pos2+0]=e},n.y.get=function(){return this._structArray.int16[this._pos2+1]},n.y.set=function(e){this._structArray.int16[this._pos2+1]=e},n.tileUnitDistanceFromAnchor.get=function(){return this._structArray.int16[this._pos2+2]},n.tileUnitDistanceFromAnchor.set=function(e){this._structArray.int16[this._pos2+2]=e},Object.defineProperties(t.prototype,n),t}(o);z.prototype.size=6;var R=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getx=function(e){return this.int16[3*e+0]},t.prototype.gety=function(e){return this.int16[3*e+1]},t.prototype.gettileUnitDistanceFromAnchor=function(e){return this.int16[3*e+2]},t.prototype.get=function(e){return new z(this,e)},t}(w);l("SymbolLineVertexArray",R);var D=function(e){function t(){e.apply(this,arguments)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={featureIndex:{},sourceLayerIndex:{},bucketIndex:{}};return n.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},n.featureIndex.set=function(e){this._structArray.uint32[this._pos4+0]=e},n.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},n.sourceLayerIndex.set=function(e){this._structArray.uint16[this._pos2+2]=e},n.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},n.bucketIndex.set=function(e){this._structArray.uint16[this._pos2+3]=e},Object.defineProperties(t.prototype,n),t}(o);D.prototype.size=8;var N=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.get=function(e){return new D(this,e)},t}(k);l("FeatureIndexArray",N),t.exports={StructArrayLayout2i4:c,StructArrayLayout4i8:d,StructArrayLayout2i4i12:f,StructArrayLayout4i4ub12:h,StructArrayLayout4i4ui16:p,StructArrayLayout3f12:m,StructArrayLayout1ul4:g,StructArrayLayout6i1ul2ui2i24:y,StructArrayLayout2i2i2i12:v,StructArrayLayout2ub4:_,StructArrayLayout2i2ui3ul3ui2f2ub40:b,StructArrayLayout1f4:x,StructArrayLayout3i6:w,StructArrayLayout1ul2ui8:k,StructArrayLayout3ui6:T,StructArrayLayout2ui4:M,StructArrayLayout2f8:A,StructArrayLayout4f16:C,PosArray:c,RasterBoundsArray:d,CircleLayoutArray:c,FillLayoutArray:c,FillExtrusionLayoutArray:f,HeatmapLayoutArray:c,LineLayoutArray:h,SymbolLayoutArray:p,SymbolDynamicLayoutArray:m,SymbolOpacityArray:g,CollisionBoxLayoutArray:v,CollisionCircleLayoutArray:v,CollisionVertexArray:_,TriangleIndexArray:T,LineIndexArray:M,CollisionBoxArray:E,PlacedSymbolArray:I,GlyphOffsetArray:O,SymbolLineVertexArray:R,FeatureIndexArray:N}},{"../util/struct_array":271,"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],40:[function(e,t,n){t.exports={deserialize:function(e,t){var n={};if(!t)return n;for(var r=0,i=e;r<i.length;r+=1){var a=i[r],o=a.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==o.length){a.layers=o;for(var s=0,l=o;s<l.length;s+=1)n[l[s].id]=a}}return n}}},{}],41:[function(e,t,n){var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",components:2,type:"Int16"}],4)},{"../../util/struct_array":271}],42:[function(e,t,n){function r(e,t,n,r,i){e.emplaceBack(2*t+(r+1)/2,2*n+(i+1)/2)}var i=e("../array_types"),a=i.CircleLayoutArray,o=e("./circle_attributes").members,s=e("../segment"),l=s.SegmentVector,u=e("../program_configuration"),c=u.ProgramConfigurationSet,d=e("../index_array_type"),f=d.TriangleIndexArray,h=e("../load_geometry"),p=e("../extent"),m=e("../../util/web_worker_transfer"),g=m.register,y=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new a,this.indexArray=new f,this.segments=new l,this.programConfigurations=new c(o,e.layers,e.zoom)};y.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var a=i[r],o=a.feature,s=a.index,l=a.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},o)){var u=h(o);n.addFeature(o,u),t.featureIndex.insert(o,u,s,l,n.index)}}},y.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},y.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},y.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},y.prototype.addFeature=function(e,t){for(var n=this,i=0,a=t;i<a.length;i+=1)for(var o=a[i],s=0,l=o;s<l.length;s+=1){var u=l[s],c=u.x,d=u.y;if(!(c<0||c>=p||d<0||d>=p)){var f=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),h=f.vertexLength;r(n.layoutVertexArray,c,d,-1,-1),r(n.layoutVertexArray,c,d,1,-1),r(n.layoutVertexArray,c,d,1,1),r(n.layoutVertexArray,c,d,-1,1),n.indexArray.emplaceBack(h,h+1,h+2),n.indexArray.emplaceBack(h,h+3,h+2),f.vertexLength+=4,f.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},g("CircleBucket",y,{omit:["layers"]}),t.exports=y},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./circle_attributes":41}],43:[function(e,t,n){arguments[4][41][0].apply(n,arguments)},{"../../util/struct_array":271,dup:41}],44:[function(e,t,n){var r=e("../array_types"),i=r.FillLayoutArray,a=e("./fill_attributes").members,o=e("../segment"),s=o.SegmentVector,l=e("../program_configuration"),u=l.ProgramConfigurationSet,c=e("../index_array_type"),d=c.LineIndexArray,f=c.TriangleIndexArray,h=e("../load_geometry"),p=e("earcut"),m=e("../../util/classify_rings"),g=e("../../util/web_worker_transfer"),y=g.register,v=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new i,this.indexArray=new f,this.indexArray2=new d,this.programConfigurations=new u(a,e.layers,e.zoom),this.segments=new s,this.segments2=new s};v.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var a=i[r],o=a.feature,s=a.index,l=a.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},o)){var u=h(o);n.addFeature(o,u),t.featureIndex.insert(o,u,s,l,n.index)}}},v.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},v.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,a),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.indexBuffer2=e.createIndexBuffer(this.indexArray2),this.programConfigurations.upload(e)},v.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},v.prototype.addFeature=function(e,t){for(var n=this,r=0,i=m(t,500);r<i.length;r+=1){for(var a=i[r],o=0,s=0,l=a;s<l.length;s+=1)o+=l[s].length;for(var u=n.segments.prepareSegment(o,n.layoutVertexArray,n.indexArray),c=u.vertexLength,d=[],f=[],h=0,g=a;h<g.length;h+=1){var y=g[h];if(0!==y.length){y!==a[0]&&f.push(d.length/2);var v=n.segments2.prepareSegment(y.length,n.layoutVertexArray,n.indexArray2),_=v.vertexLength;n.layoutVertexArray.emplaceBack(y[0].x,y[0].y),n.indexArray2.emplaceBack(_+y.length-1,_),d.push(y[0].x),d.push(y[0].y);for(var b=1;b<y.length;b++)n.layoutVertexArray.emplaceBack(y[b].x,y[b].y),n.indexArray2.emplaceBack(_+b-1,_+b),d.push(y[b].x),d.push(y[b].y);v.vertexLength+=y.length,v.primitiveLength+=y.length}}for(var x=p(d,f),w=0;w<x.length;w+=3)n.indexArray.emplaceBack(c+x[w],c+x[w+1],c+x[w+2]);u.vertexLength+=o,u.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},y("FillBucket",v,{omit:["layers"]}),t.exports=v},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_attributes":43,earcut:14}],45:[function(e,t,n){var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4)},{"../../util/struct_array":271}],46:[function(e,t,n){function r(e,t,n,r,i,a,o,s){e.emplaceBack(t,n,2*Math.floor(r*w)+o,i*w*2,a*w*2,Math.round(s))}function i(e,t){return e.x===t.x&&(e.x<0||e.x>y)||e.y===t.y&&(e.y<0||e.y>y)}function a(e){return e.every(function(e){return e.x<0})||e.every(function(e){return e.x>y})||e.every(function(e){return e.y<0})||e.every(function(e){return e.y>y})}var o=e("../array_types"),s=o.FillExtrusionLayoutArray,l=e("./fill_extrusion_attributes").members,u=e("../segment"),c=u.SegmentVector,d=u.MAX_VERTEX_ARRAY_LENGTH,f=e("../program_configuration"),h=f.ProgramConfigurationSet,p=e("../index_array_type"),m=p.TriangleIndexArray,g=e("../load_geometry"),y=e("../extent"),v=e("earcut"),_=e("../../util/classify_rings"),b=e("../../util/web_worker_transfer"),x=b.register,w=Math.pow(2,13),k=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new s,this.indexArray=new m,this.programConfigurations=new h(l,e.layers,e.zoom),this.segments=new c};k.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var a=i[r],o=a.feature,s=a.index,l=a.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},o)){var u=g(o);n.addFeature(o,u),t.featureIndex.insert(o,u,s,l,n.index)}}},k.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},k.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,l),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},k.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},k.prototype.addFeature=function(e,t){for(var n=this,o=0,s=_(t,500);o<s.length;o+=1){for(var l=s[o],u=0,c=0,f=l;c<f.length;c+=1)u+=f[c].length;for(var h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray),p=0,m=l;p<m.length;p+=1){var g=m[p];if(0!==g.length&&!a(g))for(var y=0,b=0;b<g.length;b++){var x=g[b];if(b>=1){var w=g[b-1];if(!i(x,w)){h.vertexLength+4>d&&(h=n.segments.prepareSegment(4,n.layoutVertexArray,n.indexArray));var k=x.sub(w)._perp()._unit(),T=w.dist(x);y+T>32768&&(y=0),r(n.layoutVertexArray,x.x,x.y,k.x,k.y,0,0,y),r(n.layoutVertexArray,x.x,x.y,k.x,k.y,0,1,y),y+=T,r(n.layoutVertexArray,w.x,w.y,k.x,k.y,0,0,y),r(n.layoutVertexArray,w.x,w.y,k.x,k.y,0,1,y);var M=h.vertexLength;n.indexArray.emplaceBack(M,M+1,M+2),n.indexArray.emplaceBack(M+1,M+2,M+3),h.vertexLength+=4,h.primitiveLength+=2}}}}h.vertexLength+u>d&&(h=n.segments.prepareSegment(u,n.layoutVertexArray,n.indexArray));for(var A=[],C=[],S=h.vertexLength,E=0,P=l;E<P.length;E+=1){var I=P[E];if(0!==I.length){I!==l[0]&&C.push(A.length/2);for(var L=0;L<I.length;L++){var O=I[L];r(n.layoutVertexArray,O.x,O.y,0,0,1,1,0),A.push(O.x),A.push(O.y)}}}for(var z=v(A,C),R=0;R<z.length;R+=3)n.indexArray.emplaceBack(S+z[R],S+z[R+1],S+z[R+2]);h.primitiveLength+=z.length/3,h.vertexLength+=u}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},x("FillExtrusionBucket",k,{omit:["layers"]}),t.exports=k},{"../../util/classify_rings":255,"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./fill_extrusion_attributes":45,earcut:14}],47:[function(e,t,n){var r=e("./circle_bucket"),i=e("../../util/web_worker_transfer"),a=i.register,o=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r);a("HeatmapBucket",o,{omit:["layers"]}),t.exports=o},{"../../util/web_worker_transfer":278,"./circle_bucket":42}],48:[function(e,t,n){var r=e("../../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4)},{"../../util/struct_array":271}],49:[function(e,t,n){function r(e,t,n,r,i,a,o){e.emplaceBack(t.x,t.y,r?1:0,i?1:-1,Math.round(v*n.x)+128,Math.round(v*n.y)+128,1+(0===a?0:a<0?-1:1)|(o*b&63)<<2,o*b>>6)}var i=e("../array_types"),a=i.LineLayoutArray,o=e("./line_attributes").members,s=e("../segment"),l=s.SegmentVector,u=e("../program_configuration"),c=u.ProgramConfigurationSet,d=e("../index_array_type"),f=d.TriangleIndexArray,h=e("../load_geometry"),p=e("../extent"),m=e("@mapbox/vector-tile").VectorTileFeature.types,g=e("../../util/web_worker_transfer"),y=g.register,v=63,_=Math.cos(Math.PI/180*37.5),b=.5,x=Math.pow(2,14)/b,w=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.layoutVertexArray=new a,this.indexArray=new f,this.programConfigurations=new c(o,e.layers,e.zoom),this.segments=new l};w.prototype.populate=function(e,t){for(var n=this,r=0,i=e;r<i.length;r+=1){var a=i[r],o=a.feature,s=a.index,l=a.sourceLayerIndex;if(n.layers[0]._featureFilter({zoom:n.zoom},o)){var u=h(o);n.addFeature(o,u),t.featureIndex.insert(o,u,s,l,n.index)}}},w.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},w.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,o),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.programConfigurations.upload(e)},w.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},w.prototype.addFeature=function(e,t){for(var n=this,r=this.layers[0].layout,i=r.get("line-join").evaluate(e),a=r.get("line-cap"),o=r.get("line-miter-limit"),s=r.get("line-round-limit"),l=0,u=t;l<u.length;l+=1){var c=u[l];n.addLine(c,e,i,a,o,s)}},w.prototype.addLine=function(e,t,n,r,i,a){for(var o=this,s="Polygon"===m[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===n&&(i=1.05);var c=p/(512*this.overscaling)*15,d=e[u],f=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var h,g,y,v=r,b=s?"butt":r,x=!0,w=void 0,k=void 0,T=void 0,M=void 0;this.e1=this.e2=this.e3=-1,s&&(h=e[l-2],M=d.sub(h)._unit()._perp());for(var A=u;A<l;A++)if(!(k=s&&A===l-1?e[u+1]:e[A+1])||!e[A].equals(k)){M&&(T=M),h&&(w=h),h=e[A],M=k?k.sub(h)._unit()._perp():T,T=T||M;var C=T.add(M);0===C.x&&0===C.y||C._unit();var S=C.x*M.x+C.y*M.y,E=0!==S?1/S:1/0,P=S<_&&w&&k;if(P&&A>u){var I=h.dist(w);if(I>2*c){var L=h.sub(h.sub(w)._mult(c/I)._round());o.distance+=L.dist(w),o.addCurrentVertex(L,o.distance,T.mult(1),0,0,!1,f),w=L}}var O=w&&k,z=O?n:k?v:b;if(O&&"round"===z&&(E<a?z="miter":E<=2&&(z="fakeround")),"miter"===z&&E>i&&(z="bevel"),"bevel"===z&&(E>2&&(z="flipbevel"),E<i&&(z="miter")),w&&(o.distance+=h.dist(w)),"miter"===z)C._mult(E),o.addCurrentVertex(h,o.distance,C,0,0,!1,f);else if("flipbevel"===z){if(E>100)C=M.clone().mult(-1);else{var R=T.x*M.y-T.y*M.x>0?-1:1,D=E*T.add(M).mag()/T.sub(M).mag();C._perp()._mult(D*R)}o.addCurrentVertex(h,o.distance,C,0,0,!1,f),o.addCurrentVertex(h,o.distance,C.mult(-1),0,0,!1,f)}else if("bevel"===z||"fakeround"===z){var N=T.x*M.y-T.y*M.x>0,F=-Math.sqrt(E*E-1);if(N?(y=0,g=F):(g=0,y=F),x||o.addCurrentVertex(h,o.distance,T,g,y,!1,f),"fakeround"===z){for(var j=Math.floor(8*(.5-(S-.5))),B=void 0,U=0;U<j;U++)B=M.mult((U+1)/(j+1))._add(T)._unit(),o.addPieSliceVertex(h,o.distance,B,N,f);o.addPieSliceVertex(h,o.distance,C,N,f);for(var V=j-1;V>=0;V--)B=T.mult((V+1)/(j+1))._add(M)._unit(),o.addPieSliceVertex(h,o.distance,B,N,f)}k&&o.addCurrentVertex(h,o.distance,M,-g,-y,!1,f)}else"butt"===z?(x||o.addCurrentVertex(h,o.distance,T,0,0,!1,f),k&&o.addCurrentVertex(h,o.distance,M,0,0,!1,f)):"square"===z?(x||(o.addCurrentVertex(h,o.distance,T,1,1,!1,f),o.e1=o.e2=-1),k&&o.addCurrentVertex(h,o.distance,M,-1,-1,!1,f)):"round"===z&&(x||(o.addCurrentVertex(h,o.distance,T,0,0,!1,f),o.addCurrentVertex(h,o.distance,T,1,1,!0,f),o.e1=o.e2=-1),k&&(o.addCurrentVertex(h,o.distance,M,-1,-1,!0,f),o.addCurrentVertex(h,o.distance,M,0,0,!1,f)));if(P&&A<l-1){var H=h.dist(k);if(H>2*c){var W=h.add(k.sub(h)._mult(c/H)._round());o.distance+=W.dist(h),o.addCurrentVertex(W,o.distance,M.mult(1),0,0,!1,f),h=W}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)}},w.prototype.addCurrentVertex=function(e,t,n,i,a,o,s){var l,u=this.layoutVertexArray,c=this.indexArray;l=n.clone(),i&&l._sub(n.perp()._mult(i)),r(u,e,l,o,!1,i,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=n.mult(-1),a&&l._sub(n.perp()._mult(a)),r(u,e,l,o,!0,-a,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>x/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,n,i,a,o,s))},w.prototype.addPieSliceVertex=function(e,t,n,i,a){n=n.mult(i?-1:1);var o=this.layoutVertexArray,s=this.indexArray;r(o,e,n,!1,i,0,t),this.e3=a.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),a.primitiveLength++),i?this.e2=this.e3:this.e1=this.e3},y("LineBucket",w,{omit:["layers"]}),t.exports=w},{"../../util/web_worker_transfer":278,"../array_types":39,"../extent":53,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./line_attributes":48,"@mapbox/vector-tile":8}],50:[function(e,t,n){var r=e("../../util/struct_array"),i=r.createLayout,a=i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}]),o=i([{name:"a_projected_pos",components:3,type:"Float32"}],4),s=i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),l=i([{name:"a_placed",components:2,type:"Uint8"}],4),u={symbolLayoutAttributes:a,dynamicLayoutAttributes:o,placementOpacityAttributes:s,collisionVertexAttributes:l,collisionBox:i([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]),collisionBoxLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),collisionCircleLayout:i([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),placement:i([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]),glyphOffset:i([{type:"Float32",name:"offsetX"}]),lineVertex:i([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}])};t.exports=u},{"../../util/struct_array":271}],51:[function(e,t,n){function r(e,t,n,r,i,a,o,s){e.emplaceBack(t,n,Math.round(64*r),Math.round(64*i),a,o,s?s[0]:0,s?s[1]:0)}function i(e,t,n){e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n),e.emplaceBack(t.x,t.y,n)}var a=e("./symbol_attributes"),o=a.symbolLayoutAttributes,s=a.collisionVertexAttributes,l=a.collisionBoxLayout,u=a.collisionCircleLayout,c=a.dynamicLayoutAttributes,d=e("../array_types"),f=d.SymbolLayoutArray,h=d.SymbolDynamicLayoutArray,p=d.SymbolOpacityArray,m=d.CollisionBoxLayoutArray,g=d.CollisionCircleLayoutArray,y=d.CollisionVertexArray,v=d.PlacedSymbolArray,_=d.GlyphOffsetArray,b=d.SymbolLineVertexArray,x=e("@mapbox/point-geometry"),w=e("../segment"),k=w.SegmentVector,T=e("../program_configuration"),M=T.ProgramConfigurationSet,A=e("../index_array_type"),C=A.TriangleIndexArray,S=A.LineIndexArray,E=e("../../symbol/transform_text"),P=e("../../symbol/mergelines"),I=e("../../util/script_detection"),L=e("../load_geometry"),O=e("@mapbox/vector-tile").VectorTileFeature.types,z=e("../../util/verticalize_punctuation"),R=(e("../../symbol/anchor"),e("../../symbol/symbol_size")),D=R.getSizeData,N=e("../../util/web_worker_transfer"),F=N.register,j=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],B=function(e){this.layoutVertexArray=new f,this.indexArray=new C,this.programConfigurations=e,this.segments=new k,this.dynamicLayoutVertexArray=new h,this.opacityVertexArray=new p,this.placedSymbolArray=new v};B.prototype.upload=function(e,t){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,o.members),this.indexBuffer=e.createIndexBuffer(this.indexArray,t),this.programConfigurations.upload(e),this.dynamicLayoutVertexBuffer=e.createVertexBuffer(this.dynamicLayoutVertexArray,c.members,!0),this.opacityVertexBuffer=e.createVertexBuffer(this.opacityVertexArray,j,!0),this.opacityVertexBuffer.itemSize=1},B.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},F("SymbolBuffers",B);var U=function(e,t,n){this.layoutVertexArray=new e,this.layoutAttributes=t,this.indexArray=new n,this.segments=new k,this.collisionVertexArray=new y};U.prototype.upload=function(e){this.layoutVertexBuffer=e.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=e.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=e.createVertexBuffer(this.collisionVertexArray,s.members,!0)},U.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},F("CollisionBuffers",U);var V=function(e){this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.layerIds=this.layers.map(function(e){return e.id}),this.index=e.index,this.pixelRatio=e.pixelRatio;var t=this.layers[0],n=t._unevaluatedLayout._values;this.textSizeData=D(this.zoom,n["text-size"]),this.iconSizeData=D(this.zoom,n["icon-size"]);var r=this.layers[0].layout;this.sortFeaturesByY=r.get("text-allow-overlap")||r.get("icon-allow-overlap")||r.get("text-ignore-placement")||r.get("icon-ignore-placement")};V.prototype.createArrays=function(){this.text=new B(new M(o.members,this.layers,this.zoom,function(e){return/^text/.test(e)})),this.icon=new B(new M(o.members,this.layers,this.zoom,function(e){return/^icon/.test(e)})),this.collisionBox=new U(m,l.members,S),this.collisionCircle=new U(g,u.members,C),this.glyphOffsetArray=new _,this.lineVertexArray=new b},V.prototype.populate=function(e,t){var n=this,r=this.layers[0],i=r.layout,a=i.get("text-font"),o=i.get("text-field"),s=i.get("icon-image"),l=("constant"!==o.value.kind||o.value.value.length>0)&&("constant"!==a.value.kind||a.value.value.length>0),u="constant"!==s.value.kind||s.value.value&&s.value.value.length>0;if(this.features=[],l||u){for(var c=t.iconDependencies,d=t.glyphDependencies,f={zoom:this.zoom},h=0,p=e;h<p.length;h+=1){var m=p[h],g=m.feature,y=m.index,v=m.sourceLayerIndex;if(r._featureFilter(f,g)){var _=void 0;l&&(_=r.getValueAndResolveTokens("text-field",g),_=E(_,r,g));var b=void 0;if(u&&(b=r.getValueAndResolveTokens("icon-image",g)),_||b){var x={text:_,icon:b,index:y,sourceLayerIndex:v,geometry:L(g),properties:g.properties,type:O[g.type]};if(void 0!==g.id&&(x.id=g.id),n.features.push(x),b&&(c[b]=!0),_)for(var w=a.evaluate(g).join(","),k=d[w]=d[w]||{},T="map"===i.get("text-rotation-alignment")&&"line"===i.get("symbol-placement"),M=I.allowsVerticalWritingMode(_),A=0;A<_.length;A++)if(k[_.charCodeAt(A)]=!0,T&&M){var C=z.lookup[_.charAt(A)];C&&(k[C.charCodeAt(0)]=!0)}}}}"line"===i.get("symbol-placement")&&(this.features=P(this.features))}},V.prototype.isEmpty=function(){return 0===this.symbolInstances.length},V.prototype.upload=function(e){this.text.upload(e,this.sortFeaturesByY),this.icon.upload(e,this.sortFeaturesByY),this.collisionBox.upload(e),this.collisionCircle.upload(e)},V.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},V.prototype.addToLineVertexArray=function(e,t){var n=this,r=this.lineVertexArray.length;if(void 0!==e.segment){for(var i=e.dist(t[e.segment+1]),a=e.dist(t[e.segment]),o={},s=e.segment+1;s<t.length;s++)o[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:i},s<t.length-1&&(i+=t[s+1].dist(t[s]));for(var l=e.segment||0;l>=0;l--)o[l]={x:t[l].x,y:t[l].y,tileUnitDistanceFromAnchor:a},l>0&&(a+=t[l-1].dist(t[l]));for(var u=0;u<t.length;u++){var c=o[u];n.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:r,lineLength:this.lineVertexArray.length-r}},V.prototype.addSymbols=function(e,t,n,a,o,s,l,u,c,d){for(var f=this,h=e.indexArray,p=e.layoutVertexArray,m=e.dynamicLayoutVertexArray,g=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),y=this.glyphOffsetArray.length,v=g.vertexLength,_=0,b=t;_<b.length;_+=1){var x=b[_],w=x.tl,k=x.tr,T=x.bl,M=x.br,A=x.tex,C=g.vertexLength,S=x.glyphOffset[1];r(p,u.x,u.y,w.x,S+w.y,A.x,A.y,n),r(p,u.x,u.y,k.x,S+k.y,A.x+A.w,A.y,n),r(p,u.x,u.y,T.x,S+T.y,A.x,A.y+A.h,n),r(p,u.x,u.y,M.x,S+M.y,A.x+A.w,A.y+A.h,n),i(m,u,0),h.emplaceBack(C,C+1,C+2),h.emplaceBack(C+1,C+2,C+3),g.vertexLength+=4,g.primitiveLength+=2,f.glyphOffsetArray.emplaceBack(x.glyphOffset[0])}e.placedSymbolArray.emplaceBack(u.x,u.y,y,this.glyphOffsetArray.length-y,v,c,d,u.segment,n?n[0]:0,n?n[1]:0,a[0],a[1],l,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,s)},V.prototype._addCollisionDebugVertex=function(e,t,n,r,i){return t.emplaceBack(0,0),e.emplaceBack(n.x,n.y,r.x,r.y,Math.round(i.x),Math.round(i.y))},V.prototype.addCollisionDebugVertices=function(e,t,n,r,i,a,o,s){var l=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),u=l.vertexLength,c=i.layoutVertexArray,d=i.collisionVertexArray;if(this._addCollisionDebugVertex(c,d,a,o.anchor,new x(e,t)),this._addCollisionDebugVertex(c,d,a,o.anchor,new x(n,t)),this._addCollisionDebugVertex(c,d,a,o.anchor,new x(n,r)),this._addCollisionDebugVertex(c,d,a,o.anchor,new x(e,r)),l.vertexLength+=4,s){var f=i.indexArray;f.emplaceBack(u,u+1,u+2),f.emplaceBack(u,u+2,u+3),l.primitiveLength+=2}else{var h=i.indexArray;h.emplaceBack(u,u+1),h.emplaceBack(u+1,u+2),h.emplaceBack(u+2,u+3),h.emplaceBack(u+3,u),l.primitiveLength+=4}},V.prototype.generateCollisionDebugBuffers=function(){for(var e=this,t=0,n=e.symbolInstances;t<n.length;t+=1){var r=n[t];r.textCollisionFeature={boxStartIndex:r.textBoxStartIndex,boxEndIndex:r.textBoxEndIndex},r.iconCollisionFeature={boxStartIndex:r.iconBoxStartIndex,boxEndIndex:r.iconBoxEndIndex};for(var i=0;i<2;i++){var a=r[0===i?"textCollisionFeature":"iconCollisionFeature"];if(a)for(var o=a.boxStartIndex;o<a.boxEndIndex;o++){var s=e.collisionBoxArray.get(o),l=s.x1,u=s.y1,c=s.x2,d=s.y2,f=s.radius>0;e.addCollisionDebugVertices(l,u,c,d,f?e.collisionCircle:e.collisionBox,s.anchorPoint,r,f)}}}},V.prototype.deserializeCollisionBoxes=function(e,t,n,r,i){for(var a={},o=t;o<n;o++){var s=e.get(o);if(0===s.radius){a.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}a.textCircles||(a.textCircles=[]),a.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=r;l<i;l++){var u=e.get(l);if(0===u.radius){a.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY};break}}return a},V.prototype.hasTextData=function(){return this.text.segments.get().length>0},V.prototype.hasIconData=function(){return this.icon.segments.get().length>0},V.prototype.hasCollisionBoxData=function(){return this.collisionBox.segments.get().length>0},V.prototype.hasCollisionCircleData=function(){return this.collisionCircle.segments.get().length>0},V.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var n=[],r=0;r<this.symbolInstances.length;r++)n.push(r);var i=Math.sin(e),a=Math.cos(e);n.sort(function(e,n){var r=t.symbolInstances[e],o=t.symbolInstances[n];return(i*r.anchor.x+a*r.anchor.y|0)-(i*o.anchor.x+a*o.anchor.y|0)||o.featureIndex-r.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var o=0,s=n;o<s.length;o+=1){for(var l=s[o],u=t.symbolInstances[l],c=0,d=u.placedTextSymbolIndices;c<d.length;c+=1)for(var f=d[c],h=t.text.placedSymbolArray.get(f),p=h.vertexStartIndex+4*h.numGlyphs,m=h.vertexStartIndex;m<p;m+=4)t.text.indexArray.emplaceBack(m,m+1,m+2),t.text.indexArray.emplaceBack(m+1,m+2,m+3);var g=t.icon.placedSymbolArray.get(l);if(g.numGlyphs){var y=g.vertexStartIndex;t.icon.indexArray.emplaceBack(y,y+1,y+2),t.icon.indexArray.emplaceBack(y+1,y+2,y+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},F("SymbolBucket",V,{omit:["layers","collisionBoxArray","features","compareText"],shallow:["symbolInstances"]}),V.MAX_GLYPHS=65535,V.addDynamicAttributes=i,t.exports=V},{"../../symbol/anchor":213,"../../symbol/mergelines":221,"../../symbol/symbol_size":228,"../../symbol/transform_text":229,"../../util/script_detection":269,"../../util/verticalize_punctuation":277,"../../util/web_worker_transfer":278,"../array_types":39,"../index_array_type":55,"../load_geometry":56,"../program_configuration":58,"../segment":60,"./symbol_attributes":50,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],52:[function(e,t,n){var r=e("../util/image"),i=r.RGBAImage,a=e("../util/util"),o=e("../util/web_worker_transfer"),s=o.register,l=function(e,t,n){if(e<=0)throw new RangeError("Level must have positive dimension");this.dim=e,this.border=t,this.stride=this.dim+2*this.border,this.data=n||new Int32Array((this.dim+2*this.border)*(this.dim+2*this.border))};l.prototype.set=function(e,t,n){this.data[this._idx(e,t)]=n+65536},l.prototype.get=function(e,t){return this.data[this._idx(e,t)]-65536},l.prototype._idx=function(e,t){if(e<-this.border||e>=this.dim+this.border||t<-this.border||t>=this.dim+this.border)throw new RangeError("out of range source coordinates for DEM data");return(t+this.border)*this.stride+(e+this.border)},s("Level",l);var u=function(e,t,n){this.uid=e,this.scale=t||1,this.level=n||new l(256,512),this.loaded=!!n};u.prototype.loadFromImage=function(e){var t=this;if(e.height!==e.width)throw new RangeError("DEM tiles must be square");for(var n=this.level=new l(e.width,e.width/2),r=e.data,i=0;i<n.dim;i++)for(var a=0;a<n.dim;a++){var o=i*n.dim+a,s=4*o;n.set(a,i,t.scale*((256*r[s]*256+256*r[s+1]+r[s+2])/10-1e4))}for(var u=0;u<n.dim;u++)n.set(-1,u,n.get(0,u)),n.set(n.dim,u,n.get(n.dim-1,u)),n.set(u,-1,n.get(u,0)),n.set(u,n.dim,n.get(u,n.dim-1));n.set(-1,-1,n.get(0,0)),n.set(n.dim,-1,n.get(n.dim-1,0)),n.set(-1,n.dim,n.get(0,n.dim-1)),n.set(n.dim,n.dim,n.get(n.dim-1,n.dim-1)),this.loaded=!0},u.prototype.getPixels=function(){return new i({width:this.level.dim+2*this.level.border,height:this.level.dim+2*this.level.border},new Uint8Array(this.level.data.buffer))},u.prototype.backfillBorder=function(e,t,n){var r=this.level,i=e.level;if(r.dim!==i.dim)throw new Error("level mismatch (dem dimension)");var o=t*r.dim,s=t*r.dim+r.dim,l=n*r.dim,u=n*r.dim+r.dim;switch(t){case-1:o=s-1;break;case 1:s=o+1}switch(n){case-1:l=u-1;break;case 1:u=l+1}for(var c=a.clamp(o,-r.border,r.dim+r.border),d=a.clamp(s,-r.border,r.dim+r.border),f=a.clamp(l,-r.border,r.dim+r.border),h=a.clamp(u,-r.border,r.dim+r.border),p=-t*r.dim,m=-n*r.dim,g=f;g<h;g++)for(var y=c;y<d;y++)r.set(y,g,i.get(y+p,g+m))},s("DEMData",u),t.exports={DEMData:u,Level:l}},{"../util/image":263,"../util/util":275,"../util/web_worker_transfer":278}],53:[function(e,t,n){t.exports=8192},{}],54:[function(e,t,n){function r(e,t){return t-e}var i=(e("@mapbox/point-geometry"),e("./load_geometry")),a=e("./extent"),o=e("../style-spec/feature_filter"),s=e("grid-index"),l=e("../util/dictionary_coder"),u=e("@mapbox/vector-tile"),c=e("pbf"),d=e("../util/vectortile_to_geojson"),f=e("../util/util").arraysIntersect,h=e("../source/tile_id"),p=(h.OverscaledTileID,e("../util/web_worker_transfer")),m=p.register,g=e("./array_types"),y=g.FeatureIndexArray,v=function(e,t,n,r){this.tileID=e,this.overscaling=t,this.x=e.canonical.x,this.y=e.canonical.y,this.z=e.canonical.z,this.grid=n||new s(a,16,0),this.featureIndexArray=r||new y};v.prototype.insert=function(e,t,n,r,i){var a=this,o=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(n,r,i);for(var s=0;s<t.length;s++){for(var l=t[s],u=[1/0,1/0,-1/0,-1/0],c=0;c<l.length;c++){var d=l[c];u[0]=Math.min(u[0],d.x),u[1]=Math.min(u[1],d.y),u[2]=Math.max(u[2],d.x),u[3]=Math.max(u[3],d.y)}a.grid.insert(o,u[0],u[1],u[2],u[3])}},v.prototype.query=function(e,t){this.vtLayers||(this.vtLayers=new u.VectorTile(new c(this.rawTileData)).layers,this.sourceLayerCoder=new l(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]));for(var n={},i=e.params||{},s=a/e.tileSize/e.scale,d=o(i.filter),f=e.queryGeometry,h=e.additionalRadius*s,p=1/0,m=1/0,g=-1/0,y=-1/0,v=0;v<f.length;v++)for(var _=f[v],b=0;b<_.length;b++){var x=_[b];p=Math.min(p,x.x),m=Math.min(m,x.y),g=Math.max(g,x.x),y=Math.max(y,x.y)}var w=this.grid.query(p-h,m-h,g+h,y+h);w.sort(r),this.filterMatching(n,w,this.featureIndexArray,f,d,i.layers,t,e.bearing,s);var k=e.collisionIndex?e.collisionIndex.queryRenderedSymbols(f,this.tileID,a/e.tileSize,e.collisionBoxArray,e.sourceID,e.bucketInstanceIds):[];return k.sort(),this.filterMatching(n,k,e.collisionBoxArray,f,d,i.layers,t,e.bearing,s),n},v.prototype.filterMatching=function(e,t,n,r,a,o,s,l,u){for(var c,h=this,p=0;p<t.length;p++){var m=t[p];if(m!==c){c=m;var g=n.get(m),y=h.bucketLayerIDs[g.bucketIndex];if(!o||f(o,y)){var v=h.sourceLayerCoder.decode(g.sourceLayerIndex),_=h.vtLayers[v],b=_.feature(g.featureIndex);if(a({zoom:h.tileID.overscaledZ},b))for(var x=null,w=0;w<y.length;w++){var k=y[w];if(!(o&&o.indexOf(k)<0)){var T=s[k];if(T&&("symbol"===T.type||(x||(x=i(b)),T.queryIntersectsFeature(r,b,x,h.z,l,u)))){var M=new d(b,h.z,h.x,h.y);M.layer=T.serialize();var A=e[k];void 0===A&&(A=e[k]=[]),A.push({featureIndex:m,feature:M})}}}}}}},v.prototype.hasLayer=function(e){for(var t=this,n=0,r=t.bucketLayerIDs;n<r.length;n+=1)for(var i=r[n],a=0,o=i;a<o.length;a+=1){var s=o[a];if(e===s)return!0}return!1},m("FeatureIndex",v,{omit:["rawTileData","sourceLayerCoder"]}),t.exports=v},{"../source/tile_id":114,"../style-spec/feature_filter":148,"../util/dictionary_coder":257,"../util/util":275,"../util/vectortile_to_geojson":276,"../util/web_worker_transfer":278,"./array_types":39,"./extent":53,"./load_geometry":56,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,"grid-index":24,pbf:30}],55:[function(e,t,n){t.exports={LineIndexArray:e("./array_types").LineIndexArray,TriangleIndexArray:e("./array_types").TriangleIndexArray}},{"./array_types":39}],56:[function(e,t,n){var r=e("../util/util"),i=e("./extent"),a=function(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}(16);t.exports=function(e){for(var t=i/e.extent,n=e.loadGeometry(),o=0;o<n.length;o++)for(var s=n[o],l=0;l<s.length;l++){var u=s[l];u.x=Math.round(u.x*t),u.y=Math.round(u.y*t),(u.x<a.min||u.x>a.max||u.y<a.min||u.y>a.max)&&r.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return n}},{"../util/util":275,"./extent":53}],57:[function(e,t,n){var r=e("../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],58:[function(e,t,n){function r(e){return[a(255*e.r,255*e.g),a(255*e.b,255*e.a)]}function i(e,t){return{"text-opacity":"opacity","icon-opacity":"opacity","text-color":"fill_color","icon-color":"fill_color","text-halo-color":"halo_color","icon-halo-color":"halo_color","text-halo-blur":"halo_blur","icon-halo-blur":"halo_blur","text-halo-width":"halo_width","icon-halo-width":"halo_width","line-gap-width":"gapwidth"}[e]||e.replace(t+"-","").replace(/-/g,"_")}var a=e("../shaders/encode_attribute").packUint8ToFloat,o=(e("../style-spec/util/color"),e("../util/web_worker_transfer")),s=o.register,l=e("../style/properties"),u=l.PossiblyEvaluatedPropertyValue,c=e("./array_types"),d=c.StructArrayLayout1f4,f=c.StructArrayLayout2f8,h=c.StructArrayLayout4f16,p=function(e,t,n){this.value=e,this.name=t,this.type=n,this.statistics={max:-1/0}};p.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},p.prototype.populatePaintArray=function(){},p.prototype.upload=function(){},p.prototype.destroy=function(){},p.prototype.setUniforms=function(e,t,n,r){var i=r.constantOr(this.value),a=e.gl;"color"===this.type?a.uniform4f(t.uniforms["u_"+this.name],i.r,i.g,i.b,i.a):a.uniform1f(t.uniforms["u_"+this.name],i)};var m=function(e,t,n){this.expression=e,this.name=t,this.type=n,this.statistics={max:-1/0};var r="color"===n?f:d;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?2:1,offset:0}],this.paintVertexArray=new r};m.prototype.defines=function(){return[]},m.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,i=n.length;n.reserve(e);var a=this.expression.evaluate({zoom:0},t);if("color"===this.type)for(var o=r(a),s=i;s<e;s++)n.emplaceBack(o[0],o[1]);else{for(var l=i;l<e;l++)n.emplaceBack(a);this.statistics.max=Math.max(this.statistics.max,a)}},m.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},m.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},m.prototype.setUniforms=function(e,t){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],0)};var g=function(e,t,n,r,i){this.expression=e,this.name=t,this.type=n,this.useIntegerZoom=r,this.zoom=i,this.statistics={max:-1/0};var a="color"===n?h:f;this.paintVertexAttributes=[{name:"a_"+t,type:"Float32",components:"color"===n?4:2,offset:0}],this.paintVertexArray=new a};g.prototype.defines=function(){return[]},g.prototype.populatePaintArray=function(e,t){var n=this.paintVertexArray,i=n.length;n.reserve(e);var a=this.expression.evaluate({zoom:this.zoom},t),o=this.expression.evaluate({zoom:this.zoom+1},t);if("color"===this.type)for(var s=r(a),l=r(o),u=i;u<e;u++)n.emplaceBack(s[0],s[1],l[0],l[1]);else{for(var c=i;c<e;c++)n.emplaceBack(a,o);this.statistics.max=Math.max(this.statistics.max,a,o)}},g.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=e.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes))},g.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},g.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},g.prototype.setUniforms=function(e,t,n){e.gl.uniform1f(t.uniforms["a_"+this.name+"_t"],this.interpolationFactor(n.zoom))};var y=function(){this.binders={},this.cacheKey="",this._buffers=[]};y.createDynamic=function(e,t,n){var r=new y,a=[];for(var o in e.paint._values)if(n(o)){var s=e.paint.get(o);if(s instanceof u&&s.property.specification["property-function"]){var l=i(o,e.type),c=s.property.specification.type,d=s.property.useIntegerZoom;"constant"===s.value.kind?(r.binders[o]=new p(s.value,l,c),a.push("/u_"+l)):"source"===s.value.kind?(r.binders[o]=new m(s.value,l,c),a.push("/a_"+l)):(r.binders[o]=new g(s.value,l,c,d,t),a.push("/z_"+l))}}return r.cacheKey=a.sort().join(""),r},y.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.binders)n.binders[r].populatePaintArray(e,t)},y.prototype.defines=function(){var e=this,t=[];for(var n in e.binders)t.push.apply(t,e.binders[n].defines());return t},y.prototype.setUniforms=function(e,t,n,r){var i=this;for(var a in i.binders)i.binders[a].setUniforms(e,t,r,n.get(a))},y.prototype.getPaintVertexBuffers=function(){return this._buffers},y.prototype.upload=function(e){var t=this;for(var n in t.binders)t.binders[n].upload(e);var r=[];for(var i in t.binders){var a=t.binders[i];(a instanceof m||a instanceof g)&&a.paintVertexBuffer&&r.push(a.paintVertexBuffer)}this._buffers=r},y.prototype.destroy=function(){var e=this;for(var t in e.binders)e.binders[t].destroy()};var v=function(e,t,n,r){var i=this;void 0===r&&(r=function(){return!0}),this.programConfigurations={};for(var a=0,o=t;a<o.length;a+=1){var s=o[a];i.programConfigurations[s.id]=y.createDynamic(s,n,r),i.programConfigurations[s.id].layoutAttributes=e}};v.prototype.populatePaintArrays=function(e,t){var n=this;for(var r in n.programConfigurations)n.programConfigurations[r].populatePaintArrays(e,t)},v.prototype.get=function(e){return this.programConfigurations[e]},v.prototype.upload=function(e){var t=this;for(var n in t.programConfigurations)t.programConfigurations[n].upload(e)},v.prototype.destroy=function(){var e=this;for(var t in e.programConfigurations)e.programConfigurations[t].destroy()},s("ConstantBinder",p),s("SourceExpressionBinder",m),s("CompositeExpressionBinder",g),s("ProgramConfiguration",y,{omit:["_buffers"]}),s("ProgramConfigurationSet",v),t.exports={ProgramConfiguration:y,ProgramConfigurationSet:v}},{"../shaders/encode_attribute":96,"../style-spec/util/color":153,"../style/properties":188,"../util/web_worker_transfer":278,"./array_types":39}],59:[function(e,t,n){var r=e("../util/struct_array"),i=r.createLayout;t.exports=i([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}])},{"../util/struct_array":271}],60:[function(e,t,n){var r=e("../util/util"),i=r.warnOnce,a=e("../util/web_worker_transfer"),o=a.register,s=Math.pow(2,16)-1,l=function(e){void 0===e&&(e=[]),this.segments=e};l.prototype.prepareSegment=function(e,n,r){var a=this.segments[this.segments.length-1];return e>s&&i("Max vertices per segment is "+s+": bucket requested "+e),(!a||a.vertexLength+e>t.exports.MAX_VERTEX_ARRAY_LENGTH)&&(a={vertexOffset:n.length,primitiveOffset:r.length,vertexLength:0,primitiveLength:0},this.segments.push(a)),a},l.prototype.get=function(){return this.segments},l.prototype.destroy=function(){for(var e=this,t=0,n=e.segments;t<n.length;t+=1){var r=n[t];for(var i in r.vaos)r.vaos[i].destroy()}},o("SegmentVector",l),t.exports={SegmentVector:l,MAX_VERTEX_ARRAY_LENGTH:s}},{"../util/util":275,"../util/web_worker_transfer":278}],61:[function(e,t,n){var r=function(e,t,n){this.column=e,this.row=t,this.zoom=n};r.prototype.clone=function(){return new r(this.column,this.row,this.zoom)},r.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},r.prototype.sub=function(e){return this.clone()._sub(e)},r.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},r.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this},t.exports=r},{}],62:[function(e,t,n){var r=e("../util/util").wrap,i=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};i.prototype.wrap=function(){return new i(r(this.lng,-180,180),this.lat)},i.prototype.toArray=function(){return[this.lng,this.lat]},i.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},i.prototype.toBounds=function(t){var n=360*t/40075017,r=n/Math.cos(Math.PI/180*this.lat);return new(e("./lng_lat_bounds"))(new i(this.lng-r,this.lat-n),new i(this.lng+r,this.lat+n))},i.convert=function(e){if(e instanceof i)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new i(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==typeof e&&null!==e)return new i(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=i},{"../util/util":275,"./lng_lat_bounds":63}],63:[function(e,t,n){var r=e("./lng_lat"),i=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};i.prototype.setNorthEast=function(e){return this._ne=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.setSouthWest=function(e){return this._sw=e instanceof r?new r(e.lng,e.lat):r.convert(e),this},i.prototype.extend=function(e){var t,n,a=this._sw,o=this._ne;if(e instanceof r)t=e,n=e;else{if(!(e instanceof i))return Array.isArray(e)?e.every(Array.isArray)?this.extend(i.convert(e)):this.extend(r.convert(e)):this;if(t=e._sw,n=e._ne,!t||!n)return this}return a||o?(a.lng=Math.min(t.lng,a.lng),a.lat=Math.min(t.lat,a.lat),o.lng=Math.max(n.lng,o.lng),o.lat=Math.max(n.lat,o.lat)):(this._sw=new r(t.lng,t.lat),this._ne=new r(n.lng,n.lat)),this},i.prototype.getCenter=function(){return new r((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},i.prototype.getSouthWest=function(){return this._sw},i.prototype.getNorthEast=function(){return this._ne},i.prototype.getNorthWest=function(){return new r(this.getWest(),this.getNorth())},i.prototype.getSouthEast=function(){return new r(this.getEast(),this.getSouth())},i.prototype.getWest=function(){return this._sw.lng},i.prototype.getSouth=function(){return this._sw.lat},i.prototype.getEast=function(){return this._ne.lng},i.prototype.getNorth=function(){return this._ne.lat},i.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},i.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},i.prototype.isEmpty=function(){return!(this._sw&&this._ne)},i.convert=function(e){return!e||e instanceof i?e:new i(e)},t.exports=i},{"./lng_lat":62}],64:[function(e,t,n){var r=e("./lng_lat"),i=e("@mapbox/point-geometry"),a=e("./coordinate"),o=e("../util/util"),s=e("../style-spec/util/interpolate").number,l=e("../util/tile_cover"),u=e("../source/tile_id"),c=(u.CanonicalTileID,u.UnwrappedTileID),d=e("../data/extent"),f=e("@mapbox/gl-matrix"),h=f.vec4,p=f.mat4,m=f.mat2,g=function(e,t,n){this.tileSize=512,this._renderWorldCopies=void 0===n||n,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new r(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={},this._alignedPosMatrixCache={}},y={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};g.prototype.clone=function(){var e=new g(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},y.minZoom.get=function(){return this._minZoom},y.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},y.maxZoom.get=function(){return this._maxZoom},y.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},y.renderWorldCopies.get=function(){return this._renderWorldCopies},y.worldSize.get=function(){return this.tileSize*this.scale},y.centerPoint.get=function(){return this.size._div(2)},y.size.get=function(){return new i(this.width,this.height)},y.bearing.get=function(){return-this.angle/Math.PI*180},y.bearing.set=function(e){var t=-o.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=m.create(),m.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},y.pitch.get=function(){return this._pitch/Math.PI*180},y.pitch.set=function(e){var t=o.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},y.fov.get=function(){return this._fov/Math.PI*180},y.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},y.zoom.get=function(){return this._zoom},y.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},y.center.get=function(){return this._center},y.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},g.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},g.prototype.getVisibleUnwrappedCoordinates=function(e){var t=this.pointCoordinate(new i(0,0),0),n=this.pointCoordinate(new i(this.width,0),0),r=Math.floor(t.column),a=Math.floor(n.column),o=[new c(0,e)];if(this._renderWorldCopies)for(var s=r;s<=a;s++)0!==s&&o.push(new c(s,e));return o},g.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),n=t;if(void 0!==e.minzoom&&t<e.minzoom)return[];void 0!==e.maxzoom&&t>e.maxzoom&&(t=e.maxzoom);var r=this.pointCoordinate(this.centerPoint,t),a=new i(r.column-.5,r.row-.5),o=[this.pointCoordinate(new i(0,0),t),this.pointCoordinate(new i(this.width,0),t),this.pointCoordinate(new i(this.width,this.height),t),this.pointCoordinate(new i(0,this.height),t)];return l(t,o,e.reparseOverscaled?n:t,this._renderWorldCopies).sort(function(e,t){return a.dist(e.canonical)-a.dist(t.canonical)})},g.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},y.unmodified.get=function(){return this._unmodified},g.prototype.zoomScale=function(e){return Math.pow(2,e)},g.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},g.prototype.project=function(e){return new i(this.lngX(e.lng),this.latY(e.lat))},g.prototype.unproject=function(e){return new r(this.xLng(e.x),this.yLat(e.y))},y.x.get=function(){return this.lngX(this.center.lng)},y.y.get=function(){return this.latY(this.center.lat)},y.point.get=function(){return new i(this.x,this.y)},g.prototype.lngX=function(e){return(180+e)*this.worldSize/360},g.prototype.latY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},g.prototype.xLng=function(e){return 360*e/this.worldSize-180},g.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},g.prototype.setLocationAtPoint=function(e,t){var n=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(n)),this._renderWorldCopies&&(this.center=this.center.wrap())},g.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},g.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},g.prototype.locationCoordinate=function(e){return new a(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},g.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new r(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},g.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var n=[e.x,e.y,0,1],r=[e.x,e.y,1,1];h.transformMat4(n,n,this.pixelMatrixInverse),h.transformMat4(r,r,this.pixelMatrixInverse);var i=n[3],o=r[3],l=n[0]/i,u=r[0]/o,c=n[1]/i,d=r[1]/o,f=n[2]/i,p=r[2]/o,m=f===p?0:(0-f)/(p-f);return new a(s(l,u,m)/this.tileSize,s(c,d,m)/this.tileSize,this.zoom)._zoomTo(t)},g.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),n=[t.column*this.tileSize,t.row*this.tileSize,0,1];return h.transformMat4(n,n,this.pixelMatrix),new i(n[0]/n[3],n[1]/n[3])},g.prototype.calculatePosMatrix=function(e,t){void 0===t&&(t=!1);var n=e.key,r=t?this._alignedPosMatrixCache:this._posMatrixCache;if(r[n])return r[n];var i=e.canonical,a=this.worldSize/this.zoomScale(i.z),o=i.x+Math.pow(2,i.z)*e.wrap,s=p.identity(new Float64Array(16));return p.translate(s,s,[o*a,i.y*a,0]),p.scale(s,s,[a/d,a/d,1]),p.multiply(s,t?this.alignedProjMatrix:this.projMatrix,s),r[n]=new Float32Array(s),r[n]},g.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,n,r,a=-90,o=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var d=this.latRange;a=this.latY(d[1]),o=this.latY(d[0]),e=o-a<u.y?u.y/(o-a):0}if(this.lngRange){var f=this.lngRange;s=this.lngX(f[0]),l=this.lngX(f[1]),t=l-s<u.x?u.x/(l-s):0}var h=Math.max(t||0,e||0);if(h)return this.center=this.unproject(new i(t?(l+s)/2:this.x,e?(o+a)/2:this.y)),this.zoom+=this.scaleZoom(h),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var p=this.y,m=u.y/2;p-m<a&&(r=a+m),p+m>o&&(r=o-m)}if(this.lngRange){var g=this.x,y=u.x/2;g-y<s&&(n=s+y),g+y>l&&(n=l-y)}void 0===n&&void 0===r||(this.center=this.unproject(new i(void 0!==n?n:this.x,void 0!==r?r:this.y))),this._unmodified=c,this._constraining=!1}},g.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,n=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),r=this.x,i=this.y,a=Math.cos(Math.PI/2-this._pitch)*n+this.cameraToCenterDistance,o=1.01*a,s=new Float64Array(16);p.perspective(s,this._fov,this.width/this.height,1,o),p.scale(s,s,[1,-1,1]),p.translate(s,s,[0,0,-this.cameraToCenterDistance]),p.rotateX(s,s,this._pitch),p.rotateZ(s,s,this.angle),p.translate(s,s,[-r,-i,0]);var l=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));p.scale(s,s,[1,1,l,1]),this.projMatrix=s;var u=this.width%2/2,c=this.height%2/2,d=Math.cos(this.angle),f=Math.sin(this.angle),h=r-Math.round(r)+d*u+f*c,m=i-Math.round(i)+d*c+f*u,g=new Float64Array(s);if(p.translate(g,g,[h>.5?h-1:h,m>.5?m-1:m,0]),this.alignedProjMatrix=g,s=p.create(),p.scale(s,s,[this.width/2,-this.height/2,1]),p.translate(s,s,[1,-1,0]),this.pixelMatrix=p.multiply(new Float64Array(16),s,this.projMatrix),!(s=p.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=s,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Object.defineProperties(g.prototype,y),t.exports=g},{"../data/extent":53,"../source/tile_id":114,"../style-spec/util/interpolate":158,"../util/tile_cover":273,"../util/util":275,"./coordinate":61,"./lng_lat":62,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],65:[function(e,t,n){var r=e("../style-spec/util/color"),i=function(e,t,n){this.blendFunction=e,this.blendColor=t,this.mask=n};i.Replace=[1,0],i.disabled=new i(i.Replace,r.transparent,[!1,!1,!1,!1]),i.unblended=new i(i.Replace,r.transparent,[!0,!0,!0,!0]),i.alphaBlended=new i([1,771],r.transparent,[!0,!0,!0,!0]),t.exports=i},{"../style-spec/util/color":153}],66:[function(e,t,n){var r=e("./index_buffer"),i=e("./vertex_buffer"),a=e("./framebuffer"),o=(e("./depth_mode"),e("./stencil_mode"),e("./color_mode")),s=e("../util/util"),l=e("./value"),u=l.ClearColor,c=l.ClearDepth,d=l.ClearStencil,f=l.ColorMask,h=l.DepthMask,p=l.StencilMask,m=l.StencilFunc,g=l.StencilOp,y=l.StencilTest,v=l.DepthRange,_=l.DepthTest,b=l.DepthFunc,x=l.Blend,w=l.BlendFunc,k=l.BlendColor,T=l.Program,M=l.LineWidth,A=l.ActiveTextureUnit,C=l.Viewport,S=l.BindFramebuffer,E=l.BindRenderbuffer,P=l.BindTexture,I=l.BindVertexBuffer,L=l.BindElementBuffer,O=l.BindVertexArrayOES,z=l.PixelStoreUnpack,R=l.PixelStoreUnpackPremultiplyAlpha,D=function(e){this.gl=e,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.clearColor=new u(this),this.clearDepth=new c(this),this.clearStencil=new d(this),this.colorMask=new f(this),this.depthMask=new h(this),this.stencilMask=new p(this),this.stencilFunc=new m(this),this.stencilOp=new g(this),this.stencilTest=new y(this),this.depthRange=new v(this),this.depthTest=new _(this),this.depthFunc=new b(this),this.blend=new x(this),this.blendFunc=new w(this),this.blendColor=new k(this),this.program=new T(this),this.lineWidth=new M(this),this.activeTexture=new A(this),this.viewport=new C(this),this.bindFramebuffer=new S(this),this.bindRenderbuffer=new E(this),this.bindTexture=new P(this),this.bindVertexBuffer=new I(this),this.bindElementBuffer=new L(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new O(this),this.pixelStoreUnpack=new z(this),this.pixelStoreUnpackPremultiplyAlpha=new R(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")};D.prototype.createIndexBuffer=function(e,t){return new r(this,e,t)},D.prototype.createVertexBuffer=function(e,t,n){return new i(this,e,t,n)},D.prototype.createRenderbuffer=function(e,t,n){var r=this.gl,i=r.createRenderbuffer();return this.bindRenderbuffer.set(i),r.renderbufferStorage(r.RENDERBUFFER,e,t,n),this.bindRenderbuffer.set(null),i},D.prototype.createFramebuffer=function(e,t){return new a(this,e,t)},D.prototype.clear=function(e){var t=e.color,n=e.depth,r=this.gl,i=0;t&&(i|=r.COLOR_BUFFER_BIT,this.clearColor.set(t),this.colorMask.set([!0,!0,!0,!0])),void 0!==n&&(i|=r.DEPTH_BUFFER_BIT,this.clearDepth.set(n),this.depthMask.set(!0)),r.clear(i)},D.prototype.setDepthMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)},D.prototype.setStencilMode=function(e){e.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)},D.prototype.setColorMode=function(e){s.deepEqual(e.blendFunction,o.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)},t.exports=D},{"../util/util":275,"./color_mode":65,"./depth_mode":67,"./framebuffer":68,"./index_buffer":69,"./stencil_mode":70,"./value":71,"./vertex_buffer":72}],67:[function(e,t,n){var r=function(e,t,n){this.func=e,this.mask=t,this.range=n};r.ReadOnly=!1,r.ReadWrite=!0,r.disabled=new r(519,r.ReadOnly,[0,1]),t.exports=r},{}],68:[function(e,t,n){var r=e("./value"),i=r.ColorAttachment,a=r.DepthAttachment,o=function(e,t,n){this.context=e,this.width=t,this.height=n;var r=e.gl,o=this.framebuffer=r.createFramebuffer();this.colorAttachment=new i(e,o),this.depthAttachment=new a(e,o)};o.prototype.destroy=function(){var e=this.context.gl,t=this.colorAttachment.get();t&&e.deleteTexture(t);var n=this.depthAttachment.get();n&&e.deleteRenderbuffer(n),e.deleteFramebuffer(this.framebuffer)},t.exports=o},{"./value":71}],69:[function(e,t,n){var r=function(e,t,n){this.context=e;var r=e.gl;this.buffer=r.createBuffer(),this.dynamicDraw=Boolean(n),this.unbindVAO(),e.bindElementBuffer.set(this.buffer),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?r.DYNAMIC_DRAW:r.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};r.prototype.unbindVAO=function(){this.context.extVertexArrayObject&&this.context.bindVertexArrayOES.set(null)},r.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},r.prototype.updateData=function(e){var t=this.context.gl;this.unbindVAO(),this.bind(),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},r.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},t.exports=r},{}],70:[function(e,t,n){var r=function(e,t,n,r,i,a){this.test=e,this.ref=t,this.mask=n,this.fail=r,this.depthFail=i,this.pass=a};r.disabled=new r({func:519,mask:0},0,0,7680,7680,7680),t.exports=r},{}],71:[function(e,t,n){var r=e("../style-spec/util/color"),i=e("../util/util"),a=function(e){this.context=e,this.current=r.transparent};a.prototype.get=function(){return this.current},a.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e)};var o=function(e){this.context=e,this.current=1};o.prototype.get=function(){return this.current},o.prototype.set=function(e){this.current!==e&&(this.context.gl.clearDepth(e),this.current=e)};var s=function(e){this.context=e,this.current=0};s.prototype.get=function(){return this.current},s.prototype.set=function(e){this.current!==e&&(this.context.gl.clearStencil(e),this.current=e)};var l=function(e){this.context=e,this.current=[!0,!0,!0,!0]};l.prototype.get=function(){return this.current},l.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e)};var u=function(e){this.context=e,this.current=!0};u.prototype.get=function(){return this.current},u.prototype.set=function(e){this.current!==e&&(this.context.gl.depthMask(e),this.current=e)};var c=function(e){this.context=e,this.current=255};c.prototype.get=function(){return this.current},c.prototype.set=function(e){this.current!==e&&(this.context.gl.stencilMask(e),this.current=e)};var d=function(e){this.context=e,this.current={func:e.gl.ALWAYS,ref:0,mask:255}};d.prototype.get=function(){return this.current},d.prototype.set=function(e){var t=this.current;e.func===t.func&&e.ref===t.ref&&e.mask===t.mask||(this.context.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e)};var f=function(e){this.context=e;var t=this.context.gl;this.current=[t.KEEP,t.KEEP,t.KEEP]};f.prototype.get=function(){return this.current},f.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]||(this.context.gl.stencilOp(e[0],e[1],e[2]),this.current=e)};var h=function(e){this.context=e,this.current=!1};h.prototype.get=function(){return this.current},h.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.STENCIL_TEST):t.disable(t.STENCIL_TEST),this.current=e}};var p=function(e){this.context=e,this.current=[0,1]};p.prototype.get=function(){return this.current},p.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.depthRange(e[0],e[1]),this.current=e)};var m=function(e){this.context=e,this.current=!1};m.prototype.get=function(){return this.current},m.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.DEPTH_TEST):t.disable(t.DEPTH_TEST),this.current=e}};var g=function(e){this.context=e,this.current=e.gl.LESS};g.prototype.get=function(){return this.current},g.prototype.set=function(e){this.current!==e&&(this.context.gl.depthFunc(e),this.current=e)};var y=function(e){this.context=e,this.current=!1};y.prototype.get=function(){return this.current},y.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;e?t.enable(t.BLEND):t.disable(t.BLEND),this.current=e}};var v=function(e){this.context=e;var t=this.context.gl;this.current=[t.ONE,t.ZERO]};v.prototype.get=function(){return this.current},v.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]||(this.context.gl.blendFunc(e[0],e[1]),this.current=e)};var _=function(e){this.context=e,this.current=r.transparent};_.prototype.get=function(){return this.current},_.prototype.set=function(e){var t=this.current;e.r===t.r&&e.g===t.g&&e.b===t.b&&e.a===t.a||(this.context.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e)};var b=function(e){this.context=e,this.current=null};b.prototype.get=function(){return this.current},b.prototype.set=function(e){this.current!==e&&(this.context.gl.useProgram(e),this.current=e)};var x=function(e){this.context=e,this.current=1};x.prototype.get=function(){return this.current},x.prototype.set=function(e){var t=this.context.lineWidthRange,n=i.clamp(e,t[0],t[1]);this.current!==n&&(this.context.gl.lineWidth(n),this.current=e)};var w=function(e){this.context=e,this.current=e.gl.TEXTURE0};w.prototype.get=function(){return this.current},w.prototype.set=function(e){this.current!==e&&(this.context.gl.activeTexture(e),this.current=e)};var k=function(e){this.context=e;var t=this.context.gl;this.current=[0,0,t.drawingBufferWidth,t.drawingBufferHeight]};k.prototype.get=function(){return this.current},k.prototype.set=function(e){var t=this.current;e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]||(this.context.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e)};var T=function(e){this.context=e,this.current=null};T.prototype.get=function(){return this.current},T.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindFramebuffer(t.FRAMEBUFFER,e),this.current=e}};var M=function(e){this.context=e,this.current=null};M.prototype.get=function(){return this.current},M.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindRenderbuffer(t.RENDERBUFFER,e),this.current=e}};var A=function(e){this.context=e,this.current=null};A.prototype.get=function(){return this.current},A.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindTexture(t.TEXTURE_2D,e),this.current=e}};var C=function(e){this.context=e,this.current=null};C.prototype.get=function(){return this.current},C.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.bindBuffer(t.ARRAY_BUFFER,e),this.current=e}};var S=function(e){this.context=e,this.current=null};S.prototype.get=function(){return this.current},S.prototype.set=function(e){var t=this.context.gl;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e),this.current=e};var E=function(e){this.context=e,this.current=null};E.prototype.get=function(){return this.current},E.prototype.set=function(e){this.current!==e&&this.context.extVertexArrayObject&&(this.context.extVertexArrayObject.bindVertexArrayOES(e),this.current=e)};var P=function(e){this.context=e,this.current=4};P.prototype.get=function(){return this.current},P.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_ALIGNMENT,e),this.current=e}};var I=function(e){this.context=e,this.current=!1};I.prototype.get=function(){return this.current},I.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e}};var L=function(e,t){this.context=e,this.current=null,this.parent=t};L.prototype.get=function(){return this.current};var O=function(e){function t(t,n){e.call(this,t,n),this.dirty=!1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.dirty||this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}},t.prototype.setDirty=function(){this.dirty=!0},t}(L),z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.set=function(e){if(this.current!==e){var t=this.context.gl;this.context.bindFramebuffer.set(this.parent),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.current=e}},t}(L);t.exports={ClearColor:a,ClearDepth:o,ClearStencil:s,ColorMask:l,DepthMask:u,StencilMask:c,StencilFunc:d,StencilOp:f,StencilTest:h,DepthRange:p,DepthTest:m,DepthFunc:g,Blend:y,BlendFunc:v,BlendColor:_,Program:b,LineWidth:x,ActiveTextureUnit:w,Viewport:k,BindFramebuffer:T,BindRenderbuffer:M,BindTexture:A,BindVertexBuffer:C,BindElementBuffer:S,BindVertexArrayOES:E,PixelStoreUnpack:P,PixelStoreUnpackPremultiplyAlpha:I,ColorAttachment:O,DepthAttachment:z}},{"../style-spec/util/color":153,"../util/util":275}],72:[function(e,t,n){var r={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},i=function(e,t,n,r){this.length=t.length,this.attributes=n,this.itemSize=t.bytesPerElement,this.dynamicDraw=r,this.context=e;var i=e.gl;this.buffer=i.createBuffer(),e.bindVertexBuffer.set(this.buffer),i.bufferData(i.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?i.DYNAMIC_DRAW:i.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};i.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},i.prototype.updateData=function(e){var t=this.context.gl;this.bind(),t.bufferSubData(t.ARRAY_BUFFER,0,e.arrayBuffer)},i.prototype.enableAttributes=function(e,t){for(var n=this,r=0;r<this.attributes.length;r++){var i=n.attributes[r],a=t.attributes[i.name];void 0!==a&&e.enableVertexAttribArray(a)}},i.prototype.setVertexAttribPointers=function(e,t,n){for(var i=this,a=0;a<this.attributes.length;a++){var o=i.attributes[a],s=t.attributes[o.name];void 0!==s&&e.vertexAttribPointer(s,o.components,e[r[o.type]],!1,i.itemSize,o.offset+i.itemSize*(n||0))}},i.prototype.destroy=function(){var e=this.context.gl;this.buffer&&(e.deleteBuffer(this.buffer),delete this.buffer)},t.exports=i},{}],73:[function(e,t,n){var r=e("@mapbox/mapbox-gl-supported"),i=e("./util/browser"),a=e("../package.json").version,o=e("./ui/map"),s=e("./ui/control/navigation_control"),l=e("./ui/control/geolocate_control"),u=e("./ui/control/attribution_control"),c=e("./ui/control/scale_control"),d=e("./ui/control/fullscreen_control"),f=e("./ui/popup"),h=e("./ui/marker"),p=e("./style/style"),m=e("./geo/lng_lat"),g=e("./geo/lng_lat_bounds"),y=e("@mapbox/point-geometry"),v=e("./util/evented"),_=e("./util/config"),b=e("./source/rtl_text_plugin");t.exports={version:a,supported:r,workerCount:Math.max(Math.floor(i.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:o,NavigationControl:s,GeolocateControl:l,AttributionControl:u,ScaleControl:c,FullscreenControl:d,Popup:f,Marker:h,Style:p,LngLat:m,LngLatBounds:g,Point:y,Evented:v,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(e){_.ACCESS_TOKEN=e}}},{"../package.json":38,"./geo/lng_lat":62,"./geo/lng_lat_bounds":63,"./source/rtl_text_plugin":109,"./style/style":190,"./ui/control/attribution_control":232,"./ui/control/fullscreen_control":233,"./ui/control/geolocate_control":234,"./ui/control/navigation_control":236,"./ui/control/scale_control":237,"./ui/map":247,"./ui/marker":248,"./ui/popup":249,"./util/browser":252,"./util/config":256,"./util/evented":260,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],74:[function(e,t,n){function r(e,t,n){var r=n.paint.get("background-color"),s=n.paint.get("background-opacity");if(0!==s){var l=e.context,u=l.gl,c=e.transform,d=c.tileSize,f=n.paint.get("background-pattern"),h=f||1!==r.a||1!==s?"translucent":"opaque";if(e.renderPass===h){l.setStencilMode(a.disabled),l.setDepthMode(e.depthModeForSublayer(0,"opaque"===h?o.ReadWrite:o.ReadOnly)),l.setColorMode(e.colorModeForRenderPass());var p;if(f){if(i.isPatternMissing(f,e))return;p=e.useProgram("backgroundPattern"),i.prepare(f,e,p),e.tileExtentPatternVAO.bind(l,p,e.tileExtentBuffer,[])}else p=e.useProgram("background"),u.uniform4fv(p.uniforms.u_color,[r.r,r.g,r.b,r.a]),e.tileExtentVAO.bind(l,p,e.tileExtentBuffer,[]);u.uniform1f(p.uniforms.u_opacity,s);for(var m=c.coveringTiles({tileSize:d}),g=0,y=m;g<y.length;g+=1){var v=y[g];f&&i.setTile({tileID:v,tileSize:d},e,p),u.uniformMatrix4fv(p.uniforms.u_matrix,!1,e.transform.calculatePosMatrix(v.toUnwrapped())),u.drawArrays(u.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}}var i=e("./pattern"),a=e("../gl/stencil_mode"),o=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"./pattern":91}],75:[function(e,t,n){function r(e,t,n,r){if("translucent"===e.renderPass){var s=n.paint.get("circle-opacity"),l=n.paint.get("circle-stroke-width"),u=n.paint.get("circle-stroke-opacity");if(0!==s.constantOr(1)||0!==l.constantOr(1)&&0!==u.constantOr(1)){var c=e.context,d=c.gl;c.setDepthMode(e.depthModeForSublayer(0,o.ReadOnly)),c.setStencilMode(a.disabled),c.setColorMode(e.colorModeForRenderPass());for(var f=!0,h=0;h<r.length;h++){var p=r[h],m=t.getTile(p),g=m.getBucket(n);if(g){var y=e.context.program.get(),v=g.programConfigurations.get(n.id),_=e.useProgram("circle",v);if((f||_.program!==y)&&(v.setUniforms(c,_,n.paint,{zoom:e.transform.zoom}),f=!1),d.uniform1f(_.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),d.uniform1i(_.uniforms.u_scale_with_map,"map"===n.paint.get("circle-pitch-scale")?1:0),"map"===n.paint.get("circle-pitch-alignment")){d.uniform1i(_.uniforms.u_pitch_with_map,1);var b=i(m,1,e.transform.zoom);d.uniform2f(_.uniforms.u_extrude_scale,b,b)}else d.uniform1i(_.uniforms.u_pitch_with_map,0),d.uniform2fv(_.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits);d.uniformMatrix4fv(_.uniforms.u_matrix,!1,e.translatePosMatrix(p.posMatrix,m,n.paint.get("circle-translate"),n.paint.get("circle-translate-anchor"))),_.draw(c,d.TRIANGLES,n.id,g.layoutVertexBuffer,g.indexBuffer,g.segments,v)}}}}}var i=e("../source/pixels_to_tile_units"),a=e("../gl/stencil_mode"),o=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],76:[function(e,t,n){function r(e,t,n,r,i){var l=e.context,u=l.gl,c=i?e.useProgram("collisionCircle"):e.useProgram("collisionBox");l.setDepthMode(o.disabled),l.setStencilMode(s.disabled),l.setColorMode(e.colorModeForRenderPass());for(var d=0;d<r.length;d++){var f=r[d],h=t.getTile(f),p=h.getBucket(n);if(p){var m=i?p.collisionCircle:p.collisionBox;if(m){u.uniformMatrix4fv(c.uniforms.u_matrix,!1,f.posMatrix),i||l.lineWidth.set(1),u.uniform1f(c.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance);var g=a(h,1,e.transform.zoom),y=Math.pow(2,e.transform.zoom-h.tileID.overscaledZ);u.uniform1f(c.uniforms.u_pixels_to_tile_units,g),u.uniform2f(c.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits[0]/(g*y),e.transform.pixelsToGLUnits[1]/(g*y)),c.draw(l,i?u.TRIANGLES:u.LINES,n.id,m.layoutVertexBuffer,m.indexBuffer,m.segments,null,m.collisionVertexBuffer,null)}}}}function i(e,t,n,i){r(e,t,n,i,!1),r(e,t,n,i,!0)}var a=e("../source/pixels_to_tile_units"),o=e("../gl/depth_mode"),s=e("../gl/stencil_mode");t.exports=i},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104}],77:[function(e,t,n){function r(e,t,n){for(var r=0;r<n.length;r++)i(e,t,n[r])}function i(e,t,n){var r=e.context,i=r.gl;r.lineWidth.set(1*o.devicePixelRatio);var c=n.posMatrix,m=e.useProgram("debug");r.setDepthMode(h.disabled),r.setStencilMode(p.disabled),r.setColorMode(e.colorModeForRenderPass()),i.uniformMatrix4fv(m.uniforms.u_matrix,!1,c),i.uniform4f(m.uniforms.u_color,1,0,0,1),e.debugVAO.bind(r,m,e.debugBuffer,[]),i.drawArrays(i.LINE_STRIP,0,e.debugBuffer.length);for(var g=a(n.toString(),50,200,5),y=new d,v=0;v<g.length;v+=2)y.emplaceBack(g[v],g[v+1]);var _=r.createVertexBuffer(y,f.members);(new u).bind(r,m,_,[]),i.uniform4f(m.uniforms.u_color,1,1,1,1);for(var b=t.getTile(n).tileSize,x=l/(Math.pow(2,e.transform.zoom-n.overscaledZ)*b),w=[[-1,-1],[-1,1],[1,-1],[1,1]],k=0;k<w.length;k++){var T=w[k];i.uniformMatrix4fv(m.uniforms.u_matrix,!1,s.translate([],c,[x*T[0],x*T[1],0])),i.drawArrays(i.LINES,0,_.length)}i.uniform4f(m.uniforms.u_color,0,0,0,1),i.uniformMatrix4fv(m.uniforms.u_matrix,!1,c),i.drawArrays(i.LINES,0,_.length)}function a(e,t,n,r){r=r||1;var i,a,o,s,l,u,c,d,f=[];for(i=0,a=e.length;i<a;i++)if(l=m[e[i]]){for(d=null,o=0,s=l[1].length;o<s;o+=2)-1===l[1][o]&&-1===l[1][o+1]?d=null:(u=t+l[1][o]*r,c=n-l[1][o+1]*r,d&&f.push(d.x,d.y,u,c),d={x:u,y:c});t+=l[0]*r}return f}var o=e("../util/browser"),s=e("@mapbox/gl-matrix").mat4,l=e("../data/extent"),u=e("./vertex_array_object"),c=e("../data/array_types"),d=c.PosArray,f=e("../data/pos_attributes"),h=e("../gl/depth_mode"),p=e("../gl/stencil_mode");t.exports=r;var m={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../util/browser":252,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],78:[function(e,t,n){function r(e,t,n,r){var s=n.paint.get("fill-color"),l=n.paint.get("fill-opacity");if(0!==l.constantOr(1)){var d=e.context;d.setColorMode(e.colorModeForRenderPass());var f=n.paint.get("fill-pattern")||1!==s.constantOr(u.transparent).a||1!==l.constantOr(0)?"translucent":"opaque";e.renderPass===f&&(d.setDepthMode(e.depthModeForSublayer(1,"opaque"===e.renderPass?c.ReadWrite:c.ReadOnly)),i(e,t,n,r,a)),"translucent"===e.renderPass&&n.paint.get("fill-antialias")&&(d.lineWidth.set(2),d.setDepthMode(e.depthModeForSublayer(n.getPaintProperty("fill-outline-color")?2:0,c.ReadOnly)),i(e,t,n,r,o))}}function i(e,t,n,r,i){if(!l.isPatternMissing(n.paint.get("fill-pattern"),e))for(var a=!0,o=0,s=r;o<s.length;o+=1){var u=s[o],c=t.getTile(u),d=c.getBucket(n);d&&(e.context.setStencilMode(e.stencilModeForClipping(u)),i(e,t,n,c,u,d,a),a=!1)}}function a(e,t,n,r,i,a,o){var l=e.context.gl,u=a.programConfigurations.get(n.id);s("fill",n.paint.get("fill-pattern"),e,u,n,r,i,o).draw(e.context,l.TRIANGLES,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,u)}function o(e,t,n,r,i,a,o){var l=e.context.gl,u=a.programConfigurations.get(n.id),c=n.getPaintProperty("fill-outline-color")?null:n.paint.get("fill-pattern"),d=s("fillOutline",c,e,u,n,r,i,o);l.uniform2f(d.uniforms.u_world,l.drawingBufferWidth,l.drawingBufferHeight),d.draw(e.context,l.LINES,n.id,a.layoutVertexBuffer,a.indexBuffer2,a.segments2,u)}function s(e,t,n,r,i,a,o,s){var u,c=n.context.program.get();return t?(u=n.useProgram(e+"Pattern",r),(s||u.program!==c)&&(r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom}),l.prepare(t,n,u)),l.setTile(a,n,u)):(u=n.useProgram(e,r),(s||u.program!==c)&&r.setUniforms(n.context,u,i.paint,{zoom:n.transform.zoom})),n.context.gl.uniformMatrix4fv(u.uniforms.u_matrix,!1,n.translatePosMatrix(o.posMatrix,a,i.paint.get("fill-translate"),i.paint.get("fill-translate-anchor"))),u}var l=e("./pattern"),u=e("../style-spec/util/color"),c=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../style-spec/util/color":153,"./pattern":91}],79:[function(e,t,n){function r(e,t,n,r){if(0!==n.paint.get("fill-extrusion-opacity"))if("offscreen"===e.renderPass){i(e,n);for(var s=!0,l=0,u=r;l<u.length;l+=1){var c=u[l],d=t.getTile(c),f=d.getBucket(n);f&&(o(e,t,n,d,c,f,s),s=!1)}}else"translucent"===e.renderPass&&a(e,n)}function i(e,t){var n=e.context,r=n.gl,i=t.viewportFrame;if(e.depthRboNeedsClear&&e.setupOffscreenDepthRenderbuffer(),!i){var a=new c(n,{width:e.width,height:e.height,data:null},r.RGBA);a.bind(r.LINEAR,r.CLAMP_TO_EDGE),i=t.viewportFrame=n.createFramebuffer(e.width,e.height),i.colorAttachment.set(a.texture)}n.bindFramebuffer.set(i.framebuffer),i.depthAttachment.set(e.depthRbo),e.depthRboNeedsClear&&(n.clear({depth:1}),e.depthRboNeedsClear=!1),n.clear({color:d.transparent}),n.setStencilMode(g.disabled),n.setDepthMode(new f(r.LEQUAL,f.ReadWrite,[0,1])),n.setColorMode(e.colorModeForRenderPass())}function a(e,t){var n=t.viewportFrame;if(n){var r=e.context,i=r.gl,a=e.useProgram("extrusionTexture");r.setStencilMode(g.disabled),r.setDepthMode(f.disabled),r.setColorMode(e.colorModeForRenderPass()),r.activeTexture.set(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,n.colorAttachment.get()),i.uniform1f(a.uniforms.u_opacity,t.paint.get("fill-extrusion-opacity")),i.uniform1i(a.uniforms.u_image,0);var o=p.create();p.ortho(o,0,e.width,e.height,0,0,1),i.uniformMatrix4fv(a.uniforms.u_matrix,!1,o),i.uniform2f(a.uniforms.u_world,i.drawingBufferWidth,i.drawingBufferHeight),e.viewportVAO.bind(r,a,e.viewportBuffer,[]),i.drawArrays(i.TRIANGLE_STRIP,0,4)}}function o(e,t,n,r,i,a,o){var l=e.context,c=l.gl,d=n.paint.get("fill-extrusion-pattern"),f=e.context.program.get(),h=a.programConfigurations.get(n.id),p=e.useProgram(d?"fillExtrusionPattern":"fillExtrusion",h);if((o||p.program!==f)&&h.setUniforms(l,p,n.paint,{zoom:e.transform.zoom}),d){if(u.isPatternMissing(d,e))return;u.prepare(d,e,p),u.setTile(r,e,p),c.uniform1f(p.uniforms.u_height_factor,-Math.pow(2,i.overscaledZ)/r.tileSize/8)}e.context.gl.uniformMatrix4fv(p.uniforms.u_matrix,!1,e.translatePosMatrix(i.posMatrix,r,n.paint.get("fill-extrusion-translate"),n.paint.get("fill-extrusion-translate-anchor"))),s(p,e),p.draw(l,c.TRIANGLES,n.id,a.layoutVertexBuffer,a.indexBuffer,a.segments,h)}function s(e,t){var n=t.context.gl,r=t.style.light,i=r.properties.get("position"),a=[i.x,i.y,i.z],o=h.create();"viewport"===r.properties.get("anchor")&&h.fromRotation(o,-t.transform.angle),m.transformMat3(a,a,o);var s=r.properties.get("color");n.uniform3fv(e.uniforms.u_lightpos,a),n.uniform1f(e.uniforms.u_lightintensity,r.properties.get("intensity")),n.uniform3f(e.uniforms.u_lightcolor,s.r,s.g,s.b)}var l=e("@mapbox/gl-matrix"),u=e("./pattern"),c=e("./texture"),d=e("../style-spec/util/color"),f=e("../gl/depth_mode"),h=l.mat3,p=l.mat4,m=l.vec3,g=e("../gl/stencil_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../style-spec/util/color":153,"./pattern":91,"./texture":93,"@mapbox/gl-matrix":2}],80:[function(e,t,n){function r(e,t,n,r){if(0!==n.paint.get("heatmap-opacity"))if("offscreen"===e.renderPass){var a=e.context,s=a.gl;a.setDepthMode(e.depthModeForSublayer(0,d.ReadOnly)),a.setStencilMode(f.disabled),i(a,e,n),a.clear({color:c.transparent}),a.setColorMode(new h([s.ONE,s.ONE],c.transparent,[!0,!0,!0,!0]));for(var l=!0,p=0;p<r.length;p++){var m=r[p];if(!t.hasRenderableParent(m)){var g=t.getTile(m),y=g.getBucket(n);if(y){var v=e.context.program.get(),_=y.programConfigurations.get(n.id),b=e.useProgram("heatmap",_),x=e.transform,w=x.zoom;(l||b.program!==v)&&(_.setUniforms(e.context,b,n.paint,{zoom:w}),l=!1),s.uniform1f(b.uniforms.u_extrude_scale,u(g,1,w)),s.uniform1f(b.uniforms.u_intensity,n.paint.get("heatmap-intensity")),s.uniformMatrix4fv(b.uniforms.u_matrix,!1,m.posMatrix),b.draw(a,s.TRIANGLES,n.id,y.layoutVertexBuffer,y.indexBuffer,y.segments,_)}}}a.viewport.set([0,0,e.width,e.height])}else"translucent"===e.renderPass&&(e.context.setColorMode(e.colorModeForRenderPass()),o(e,n))}function i(e,t,n){var r=e.gl;e.activeTexture.set(r.TEXTURE1),e.viewport.set([0,0,t.width/4,t.height/4]);var i=n.heatmapFbo;if(i)r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),e.bindFramebuffer.set(i.framebuffer);else{var o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),i=n.heatmapFbo=e.createFramebuffer(t.width/4,t.height/4),a(e,t,o,i)}}function a(e,t,n,r){var i=e.gl;i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t.width/4,t.height/4,0,i.RGBA,e.extTextureHalfFloat?e.extTextureHalfFloat.HALF_FLOAT_OES:i.UNSIGNED_BYTE,null),r.colorAttachment.set(n),e.extTextureHalfFloat&&i.checkFramebufferStatus(i.FRAMEBUFFER)!==i.FRAMEBUFFER_COMPLETE&&(e.extTextureHalfFloat=null,r.colorAttachment.setDirty(),a(e,t,n,r))}function o(e,t){var n=e.context,r=n.gl,i=t.heatmapFbo;if(i){n.activeTexture.set(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,i.colorAttachment.get()),n.activeTexture.set(r.TEXTURE1);var a=t.colorRampTexture;a||(a=t.colorRampTexture=new l(n,t.colorRamp,r.RGBA)),a.bind(r.LINEAR,r.CLAMP_TO_EDGE),n.setDepthMode(d.disabled);var o=e.useProgram("heatmapTexture"),u=t.paint.get("heatmap-opacity");r.uniform1f(o.uniforms.u_opacity,u),r.uniform1i(o.uniforms.u_image,0),r.uniform1i(o.uniforms.u_color_ramp,1);var c=s.create();s.ortho(c,0,e.width,e.height,0,0,1),r.uniformMatrix4fv(o.uniforms.u_matrix,!1,c),r.uniform2f(o.uniforms.u_world,r.drawingBufferWidth,r.drawingBufferHeight),e.viewportVAO.bind(e.context,o,e.viewportBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,4)}}var s=e("@mapbox/gl-matrix").mat4,l=e("./texture"),u=e("../source/pixels_to_tile_units"),c=e("../style-spec/util/color"),d=e("../gl/depth_mode"),f=e("../gl/stencil_mode"),h=e("../gl/color_mode");t.exports=r},{"../gl/color_mode":65,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style-spec/util/color":153,"./texture":93,"@mapbox/gl-matrix":2}],81:[function(e,t,n){function r(e,t,n,r){if("offscreen"===e.renderPass||"translucent"===e.renderPass){var i=e.context;i.setDepthMode(e.depthModeForSublayer(0,h.ReadOnly)),i.setStencilMode(f.disabled),i.setColorMode(e.colorModeForRenderPass());for(var a=0,l=r;a<l.length;a+=1){var u=l[a],c=t.getTile(u);c.needsHillshadePrepare&&"offscreen"===e.renderPass?s(e,c):"translucent"===e.renderPass&&o(e,c,n)}i.viewport.set([0,0,e.width,e.height])}}function i(e,t,n){var r=n.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===n.paint.get("hillshade-illumination-anchor")&&(r-=t.transform.angle),t.context.gl.uniform2f(e.uniforms.u_light,n.paint.get("hillshade-exaggeration"),r)}function a(e,t){var n=t.toCoordinate(),r=new l(n.column,n.row+1,n.zoom);return[e.transform.coordinateLocation(n).lat,e.transform.coordinateLocation(r).lat]}function o(e,t,n){var r=e.context,o=r.gl,s=t.fbo;if(s){var l=e.useProgram("hillshade"),u=e.transform.calculatePosMatrix(t.tileID.toUnwrapped());i(l,e,n);var c=a(e,t.tileID);r.activeTexture.set(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,s.colorAttachment.get()),o.uniformMatrix4fv(l.uniforms.u_matrix,!1,u),o.uniform2fv(l.uniforms.u_latrange,c),o.uniform1i(l.uniforms.u_image,0);var d=n.paint.get("hillshade-shadow-color");o.uniform4f(l.uniforms.u_shadow,d.r,d.g,d.b,d.a);var f=n.paint.get("hillshade-highlight-color");o.uniform4f(l.uniforms.u_highlight,f.r,f.g,f.b,f.a);var h=n.paint.get("hillshade-accent-color");if(o.uniform4f(l.uniforms.u_accent,h.r,h.g,h.b,h.a),t.maskedBoundsBuffer&&t.maskedIndexBuffer&&t.segments)l.draw(r,o.TRIANGLES,n.id,t.maskedBoundsBuffer,t.maskedIndexBuffer,t.segments);else{var p=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(r,l,p,[]),o.drawArrays(o.TRIANGLE_STRIP,0,p.length)}}}function s(e,t){var n=e.context,r=n.gl;if(t.dem&&t.dem.level){var i=t.dem.level.dim,a=t.dem.getPixels();if(n.activeTexture.set(r.TEXTURE1),n.pixelStoreUnpackPremultiplyAlpha.set(!1),t.demTexture=t.demTexture||e.getTileTexture(t.tileSize),t.demTexture){var o=t.demTexture;o.update(a,!1),o.bind(r.NEAREST,r.CLAMP_TO_EDGE)}else t.demTexture=new u(n,a,r.RGBA,!1),t.demTexture.bind(r.NEAREST,r.CLAMP_TO_EDGE);n.activeTexture.set(r.TEXTURE0);var s=t.fbo;if(!s){var l=new u(n,{width:i,height:i,data:null},r.RGBA);l.bind(r.LINEAR,r.CLAMP_TO_EDGE),s=t.fbo=n.createFramebuffer(i,i),s.colorAttachment.set(l.texture)}n.bindFramebuffer.set(s.framebuffer),n.viewport.set([0,0,i,i]);var f=d.create();d.ortho(f,0,c,-c,0,0,1),d.translate(f,f,[0,-c,0]);var h=e.useProgram("hillshadePrepare");r.uniformMatrix4fv(h.uniforms.u_matrix,!1,f),r.uniform1f(h.uniforms.u_zoom,t.tileID.overscaledZ),r.uniform2fv(h.uniforms.u_dimension,[2*i,2*i]),r.uniform1i(h.uniforms.u_image,1);var p=e.rasterBoundsBuffer;e.rasterBoundsVAO.bind(n,h,p,[]),r.drawArrays(r.TRIANGLE_STRIP,0,p.length),t.needsHillshadePrepare=!1}}var l=e("../geo/coordinate"),u=e("./texture"),c=e("../data/extent"),d=e("@mapbox/gl-matrix").mat4,f=e("../gl/stencil_mode"),h=e("../gl/depth_mode");t.exports=r},{"../data/extent":53,"../geo/coordinate":61,"../gl/depth_mode":67,"../gl/stencil_mode":70,"./texture":93,"@mapbox/gl-matrix":2}],82:[function(e,t,n){function r(e,t,n,r,o,s,l,u,c){var d,f,h,p,m=t.context,g=m.gl,y=o.paint.get("line-dasharray"),v=o.paint.get("line-pattern");if(u||c){var _=1/a(n,1,t.transform.tileZoom);if(y){d=t.lineAtlas.getDash(y.from,"round"===o.layout.get("line-cap")),f=t.lineAtlas.getDash(y.to,"round"===o.layout.get("line-cap"));var b=d.width*y.fromScale,x=f.width*y.toScale;g.uniform2f(e.uniforms.u_patternscale_a,_/b,-d.height/2),g.uniform2f(e.uniforms.u_patternscale_b,_/x,-f.height/2),g.uniform1f(e.uniforms.u_sdfgamma,t.lineAtlas.width/(256*Math.min(b,x)*i.devicePixelRatio)/2)}else if(v){if(h=t.imageManager.getPattern(v.from),p=t.imageManager.getPattern(v.to),!h||!p)return;g.uniform2f(e.uniforms.u_pattern_size_a,h.displaySize[0]*v.fromScale/_,p.displaySize[1]),g.uniform2f(e.uniforms.u_pattern_size_b,p.displaySize[0]*v.toScale/_,p.displaySize[1]);var w=t.imageManager.getPixelSize(),k=w.width,T=w.height;g.uniform2fv(e.uniforms.u_texsize,[k,T])}g.uniform2f(e.uniforms.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}u&&(y?(g.uniform1i(e.uniforms.u_image,0),m.activeTexture.set(g.TEXTURE0),t.lineAtlas.bind(m),g.uniform1f(e.uniforms.u_tex_y_a,d.y),g.uniform1f(e.uniforms.u_tex_y_b,f.y),g.uniform1f(e.uniforms.u_mix,y.t)):v&&(g.uniform1i(e.uniforms.u_image,0),m.activeTexture.set(g.TEXTURE0),t.imageManager.bind(m),g.uniform2fv(e.uniforms.u_pattern_tl_a,h.tl),g.uniform2fv(e.uniforms.u_pattern_br_a,h.br),g.uniform2fv(e.uniforms.u_pattern_tl_b,p.tl),g.uniform2fv(e.uniforms.u_pattern_br_b,p.br),g.uniform1f(e.uniforms.u_fade,v.t))),m.setStencilMode(t.stencilModeForClipping(s));var M=t.translatePosMatrix(s.posMatrix,n,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"));g.uniformMatrix4fv(e.uniforms.u_matrix,!1,M),g.uniform1f(e.uniforms.u_ratio,1/a(n,1,t.transform.zoom)),e.draw(m,g.TRIANGLES,o.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,l)}var i=e("../util/browser"),a=e("../source/pixels_to_tile_units"),o=e("../gl/depth_mode");t.exports=function(e,t,n,i){if("translucent"===e.renderPass&&0!==n.paint.get("line-opacity").constantOr(1)){var a=e.context;a.setDepthMode(e.depthModeForSublayer(0,o.ReadOnly)),a.setColorMode(e.colorModeForRenderPass());for(var s,l=n.paint.get("line-dasharray")?"lineSDF":n.paint.get("line-pattern")?"linePattern":"line",u=!0,c=0,d=i;c<d.length;c+=1){var f=d[c],h=t.getTile(f),p=h.getBucket(n);if(p){var m=p.programConfigurations.get(n.id),g=e.context.program.get(),y=e.useProgram(l,m),v=u||y.program!==g,_=s!==h.tileID.overscaledZ;v&&m.setUniforms(e.context,y,n.paint,{zoom:e.transform.zoom}),r(y,e,h,p,n,f,m,v,_),s=h.tileID.overscaledZ,u=!1}}}}},{"../gl/depth_mode":67,"../source/pixels_to_tile_units":104,"../util/browser":252}],83:[function(e,t,n){function r(e,t,n,r){if("translucent"===e.renderPass&&0!==n.paint.get("raster-opacity")){var l=e.context,c=l.gl,h=t.getSource(),p=e.useProgram("raster");l.setStencilMode(d.disabled),l.setColorMode(e.colorModeForRenderPass()),c.uniform1f(p.uniforms.u_brightness_low,n.paint.get("raster-brightness-min")),c.uniform1f(p.uniforms.u_brightness_high,n.paint.get("raster-brightness-max")),c.uniform1f(p.uniforms.u_saturation_factor,o(n.paint.get("raster-saturation"))),c.uniform1f(p.uniforms.u_contrast_factor,a(n.paint.get("raster-contrast"))),c.uniform3fv(p.uniforms.u_spin_weights,i(n.paint.get("raster-hue-rotate"))),c.uniform1f(p.uniforms.u_buffer_scale,1),c.uniform1i(p.uniforms.u_image0,0),c.uniform1i(p.uniforms.u_image1,1);for(var m=r.length&&r[0].overscaledZ,g=0,y=r;g<y.length;g+=1){var v=y[g];l.setDepthMode(e.depthModeForSublayer(v.overscaledZ-m,1===n.paint.get("raster-opacity")?f.ReadWrite:f.ReadOnly,c.LESS));var _=t.getTile(v),b=e.transform.calculatePosMatrix(v.toUnwrapped(),!0);_.registerFadeDuration(n.paint.get("raster-fade-duration")),c.uniformMatrix4fv(p.uniforms.u_matrix,!1,b);var x=t.findLoadedParent(v,0,{}),w=s(_,x,t,n,e.transform),k=void 0,T=void 0;if(l.activeTexture.set(c.TEXTURE0),_.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),l.activeTexture.set(c.TEXTURE1),x?(x.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),k=Math.pow(2,x.tileID.overscaledZ-_.tileID.overscaledZ),T=[_.tileID.canonical.x*k%1,_.tileID.canonical.y*k%1]):_.texture.bind(c.LINEAR,c.CLAMP_TO_EDGE,c.LINEAR_MIPMAP_NEAREST),c.uniform2fv(p.uniforms.u_tl_parent,T||[0,0]),c.uniform1f(p.uniforms.u_scale_parent,k||1),c.uniform1f(p.uniforms.u_fade_t,w.mix),c.uniform1f(p.uniforms.u_opacity,w.opacity*n.paint.get("raster-opacity")),h instanceof u){var M=h.boundsBuffer;h.boundsVAO.bind(l,p,M,[]),c.drawArrays(c.TRIANGLE_STRIP,0,M.length)}else if(_.maskedBoundsBuffer&&_.maskedIndexBuffer&&_.segments)p.draw(l,c.TRIANGLES,n.id,_.maskedBoundsBuffer,_.maskedIndexBuffer,_.segments);else{var A=e.rasterBoundsBuffer,C=e.rasterBoundsVAO;C.bind(l,p,A,[]),c.drawArrays(c.TRIANGLE_STRIP,0,A.length)}}}}function i(e){e*=Math.PI/180;var t=Math.sin(e),n=Math.cos(e);return[(2*n+1)/3,(-Math.sqrt(3)*t-n+1)/3,(Math.sqrt(3)*t-n+1)/3]}function a(e){return e>0?1/(1-e):1+e}function o(e){return e>0?1-1/(1.001-e):-e}function s(e,t,n,r,i){var a=r.paint.get("raster-fade-duration");if(a>0){var o=c.now(),s=(o-e.timeAdded)/a,u=t?(o-t.timeAdded)/a:-1,d=n.getSource(),f=i.coveringZoomLevel({tileSize:d.tileSize,roundZoom:d.roundZoom}),h=!t||Math.abs(t.tileID.overscaledZ-f)>Math.abs(e.tileID.overscaledZ-f),p=h&&e.refreshedUponExpiration?1:l.clamp(h?s:1-u,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-p}:{opacity:p,mix:0}}return{opacity:1,mix:0}}var l=e("../util/util"),u=e("../source/image_source"),c=e("../util/browser"),d=e("../gl/stencil_mode"),f=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/image_source":102,"../util/browser":252,"../util/util":275}],84:[function(e,t,n){function r(e,t,n,r){if("translucent"===e.renderPass){var a=e.context;a.setStencilMode(m.disabled),a.setColorMode(e.colorModeForRenderPass()),0!==n.paint.get("icon-opacity").constantOr(1)&&i(e,t,n,r,!1,n.paint.get("icon-translate"),n.paint.get("icon-translate-anchor"),n.layout.get("icon-rotation-alignment"),n.layout.get("icon-pitch-alignment"),n.layout.get("icon-keep-upright")),0!==n.paint.get("text-opacity").constantOr(1)&&i(e,t,n,r,!0,n.paint.get("text-translate"),n.paint.get("text-translate-anchor"),n.layout.get("text-rotation-alignment"),n.layout.get("text-pitch-alignment"),n.layout.get("text-keep-upright")),t.map.showCollisionBoxes&&l(e,t,n,r)}}function i(e,t,n,r,i,s,l,d,f,p){var m=e.context,y=m.gl,v=e.transform,_="map"===d,b="map"===f,x=_&&"line"===n.layout.get("symbol-placement"),w=_&&!b&&!x,k=b;m.setDepthMode(k?e.depthModeForSublayer(0,g.ReadOnly):g.disabled);for(var T,M=0,A=r;M<A.length;M+=1){var C=A[M],S=t.getTile(C),E=S.getBucket(n);if(E){var P=i?E.text:E.icon;if(P&&P.segments.get().length){var I=P.programConfigurations.get(n.id),L=i||E.sdfIcons,O=i?E.textSizeData:E.iconSizeData;if(T||(T=e.useProgram(L?"symbolSDF":"symbolIcon",I),I.setUniforms(e.context,T,n.paint,{zoom:e.transform.zoom}),a(T,e,n,i,w,b,O)),m.activeTexture.set(y.TEXTURE0),y.uniform1i(T.uniforms.u_texture,0),i)S.glyphAtlasTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),y.uniform2fv(T.uniforms.u_texsize,S.glyphAtlasTexture.size);else{var z=1!==n.layout.get("icon-size").constantOr(0)||E.iconsNeedLinear,R=b||0!==v.pitch;S.iconAtlasTexture.bind(L||e.options.rotating||e.options.zooming||z||R?y.LINEAR:y.NEAREST,y.CLAMP_TO_EDGE),y.uniform2fv(T.uniforms.u_texsize,S.iconAtlasTexture.size)}y.uniformMatrix4fv(T.uniforms.u_matrix,!1,e.translatePosMatrix(C.posMatrix,S,s,l));var D=u(S,1,e.transform.zoom),N=c.getLabelPlaneMatrix(C.posMatrix,b,_,e.transform,D),F=c.getGlCoordMatrix(C.posMatrix,b,_,e.transform,D);y.uniformMatrix4fv(T.uniforms.u_gl_coord_matrix,!1,e.translatePosMatrix(F,S,s,l,!0)),x?(y.uniformMatrix4fv(T.uniforms.u_label_plane_matrix,!1,h),c.updateLineLabels(E,C.posMatrix,e,i,N,F,b,p)):y.uniformMatrix4fv(T.uniforms.u_label_plane_matrix,!1,N),y.uniform1f(T.uniforms.u_fade_change,e.options.fadeDuration?e.symbolFadeChange:1),o(T,I,e,n,S,P,i,L,b)}}}}function a(e,t,n,r,i,a,o){var s=t.context.gl,l=t.transform;s.uniform1i(e.uniforms.u_pitch_with_map,a?1:0),s.uniform1f(e.uniforms.u_is_text,r?1:0),s.uniform1f(e.uniforms.u_pitch,l.pitch/360*2*Math.PI);var u="constant"===o.functionType||"source"===o.functionType,c="constant"===o.functionType||"camera"===o.functionType;s.uniform1i(e.uniforms.u_is_size_zoom_constant,u?1:0),s.uniform1i(e.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(e.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var f=d.evaluateSizeForZoom(o,l.zoom,p.properties[r?"text-size":"icon-size"]);void 0!==f.uSizeT&&s.uniform1f(e.uniforms.u_size_t,f.uSizeT),void 0!==f.uSize&&s.uniform1f(e.uniforms.u_size,f.uSize),s.uniform1f(e.uniforms.u_aspect_ratio,l.width/l.height),s.uniform1i(e.uniforms.u_rotate_symbol,i?1:0)}function o(e,t,n,r,i,a,o,l,u){var c=n.context,d=c.gl,f=n.transform;if(l){var h=0!==r.paint.get(o?"text-halo-width":"icon-halo-width").constantOr(1),p=u?Math.cos(f._pitch)*f.cameraToCenterDistance:1;d.uniform1f(e.uniforms.u_gamma_scale,p),h&&(d.uniform1f(e.uniforms.u_is_halo,1),s(a,r,c,e)),d.uniform1f(e.uniforms.u_is_halo,0)}s(a,r,c,e)}function s(e,t,n,r){r.draw(n,n.gl.TRIANGLES,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}var l=e("./draw_collision_debug"),u=e("../source/pixels_to_tile_units"),c=e("../symbol/projection"),d=e("../symbol/symbol_size"),f=e("@mapbox/gl-matrix").mat4,h=f.identity(new Float32Array(16)),p=e("../style/style_layer/symbol_style_layer_properties").layout,m=e("../gl/stencil_mode"),g=e("../gl/depth_mode");t.exports=r},{"../gl/depth_mode":67,"../gl/stencil_mode":70,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/projection":224,"../symbol/symbol_size":228,"./draw_collision_debug":76,"@mapbox/gl-matrix":2}],85:[function(e,t,n){function r(e){var t=new o({width:0,height:0}),n={},r=new i(0,0,{autoResize:!0});for(var a in e){var l=e[a],u=n[a]={};for(var c in l){var d=l[+c];if(d&&0!==d.bitmap.width&&0!==d.bitmap.height){var f=r.packOne(d.bitmap.width+2*s,d.bitmap.height+2*s);t.resize({width:r.w,height:r.h}),o.copy(d.bitmap,t,{x:0,y:0},{x:f.x+s,y:f.y+s},d.bitmap),u[c]={rect:f,metrics:d.metrics}}}}return r.shrink(),t.resize({width:r.w,height:r.h}),{image:t,positions:n}}var i=e("@mapbox/shelf-pack"),a=e("../util/image"),o=a.AlphaImage,s=1;t.exports={makeGlyphAtlas:r}},{"../util/image":263,"@mapbox/shelf-pack":5}],86:[function(e,t,n){var r=e("../style/load_glyph_range"),i=e("@mapbox/tiny-sdf"),a=e("../util/is_char_in_unicode_block"),o=e("../util/util"),s=o.asyncAll,l=e("../util/image"),u=l.AlphaImage,c=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};c.prototype.setURL=function(e){this.url=e},c.prototype.getGlyphs=function(e,t){var n=this,i=[];for(var a in e)for(var o=0,l=e[a];o<l.length;o+=1){var u=l[o];i.push({stack:a,id:u})}s(i,function(e,t){var i=e.stack,a=e.id,o=n.entries[i];o||(o=n.entries[i]={glyphs:{},requests:{}});var s=o.glyphs[a];if(void 0!==s)return void t(null,{stack:i,id:a,glyph:s});if(s=n._tinySDF(o,i,a))return void t(null,{stack:i,id:a,glyph:s});var l=Math.floor(a/256);if(256*l>65535)return void t(new Error("glyphs > 65535 not supported"));var u=o.requests[l];u||(u=o.requests[l]=[],r(i,l,n.url,n.requestTransform,function(e,t){if(t)for(var n in t)o.glyphs[+n]=t[+n];for(var r=0,i=u;r<i.length;r+=1)(0,i[r])(e,t);delete o.requests[l]})),u.push(function(e,n){e?t(e):n&&t(null,{stack:i,id:a,glyph:n[a]||null})})},function(e,n){if(e)t(e);else if(n){for(var r={},i=0,a=n;i<a.length;i+=1){var o=a[i],s=o.stack,l=o.id,u=o.glyph;(r[s]||(r[s]={}))[l]=u&&{id:u.id,bitmap:u.bitmap.clone(),metrics:u.metrics}}t(null,r)}})},c.prototype._tinySDF=function(e,t,n){var r=this.localIdeographFontFamily;if(r&&(a["CJK Unified Ideographs"](n)||a["Hangul Syllables"](n))){var o=e.tinySDF;if(!o){var s="400";/bold/i.test(t)?s="900":/medium/i.test(t)?s="500":/light/i.test(t)&&(s="200"),o=e.tinySDF=new i(24,3,8,.25,r,s)}return{id:n,bitmap:new u({width:30,height:30},o.draw(String.fromCharCode(n))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},t.exports=c},{"../style/load_glyph_range":184,"../util/image":263,"../util/is_char_in_unicode_block":265,"../util/util":275,"@mapbox/tiny-sdf":6}],87:[function(e,t,n){function r(e,t){var n=t.pixelRatio,r={x:e.x+l,y:e.y+l,w:e.w-2*l,h:e.h-2*l};return{pixelRatio:n,textureRect:r,tl:[r.x,r.y],br:[r.x+r.w,r.y+r.h],displaySize:[r.w/n,r.h/n]}}function i(e){var t=new s({width:0,height:0}),n={},i=new a(0,0,{autoResize:!0});for(var o in e){var u=e[o],c=i.packOne(u.data.width+2*l,u.data.height+2*l);t.resize({width:i.w,height:i.h}),s.copy(u.data,t,{x:0,y:0},{x:c.x+l,y:c.y+l},u.data),n[o]=r(c,u)}return i.shrink(),t.resize({width:i.w,height:i.h}),{image:t,positions:n}}var a=e("@mapbox/shelf-pack"),o=e("../util/image"),s=o.RGBAImage,l=1;t.exports={imagePosition:r,makeImageAtlas:i}},{"../util/image":263,"@mapbox/shelf-pack":5}],88:[function(e,t,n){var r=e("@mapbox/shelf-pack"),i=e("../util/image"),a=i.RGBAImage,o=e("./image_atlas"),s=o.imagePosition,l=e("./texture"),u=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new r(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=new a({width:64,height:64}),this.dirty=!0};u.prototype.isLoaded=function(){return this.loaded},u.prototype.setLoaded=function(e){var t=this;if(this.loaded!==e&&(this.loaded=e,e)){for(var n=0,r=t.requestors;n<r.length;n+=1){var i=r[n],a=i.ids,o=i.callback;t._notify(a,o)}this.requestors=[]}},u.prototype.getImage=function(e){return this.images[e]},u.prototype.addImage=function(e,t){this.images[e]=t},u.prototype.removeImage=function(e){delete this.images[e];var t=this.patterns[e];t&&(this.shelfPack.unref(t.bin),delete this.patterns[e])},u.prototype.getImages=function(e,t){var n=this,r=!0;if(!this.isLoaded())for(var i=0,a=e;i<a.length;i+=1){var o=a[i];n.images[o]||(r=!1)}this.isLoaded()||r?this._notify(e,t):this.requestors.push({ids:e,callback:t})},u.prototype._notify=function(e,t){for(var n=this,r={},i=0,a=e;i<a.length;i+=1){var o=a[i],s=n.images[o];s&&(r[o]={data:s.data.clone(),pixelRatio:s.pixelRatio,sdf:s.sdf})}t(null,r)},u.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},u.prototype.getPattern=function(e){var t=this.patterns[e];if(t)return t.position;var n=this.getImage(e);if(!n)return null;var r=n.data.width+2,i=n.data.height+2,o=this.shelfPack.packOne(r,i);if(!o)return null;this.atlasImage.resize(this.getPixelSize());var l=n.data,u=this.atlasImage,c=o.x+1,d=o.y+1,f=l.width,h=l.height;a.copy(l,u,{x:0,y:0},{x:c,y:d},{width:f,height:h}),a.copy(l,u,{x:0,y:h-1},{x:c,y:d-1},{width:f,height:1}),a.copy(l,u,{x:0,y:0},{x:c,y:d+h},{width:f,height:1}),a.copy(l,u,{x:f-1,y:0},{x:c-1,y:d},{width:1,height:h}),a.copy(l,u,{x:0,y:0},{x:c+f,y:d},{width:1,height:h}),this.dirty=!0;var p=s(o,n);return this.patterns[e]={bin:o,position:p},p},u.prototype.bind=function(e){var t=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(e,this.atlasImage,t.RGBA),this.atlasTexture.bind(t.LINEAR,t.CLAMP_TO_EDGE)},t.exports=u},{"../util/image":263,"./image_atlas":87,"./texture":93,"@mapbox/shelf-pack":5}],89:[function(e,t,n){var r=e("../util/util"),i=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};i.prototype.getDash=function(e,t){var n=e.join(",")+String(t);return this.positions[n]||(this.positions[n]=this.addDash(e,t)),this.positions[n]},i.prototype.addDash=function(e,t){var n=this,i=t?7:0,a=2*i+1;if(this.nextRow+a>this.height)return r.warnOnce("LineAtlas out of space"),null;for(var o=0,s=0;s<e.length;s++)o+=e[s];for(var l=this.width/o,u=l/2,c=e.length%2==1,d=-i;d<=i;d++)for(var f=n.nextRow+i+d,h=n.width*f,p=c?-e[e.length-1]:0,m=e[0],g=1,y=0;y<this.width;y++){for(;m<y/l;)p=m,m+=e[g],c&&g===e.length-1&&(m+=e[0]),g++;var v=Math.abs(y-p*l),_=Math.abs(y-m*l),b=Math.min(v,_),x=g%2==1,w=void 0;if(t){var k=i?d/i*(u+1):0;if(x){var T=u-Math.abs(k);w=Math.sqrt(b*b+T*T)}else w=u-Math.sqrt(b*b+k*k)}else w=(x?1:-1)*b;n.data[3+4*(h+y)]=Math.max(0,Math.min(255,w+128))}var M={y:(this.nextRow+i+.5)/this.height,height:2*i/this.height,width:o};return this.nextRow+=a,this.dirty=!0,M},i.prototype.bind=function(e){var t=e.gl;this.texture?(t.bindTexture(t.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,t.texSubImage2D(t.TEXTURE_2D,0,0,0,this.width,this.height,t.RGBA,t.UNSIGNED_BYTE,this.data))):(this.texture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.width,this.height,0,t.RGBA,t.UNSIGNED_BYTE,this.data))},t.exports=i},{"../util/util":275}],90:[function(e,t,n){var r=e("../util/browser"),i=e("@mapbox/gl-matrix").mat4,a=e("../source/source_cache"),o=e("../data/extent"),s=e("../source/pixels_to_tile_units"),l=e("../util/util"),u=e("./vertex_array_object"),c=e("../data/array_types"),d=c.RasterBoundsArray,f=c.PosArray,h=e("../data/raster_bounds_attributes"),p=e("../data/pos_attributes"),m=e("../data/program_configuration"),g=m.ProgramConfiguration,y=e("../symbol/cross_tile_symbol_index"),v=e("../shaders"),_=e("./program"),b=e("../gl/context"),x=e("../gl/depth_mode"),w=e("../gl/stencil_mode"),k=e("../gl/color_mode"),T=(e("./texture"),e("./tile_mask")),M=e("../style-spec/util/color"),A={symbol:e("./draw_symbol"),circle:e("./draw_circle"),heatmap:e("./draw_heatmap"),line:e("./draw_line"),fill:e("./draw_fill"),"fill-extrusion":e("./draw_fill_extrusion"),hillshade:e("./draw_hillshade"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")},C=function(e,t){this.context=new b(e),this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=a.maxUnderzooming+a.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.depthRboNeedsClear=!0,this.emptyProgramConfiguration=new g,this.crossTileSymbolIndex=new y};C.prototype.resize=function(e,t){var n=this,i=this.context.gl;if(this.width=e*r.devicePixelRatio,this.height=t*r.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var a=0,o=n.style._order;a<o.length;a+=1){var s=o[a];n.style._layers[s].resize()}this.depthRbo&&(i.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},C.prototype.setup=function(){var e=this.context,t=new f;t.emplaceBack(0,0),t.emplaceBack(o,0),t.emplaceBack(0,o),t.emplaceBack(o,o),this.tileExtentBuffer=e.createVertexBuffer(t,p.members),this.tileExtentVAO=new u,this.tileExtentPatternVAO=new u;var n=new f;n.emplaceBack(0,0),n.emplaceBack(o,0),n.emplaceBack(o,o),n.emplaceBack(0,o),n.emplaceBack(0,0),this.debugBuffer=e.createVertexBuffer(n,p.members),this.debugVAO=new u;var r=new d;r.emplaceBack(0,0,0,0),r.emplaceBack(o,0,o,0),r.emplaceBack(0,o,0,o),r.emplaceBack(o,o,o,o),this.rasterBoundsBuffer=e.createVertexBuffer(r,h.members),this.rasterBoundsVAO=new u;var i=new f;i.emplaceBack(0,0),i.emplaceBack(1,0),i.emplaceBack(0,1),i.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(i,p.members),this.viewportVAO=new u},C.prototype.clearStencil=function(){var e=this.context,t=e.gl;e.setColorMode(k.disabled),e.setDepthMode(x.disabled),e.setStencilMode(new w({func:t.ALWAYS,mask:0},0,255,t.ZERO,t.ZERO,t.ZERO));var n=i.create();i.ortho(n,0,this.width,this.height,0,0,1),i.scale(n,n,[t.drawingBufferWidth,t.drawingBufferHeight,0]);var r=this.useProgram("clippingMask");t.uniformMatrix4fv(r.uniforms.u_matrix,!1,n),this.viewportVAO.bind(e,r,this.viewportBuffer,[]),t.drawArrays(t.TRIANGLE_STRIP,0,4)},C.prototype._renderTileClippingMasks=function(e){var t=this,n=this.context,r=n.gl;n.setColorMode(k.disabled),n.setDepthMode(x.disabled);var i=1;this._tileClippingMaskIDs={};for(var a=0,o=e;a<o.length;a+=1){var s=o[a],l=t._tileClippingMaskIDs[s.key]=i++;n.setStencilMode(new w({func:r.ALWAYS,mask:0},l,255,r.KEEP,r.KEEP,r.REPLACE));var u=t.useProgram("clippingMask");r.uniformMatrix4fv(u.uniforms.u_matrix,!1,s.posMatrix),t.tileExtentVAO.bind(t.context,u,t.tileExtentBuffer,[]),r.drawArrays(r.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}},C.prototype.stencilModeForClipping=function(e){var t=this.context.gl;return new w({func:t.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,t.KEEP,t.KEEP,t.REPLACE)},C.prototype.colorModeForRenderPass=function(){var e=this.context.gl;return this._showOverdrawInspector?new k([e.CONSTANT_COLOR,e.ONE],new M(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?k.unblended:k.alphaBlended},C.prototype.depthModeForSublayer=function(e,t,n){var r=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,i=r-1+this.depthRange;return new x(n||this.context.gl.LEQUAL,t,[i,r])},C.prototype.render=function(e,t){var n=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(r.now());for(var i in e.sourceCaches){var a=n.style.sourceCaches[i];a.used&&a.prepare(n.context)}var o=this.style._order,s=l.filterObject(this.style.sourceCaches,function(e){return"raster"===e.getSource().type||"raster-dem"===e.getSource().type});for(var u in s)!function(e){var t=s[e],r=t.getVisibleCoordinates(),i=r.map(function(e){return t.getTile(e)});T(i,n.context)}(u);this.renderPass="offscreen";var c,d=[];this.depthRboNeedsClear=!0;for(var f=0;f<o.length;f++){var h=n.style._layers[o[f]];h.hasOffscreenPass()&&!h.isHidden(n.transform.zoom)&&(h.source!==(c&&c.id)&&(c=n.style.sourceCaches[h.source],d=[],c&&(d=c.getVisibleCoordinates(),d.reverse())),d.length&&n.renderLayer(n,c,h,d))}this.context.bindFramebuffer.set(null),this.context.clear({color:t.showOverdrawInspector?M.black:M.transparent,depth:1}),this._showOverdrawInspector=t.showOverdrawInspector,this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var p,m=[];for(this.currentLayer=o.length-1,this.currentLayer;this.currentLayer>=0;this.currentLayer--){var g=n.style._layers[o[n.currentLayer]];g.source!==(p&&p.id)&&(p=n.style.sourceCaches[g.source],m=[],p&&(n.clearStencil(),m=p.getVisibleCoordinates(),p.getSource().isTileClipped&&n._renderTileClippingMasks(m))),n.renderLayer(n,p,g,m)}this.renderPass="translucent";var y,v=[];for(this.currentLayer=0,this.currentLayer;this.currentLayer<o.length;this.currentLayer++){var _=n.style._layers[o[n.currentLayer]];_.source!==(y&&y.id)&&(y=n.style.sourceCaches[_.source],v=[],y&&(n.clearStencil(),v=y.getVisibleCoordinates(),y.getSource().isTileClipped&&n._renderTileClippingMasks(v)),v.reverse()),n.renderLayer(n,y,_,v)}if(this.options.showTileBoundaries){var b=this.style.sourceCaches[Object.keys(this.style.sourceCaches)[0]];b&&A.debug(this,b,b.getVisibleCoordinates())}},C.prototype.setupOffscreenDepthRenderbuffer=function(){var e=this.context;this.depthRbo||(this.depthRbo=e.createRenderbuffer(e.gl.DEPTH_COMPONENT16,this.width,this.height))},C.prototype.renderLayer=function(e,t,n,r){n.isHidden(this.transform.zoom)||("background"===n.type||r.length)&&(this.id=n.id,A[n.type](e,t,n,r))},C.prototype.translatePosMatrix=function(e,t,n,r,a){if(!n[0]&&!n[1])return e;var o=a?"map"===r?this.transform.angle:0:"viewport"===r?-this.transform.angle:0;if(o){var l=Math.sin(o),u=Math.cos(o);n=[n[0]*u-n[1]*l,n[0]*l+n[1]*u]}var c=[a?n[0]:s(t,n[0],this.transform.zoom),a?n[1]:s(t,n[1],this.transform.zoom),0],d=new Float32Array(16);return i.translate(d,e,c),d},C.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},C.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},C.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var n=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[n]||(this.cache[n]=new _(this.context,v[e],t,this._showOverdrawInspector)),this.cache[n]},C.prototype.useProgram=function(e,t){var n=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.context.program.set(n.program),n},t.exports=C},{"../data/array_types":39,"../data/extent":53,"../data/pos_attributes":57,"../data/program_configuration":58,"../data/raster_bounds_attributes":59,"../gl/color_mode":65,"../gl/context":66,"../gl/depth_mode":67,"../gl/stencil_mode":70,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":111,"../style-spec/util/color":153,"../symbol/cross_tile_symbol_index":218,"../util/browser":252,"../util/util":275,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_hillshade":81,"./draw_line":82,"./draw_raster":83,"./draw_symbol":84,"./program":92,"./texture":93,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":2}],91:[function(e,t,n){var r=e("../source/pixels_to_tile_units");n.isPatternMissing=function(e,t){if(!e)return!1;var n=t.imageManager.getPattern(e.from),r=t.imageManager.getPattern(e.to);return!n||!r},n.prepare=function(e,t,n){var r=t.context,i=r.gl,a=t.imageManager.getPattern(e.from),o=t.imageManager.getPattern(e.to);i.uniform1i(n.uniforms.u_image,0),i.uniform2fv(n.uniforms.u_pattern_tl_a,a.tl),i.uniform2fv(n.uniforms.u_pattern_br_a,a.br),i.uniform2fv(n.uniforms.u_pattern_tl_b,o.tl),i.uniform2fv(n.uniforms.u_pattern_br_b,o.br);var s=t.imageManager.getPixelSize(),l=s.width,u=s.height;i.uniform2fv(n.uniforms.u_texsize,[l,u]),i.uniform1f(n.uniforms.u_mix,e.t),i.uniform2fv(n.uniforms.u_pattern_size_a,a.displaySize),i.uniform2fv(n.uniforms.u_pattern_size_b,o.displaySize),i.uniform1f(n.uniforms.u_scale_a,e.fromScale),i.uniform1f(n.uniforms.u_scale_b,e.toScale),r.activeTexture.set(i.TEXTURE0),t.imageManager.bind(t.context)},n.setTile=function(e,t,n){var i=t.context.gl;i.uniform1f(n.uniforms.u_tile_units_to_pixels,1/r(e,1,t.transform.tileZoom));var a=Math.pow(2,e.tileID.overscaledZ),o=e.tileSize*Math.pow(2,t.transform.tileZoom)/a,s=o*(e.tileID.canonical.x+e.tileID.wrap*a),l=o*e.tileID.canonical.y;i.uniform2f(n.uniforms.u_pixel_coord_upper,s>>16,l>>16),i.uniform2f(n.uniforms.u_pixel_coord_lower,65535&s,65535&l)}},{"../source/pixels_to_tile_units":104}],92:[function(e,t,n){var r=e("../util/browser"),i=e("../shaders"),a=e("../data/program_configuration"),o=(a.ProgramConfiguration,e("./vertex_array_object")),s=(e("../gl/context"),function(e,t,n,a){var o=this,s=e.gl;this.program=s.createProgram();var l=n.defines().concat("#define DEVICE_PIXEL_RATIO "+r.devicePixelRatio.toFixed(1));a&&l.push("#define OVERDRAW_INSPECTOR;");var u=l.concat(i.prelude.fragmentSource,t.fragmentSource).join("\n"),c=l.concat(i.prelude.vertexSource,t.vertexSource).join("\n"),d=s.createShader(s.FRAGMENT_SHADER);s.shaderSource(d,u),s.compileShader(d),s.attachShader(this.program,d);var f=s.createShader(s.VERTEX_SHADER);s.shaderSource(f,c),s.compileShader(f),s.attachShader(this.program,f);for(var h=n.layoutAttributes||[],p=0;p<h.length;p++)s.bindAttribLocation(o.program,p,h[p].name);s.linkProgram(this.program),this.numAttributes=s.getProgramParameter(this.program,s.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var m=0;m<this.numAttributes;m++){var g=s.getActiveAttrib(o.program,m);g&&(o.attributes[g.name]=s.getAttribLocation(o.program,g.name))}for(var y=s.getProgramParameter(this.program,s.ACTIVE_UNIFORMS),v=0;v<y;v++){var _=s.getActiveUniform(o.program,v);_&&(o.uniforms[_.name]=s.getUniformLocation(o.program,_.name))}});s.prototype.draw=function(e,t,n,r,i,a,s,l,u){for(var c,d=this,f=e.gl,h=(c={},c[f.LINES]=2,c[f.TRIANGLES]=3,c)[t],p=0,m=a.get();p<m.length;p+=1){var g=m[p],y=g.vaos||(g.vaos={});(y[n]||(y[n]=new o)).bind(e,d,r,s?s.getPaintVertexBuffers():[],i,g.vertexOffset,l,u),f.drawElements(t,g.primitiveLength*h,f.UNSIGNED_SHORT,g.primitiveOffset*h*2)}},t.exports=s},{"../data/program_configuration":58,"../gl/context":66,"../shaders":97,"../util/browser":252,"./vertex_array_object":95}],93:[function(e,t,n){var r=e("../util/window"),i=r.HTMLImageElement,a=r.HTMLCanvasElement,o=r.HTMLVideoElement,s=r.ImageData,l=function(e,t,n,r){this.context=e;var i=t.width,a=t.height;this.size=[i,a],this.format=n,this.texture=e.gl.createTexture(),this.update(t,r)};l.prototype.update=function(e,t){var n=e.width,r=e.height;this.size=[n,r];var l=this,u=l.context,c=u.gl;c.bindTexture(c.TEXTURE_2D,this.texture),u.pixelStoreUnpack.set(1),this.format===c.RGBA&&!1!==t&&u.pixelStoreUnpackPremultiplyAlpha.set(!0),e instanceof i||e instanceof a||e instanceof o||e instanceof s?c.texImage2D(c.TEXTURE_2D,0,this.format,this.format,c.UNSIGNED_BYTE,e):c.texImage2D(c.TEXTURE_2D,0,this.format,n,r,0,this.format,c.UNSIGNED_BYTE,e.data)},l.prototype.bind=function(e,t,n){var r=this,i=r.context,a=i.gl;a.bindTexture(a.TEXTURE_2D,this.texture),e!==this.filter&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,e),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,n||e),this.filter=e),t!==this.wrap&&(a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,t),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,t),this.wrap=t)},l.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null},t.exports=l},{"../util/window":254}],94:[function(e,t,n){function r(e,t,n,i,a){for(var s=0;s<n.length;s++){var l=n[s];if(i.isLessThan(l.tileID))break;if(t.key===l.tileID.key)return;if(l.tileID.isChildOf(t)){for(var u=t.children(1/0),c=0;c<u.length;c++)r(e,u[c],n.slice(s),i,a);return}}var d=t.overscaledZ-e.overscaledZ,f=new o(d,t.canonical.x-(e.canonical.x<<d),t.canonical.y-(e.canonical.y<<d));a[f.key]=a[f.key]||f}var i=e("../source/tile_id"),a=i.OverscaledTileID,o=i.CanonicalTileID;t.exports=function(e,t){for(var n=e.sort(function(e,t){return e.tileID.isLessThan(t.tileID)?-1:t.tileID.isLessThan(e.tileID)?1:0}),i=0;i<n.length;i++){var o={},s=n[i],l=n.slice(i+1);r(s.tileID.wrapped(),s.tileID,l,new a(0,s.tileID.wrap+1,0,0,0),o),s.setMask(o,t)}}},{"../source/tile_id":114}],95:[function(e,t,n){var r=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};r.prototype.bind=function(e,t,n,r,i,a,o,s){var l=this;this.context=e;for(var u=this.boundPaintVertexBuffers.length!==r.length,c=0;!u&&c<r.length;c++)l.boundPaintVertexBuffers[c]!==r[c]&&(u=!0);var d=!this.vao||this.boundProgram!==t||this.boundLayoutVertexBuffer!==n||u||this.boundIndexBuffer!==i||this.boundVertexOffset!==a||this.boundDynamicVertexBuffer!==o||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||d?this.freshBind(t,n,r,i,a,o,s):(e.bindVertexArrayOES.set(this.vao),o&&o.bind(),i&&i.dynamicDraw&&i.bind(),s&&s.bind())},r.prototype.freshBind=function(e,t,n,r,i,a,o){var s,l=e.numAttributes,u=this.context,c=u.gl;if(u.extVertexArrayObject)this.vao&&this.destroy(),this.vao=u.extVertexArrayObject.createVertexArrayOES(),u.bindVertexArrayOES.set(this.vao),s=0,this.boundProgram=e,this.boundLayoutVertexBuffer=t,this.boundPaintVertexBuffers=n,this.boundIndexBuffer=r,this.boundVertexOffset=i,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=o;else{s=u.currentNumAttributes||0;for(var d=l;d<s;d++)c.disableVertexAttribArray(d)}t.enableAttributes(c,e);for(var f=0,h=n;f<h.length;f+=1)h[f].enableAttributes(c,e);a&&a.enableAttributes(c,e),o&&o.enableAttributes(c,e),t.bind(),t.setVertexAttribPointers(c,e,i);for(var p=0,m=n;p<m.length;p+=1){var g=m[p];g.bind(),g.setVertexAttribPointers(c,e,i)}a&&(a.bind(),a.setVertexAttribPointers(c,e,i)),r&&r.bind(),o&&(o.bind(),o.setVertexAttribPointers(c,e,i)),u.currentNumAttributes=l},r.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},t.exports=r},{}],96:[function(e,t,n){var r=e("../util/util");n.packUint8ToFloat=function(e,t){return e=r.clamp(Math.floor(e),0,255),t=r.clamp(Math.floor(t),0,255),256*e+t}},{"../util/util":275}],97:[function(e,t,n){var r={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},background:{fragmentSource:"uniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main() {\n    gl_FragColor = u_color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},backgroundPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\nuniform float u_opacity;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},clippingMask:{fragmentSource:"void main() {\n    gl_FragColor = vec4(1.0);\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n    #pragma mapbox: initialize mediump float radius\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 15.0 * extrude_scale_length;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance * collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    vec3 normal = a_normal_ed.xyz;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec4 a_normal_ed;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec3 normal = a_normal_ed.xyz;\n    float edgedistance = a_normal_ed.w;\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = normal.x == 1.0 && normal.y == 0.0 && normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},hillshadePrepare:{fragmentSource:"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform sampler2D u_image;\nvarying vec2 v_pos;\nuniform vec2 u_dimension;\nuniform float u_zoom;\n\nfloat getElevation(vec2 coord, float bias) {\n    // Convert encoded elevation value to meters\n    vec4 data = texture2D(u_image, coord) * 255.0;\n    return (data.r + data.g * 256.0 + data.b * 256.0 * 256.0) / 4.0;\n}\n\nvoid main() {\n    vec2 epsilon = 1.0 / u_dimension;\n\n    // queried pixels:\n    // +-----------+\n    // |   |   |   |\n    // | a | b | c |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | d | e | f |\n    // |   |   |   |\n    // +-----------+\n    // |   |   |   |\n    // | g | h | i |\n    // |   |   |   |\n    // +-----------+\n\n    float a = getElevation(v_pos + vec2(-epsilon.x, -epsilon.y), 0.0);\n    float b = getElevation(v_pos + vec2(0, -epsilon.y), 0.0);\n    float c = getElevation(v_pos + vec2(epsilon.x, -epsilon.y), 0.0);\n    float d = getElevation(v_pos + vec2(-epsilon.x, 0), 0.0);\n    float e = getElevation(v_pos, 0.0);\n    float f = getElevation(v_pos + vec2(epsilon.x, 0), 0.0);\n    float g = getElevation(v_pos + vec2(-epsilon.x, epsilon.y), 0.0);\n    float h = getElevation(v_pos + vec2(0, epsilon.y), 0.0);\n    float i = getElevation(v_pos + vec2(epsilon.x, epsilon.y), 0.0);\n\n    // here we divide the x and y slopes by 8 * pixel size\n    // where pixel size (aka meters/pixel) is:\n    // circumference of the world / (pixels per tile * number of tiles)\n    // which is equivalent to: 8 * 40075016.6855785 / (512 * pow(2, u_zoom))\n    // which can be reduced to: pow(2, 19.25619978527 - u_zoom)\n    // we want to vertically exaggerate the hillshading though, because otherwise\n    // it is barely noticeable at low zooms. to do this, we multiply this by some\n    // scale factor pow(2, (u_zoom - 14) * a) where a is an arbitrary value and 14 is the\n    // maxzoom of the tile source. here we use a=0.3 which works out to the\n    // expression below. see nickidlugash's awesome breakdown for more info\n    // https://github.com/mapbox/mapbox-gl-js/pull/5286#discussion_r148419556\n    float exaggeration = u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;\n\n    vec2 deriv = vec2(\n        (c + f + f + i) - (a + d + d + g),\n        (g + h + h + i) - (a + b + b + c)\n    ) /  pow(2.0, (u_zoom - 14.0) * exaggeration + 19.2562 - u_zoom);\n\n    gl_FragColor = clamp(vec4(\n        deriv.x / 2.0 + 0.5,\n        deriv.y / 2.0 + 0.5,\n        1.0,\n        1.0), 0.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (a_texture_pos / 8192.0) / 2.0 + 0.25;\n}\n"},hillshade:{fragmentSource:"uniform sampler2D u_image;\nvarying vec2 v_pos;\n\nuniform vec2 u_latrange;\nuniform vec2 u_light;\nuniform vec4 u_shadow;\nuniform vec4 u_highlight;\nuniform vec4 u_accent;\n\n#define PI 3.141592653589793\n\nvoid main() {\n    vec4 pixel = texture2D(u_image, v_pos);\n\n    vec2 deriv = ((pixel.rg * 2.0) - 1.0);\n\n    // We divide the slope by a scale factor based on the cosin of the pixel's approximate latitude\n    // to account for mercator projection distortion. see #4807 for details\n    float scaleFactor = cos(radians((u_latrange[0] - u_latrange[1]) * (1.0 - v_pos.y) + u_latrange[1]));\n    // We also multiply the slope by an arbitrary z-factor of 1.25\n    float slope = atan(1.25 * length(deriv) / scaleFactor);\n    float aspect = deriv.x != 0.0 ? atan(deriv.y, -deriv.x) : PI / 2.0 * (deriv.y > 0.0 ? 1.0 : -1.0);\n\n    float intensity = u_light.x;\n    // We add PI to make this property match the global light object, which adds PI/2 to the light's azimuthal\n    // position property to account for 0deg corresponding to north/the top of the viewport in the style spec\n    // and the original shader was written to accept (-illuminationDirection - 90) as the azimuthal.\n    float azimuth = u_light.y + PI;\n\n    // We scale the slope exponentially based on intensity, using a calculation similar to\n    // the exponential interpolation function in the style spec:\n    // https://github.com/mapbox/mapbox-gl-js/blob/master/src/style-spec/expression/definitions/interpolate.js#L217-L228\n    // so that higher intensity values create more opaque hillshading.\n    float base = 1.875 - intensity * 1.75;\n    float maxValue = 0.5 * PI;\n    float scaledSlope = intensity != 0.5 ? ((pow(base, slope) - 1.0) / (pow(base, maxValue) - 1.0)) * maxValue : slope;\n\n    // The accent color is calculated with the cosine of the slope while the shade color is calculated with the sine\n    // so that the accent color's rate of change eases in while the shade color's eases out.\n    float accent = cos(scaledSlope);\n    // We multiply both the accent and shade color by a clamped intensity value\n    // so that intensities >= 0.5 do not additionally affect the color values\n    // while intensity values < 0.5 make the overall color more transparent.\n    vec4 accent_color = (1.0 - accent) * u_accent * clamp(intensity * 2.0, 0.0, 1.0);\n    float shade = abs(mod((aspect + azimuth) / PI + 0.5, 2.0) - 1.0);\n    vec4 shade_color = mix(u_shadow, u_highlight, shade) * sin(scaledSlope) * clamp(intensity * 2.0, 0.0, 1.0);\n    gl_FragColor = accent_color * (1.0 - shade_color.a) + shade_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = a_texture_pos / 8192.0;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},i=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var a in r)!function(e){var t=r[e],n={};t.fragmentSource=t.fragmentSource.replace(i,function(e,t,r,i,a){return n[a]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nvarying "+r+" "+i+" "+a+";\n#else\nuniform "+r+" "+i+" u_"+a+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+a+"\n    "+r+" "+i+" "+a+" = u_"+a+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(i,function(e,t,r,i,a){var o="float"===i?"vec2":"vec4";return n[a]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+r+" "+o+" a_"+a+";\nvarying "+r+" "+i+" "+a+";\n#else\nuniform "+r+" "+i+" u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+a+" = unpack_mix_"+o+"(a_"+a+", a_"+a+"_t);\n#else\n    "+r+" "+i+" "+a+" = u_"+a+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+a+"\nuniform lowp float a_"+a+"_t;\nattribute "+r+" "+o+" a_"+a+";\n#else\nuniform "+r+" "+i+" u_"+a+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+a+"\n    "+r+" "+i+" "+a+" = unpack_mix_"+o+"(a_"+a+", a_"+a+"_t);\n#else\n    "+r+" "+i+" "+a+" = u_"+a+";\n#endif\n"})}(a);t.exports=r},{}],98:[function(e,t,n){var r=e("./image_source"),i=e("../util/window"),a=e("../data/raster_bounds_attributes"),o=e("../render/vertex_array_object"),s=e("../render/texture"),l=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.options=n,this.animate=void 0===n.animate||n.animate}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||i.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return void this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var e=this,t=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,t=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,t=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var n=this.map.painter.context,r=n.gl;this.boundsBuffer||(this.boundsBuffer=n.createVertexBuffer(this._boundsArray,a.members)),this.boundsVAO||(this.boundsVAO=new o),this.texture?t?this.texture.update(this.canvas):this._playing&&(this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,this.canvas)):(this.texture=new s(n,this.canvas,r.RGBA),this.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE));for(var i in e.tiles){var l=e.tiles[i];"loaded"!==l.state&&(l.state="loaded",l.texture=e.texture)}}},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var e=this,t=0,n=[e.canvas.width,e.canvas.height];t<n.length;t+=1){var r=n[t];if(isNaN(r)||r<=0)return!0}return!1},t}(r);t.exports=l},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/window":254,"./image_source":102}],99:[function(e,t,n){function r(e){var t=o.document.createElement("a");return t.href=e,t.href}var i=e("../util/evented"),a=e("../util/util"),o=e("../util/window"),s=e("../data/extent"),l=e("../util/ajax").ResourceType,u=e("../util/browser"),c=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=r,this.setEventedParent(i),this._data=n.data,this._options=a.extend({},n),this._collectResourceTiming=n.collectResourceTiming,this._resourceTiming=[],void 0!==n.maxzoom&&(this.maxzoom=n.maxzoom),n.type&&(this.type=n.type);var o=s/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:n.cluster||!1,geojsonVtOptions:{buffer:(void 0!==n.buffer?n.buffer:128)*o,tolerance:(void 0!==n.tolerance?n.tolerance:.375)*o,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==n.clusterMaxZoom?Math.min(n.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(n.clusterRadius||50)*o,log:!1}},n.workerOptions)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return void e.fire("error",{error:t});var n={dataType:"source",sourceDataType:"metadata"};e._collectResourceTiming&&e._resourceTiming&&e._resourceTiming.length>0&&(n.resourceTiming=e._resourceTiming,e._resourceTiming=[]),e.fire("data",n)})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setData=function(e){var t=this;return this._data=e,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)return t.fire("error",{error:e});var n={dataType:"source",sourceDataType:"content"};t._collectResourceTiming&&t._resourceTiming&&t._resourceTiming.length>0&&(n.resourceTiming=t._resourceTiming,t._resourceTiming=[]),t.fire("data",n)}),this},t.prototype._updateWorkerData=function(e){var t=this,n=a.extend({},this.workerOptions),i=this._data;"string"==typeof i?(n.request=this.map._transformRequest(r(i),l.Source),n.request.collectResourceTiming=this._collectResourceTiming):n.data=JSON.stringify(i),this.workerID=this.dispatcher.send(this.type+".loadData",n,function(n,r){t._loaded=!0,r&&r.resourceTiming&&r.resourceTiming[t.id]&&(t._resourceTiming=r.resourceTiming[t.id].slice(0)),e(n)},this.workerID)},t.prototype.loadTile=function(e,t){var n=this,r=void 0===e.workerID||"expired"===e.state?"loadTile":"reloadTile",i={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:e.tileID.overscaleFactor(),showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(r,i,function(i,a){return e.unloadVectorData(),e.aborted?t(null):i?t(i):(e.loadVectorData(a,n.map.painter,"reloadTile"===r),t(null))},this.workerID)},t.prototype.abortTile=function(e){e.aborted=!0},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},t.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(i);t.exports=c},{"../data/extent":53,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"../util/window":254}],100:[function(e,t,n){function r(e,t){var n=e.source,r=e.tileID.canonical;if(!this._geoJSONIndexes[n])return t(null,null);var i=this._geoJSONIndexes[n].getTile(r.z,r.x,r.y);if(!i)return t(null,null);var a=new s(i.features),o=l(a);0===o.byteOffset&&o.byteLength===o.buffer.byteLength||(o=new Uint8Array(o)),t(null,{vectorTile:a,rawData:o.buffer})}var i=e("../util/ajax"),a=e("../util/performance"),o=e("geojson-rewind"),s=e("./geojson_wrapper"),l=e("vt-pbf"),u=e("supercluster"),c=e("geojson-vt"),d=e("./vector_tile_worker_source"),f=function(e){function t(t,n,i){e.call(this,t,n,r),i&&(this.loadGeoJSON=i),this._geoJSONIndexes={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadData=function(e,t){var n=this;this.loadGeoJSON(e,function(r,i){if(r||!i)return t(r);if("object"!=typeof i)return t(new Error("Input data is not a valid GeoJSON object."));o(i,!0);try{n._geoJSONIndexes[e.source]=e.cluster?u(e.superclusterOptions).load(i.features):c(i,e.geojsonVtOptions)}catch(r){return t(r)}n.loaded[e.source]={};var s={};if(e.request&&e.request.collectResourceTiming){var l=a.getEntriesByName(e.request.url);l&&(s.resourceTiming={},s.resourceTiming[e.source]=JSON.parse(JSON.stringify(l)))}t(null,s)})},t.prototype.reloadTile=function(t,n){var r=this.loaded[t.source],i=t.uid;return r&&r[i]?e.prototype.reloadTile.call(this,t,n):this.loadTile(t,n)},t.prototype.loadGeoJSON=function(e,t){if(e.request)i.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(e,t){this._geoJSONIndexes[e.source]&&delete this._geoJSONIndexes[e.source],t()},t}(d);t.exports=f},{"../util/ajax":251,"../util/performance":268,"./geojson_wrapper":101,"./vector_tile_worker_source":116,"geojson-rewind":15,"geojson-vt":19,supercluster:32,"vt-pbf":34}],101:[function(e,t,n){var r=e("@mapbox/point-geometry"),i=e("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,a=e("../data/extent"),o=function(e){this._feature=e,this.extent=a,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};o.prototype.loadGeometry=function(){var e=this;if(1===this._feature.type){for(var t=[],n=0,i=e._feature.geometry;n<i.length;n+=1){var a=i[n];t.push([new r(a[0],a[1])])}return t}for(var o=[],s=0,l=e._feature.geometry;s<l.length;s+=1){for(var u=l[s],c=[],d=0,f=u;d<f.length;d+=1){var h=f[d];c.push(new r(h[0],h[1]))}o.push(c)}return o},o.prototype.toGeoJSON=function(e,t,n){return i.call(this,e,t,n)};var s=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a,this.length=e.length,this._features=e};s.prototype.feature=function(e){return new o(this._features[e])},t.exports=s},{"../data/extent":53,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8}],102:[function(e,t,n){var r=e("../util/util"),i=e("./tile_id"),a=i.CanonicalTileID,o=e("../geo/lng_lat"),s=e("@mapbox/point-geometry"),l=e("../util/evented"),u=e("../util/ajax"),c=e("../util/browser"),d=e("../data/extent"),f=e("../data/array_types"),h=f.RasterBoundsArray,p=e("../data/raster_bounds_attributes"),m=e("../render/vertex_array_object"),g=e("../render/texture"),y=function(e){function t(t,n,r,i){e.call(this),this.id=t,this.dispatcher=r,this.coordinates=n.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(i),this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,u.getImage(this.map._transformRequest(this.url,u.ResourceType.Image),function(t,n){t?e.fire("error",{error:t}):n&&(e.image=c.getImageData(n),e._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,n=e.map(function(e){return t.transform.locationCoordinate(o.convert(e)).zoomTo(0)}),i=this.centerCoord=r.getCoordinatesCenter(n);i.column=Math.floor(i.column),i.row=Math.floor(i.row),this.tileID=new a(i.zoom,i.column,i.row),this.minzoom=this.maxzoom=i.zoom;var l=n.map(function(e){var t=e.zoomTo(i.zoom);return new s(Math.round((t.column-i.column)*d),Math.round((t.row-i.row)*d))});return this._boundsArray=new h,this._boundsArray.emplaceBack(l[0].x,l[0].y,0,0),this._boundsArray.emplaceBack(l[1].x,l[1].y,d,0),this._boundsArray.emplaceBack(l[3].x,l[3].y,0,d),this._boundsArray.emplaceBack(l[2].x,l[2].y,d,d),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype.prepare=function(){var e=this;if(0!==Object.keys(this.tiles).length&&this.image){var t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,p.members)),this.boundsVAO||(this.boundsVAO=new m),this.texture||(this.texture=new g(t,this.image,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(var r in e.tiles){var i=e.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=e.texture)}}},t.prototype.loadTile=function(e,t){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(l);t.exports=y},{"../data/array_types":39,"../data/extent":53,"../data/raster_bounds_attributes":59,"../geo/lng_lat":62,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/util":275,"./tile_id":114,"@mapbox/point-geometry":4}],103:[function(e,t,n){var r=e("../util/util"),i=e("../util/ajax"),a=e("../util/browser"),o=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t,n){var s=function(e,t){if(e)return n(e);if(t){var i=r.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(i.vectorLayers=t.vector_layers,i.vectorLayerIds=i.vectorLayers.map(function(e){return e.id})),n(null,i)}};e.url?i.getJSON(t(o(e.url),i.ResourceType.Source),s):a.frame(function(){return s(null,e)})}},{"../util/ajax":251,"../util/browser":252,"../util/mapbox":267,"../util/util":275}],104:[function(e,t,n){var r=e("../data/extent");t.exports=function(e,t,n){return t*(r/(e.tileSize*Math.pow(2,n-e.tileID.overscaledZ)))}},{"../data/extent":53}],105:[function(e,t,n){function r(e,t){var n=e.tileID,r=t.tileID;return n.overscaledZ-r.overscaledZ||n.canonical.y-r.canonical.y||n.wrap-r.wrap||n.canonical.x-r.canonical.x}function i(e){for(var t={},n={},r=0,i=e;r<i.length;r+=1){var a=i[r],o=a.queryResults,s=a.wrappedTileID,l=n[s]=n[s]||{};for(var u in o)for(var c=o[u],d=l[u]=l[u]||{},f=t[u]=t[u]||[],h=0,p=c;h<p.length;h+=1){var m=p[h];d[m.featureIndex]||(d[m.featureIndex]=!0,f.push(m.feature))}}return t}n.rendered=function(e,t,n,a,o,s,l){var u=e.tilesIn(n);u.sort(r);for(var c=[],d=0,f=u;d<f.length;d+=1){var h=f[d];c.push({wrappedTileID:h.tileID.wrapped().key,queryResults:h.tile.queryRenderedFeatures(t,h.queryGeometry,h.scale,a,s,e.id,l)})}return i(c)},n.source=function(e,t){for(var n=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),r=[],i={},a=0;a<n.length;a++){var o=n[a],s=o.tileID.canonical.key;i[s]||(i[s]=!0,o.querySourceFeatures(r,t))}return r}},{}],106:[function(e,t,n){var r=e("../util/ajax"),i=e("../util/util"),a=(e("../util/evented"),e("../util/mapbox").normalizeTileURL),o=e("../util/browser"),s=e("./tile_id"),l=s.OverscaledTileID,u=e("./raster_tile_source"),c=function(e){function t(t,n,r,a){e.call(this,t,n,r,a),this.type="raster-dem",this.maxzoom=22,this._options=i.extend({},n)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds}},t.prototype.loadTile=function(e,t){function n(n,r){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(n)e.state="errored",t(n);else if(r){this.map._refreshExpiredTiles&&e.setExpiryData(r),delete r.cacheControl,delete r.expires;var a=o.getImageData(r),s={uid:e.uid,coord:e.tileID,source:this.id,rawImageData:a};e.workerID&&"expired"!==e.state||(e.workerID=this.dispatcher.send("loadDEMTile",s,i.bind(this)))}}function i(n,r){n&&(e.state="errored",t(n)),r&&(e.dem=r,e.needsHillshadePrepare=!0,e.state="loaded",t(null))}var s=a(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=r.getImage(this.map._transformRequest(s,r.ResourceType.Tile),n.bind(this)),e.neighboringTiles=this._getNeighboringTiles(e.tileID)},t.prototype._getNeighboringTiles=function(e){var t=e.canonical,n=Math.pow(2,t.z),r=(t.x-1+n)%n,i=0===t.x?e.wrap-1:e.wrap,a=(t.x+1+n)%n,o=t.x+1===n?e.wrap+1:e.wrap,s={};return s[new l(e.overscaledZ,i,t.z,r,t.y).key]={backfilled:!1},s[new l(e.overscaledZ,o,t.z,a,t.y).key]={backfilled:!1},t.y>0&&(s[new l(e.overscaledZ,i,t.z,r,t.y-1).key]={backfilled:!1},s[new l(e.overscaledZ,e.wrap,t.z,t.x,t.y-1).key]={backfilled:!1},s[new l(e.overscaledZ,o,t.z,a,t.y-1).key]={backfilled:!1}),t.y+1<n&&(s[new l(e.overscaledZ,i,t.z,r,t.y+1).key]={backfilled:!1},s[new l(e.overscaledZ,e.wrap,t.z,t.x,t.y+1).key]={backfilled:!1},s[new l(e.overscaledZ,o,t.z,a,t.y+1).key]={backfilled:!1}),s},t.prototype.unloadTile=function(e){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",this.dispatcher.send("removeDEMTile",{uid:e.uid,source:this.id},void 0,e.workerID)},t}(u);t.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./raster_tile_source":108,"./tile_id":114}],107:[function(e,t,n){var r=e("../data/dem_data"),i=r.DEMData,a=function(){this.loading={},this.loaded={}};a.prototype.loadTile=function(e,t){var n=e.source,r=e.uid;this.loading[n]||(this.loading[n]={});var a=new i(r);this.loading[n][r]=a,a.loadFromImage(e.rawImageData),delete this.loading[n][r],this.loaded[n]=this.loaded[n]||{},this.loaded[n][r]=a,t(null,a)},a.prototype.removeTile=function(e){var t=this.loaded[e.source],n=e.uid;t&&t[n]&&delete t[n]},t.exports=a},{"../data/dem_data":52}],108:[function(e,t,n){var r=e("../util/util"),i=e("../util/ajax"),a=e("../util/evented"),o=e("./load_tilejson"),s=e("../util/mapbox").normalizeTileURL,l=e("./tile_bounds"),u=e("../render/texture"),c=function(e){function t(t,n,i,a){e.call(this),this.id=t,this.dispatcher=i,this.setEventedParent(a),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=r.extend({},n),r.extend(this,r.pick(n,["url","scheme","tileSize"]))}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),o(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(r.extend(e,n),n.bounds&&(e.tileBounds=new l(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return r.extend({},this._options)},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},t.prototype.loadTile=function(e,t){var n=this,r=s(e.tileID.canonical.url(this.tiles,this.scheme),this.url,this.tileSize);e.request=i.getImage(this.map._transformRequest(r,i.ResourceType.Tile),function(r,i){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(r)e.state="errored",t(r);else if(i){n.map._refreshExpiredTiles&&e.setExpiryData(i),delete i.cacheControl,delete i.expires;var a=n.map.painter.context,o=a.gl;e.texture=n.map.painter.getTileTexture(i.width),e.texture?(e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,i)):(e.texture=new u(a,i,o.RGBA),e.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE,o.LINEAR_MIPMAP_NEAREST),a.extTextureFilterAnisotropic&&o.texParameterf(o.TEXTURE_2D,a.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,a.extTextureFilterAnisotropicMax)),o.generateMipmap(o.TEXTURE_2D),e.state="loaded",t(null)}})},t.prototype.abortTile=function(e,t){e.request&&(e.request.abort(),delete e.request),t()},t.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},t.prototype.hasTransition=function(){return!1},t}(a);t.exports=c},{"../render/texture":93,"../util/ajax":251,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],109:[function(e,t,n){var r=e("../util/ajax"),i=e("../util/evented"),a=e("../util/window"),o=!1,s=null;t.exports.evented=new i,t.exports.registerForPluginAvailability=function(e){return s?e({pluginBlobURL:s,errorCallback:t.exports.errorCallback}):t.exports.evented.once("pluginAvailable",e),e},t.exports.createBlobURL=function(e){return a.URL.createObjectURL(new a.Blob([e.data],{type:"text/javascript"}))},t.exports.clearRTLTextPlugin=function(){o=!1,s=null},t.exports.setRTLTextPlugin=function(e,n){if(o)throw new Error("setRTLTextPlugin cannot be called multiple times.");o=!0,t.exports.errorCallback=n,r.getArrayBuffer({url:e},function(e,r){e?n(e):r&&(s=t.exports.createBlobURL(r),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:n}))})},t.exports.applyArabicShaping=null,t.exports.processBidirectionalText=null},{"../util/ajax":251,"../util/evented":260,"../util/window":254}],110:[function(e,t,n){var r=e("../util/util"),i={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),"raster-dem":e("../source/raster_dem_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source"),canvas:e("../source/canvas_source")};n.create=function(e,t,n,a){var o=new i[t.type](e,t,n,a);if(o.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+o.id);return r.bindAll(["load","abort","unload","serialize","prepare"],o),o},n.getType=function(e){return i[e]},n.setType=function(e,t){i[e]=t}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_dem_tile_source":106,"../source/raster_tile_source":108,"../source/vector_tile_source":115,"../source/video_source":117,"../util/util":275}],111:[function(e,t,n){function r(e,t){var n=t.zoomTo(e.canonical.z);return new f((n.column-(e.canonical.x+e.wrap*Math.pow(2,e.canonical.z)))*d,(n.row-e.canonical.y)*d)}function i(e){return"raster"===e||"image"===e||"video"===e}var a=e("./source").create,o=e("./tile"),s=e("../util/evented"),l=e("../util/lru_cache"),u=e("../geo/coordinate"),c=e("../util/util"),d=e("../data/extent"),f=(e("../gl/context"),e("@mapbox/point-geometry")),h=e("../util/browser"),p=e("./tile_id"),m=p.OverscaledTileID,g=function(e){function t(t,n,r){var i=this;e.call(this),this.id=t,this.dispatcher=r,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(i._sourceLoaded=!0),i._sourceLoaded&&!i._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(i.reload(),i.transform&&i.update(i.transform))}),this.on("error",function(){i._sourceErrored=!0}),this._source=a(t,n,r,this),this._tiles={},this._cache=new l(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},t.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},t.prototype.loaded=function(){var e=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in e._tiles){var n=e._tiles[t];if("loaded"!==n.state&&"errored"!==n.state)return!1}return!0},t.prototype.getSource=function(){return this._source},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},t.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},t.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},t.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(e){var t=this;this._source.prepare&&this._source.prepare();for(var n in t._tiles)t._tiles[n].upload(e)},t.prototype.getIds=function(){var e=this,t=function(t,n){var r=e._tiles[t].tileID,i=e._tiles[n].tileID,a=new f(r.canonical.x,r.canonical.y).rotate(e.transform.angle),o=new f(i.canonical.x,i.canonical.y).rotate(e.transform.angle);return r.overscaledZ-i.overscaledZ||o.y-a.y||o.x-a.x};return Object.keys(this._tiles).map(Number).sort(t)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0,{});return!!t&&this._isIdRenderable(t.tileID.key)},t.prototype._isIdRenderable=function(e){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]},t.prototype.reload=function(){var e=this;if(this._paused)return void(this._shouldReloadOnResume=!0);this._resetCache();for(var t in e._tiles)e._reloadTile(t,"reloading")},t.prototype._reloadTile=function(e,t){var n=this._tiles[e];n&&("loading"!==n.state&&(n.state=t),this._loadTile(n,this._tileLoaded.bind(this,n,e,t)))},t.prototype._tileLoaded=function(e,t,n,r){if(r)return e.state="errored",void(404!==r.status?this._source.fire("error",{tile:e,error:r}):this.update(this.transform));e.timeAdded=h.now(),"expired"===n&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),"raster-dem"===this.getSource().type&&e.dem&&this._backfillDEM(e),this._source.fire("data",{dataType:"source",tile:e,coord:e.tileID}),this.map&&(this.map.painter.tileExtentVAO.vao=null)},t.prototype._backfillDEM=function(e){function t(e,t){e.needsHillshadePrepare=!0;var n=t.tileID.canonical.x-e.tileID.canonical.x,r=t.tileID.canonical.y-e.tileID.canonical.y,i=Math.pow(2,e.tileID.canonical.z),a=t.tileID.key;0===n&&0===r||Math.abs(r)>1||(Math.abs(n)>1&&(1===Math.abs(n+i)?n+=i:1===Math.abs(n-i)&&(n-=i)),t.dem&&e.dem&&(e.dem.backfillBorder(t.dem,n,r),e.neighboringTiles&&e.neighboringTiles[a]&&(e.neighboringTiles[a].backfilled=!0)))}for(var n=this,r=this.getRenderableIds(),i=0;i<r.length;i++){var a=r[i];if(e.neighboringTiles&&e.neighboringTiles[a]){var o=n.getTileByID(a);t(e,o),t(o,e)}}},t.prototype.getTile=function(e){return this.getTileByID(e.key)},t.prototype.getTileByID=function(e){return this._tiles[e]},t.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},t.prototype._findLoadedChildren=function(e,t,n){var r=this,i=!1;for(var a in r._tiles){var o=r._tiles[a];if(!(n[a]||!o.hasData()||o.tileID.overscaledZ<=e.overscaledZ||o.tileID.overscaledZ>t)){var s=Math.pow(2,o.tileID.canonical.z-e.canonical.z);if(Math.floor(o.tileID.canonical.x/s)===e.canonical.x&&Math.floor(o.tileID.canonical.y/s)===e.canonical.y)for(n[a]=o.tileID,i=!0;o&&o.tileID.overscaledZ-1>e.overscaledZ;){var l=o.tileID.scaledTo(o.tileID.overscaledZ-1);if(!l)break;(o=r._tiles[l.key])&&o.hasData()&&(delete n[a],n[l.key]=l)}}}return i},t.prototype.findLoadedParent=function(e,t,n){for(var r=this,i=e.overscaledZ-1;i>=t;i--){var a=e.scaledTo(i);if(!a)return;var o=String(a.key),s=r._tiles[o];if(s&&s.hasData())return n[o]=a,s;if(r._cache.has(o))return n[o]=a,r._cache.get(o)}},t.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,n=Math.ceil(e.height/this._source.tileSize)+1,r=t*n,i=Math.floor(5*r),a="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,i):i;this._cache.setMaxSize(a)},t.prototype.update=function(e){var n=this;if(this.transform=e,this._sourceLoaded&&!this._paused){this.updateCacheSize(e),this._coveredTiles={};var r;this.used?this._source.tileID?r=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(e){return new m(e.canonical.z,e.wrap,e.canonical.z,e.canonical.x,e.canonical.y)}):(r=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(r=r.filter(function(e){return n._source.hasTile(e)}))):r=[];var a=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),o=Math.max(a-t.maxOverzooming,this._source.minzoom),s=Math.max(a+t.maxUnderzooming,this._source.minzoom),l=this._updateRetainedTiles(r,a),u={};if(i(this._source.type))for(var d=Object.keys(l),f=0;f<d.length;f++){var p=d[f],g=l[p],y=n._tiles[p];if(y&&(void 0===y.fadeEndTime||y.fadeEndTime>=h.now())){n._findLoadedChildren(g,s,l)&&(l[p]=g);var v=n.findLoadedParent(g,o,u);v&&n._addTile(v.tileID)}}var _;for(_ in u)l[_]||(n._coveredTiles[_]=!0);for(_ in u)l[_]=u[_];for(var b=c.keysDifference(this._tiles,l),x=0;x<b.length;x++)n._removeTile(b[x])}},t.prototype._updateRetainedTiles=function(e,n){for(var r=this,i={},a={},o=Math.max(n-t.maxOverzooming,this._source.minzoom),s=Math.max(n+t.maxUnderzooming,this._source.minzoom),l=0;l<e.length;l++){var u=e[l],c=r._addTile(u),d=!1;if(c.hasData())i[u.key]=u;else{d=c.wasRequested(),i[u.key]=u;var f=!0;if(n+1>r._source.maxzoom){var h=u.children(r._source.maxzoom)[0],p=r.getTile(h);p&&p.hasData()?i[h.key]=h:f=!1}else{r._findLoadedChildren(u,s,i);for(var m=u.children(r._source.maxzoom),g=0;g<m.length;g++)if(!i[m[g].key]){f=!1;break}}if(!f)for(var y=u.overscaledZ-1;y>=o;--y){var v=u.scaledTo(y);if(a[v.key])break;if(a[v.key]=!0,c=r.getTile(v),!c&&d&&(c=r._addTile(v)),c&&(i[v.key]=v,d=c.wasRequested(),c.hasData()))break}}}return i},t.prototype._addTile=function(e){var t=this._tiles[e.key];if(t)return t;(t=this._cache.getAndRemove(e.key))&&this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,t));var n=Boolean(t);return n||(t=new o(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(t,this._tileLoaded.bind(this,t,e.key,t.state))),t?(t.uses++,this._tiles[e.key]=t,n||this._source.fire("dataloading",{tile:t,coord:t.tileID,dataType:"source"}),t):null},t.prototype._setTileReloadTimer=function(e,t){var n=this;e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);var r=t.getExpiryTimeout();r&&(this._timers[e]=setTimeout(function(){n._reloadTile(e,"expired"),delete n._timers[e]},r))},t.prototype._setCacheInvalidationTimer=function(e,t){var n=this;e in this._cacheTimers&&(clearTimeout(this._cacheTimers[e]),delete this._cacheTimers[e]);var r=t.getExpiryTimeout();r&&(this._cacheTimers[e]=setTimeout(function(){n._cache.remove(e),delete n._cacheTimers[e]},r))},t.prototype._removeTile=function(e){var t=this._tiles[e];if(t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),!(t.uses>0)))if(t.hasData()){t.tileID=t.tileID.wrapped();var n=t.tileID.key;this._cache.add(n,t),this._setCacheInvalidationTimer(n,t)}else t.aborted=!0,this._abortTile(t),this._unloadTile(t)},t.prototype.clearTiles=function(){var e=this;this._shouldReloadOnResume=!1,this._paused=!1;for(var t in e._tiles)e._removeTile(t);this._resetCache()},t.prototype._resetCache=function(){var e=this;for(var t in e._cacheTimers)clearTimeout(e._cacheTimers[t]);this._cacheTimers={},this._cache.reset()},t.prototype.tilesIn=function(e){for(var t=this,n=[],i=this.getIds(),a=1/0,o=1/0,s=-1/0,l=-1/0,c=e[0].zoom,f=0;f<e.length;f++){var h=e[f];a=Math.min(a,h.column),o=Math.min(o,h.row),s=Math.max(s,h.column),l=Math.max(l,h.row)}for(var p=0;p<i.length;p++){var m=t._tiles[i[p]],g=m.tileID,y=[r(g,new u(a,o,c)),r(g,new u(s,l,c))];if(y[0].x<d&&y[0].y<d&&y[1].x>=0&&y[1].y>=0){for(var v=[],_=0;_<e.length;_++)v.push(r(g,e[_]));n.push({tile:m,tileID:g,queryGeometry:[v],scale:Math.pow(2,t.transform.zoom-m.tileID.overscaledZ)})}}return n},t.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(function(t){return e._tiles[t].tileID}),n=0,r=t;n<r.length;n+=1){var i=r[n];i.posMatrix=e.transform.calculatePosMatrix(i.toUnwrapped())}return t},t.prototype.hasTransition=function(){var e=this;if(this._source.hasTransition())return!0;if(i(this._source.type))for(var t in e._tiles){var n=e._tiles[t];if(void 0!==n.fadeEndTime&&n.fadeEndTime>=h.now())return!0}return!1},t}(s);g.maxOverzooming=10,g.maxUnderzooming=3,t.exports=g},{"../data/extent":53,"../geo/coordinate":61,"../gl/context":66,"../util/browser":252,"../util/evented":260,"../util/lru_cache":266,"../util/util":275,"./source":110,"./tile":112,"./tile_id":114,"@mapbox/point-geometry":4}],112:[function(e,t,n){var r=e("../util/util"),i=e("../data/bucket").deserialize,a=(e("../data/feature_index"),e("@mapbox/vector-tile")),o=e("pbf"),s=e("../util/vectortile_to_geojson"),l=e("../style-spec/feature_filter"),u=(e("../symbol/collision_index"),e("../data/bucket/symbol_bucket")),c=e("../data/array_types"),d=c.RasterBoundsArray,f=c.CollisionBoxArray,h=e("../data/raster_bounds_attributes"),p=e("../data/extent"),m=e("@mapbox/point-geometry"),g=e("../render/texture"),y=e("../data/segment"),v=y.SegmentVector,_=e("../data/index_array_type"),b=_.TriangleIndexArray,x=e("../util/browser"),w=function(e,t){this.tileID=e,this.uid=r.uniqueId(),this.uses=0,this.tileSize=t,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};w.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<x.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},w.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},w.prototype.loadVectorData=function(e,t,n){var r=this;if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!e)return void(this.collisionBoxArray=new f);if(e.rawTileData&&(this.rawTileData=e.rawTileData),this.collisionBoxArray=e.collisionBoxArray,this.featureIndex=e.featureIndex,this.featureIndex.rawTileData=this.rawTileData,this.buckets=i(e.buckets,t.style),n)for(var a in r.buckets){var o=r.buckets[a];o instanceof u&&(o.justReloaded=!0)}e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)},w.prototype.unloadVectorData=function(){var e=this;for(var t in e.buckets)e.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},w.prototype.unloadDEMData=function(){this.dem=null,this.neighboringTiles=null,this.state="unloaded"},w.prototype.getBucket=function(e){return this.buckets[e.id]},w.prototype.upload=function(e){var t=this;for(var n in t.buckets){var r=t.buckets[n];r.uploaded||(r.upload(e),r.uploaded=!0)}var i=e.gl;this.iconAtlasImage&&(this.iconAtlasTexture=new g(e,this.iconAtlasImage,i.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new g(e,this.glyphAtlasImage,i.ALPHA),this.glyphAtlasImage=null)},w.prototype.queryRenderedFeatures=function(e,t,n,r,i,a,o){var s=this;if(!this.featureIndex||!this.collisionBoxArray)return{};var l=0,c={};for(var d in e){var f=s.getBucket(e[d]);f&&(l=Math.max(l,e[d].queryRadius(f)),f instanceof u&&void 0!==f.bucketInstanceId&&(c[f.bucketInstanceId]=!0))}return this.featureIndex.query({queryGeometry:t,scale:n,tileSize:this.tileSize,bearing:i,params:r,additionalRadius:l,collisionBoxArray:this.collisionBoxArray,sourceID:a,collisionIndex:o,bucketInstanceIds:c},e)},w.prototype.querySourceFeatures=function(e,t){var n=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new a.VectorTile(new o(this.rawTileData)).layers);var r=t?t.sourceLayer:"",i=this.vtLayers._geojsonTileLayer||this.vtLayers[r];if(i)for(var u=l(t&&t.filter),c={z:this.tileID.overscaledZ,x:this.tileID.canonical.x,y:this.tileID.canonical.y},d=0;d<i.length;d++){var f=i.feature(d);if(u({zoom:n.tileID.overscaledZ},f)){var h=new s(f,c.z,c.x,c.y);h.tile=c,e.push(h)}}}},w.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},w.prototype.setMask=function(e,t){var n=this;if(!r.deepEqual(this.mask,e)&&(this.mask=e,this.clearMask(),!r.deepEqual(e,{0:!0}))){var i=new d,a=new b;this.segments=new v,this.segments.prepareSegment(0,i,a);for(var o=Object.keys(e),s=0;s<o.length;s++){var l=e[o[s]],u=p>>l.z,c=new m(l.x*u,l.y*u),f=new m(c.x+u,c.y+u),g=n.segments.prepareSegment(4,i,a);i.emplaceBack(c.x,c.y,c.x,c.y),i.emplaceBack(f.x,c.y,f.x,c.y),i.emplaceBack(c.x,f.y,c.x,f.y),i.emplaceBack(f.x,f.y,f.x,f.y);var y=g.vertexLength;a.emplaceBack(y,y+1,y+2),a.emplaceBack(y+1,y+2,y+3),g.vertexLength+=4,g.primitiveLength+=2}this.maskedBoundsBuffer=t.createVertexBuffer(i,h.members),this.maskedIndexBuffer=t.createIndexBuffer(a)}},w.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},w.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var n=r.parseCacheControl(e.cacheControl);n["max-age"]&&(this.expirationTime=Date.now()+1e3*n["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var i=Date.now(),a=!1;if(this.expirationTime>i)a=!1;else if(t)if(this.expirationTime<t)a=!0;else{var o=this.expirationTime-t;o?this.expirationTime=i+Math.max(o,3e4):a=!0}else a=!0;a?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},w.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},t.exports=w},{"../data/array_types":39,"../data/bucket":40,"../data/bucket/symbol_bucket":51,"../data/extent":53,"../data/feature_index":54,"../data/index_array_type":55,"../data/raster_bounds_attributes":59,"../data/segment":60,"../render/texture":93,"../style-spec/feature_filter":148,"../symbol/collision_index":217,"../util/browser":252,"../util/util":275,"../util/vectortile_to_geojson":276,"@mapbox/point-geometry":4,"@mapbox/vector-tile":8,pbf:30}],113:[function(e,t,n){var r=e("../geo/lng_lat_bounds"),i=e("../util/util").clamp,a=function(e,t,n){this.bounds=r.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=n||24};a.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},a.prototype.contains=function(e){var t={minX:Math.floor(this.lngX(this.bounds.getWest(),e.z)),minY:Math.floor(this.latY(this.bounds.getNorth(),e.z)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),e.z)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),e.z))};return e.x>=t.minX&&e.x<t.maxX&&e.y>=t.minY&&e.y<t.maxY},a.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},a.prototype.latY=function(e,t){var n=i(Math.sin(Math.PI/180*e),-.9999,.9999),r=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+n)/(1-n))*-r},t.exports=a},{"../geo/lng_lat_bounds":63,"../util/util":275}],114:[function(e,t,n){function r(e,t,n,r){(e*=2)<0&&(e=-1*e-1);var i=1<<t;return 32*(i*i*e+i*r+n)+t}function i(e,t,n){for(var r,i="",a=e;a>0;a--)r=1<<a-1,i+=(t&r?1:0)+(n&r?2:0);return i}var a=e("@mapbox/whoots-js"),o=e("../util/web_worker_transfer"),s=o.register,l=e("../geo/coordinate"),u=function(e,t,n){this.z=e,this.x=t,this.y=n,this.key=r(0,e,t,n)};u.prototype.equals=function(e){return this.z===e.z&&this.x===e.x&&this.y===e.y},u.prototype.url=function(e,t){var n=a.getTileBBox(this.x,this.y,this.z),r=i(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===t?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",r).replace("{bbox-epsg-3857}",n)};var c=function(e,t){this.wrap=e,this.canonical=t,this.key=r(e,t.z,t.x,t.y)},d=function(e,t,n,i,a){this.overscaledZ=e,this.wrap=t,this.canonical=new u(n,+i,+a),this.key=r(t,e,i,a)};d.prototype.scaledTo=function(e){var t=this.canonical.z-e;return e>this.canonical.z?new d(e,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new d(e,this.wrap,e,this.canonical.x>>t,this.canonical.y>>t)},d.prototype.isChildOf=function(e){var t=this.canonical.z-e.canonical.z;return 0===e.overscaledZ||e.overscaledZ<this.overscaledZ&&e.canonical.x===this.canonical.x>>t&&e.canonical.y===this.canonical.y>>t},d.prototype.children=function(e){if(this.overscaledZ>=e)return[new d(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var t=this.canonical.z+1,n=2*this.canonical.x,r=2*this.canonical.y;return[new d(t,this.wrap,t,n,r),new d(t,this.wrap,t,n+1,r),new d(t,this.wrap,t,n,r+1),new d(t,this.wrap,t,n+1,r+1)]},d.prototype.isLessThan=function(e){return this.wrap<e.wrap||!(this.wrap>e.wrap)&&(this.overscaledZ<e.overscaledZ||!(this.overscaledZ>e.overscaledZ)&&(this.canonical.x<e.canonical.x||!(this.canonical.x>e.canonical.x)&&this.canonical.y<e.canonical.y))},d.prototype.wrapped=function(){return new d(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},d.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},d.prototype.toUnwrapped=function(){return new c(this.wrap,this.canonical)},d.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},d.prototype.toCoordinate=function(){return new l(this.canonical.x+Math.pow(2,this.wrap),this.canonical.y,this.canonical.z)},s("CanonicalTileID",u),s("OverscaledTileID",d,{omit:["posMatrix"]}),t.exports={CanonicalTileID:u,OverscaledTileID:d,UnwrappedTileID:c}},{"../geo/coordinate":61,"../util/web_worker_transfer":278,"@mapbox/whoots-js":12}],115:[function(e,t,n){var r=e("../util/evented"),i=e("../util/util"),a=e("./load_tilejson"),o=e("../util/mapbox").normalizeTileURL,s=e("./tile_bounds"),l=e("../util/ajax").ResourceType,u=e("../util/browser"),c=function(e){function t(t,n,r,a){if(e.call(this),this.id=t,this.dispatcher=r,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,i.extend(this,i.pick(n,["url","scheme","tileSize"])),this._options=i.extend({type:"vector"},n),this._collectResourceTiming=n.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(a)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,n){t?e.fire("error",t):n&&(i.extend(e,n),n.bounds&&(e.tileBounds=new s(n.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return i.extend({},this._options)},t.prototype.loadTile=function(e,t){function n(n,r){return e.aborted?t(null):n?t(n):(r&&r.resourceTiming&&(e.resourceTiming=r.resourceTiming),this.map._refreshExpiredTiles&&e.setExpiryData(r),e.loadVectorData(r,this.map.painter),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var r=e.tileID.overscaleFactor(),i=o(e.tileID.canonical.url(this.tiles,this.scheme),this.url),a={request:this.map._transformRequest(i,l.Tile),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*r,type:this.type,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:r,showCollisionBoxes:this.map.showCollisionBoxes};a.request.collectResourceTiming=this._collectResourceTiming,void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",a,n.bind(this)):"loading"===e.state?e.reloadCallback=t:this.dispatcher.send("reloadTile",a,n.bind(this),e.workerID)},t.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.hasTransition=function(){return!1},t}(r);t.exports=c},{"../util/ajax":251,"../util/browser":252,"../util/evented":260,"../util/mapbox":267,"../util/util":275,"./load_tilejson":103,"./tile_bounds":113}],116:[function(e,t,n){function r(e,t){var n=i.getArrayBuffer(e.request,function(e,n){e?t(e):n&&t(null,{vectorTile:new a.VectorTile(new o(n.data)),rawData:n.data,cacheControl:n.cacheControl,expires:n.expires})});return function(){n.abort(),t()}}var i=e("../util/ajax"),a=e("@mapbox/vector-tile"),o=e("pbf"),s=e("./worker_tile"),l=e("../util/util"),u=e("../util/performance"),c=function(e,t,n){this.actor=e,this.layerIndex=t,this.loadVectorData=n||r,this.loading={},this.loaded={}};c.prototype.loadTile=function(e,t){var n=this,r=e.source,i=e.uid;this.loading[r]||(this.loading[r]={});var a=this.loading[r][i]=new s(e);a.abort=this.loadVectorData(e,function(o,s){if(delete n.loading[r][i],o||!s)return t(o);var c=s.rawData,d={};s.expires&&(d.expires=s.expires),s.cacheControl&&(d.cacheControl=s.cacheControl);var f={};if(e.request&&e.request.collectResourceTiming){var h=u.getEntriesByName(e.request.url);h&&(f.resourceTiming=JSON.parse(JSON.stringify(h)))}a.vectorTile=s.vectorTile,a.parse(s.vectorTile,n.layerIndex,n.actor,function(e,n){if(e||!n)return t(e);t(null,l.extend({rawTileData:c.slice(0)},n,d,f))}),n.loaded[r]=n.loaded[r]||{},n.loaded[r][i]=a})},c.prototype.reloadTile=function(e,t){function n(e,n){if(this.reloadCallback){var r=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,a.layerIndex,a.actor,r)}t(e,n)}var r=this.loaded[e.source],i=e.uid,a=this;if(r&&r[i]){var o=r[i];o.showCollisionBoxes=e.showCollisionBoxes,"parsing"===o.status?o.reloadCallback=t:"done"===o.status&&o.parse(o.vectorTile,this.layerIndex,this.actor,n.bind(o))}},c.prototype.abortTile=function(e,t){var n=this.loading[e.source],r=e.uid;n&&n[r]&&n[r].abort&&(n[r].abort(),delete n[r]),t()},c.prototype.removeTile=function(e,t){var n=this.loaded[e.source],r=e.uid;n&&n[r]&&delete n[r],t()},t.exports=c},{"../util/ajax":251,"../util/performance":268,"../util/util":275,"./worker_tile":119,"@mapbox/vector-tile":8,pbf:30}],117:[function(e,t,n){var r=e("../util/ajax"),i=e("./image_source"),a=e("../data/raster_bounds_attributes"),o=e("../render/vertex_array_object"),s=e("../render/texture"),l=function(e){function t(t,n,r,i){e.call(this,t,n,r,i),this.roundZoom=!0,this.type="video",this.options=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this,t=this.options;this.urls=t.urls,r.getVideo(t.urls,function(t,n){t?e.fire("error",{error:t}):n&&(e.video=n,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){var e=this;if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var t=this.map.painter.context,n=t.gl;this.boundsBuffer||(this.boundsBuffer=t.createVertexBuffer(this._boundsArray,a.members)),this.boundsVAO||(this.boundsVAO=new o),this.texture?this.video.paused||(this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE),n.texSubImage2D(n.TEXTURE_2D,0,0,0,n.RGBA,n.UNSIGNED_BYTE,this.video)):(this.texture=new s(t,this.video,n.RGBA),this.texture.bind(n.LINEAR,n.CLAMP_TO_EDGE));for(var r in e.tiles){var i=e.tiles[r];"loaded"!==i.state&&(i.state="loaded",i.texture=e.texture)}}},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(i);t.exports=l},{"../data/raster_bounds_attributes":59,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":251,"./image_source":102}],118:[function(e,t,n){var r=e("../util/actor"),i=e("../style/style_layer_index"),a=e("./vector_tile_worker_source"),o=e("./raster_dem_tile_worker_source"),s=e("./geojson_worker_source"),l=e("./rtl_text_plugin"),u=function(e){var t=this;this.self=e,this.actor=new r(e,this),this.layerIndexes={},this.workerSourceTypes={vector:a,geojson:s},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(e,n){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=n},this.self.registerRTLTextPlugin=function(e){if(l.applyArabicShaping||l.processBidirectionalText)throw new Error("RTL text plugin already registered.");l.applyArabicShaping=e.applyArabicShaping,l.processBidirectionalText=e.processBidirectionalText}};u.prototype.setLayers=function(e,t,n){this.getLayerIndex(e).replace(t),n()},u.prototype.updateLayers=function(e,t,n){this.getLayerIndex(e).update(t.layers,t.removedIds),n()},u.prototype.loadTile=function(e,t,n){this.getWorkerSource(e,t.type).loadTile(t,n)},u.prototype.loadDEMTile=function(e,t,n){this.getDEMWorkerSource(e).loadTile(t,n)},u.prototype.reloadTile=function(e,t,n){this.getWorkerSource(e,t.type).reloadTile(t,n)},u.prototype.abortTile=function(e,t,n){this.getWorkerSource(e,t.type).abortTile(t,n)},u.prototype.removeTile=function(e,t,n){this.getWorkerSource(e,t.type).removeTile(t,n)},u.prototype.removeDEMTile=function(e,t){this.getDEMWorkerSource(e).removeTile(t)},u.prototype.removeSource=function(e,t,n){var r=this.getWorkerSource(e,t.type);void 0!==r.removeSource?r.removeSource(t,n):n()},u.prototype.loadWorkerSource=function(e,t,n){try{this.self.importScripts(t.url),n()}catch(e){n(e)}},u.prototype.loadRTLTextPlugin=function(e,t,n){try{l.applyArabicShaping||l.processBidirectionalText||(this.self.importScripts(t),l.applyArabicShaping&&l.processBidirectionalText||n(new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){n(e)}},u.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new i),t},u.prototype.getWorkerSource=function(e,t){var n=this;if(this.workerSources[e]||(this.workerSources[e]={}),!this.workerSources[e][t]){var r={send:function(t,r,i){n.actor.send(t,r,i,e)}};this.workerSources[e][t]=new this.workerSourceTypes[t](r,this.getLayerIndex(e))}return this.workerSources[e][t]},u.prototype.getDEMWorkerSource=function(e){return this.demWorkerSources[e]||(this.demWorkerSources[e]=new o),this.demWorkerSources[e]},t.exports=function(e){return new u(e)}},{"../style/style_layer_index":210,"../util/actor":250,"./geojson_worker_source":100,"./raster_dem_tile_worker_source":107,"./rtl_text_plugin":109,"./vector_tile_worker_source":116}],119:[function(e,t,n){function r(e,t){for(var n=new g(t),r=0,i=e;r<i.length;r+=1)i[r].recalculate(n)}var i=e("../data/feature_index"),a=e("../symbol/symbol_layout"),o=a.performSymbolLayout,s=e("../data/array_types"),l=s.CollisionBoxArray,u=e("../util/dictionary_coder"),c=e("../data/bucket/symbol_bucket"),d=e("../util/util"),f=e("../render/image_atlas"),h=f.makeImageAtlas,p=e("../render/glyph_atlas"),m=p.makeGlyphAtlas,g=e("../style/evaluation_parameters"),y=e("./tile_id"),v=y.OverscaledTileID,_=function(e){this.tileID=new v(e.tileID.overscaledZ,e.tileID.wrap,e.tileID.canonical.z,e.tileID.canonical.x,e.tileID.canonical.y),this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.showCollisionBoxes=e.showCollisionBoxes,this.collectResourceTiming=!!e.collectResourceTiming};_.prototype.parse=function(e,t,n,a){function s(){var e=this;if(P)return a(P);if(I&&L){var t=m(I),n=h(L);for(var i in y){var s=y[i];s instanceof c&&(r(s.layers,e.zoom),o(s,I,t.positions,L,n.positions,e.showCollisionBoxes))}this.status="done",a(null,{buckets:d.values(y).filter(function(e){return!e.isEmpty()}),featureIndex:g,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:t.image,iconAtlasImage:n.image})}}var f=this;this.status="parsing",this.data=e,this.collisionBoxArray=new l;var p=new u(Object.keys(e.layers).sort()),g=new i(this.tileID,this.overscaling);g.bucketLayerIDs=[];var y={},v={featureIndex:g,iconDependencies:{},glyphDependencies:{}},_=t.familiesBySource[this.source];for(var b in _){var x=e.layers[b];if(x){1===x.version&&d.warnOnce('Vector tile source "'+f.source+'" layer "'+b+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var w=p.encode(b),k=[],T=0;T<x.length;T++){var M=x.feature(T);k.push({feature:M,index:T,sourceLayerIndex:w})}for(var A=0,C=_[b];A<C.length;A+=1){var S=C[A],E=S[0];E.minzoom&&f.zoom<Math.floor(E.minzoom)||E.maxzoom&&f.zoom>=E.maxzoom||"none"===E.visibility||(r(S,f.zoom),(y[E.id]=E.createBucket({index:g.bucketLayerIDs.length,layers:S,zoom:f.zoom,pixelRatio:f.pixelRatio,overscaling:f.overscaling,collisionBoxArray:f.collisionBoxArray})).populate(k,v),g.bucketLayerIDs.push(S.map(function(e){return e.id})))}}}var P,I,L,O=d.mapObject(v.glyphDependencies,function(e){return Object.keys(e).map(Number)});Object.keys(O).length?n.send("getGlyphs",{uid:this.uid,stacks:O},function(e,t){P||(P=e,I=t,s.call(f))}):I={};var z=Object.keys(v.iconDependencies);z.length?n.send("getImages",{icons:z},function(e,t){P||(P=e,L=t,s.call(f))}):L={},s.call(this)},t.exports=_},{"../data/array_types":39,"../data/bucket/symbol_bucket":51,"../data/feature_index":54,"../render/glyph_atlas":85,"../render/image_atlas":87,"../style/evaluation_parameters":182,"../symbol/symbol_layout":227,"../util/dictionary_coder":257,"../util/util":275,"./tile_id":114}],120:[function(e,t,n){function r(e,t){var n={};for(var r in e)"ref"!==r&&(n[r]=e[r]);return a.forEach(function(e){e in t&&(n[e]=t[e])}),n}function i(e){e=e.slice();for(var t=Object.create(null),n=0;n<e.length;n++)t[e[n].id]=e[n];for(var i=0;i<e.length;i++)"ref"in e[i]&&(e[i]=r(e[i],t[e[i].ref]));return e}var a=e("./util/ref_properties");t.exports=i},{"./util/ref_properties":159}],121:[function(e,t,n){function r(e,t,n){n.push({command:p.addSource,args:[e,t[e]]})}function i(e,t,n){t.push({command:p.removeSource,args:[e]}),n[e]=!0}function a(e,t,n,a){i(e,n,a),r(e,t,n)}function o(e,t,n){var r;for(r in e[n])if(e[n].hasOwnProperty(r)&&"data"!==r&&!h(e[n][r],t[n][r]))return!1;for(r in t[n])if(t[n].hasOwnProperty(r)&&"data"!==r&&!h(e[n][r],t[n][r]))return!1;return!0}function s(e,t,n,s){e=e||{},t=t||{};var l;for(l in e)e.hasOwnProperty(l)&&(t.hasOwnProperty(l)||i(l,n,s));for(l in t)t.hasOwnProperty(l)&&(e.hasOwnProperty(l)?h(e[l],t[l])||("geojson"===e[l].type&&"geojson"===t[l].type&&o(e,t,l)?n.push({command:p.setGeoJSONSourceData,args:[l,t[l].data]}):a(l,t,n,s)):r(l,t,n))}function l(e,t,n,r,i,a){e=e||{},t=t||{};var o;for(o in e)e.hasOwnProperty(o)&&(h(e[o],t[o])||n.push({command:a,args:[r,o,t[o],i]}));for(o in t)t.hasOwnProperty(o)&&!e.hasOwnProperty(o)&&(h(e[o],t[o])||n.push({command:a,args:[r,o,t[o],i]}))}function u(e){return e.id}function c(e,t){return e[t.id]=t,e}function d(e,t,n){e=e||[],t=t||[];var r,i,a,o,s,d,f,m=e.map(u),g=t.map(u),y=e.reduce(c,{}),v=t.reduce(c,{}),_=m.slice(),b=Object.create(null);for(r=0,i=0;r<m.length;r++)a=m[r],v.hasOwnProperty(a)?i++:(n.push({command:p.removeLayer,args:[a]}),_.splice(_.indexOf(a,i),1));for(r=0,i=0;r<g.length;r++)a=g[g.length-1-r],_[_.length-1-r]!==a&&(y.hasOwnProperty(a)?(n.push({command:p.removeLayer,args:[a]}),_.splice(_.lastIndexOf(a,_.length-i),1)):i++,d=_[_.length-r],n.push({command:p.addLayer,args:[v[a],d]}),_.splice(_.length-r,0,a),b[a]=!0);for(r=0;r<g.length;r++)if(a=g[r],o=y[a],s=v[a],!b[a]&&!h(o,s))if(h(o.source,s.source)&&h(o["source-layer"],s["source-layer"])&&h(o.type,s.type)){l(o.layout,s.layout,n,a,null,p.setLayoutProperty),l(o.paint,s.paint,n,a,null,p.setPaintProperty),h(o.filter,s.filter)||n.push({command:p.setFilter,args:[a,s.filter]}),h(o.minzoom,s.minzoom)&&h(o.maxzoom,s.maxzoom)||n.push({command:p.setLayerZoomRange,args:[a,s.minzoom,s.maxzoom]});for(f in o)o.hasOwnProperty(f)&&"layout"!==f&&"paint"!==f&&"filter"!==f&&"metadata"!==f&&"minzoom"!==f&&"maxzoom"!==f&&(0===f.indexOf("paint.")?l(o[f],s[f],n,a,f.slice(6),p.setPaintProperty):h(o[f],s[f])||n.push({command:p.setLayerProperty,args:[a,f,s[f]]}));for(f in s)s.hasOwnProperty(f)&&!o.hasOwnProperty(f)&&"layout"!==f&&"paint"!==f&&"filter"!==f&&"metadata"!==f&&"minzoom"!==f&&"maxzoom"!==f&&(0===f.indexOf("paint.")?l(o[f],s[f],n,a,f.slice(6),p.setPaintProperty):h(o[f],s[f])||n.push({command:p.setLayerProperty,args:[a,f,s[f]]}))}else n.push({command:p.removeLayer,args:[a]}),d=_[_.lastIndexOf(a)+1],n.push({command:p.addLayer,args:[s,d]})}function f(e,t){if(!e)return[{command:p.setStyle,args:[t]}];var n=[];try{if(!h(e.version,t.version))return[{command:p.setStyle,args:[t]}];h(e.center,t.center)||n.push({command:p.setCenter,args:[t.center]}),h(e.zoom,t.zoom)||n.push({command:p.setZoom,args:[t.zoom]}),h(e.bearing,t.bearing)||n.push({command:p.setBearing,args:[t.bearing]}),h(e.pitch,t.pitch)||n.push({command:p.setPitch,args:[t.pitch]}),h(e.sprite,t.sprite)||n.push({command:p.setSprite,args:[t.sprite]}),h(e.glyphs,t.glyphs)||n.push({command:p.setGlyphs,args:[t.glyphs]}),h(e.transition,t.transition)||n.push({command:p.setTransition,args:[t.transition]}),h(e.light,t.light)||n.push({command:p.setLight,args:[t.light]});var r={},i=[];s(e.sources,t.sources,i,r);var a=[];e.layers&&e.layers.forEach(function(e){r[e.source]?n.push({command:p.removeLayer,args:[e.id]}):a.push(e)}),n=n.concat(i),d(a,t.layers,n)}catch(e){console.warn("Unable to compute style diff:",e),n=[{command:p.setStyle,args:[t]}]}return n}var h=e("./util/deep_equal"),p={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=f,t.exports.operations=p},{"./util/deep_equal":155}],122:[function(e,t,n){function r(e,t,n){this.message=(e?e+": ":"")+n,null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}t.exports=r},{}],123:[function(e,t,n){function r(e){return{type:e}}function i(e){return Array.isArray(e)?"("+e.map(o).join(", ")+")":"("+o(e.type)+"...)"}var a=e("./types"),o=a.toString,s=e("./parsing_context"),l=(e("./evaluation_context"),function(e,t,n,r){this.name=e,this.type=t,this._evaluate=n,this.args=r});l.prototype.evaluate=function(e){return this._evaluate(e,this.args)},l.prototype.eachChild=function(e){this.args.forEach(e)},l.prototype.possibleOutputs=function(){return[void 0]},l.parse=function(e,t){var n=e[0],r=l.definitions[n];if(!r)return t.error('Unknown expression "'+n+'". If you wanted a literal array, use ["literal", [...]].',0);for(var a=Array.isArray(r)?r[0]:r.type,u=Array.isArray(r)?[[r[1],r[2]]]:r.overloads,c=u.filter(function(t){var n=t[0];return!Array.isArray(n)||n.length===e.length-1}),d=[],f=1;f<e.length;f++){var h=e[f],p=void 0;if(1===c.length){var m=c[0][0];p=Array.isArray(m)?m[f-1]:m.type}var g=t.parse(h,1+d.length,p);if(!g)return null;d.push(g)}for(var y=null,v=0,_=c;v<_.length;v+=1){var b=_[v],x=b[0],w=b[1];if(y=new s(t.registry,t.path,null,t.scope),Array.isArray(x)&&x.length!==d.length)y.error("Expected "+x.length+" arguments, but found "+d.length+" instead.");else{for(var k=0;k<d.length;k++){var T=Array.isArray(x)?x[k]:x.type,M=d[k];y.concat(k+1).checkSubtype(T,M.type)}if(0===y.errors.length)return new l(n,a,w,d)}}if(1===c.length)t.errors.push.apply(t.errors,y.errors);else{var A=c.length?c:u,C=A.map(function(e){return i(e[0])}).join(" | "),S=d.map(function(e){return o(e.type)}).join(", ");t.error("Expected arguments of type "+C+", but found ("+S+") instead.")}return null},l.register=function(e,t){l.definitions=t;for(var n in t)e[n]=l},t.exports={CompoundExpression:l,varargs:r}},{"./evaluation_context":138,"./parsing_context":141,"./types":146}],124:[function(e,t,n){var r=e("../types"),i=r.toString,a=r.array,o=r.ValueType,s=r.StringType,l=r.NumberType,u=r.BooleanType,c=r.checkSubtype,d=e("../values"),f=d.typeOf,h=e("../runtime_error"),p={string:s,number:l,boolean:u},m=function(e,t){this.type=e,this.input=t};m.parse=function(e,t){if(e.length<2||e.length>4)return t.error("Expected 1, 2, or 3 arguments, but found "+(e.length-1)+" instead.");var n,r;if(e.length>2){var i=e[1];if("string"!=typeof i||!(i in p))return t.error('The item type argument of "array" must be one of string, number, boolean',1);n=p[i]}else n=o;if(e.length>3){if("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2]))return t.error('The length argument to "array" must be a positive integer literal',2);r=e[2]}var s=a(n,r),l=t.parse(e[e.length-1],e.length-1,o);return l?new m(s,l):null},m.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(c(this.type,f(t)))throw new h("Expected value to be of type "+i(this.type)+", but found "+i(f(t))+" instead.");return t},m.prototype.eachChild=function(e){e(this.input)},m.prototype.possibleOutputs=function(){return this.input.possibleOutputs()},t.exports=m},{"../runtime_error":143,"../types":146,"../values":147}],125:[function(e,t,n){var r=e("../types"),i=r.ObjectType,a=r.ValueType,o=r.StringType,s=r.NumberType,l=r.BooleanType,u=e("../runtime_error"),c=e("../types"),d=c.checkSubtype,f=c.toString,h=e("../values"),p=h.typeOf,m={string:o,number:s,boolean:l,object:i},g=function(e,t){this.type=e,this.args=t};g.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=m[n],i=[],o=1;o<e.length;o++){var s=t.parse(e[o],o,a);if(!s)return null;i.push(s)}return new g(r,i)},g.prototype.evaluate=function(e){for(var t=this,n=0;n<this.args.length;n++){var r=t.args[n].evaluate(e);if(!d(t.type,p(r)))return r;if(n===t.args.length-1)throw new u("Expected value to be of type "+f(t.type)+", but found "+f(p(r))+" instead.")}return null},g.prototype.eachChild=function(e){this.args.forEach(e)},g.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=g},{"../runtime_error":143,"../types":146,"../values":147}],126:[function(e,t,n){var r=e("../types"),i=r.array,a=r.ValueType,o=r.NumberType,s=e("../runtime_error"),l=function(e,t,n){this.type=e,this.index=t,this.input=n};l.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var n=t.parse(e[1],1,o),r=t.parse(e[2],2,i(t.expectedType||a));if(!n||!r)return null;var s=r.type;return new l(s.itemType,n,r)},l.prototype.evaluate=function(e){var t=this.index.evaluate(e),n=this.input.evaluate(e);if(t<0||t>=n.length)throw new s("Array index out of bounds: "+t+" > "+n.length+".");if(t!==Math.floor(t))throw new s("Array index must be an integer, but found "+t+" instead.");return n[t]},l.prototype.eachChild=function(e){e(this.index),e(this.input)},l.prototype.possibleOutputs=function(){return[void 0]},t.exports=l},{"../runtime_error":143,"../types":146}],127:[function(e,t,n){var r=e("../types"),i=r.BooleanType,a=function(e,t,n){this.type=e,this.branches=t,this.otherwise=n};a.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var r=[],o=1;o<e.length-1;o+=2){var s=t.parse(e[o],o,i);if(!s)return null;var l=t.parse(e[o+1],o+1,n);if(!l)return null;r.push([s,l]),n=n||l.type}var u=t.parse(e[e.length-1],e.length-1,n);return u?new a(n,r,u):null},a.prototype.evaluate=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],a=i[0],o=i[1];if(a.evaluate(e))return o.evaluate(e)}return this.otherwise.evaluate(e)},a.prototype.eachChild=function(e){for(var t=this,n=0,r=t.branches;n<r.length;n+=1){var i=r[n],a=i[0],o=i[1];e(a),e(o)}e(this.otherwise)},a.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.branches.map(function(e){return e[0],e[1].possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},t.exports=a},{"../types":146}],128:[function(e,t,n){var r=e("../types"),i=r.checkSubtype,a=r.ValueType,o=function(e,t){this.type=e,this.args=t};o.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var n=null,r=t.expectedType;r&&"value"!==r.kind&&(n=r);for(var s=[],l=0,u=e.slice(1);l<u.length;l+=1){var c=u[l],d=t.parse(c,1+s.length,n,void 0,{omitTypeAnnotations:!0});if(!d)return null;n=n||d.type,s.push(d)}return r&&s.some(function(e){return i(r,e.type)})?new o(a,s):new o(n,s)},o.prototype.evaluate=function(e){for(var t=this,n=null,r=0,i=t.args;r<i.length&&null===(n=i[r].evaluate(e));r+=1);return n},o.prototype.eachChild=function(e){this.args.forEach(e)},o.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=o},{"../types":146}],129:[function(e,t,n){var r=e("../types"),i=r.ColorType,a=r.ValueType,o=r.NumberType,s=e("../values"),l=s.Color,u=s.validateRGBA,c=e("../runtime_error"),d={"to-number":o,"to-color":i},f=function(e,t){this.type=e,this.args=t};f.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var n=e[0],r=d[n],i=[],o=1;o<e.length;o++){var s=t.parse(e[o],o,a);if(!s)return null;i.push(s)}return new f(r,i)},f.prototype.evaluate=function(e){var t=this;if("color"===this.type.kind){for(var n,r,i=0,a=t.args;i<a.length;i+=1)if(n=a[i].evaluate(e),r=null,"string"==typeof n){var o=e.parseColor(n);if(o)return o}else if(Array.isArray(n)&&!(r=n.length<3||n.length>4?"Invalid rbga value "+JSON.stringify(n)+": expected an array containing either three or four numeric values.":u(n[0],n[1],n[2],n[3])))return new l(n[0]/255,n[1]/255,n[2]/255,n[3]);throw new c(r||"Could not parse color from value '"+("string"==typeof n?n:JSON.stringify(n))+"'")}for(var s=null,d=0,f=t.args;d<f.length;d+=1)if(null!==(s=f[d].evaluate(e))){var h=Number(s);if(!isNaN(h))return h}throw new c("Could not convert "+JSON.stringify(s)+" to number.")},f.prototype.eachChild=function(e){this.args.forEach(e)},f.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.args.map(function(e){return e.possibleOutputs()}));var e},t.exports=f},{"../runtime_error":143,"../types":146,"../values":147}],130:[function(e,t,n){function r(e){return"string"===e.kind||"number"===e.kind||"boolean"===e.kind||"null"===e.kind}function i(e){return function(){function t(e,t){this.type=s,this.lhs=e,this.rhs=t}return t.parse=function(e,n){if(3!==e.length)return n.error("Expected two arguments.");var i=n.parse(e[1],1,o);if(!i)return null;var a=n.parse(e[2],2,o);return a?r(i.type)||r(a.type)?i.type.kind!==a.type.kind&&"value"!==i.type.kind&&"value"!==a.type.kind?n.error("Cannot compare "+u(i.type)+" and "+u(a.type)+"."):new t(i,a):n.error("Expected at least one argument to be a string, number, boolean, or null, but found ("+u(i.type)+", "+u(a.type)+") instead."):null},t.prototype.evaluate=function(t){return e(this.lhs.evaluate(t),this.rhs.evaluate(t))},t.prototype.eachChild=function(e){e(this.lhs),e(this.rhs)},t.prototype.possibleOutputs=function(){return[!0,!1]},t}()}var a=e("../types"),o=a.ValueType,s=a.BooleanType,l=e("../types"),u=l.toString;t.exports={Equals:i(function(e,t){return e===t}),NotEquals:i(function(e,t){return e!==t})}},{"../types":146}],131:[function(e,t,n){function r(e,t){var n=t[0],r=t[1],i=t[2],a=t[3];n=n.evaluate(e),r=r.evaluate(e),i=i.evaluate(e);var o=a?a.evaluate(e):1,s=M(n,r,i,o);if(s)throw new E(s);return new T(n/255*o,r/255*o,i/255*o,o)}function i(e,t){return e in t}function a(e,t){var n=t[e];return void 0===n?null:n}function o(e,t){return t[0].evaluate(e).length}function s(e,t){var n=t[0],r=t[1];return n.evaluate(e)<r.evaluate(e)}function l(e,t){var n=t[0],r=t[1];return n.evaluate(e)>r.evaluate(e)}function u(e,t){var n=t[0],r=t[1];return n.evaluate(e)<=r.evaluate(e)}function c(e,t){var n=t[0],r=t[1];return n.evaluate(e)>=r.evaluate(e)}function d(e,t,n,r){for(;n<=r;){var i=n+r>>1;if(t[i]===e)return!0;t[i]>e?r=i-1:n=i+1}return!1}var f=e("../types"),h=f.NumberType,p=f.StringType,m=f.BooleanType,g=f.ColorType,y=f.ObjectType,v=f.ValueType,_=f.ErrorType,b=f.array,x=f.toString,w=e("../values"),k=w.typeOf,T=w.Color,M=w.validateRGBA,A=e("../compound_expression"),C=A.CompoundExpression,S=A.varargs,E=e("../runtime_error"),P=e("./let"),I=e("./var"),L=e("./literal"),O=e("./assertion"),z=e("./array"),R=e("./coercion"),D=e("./at"),N=e("./match"),F=e("./case"),j=e("./step"),B=e("./interpolate"),U=e("./coalesce"),V=e("./equals"),H=V.Equals,W=V.NotEquals,q={"==":H,"!=":W,array:z,at:D,boolean:O,case:F,coalesce:U,interpolate:B,let:P,literal:L,match:N,number:O,object:O,step:j,string:O,"to-color":R,"to-number":R,var:I};C.register(q,{error:[_,[p],function(e,t){var n=t[0];throw new E(n.evaluate(e))}],typeof:[p,[v],function(e,t){var n=t[0];return x(k(n.evaluate(e)))}],"to-string":[p,[v],function(e,t){var n=t[0];n=n.evaluate(e);var r=typeof n;return null===n||"string"===r||"number"===r||"boolean"===r?String(n):n instanceof T?n.toString():JSON.stringify(n)}],"to-boolean":[m,[v],function(e,t){var n=t[0];return Boolean(n.evaluate(e))}],"to-rgba":[b(h,4),[g],function(e,t){var n=t[0],r=n.evaluate(e),i=r.r,a=r.g,o=r.b,s=r.a;return[255*i/s,255*a/s,255*o/s,s]}],rgb:[g,[h,h,h],r],rgba:[g,[h,h,h,h],r],length:{type:h,overloads:[[[p],o],[[b(v)],o]]},has:{type:m,overloads:[[[p],function(e,t){return i(t[0].evaluate(e),e.properties())}],[[p,y],function(e,t){var n=t[0],r=t[1];return i(n.evaluate(e),r.evaluate(e))}]]},get:{type:v,overloads:[[[p],function(e,t){return a(t[0].evaluate(e),e.properties())}],[[p,y],function(e,t){var n=t[0],r=t[1];return a(n.evaluate(e),r.evaluate(e))}]]},properties:[y,[],function(e){return e.properties()}],"geometry-type":[p,[],function(e){return e.geometryType()}],id:[v,[],function(e){return e.id()}],zoom:[h,[],function(e){return e.globals.zoom}],"heatmap-density":[h,[],function(e){return e.globals.heatmapDensity||0}],"+":[h,S(h),function(e,t){for(var n=0,r=0,i=t;r<i.length;r+=1)n+=i[r].evaluate(e);return n}],"*":[h,S(h),function(e,t){for(var n=1,r=0,i=t;r<i.length;r+=1)n*=i[r].evaluate(e);return n}],"-":{type:h,overloads:[[[h,h],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)-r.evaluate(e)}],[[h],function(e,t){return-t[0].evaluate(e)}]]},"/":[h,[h,h],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)/r.evaluate(e)}],"%":[h,[h,h],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)%r.evaluate(e)}],ln2:[h,[],function(){return Math.LN2}],pi:[h,[],function(){return Math.PI}],e:[h,[],function(){return Math.E}],"^":[h,[h,h],function(e,t){var n=t[0],r=t[1];return Math.pow(n.evaluate(e),r.evaluate(e))}],sqrt:[h,[h],function(e,t){var n=t[0];return Math.sqrt(n.evaluate(e))}],log10:[h,[h],function(e,t){var n=t[0];return Math.log10(n.evaluate(e))}],ln:[h,[h],function(e,t){var n=t[0];return Math.log(n.evaluate(e))}],log2:[h,[h],function(e,t){var n=t[0];return Math.log2(n.evaluate(e))}],sin:[h,[h],function(e,t){var n=t[0];return Math.sin(n.evaluate(e))}],cos:[h,[h],function(e,t){var n=t[0];return Math.cos(n.evaluate(e))}],tan:[h,[h],function(e,t){var n=t[0];return Math.tan(n.evaluate(e))}],asin:[h,[h],function(e,t){var n=t[0];return Math.asin(n.evaluate(e))}],acos:[h,[h],function(e,t){var n=t[0];return Math.acos(n.evaluate(e))}],atan:[h,[h],function(e,t){var n=t[0];return Math.atan(n.evaluate(e))}],min:[h,S(h),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[h,S(h),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],"filter-==":[m,[p,v],function(e,t){var n=t[0],r=t[1];return e.properties()[n.value]===r.value}],"filter-id-==":[m,[v],function(e,t){var n=t[0];return e.id()===n.value}],"filter-type-==":[m,[p],function(e,t){var n=t[0];return e.geometryType()===n.value}],"filter-<":[m,[p,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i<a}],"filter-id-<":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<i}],"filter->":[m,[p,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i>a}],"filter-id->":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>i}],"filter-<=":[m,[p,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i<=a}],"filter-id-<=":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r<=i}],"filter->=":[m,[p,v],function(e,t){var n=t[0],r=t[1],i=e.properties()[n.value],a=r.value;return typeof i==typeof a&&i>=a}],"filter-id->=":[m,[v],function(e,t){var n=t[0],r=e.id(),i=n.value;return typeof r==typeof i&&r>=i}],"filter-has":[m,[v],function(e,t){return t[0].value in e.properties()}],"filter-has-id":[m,[],function(e){return null!==e.id()}],"filter-type-in":[m,[b(p)],function(e,t){return t[0].value.indexOf(e.geometryType())>=0}],"filter-id-in":[m,[b(v)],function(e,t){return t[0].value.indexOf(e.id())>=0}],"filter-in-small":[m,[p,b(v)],function(e,t){var n=t[0];return t[1].value.indexOf(e.properties()[n.value])>=0}],"filter-in-large":[m,[p,b(v)],function(e,t){var n=t[0],r=t[1];return d(e.properties()[n.value],r.value,0,r.value.length-1)}],">":{type:m,overloads:[[[h,h],l],[[p,p],l]]},"<":{type:m,overloads:[[[h,h],s],[[p,p],s]]},">=":{type:m,overloads:[[[h,h],c],[[p,p],c]]},"<=":{type:m,overloads:[[[h,h],u],[[p,p],u]]},all:{type:m,overloads:[[[m,m],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)&&r.evaluate(e)}],[S(m),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(!r[n].evaluate(e))return!1;return!0}]]},any:{type:m,overloads:[[[m,m],function(e,t){var n=t[0],r=t[1];return n.evaluate(e)||r.evaluate(e)}],[S(m),function(e,t){for(var n=0,r=t;n<r.length;n+=1)if(r[n].evaluate(e))return!0;return!1}]]},"!":[m,[m],function(e,t){return!t[0].evaluate(e)}],upcase:[p,[p],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[p,[p],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[p,S(p),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}]}),t.exports=q},{"../compound_expression":123,"../runtime_error":143,"../types":146,"../values":147,"./array":124,"./assertion":125,"./at":126,"./case":127,"./coalesce":128,"./coercion":129,"./equals":130,"./interpolate":132,"./let":133,"./literal":134,"./match":135,"./step":136,"./var":137}],132:[function(e,t,n){function r(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var i=e("@mapbox/unitbezier"),a=e("../../util/interpolate"),o=e("../types"),s=o.toString,l=o.NumberType,u=e("../stops"),c=u.findStopLessThanOrEqualTo,d=function(e,t,n,r){var i=this;this.type=e,this.interpolation=t,this.input=n,this.labels=[],this.outputs=[];for(var a=0,o=r;a<o.length;a+=1){var s=o[a],l=s[0],u=s[1];i.labels.push(l),i.outputs.push(u)}};d.interpolationFactor=function(e,t,n,a){var o=0;if("exponential"===e.name)o=r(t,e.base,n,a);else if("linear"===e.name)o=r(t,1,n,a);else if("cubic-bezier"===e.name){var s=e.controlPoints,l=new i(s[0],s[1],s[2],s[3]);o=l.solve(r(t,1,n,a))}return o},d.parse=function(e,t){var n=e[1],r=e[2],i=e.slice(3);if(!Array.isArray(n)||0===n.length)return t.error("Expected an interpolation type expression.",1);if("linear"===n[0])n={name:"linear"};else if("exponential"===n[0]){var a=n[1];if("number"!=typeof a)return t.error("Exponential interpolation requires a numeric base.",1,1);n={name:"exponential",base:a}}else{if("cubic-bezier"!==n[0])return t.error("Unknown interpolation type "+String(n[0]),1,0);var o=n.slice(1);if(4!==o.length||o.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);n={name:"cubic-bezier",controlPoints:o}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(r=t.parse(r,2,l)))return null;var u=[],c=null;t.expectedType&&"value"!==t.expectedType.kind&&(c=t.expectedType);for(var f=0;f<i.length;f+=2){var h=i[f],p=i[f+1],m=f+3,g=f+4;if("number"!=typeof h)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(u.length&&u[u.length-1][0]>=h)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var y=t.parse(p,g,c);if(!y)return null;c=c||y.type,u.push([h,y])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new d(c,n,r,u):t.error("Type "+s(c)+" is not interpolatable.")},d.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;if(r>=t[i-1])return n[i-1].evaluate(e);var o=c(t,r),s=t[o],l=t[o+1],u=d.interpolationFactor(this.interpolation,r,s,l),f=n[o].evaluate(e),h=n[o+1].evaluate(e);return a[this.type.kind.toLowerCase()](f,h,u)},d.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},d.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},t.exports=d},{"../../util/interpolate":158,"../stops":145,"../types":146,"@mapbox/unitbezier":7}],133:[function(e,t,n){var r=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};r.prototype.evaluate=function(e){e.pushScope(this.bindings);var t=this.result.evaluate(e);return e.popScope(),t},r.prototype.eachChild=function(e){for(var t=this,n=0,r=t.bindings;n<r.length;n+=1)e(r[n][1]);e(this.result)},r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var n=[],i=1;i<e.length-1;i+=2){var a=e[i];if("string"!=typeof a)return t.error("Expected string, but found "+typeof a+" instead.",i);if(/[^a-zA-Z0-9_]/.test(a))return t.error("Variable names must contain only alphanumeric characters or '_'.",i);var o=t.parse(e[i+1],i+1);if(!o)return null;n.push([a,o])}var s=t.parse(e[e.length-1],e.length-1,void 0,n);return s?new r(n,s):null},r.prototype.possibleOutputs=function(){return this.result.possibleOutputs()},t.exports=r},{}],134:[function(e,t,n){var r=e("../values"),i=r.isValue,a=r.typeOf,o=function(e,t){this.type=e,this.value=t};o.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!i(e[1]))return t.error("invalid value");var n=e[1],r=a(n),s=t.expectedType;return"array"!==r.kind||0!==r.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(r=s),new o(r,n)},o.prototype.evaluate=function(){return this.value},o.prototype.eachChild=function(){},o.prototype.possibleOutputs=function(){return[this.value]},t.exports=o},{"../values":147}],135:[function(e,t,n){var r=e("../values"),i=r.typeOf,a=function(e,t,n,r,i,a){this.inputType=e,this.type=t,this.input=n,this.cases=r,this.outputs=i,this.otherwise=a};a.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var n,r;t.expectedType&&"value"!==t.expectedType.kind&&(r=t.expectedType);for(var o={},s=[],l=2;l<e.length-1;l+=2){var u=e[l],c=e[l+1];Array.isArray(u)||(u=[u]);var d=t.concat(l);if(0===u.length)return d.error("Expected at least one branch label.");for(var f=0,h=u;f<h.length;f+=1){var p=h[f];if("number"!=typeof p&&"string"!=typeof p)return d.error("Branch labels must be numbers or strings.");if("number"==typeof p&&Math.abs(p)>Number.MAX_SAFE_INTEGER)return d.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof p&&Math.floor(p)!==p)return d.error("Numeric branch labels must be integer values.");if(n){if(d.checkSubtype(n,i(p)))return null}else n=i(p);if(void 0!==o[String(p)])return d.error("Branch labels must be unique.");o[String(p)]=s.length}var m=t.parse(c,l,r);if(!m)return null;r=r||m.type,s.push(m)}var g=t.parse(e[1],1,n);if(!g)return null;var y=t.parse(e[e.length-1],e.length-1,r);return y?new a(n,r,g,o,s,y):null},a.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},a.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},a.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()})).concat(this.otherwise.possibleOutputs());var e},t.exports=a},{"../values":147}],136:[function(e,t,n){var r=e("../types"),i=r.NumberType,a=e("../stops"),o=a.findStopLessThanOrEqualTo,s=function(e,t,n){var r=this;this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var i=0,a=n;i<a.length;i+=1){var o=a[i],s=o[0],l=o[1];r.labels.push(s),r.outputs.push(l)}};s.parse=function(e,t){var n=e[1],r=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,1,i)))return null;var a=[],o=null;t.expectedType&&"value"!==t.expectedType.kind&&(o=t.expectedType),r.unshift(-1/0);for(var l=0;l<r.length;l+=2){var u=r[l],c=r[l+1],d=l+1,f=l+2;if("number"!=typeof u)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(a.length&&a[a.length-1][0]>=u)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',d);var h=t.parse(c,f,o);if(!h)return null;o=o||h.type,a.push([u,h])}return new s(o,n,a)},s.prototype.evaluate=function(e){var t=this.labels,n=this.outputs;if(1===t.length)return n[0].evaluate(e);var r=this.input.evaluate(e);if(r<=t[0])return n[0].evaluate(e);var i=t.length;return r>=t[i-1]?n[i-1].evaluate(e):n[o(t,r)].evaluate(e)},s.prototype.eachChild=function(e){var t=this;e(this.input);for(var n=0,r=t.outputs;n<r.length;n+=1)e(r[n])},s.prototype.possibleOutputs=function(){return(e=[]).concat.apply(e,this.outputs.map(function(e){return e.possibleOutputs()}));var e},t.exports=s},{"../stops":145,"../types":146}],137:[function(e,t,n){var r=function(e,t){this.type=t,this.name=e};r.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var n=e[1];return t.scope.has(n)?new r(n,t.scope.get(n).type):t.error('Unknown variable "'+n+'". Make sure "'+n+'" has been bound in an enclosing "let" expression before using it.',1)},r.prototype.evaluate=function(e){return e.scope.get(this.name).evaluate(e)},r.prototype.eachChild=function(){},r.prototype.possibleOutputs=function(){return[void 0]},t.exports=r},{}],138:[function(e,t,n){var r=e("./scope"),i=e("./values"),a=i.Color,o=["Unknown","Point","LineString","Polygon"],s=function(){this.scope=new r,this._parseColorCache={}};s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},s.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?o[this.feature.type]:this.feature.type:null},s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},s.prototype.pushScope=function(e){this.scope=this.scope.concat(e)},s.prototype.popScope=function(){this.scope=this.scope.parent},s.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=a.parse(e)),t},t.exports=s},{"./scope":144,"./values":147}],139:[function(e,t,n){function r(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in b}function i(e,t,n){void 0===n&&(n={});var r=new f(b,[],l(t)),i=r.parse(e);return i?T(!1===n.handleErrors?new A(i):new C(i,t)):M(r.errors)}function a(e,t,n){if(void 0===n&&(n={}),e=i(e,t,n),"error"===e.result)return e;var r=e.value.expression,a=x.isFeatureConstant(r);if(!a&&!t["property-function"])return M([new d("","property expressions not supported")]);var o=x.isGlobalPropertyConstant(r,["zoom"]);if(!o&&!1===t["zoom-function"])return M([new d("","zoom expressions not supported")]);var l=s(r);return l||o?l instanceof d?M([l]):l instanceof y&&"piecewise-constant"===t.function?M([new d("",'"interpolate" expressions cannot be used with this property')]):T(l?a?new E("camera",e.value,l):new E("composite",e.value,l):a?new S("constant",e.value):new S("source",e.value)):M([new d("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}function o(e,t){if(I(e))return new R(e,t);if(r(e)){var n=a(e,t);if("error"===n.result)throw new Error(n.value.map(function(e){return e.key+": "+e.message}).join(", "));return n.value}var i=e;return"string"==typeof e&&"color"===t.type&&(i=z.parse(e)),{kind:"constant",evaluate:function(){return i}}}function s(e){var t=null;if(e instanceof _)t=s(e.result);else if(e instanceof v)for(var n=0,r=e.args;n<r.length;n+=1){var i=r[n];if(t=s(i))break}else(e instanceof g||e instanceof y)&&e.input instanceof m&&"zoom"===e.input.name&&(t=e);return t instanceof d?t:(e.eachChild(function(e){var n=s(e);n instanceof d?t=n:!t&&n?t=new d("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&n&&t!==n&&(t=new d("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function l(e){var t={color:N,string:F,number:j,enum:F,boolean:B};return"array"===e.type?V(t[e.value]||U,e.length):t[e.type]||null}function u(e){return"color"===e.type&&I(e.default)?new z(0,0,0,0):"color"===e.type?z.parse(e.default)||null:void 0===e.default?null:e.default}var c=e("../util/extend"),d=e("./parsing_error"),f=e("./parsing_context"),h=e("./evaluation_context"),p=e("./compound_expression"),m=p.CompoundExpression,g=e("./definitions/step"),y=e("./definitions/interpolate"),v=e("./definitions/coalesce"),_=e("./definitions/let"),b=e("./definitions"),x=e("./is_constant"),w=e("./runtime_error"),k=e("../util/result"),T=k.success,M=k.error,A=function(e){this.expression=e};A.prototype.evaluate=function(e,t){return this._evaluator||(this._evaluator=new h),this._evaluator.globals=e,this._evaluator.feature=t,this.expression.evaluate(this._evaluator)};var C=function(e){function t(t,n){e.call(this,t),this._warningHistory={},this._defaultValue=u(n),"enum"===n.type&&(this._enumValues=n.values)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.evaluate=function(e,t){this._evaluator||(this._evaluator=new h),this._evaluator.globals=e,this._evaluator.feature=t;try{var n=this.expression.evaluate(this._evaluator);if(null===n||void 0===n)return this._defaultValue;if(this._enumValues&&!(n in this._enumValues))throw new w("Expected value to be one of "+Object.keys(this._enumValues).map(function(e){return JSON.stringify(e)}).join(", ")+", but found "+JSON.stringify(n)+" instead.");return n}catch(e){return this._warningHistory[e.message]||(this._warningHistory[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),this._defaultValue}},t}(A),S=function(e,t){this.kind=e,this._styleExpression=t};S.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)};var E=function(e,t,n){this.kind=e,this.zoomStops=n.labels,this._styleExpression=t,n instanceof y&&(this._interpolationType=n.interpolation)};E.prototype.evaluate=function(e,t){return this._styleExpression.evaluate(e,t)},E.prototype.interpolationFactor=function(e,t,n){return this._interpolationType?y.interpolationFactor(this._interpolationType,e,t,n):0};var P=e("../function"),I=P.isFunction,L=P.createFunction,O=e("./values"),z=O.Color,R=function(e,t){this._parameters=e,this._specification=t,c(this,L(this._parameters,this._specification))};R.deserialize=function(e){return new R(e._parameters,e._specification)},R.serialize=function(e){return{_parameters:e._parameters,_specification:e._specification}},t.exports={StyleExpression:A,StyleExpressionWithErrorHandling:C,isExpression:r,createExpression:i,createPropertyExpression:a,normalizePropertyExpression:o,ZoomConstantExpression:S,ZoomDependentExpression:E,StylePropertyFunction:R};var D=e("./types"),N=D.ColorType,F=D.StringType,j=D.NumberType,B=D.BooleanType,U=D.ValueType,V=D.array},{"../function":149,"../util/extend":156,"../util/result":160,"./compound_expression":123,"./definitions":131,"./definitions/coalesce":128,"./definitions/interpolate":132,"./definitions/let":133,"./definitions/step":136,"./evaluation_context":138,"./is_constant":140,"./parsing_context":141,"./parsing_error":142,"./runtime_error":143,"./types":146,"./values":147}],140:[function(e,t,n){function r(e){if(e instanceof o){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1;if(/^filter-/.test(e.name))return!1}var t=!0;return e.eachChild(function(e){t&&!r(e)&&(t=!1)}),t}function i(e,t){if(e instanceof o&&t.indexOf(e.name)>=0)return!1;var n=!0;return e.eachChild(function(e){n&&!i(e,t)&&(n=!1)}),n}var a=e("./compound_expression"),o=a.CompoundExpression;t.exports={isFeatureConstant:r,isGlobalPropertyConstant:i}},{"./compound_expression":123}],141:[function(e,t,n){function r(t){var n=e("./compound_expression"),r=n.CompoundExpression,i=e("./is_constant"),a=i.isGlobalPropertyConstant,o=i.isFeatureConstant;if(t instanceof e("./definitions/var"))return!1;if(t instanceof r&&"error"===t.name)return!1;var s=!0;return t.eachChild(function(e){e instanceof l||(s=!1)}),!!s&&o(t)&&a(t,["zoom","heatmap-density"])}var i=e("./scope"),a=e("./types"),o=a.checkSubtype,s=e("./parsing_error"),l=e("./definitions/literal"),u=e("./definitions/assertion"),c=e("./definitions/array"),d=e("./definitions/coercion"),f=function(e,t,n,r,a){void 0===t&&(t=[]),void 0===r&&(r=new i),void 0===a&&(a=[]),this.registry=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=r,this.errors=a,this.expectedType=n};f.prototype.parse=function(t,n,i,a,o){void 0===o&&(o={});var s=this;if(n&&(s=s.concat(n,i,a)),null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return s.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var f=t[0];if("string"!=typeof f)return s.error("Expression name must be a string, but found "+typeof f+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var h=s.registry[f];if(h){var p=h.parse(t,s);if(!p)return null;if(s.expectedType){var m=s.expectedType,g=p.type;if("string"!==m.kind&&"number"!==m.kind&&"boolean"!==m.kind||"value"!==g.kind)if("array"===m.kind&&"value"===g.kind)o.omitTypeAnnotations||(p=new c(m,p));else if("color"!==m.kind||"value"!==g.kind&&"string"!==g.kind){if(s.checkSubtype(s.expectedType,p.type))return null}else o.omitTypeAnnotations||(p=new d(m,[p]));else o.omitTypeAnnotations||(p=new u(m,[p]))}if(!(p instanceof l)&&r(p)){var y=new(e("./evaluation_context"));try{p=new l(p.type,p.evaluate(y))}catch(t){return s.error(t.message),null}}return p}return s.error('Unknown expression "'+f+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?s.error("'undefined' value invalid. Use null instead."):"object"==typeof t?s.error('Bare objects invalid. Use ["literal", {...}] instead.'):s.error("Expected an array, but found "+typeof t+" instead.")},f.prototype.concat=function(e,t,n){var r="number"==typeof e?this.path.concat(e):this.path,i=n?this.scope.concat(n):this.scope;return new f(this.registry,r,t||null,i,this.errors)},f.prototype.error=function(e){for(var t=arguments,n=[],r=arguments.length-1;r-- >0;)n[r]=t[r+1];var i=""+this.key+n.map(function(e){return"["+e+"]"}).join("");this.errors.push(new s(i,e))},f.prototype.checkSubtype=function(e,t){var n=o(e,t);return n&&this.error(n),n},t.exports=f},{"./compound_expression":123,"./definitions/array":124,"./definitions/assertion":125,"./definitions/coercion":129,"./definitions/literal":134,"./definitions/var":137,"./evaluation_context":138,"./is_constant":140,"./parsing_error":142,"./scope":144,"./types":146}],142:[function(e,t,n){var r=function(e){function t(t,n){e.call(this,n),this.message=n,this.key=t}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);t.exports=r},{}],143:[function(e,t,n){var r=function(e){this.name="ExpressionEvaluationError",this.message=e};r.prototype.toJSON=function(){return this.message},t.exports=r},{}],144:[function(e,t,n){var r=function(e,t){var n=this;void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var r=0,i=t;r<i.length;r+=1){var a=i[r],o=a[0],s=a[1];n.bindings[o]=s}};r.prototype.concat=function(e){return new r(this,e)},r.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},r.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)},t.exports=r},{}],145:[function(e,t,n){function r(e,t){for(var n,r,a=e.length,o=0,s=a-1,l=0;o<=s;){if(l=Math.floor((o+s)/2),n=e[l],r=e[l+1],t===n||t>n&&t<r)return l;if(n<t)o=l+1;else{if(!(n>t))throw new i("Input is not a number.");s=l-1}}return Math.max(l-1,0)}var i=e("./runtime_error");t.exports={findStopLessThanOrEqualTo:r}},{"./runtime_error":143}],146:[function(e,t,n){function r(e,t){return{kind:"array",itemType:e,N:t}}function i(e){if("array"===e.kind){var t=i(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}function a(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&!a(e.itemType,t.itemType)&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var n=0,r=p;n<r.length;n+=1){var o=r[n];if(!a(o,t))return null}}return"Expected "+i(e)+" but found "+i(t)+" instead."}var o={kind:"null"},s={kind:"number"},l={kind:"string"},u={kind:"boolean"},c={kind:"color"},d={kind:"object"},f={kind:"value"},h={kind:"error"},p=[o,s,l,u,c,d,r(f)];t.exports={NullType:o,NumberType:s,StringType:l,BooleanType:u,ColorType:c,ObjectType:d,ValueType:f,array:r,ErrorType:h,toString:i,checkSubtype:a}},{}],147:[function(e,t,n){function r(e,t,n,r){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof n&&n>=0&&n<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[e,t,n,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[e,t,n,r]:[e,t,n]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function i(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof o)return!0;if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t+=1)if(!i(n[t]))return!1;return!0}if("object"==typeof e){for(var r in e)if(!i(e[r]))return!1;return!0}return!1}function a(e){if(null===e)return l;if("string"==typeof e)return c;if("boolean"==typeof e)return d;if("number"==typeof e)return u;if(e instanceof o)return f;if(Array.isArray(e)){for(var t,n=e.length,r=0,i=e;r<i.length;r+=1){var s=i[r],g=a(s);if(t){if(t===g)continue;t=p;break}t=g}return m(t||p,n)}return h}var o=e("../util/color"),s=e("./types"),l=s.NullType,u=s.NumberType,c=s.StringType,d=s.BooleanType,f=s.ColorType,h=s.ObjectType,p=s.ValueType,m=s.array;t.exports={Color:o,validateRGBA:r,isValue:i,typeOf:a}},{"../util/color":153,"./types":146}],148:[function(e,t,n){function r(e){if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===e.length&&(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,n=e.slice(1);t<n.length;t+=1){var i=n[t];if(!r(i)&&"boolean"!=typeof i)return!1}return!0;default:return!0}}function i(e){if(!e)return function(){return!0};r(e)||(e=o(e));var t=h(e,p);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return function(e,n){return t.value.evaluate(e,n)}}function a(e,t){return e<t?-1:e>t?1:0}function o(e){if(!e)return!0;var t=e[0];return e.length<=1?"any"!==t:"=="===t?s(e[1],e[2],"=="):"!="===t?d(s(e[1],e[2],"==")):"<"===t||">"===t||"<="===t||">="===t?s(e[1],e[2],t):"any"===t?l(e.slice(1)):"all"===t?["all"].concat(e.slice(1).map(o)):"none"===t?["all"].concat(e.slice(1).map(o).map(d)):"in"===t?u(e[1],e.slice(2)):"!in"===t?d(u(e[1],e.slice(2))):"has"===t?c(e[1]):"!has"!==t||d(c(e[1]))}function s(e,t,n){switch(e){case"$type":return["filter-type-"+n,t];case"$id":return["filter-id-"+n,t];default:return["filter-"+n,e,t]}}function l(e){return["any"].concat(e.map(o))}function u(e,t){if(0===t.length)return!1;switch(e){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some(function(e){return typeof e!=typeof t[0]})?["filter-in-large",e,["literal",t.sort(a)]]:["filter-in-small",e,["literal",t]]}}function c(e){switch(e){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",e]}}function d(e){return["!",e]}var f=e("../expression"),h=f.createExpression;t.exports=i,t.exports.isExpressionFilter=r;var p={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":139}],149:[function(e,t,n){function r(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}function i(e){return e}function a(e,t){var n="color"===t.type,r=e.stops&&"object"==typeof e.stops[0][0],i=r||void 0!==e.property,d=r||!i,f=e.type||("interpolated"===t.function?"exponential":"interval");if(n&&(e=m({},e),e.stops&&(e.stops=e.stops.map(function(e){return[e[0],p.parse(e[1])]})),e.default?e.default=p.parse(e.default):e.default=p.parse(t.default)),e.colorSpace&&"rgb"!==e.colorSpace&&!h[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var g,y,_;if("exponential"===f)g=u;else if("interval"===f)g=l;else if("categorical"===f){g=s,y=Object.create(null);for(var b=0,x=e.stops;b<x.length;b+=1){var w=x[b];y[w[0]]=w[1]}_=typeof e.stops[0][0]}else{if("identity"!==f)throw new Error('Unknown function type "'+f+'"');g=c}if(r){for(var k={},T=[],M=0;M<e.stops.length;M++){var A=e.stops[M],C=A[0].zoom;void 0===k[C]&&(k[C]={zoom:C,type:e.type,property:e.property,default:e.default,stops:[]},T.push(C)),k[C].stops.push([A[0].value,A[1]])}for(var S=[],E=0,P=T;E<P.length;E+=1){var I=P[E];S.push([k[I].zoom,a(k[I],t)])}return{kind:"composite",interpolationFactor:v.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:S.map(function(e){return e[0]}),evaluate:function(n,r){var i=n.zoom;return u({stops:S,base:e.base},t,i).evaluate(i,r)}}}return d?{kind:"camera",interpolationFactor:"exponential"===f?v.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(n){var r=n.zoom;return g(e,t,r,y,_)}}:{kind:"source",evaluate:function(n,r){var i=r&&r.properties?r.properties[e.property]:void 0;return void 0===i?o(e.default,t.default):g(e,t,i,y,_)}}}function o(e,t,n){return void 0!==e?e:void 0!==t?t:void 0!==n?n:void 0}function s(e,t,n,r,i){return o(typeof n===i?r[n]:void 0,e.default,t.default)}function l(e,t,n){if("number"!==g(n))return o(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[r-1][0])return e.stops[r-1][1];var i=d(e.stops,n);return e.stops[i][1]}function u(e,t,n){var r=void 0!==e.base?e.base:1;if("number"!==g(n))return o(e.default,t.default);var a=e.stops.length;if(1===a)return e.stops[0][1];if(n<=e.stops[0][0])return e.stops[0][1];if(n>=e.stops[a-1][0])return e.stops[a-1][1];var s=d(e.stops,n),l=f(n,r,e.stops[s][0],e.stops[s+1][0]),u=e.stops[s][1],c=e.stops[s+1][1],p=y[t.type]||i;if(e.colorSpace&&"rgb"!==e.colorSpace){var m=h[e.colorSpace];p=function(e,t){return m.reverse(m.interpolate(m.forward(e),m.forward(t),l))}}return"function"==typeof u.evaluate?{evaluate:function(){for(var e=arguments,t=[],n=arguments.length;n--;)t[n]=e[n];var r=u.evaluate.apply(void 0,t),i=c.evaluate.apply(void 0,t);if(void 0!==r&&void 0!==i)return p(r,i,l)}}:p(u,c,l)}function c(e,t,n){return"color"===t.type?n=p.parse(n):g(n)===t.type||"enum"===t.type&&t.values[n]||(n=void 0),o(n,e.default,t.default)}function d(e,t){for(var n,r,i=e.length,a=0,o=i-1,s=0;a<=o;){if(s=Math.floor((a+o)/2),n=e[s][0],r=e[s+1][0],t===n||t>n&&t<r)return s;n<t?a=s+1:n>t&&(o=s-1)}return Math.max(s-1,0)}function f(e,t,n,r){var i=r-n,a=e-n;return 0===i?0:1===t?a/i:(Math.pow(t,a)-1)/(Math.pow(t,i)-1)}var h=e("../util/color_spaces"),p=e("../util/color"),m=e("../util/extend"),g=e("../util/get_type"),y=e("../util/interpolate"),v=e("../expression/definitions/interpolate");t.exports={createFunction:a,isFunction:r}},{"../expression/definitions/interpolate":132,"../util/color":153,"../util/color_spaces":154,"../util/extend":156,"../util/get_type":157,"../util/interpolate":158}],150:[function(e,t,n){function r(e){var t=typeof e;if("number"===t||"boolean"===t||"string"===t||void 0===e||null===e)return JSON.stringify(e);if(Array.isArray(e)){for(var n="[",i=0,a=e;i<a.length;i+=1)n+=r(a[i])+",";return n+"]"}for(var o=Object.keys(e).sort(),s="{",l=0;l<o.length;l++)s+=JSON.stringify(o[l])+":"+r(e[o[l]])+",";return s+"}"}function i(e){for(var t="",n=0,i=o;n<i.length;n+=1)t+="/"+r(e[i[n]]);return t}function a(e){for(var t={},n=0;n<e.length;n++){var r=i(e[n]),a=t[r];a||(a=t[r]=[]),a.push(e[n])}var o=[];for(var s in t)o.push(t[s]);return o}var o=e("./util/ref_properties");t.exports=a},{"./util/ref_properties":159}],151:[function(e,t,n){t.exports=e("./v8.json")},{"./v8.json":152}],152:[function(e,t,n){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!1},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!1,units:"milliseconds"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,function:"interpolated","zoom-function":!0,transition:!1},"hillshade-illumination-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"hillshade-shadow-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",function:"interpolated","zoom-function":!0,transition:!0},"hillshade-accent-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],153:[function(e,t,n){var r=e("csscolorparser"),i=r.parseCSSColor,a=function(e,t,n,r){void 0===r&&(r=1),this.r=e,this.g=t,this.b=n,this.a=r};a.parse=function(e){if(e){if(e instanceof a)return e;if("string"==typeof e){var t=i(e);if(t)return new a(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},a.prototype.toString=function(){var e=this,t=function(t){return Math.round(255*t/e.a)};return"rgba("+[this.r,this.g,this.b].map(t).concat(this.a).join(",")+")"},a.black=new a(0,0,0,1),a.white=new a(1,1,1,1),a.transparent=new a(0,0,0,0),t.exports=a},{csscolorparser:13}],154:[function(e,t,n){function r(e){return e>w?Math.pow(e,1/3):e/x+_}function i(e){return e>b?e*e*e:x*(e-_)}function a(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function o(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function s(e){var t=o(e.r),n=o(e.g),i=o(e.b),a=r((.4124564*t+.3575761*n+.1804375*i)/g),s=r((.2126729*t+.7151522*n+.072175*i)/y);return{l:116*s-16,a:500*(a-s),b:200*(s-r((.0193339*t+.119192*n+.9503041*i)/v)),alpha:e.a}}function l(e){var t=(e.l+16)/116,n=isNaN(e.a)?t:t+e.a/500,r=isNaN(e.b)?t:t-e.b/200;return t=y*i(t),n=g*i(n),r=v*i(r),new p(a(3.2404542*n-1.5371385*t-.4985314*r),a(-.969266*n+1.8760108*t+.041556*r),a(.0556434*n-.2040259*t+1.0572252*r),e.alpha)}function u(e,t,n){return{l:m(e.l,t.l,n),a:m(e.a,t.a,n),b:m(e.b,t.b,n),alpha:m(e.alpha,t.alpha,n)}}function c(e){var t=s(e),n=t.l,r=t.a,i=t.b,a=Math.atan2(i,r)*T;return{h:a<0?a+360:a,c:Math.sqrt(r*r+i*i),l:n,alpha:e.a}}function d(e){var t=e.h*k,n=e.c;return l({l:e.l,a:Math.cos(t)*n,b:Math.sin(t)*n,alpha:e.alpha})}function f(e,t,n){var r=t-e;return e+n*(r>180||r<-180?r-360*Math.round(r/360):r)}function h(e,t,n){return{h:f(e.h,t.h,n),c:m(e.c,t.c,n),l:m(e.l,t.l,n),alpha:m(e.alpha,t.alpha,n)}}var p=e("./color"),m=e("./interpolate").number,g=.95047,y=1,v=1.08883,_=4/29,b=6/29,x=3*b*b,w=b*b*b,k=Math.PI/180,T=180/Math.PI;t.exports={lab:{forward:s,reverse:l,interpolate:u},hcl:{forward:c,reverse:d,interpolate:h}}},{"./color":153,"./interpolate":158}],155:[function(e,t,n){function r(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!r(e[n],t[n]))return!1;return!0}if("object"==typeof e&&null!==e&&null!==t){if("object"!=typeof t)return!1;if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(!r(e[i],t[i]))return!1;return!0}return e===t}t.exports=r},{}],156:[function(e,t,n){t.exports=function(e){for(var t=arguments,n=[],r=arguments.length-1;r-- >0;)n[r]=t[r+1];for(var i=0,a=n;i<a.length;i+=1){var o=a[i];for(var s in o)e[s]=o[s]}return e}},{}],157:[function(e,t,n){t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":typeof e}},{}],158:[function(e,t,n){function r(e,t,n){return e*(1-n)+t*n}function i(e,t,n){return new o(r(e.r,t.r,n),r(e.g,t.g,n),r(e.b,t.b,n),r(e.a,t.a,n))}function a(e,t,n){return e.map(function(e,i){return r(e,t[i],n)})}var o=e("./color");t.exports={number:r,color:i,array:a}},{"./color":153}],159:[function(e,t,n){t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],160:[function(e,t,n){function r(e){return{result:"success",value:e}}function i(e){return{result:"error",value:e}}t.exports={success:r,error:i}},{}],161:[function(e,t,n){function r(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function i(e){return Array.isArray(e)?e.map(i):r(e)}t.exports=r,t.exports.deep=i},{}],162:[function(e,t,n){var r=e("../util/extend"),i=e("../util/unbundle_jsonlint"),a=e("../expression"),o=a.isExpression,s=e("../function"),l=s.isFunction;t.exports=function(t){var n=e("./validate_function"),a=e("./validate_expression"),s=e("./validate_object"),u={"*":function(){return[]},array:e("./validate_array"),boolean:e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),enum:e("./validate_enum"),filter:e("./validate_filter"),function:e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),light:e("./validate_light"),string:e("./validate_string")},c=t.value,d=t.valueSpec,f=t.styleSpec;return d.function&&l(i(c))?n(t):d.function&&o(i.deep(c))?a(t):d.type&&u[d.type]?u[d.type](t):s(r({},t,{valueSpec:d.type?f[d.type]:d}))}},{"../expression":139,"../function":149,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate_array":163,"./validate_boolean":164,"./validate_color":165,"./validate_constants":166,"./validate_enum":167,"./validate_expression":168,"./validate_filter":169,"./validate_function":170,"./validate_layer":172,"./validate_light":174,"./validate_number":175,"./validate_object":176,"./validate_source":179,"./validate_string":180}],163:[function(e,t,n){var r=e("../util/get_type"),i=e("./validate"),a=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.valueSpec,o=e.style,s=e.styleSpec,l=e.key,u=e.arrayElementValidator||i;if("array"!==r(t))return[new a(l,t,"array expected, "+r(t)+" found")];if(n.length&&t.length!==n.length)return[new a(l,t,"array length "+n.length+" expected, length "+t.length+" found")];if(n["min-length"]&&t.length<n["min-length"])return[new a(l,t,"array length at least "+n["min-length"]+" expected, length "+t.length+" found")];var c={type:n.value};s.$version<7&&(c.function=n.function),"object"===r(n.value)&&(c=n.value);for(var d=[],f=0;f<t.length;f++)d=d.concat(u({array:t,arrayIndex:f,value:t[f],valueSpec:c,style:o,styleSpec:s,key:l+"["+f+"]"}));return d}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],164:[function(e,t,n){var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,a=r(t);return"boolean"!==a?[new i(n,t,"boolean expected, "+a+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],165:[function(e,t,n){var r=e("../error/validation_error"),i=e("../util/get_type"),a=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,n=e.value,o=i(n);return"string"!==o?[new r(t,n,"color expected, "+o+" found")]:null===a(n)?[new r(t,n,'color expected, "'+n+'" found')]:[]}},{"../error/validation_error":122,"../util/get_type":157,csscolorparser:13}],166:[function(e,t,n){var r=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value;return n?[new r(t,n,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":122}],167:[function(e,t,n){var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,n=e.value,a=e.valueSpec,o=[];return Array.isArray(a.values)?-1===a.values.indexOf(i(n))&&o.push(new r(t,n,"expected one of ["+a.values.join(", ")+"], "+JSON.stringify(n)+" found")):-1===Object.keys(a.values).indexOf(i(n))&&o.push(new r(t,n,"expected one of ["+Object.keys(a.values).join(", ")+"], "+JSON.stringify(n)+" found")),o}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161}],168:[function(e,t,n){var r=e("../error/validation_error"),i=e("../expression"),a=i.createExpression,o=i.createPropertyExpression,s=e("../util/unbundle_jsonlint");t.exports=function(e){var t=("property"===e.expressionContext?o:a)(s.deep(e.value),e.valueSpec);return"error"===t.result?t.value.map(function(t){return new r(""+e.key+t.key,e.value,t.message)}):"property"===e.expressionContext&&"text-font"===e.propertyKey&&-1!==t.value._styleExpression.expression.possibleOutputs().indexOf(void 0)?[new r(e.key,e.value,'Invalid data expression for "text-font". Output values must be contained as literals within the expression.')]:[]}},{"../error/validation_error":122,"../expression":139,"../util/unbundle_jsonlint":161}],169:[function(e,t,n){function r(e){var t=e.value,n=e.key;if("array"!==s(t))return[new i(n,t,"array expected, "+s(t)+" found")];var a,u=e.styleSpec,c=[];if(t.length<1)return[new i(n,t,"filter array must have at least 1 element")];switch(c=c.concat(o({key:n+"[0]",value:t[0],valueSpec:u.filter_operator,style:e.style,styleSpec:e.styleSpec})),l(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===l(t[1])&&c.push(new i(n,t,'"$type" cannot be use with operator "'+t[0]+'"'));case"==":case"!=":3!==t.length&&c.push(new i(n,t,'filter array for operator "'+t[0]+'" must have 3 elements'));case"in":case"!in":t.length>=2&&"string"!==(a=s(t[1]))&&c.push(new i(n+"[1]",t[1],"string expected, "+a+" found"));for(var d=2;d<t.length;d++)a=s(t[d]),"$type"===l(t[1])?c=c.concat(o({key:n+"["+d+"]",value:t[d],valueSpec:u.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==a&&"number"!==a&&"boolean"!==a&&c.push(new i(n+"["+d+"]",t[d],"string, number, or boolean expected, "+a+" found"));break;case"any":case"all":case"none":for(var f=1;f<t.length;f++)c=c.concat(r({key:n+"["+f+"]",value:t[f],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":a=s(t[1]),2!==t.length?c.push(new i(n,t,'filter array for "'+t[0]+'" operator must have 2 elements')):"string"!==a&&c.push(new i(n+"[1]",t[1],"string expected, "+a+" found"))}return c}var i=e("../error/validation_error"),a=e("./validate_expression"),o=e("./validate_enum"),s=e("../util/get_type"),l=e("../util/unbundle_jsonlint"),u=e("../util/extend"),c=e("../feature_filter"),d=c.isExpressionFilter;t.exports=function(e){return d(l.deep(e.value))?a(u({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):r(e)}},{"../error/validation_error":122,"../feature_filter":148,"../util/extend":156,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_expression":168}],170:[function(e,t,n){var r=e("../error/validation_error"),i=e("../util/get_type"),a=e("./validate"),o=e("./validate_object"),s=e("./validate_array"),l=e("./validate_number"),u=e("../util/unbundle_jsonlint");t.exports=function(e){function t(e){if("identity"===g)return[new r(e.key,e.value,'identity function may not have a "stops" property')];var t=[],a=e.value;return t=t.concat(s({key:e.key,value:a,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:n})),"array"===i(a)&&0===a.length&&t.push(new r(e.key,a,"array must have at least one stop")),t}function n(e){var t=[],n=e.value,s=e.key;if("array"!==i(n))return[new r(s,n,"array expected, "+i(n)+" found")];if(2!==n.length)return[new r(s,n,"array length 2 expected, length "+n.length+" found")];if(b){if("object"!==i(n[0]))return[new r(s,n,"object expected, "+i(n[0])+" found")];if(void 0===n[0].zoom)return[new r(s,n,"object stop key must have zoom")];if(void 0===n[0].value)return[new r(s,n,"object stop key must have value")];if(p&&p>u(n[0].zoom))return[new r(s,n[0].zoom,"stop zoom values must appear in ascending order")];u(n[0].zoom)!==p&&(p=u(n[0].zoom),h=void 0,y={}),t=t.concat(o({key:s+"[0]",value:n[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:l,value:c}}))}else t=t.concat(c({key:s+"[0]",value:n[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},n));return t.concat(a({key:s+"[1]",value:n[1],valueSpec:m,style:e.style,styleSpec:e.styleSpec}))}function c(e,t){var n=i(e.value),a=u(e.value),o=null!==e.value?e.value:t;if(f){if(n!==f)return[new r(e.key,o,n+" stop domain type must match previous stop domain type "+f)]}else f=n;if("number"!==n&&"string"!==n&&"boolean"!==n)return[new r(e.key,o,"stop domain value must be a number, string, or boolean")];if("number"!==n&&"categorical"!==g){var s="number expected, "+n+" found";return m["property-function"]&&void 0===g&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new r(e.key,o,s)]}return"categorical"!==g||"number"!==n||isFinite(a)&&Math.floor(a)===a?"categorical"!==g&&"number"===n&&void 0!==h&&a<h?[new r(e.key,o,"stop domain values must appear in ascending order")]:(h=a,"categorical"===g&&a in y?[new r(e.key,o,"stop domain values must be unique")]:(y[a]=!0,[])):[new r(e.key,o,"integer expected, found "+a)]}function d(e){return a({key:e.key,value:e.value,valueSpec:m,style:e.style,styleSpec:e.styleSpec})}var f,h,p,m=e.valueSpec,g=u(e.value.type),y={},v="categorical"!==g&&void 0===e.value.property,_=!v,b="array"===i(e.value.stops)&&"array"===i(e.value.stops[0])&&"object"===i(e.value.stops[0][0]),x=o({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,default:d}});return"identity"===g&&v&&x.push(new r(e.key,e.value,'missing required property "property"')),"identity"===g||e.value.stops||x.push(new r(e.key,e.value,'missing required property "stops"')),"exponential"===g&&"piecewise-constant"===e.valueSpec.function&&x.push(new r(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(_&&!e.valueSpec["property-function"]?x.push(new r(e.key,e.value,"property functions not supported")):v&&!e.valueSpec["zoom-function"]&&"heatmap-color"!==e.objectKey&&x.push(new r(e.key,e.value,"zoom functions not supported"))),"categorical"!==g&&!b||void 0!==e.value.property||x.push(new r(e.key,e.value,'"property" property is required')),x}},{"../error/validation_error":122,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_array":163,"./validate_number":175,"./validate_object":176}],171:[function(e,t,n){var r=e("../error/validation_error"),i=e("./validate_string");t.exports=function(e){var t=e.value,n=e.key,a=i(e);return a.length?a:(-1===t.indexOf("{fontstack}")&&a.push(new r(n,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&a.push(new r(n,t,'"glyphs" url must include a "{range}" token')),a)}},{"../error/validation_error":122,"./validate_string":180}],172:[function(e,t,n){var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),a=e("./validate_object"),o=e("./validate_filter"),s=e("./validate_paint_property"),l=e("./validate_layout_property"),u=e("./validate"),c=e("../util/extend");t.exports=function(e){var t=[],n=e.value,d=e.key,f=e.style,h=e.styleSpec;n.type||n.ref||t.push(new r(d,n,'either "type" or "ref" is required'));var p=i(n.type),m=i(n.ref);if(n.id)for(var g=i(n.id),y=0;y<e.arrayIndex;y++){var v=f.layers[y];i(v.id)===g&&t.push(new r(d,n.id,'duplicate layer id "'+n.id+'", previously used at line '+v.id.__line__))}if("ref"in n){["type","source","source-layer","filter","layout"].forEach(function(e){e in n&&t.push(new r(d,n[e],'"'+e+'" is prohibited for ref layers'))});var _;f.layers.forEach(function(e){i(e.id)===m&&(_=e)}),_?_.ref?t.push(new r(d,n.ref,"ref cannot reference another ref layer")):p=i(_.type):t.push(new r(d,n.ref,'ref layer "'+m+'" not found'))}else if("background"!==p)if(n.source){var b=f.sources&&f.sources[n.source],x=b&&i(b.type);b?"vector"===x&&"raster"===p?t.push(new r(d,n.source,'layer "'+n.id+'" requires a raster source')):"raster"===x&&"raster"!==p?t.push(new r(d,n.source,'layer "'+n.id+'" requires a vector source')):"vector"!==x||n["source-layer"]?"raster-dem"===x&&"hillshade"!==p&&t.push(new r(d,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):t.push(new r(d,n,'layer "'+n.id+'" must specify a "source-layer"')):t.push(new r(d,n.source,'source "'+n.source+'" not found'))}else t.push(new r(d,n,'missing required property "source"'));return t=t.concat(a({key:d,value:n,valueSpec:h.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return u({key:d+".type",value:n.type,valueSpec:h.layer.type,style:e.style,styleSpec:e.styleSpec,object:n,objectKey:"type"})},filter:o,layout:function(e){return a({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return l(c({layerType:p},e))}}})},paint:function(e){return a({layer:n,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return s(c({layerType:p},e))}}})}}}))}},{"../error/validation_error":122,"../util/extend":156,"../util/unbundle_jsonlint":161,"./validate":162,"./validate_filter":169,"./validate_layout_property":173,"./validate_object":176,"./validate_paint_property":177}],173:[function(e,t,n){var r=e("./validate_property");t.exports=function(e){return r(e,"layout")}},{"./validate_property":178}],174:[function(e,t,n){var r=e("../error/validation_error"),i=e("../util/get_type"),a=e("./validate");t.exports=function(e){var t=e.value,n=e.styleSpec,o=n.light,s=e.style,l=[],u=i(t);if(void 0===t)return l;if("object"!==u)return l=l.concat([new r("light",t,"object expected, "+u+" found")]);for(var c in t){var d=c.match(/^(.*)-transition$/);l=d&&o[d[1]]&&o[d[1]].transition?l.concat(a({key:c,value:t[c],valueSpec:n.transition,style:s,styleSpec:n})):o[c]?l.concat(a({key:c,value:t[c],valueSpec:o[c],style:s,styleSpec:n})):l.concat([new r(c,t[c],'unknown property "'+c+'"')])}return l}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],175:[function(e,t,n){var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.key,n=e.value,a=e.valueSpec,o=r(n);return"number"!==o?[new i(t,n,"number expected, "+o+" found")]:"minimum"in a&&n<a.minimum?[new i(t,n,n+" is less than the minimum value "+a.minimum)]:"maximum"in a&&n>a.maximum?[new i(t,n,n+" is greater than the maximum value "+a.maximum)]:[]}},{"../error/validation_error":122,"../util/get_type":157}],176:[function(e,t,n){var r=e("../error/validation_error"),i=e("../util/get_type"),a=e("./validate");t.exports=function(e){var t=e.key,n=e.value,o=e.valueSpec||{},s=e.objectElementValidators||{},l=e.style,u=e.styleSpec,c=[],d=i(n);if("object"!==d)return[new r(t,n,"object expected, "+d+" found")];for(var f in n){var h=f.split(".")[0],p=o[h]||o["*"],m=void 0;if(s[h])m=s[h];else if(o[h])m=a;else if(s["*"])m=s["*"];else{if(!o["*"]){c.push(new r(t,n[f],'unknown property "'+f+'"'));continue}m=a}c=c.concat(m({key:(t?t+".":t)+f,value:n[f],valueSpec:p,style:l,styleSpec:u,object:n,objectKey:f},n))}for(var g in o)s[g]||o[g].required&&void 0===o[g].default&&void 0===n[g]&&c.push(new r(t,n,'missing required property "'+g+'"'));return c}},{"../error/validation_error":122,"../util/get_type":157,"./validate":162}],177:[function(e,t,n){var r=e("./validate_property");t.exports=function(e){return r(e,"paint")}},{"./validate_property":178}],178:[function(e,t,n){var r=e("./validate"),i=e("../error/validation_error"),a=e("../util/get_type"),o=e("../function"),s=o.isFunction,l=e("../util/unbundle_jsonlint");t.exports=function(e,t){var n=e.key,o=e.style,u=e.styleSpec,c=e.value,d=e.objectKey,f=u[t+"_"+e.layerType];if(!f)return[];var h=d.match(/^(.*)-transition$/);if("paint"===t&&h&&f[h[1]]&&f[h[1]].transition)return r({key:n,value:c,valueSpec:u.transition,style:o,styleSpec:u});var p=e.valueSpec||f[d];if(!p)return[new i(n,c,'unknown property "'+d+'"')];var m;if("string"===a(c)&&p["property-function"]&&!p.tokens&&(m=/^{([^}]+)}$/.exec(c)))return[new i(n,c,'"'+d+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(m[1])+" }`.")];var g=[];return"symbol"===e.layerType&&("text-field"===d&&o&&!o.glyphs&&g.push(new i(n,c,'use of "text-field" requires a style "glyphs" property')),"text-font"===d&&s(l.deep(c))&&"identity"===l(c.type)&&g.push(new i(n,c,'"text-font" does not support identity functions'))),g.concat(r({key:e.key,value:c,valueSpec:p,style:o,styleSpec:u,expressionContext:"property",propertyKey:d}))}},{"../error/validation_error":122,"../function":149,"../util/get_type":157,"../util/unbundle_jsonlint":161,"./validate":162}],179:[function(e,t,n){var r=e("../error/validation_error"),i=e("../util/unbundle_jsonlint"),a=e("./validate_object"),o=e("./validate_enum");t.exports=function(e){var t=e.value,n=e.key,s=e.styleSpec,l=e.style;if(!t.type)return[new r(n,t,'"type" is required')];var u=i(t.type),c=[];switch(u){case"vector":case"raster":case"raster-dem":if(c=c.concat(a({key:n,value:t,valueSpec:s["source_"+u.replace("-","_")],style:e.style,styleSpec:s})),"url"in t)for(var d in t)["type","url","tileSize"].indexOf(d)<0&&c.push(new r(n+"."+d,t[d],'a source with a "url" property may not include a "'+d+'" property'));return c;case"geojson":return a({key:n,value:t,valueSpec:s.source_geojson,style:l,styleSpec:s});case"video":return a({key:n,value:t,valueSpec:s.source_video,style:l,styleSpec:s});case"image":return a({key:n,value:t,valueSpec:s.source_image,style:l,styleSpec:s});case"canvas":return a({key:n,value:t,valueSpec:s.source_canvas,style:l,styleSpec:s});default:return o({key:n+".type",value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image","canvas"]},style:l,styleSpec:s})}}},{"../error/validation_error":122,"../util/unbundle_jsonlint":161,"./validate_enum":167,"./validate_object":176}],180:[function(e,t,n){var r=e("../util/get_type"),i=e("../error/validation_error");t.exports=function(e){var t=e.value,n=e.key,a=r(t);return"string"!==a?[new i(n,t,"string expected, "+a+" found")]:[]}},{"../error/validation_error":122,"../util/get_type":157}],181:[function(e,t,n){function r(e,t){t=t||l;var n=[];return n=n.concat(s({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:u,"*":function(){return[]}}})),e.constants&&(n=n.concat(o({key:"constants",value:e.constants,style:e,styleSpec:t}))),i(n)}function i(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function a(e){return function(){return i(e.apply(this,arguments))}}var o=e("./validate/validate_constants"),s=e("./validate/validate"),l=e("./reference/latest"),u=e("./validate/validate_glyphs_url");r.source=a(e("./validate/validate_source")),r.light=a(e("./validate/validate_light")),r.layer=a(e("./validate/validate_layer")),r.filter=a(e("./validate/validate_filter")),r.paintProperty=a(e("./validate/validate_paint_property")),r.layoutProperty=a(e("./validate/validate_layout_property")),t.exports=r},{"./reference/latest":151,"./validate/validate":162,"./validate/validate_constants":166,"./validate/validate_filter":169,"./validate/validate_glyphs_url":171,"./validate/validate_layer":172,"./validate/validate_layout_property":173,"./validate/validate_light":174,"./validate/validate_paint_property":177,"./validate/validate_source":179}],182:[function(e,t,n){var r=e("./zoom_history"),i=function(e,t){this.zoom=e,t?(this.now=t.now,this.fadeDuration=t.fadeDuration,this.zoomHistory=t.zoomHistory,this.transition=t.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new r,this.transition={})};i.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},t.exports=i},{"./zoom_history":212}],183:[function(e,t,n){var r=e("../style-spec/reference/latest"),i=e("../util/util"),a=e("../util/evented"),o=e("./validate_style"),s=e("../util/util"),l=s.sphericalToCartesian,u=(e("../style-spec/util/color"),e("../style-spec/util/interpolate")),c=e("./properties"),d=c.Properties,f=c.Transitionable,h=(c.Transitioning,c.PossiblyEvaluated,c.DataConstantProperty),p=function(){this.specification=r.light.position};p.prototype.possiblyEvaluate=function(e,t){return l(e.expression.evaluate(t))},p.prototype.interpolate=function(e,t,n){return{x:u.number(e.x,t.x,n),y:u.number(e.y,t.y,n),z:u.number(e.z,t.z,n)}};var m=new d({anchor:new h(r.light.anchor),position:new p,color:new h(r.light.color),intensity:new h(r.light.intensity)}),g=function(e){function t(t){e.call(this),this._transitionable=new f(m),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(e){var t=this;if(!this._validate(o.light,e))for(var n in e){var r=e[n];i.endsWith(n,"-transition")?t._transitionable.setTransition(n.slice(0,-"-transition".length),r):t._transitionable.setValue(n,r)}},t.prototype.updateTransitions=function(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},t.prototype._validate=function(e,t){return o.emitErrors(this,e.call(o,i.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:r})))},t}(a);t.exports=g},{"../style-spec/reference/latest":151,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/evented":260,"../util/util":275,"./properties":188,"./validate_style":211}],184:[function(e,t,n){var r=e("../util/mapbox"),i=r.normalizeGlyphsURL,a=e("../util/ajax"),o=e("./parse_glyph_pbf");t.exports=function(e,t,n,r,s){var l=256*t,u=l+255,c=r(i(n).replace("{fontstack}",e).replace("{range}",l+"-"+u),a.ResourceType.Glyphs);a.getArrayBuffer(c,function(e,t){if(e)s(e);else if(t){for(var n={},r=0,i=o(t.data);r<i.length;r+=1){var a=i[r];n[a.id]=a}s(null,n)}})}},{"../util/ajax":251,"../util/mapbox":267,"./parse_glyph_pbf":186}],185:[function(e,t,n){var r=e("../util/ajax"),i=e("../util/browser"),a=e("../util/mapbox"),o=a.normalizeSpriteURL,s=e("../util/image"),l=s.RGBAImage;t.exports=function(e,t,n){function a(){if(c)n(c);else if(s&&u){var e=i.getImageData(u),t={};for(var r in s){var a=s[r],o=a.width,d=a.height,f=a.x,h=a.y,p=a.sdf,m=a.pixelRatio,g=new l({width:o,height:d});l.copy(e,g,{x:f,y:h},{x:0,y:0},{width:o,height:d}),t[r]={data:g,pixelRatio:m,sdf:p}}n(null,t)}}var s,u,c,d=i.devicePixelRatio>1?"@2x":"";r.getJSON(t(o(e,d,".json"),r.ResourceType.SpriteJSON),function(e,t){c||(c=e,s=t,a())}),r.getImage(t(o(e,d,".png"),r.ResourceType.SpriteImage),function(e,t){c||(c=e,u=t,a())})}},{"../util/ajax":251,"../util/browser":252,"../util/image":263,"../util/mapbox":267}],186:[function(e,t,n){function r(e,t,n){1===e&&n.readMessage(i,t)}function i(e,t,n){if(3===e){var r=n.readMessage(a,{}),i=r.id,o=r.bitmap,l=r.width,c=r.height,d=r.left,f=r.top,h=r.advance;t.push({id:i,bitmap:new s({width:l+2*u,height:c+2*u},o),metrics:{width:l,height:c,left:d,top:f,advance:h}})}}function a(e,t,n){1===e?t.id=n.readVarint():2===e?t.bitmap=n.readBytes():3===e?t.width=n.readVarint():4===e?t.height=n.readVarint():5===e?t.left=n.readSVarint():6===e?t.top=n.readSVarint():7===e&&(t.advance=n.readVarint())}var o=e("../util/image"),s=o.AlphaImage,l=e("pbf"),u=3;t.exports=function(e){return new l(e).readFields(r,[])},t.exports.GLYPH_PBF_BORDER=u},{"../util/image":263,pbf:30}],187:[function(e,t,n){var r=e("../util/browser"),i=e("../symbol/placement"),a=function(){this._currentTileIndex=0,this._seenCrossTileIDs={}};a.prototype.continuePlacement=function(e,t,n,r,i){for(var a=this;this._currentTileIndex<e.length;){var o=e[a._currentTileIndex];if(t.placeLayerTile(r,o,n,a._seenCrossTileIDs),a._currentTileIndex++,i())return!0}};var o=function(e,t,n,r,a){this.placement=new i(e,a),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=n,this._showCollisionBoxes=r,this._done=!1};o.prototype.isDone=function(){return this._done},o.prototype.continuePlacement=function(e,t,n){for(var i=this,o=r.now(),s=function(){var e=r.now()-o;return!i._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var l=e[i._currentPlacementIndex],u=t[l],c=i.placement.collisionIndex.transform.zoom;if("symbol"===u.type&&(!u.minzoom||u.minzoom<=c)&&(!u.maxzoom||u.maxzoom>c)){if(i._inProgressLayer||(i._inProgressLayer=new a),i._inProgressLayer.continuePlacement(n[u.source],i.placement,i._showCollisionBoxes,u,s))return;delete i._inProgressLayer}i._currentPlacementIndex--}this._done=!0},o.prototype.commit=function(e,t){return this.placement.commit(e,t),this.placement},t.exports=o},{"../symbol/placement":223,"../util/browser":252}],188:[function(e,t,n){var r=e("../util/util"),i=r.clone,a=r.extend,o=r.easeCubicInOut,s=e("../style-spec/util/interpolate"),l=e("../style-spec/expression"),u=l.normalizePropertyExpression,c=(e("../style-spec/util/color"),e("../util/web_worker_transfer")),d=c.register,f=function(e,t){this.property=e,this.value=t,this.expression=u(void 0===t?e.specification.default:t,e.specification)};f.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},f.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var h=function(e){this.property=e,this.value=new f(e,void 0)};h.prototype.transitioned=function(e,t){return new m(this.property,this.value,t,a({},e.transition,this.transition),e.now)},h.prototype.untransitioned=function(){return new m(this.property,this.value,null,{},0)};var p=function(e){this._properties=e,this._values=Object.create(e.defaultTransitionablePropertyValues)};p.prototype.getValue=function(e){return i(this._values[e].value.value)},p.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new h(this._values[e].property)),this._values[e].value=new f(this._values[e].property,null===t?void 0:i(t))},p.prototype.getTransition=function(e){return i(this._values[e].transition)},p.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new h(this._values[e].property)),this._values[e].transition=i(t)||void 0},p.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],a=e.getValue(i);void 0!==a&&(t[i]=a);var o=e.getTransition(i);void 0!==o&&(t[i+"-transition"]=o)}return t},p.prototype.transitioned=function(e,t){for(var n=this,r=new g(this._properties),i=0,a=Object.keys(n._values);i<a.length;i+=1){var o=a[i];r._values[o]=n._values[o].transitioned(e,t._values[o])}return r},p.prototype.untransitioned=function(){for(var e=this,t=new g(this._properties),n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n];t._values[i]=e._values[i].untransitioned()}return t};var m=function(e,t,n,r,i){this.property=e,this.value=t,this.begin=i+r.delay||0,this.end=this.begin+r.duration||0,e.specification.transition&&(r.delay||r.duration)&&(this.prior=n)};m.prototype.possiblyEvaluate=function(e){var t=e.now||0,n=this.value.possiblyEvaluate(e),r=this.prior;if(r){if(t>this.end)return this.prior=null,n;if(this.value.isDataDriven())return this.prior=null,n;if(t<this.begin)return r.possiblyEvaluate(e);var i=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(r.possiblyEvaluate(e),n,o(i))}return n};var g=function(e){this._properties=e,this._values=Object.create(e.defaultTransitioningPropertyValues)};g.prototype.possiblyEvaluate=function(e){for(var t=this,n=new _(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var a=i[r];n._values[a]=t._values[a].possiblyEvaluate(e)}return n},g.prototype.hasTransition=function(){for(var e=this,t=0,n=Object.keys(e._values);t<n.length;t+=1){var r=n[t];if(e._values[r].prior)return!0}return!1};var y=function(e){this._properties=e,this._values=Object.create(e.defaultPropertyValues)};y.prototype.getValue=function(e){return i(this._values[e].value)},y.prototype.setValue=function(e,t){this._values[e]=new f(this._values[e].property,null===t?void 0:i(t))},y.prototype.serialize=function(){for(var e=this,t={},n=0,r=Object.keys(e._values);n<r.length;n+=1){var i=r[n],a=e.getValue(i);void 0!==a&&(t[i]=a)}return t},y.prototype.possiblyEvaluate=function(e){for(var t=this,n=new _(this._properties),r=0,i=Object.keys(t._values);r<i.length;r+=1){var a=i[r];n._values[a]=t._values[a].possiblyEvaluate(e)}return n};var v=function(e,t,n){this.property=e,this.value=t,this.globals=n};v.prototype.isConstant=function(){return"constant"===this.value.kind},v.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},v.prototype.evaluate=function(e){return this.property.evaluate(this.value,this.globals,e)};var _=function(e){this._properties=e,this._values=Object.create(e.defaultPossiblyEvaluatedValues)};_.prototype.get=function(e){return this._values[e]};var b=function(e){this.specification=e};b.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},b.prototype.interpolate=function(e,t,n){var r=s[this.specification.type];return r?r(e,t,n):e};var x=function(e){this.specification=e};x.prototype.possiblyEvaluate=function(e,t){return"constant"===e.expression.kind||"camera"===e.expression.kind?new v(this,{kind:"constant",value:e.expression.evaluate(t)},t):new v(this,e.expression,t)},x.prototype.interpolate=function(e,t,n){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0!==e.value.value&&void 0!==t.value.value){var r=s[this.specification.type];return r?new v(this,{kind:"constant",value:r(e.value.value,t.value.value,n)},e.globals):e}},x.prototype.evaluate=function(e,t,n){return"constant"===e.kind?e.value:e.evaluate(t,n)};var w=function(e){this.specification=e};w.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var n=e.expression.evaluate(t);return this._calculate(n,n,n,t)}return this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t)}},w.prototype._calculate=function(e,t,n,r){var i=r.zoom,a=i-Math.floor(i),o=r.crossFadingFactor();return i>r.zoomHistory.lastIntegerZoom?{from:e,to:t,fromScale:2,toScale:1,t:a+(1-a)*o}:{from:n,to:t,fromScale:.5,toScale:1,t:1-(1-o)*a}},w.prototype.interpolate=function(e){return e};var k=function(e){this.specification=e};k.prototype.possiblyEvaluate=function(){},k.prototype.interpolate=function(){};var T=function(e){var t=this;this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={};for(var n in e){var r=e[n],i=t.defaultPropertyValues[n]=new f(r,void 0),a=t.defaultTransitionablePropertyValues[n]=new h(r);t.defaultTransitioningPropertyValues[n]=a.untransitioned(),t.defaultPossiblyEvaluatedValues[n]=i.possiblyEvaluate({})}};d("DataDrivenProperty",x),d("DataConstantProperty",b),d("CrossFadedProperty",w),d("HeatmapColorProperty",k),t.exports={PropertyValue:f,Transitionable:p,Transitioning:g,Layout:y,PossiblyEvaluatedPropertyValue:v,PossiblyEvaluated:_,DataConstantProperty:b,DataDrivenProperty:x,CrossFadedProperty:w,HeatmapColorProperty:k,Properties:T}},{"../style-spec/expression":139,"../style-spec/util/color":153,"../style-spec/util/interpolate":158,"../util/util":275,"../util/web_worker_transfer":278}],189:[function(e,t,n){function r(e,t,n){var r=t.paint.get(e).value;return"constant"===r.kind?r.value:n.programConfigurations.get(t.id).binders[e].statistics.max}function i(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function a(e,t,n,r,i){if(!t[0]&&!t[1])return e;var a=o.convert(t);"viewport"===n&&a._rotate(-r);for(var s=[],l=0;l<e.length;l++){for(var u=e[l],c=[],d=0;d<u.length;d++)c.push(u[d].sub(a._mult(i)));s.push(c)}return s}var o=e("@mapbox/point-geometry");t.exports={getMaximumPaintValue:r,translateDistance:i,translate:a}},{"@mapbox/point-geometry":4}],190:[function(e,t,n){var r=e("../util/evented"),i=e("./style_layer"),a=e("./load_sprite"),o=e("../render/image_manager"),s=e("../render/glyph_manager"),l=e("./light"),u=e("../render/line_atlas"),c=e("../util/util"),d=e("../util/ajax"),f=e("../util/mapbox"),h=e("../util/browser"),p=e("../util/dispatcher"),m=e("./validate_style"),g=e("../source/source").getType,y=e("../source/source").setType,v=e("../source/query_features"),_=e("../source/source_cache"),b=(e("../source/geojson_source"),e("../style-spec/reference/latest")),x=e("../util/global_worker_pool"),w=e("../style-spec/deref"),k=e("../style-spec/diff"),T=e("../source/rtl_text_plugin"),M=e("./pauseable_placement"),A=e("./zoom_history"),C=e("../symbol/cross_tile_symbol_index"),S=c.pick(k.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),E=c.pick(k.operations,["setCenter","setZoom","setBearing","setPitch"]),P=function(e){function t(t,n){var r=this;void 0===n&&(n={}),e.call(this),this.map=t,this.dispatcher=new p(x(),this),this.imageManager=new o,this.glyphManager=new s(t._transformRequest,n.localIdeographFontFamily),this.lineAtlas=new u(256,512),this.crossTileSymbolIndex=new C,this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new A,this._loaded=!1,this._resetUpdates();var i=this;this._rtlTextPluginCallback=T.registerForPluginAvailability(function(e){i.dispatcher.broadcast("loadRTLTextPlugin",e.pluginBlobURL,e.errorCallback);for(var t in i.sourceCaches)i.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=r.sourceCaches[e.sourceId];if(t){var n=t.getSource();if(n&&n.vectorLayerIds)for(var i in r._layers){var a=r._layers[i];a.source===n.id&&r._validateLayer(a)}}}})}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadURL=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"});var r="boolean"==typeof t.validate?t.validate:!f.isMapboxURL(e);e=f.normalizeStyleURL(e,t.accessToken);var i=this.map._transformRequest(e,d.ResourceType.Style);d.getJSON(i,function(e,t){e?n.fire("error",{error:e}):t&&n._load(t,r)})},t.prototype.loadJSON=function(e,t){var n=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"}),h.frame(function(){n._load(e,!1!==t.validate)})},t.prototype._load=function(e,t){var n=this;if(!t||!m.emitErrors(this,m(e))){this._loaded=!0,this.stylesheet=e;for(var r in e.sources)n.addSource(r,e.sources[r],{validate:!1});e.sprite?a(e.sprite,this.map._transformRequest,function(e,t){if(e)n.fire("error",e);else if(t)for(var r in t)n.imageManager.addImage(r,t[r]);n.imageManager.setLoaded(!0),n.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var o=w(this.stylesheet.layers);this._order=o.map(function(e){return e.id}),this._layers={};for(var s=0,u=o;s<u.length;s+=1){var c=u[s];c=i.create(c),c.setEventedParent(n,{layer:{id:c.id}}),n._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new l(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},t.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(t){var n=e.sourceLayer;if(n){var r=t.getSource();("geojson"===r.type||r.vectorLayerIds&&-1===r.vectorLayerIds.indexOf(n))&&this.fire("error",{error:new Error('Source layer "'+n+'" does not exist on source "'+r.id+'" as specified by style layer "'+e.id+'"')})}}},t.prototype.loaded=function(){var e=this;if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(var t in e.sourceCaches)if(!e.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},t.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},t.prototype.hasTransitions=function(){var e=this;if(this.light&&this.light.hasTransition())return!0;for(var t in e.sourceCaches)if(e.sourceCaches[t].hasTransition())return!0;for(var n in e._layers)if(e._layers[n].hasTransition())return!0;return!1},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(e){var t=this;if(this._loaded){if(this._changed){var n=Object.keys(this._updatedLayers),r=Object.keys(this._removedLayers);(n.length||r.length)&&this._updateWorkerLayers(n,r);for(var i in t._updatedSources){var a=t._updatedSources[i];"reload"===a?t._reloadSource(i):"clear"===a&&t._clearSource(i)}for(var o in t._updatedPaintProps)t._layers[o].updateTransitions(e);this.light.updateTransitions(e),this._resetUpdates(),this.fire("data",{dataType:"style"})}for(var s in t.sourceCaches)t.sourceCaches[s].used=!1;for(var l=0,u=t._order;l<u.length;l+=1){var c=u[l],d=t._layers[c];d.recalculate(e),!d.isHidden(e.zoom)&&d.source&&(t.sourceCaches[d.source].used=!0)}this.light.recalculate(e),this.z=e.zoom}},t.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={}},t.prototype.setState=function(e){var t=this;if(this._checkLoaded(),m.emitErrors(this,m(e)))return!1;e=c.clone(e),e.layers=w(e.layers);var n=k(this.serialize(),e).filter(function(e){return!(e.command in E)});if(0===n.length)return!1;var r=n.filter(function(e){return!(e.command in S)});if(r.length>0)throw new Error("Unimplemented: "+r.map(function(e){return e.command}).join(", ")+".");return n.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},t.prototype.addImage=function(e,t){if(this.getImage(e))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(e,t),this.fire("data",{dataType:"style"})},t.prototype.getImage=function(e){return this.imageManager.getImage(e)},t.prototype.removeImage=function(e){if(!this.getImage(e))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(e),this.fire("data",{dataType:"style"})},t.prototype.addSource=function(e,t,n){var r=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(t).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(t.type)>=0&&this._validate(m.source,"sources."+e,t,null,n))){this.map&&this.map._collectResourceTiming&&(t.collectResourceTiming=!0);var i=this.sourceCaches[e]=new _(e,t,this.dispatcher);i.style=this,i.setEventedParent(this,function(){return{isSourceLoaded:r.loaded(),source:i.serialize(),sourceId:e}}),i.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(e){var t=this;if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");for(var n in t._layers)if(t._layers[n].source===e)return t.fire("error",{error:new Error('Source "'+e+'" cannot be removed while layer "'+n+'" is using it.')});var r=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],r.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:e}),r.setEventedParent(null),r.clearTiles(),r.onRemove&&r.onRemove(this.map),this._changed=!0},t.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},t.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},t.prototype.addLayer=function(e,t,n){this._checkLoaded();var r=e.id;if("object"==typeof e.source&&(this.addSource(r,e.source),e=c.clone(e),e=c.extend(e,{source:r})),!this._validate(m.layer,"layers."+r,e,{arrayIndex:-1},n)){var a=i.create(e);this._validateLayer(a),a.setEventedParent(this,{layer:{id:r}});var o=t?this._order.indexOf(t):this._order.length;if(t&&-1===o)return void this.fire("error",{error:new Error('Layer with id "'+t+'" does not exist on this map.')});if(this._order.splice(o,0,r),this._layerOrderChanged=!0,this._layers[r]=a,this._removedLayers[r]&&a.source){var s=this._removedLayers[r];delete this._removedLayers[r],s.type!==a.type?this._updatedSources[a.source]="clear":(this._updatedSources[a.source]="reload",this.sourceCaches[a.source].pause())}this._updateLayer(a)}},t.prototype.moveLayer=function(e,t){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")});var n=this._order.indexOf(e);this._order.splice(n,1);var r=t?this._order.indexOf(t):this._order.length;if(t&&-1===r)return void this.fire("error",{error:new Error('Layer with id "'+t+'" does not exist on this map.')});this._order.splice(r,0,e),this._layerOrderChanged=!0},t.prototype.removeLayer=function(e){this._checkLoaded();var t=this._layers[e];if(!t)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);var n=this._order.indexOf(e);this._order.splice(n,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]},t.prototype.getLayer=function(e){return this._layers[e]},t.prototype.setLayerZoomRange=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")});r.minzoom===t&&r.maxzoom===n||(null!=t&&(r.minzoom=t),null!=n&&(r.maxzoom=n),this._updateLayer(r))},t.prototype.setFilter=function(e,t){this._checkLoaded();var n=this.getLayer(e);return n?c.deepEqual(n.filter,t)?void 0:null===t||void 0===t?(n.filter=void 0,void this._updateLayer(n)):void(this._validate(m.filter,"layers."+n.id+".filter",t)||(n.filter=c.clone(t),this._updateLayer(n))):void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(e){return c.clone(this.getLayer(e).filter)},t.prototype.setLayoutProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});c.deepEqual(r.getLayoutProperty(t),n)||(r.setLayoutProperty(t,n),this._updateLayer(r))},t.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},t.prototype.setPaintProperty=function(e,t,n){this._checkLoaded();var r=this.getLayer(e);if(!r)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(r.getPaintProperty(t),n)){var i=r._transitionablePaint._values[t].value.isDataDriven();r.setPaintProperty(t,n),(r._transitionablePaint._values[t].value.isDataDriven()||i)&&this._updateLayer(r),this._changed=!0,this._updatedPaintProps[e]=!0}},t.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},t.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.serialize=function(){var e=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(e){return void 0!==e})},t.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},t.prototype._flattenRenderedFeatures=function(e){for(var t=this,n=[],r=this._order.length-1;r>=0;r--)for(var i=t._order[r],a=0,o=e;a<o.length;a+=1){var s=o[a],l=s[i];if(l)for(var u=0,c=l;u<c.length;u+=1){var d=c[u];n.push(d)}}return n},t.prototype.queryRenderedFeatures=function(e,t,n,r){var i=this;t&&t.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",t.filter);var a={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var o=0,s=t.layers;o<s.length;o+=1){var l=s[o],u=i._layers[l];if(!u)return i.fire("error",{error:"The layer '"+l+"' does not exist in the map's style and cannot be queried for features."}),[];a[u.source]=!0}}var c=[];for(var d in i.sourceCaches)if(!t.layers||a[d]){var f=v.rendered(i.sourceCaches[d],i._layers,e,t,n,r,i.placement?i.placement.collisionIndex:null);c.push(f)}return this._flattenRenderedFeatures(c)},t.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(m.filter,"querySourceFeatures.filter",t.filter);var n=this.sourceCaches[e];return n?v.source(n,t):[]},t.prototype.addSourceType=function(e,t,n){return g(e)?n(new Error('A source type called "'+e+'" already exists.')):(y(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},n):n(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(e){this._checkLoaded();var t=this.light.getLight(),n=!1;for(var r in e)if(!c.deepEqual(e[r],t[r])){n=!0;break}if(n){var i={now:h.now(),transition:c.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e),this.light.updateTransitions(i)}},t.prototype._validate=function(e,t,n,r,i){return(!i||!1!==i.validate)&&m.emitErrors(this,e.call(m,c.extend({key:t,style:this.serialize(),value:n,styleSpec:b},r)))},t.prototype._remove=function(){var e=this;T.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var t in e.sourceCaches)e.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},t.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},t.prototype._updateSources=function(e){var t=this;for(var n in t.sourceCaches)t.sourceCaches[n].update(e)},t.prototype._generateCollisionBoxes=function(){var e=this;for(var t in e.sourceCaches)e._reloadSource(t)},t.prototype._updatePlacement=function(e,t,n){for(var r=this,i=!1,a=!1,o={},s=0,l=r._order;s<l.length;s+=1){var u=l[s],c=r._layers[u];if("symbol"===c.type){if(!o[c.source]){var d=r.sourceCaches[c.source];o[c.source]=d.getRenderableIds().map(function(e){return d.getTileByID(e)}).sort(function(e,t){return t.tileID.overscaledZ-e.tileID.overscaledZ||(e.tileID.isLessThan(t.tileID)?-1:1)})}var f=r.crossTileSymbolIndex.addLayer(c,o[c.source]);i=i||f}}this.crossTileSymbolIndex.pruneUnusedLayers(this._order);var p=this._layerOrderChanged;if((p||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(h.now()))&&(this.pauseablePlacement=new M(e,this._order,p,t,n),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,o),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(this.placement,h.now()),a=!0),i&&this.pauseablePlacement.placement.setStale()),a||i)for(var m=0,g=r._order;m<g.length;m+=1){var y=g[m],v=r._layers[y];"symbol"===v.type&&r.placement.updateLayerOpacities(v,o[v.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(h.now())},t.prototype.getImages=function(e,t,n){this.imageManager.getImages(t.icons,n)},t.prototype.getGlyphs=function(e,t,n){this.glyphManager.getGlyphs(t.stacks,n)},t}(r);t.exports=P},{"../render/glyph_manager":86,"../render/image_manager":88,"../render/line_atlas":89,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":109,"../source/source":110,"../source/source_cache":111,"../style-spec/deref":120,"../style-spec/diff":121,"../style-spec/reference/latest":151,"../symbol/cross_tile_symbol_index":218,"../util/ajax":251,"../util/browser":252,"../util/dispatcher":258,"../util/evented":260,"../util/global_worker_pool":262,"../util/mapbox":267,"../util/util":275,"./light":183,"./load_sprite":185,"./pauseable_placement":187,"./style_layer":191,"./validate_style":211,"./zoom_history":212}],191:[function(e,t,n){var r=e("../util/util"),i=e("../style-spec/reference/latest"),a=e("./validate_style"),o=e("../util/evented"),s=e("./properties"),l=s.Layout,u=s.Transitionable,c=(s.Transitioning,s.Properties,function(e){function t(t,n){var r=this;e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},n.layout&&(this._unevaluatedLayout=new l(n.layout)),this._transitionablePaint=new u(n.paint);for(var i in t.paint)r.setPaintProperty(i,t.paint[i],{validate:!1});for(var a in t.layout)r.setLayoutProperty(a,t.layout[a],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,n){if(null!==t&&void 0!==t){var r="layers."+this.id+".layout."+e;if(this._validate(a.layoutProperty,r,e,t,n))return}if("visibility"===e)return void(this.visibility="none"===t?t:"visible");this._unevaluatedLayout.setValue(e,t)},t.prototype.getPaintProperty=function(e){return r.endsWith(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,n){if(null!==t&&void 0!==t){var i="layers."+this.id+".paint."+e;if(this._validate(a.paintProperty,i,e,t,n))return}r.endsWith(e,"-transition")?this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0):this._transitionablePaint.setValue(e,t)},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updateTransitions=function(e){this._transitioningPaint=this._transitionablePaint.transitioned(e,this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),r.filterObject(e,function(e,t){return!(void 0===e||"layout"===t&&!Object.keys(e).length||"paint"===t&&!Object.keys(e).length)})},t.prototype._validate=function(e,t,n,r,o){return(!o||!1!==o.validate)&&a.emitErrors(this,e.call(a,{key:t,layerType:this.type,objectKey:n,value:r,styleSpec:i,style:{glyphs:!0,sprite:!0}}))},t.prototype.hasOffscreenPass=function(){return!1},t.prototype.resize=function(){},t}(o));t.exports=c;var d={circle:e("./style_layer/circle_style_layer"),heatmap:e("./style_layer/heatmap_style_layer"),hillshade:e("./style_layer/hillshade_style_layer"),fill:e("./style_layer/fill_style_layer"),"fill-extrusion":e("./style_layer/fill_extrusion_style_layer"),line:e("./style_layer/line_style_layer"),symbol:e("./style_layer/symbol_style_layer"),background:e("./style_layer/background_style_layer"),raster:e("./style_layer/raster_style_layer")};c.create=function(e){return new d[e.type](e)}},{"../style-spec/reference/latest":151,"../util/evented":260,"../util/util":275,"./properties":188,"./style_layer/background_style_layer":192,"./style_layer/circle_style_layer":194,"./style_layer/fill_extrusion_style_layer":196,"./style_layer/fill_style_layer":198,"./style_layer/heatmap_style_layer":200,"./style_layer/hillshade_style_layer":202,"./style_layer/line_style_layer":204,"./style_layer/raster_style_layer":206,"./style_layer/symbol_style_layer":208,"./validate_style":211}],192:[function(e,t,n){var r=e("../style_layer"),i=e("./background_style_layer_properties"),a=e("../properties"),o=(a.Transitionable,a.Transitioning,a.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=o},{"../properties":188,"../style_layer":191,"./background_style_layer_properties":193}],193:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty),l=(i.HeatmapColorProperty,new a({"background-color":new o(r.paint_background["background-color"]),"background-pattern":new s(r.paint_background["background-pattern"]),"background-opacity":new o(r.paint_background["background-opacity"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],194:[function(e,t,n){var r=e("../style_layer"),i=e("../../data/bucket/circle_bucket"),a=e("../../util/intersection_tests"),o=a.multiPolygonIntersectsBufferedMultiPoint,s=e("../query_utils"),l=s.getMaximumPaintValue,u=s.translateDistance,c=s.translate,d=e("./circle_style_layer_properties"),f=e("../properties"),h=(f.Transitionable,f.Transitioning,f.PossiblyEvaluated,function(e){function t(t){e.call(this,t,d)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(e){var t=e;return l("circle-radius",this,t)+l("circle-stroke-width",this,t)+u(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,a){var s=c(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),i,a),l=this.paint.get("circle-radius").evaluate(t)*a,u=this.paint.get("circle-stroke-width").evaluate(t)*a;return o(s,n,l+u)},t}(r));t.exports=h},{"../../data/bucket/circle_bucket":42,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./circle_style_layer_properties":195}],195:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=i.DataDrivenProperty,l=(i.CrossFadedProperty,i.HeatmapColorProperty,new a({"circle-radius":new s(r.paint_circle["circle-radius"]),"circle-color":new s(r.paint_circle["circle-color"]),"circle-blur":new s(r.paint_circle["circle-blur"]),"circle-opacity":new s(r.paint_circle["circle-opacity"]),"circle-translate":new o(r.paint_circle["circle-translate"]),"circle-translate-anchor":new o(r.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new o(r.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new o(r.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new s(r.paint_circle["circle-stroke-width"]),"circle-stroke-color":new s(r.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new s(r.paint_circle["circle-stroke-opacity"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":151,"../properties":188}],196:[function(e,t,n){var r=e("../style_layer"),i=e("../../data/bucket/fill_extrusion_bucket"),a=e("../../util/intersection_tests"),o=a.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),l=s.translateDistance,u=s.translate,c=e("./fill_extrusion_style_layer_properties"),d=e("../properties"),f=(d.Transitionable,d.Transitioning,d.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return l(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,a){var s=u(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),i,a);return o(s,n)},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(){this.viewportFrame&&(this.viewportFrame.destroy(),this.viewportFrame=null)},t}(r));t.exports=f},{"../../data/bucket/fill_extrusion_bucket":46,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_extrusion_style_layer_properties":197}],197:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=i.DataDrivenProperty,l=i.CrossFadedProperty,u=(i.HeatmapColorProperty,new a({"fill-extrusion-opacity":new o(r["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new s(r["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new o(r["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new o(r["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new l(r["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new s(r["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new s(r["paint_fill-extrusion"]["fill-extrusion-base"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],198:[function(e,t,n){var r=e("../style_layer"),i=e("../../data/bucket/fill_bucket"),a=e("../../util/intersection_tests"),o=a.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),l=s.translateDistance,u=s.translate,c=e("./fill_style_layer_properties"),d=e("../properties"),f=(d.Transitionable,d.Transitioning,d.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(e){this.paint=this._transitioningPaint.possiblyEvaluate(e),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return l(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,r,i,a){var s=u(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),i,a);return o(s,n)},t}(r));t.exports=f},{"../../data/bucket/fill_bucket":44,"../../util/intersection_tests":264,"../properties":188,"../query_utils":189,"../style_layer":191,"./fill_style_layer_properties":199}],199:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=i.DataDrivenProperty,l=i.CrossFadedProperty,u=(i.HeatmapColorProperty,new a({"fill-antialias":new o(r.paint_fill["fill-antialias"]),"fill-opacity":new s(r.paint_fill["fill-opacity"]),"fill-color":new s(r.paint_fill["fill-color"]),"fill-outline-color":new s(r.paint_fill["fill-outline-color"]),"fill-translate":new o(r.paint_fill["fill-translate"]),"fill-translate-anchor":new o(r.paint_fill["fill-translate-anchor"]),"fill-pattern":new l(r.paint_fill["fill-pattern"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],200:[function(e,t,n){var r=e("../style_layer"),i=e("../../data/bucket/heatmap_bucket"),a=e("../../util/image").RGBAImage,o=e("./heatmap_style_layer_properties"),s=e("../properties"),l=(s.Transitionable,s.Transitioning,s.PossiblyEvaluated,function(e){function t(t){e.call(this,t,o),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new i(e)},t.prototype.setPaintProperty=function(t,n,r){e.prototype.setPaintProperty.call(this,t,n,r),"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){for(var e=this._transitionablePaint._values["heatmap-color"].value.expression,t=new Uint8Array(1024),n=t.length,r=4;r<n;r+=4){var i=e.evaluate({heatmapDensity:r/n});t[r+0]=Math.floor(255*i.r/i.a),t[r+1]=Math.floor(255*i.g/i.a),t[r+2]=Math.floor(255*i.b/i.a),t[r+3]=Math.floor(255*i.a)}this.colorRamp=new a({width:256,height:1},t),this.colorRampTexture=null},t.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},t}(r));t.exports=l},{"../../data/bucket/heatmap_bucket":47,"../../util/image":263,"../properties":188,"../style_layer":191,"./heatmap_style_layer_properties":201}],201:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=i.DataDrivenProperty,l=(i.CrossFadedProperty,i.HeatmapColorProperty),u=new a({"heatmap-radius":new s(r.paint_heatmap["heatmap-radius"]),"heatmap-weight":new s(r.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new o(r.paint_heatmap["heatmap-intensity"]),"heatmap-color":new l(r.paint_heatmap["heatmap-color"]),"heatmap-opacity":new o(r.paint_heatmap["heatmap-opacity"])});t.exports={paint:u}},{"../../style-spec/reference/latest":151,"../properties":188}],202:[function(e,t,n){var r=e("../style_layer"),i=e("./hillshade_style_layer_properties"),a=e("../properties"),o=(a.Transitionable,a.Transitioning,a.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},t}(r));t.exports=o},{"../properties":188,"../style_layer":191,"./hillshade_style_layer_properties":203}],203:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty,i.HeatmapColorProperty,new a({"hillshade-illumination-direction":new o(r.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new o(r.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new o(r.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new o(r.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new o(r.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new o(r.paint_hillshade["hillshade-accent-color"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],204:[function(e,t,n){function r(e,t){return t>0?t+2*e:e}function i(e,t){for(var n=[],r=new a(0,0),i=0;i<e.length;i++){for(var o=e[i],s=[],l=0;l<o.length;l++){var u=o[l-1],c=o[l],d=o[l+1],f=0===l?r:c.sub(u)._unit()._perp(),h=l===o.length-1?r:d.sub(c)._unit()._perp(),p=f._add(h)._unit(),m=p.x*h.x+p.y*h.y;p._mult(1/m),s.push(p._mult(t)._add(c))}n.push(s)}return n}var a=e("@mapbox/point-geometry"),o=e("../style_layer"),s=e("../../data/bucket/line_bucket"),l=e("../../util/intersection_tests"),u=l.multiPolygonIntersectsBufferedMultiLine,c=e("../query_utils"),d=c.getMaximumPaintValue,f=c.translateDistance,h=c.translate,p=e("./line_style_layer_properties"),m=e("../../util/util"),g=m.extend,y=e("../evaluation_parameters"),v=e("../properties"),_=(v.Transitionable,v.Transitioning,v.Layout,v.PossiblyEvaluated,v.DataDrivenProperty),b=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.possiblyEvaluate=function(t,n){return n=new y(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,zoomHistory:n.zoomHistory,transition:n.transition}),e.prototype.possiblyEvaluate.call(this,t,n)},t.prototype.evaluate=function(t,n,r){return n=g({},n,{zoom:Math.floor(n.zoom)}),e.prototype.evaluate.call(this,t,n,r)},t}(_),x=new b(p.paint.properties["line-width"].specification);x.useIntegerZoom=!0;var w=function(e){function t(t){e.call(this,t,p)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=x.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new s(e)},t.prototype.queryRadius=function(e){var t=e,n=r(d("line-width",this,t),d("line-gap-width",this,t)),i=d("line-offset",this,t);return n/2+Math.abs(i)+f(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,n,a,o,s){var l=h(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),o,s),c=s/2*r(this.paint.get("line-width").evaluate(t),this.paint.get("line-gap-width").evaluate(t)),d=this.paint.get("line-offset").evaluate(t);return d&&(n=i(n,d*s)),u(l,n,c)},t}(o);t.exports=w},{"../../data/bucket/line_bucket":49,"../../util/intersection_tests":264,"../../util/util":275,"../evaluation_parameters":182,"../properties":188,"../query_utils":189,"../style_layer":191,"./line_style_layer_properties":205,"@mapbox/point-geometry":4}],205:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=i.DataDrivenProperty,l=i.CrossFadedProperty,u=(i.HeatmapColorProperty,new a({"line-cap":new o(r.layout_line["line-cap"]),"line-join":new s(r.layout_line["line-join"]),"line-miter-limit":new o(r.layout_line["line-miter-limit"]),"line-round-limit":new o(r.layout_line["line-round-limit"])})),c=new a({"line-opacity":new s(r.paint_line["line-opacity"]),"line-color":new s(r.paint_line["line-color"]),"line-translate":new o(r.paint_line["line-translate"]),"line-translate-anchor":new o(r.paint_line["line-translate-anchor"]),"line-width":new s(r.paint_line["line-width"]),"line-gap-width":new s(r.paint_line["line-gap-width"]),"line-offset":new s(r.paint_line["line-offset"]),"line-blur":new s(r.paint_line["line-blur"]),"line-dasharray":new l(r.paint_line["line-dasharray"]),"line-pattern":new l(r.paint_line["line-pattern"])});t.exports={paint:c,layout:u}},{"../../style-spec/reference/latest":151,"../properties":188}],206:[function(e,t,n){var r=e("../style_layer"),i=e("./raster_style_layer_properties"),a=e("../properties"),o=(a.Transitionable,a.Transitioning,a.PossiblyEvaluated,function(e){function t(t){e.call(this,t,i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(r));t.exports=o},{"../properties":188,"../style_layer":191,"./raster_style_layer_properties":207}],207:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=(i.DataDrivenProperty,i.CrossFadedProperty,i.HeatmapColorProperty,new a({"raster-opacity":new o(r.paint_raster["raster-opacity"]),"raster-hue-rotate":new o(r.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new o(r.paint_raster["raster-brightness-min"]),"raster-brightness-max":new o(r.paint_raster["raster-brightness-max"]),"raster-saturation":new o(r.paint_raster["raster-saturation"]),"raster-contrast":new o(r.paint_raster["raster-contrast"]),"raster-fade-duration":new o(r.paint_raster["raster-fade-duration"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":151,"../properties":188}],208:[function(e,t,n){var r=e("../style_layer"),i=e("../../data/bucket/symbol_bucket"),a=e("../../util/token"),o=e("../../style-spec/expression"),s=o.isExpression,l=e("./symbol_style_layer_properties"),u=e("../properties"),c=(u.Transitionable,u.Transitioning,u.Layout,u.PossiblyEvaluated,function(e){function t(t){e.call(this,t,l)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var n=this.layout.get(e).evaluate(t),r=this._unevaluatedLayout._values[e];return r.isDataDriven()||s(r.value)?n:a(t.properties,n)},t.prototype.createBucket=function(e){return new i(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(r));t.exports=c},{"../../data/bucket/symbol_bucket":51,"../../style-spec/expression":139,"../../util/token":274,"../properties":188,"../style_layer":191,"./symbol_style_layer_properties":209}],209:[function(e,t,n){var r=e("../../style-spec/reference/latest"),i=e("../properties"),a=i.Properties,o=i.DataConstantProperty,s=i.DataDrivenProperty,l=(i.CrossFadedProperty,i.HeatmapColorProperty,new a({"symbol-placement":new o(r.layout_symbol["symbol-placement"]),"symbol-spacing":new o(r.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new o(r.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new o(r.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new o(r.layout_symbol["icon-ignore-placement"]),"icon-optional":new o(r.layout_symbol["icon-optional"]),"icon-rotation-alignment":new o(r.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(r.layout_symbol["icon-size"]),"icon-text-fit":new o(r.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new o(r.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(r.layout_symbol["icon-image"]),"icon-rotate":new s(r.layout_symbol["icon-rotate"]),"icon-padding":new o(r.layout_symbol["icon-padding"]),"icon-keep-upright":new o(r.layout_symbol["icon-keep-upright"]),"icon-offset":new s(r.layout_symbol["icon-offset"]),"icon-anchor":new s(r.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new o(r.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new o(r.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new o(r.layout_symbol["text-rotation-alignment"]),"text-field":new s(r.layout_symbol["text-field"]),"text-font":new s(r.layout_symbol["text-font"]),"text-size":new s(r.layout_symbol["text-size"]),"text-max-width":new s(r.layout_symbol["text-max-width"]),"text-line-height":new o(r.layout_symbol["text-line-height"]),"text-letter-spacing":new s(r.layout_symbol["text-letter-spacing"]),"text-justify":new s(r.layout_symbol["text-justify"]),"text-anchor":new s(r.layout_symbol["text-anchor"]),"text-max-angle":new o(r.layout_symbol["text-max-angle"]),"text-rotate":new s(r.layout_symbol["text-rotate"]),"text-padding":new o(r.layout_symbol["text-padding"]),"text-keep-upright":new o(r.layout_symbol["text-keep-upright"]),"text-transform":new s(r.layout_symbol["text-transform"]),"text-offset":new s(r.layout_symbol["text-offset"]),"text-allow-overlap":new o(r.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new o(r.layout_symbol["text-ignore-placement"]),"text-optional":new o(r.layout_symbol["text-optional"])})),u=new a({"icon-opacity":new s(r.paint_symbol["icon-opacity"]),"icon-color":new s(r.paint_symbol["icon-color"]),"icon-halo-color":new s(r.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(r.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(r.paint_symbol["icon-halo-blur"]),"icon-translate":new o(r.paint_symbol["icon-translate"]),"icon-translate-anchor":new o(r.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(r.paint_symbol["text-opacity"]),"text-color":new s(r.paint_symbol["text-color"]),"text-halo-color":new s(r.paint_symbol["text-halo-color"]),"text-halo-width":new s(r.paint_symbol["text-halo-width"]),"text-halo-blur":new s(r.paint_symbol["text-halo-blur"]),"text-translate":new o(r.paint_symbol["text-translate"]),"text-translate-anchor":new o(r.paint_symbol["text-translate-anchor"])});t.exports={paint:u,layout:l}},{"../../style-spec/reference/latest":151,"../properties":188}],210:[function(e,t,n){var r=e("./style_layer"),i=e("../util/util"),a=e("../style-spec/feature_filter"),o=e("../style-spec/group_by_layout"),s=function(e){e&&this.replace(e)};s.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},s.prototype.update=function(e,t){for(var n=this,s=0,l=e;s<l.length;s+=1){var u=l[s];n._layerConfigs[u.id]=u;var c=n._layers[u.id]=r.create(u);c._featureFilter=a(c.filter)}for(var d=0,f=t;d<f.length;d+=1){var h=f[d];delete n._layerConfigs[h],delete n._layers[h]}this.familiesBySource={};for(var p=o(i.values(this._layerConfigs)),m=0,g=p;m<g.length;m+=1){var y=g[m],v=y.map(function(e){return n._layers[e.id]}),_=v[0];if("none"!==_.visibility){var b=_.source||"",x=n.familiesBySource[b];x||(x=n.familiesBySource[b]={});var w=_.sourceLayer||"_geojsonTileLayer",k=x[w];k||(k=x[w]=[]),k.push(v)}}},t.exports=s},{"../style-spec/feature_filter":148,"../style-spec/group_by_layout":150,"../util/util":275,"./style_layer":191}],211:[function(e,t,n){t.exports=e("../style-spec/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){for(var n=0,r=t;n<r.length;n+=1){var i=r[n],a=i.message;e.fire("error",{error:new Error(a)})}return!0}return!1}},{"../style-spec/validate_style.min":181}],212:[function(e,t,n){var r=function(){this.first=!0};r.prototype.update=function(e,t){var n=Math.floor(e);return this.first?(this.first=!1,this.lastIntegerZoom=n,this.lastIntegerZoomTime=0,this.lastZoom=e,this.lastFloorZoom=n,!0):(this.lastFloorZoom>n?(this.lastIntegerZoom=n+1,this.lastIntegerZoomTime=t):this.lastFloorZoom<n&&(this.lastIntegerZoom=n,this.lastIntegerZoomTime=t),e!==this.lastZoom&&(this.lastZoom=e,this.lastFloorZoom=n,!0))},t.exports=r},{}],213:[function(e,t,n){var r=e("@mapbox/point-geometry"),i=e("../util/web_worker_transfer"),a=i.register,o=function(e){function t(t,n,r,i){e.call(this,t,n),this.angle=r,void 0!==i&&(this.segment=i)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(r);a("Anchor",o),t.exports=o},{"../util/web_worker_transfer":278,"@mapbox/point-geometry":4}],214:[function(e,t,n){function r(e,t,n,r,i){if(void 0===t.segment)return!0;for(var a=t,o=t.segment+1,s=0;s>-n/2;){if(--o<0)return!1;s-=e[o].dist(a),a=e[o]}s+=e[o].dist(e[o+1]),o++;for(var l=[],u=0;s<n/2;){var c=e[o-1],d=e[o],f=e[o+1];if(!f)return!1;var h=c.angleTo(d)-d.angleTo(f);for(h=Math.abs((h+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:h}),u+=h;s-l[0].distance>r;)u-=l.shift().angleDelta;if(u>i)return!1;o++,s+=d.dist(f)}return!0}t.exports=r},{}],215:[function(e,t,n){function r(e,t,n,r,a){for(var o=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var d=l[c],f=l[c+1];d.x<t&&f.x<t||(d.x<t?d=new i(t,d.y+(f.y-d.y)*((t-d.x)/(f.x-d.x)))._round():f.x<t&&(f=new i(t,d.y+(f.y-d.y)*((t-d.x)/(f.x-d.x)))._round()),d.y<n&&f.y<n||(d.y<n?d=new i(d.x+(f.x-d.x)*((n-d.y)/(f.y-d.y)),n)._round():f.y<n&&(f=new i(d.x+(f.x-d.x)*((n-d.y)/(f.y-d.y)),n)._round()),d.x>=r&&f.x>=r||(d.x>=r?d=new i(r,d.y+(f.y-d.y)*((r-d.x)/(f.x-d.x)))._round():f.x>=r&&(f=new i(r,d.y+(f.y-d.y)*((r-d.x)/(f.x-d.x)))._round()),d.y>=a&&f.y>=a||(d.y>=a?d=new i(d.x+(f.x-d.x)*((a-d.y)/(f.y-d.y)),a)._round():f.y>=a&&(f=new i(d.x+(f.x-d.x)*((a-d.y)/(f.y-d.y)),a)._round()),u&&d.equals(u[u.length-1])||(u=[d],o.push(u)),u.push(f)))))}return o}var i=e("@mapbox/point-geometry");t.exports=r},{"@mapbox/point-geometry":4}],216:[function(e,t,n){var r=function(e,t,n,r,i,a,o,s,l,u,c){var d=o.top*s-l,f=o.bottom*s+l,h=o.left*s-l,p=o.right*s+l;if(this.boxStartIndex=e.length,u){var m=f-d,g=p-h;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(e,t,n,n.segment,g,m,r,i,a,c))}else e.emplaceBack(n.x,n.y,h,d,p,f,r,i,a,0,0);this.boxEndIndex=e.length};r.prototype._addLineCollisionCircles=function(e,t,n,r,i,a,o,s,l,u){var c=a/2,d=Math.floor(i/c),f=1+.4*Math.log(u)/Math.LN2,h=Math.floor(d*f/2),p=-a/2,m=n,g=r+1,y=p,v=-i/2,_=v-i/4;do{if(--g<0){if(y>v)return;g=0;break}y-=t[g].dist(m),m=t[g]}while(y>_);for(var b=t[g].dist(t[g+1]),x=-h;x<d+h;x++){var w=x*c,k=v+w;if(w<0&&(k+=w),w>i&&(k+=w-i),!(k<y)){for(;y+b<k;){if(y+=b,++g+1>=t.length)return;b=t[g].dist(t[g+1])}var T=k-y,M=t[g],A=t[g+1],C=A.sub(M)._unit()._mult(T)._add(M)._round(),S=Math.abs(k-p)<c?0:.8*(k-p);e.emplaceBack(C.x,C.y,-a/2,-a/2,a/2,a/2,o,s,l,a/2,S)}}},t.exports=r},{}],217:[function(e,t,n){function r(e,t,n){e[t+4]=n?1:0}var i=e("@mapbox/point-geometry"),a=e("../util/intersection_tests"),o=e("./grid_index"),s=e("@mapbox/gl-matrix"),l=(s.mat4,e("../symbol/projection")),u=function(e,t,n){void 0===t&&(t=new o(e.width+200,e.height+200,25)),void 0===n&&(n=new o(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=n,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+100,this.screenBottomBoundary=e.height+100};u.prototype.placeCollisionBox=function(e,t,n,r){var i=this.projectAndGetPerspectiveRatio(r,e.anchorPointX,e.anchorPointY),a=n*i.perspectiveRatio,o=e.x1*a+i.point.x,s=e.y1*a+i.point.y,l=e.x2*a+i.point.x,u=e.y2*a+i.point.y;return!t&&this.grid.hitTest(o,s,l,u)?{box:[],offscreen:!1}:{box:[o,s,l,u],offscreen:this.isOffscreen(o,s,l,u)}},u.prototype.approximateTileDistance=function(e,t,n,r,i){var a=i?1:r/this.pitchfactor,o=e.lastSegmentViewportDistance*n;return e.prevTileDistance+o+(a-1)*o*Math.abs(Math.sin(t))},u.prototype.placeCollisionCircles=function(e,t,n,a,o,s,u,c,d,f,h,p,m){var g=this,y=[],v=this.projectAnchor(f,s.anchorX,s.anchorY),_={},b=d/24,x=s.lineOffsetX*d,w=s.lineOffsetY*d,k=new i(s.anchorX,s.anchorY),T=l.project(k,h).point,M=l.placeFirstAndLastGlyph(b,c,x,w,!1,T,k,s,u,h,_,!0),A=!1,C=!0,S=v.perspectiveRatio*a,E=1/(a*n),P=0,I=0;M&&(P=this.approximateTileDistance(M.first.tileDistance,M.first.angle,E,v.cameraDistance,m),I=this.approximateTileDistance(M.last.tileDistance,M.last.angle,E,v.cameraDistance,m));for(var L=0;L<e.length;L+=5){var O=e[L],z=e[L+1],R=e[L+2],D=e[L+3];if(!M||D<-P||D>I)r(e,L,!1);else{var N=g.projectPoint(f,O,z),F=R*S;if(y.length>0){var j=N.x-y[y.length-4],B=N.y-y[y.length-3];if(F*F*2>j*j+B*B&&L+8<e.length){var U=e[L+8];if(U>-P&&U<I){r(e,L,!1);continue}}}var V=L/5;if(y.push(N.x,N.y,F,V),r(e,L,!0),C=C&&g.isOffscreen(N.x-F,N.y-F,N.x+F,N.y+F),!t&&g.grid.hitTestCircle(N.x,N.y,F)){if(!p)return{circles:[],offscreen:!1};A=!0}}}return{circles:A?[]:y,offscreen:C}},u.prototype.queryRenderedSymbols=function(e,t,n,r,o,s){var l=this,u={},c=[];if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return c;for(var d=this.transform.calculatePosMatrix(t.toUnwrapped()),f=[],h=1/0,p=1/0,m=-1/0,g=-1/0,y=0;y<e.length;y++)for(var v=e[y],_=0;_<v.length;_++){var b=l.projectPoint(d,v[_].x,v[_].y);h=Math.min(h,b.x),p=Math.min(p,b.y),m=Math.max(m,b.x),g=Math.max(g,b.y),f.push(b)}for(var x=t.key,w=[],k=this.grid.query(h,p,m,g),T=0;T<k.length;T++)k[T].sourceID===o&&k[T].tileID===x&&s[k[T].bucketInstanceId]&&w.push(k[T].boxIndex);for(var M=this.ignoredGrid.query(h,p,m,g),A=0;A<M.length;A++)M[A].sourceID===o&&M[A].tileID===x&&s[M[A].bucketInstanceId]&&w.push(M[A].boxIndex);for(var C=0;C<w.length;C++){var S=r.get(w[C]),E=S.sourceLayerIndex,P=S.featureIndex,I=S.bucketIndex;if(void 0===u[E]&&(u[E]={}),void 0===u[E][P]&&(u[E][P]={}),!u[E][P][I]){var L=l.projectAndGetPerspectiveRatio(d,S.anchorPointX,S.anchorPointY),O=n*L.perspectiveRatio,z=S.x1*O+L.point.x,R=S.y1*O+L.point.y,D=S.x2*O+L.point.x,N=S.y2*O+L.point.y,F=[new i(z,R),new i(D,R),new i(D,N),new i(z,N)];a.polygonIntersectsPolygon(f,F)&&(u[E][P][I]=!0,c.push(w[C]))}}return c},u.prototype.insertCollisionBox=function(e,t,n,r,i,a){var o=t?this.ignoredGrid:this.grid,s={tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:a};o.insert(s,e[0],e[1],e[2],e[3])},u.prototype.insertCollisionCircles=function(e,t,n,r,i,a){for(var o=t?this.ignoredGrid:this.grid,s=0;s<e.length;s+=4){var l={tileID:n,sourceID:r,bucketInstanceId:i,boxIndex:a+e[s+3]};o.insertCircle(l,e[s],e[s+1],e[s+2])}},u.prototype.projectAnchor=function(e,t,n){var r=[t,n,0,1];return l.xyTransformMat4(r,r,e),{perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5,cameraDistance:r[3]}},u.prototype.projectPoint=function(e,t,n){var r=[t,n,0,1];return l.xyTransformMat4(r,r,e),new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100)},u.prototype.projectAndGetPerspectiveRatio=function(e,t,n){var r=[t,n,0,1];return l.xyTransformMat4(r,r,e),{point:new i((r[0]/r[3]+1)/2*this.transform.width+100,(-r[1]/r[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/r[3]*.5}},u.prototype.isOffscreen=function(e,t,n,r){return n<100||e>=this.screenRightBoundary||r<100||t>this.screenBottomBoundary},t.exports=u},{"../symbol/projection":224,"../util/intersection_tests":264,"./grid_index":220,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],218:[function(e,t,n){var r=e("../data/extent"),i=512/r/2,a=function(e,t,n){var r=this;this.tileID=e,this.indexedSymbolInstances={},this.bucketInstanceId=n;for(var i=0,a=t;i<a.length;i+=1){var o=a[i],s=o.key;r.indexedSymbolInstances[s]||(r.indexedSymbolInstances[s]=[]),r.indexedSymbolInstances[s].push({crossTileID:o.crossTileID,coord:r.getScaledCoordinates(o,e)})}};a.prototype.getScaledCoordinates=function(e,t){var n=t.canonical.z-this.tileID.canonical.z,a=i/Math.pow(2,n),o=e.anchor;return{x:Math.floor((t.canonical.x*r+o.x)*a),y:Math.floor((t.canonical.y*r+o.y)*a)}},a.prototype.findMatches=function(e,t,n){for(var r=this,i=this.tileID.canonical.z<t.canonical.z?1:Math.pow(2,this.tileID.canonical.z-t.canonical.z),a=0,o=e;a<o.length;a+=1){var s=o[a];if(!s.crossTileID){var l=r.indexedSymbolInstances[s.key];if(l)for(var u=r.getScaledCoordinates(s,t),c=0,d=l;c<d.length;c+=1){var f=d[c];if(Math.abs(f.coord.x-u.x)<=i&&Math.abs(f.coord.y-u.y)<=i&&!n[f.crossTileID]){n[f.crossTileID]=!0,s.crossTileID=f.crossTileID;break}}}}};var o=function(){this.maxCrossTileID=0};o.prototype.generate=function(){return++this.maxCrossTileID};var s=function(){this.indexes={},this.usedCrossTileIDs={}};s.prototype.addBucket=function(e,t,n){var r=this;if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===t.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(var i=0,o=t.symbolInstances;i<o.length;i+=1)o[i].crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});var s=this.usedCrossTileIDs[e.overscaledZ];for(var l in r.indexes){var u=r.indexes[l];if(Number(l)>e.overscaledZ)for(var c in u){var d=u[c];d.tileID.isChildOf(e)&&d.findMatches(t.symbolInstances,e,s)}else{var f=e.scaledTo(Number(l)),h=u[f.key];h&&h.findMatches(t.symbolInstances,e,s)}}for(var p=0,m=t.symbolInstances;p<m.length;p+=1){var g=m[p];g.crossTileID||(g.crossTileID=n.generate(),s[g.crossTileID]=!0)}return void 0===this.indexes[e.overscaledZ]&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new a(e,t.symbolInstances,t.bucketInstanceId),!0},s.prototype.removeBucketCrossTileIDs=function(e,t){var n=this;for(var r in t.indexedSymbolInstances)for(var i=0,a=t.indexedSymbolInstances[r];i<a.length;i+=1){var o=a[i];delete n.usedCrossTileIDs[e][o.crossTileID]}},s.prototype.removeStaleBuckets=function(e){var t=this,n=!1;for(var r in t.indexes){var i=t.indexes[r];for(var a in i)e[i[a].bucketInstanceId]||(t.removeBucketCrossTileIDs(r,i[a]),delete i[a],n=!0)}return n};var l=function(){this.layerIndexes={},this.crossTileIDs=new o,this.maxBucketInstanceId=0};l.prototype.addLayer=function(e,t){var n=this,r=this.layerIndexes[e.id];void 0===r&&(r=this.layerIndexes[e.id]=new s);for(var i=!1,a={},o=0,l=t;o<l.length;o+=1){var u=l[o],c=u.getBucket(e);c&&(c.bucketInstanceId||(c.bucketInstanceId=++n.maxBucketInstanceId),r.addBucket(u.tileID,c,n.crossTileIDs)&&(i=!0),a[c.bucketInstanceId]=!0)}return r.removeStaleBuckets(a)&&(i=!0),i},l.prototype.pruneUnusedLayers=function(e){var t=this,n={};e.forEach(function(e){n[e]=!0});for(var r in t.layerIndexes)n[r]||delete t.layerIndexes[r]},t.exports=l},{"../data/extent":53}],219:[function(e,t,n){function r(e,t,n,r,a,o,s,l,u){var c=r?.6*o*s:0,d=Math.max(r?r.right-r.left:0,a?a.right-a.left:0),f=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;t-d*s<t/4&&(t=d*s+t/4);var h=2*o;return i(e,f?t/2*l%t:(d/2+h)*s*l%t,t,c,n,d*s,f,!1,u)}function i(e,t,n,r,l,u,c,d,f){for(var h=u/2,p=0,m=0;m<e.length-1;m++)p+=e[m].dist(e[m+1]);for(var g=0,y=t-n,v=[],_=0;_<e.length-1;_++){for(var b=e[_],x=e[_+1],w=b.dist(x),k=x.angleTo(b);y+n<g+w;){y+=n;var T=(y-g)/w,M=a(b.x,x.x,T),A=a(b.y,x.y,T);if(M>=0&&M<f&&A>=0&&A<f&&y-h>=0&&y+h<=p){var C=new o(M,A,k,_);C._round(),r&&!s(e,C,u,r,l)||v.push(C)}}g+=w}return d||v.length||c||(v=i(e,g/2,n,r,l,u,c,!0,f)),v}var a=e("../style-spec/util/interpolate").number,o=e("../symbol/anchor"),s=e("./check_max_angle");t.exports=r},{"../style-spec/util/interpolate":158,"../symbol/anchor":213,"./check_max_angle":214}],220:[function(e,t,n){var r=function(e,t,n){var r=this.boxCells=[],i=this.circleCells=[];this.xCellCount=Math.ceil(e/n),this.yCellCount=Math.ceil(t/n);for(var a=0;a<this.xCellCount*this.yCellCount;a++)r.push([]),i.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};r.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},r.prototype.insert=function(e,t,n,r,i){this._forEachCell(t,n,r,i,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(n),this.bboxes.push(r),this.bboxes.push(i)},r.prototype.insertCircle=function(e,t,n,r){this._forEachCell(t-r,n-r,t+r,n+r,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(n),this.circles.push(r)},r.prototype._insertBoxCell=function(e,t,n,r,i,a){this.boxCells[i].push(a)},r.prototype._insertCircleCell=function(e,t,n,r,i,a){this.circleCells[i].push(a)},r.prototype._query=function(e,t,n,r,i){if(n<0||e>this.width||r<0||t>this.height)return!i&&[];var a=[];if(e<=0&&t<=0&&this.width<=n&&this.height<=r)a=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);else{var o={hitTest:i,seenUids:{box:{},circle:{}}};this._forEachCell(e,t,n,r,this._queryCell,a,o)}return i?a.length>0:a},r.prototype._queryCircle=function(e,t,n,r){var i=e-n,a=e+n,o=t-n,s=t+n;if(a<0||i>this.width||s<0||o>this.height)return!r&&[];var l=[],u={hitTest:r,circle:{x:e,y:t,radius:n},seenUids:{box:{},circle:{}}};return this._forEachCell(i,o,a,s,this._queryCellCircle,l,u),r?l.length>0:l},r.prototype.query=function(e,t,n,r){return this._query(e,t,n,r,!1)},r.prototype.hitTest=function(e,t,n,r){return this._query(e,t,n,r,!0)},r.prototype.hitTestCircle=function(e,t,n){return this._queryCircle(e,t,n,!0)},r.prototype._queryCell=function(e,t,n,r,i,a,o){var s=this,l=o.seenUids,u=this.boxCells[i];if(null!==u)for(var c=this.bboxes,d=0,f=u;d<f.length;d+=1){var h=f[d];if(!l.box[h]){l.box[h]=!0;var p=4*h;if(e<=c[p+2]&&t<=c[p+3]&&n>=c[p+0]&&r>=c[p+1]){if(o.hitTest)return a.push(!0),!0;a.push(s.boxKeys[h])}}}var m=this.circleCells[i];if(null!==m)for(var g=this.circles,y=0,v=m;y<v.length;y+=1){var _=v[y];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(s._circleAndRectCollide(g[b],g[b+1],g[b+2],e,t,n,r)){if(o.hitTest)return a.push(!0),!0;a.push(s.circleKeys[_])}}}},r.prototype._queryCellCircle=function(e,t,n,r,i,a,o){var s=this,l=o.circle,u=o.seenUids,c=this.boxCells[i];if(null!==c)for(var d=this.bboxes,f=0,h=c;f<h.length;f+=1){var p=h[f];if(!u.box[p]){u.box[p]=!0;var m=4*p;if(s._circleAndRectCollide(l.x,l.y,l.radius,d[m+0],d[m+1],d[m+2],d[m+3]))return a.push(!0),!0}}var g=this.circleCells[i];if(null!==g)for(var y=this.circles,v=0,_=g;v<_.length;v+=1){var b=_[v];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(s._circlesCollide(y[x],y[x+1],y[x+2],l.x,l.y,l.radius))return a.push(!0),!0}}},r.prototype._forEachCell=function(e,t,n,r,i,a,o){for(var s=this,l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(n),d=this._convertToYCellCoord(r),f=l;f<=c;f++)for(var h=u;h<=d;h++){var p=s.xCellCount*h+f;if(i.call(s,e,t,n,r,p,a,o))return}},r.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},r.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},r.prototype._circlesCollide=function(e,t,n,r,i,a){var o=r-e,s=i-t,l=n+a;return l*l>o*o+s*s},r.prototype._circleAndRectCollide=function(e,t,n,r,i,a,o){var s=(a-r)/2,l=Math.abs(e-(r+s));if(l>s+n)return!1;var u=(o-i)/2,c=Math.abs(t-(i+u));if(c>u+n)return!1;if(l<=s||c<=u)return!0;var d=l-s,f=c-u;return d*d+f*f<=n*n},t.exports=r},{}],221:[function(e,t,n){t.exports=function(e){function t(t){s.push(e[t]),l++}function n(e,t,n){var r=o[e];return delete o[e],o[t]=r,s[r].geometry[0].pop(),s[r].geometry[0]=s[r].geometry[0].concat(n[0]),r}function r(e,t,n){var r=a[t];return delete a[t],a[e]=r,s[r].geometry[0].shift(),s[r].geometry[0]=n[0].concat(s[r].geometry[0]),r}function i(e,t,n){var r=n?t[0][t[0].length-1]:t[0][0];return e+":"+r.x+":"+r.y}for(var a={},o={},s=[],l=0,u=0;u<e.length;u++){var c=e[u],d=c.geometry,f=c.text;if(f){var h=i(f,d),p=i(f,d,!0);if(h in o&&p in a&&o[h]!==a[p]){var m=r(h,p,d),g=n(h,p,s[m].geometry);delete a[h],delete o[p],o[i(f,s[g].geometry,!0)]=g,s[m].geometry=null}else h in o?n(h,p,d):p in a?r(h,p,d):(t(u),a[h]=l-1,o[p]=l-1)}else t(u)}return s.filter(function(e){return e.geometry})}},{}],222:[function(e,t,n){var r=e("../util/web_worker_transfer"),i=r.register,a=function(){this.opacity=0,this.targetOpacity=0,this.time=0};a.prototype.clone=function(){var e=new a;return e.opacity=this.opacity,e.targetOpacity=this.targetOpacity,e.time=this.time,e},i("OpacityState",a),t.exports=a},{"../util/web_worker_transfer":278}],223:[function(e,t,n){function r(e,t,n){e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0),e.emplaceBack(t?1:0,n?1:0)}function i(e){if(0===e.opacity&&!e.placed)return 0;if(1===e.opacity&&e.placed)return 4294967295;var t=e.placed?1:0,n=Math.floor(127*e.opacity);return n*m+t*g+n*y+t*v+n*_+t*b+n*x+t}var a=e("./collision_index"),o=e("../data/extent"),s=e("./symbol_size"),l=e("./projection"),u=e("../style/style_layer/symbol_style_layer_properties").layout,c=e("../source/pixels_to_tile_units"),d=function(e,t,n,r){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?t:-t))):r&&n?1:0,this.placed=n};d.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var f=function(e,t,n,r,i){this.text=new d(e?e.text:null,t,n,i),this.icon=new d(e?e.icon:null,t,r,i)};f.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var h=function(e,t,n){this.text=e,this.icon=t,this.skipFade=n},p=function(e,t){this.transform=e.clone(),this.collisionIndex=new a(this.transform),this.placements={},this.opacities={},this.stale=!1,this.fadeDuration=t};p.prototype.placeLayerTile=function(e,t,n,r){var i=t.getBucket(e);if(i){var a=i.layers[0].layout,s=Math.pow(2,this.transform.zoom-t.tileID.overscaledZ),u=t.tileSize/o,d=this.transform.calculatePosMatrix(t.tileID.toUnwrapped()),f=l.getLabelPlaneMatrix(d,"map"===a.get("text-pitch-alignment"),"map"===a.get("text-rotation-alignment"),this.transform,c(t,1,this.transform.zoom)),h=l.getLabelPlaneMatrix(d,"map"===a.get("icon-pitch-alignment"),"map"===a.get("icon-rotation-alignment"),this.transform,c(t,1,this.transform.zoom));this.placeLayerBucket(i,d,f,h,s,u,n,r,t.collisionBoxArray,t.tileID.key,e.source)}},p.prototype.placeLayerBucket=function(e,t,n,r,i,a,o,l,c,d,f){for(var p=this,m=e.layers[0].layout,g=s.evaluateSizeForZoom(e.textSizeData,this.transform.zoom,u.properties["text-size"]),y=!e.hasTextData()||m.get("text-optional"),v=!e.hasIconData()||m.get("icon-optional"),_=0,b=e.symbolInstances;_<b.length;_+=1){var x=b[_];if(!l[x.crossTileID]){var w=!1,k=!1,T=!0,M=null,A=null,C=null;x.collisionArrays||(x.collisionArrays=e.deserializeCollisionBoxes(c,x.textBoxStartIndex,x.textBoxEndIndex,x.iconBoxStartIndex,x.iconBoxEndIndex)),x.collisionArrays.textBox&&(M=p.collisionIndex.placeCollisionBox(x.collisionArrays.textBox,m.get("text-allow-overlap"),a,t),w=M.box.length>0,T=T&&M.offscreen);var S=x.collisionArrays.textCircles;if(S){var E=e.text.placedSymbolArray.get(x.placedTextSymbolIndices[0]),P=s.evaluateSizeForFeature(e.textSizeData,g,E);A=p.collisionIndex.placeCollisionCircles(S,m.get("text-allow-overlap"),i,a,x.key,E,e.lineVertexArray,e.glyphOffsetArray,P,t,n,o,"map"===m.get("text-pitch-alignment")),w=m.get("text-allow-overlap")||A.circles.length>0,T=T&&A.offscreen}x.collisionArrays.iconBox&&(C=p.collisionIndex.placeCollisionBox(x.collisionArrays.iconBox,m.get("icon-allow-overlap"),a,t),k=C.box.length>0,T=T&&C.offscreen),y||v?v?y||(k=k&&w):w=k&&w:k=w=k&&w,w&&M&&p.collisionIndex.insertCollisionBox(M.box,m.get("text-ignore-placement"),d,f,e.bucketInstanceId,x.textBoxStartIndex),k&&C&&p.collisionIndex.insertCollisionBox(C.box,m.get("icon-ignore-placement"),d,f,e.bucketInstanceId,x.iconBoxStartIndex),w&&A&&p.collisionIndex.insertCollisionCircles(A.circles,m.get("text-ignore-placement"),d,f,e.bucketInstanceId,x.textBoxStartIndex),p.placements[x.crossTileID]=new h(w,k,T||e.justReloaded),l[x.crossTileID]=!0}}e.justReloaded=!1},p.prototype.commit=function(e,t){var n=this;this.commitTime=t;var r=!1,i=e&&0!==this.fadeDuration?(this.commitTime-e.commitTime)/this.fadeDuration:1,a=e?e.opacities:{};for(var o in n.placements){var s=n.placements[o],l=a[o];l?(n.opacities[o]=new f(l,i,s.text,s.icon),r=r||s.text!==l.text.placed||s.icon!==l.icon.placed):(n.opacities[o]=new f(null,i,s.text,s.icon,s.skipFade),r=r||s.text||s.icon)}for(var u in a){var c=a[u];if(!n.opacities[u]){var d=new f(c,i,!1,!1);d.isHidden()||(n.opacities[u]=d,r=r||c.text.placed||c.icon.placed)}}r?this.lastPlacementChangeTime=t:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=e?e.lastPlacementChangeTime:t)},p.prototype.updateLayerOpacities=function(e,t){for(var n=this,r={},i=0,a=t;i<a.length;i+=1){var o=a[i],s=o.getBucket(e);s&&n.updateBucketOpacities(s,r,o.collisionBoxArray)}},p.prototype.updateBucketOpacities=function(e,t,n){var a=this;e.hasTextData()&&e.text.opacityVertexArray.clear(),e.hasIconData()&&e.icon.opacityVertexArray.clear(),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexArray.clear(),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexArray.clear();for(var o=e.layers[0].layout,s=new f(null,0,o.get("text-allow-overlap"),o.get("icon-allow-overlap"),!0),l=0;l<e.symbolInstances.length;l++){var u=e.symbolInstances[l],c=t[u.crossTileID],d=a.opacities[u.crossTileID];d?c&&(d=s):(d=s,a.opacities[u.crossTileID]=d),t[u.crossTileID]=!0;var h=u.numGlyphVertices>0||u.numVerticalGlyphVertices>0,p=u.numIconVertices>0;if(h){for(var m=i(d.text),g=(u.numGlyphVertices+u.numVerticalGlyphVertices)/4,y=0;y<g;y++)e.text.opacityVertexArray.emplaceBack(m);for(var v=0,_=u.placedTextSymbolIndices;v<_.length;v+=1){var b=_[v];e.text.placedSymbolArray.get(b).hidden=d.text.isHidden()}}if(p){for(var x=i(d.icon),w=0;w<u.numIconVertices/4;w++)e.icon.opacityVertexArray.emplaceBack(x);e.icon.placedSymbolArray.get(l).hidden=d.icon.isHidden()}u.collisionArrays||(u.collisionArrays=e.deserializeCollisionBoxes(n,u.textBoxStartIndex,u.textBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex));var k=u.collisionArrays;if(k){k.textBox&&e.hasCollisionBoxData()&&r(e.collisionBox.collisionVertexArray,d.text.placed,!1),k.iconBox&&e.hasCollisionBoxData()&&r(e.collisionBox.collisionVertexArray,d.icon.placed,!1);var T=k.textCircles;if(T&&e.hasCollisionCircleData())for(var M=0;M<T.length;M+=5){var A=c||0===T[M+4];r(e.collisionCircle.collisionVertexArray,d.text.placed,A)}}}e.sortFeatures(this.transform.angle),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasCollisionBoxData()&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(e.collisionBox.collisionVertexArray),e.hasCollisionCircleData()&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(e.collisionCircle.collisionVertexArray)},p.prototype.symbolFadeChange=function(e){return 0===this.fadeDuration?1:(e-this.commitTime)/this.fadeDuration},p.prototype.hasTransitions=function(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration},p.prototype.stillRecent=function(e){return"undefined"!==this.commitTime&&this.commitTime+this.fadeDuration>e},p.prototype.setStale=function(){this.stale=!0};var m=Math.pow(2,25),g=Math.pow(2,24),y=Math.pow(2,17),v=Math.pow(2,16),_=Math.pow(2,9),b=Math.pow(2,8),x=Math.pow(2,1);t.exports=p},{"../data/extent":53,"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":209,"./collision_index":217,"./projection":224,"./symbol_size":228}],224:[function(e,t,n){function r(e,t,n,r,i){var a=y.identity(new Float32Array(16));return t?(y.identity(a),y.scale(a,a,[1/i,1/i,1]),n||y.rotateZ(a,a,r.angle)):(y.scale(a,a,[r.width/2,-r.height/2,1]),y.translate(a,a,[1,-1,0]),y.multiply(a,a,e)),a}function i(e,t,n,r,i){var a=y.identity(new Float32Array(16));return t?(y.multiply(a,a,e),y.scale(a,a,[i,i,1]),n||y.rotateZ(a,a,-r.angle)):(y.scale(a,a,[1,-1,1]),y.translate(a,a,[-1,-1,0]),y.scale(a,a,[2/r.width,2/r.height,1])),a}function a(e,t){var n=[e.x,e.y,0,1];p(n,n,t);var r=n[3];return{point:new m(n[0]/r,n[1]/r),signedDistanceFromCamera:r}}function o(e,t){var n=e[0]/e[3],r=e[1]/e[3];return n>=-t[0]&&n<=t[0]&&r>=-t[1]&&r<=t[1]}function s(e,t,n,r,i,s,l,u){var d=r?e.textSizeData:e.iconSizeData,f=_.evaluateSizeForZoom(d,n.transform.zoom,w.properties[r?"text-size":"icon-size"]),p=[256/n.width*2+1,256/n.height*2+1],g=r?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;g.clear();for(var y=e.lineVertexArray,b=r?e.text.placedSymbolArray:e.icon.placedSymbolArray,x=n.transform.width/n.transform.height,T=!1,M=0;M<b.length;M++){var A=b.get(M);if(A.hidden||A.writingMode===k.vertical&&!T)h(A.numGlyphs,g);else{T=!1;var C=[A.anchorX,A.anchorY,0,1];if(v.transformMat4(C,C,t),o(C,p)){var S=C[3],E=.5+S/n.transform.cameraToCenterDistance*.5,P=_.evaluateSizeForFeature(d,f,A),I=l?P*E:P/E,L=new m(A.anchorX,A.anchorY),O=a(L,i).point,z={},R=c(A,I,!1,u,t,i,s,e.glyphOffsetArray,y,g,O,L,z,x);T=R.useVertical,(R.notEnoughRoom||T||R.needsFlipping&&c(A,I,!0,u,t,i,s,e.glyphOffsetArray,y,g,O,L,z,x).notEnoughRoom)&&h(A.numGlyphs,g)}else h(A.numGlyphs,g)}}r?e.text.dynamicLayoutVertexBuffer.updateData(g):e.icon.dynamicLayoutVertexBuffer.updateData(g)}function l(e,t,n,r,i,a,o,s,l,u,c,d){var h=s.glyphStartIndex+s.numGlyphs,p=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,g=t.getoffsetX(s.glyphStartIndex),y=t.getoffsetX(h-1),v=f(e*g,n,r,i,a,o,s.segment,p,m,l,u,c,d);if(!v)return null;var _=f(e*y,n,r,i,a,o,s.segment,p,m,l,u,c,d);return _?{first:v,last:_}:null}function u(e,t,n,r){return e===k.horizontal&&Math.abs(n.y-t.y)>Math.abs(n.x-t.x)*r?{useVertical:!0}:(e===k.vertical?t.y<n.y:t.x>n.x)?{needsFlipping:!0}:null}function c(e,t,n,r,i,o,s,c,h,p,g,y,v,_){var b,w=t/24,k=e.lineOffsetX*t,T=e.lineOffsetY*t;if(e.numGlyphs>1){var M=e.glyphStartIndex+e.numGlyphs,A=e.lineStartIndex,C=e.lineStartIndex+e.lineLength,S=l(w,c,k,T,n,g,y,e,h,o,v,!1);if(!S)return{notEnoughRoom:!0};var E=a(S.first.point,s).point,P=a(S.last.point,s).point;if(r&&!n){var I=u(e.writingMode,E,P,_);if(I)return I}b=[S.first];for(var L=e.glyphStartIndex+1;L<M-1;L++)b.push(f(w*c.getoffsetX(L),k,T,n,g,y,e.segment,A,C,h,o,v,!1));b.push(S.last)}else{if(r&&!n){var O=a(y,i).point,z=e.lineStartIndex+e.segment+1,R=new m(h.getx(z),h.gety(z)),D=a(R,i),N=D.signedDistanceFromCamera>0?D.point:d(y,R,O,1,i),F=u(e.writingMode,O,N,_);if(F)return F}var j=f(w*c.getoffsetX(e.glyphStartIndex),k,T,n,g,y,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,h,o,v,!1);if(!j)return{notEnoughRoom:!0};b=[j]}for(var B=0,U=b;B<U.length;B+=1){var V=U[B];x(p,V.point,V.angle)}return{}}function d(e,t,n,r,i){var o=a(e.add(e.sub(t)._unit()),i).point,s=n.sub(o);return n.add(s._mult(r/s.mag()))}function f(e,t,n,r,i,o,s,l,u,c,f,h,p){var g=r?e-t:e+t,y=g>0?1:-1,v=0;r&&(y*=-1,v=Math.PI),y<0&&(v+=Math.PI);for(var _=y>0?l+s:l+s+1,b=_,x=i,w=i,k=0,T=0,M=Math.abs(g);k+T<=M;){if((_+=y)<l||_>=u)return null;if(w=x,void 0===(x=h[_])){var A=new m(c.getx(_),c.gety(_)),C=a(A,f);if(C.signedDistanceFromCamera>0)x=h[_]=C.point;else{var S=_-y;x=d(0===k?o:new m(c.getx(S),c.gety(S)),A,w,M-k+1,f)}}k+=T,T=w.dist(x)}var E=(M-k)/T,P=x.sub(w),I=P.mult(E)._add(w);return I._add(P._unit()._perp()._mult(n*y)),{point:I,angle:v+Math.atan2(x.y-w.y,x.x-w.x),tileDistance:p?{prevTileDistance:_-y===b?0:c.gettileUnitDistanceFromAnchor(_-y),lastSegmentViewportDistance:M-k}:null}}function h(e,t){for(var n=0;n<e;n++){var r=t.length;t.resize(r+4),t.float32.set(T,3*r)}}function p(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[4]*i+n[12],e[1]=n[1]*r+n[5]*i+n[13],e[3]=n[3]*r+n[7]*i+n[15],e}var m=e("@mapbox/point-geometry"),g=e("@mapbox/gl-matrix"),y=g.mat4,v=g.vec4,_=e("./symbol_size"),b=e("../data/bucket/symbol_bucket"),x=b.addDynamicAttributes,w=e("../style/style_layer/symbol_style_layer_properties").layout,k=e("../symbol/shaping").WritingMode;t.exports={updateLineLabels:s,getLabelPlaneMatrix:r,getGlCoordMatrix:i,project:a,placeFirstAndLastGlyph:l,xyTransformMat4:p};var T=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":51,"../style/style_layer/symbol_style_layer_properties":209,"../symbol/shaping":226,"./symbol_size":228,"@mapbox/gl-matrix":2,"@mapbox/point-geometry":4}],225:[function(e,t,n){function r(e,t,n,r,i,o,s){var l,u,c,d,f=t.image,h=n.layout,p=t.top-1/f.pixelRatio,m=t.left-1/f.pixelRatio,g=t.bottom+1/f.pixelRatio,y=t.right+1/f.pixelRatio;if("none"!==h.get("icon-text-fit")&&i){var v=y-m,_=g-p,b=h.get("text-size").evaluate(s)/24,x=i.left*b,w=i.right*b,k=i.top*b,T=i.bottom*b,M=w-x,A=T-k,C=h.get("icon-text-fit-padding")[0],S=h.get("icon-text-fit-padding")[1],E=h.get("icon-text-fit-padding")[2],P=h.get("icon-text-fit-padding")[3],I="width"===h.get("icon-text-fit")?.5*(A-_):0,L="height"===h.get("icon-text-fit")?.5*(M-v):0,O="width"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?M:v,z="height"===h.get("icon-text-fit")||"both"===h.get("icon-text-fit")?A:_;l=new a(x+L-P,k+I-C),u=new a(x+L+S+O,k+I-C),c=new a(x+L+S+O,k+I+E+z),d=new a(x+L-P,k+I+E+z)}else l=new a(m,p),u=new a(y,p),c=new a(y,g),d=new a(m,g);var R=n.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(R){var D=Math.sin(R),N=Math.cos(R),F=[N,-D,D,N];l._matMult(F),u._matMult(F),d._matMult(F),c._matMult(F)}return[{tl:l,tr:u,bl:d,br:c,tex:{x:f.textureRect.x-1,y:f.textureRect.y-1,w:f.textureRect.w+2,h:f.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]}function i(e,t,n,r,i,o,l){for(var u=n.layout.get("text-rotate").evaluate(o)*Math.PI/180,c=n.layout.get("text-offset").evaluate(o).map(function(e){return 24*e}),d=t.positionedGlyphs,f=[],h=0;h<d.length;h++){var p=d[h],m=l[p.glyph];if(m){var g=m.rect;if(g){var y=s+1,v=m.metrics.advance/2,_=r?[p.x+v,p.y]:[0,0],b=r?[0,0]:[p.x+v+c[0],p.y+c[1]],x=m.metrics.left-y-v+b[0],w=-m.metrics.top-y+b[1],k=x+g.w,T=w+g.h,M=new a(x,w),A=new a(k,w),C=new a(x,T),S=new a(k,T);if(r&&p.vertical){var E=new a(-v,v),P=-Math.PI/2,I=new a(5,0);M._rotateAround(P,E)._add(I),A._rotateAround(P,E)._add(I),C._rotateAround(P,E)._add(I),S._rotateAround(P,E)._add(I)}if(u){var L=Math.sin(u),O=Math.cos(u),z=[O,-L,L,O];M._matMult(z),A._matMult(z),C._matMult(z),S._matMult(z)}f.push({tl:M,tr:A,bl:C,br:S,tex:g,writingMode:t.writingMode,glyphOffset:_})}}}return f}var a=e("@mapbox/point-geometry"),o=e("../style/parse_glyph_pbf"),s=o.GLYPH_PBF_BORDER;t.exports={getIconQuads:r,getGlyphQuads:i}},{"../style/parse_glyph_pbf":186,"@mapbox/point-geometry":4}],226:[function(e,t,n){function r(e,t){for(var n=[],r=0,i=0,a=t;i<a.length;i+=1){var o=a[i];n.push(e.substring(r,o)),r=o}return r<e.length&&n.push(e.substring(r,e.length)),n}function i(e,t,n,i,a,o,s,l,u,d){var h=e.trim();d===_.vertical&&(h=y(h));var p,m=[],g={positionedGlyphs:m,text:h,top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:d},b=v.processBidirectionalText;return p=b?b(h,c(h,s,n,t)):r(h,c(h,s,n,t)),f(g,t,p,i,a,o,d,s,u),!!m.length&&g}function a(e,t,n,r){for(var i=0,a=0;a<e.length;a++){var o=r[e.charCodeAt(a)];o&&(i+=o.metrics.advance+t)}return i/Math.max(1,Math.ceil(i/n))}function o(e,t,n,r){var i=Math.pow(e-t,2);return r?e<t?i/2:2*i:i+Math.abs(n)*n}function s(e,t){var n=0;return 10===e&&(n-=1e4),40!==e&&65288!==e||(n+=50),41!==t&&65289!==t||(n+=50),n}function l(e,t,n,r,i,a){for(var s=null,l=o(t,n,i,a),u=0,c=r;u<c.length;u+=1){var d=c[u],f=t-d.x,h=o(f,n,i,a)+d.badness;h<=l&&(s=d,l=h)}return{index:e,x:t,priorBreak:s,badness:l}}function u(e){return e?u(e.priorBreak).concat(e.index):[]}function c(e,t,n,r){if(!n)return[];if(!e)return[];for(var i=[],o=a(e,t,n,r),c=0,d=0;d<e.length;d++){var f=e.charCodeAt(d),h=r[f];h&&!b[f]&&(c+=h.metrics.advance+t),d<e.length-1&&(x[f]||g.charAllowsIdeographicBreaking(f))&&i.push(l(d+1,c,o,i,s(f,e.charCodeAt(d+1)),!1))}return u(l(e.length,c,o,i,0,!0))}function d(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0}return{horizontalAlign:t,verticalAlign:n}}function f(e,t,n,r,i,a,o,s,l){for(var u=0,c=-17,f=0,m=e.positionedGlyphs,y="right"===a?1:"left"===a?0:.5,v=0,b=n;v<b.length;v+=1){var x=b[v];if(x=x.trim(),x.length){for(var w=m.length,k=0;k<x.length;k++){var T=x.charCodeAt(k),M=t[T];M&&(g.charHasUprightVerticalOrientation(T)&&o!==_.horizontal?(m.push({glyph:T,x:u,y:0,vertical:!0}),u+=l+s):(m.push({glyph:T,x:u,y:c,vertical:!1}),u+=M.metrics.advance+s))}if(m.length!==w){var A=u-s;f=Math.max(A,f),h(m,t,w,m.length-1,y)}u=0,c+=r}else c+=r}var C=d(i),S=C.horizontalAlign,E=C.verticalAlign;p(m,y,S,E,f,r,n.length);var P=n.length*r;e.top+=-E*P,e.bottom=e.top+P,e.left+=-S*f,e.right=e.left+f}function h(e,t,n,r,i){if(i){var a=t[e[r].glyph];if(a)for(var o=a.metrics.advance,s=(e[r].x+o)*i,l=n;l<=r;l++)e[l].x-=s}}function p(e,t,n,r,i,a,o){for(var s=(t-n)*i,l=(-r*o+.5)*a,u=0;u<e.length;u++)e[u].x+=s,e[u].y+=l}function m(e,t,n){var r=d(n),i=r.horizontalAlign,a=r.verticalAlign,o=t[0],s=t[1],l=o-e.displaySize[0]*i,u=l+e.displaySize[0],c=s-e.displaySize[1]*a;return{image:e,top:c,bottom:c+e.displaySize[1],left:l,right:u}}var g=e("../util/script_detection"),y=e("../util/verticalize_punctuation"),v=e("../source/rtl_text_plugin"),_={horizontal:1,vertical:2,horizontalOnly:3};t.exports={shapeText:i,shapeIcon:m,WritingMode:_};var b={};b[9]=!0,b[10]=!0,b[11]=!0,b[12]=!0,b[13]=!0,b[32]=!0;var x={};x[10]=!0,x[32]=!0,x[38]=!0,x[40]=!0,x[41]=!0,x[43]=!0,x[45]=!0,x[47]=!0,x[173]=!0,x[183]=!0,x[8203]=!0,x[8208]=!0,x[8211]=!0,x[8231]=!0},{"../source/rtl_text_plugin":109,"../util/script_detection":269,"../util/verticalize_punctuation":277}],227:[function(e,t,n){function r(e,t,n,r,a,o){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=T/s,e.compareText={},e.iconsNeedLinear=!1;var l=e.layers[0].layout,u=e.layers[0]._unevaluatedLayout._values,c={};if("composite"===e.textSizeData.functionType){var d=e.textSizeData.zoomRange,f=d.min,g=d.max;c.compositeTextSizes=[u["text-size"].possiblyEvaluate(new A(f)),u["text-size"].possiblyEvaluate(new A(g))]}if("composite"===e.iconSizeData.functionType){var y=e.iconSizeData.zoomRange,v=y.min,_=y.max;c.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new A(v)),u["icon-size"].possiblyEvaluate(new A(_))]}c.layoutTextSize=u["text-size"].possiblyEvaluate(new A(e.zoom+1)),c.layoutIconSize=u["icon-size"].possiblyEvaluate(new A(e.zoom+1)),c.textMaxSize=u["text-size"].possiblyEvaluate(new A(18));for(var w=24*l.get("text-line-height"),k="map"===l.get("text-rotation-alignment")&&"line"===l.get("symbol-placement"),M=l.get("text-keep-upright"),C=0,S=e.features;C<S.length;C+=1){var E=S[C],P=l.get("text-font").evaluate(E).join(","),I=t[P]||{},L=n[P]||{},O={},z=E.text;if(z){var R=x.allowsVerticalWritingMode(z),D=l.get("text-offset").evaluate(E).map(function(e){return 24*e}),N=24*l.get("text-letter-spacing").evaluate(E),F=x.allowsLetterSpacing(z)?N:0,j=l.get("text-anchor").evaluate(E),B=l.get("text-justify").evaluate(E),U="line"!==l.get("symbol-placement")?24*l.get("text-max-width").evaluate(E):0;O.horizontal=h(z,I,U,w,j,B,F,D,24,m.horizontal),R&&k&&M&&(O.vertical=h(z,I,U,w,j,B,F,D,24,m.vertical))}var V=void 0;if(E.icon){var H=r[E.icon];H&&(V=p(a[E.icon],l.get("icon-offset").evaluate(E),l.get("icon-anchor").evaluate(E)),void 0===e.sdfIcons?e.sdfIcons=H.sdf:e.sdfIcons!==H.sdf&&b.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),H.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(O.horizontal||V)&&i(e,E,O,V,L,c)}o&&e.generateCollisionDebugBuffers()}function i(e,t,n,r,i,a){var d=a.layoutTextSize.evaluate(t),f=a.layoutIconSize.evaluate(t),h=a.textMaxSize.evaluate(t);void 0===h&&(h=d);var p=e.layers[0].layout,m=p.get("text-offset").evaluate(t),g=p.get("icon-offset").evaluate(t),y=d/24,v=e.tilePixelRatio*y,_=e.tilePixelRatio*h/24,b=e.tilePixelRatio*f,x=e.tilePixelRatio*p.get("symbol-spacing"),M=p.get("text-padding")*e.tilePixelRatio,A=p.get("icon-padding")*e.tilePixelRatio,C=p.get("text-max-angle")/180*Math.PI,S="map"===p.get("text-rotation-alignment")&&"line"===p.get("symbol-placement"),E="map"===p.get("icon-rotation-alignment")&&"line"===p.get("symbol-placement"),P=p.get("symbol-placement"),I=x/2,L=function(s,l){l.x<0||l.x>=T||l.y<0||l.y>=T||e.symbolInstances.push(o(e,l,s,n,r,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,v,M,S,m,b,A,E,g,{zoom:e.zoom},t,i,a))};if("line"===P)for(var O=0,z=c(t.geometry,0,0,T,T);O<z.length;O+=1)for(var R=z[O],D=u(R,x,C,n.vertical||n.horizontal,r,24,_,e.overscaling,T),N=0,F=D;N<F.length;N+=1){var j=F[N],B=n.horizontal;B&&s(e,B.text,I,j)||L(R,j)}else if("Polygon"===t.type)for(var U=0,V=k(t.geometry,0);U<V.length;U+=1){var H=V[U],W=w(H,16);L(H[0],new l(W.x,W.y,0))}else if("LineString"===t.type)for(var q=0,G=t.geometry;q<G.length;q+=1){var Y=G[q];L(Y,new l(Y[0].x,Y[0].y,0))}else if("Point"===t.type)for(var X=0,Z=t.geometry;X<Z.length;X+=1)for(var J=Z[X],K=0,Q=J;K<Q.length;K+=1){var $=Q[K];L([$],new l($.x,$.y,0))}}function a(e,t,n,r,i,a,o,s,l,u,c,d,f){var h=y(t,n,r,i,a,o,d),p=e.textSizeData,m=null;return"source"===p.functionType?m=[10*r.layout.get("text-size").evaluate(o)]:"composite"===p.functionType&&(m=[10*f.compositeTextSizes[0].evaluate(o),10*f.compositeTextSizes[1].evaluate(o)]),e.addSymbols(e.text,h,m,s,i,o,u,t,l.lineStartIndex,l.lineLength),c.push(e.text.placedSymbolArray.length-1),4*h.length}function o(e,t,n,r,i,o,s,l,u,c,f,h,p,g,y,x,w,k,T,A,C,S){var E,P,I=e.addToLineVertexArray(t,n),L=0,O=0,z=0,R=r.horizontal?r.horizontal.text:"",D=[];r.horizontal&&(E=new _(s,n,t,l,u,c,r.horizontal,f,h,p,e.overscaling),O+=a(e,t,r.horizontal,o,p,T,A,g,I,r.vertical?m.horizontal:m.horizontalOnly,D,C,S),r.vertical&&(z+=a(e,t,r.vertical,o,p,T,A,g,I,m.vertical,D,C,S)));var N=E?E.boxStartIndex:e.collisionBoxArray.length,F=E?E.boxEndIndex:e.collisionBoxArray.length;if(i){var j=v(t,i,o,w,r.horizontal,T,A);P=new _(s,n,t,l,u,c,i,y,x,!1,e.overscaling),L=4*j.length;var B=e.iconSizeData,U=null;"source"===B.functionType?U=[10*o.layout.get("icon-size").evaluate(A)]:"composite"===B.functionType&&(U=[10*S.compositeIconSizes[0].evaluate(A),10*S.compositeIconSizes[1].evaluate(A)]),e.addSymbols(e.icon,j,U,k,w,A,!1,t,I.lineStartIndex,I.lineLength)}var V=P?P.boxStartIndex:e.collisionBoxArray.length,H=P?P.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=M.MAX_GLYPHS&&b.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:R,textBoxStartIndex:N,textBoxEndIndex:F,iconBoxStartIndex:V,iconBoxEndIndex:H,textOffset:g,iconOffset:k,anchor:t,line:n,featureIndex:l,feature:A,numGlyphVertices:O,numVerticalGlyphVertices:z,numIconVertices:L,textOpacityState:new d,iconOpacityState:new d,isDuplicate:!1,placedTextSymbolIndices:D,crossTileID:0}}function s(e,t,n,r){var i=e.compareText;if(t in i){for(var a=i[t],o=a.length-1;o>=0;o--)if(r.dist(a[o])<n)return!0}else i[t]=[];return i[t].push(r),!1}var l=e("./anchor"),u=e("./get_anchors"),c=e("./clip_line"),d=e("./opacity_state"),f=e("./shaping"),h=f.shapeText,p=f.shapeIcon,m=f.WritingMode,g=e("./quads"),y=g.getGlyphQuads,v=g.getIconQuads,_=e("./collision_feature"),b=e("../util/util"),x=e("../util/script_detection"),w=e("../util/find_pole_of_inaccessibility"),k=e("../util/classify_rings"),T=e("../data/extent"),M=e("../data/bucket/symbol_bucket"),A=e("../style/evaluation_parameters");e("@mapbox/point-geometry");t.exports={performSymbolLayout:r}},{"../data/bucket/symbol_bucket":51,"../data/extent":53,"../style/evaluation_parameters":182,"../util/classify_rings":255,"../util/find_pole_of_inaccessibility":261,"../util/script_detection":269,"../util/util":275,"./anchor":213,"./clip_line":215,"./collision_feature":216,"./get_anchors":219,"./opacity_state":222,"./quads":225,"./shaping":226,"@mapbox/point-geometry":4}],228:[function(e,t,n){function r(e,t){var n=t.expression;if("constant"===n.kind)return{functionType:"constant",layoutSize:n.evaluate({zoom:e+1})};if("source"===n.kind)return{functionType:"source"};for(var r=n.zoomStops,i=0;i<r.length&&r[i]<=e;)i++;i=Math.max(0,i-1);for(var a=i;a<r.length&&r[a]<e+1;)a++;a=Math.min(r.length-1,a);var o={min:r[i],max:r[a]};return"composite"===n.kind?{functionType:"composite",zoomRange:o,propertyValue:t.value}:{functionType:"camera",layoutSize:n.evaluate({zoom:e+1}),zoomRange:o,sizeRange:{min:n.evaluate({zoom:o.min}),max:n.evaluate({zoom:o.max})},propertyValue:t.value}}function i(e,t,n){var r=t;return"source"===e.functionType?n.lowerSize/10:"composite"===e.functionType?l.number(n.lowerSize/10,n.upperSize/10,r.uSizeT):r.uSize}function a(e,t,n){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var r=e.propertyValue,i=e.zoomRange,a=e.sizeRange,o=s(r,n.specification),l=u.clamp(o.interpolationFactor(t,i.min,i.max),0,1);return{uSizeT:0,uSize:a.min+l*(a.max-a.min)}}var c=e.propertyValue,d=e.zoomRange,f=s(c,n.specification);return{uSizeT:u.clamp(f.interpolationFactor(t,d.min,d.max),0,1),uSize:0}}var o=e("../style-spec/expression"),s=o.normalizePropertyExpression,l=e("../style-spec/util/interpolate"),u=e("../util/util");t.exports={getSizeData:r,evaluateSizeForFeature:i,evaluateSizeForZoom:a}},{"../style-spec/expression":139,"../style-spec/util/interpolate":158,"../util/util":275}],229:[function(e,t,n){var r=e("../source/rtl_text_plugin");t.exports=function(e,t,n){var i=t.layout.get("text-transform").evaluate(n);return"uppercase"===i?e=e.toLocaleUpperCase():"lowercase"===i&&(e=e.toLocaleLowerCase()),r.applyArabicShaping&&(e=r.applyArabicShaping(e)),e}},{"../source/rtl_text_plugin":109}],230:[function(e,t,n){var r=e("../util/dom"),i=e("@mapbox/point-geometry"),a={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function n(e){v("mouseout",e)}function o(t){e.doubleClickZoom.isActive()||e.stop(),k=r.mousePos(b,t),v("mousedown",t),w=!0}function s(t){var n=e.dragRotate&&e.dragRotate.isActive();x&&!n&&v("contextmenu",x),x=null,w=!1,v("mouseup",t)}function l(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var n=t.toElement||t.target;n&&n!==b;)n=n.parentNode;n===b&&v("mousemove",t)}}function u(e){for(var t=e.toElement||e.target;t&&t!==b;)t=t.parentNode;t===b&&v("mouseover",e)}function c(t){e.stop(),_("touchstart",t),!t.touches||t.touches.length>1||(T?(clearTimeout(T),T=null,v("dblclick",t)):T=setTimeout(p,300))}function d(e){_("touchmove",e)}function f(e){_("touchend",e)}function h(e){_("touchcancel",e)}function p(){T=null}function m(e){r.mousePos(b,e).equals(k)&&v("click",e)}function g(e){v("dblclick",e),e.preventDefault()}function y(t){var n=e.dragRotate&&e.dragRotate.isActive();w||n?w&&(x=t):v("contextmenu",t),t.preventDefault()}function v(t,n){var i=r.mousePos(b,n);return e.fire(t,{lngLat:e.unproject(i),point:i,originalEvent:n})}function _(t,n){var a=r.touchPos(b,n),o=a.reduce(function(e,t,n,r){return e.add(t.div(r.length))},new i(0,0));return e.fire(t,{lngLat:e.unproject(o),point:o,lngLats:a.map(function(t){return e.unproject(t)},this),points:a,originalEvent:n})}var b=e.getCanvasContainer(),x=null,w=!1,k=null,T=null;for(var M in a)e[M]=new a[M](e,t),t.interactive&&t[M]&&e[M].enable(t[M]);b.addEventListener("mouseout",n,!1),b.addEventListener("mousedown",o,!1),b.addEventListener("mouseup",s,!1),b.addEventListener("mousemove",l,!1),b.addEventListener("mouseover",u,!1),b.addEventListener("touchstart",c,!1),b.addEventListener("touchend",f,!1),b.addEventListener("touchmove",d,!1),b.addEventListener("touchcancel",h,!1),b.addEventListener("click",m,!1),b.addEventListener("dblclick",g,!1),b.addEventListener("contextmenu",y,!1)}},{"../util/dom":259,"./handler/box_zoom":239,"./handler/dblclick_zoom":240,"./handler/drag_pan":241,"./handler/drag_rotate":242,"./handler/keyboard":243,"./handler/scroll_zoom":244,"./handler/touch_zoom_rotate":245,"@mapbox/point-geometry":4}],231:[function(e,t,n){var r=e("../util/util"),i=e("../style-spec/util/interpolate").number,a=e("../util/browser"),o=e("../geo/lng_lat"),s=e("../geo/lng_lat_bounds"),l=e("@mapbox/point-geometry"),u=e("../util/evented"),c=function(e){function t(t,n){e.call(this),this.moving=!1,this.transform=t,this._bearingSnap=n.bearingSnap}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},t.prototype.panBy=function(e,t,n){return e=l.convert(e).mult(-1),this.panTo(this.transform.center,r.extend({offset:e},t),n)},t.prototype.panTo=function(e,t,n){return this.easeTo(r.extend({center:e},t),n)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},t.prototype.zoomTo=function(e,t,n){return this.easeTo(r.extend({zoom:e},t),n)},t.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},t.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},t.prototype.rotateTo=function(e,t,n){return this.easeTo(r.extend({bearing:e},t),n)},t.prototype.resetNorth=function(e,t){return this.rotateTo(0,r.extend({duration:1e3},e),t),this},t.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},t.prototype.fitBounds=function(e,t,n){if(t=r.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding){var i=t.padding;t.padding={top:i,bottom:i,right:i,left:i}}if(!r.deepEqual(Object.keys(t.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return r.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;e=s.convert(e);var a=[(t.padding.left-t.padding.right)/2,(t.padding.top-t.padding.bottom)/2],o=Math.min(t.padding.right,t.padding.left),u=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+a[0],t.offset[1]+a[1]];var c=l.convert(t.offset),d=this.transform,f=d.project(e.getNorthWest()),h=d.project(e.getSouthEast()),p=h.sub(f),m=(d.width-2*o-2*Math.abs(c.x))/p.x,g=(d.height-2*u-2*Math.abs(c.y))/p.y;return g<0||m<0?(r.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(t.center=d.unproject(f.add(h).div(2)),t.zoom=Math.min(d.scaleZoom(d.scale*Math.min(m,g)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,n):this.flyTo(t,n))},t.prototype.jumpTo=function(e,t){this.stop();var n=this.transform,r=!1,i=!1,a=!1;return"zoom"in e&&n.zoom!==+e.zoom&&(r=!0,n.zoom=+e.zoom),void 0!==e.center&&(n.center=o.convert(e.center)),"bearing"in e&&n.bearing!==+e.bearing&&(i=!0,n.bearing=+e.bearing),"pitch"in e&&n.pitch!==+e.pitch&&(a=!0,n.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),r&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),i&&this.fire("rotate",t),a&&this.fire("pitchstart",t).fire("pitch",t).fire("pitchend",t),this.fire("moveend",t)},t.prototype.easeTo=function(e,t){var n=this;this.stop(),e=r.extend({offset:[0,0],duration:500,easing:r.ease},e),!1===e.animate&&(e.duration=0);var a=this.transform,s=this.getZoom(),u=this.getBearing(),c=this.getPitch(),d="zoom"in e?+e.zoom:s,f="bearing"in e?this._normalizeBearing(e.bearing,u):u,h="pitch"in e?+e.pitch:c,p=a.centerPoint.add(l.convert(e.offset)),m=a.pointLocation(p),g=o.convert(e.center||m);this._normalizeCenter(g);var y,v,_=a.project(m),b=a.project(g).sub(_),x=a.zoomScale(d-s);return e.around&&(y=o.convert(e.around),v=a.locationPoint(y)),this.zooming=d!==s,this.rotating=u!==f,this.pitching=h!==c,this._prepareEase(t,e.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(e){if(n.zooming&&(a.zoom=i(s,d,e)),n.rotating&&(a.bearing=i(u,f,e)),n.pitching&&(a.pitch=i(c,h,e)),y)a.setLocationAtPoint(y,v);else{var r=a.zoomScale(a.zoom-s),o=d>s?Math.min(2,x):Math.max(.5,x),l=Math.pow(o,1-e),m=a.unproject(_.add(b.mult(e*l)).mult(r));a.setLocationAtPoint(a.renderWorldCopies?m.wrap():m,p)}n._fireMoveEvents(t)},function(){e.delayEndEvents?n._onEaseEnd=setTimeout(function(){return n._afterEase(t)},e.delayEndEvents):n._afterEase(t)},e),this},t.prototype._prepareEase=function(e,t){this.moving=!0,t||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e)},t.prototype._fireMoveEvents=function(e){this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},t.prototype._afterEase=function(e){var t=this.zooming,n=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),n&&this.fire("pitchend",e),this.fire("moveend",e)},t.prototype.flyTo=function(e,t){function n(e){var t=(A*A-M*M+(e?-1:1)*P*P*C*C)/(2*(e?A:M)*P*C);return Math.log(Math.sqrt(t*t+1)-t)}function a(e){return(Math.exp(e)-Math.exp(-e))/2}function s(e){return(Math.exp(e)+Math.exp(-e))/2}function u(e){return a(e)/s(e)}var c=this;this.stop(),e=r.extend({offset:[0,0],speed:1.2,curve:1.42,easing:r.ease},e);var d=this.transform,f=this.getZoom(),h=this.getBearing(),p=this.getPitch(),m="zoom"in e?r.clamp(+e.zoom,d.minZoom,d.maxZoom):f,g="bearing"in e?this._normalizeBearing(e.bearing,h):h,y="pitch"in e?+e.pitch:p,v=d.zoomScale(m-f),_=d.centerPoint.add(l.convert(e.offset)),b=d.pointLocation(_),x=o.convert(e.center||b);this._normalizeCenter(x);var w=d.project(b),k=d.project(x).sub(w),T=e.curve,M=Math.max(d.width,d.height),A=M/v,C=k.mag();if("minZoom"in e){var S=r.clamp(Math.min(e.minZoom,f,m),d.minZoom,d.maxZoom),E=M/d.zoomScale(S-f);T=Math.sqrt(E/C*2)}var P=T*T,I=n(0),L=function(e){return s(I)/s(I+T*e)},O=function(e){return M*((s(I)*u(I+T*e)-a(I))/P)/C},z=(n(1)-I)/T;if(Math.abs(C)<1e-6||!isFinite(z)){if(Math.abs(M-A)<1e-6)return this.easeTo(e,t);var R=A<M?-1:1;z=Math.abs(Math.log(A/M))/T,O=function(){return 0},L=function(e){return Math.exp(R*T*e)}}if("duration"in e)e.duration=+e.duration;else{var D="screenSpeed"in e?+e.screenSpeed/T:+e.speed;e.duration=1e3*z/D}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this.zooming=!0,this.rotating=h!==g,this.pitching=y!==p,this._prepareEase(t,!1),this._ease(function(e){var n=e*z,r=1/L(n);d.zoom=f+d.scaleZoom(r),c.rotating&&(d.bearing=i(h,g,e)),c.pitching&&(d.pitch=i(p,y,e));var a=d.unproject(w.add(k.mult(O(n))).mult(r));d.setLocationAtPoint(d.renderWorldCopies?a.wrap():a,_),c._fireMoveEvents(t)},function(){return c._afterEase(t)},e),this},t.prototype.isEasing=function(){return!!this._isEasing},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._onFrame&&this._finishAnimation(),this},t.prototype._ease=function(e,t,n){var r=this;!1===n.animate||0===n.duration?(e(1),t()):(this._easeStart=a.now(),this._isEasing=!0,this._easeOptions=n,this._startAnimation(function(t){var n=Math.min((a.now()-r._easeStart)/r._easeOptions.duration,1);e(r._easeOptions.easing(n)),1===n&&r.stop()},function(){r._isEasing=!1,t()}))},t.prototype._updateCamera=function(){this._onFrame&&this._onFrame(this.transform)},t.prototype._startAnimation=function(e,t){return void 0===t&&(t=function(){}),this.stop(),this._onFrame=e,this._finishFn=t,this._update(),this},t.prototype._finishAnimation=function(){delete this._onFrame;var e=this._finishFn;delete this._finishFn,e.call(this)},t.prototype._normalizeBearing=function(e,t){e=r.wrap(e,-180,180);var n=Math.abs(e-t);return Math.abs(e-360-t)<n&&(e-=360),Math.abs(e+360-t)<n&&(e+=360),e},t.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var n=e.lng-t.center.lng;e.lng+=n>180?-360:n<-180?360:0}},t}(u);t.exports=c},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../style-spec/util/interpolate":158,"../util/browser":252,"../util/evented":260,"../util/util":275,"@mapbox/point-geometry":4}],232:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=e("../../util/config"),o=function(e){this.options=e,i.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};o.prototype.getDefaultPosition=function(){return"bottom-right"},o.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},o.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:a.ACCESS_TOKEN}];if(e){var n=t.reduce(function(e,n,r){return n.value&&(e+=n.key+"="+n.value+(r<t.length-1?"&":"")),e},"?");e.href="https://www.mapbox.com/feedback/"+n+(this._map._hash?this._map._hash.getHashString(!0):"")}},o.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},o.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var n=this._map.style.sourceCaches;for(var r in n){var i=n[r].getSource();i.attribution&&e.indexOf(i.attribution)<0&&e.push(i.attribution)}e.sort(function(e,t){return e.length-t.length}),e=e.filter(function(t,n){for(var r=n+1;r<e.length;r++)if(e[r].indexOf(t)>=0)return!1;return!0}),e.length?(this._container.innerHTML=e.join(" | "),this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null}},o.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},t.exports=o},{"../../util/config":256,"../../util/dom":259,"../../util/util":275}],233:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=e("../../util/window"),o=function(){this._fullscreen=!1,i.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};o.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=r.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",i.warnOnce("This device does not support fullscreen mode.")),this._container},o.prototype.onRemove=function(){r.remove(this._container),this._map=null,a.document.removeEventListener(this._fullscreenchange,this._changeIcon)},o.prototype._checkFullscreenSupport=function(){return!!(a.document.fullscreenEnabled||a.document.mozFullScreenEnabled||a.document.msFullscreenEnabled||a.document.webkitFullscreenEnabled)},o.prototype._setupUI=function(){var e=this._fullscreenButton=r.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.document.addEventListener(this._fullscreenchange,this._changeIcon)},o.prototype._isFullscreen=function(){return this._fullscreen},o.prototype._changeIcon=function(){(a.document.fullscreenElement||a.document.mozFullScreenElement||a.document.webkitFullscreenElement||a.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},o.prototype._onClickFullscreen=function(){this._isFullscreen()?a.document.exitFullscreen?a.document.exitFullscreen():a.document.mozCancelFullScreen?a.document.mozCancelFullScreen():a.document.msExitFullscreen?a.document.msExitFullscreen():a.document.webkitCancelFullScreen&&a.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},t.exports=o},{"../../util/dom":259,"../../util/util":275,"../../util/window":254}],234:[function(e,t,n){function r(e){void 0!==i?e(i):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(t){i="denied"!==t.state,e(i)}):(i=!!s.navigator.geolocation,e(i))}var i,a=e("../../util/evented"),o=e("../../util/dom"),s=e("../../util/window"),l=e("../../util/util"),u=e("../../geo/lng_lat"),c=e("../marker"),d={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},f=function(e){function t(t){e.call(this),this.options=l.extend({},d,t),l.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){return this._map=e,this._container=o.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),r(this._setupUI),this._container},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),o.remove(this._container),this._map=void 0},t.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",e),this._finish()},t.prototype._updateCamera=function(e){var t=new u(e.coords.longitude,e.coords.latitude),n=e.coords.accuracy;this._map.fitBounds(t.toBounds(n),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",e),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(e){var t=this;!1!==e&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=o.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=o.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new c(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire("trackuserlocationend"))}))},t.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},t.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(a);t.exports=f},{"../../geo/lng_lat":62,"../../util/dom":259,"../../util/evented":260,"../../util/util":275,"../../util/window":254,"../marker":248}],235:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=function(){i.bindAll(["_updateLogo"],this)};a.prototype.onAdd=function(e){this._map=e,this._container=r.create("div","mapboxgl-ctrl");var t=r.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},a.prototype.onRemove=function(){r.remove(this._container),this._map.off("sourcedata",this._updateLogo)},a.prototype.getDefaultPosition=function(){return"bottom-left"},a.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},a.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},t.exports=a},{"../../util/dom":259,"../../util/util":275}],236:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=e("../handler/drag_rotate"),o={showCompass:!0,showZoom:!0},s=function(e){var t=this;this.options=i.extend({},o,e),this._container=r.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this.options.showZoom&&(this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return t._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return t._map.zoomOut()})),this.options.showCompass&&(i.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return t._map.resetNorth()}),this._compassArrow=r.create("span","mapboxgl-ctrl-compass-arrow",this._compass))};s.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},s.prototype.onAdd=function(e){return this._map=e,this.options.showCompass&&(this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new a(e,{button:"left",element:this._compass}),this._handler.enable()),this._container},s.prototype.onRemove=function(){r.remove(this._container),this.options.showCompass&&(this._map.off("rotate",this._rotateCompassArrow),this._handler.disable(),delete this._handler),delete this._map},s.prototype._createButton=function(e,t,n){var i=r.create("button",e,this._container);return i.type="button",i.setAttribute("aria-label",t),i.addEventListener("click",n),i},t.exports=s},{"../../util/dom":259,"../../util/util":275,"../handler/drag_rotate":242}],237:[function(e,t,n){function r(e,t,n){var r=n&&n.maxWidth||100,o=e._container.clientHeight/2,s=a(e.unproject([0,o]),e.unproject([r,o]));if(n&&"imperial"===n.unit){var l=3.2808*s;l>5280?i(t,r,l/5280,"mi"):i(t,r,l,"ft")}else if(n&&"nautical"===n.unit){var u=s/1852;i(t,r,u,"nm")}else i(t,r,s,"m")}function i(e,t,n,r){var i=o(n),a=i/n;"m"===r&&i>=1e3&&(i/=1e3,r="km"),e.style.width=t*a+"px",e.innerHTML=i+r}function a(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,a=Math.sin(r)*Math.sin(i)+Math.cos(r)*Math.cos(i)*Math.cos((t.lng-e.lng)*n);return 6371e3*Math.acos(Math.min(a,1))}function o(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}var s=e("../../util/dom"),l=e("../../util/util"),u=function(e){this.options=e,l.bindAll(["_onMove"],this)};u.prototype.getDefaultPosition=function(){return"bottom-left"},u.prototype._onMove=function(){r(this._map,this._container,this.options)},u.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},u.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},t.exports=u},{"../../util/dom":259,"../../util/util":275}],238:[function(e,t,n){},{}],239:[function(e,t,n){var r=e("../../util/dom"),i=e("../../geo/lng_lat_bounds"),a=e("../../util/util"),o=e("../../util/window"),s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),a.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(e){e.shiftKey&&0===e.button&&(o.document.addEventListener("mousemove",this._onMouseMove,!1),o.document.addEventListener("keydown",this._onKeyDown,!1),o.document.addEventListener("mouseup",this._onMouseUp,!1),r.disableDrag(),this._startPos=r.mousePos(this._el,e),this._active=!0)},s.prototype._onMouseMove=function(e){var t=this._startPos,n=r.mousePos(this._el,e);this._box||(this._box=r.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var i=Math.min(t.x,n.x),a=Math.max(t.x,n.x),o=Math.min(t.y,n.y),s=Math.max(t.y,n.y);r.setTransform(this._box,"translate("+i+"px,"+o+"px)"),this._box.style.width=a-i+"px",this._box.style.height=s-o+"px"},s.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,n=r.mousePos(this._el,e),a=(new i).extend(this._map.unproject(t)).extend(this._map.unproject(n));this._finish(),t.x===n.x&&t.y===n.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(a,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:a})}},s.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},s.prototype._finish=function(){this._active=!1,o.document.removeEventListener("mousemove",this._onMouseMove,!1),o.document.removeEventListener("keydown",this._onKeyDown,!1),o.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(r.remove(this._box),this._box=null),r.enableDrag()},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},t.exports=s},{"../../geo/lng_lat_bounds":63,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],240:[function(e,t,n){var r=e("../../util/util"),i=function(e){this._map=e,r.bindAll(["_onDblClick","_onZoomEnd"],this)};i.prototype.isEnabled=function(){return!!this._enabled},i.prototype.isActive=function(){return!!this._active},i.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},i.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},i.prototype._onDblClick=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},i.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},t.exports=i},{"../../util/util":275}],241:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=e("../../util/window"),o=e("../../util/browser"),s=i.bezier(0,0,.3,1),l=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp","_onDragFrame","_onDragFinished"],this)};l.prototype.isEnabled=function(){return!!this._enabled},l.prototype.isActive=function(){return!!this._active},l.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},l.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},l.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(a.document.addEventListener("touchmove",this._onMove),a.document.addEventListener("touchend",this._onTouchEnd)):(a.document.addEventListener("mousemove",this._onMove),a.document.addEventListener("mouseup",this._onMouseUp)),a.addEventListener("blur",this._onMouseUp),this._active=!1,this._previousPos=r.mousePos(this._el,e),this._inertia=[[o.now(),this._previousPos]])},l.prototype._onMove=function(e){if(!this._ignoreEvent(e)){this._lastMoveEvent=e,e.preventDefault();var t=r.mousePos(this._el,e);if(this._drainInertiaBuffer(),this._inertia.push([o.now(),t]),!this._previousPos)return void(this._previousPos=t);this._pos=t,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()}},l.prototype._onDragFrame=function(e){var t=this._lastMoveEvent;t&&(e.setLocationAtPoint(e.pointLocation(this._previousPos),this._pos),this._fireEvent("drag",t),this._fireEvent("move",t),this._previousPos=this._pos,delete this._lastMoveEvent)},l.prototype._onDragFinished=function(e){var t=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,delete this._pos,this._fireEvent("dragend",e),this._drainInertiaBuffer();var n=function(){t._map.moving=!1,t._fireEvent("moveend",e)},r=this._inertia;if(r.length<2)return void n();var i=r[r.length-1],a=r[0],o=i[1].sub(a[1]),l=(i[0]-a[0])/1e3;if(0===l||i[1].equals(a[1]))return void n();var u=o.mult(.3/l),c=u.mag();c>1400&&(c=1400,u._unit()._mult(c));var d=c/750,f=u.mult(-d/2);this._map.panBy(f,{duration:1e3*d,easing:s,noMoveStart:!0},{originalEvent:e})}},l.prototype._onUp=function(e){this._onDragFinished(e)},l.prototype._onMouseUp=function(e){this._ignoreEvent(e)||(this._onUp(e),a.document.removeEventListener("mousemove",this._onMove),a.document.removeEventListener("mouseup",this._onMouseUp),a.removeEventListener("blur",this._onMouseUp))},l.prototype._onTouchEnd=function(e){this._ignoreEvent(e)||(this._onUp(e),a.document.removeEventListener("touchmove",this._onMove),a.document.removeEventListener("touchend",this._onTouchEnd))},l.prototype._fireEvent=function(e,t){return this._map.fire(e,t?{originalEvent:t}:{})},l.prototype._ignoreEvent=function(e){var t=this._map;return!(!t.boxZoom||!t.boxZoom.isActive())||!(!t.dragRotate||!t.dragRotate.isActive())||(e.touches?e.touches.length>1:!!e.ctrlKey||"mousemove"!==e.type&&e.button&&0!==e.button)},l.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=o.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=l},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],242:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=e("../../util/window"),o=e("../../util/browser"),s=i.bezier(0,0,.25,1),l=function(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,i.bindAll(["_onDown","_onMove","_onUp","_onDragFrame","_onDragFinished"],this)};l.prototype.isEnabled=function(){return!!this._enabled},l.prototype.isActive=function(){return!!this._active},l.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},l.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},l.prototype._onDown=function(e){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var t=e.ctrlKey?0:2,n=e.button;if(void 0!==a.InstallTrigger&&2===e.button&&e.ctrlKey&&a.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(n=0),n!==t)return}else if(e.ctrlKey||0!==e.button)return;r.disableDrag(),a.document.addEventListener("mousemove",this._onMove,{capture:!0}),a.document.addEventListener("mouseup",this._onUp),a.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[o.now(),this._map.getBearing()]],this._previousPos=r.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},l.prototype._onMove=function(e){this._lastMoveEvent=e;var t=r.mousePos(this._el,e);if(!this._previousPos)return void(this._previousPos=t);this._pos=t,this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e),this._map._startAnimation(this._onDragFrame,this._onDragFinished)),this._map._update()},l.prototype._onUp=function(e){a.document.removeEventListener("mousemove",this._onMove,{capture:!0}),a.document.removeEventListener("mouseup",this._onUp),a.removeEventListener("blur",this._onUp),r.enableDrag(),this._onDragFinished(e)},l.prototype._onDragFrame=function(e){var t=this._lastMoveEvent;if(t){var n=this._previousPos,r=this._pos,i=.8*(n.x-r.x),a=-.5*(n.y-r.y),s=e.bearing-i,l=e.pitch-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([o.now(),this._map._normalizeBearing(s,c[1])]),e.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",t),e.pitch=l),this._fireEvent("rotate",t),this._fireEvent("move",t),delete this._lastMoveEvent,this._previousPos=this._pos}},l.prototype._onDragFinished=function(e){var t=this;if(this.isActive()){this._active=!1,delete this._lastMoveEvent,delete this._previousPos,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var n=this._map,r=n.getBearing(),i=this._inertia,a=function(){Math.abs(r)<t._bearingSnap?n.resetNorth({noMoveStart:!0},{originalEvent:e}):(t._map.moving=!1,t._fireEvent("moveend",e)),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(i.length<2)return void a();var o=i[0],l=i[i.length-1],u=i[i.length-2],c=n._normalizeBearing(r,u[1]),d=l[1]-o[1],f=d<0?-1:1,h=(l[0]-o[0])/1e3;if(0===d||0===h)return void a();var p=Math.abs(d*(.25/h));p>180&&(p=180);var m=p/180;c+=f*p*(m/2),Math.abs(n._normalizeBearing(c,0))<this._bearingSnap&&(c=n._normalizeBearing(0,c)),n.rotateTo(c,{duration:1e3*m,easing:s,noMoveStart:!0},{originalEvent:e})}},l.prototype._fireEvent=function(e,t){return this._map.fire(e,t?{originalEvent:t}:{})},l.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=o.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=l},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],243:[function(e,t,n){function r(e){return e*(2-e)}var i=e("../../util/util"),a=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onKeyDown"],this)};a.prototype.isEnabled=function(){return!!this._enabled},a.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},a.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},a.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,n=0,i=0,a=0,o=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?n=-1:(e.preventDefault(),a=-1);break;case 39:e.shiftKey?n=1:(e.preventDefault(),a=1);break;case 38:e.shiftKey?i=1:(e.preventDefault(),o=-1);break;case 40:e.shiftKey?i=-1:(o=1,e.preventDefault());break;default:return}var s=this._map,l=s.getZoom(),u={duration:300,delayEndEvents:500,easing:r,zoom:t?Math.round(l)+t*(e.shiftKey?2:1):l,bearing:s.getBearing()+15*n,pitch:s.getPitch()+10*i,offset:[100*-a,100*-o],center:s.getCenter()};s.easeTo(u,{originalEvent:e})}},t.exports=a},{"../../util/util":275}],244:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=e("../../util/browser"),o=e("../../util/window"),s=e("../../style-spec/util/interpolate").number,l=e("../../geo/lng_lat"),u=o.navigator.userAgent.toLowerCase(),c=-1!==u.indexOf("firefox"),d=-1!==u.indexOf("safari")&&-1===u.indexOf("chrom"),f=function(e){this._map=e,this._el=e.getCanvasContainer(),this._delta=0,i.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};f.prototype.isEnabled=function(){return!!this._enabled},f.prototype.isActive=function(){return!!this._active},f.prototype.enable=function(e){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},f.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},f.prototype._onWheel=function(e){var t=0;"wheel"===e.type?(t=e.deltaY,c&&e.deltaMode===o.WheelEvent.DOM_DELTA_PIXEL&&(t/=a.devicePixelRatio),e.deltaMode===o.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,d&&(t/=3));var n=a.now(),r=n-(this._lastWheelEventTime||0);this._lastWheelEventTime=n,0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":r>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(r*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&(this._lastWheelEvent=e,this._delta-=t,this.isActive()||this._start(e)),e.preventDefault()},f.prototype._onTimeout=function(e){this._type="wheel",this._delta-=this._lastValue,this.isActive()||this._start(e)},f.prototype._start=function(e){if(this._delta){this._active=!0,this._map.moving=!0,this._map.zooming=!0,this._map.fire("movestart",{originalEvent:e}),this._map.fire("zoomstart",{originalEvent:e}),clearTimeout(this._finishTimeout);var t=r.mousePos(this._el,e);this._around=l.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(t)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._map._startAnimation(this._onScrollFrame,this._onScrollFinished)}},f.prototype._onScrollFrame=function(e){if(this.isActive()){if(0!==this._delta){var t="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?1/450:.01,n=2/(1+Math.exp(-Math.abs(this._delta*t)));this._delta<0&&0!==n&&(n=1/n);var r="number"==typeof this._targetZoom?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom(r*n))),"wheel"===this._type&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}if("wheel"===this._type){var i=Math.min((a.now()-this._lastWheelEventTime)/200,1),o=this._easing(i);e.zoom=s(this._startZoom,this._targetZoom,o),1===i&&this._map.stop()}else e.zoom=this._targetZoom,this._map.stop();e.setLocationAtPoint(this._around,this._aroundPoint),this._map.fire("move",{originalEvent:this._lastWheelEvent}),this._map.fire("zoom",{originalEvent:this._lastWheelEvent})}},f.prototype._onScrollFinished=function(){var e=this;this.isActive()&&(this._active=!1,this._finishTimeout=setTimeout(function(){e._map.moving=!1,e._map.zooming=!1,e._map.fire("zoomend"),e._map.fire("moveend"),delete e._targetZoom},200))},f.prototype._smoothOutEasing=function(e){var t=i.ease;if(this._prevEase){var n=this._prevEase,r=(a.now()-n.start)/n.duration,o=n.easing(r+.01)-n.easing(r),s=.27/Math.sqrt(o*o+1e-4)*.01,l=Math.sqrt(.0729-s*s);t=i.bezier(s,l,.25,1)}return this._prevEase={start:a.now(),duration:e,easing:t},t},t.exports=f},{"../../geo/lng_lat":62,"../../style-spec/util/interpolate":158,"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],245:[function(e,t,n){var r=e("../../util/dom"),i=e("../../util/util"),a=e("../../util/window"),o=e("../../util/browser"),s=i.bezier(0,0,.15,1),l=function(e){this._map=e,this._el=e.getCanvasContainer(),i.bindAll(["_onStart","_onMove","_onEnd"],this)};l.prototype.isEnabled=function(){return!!this._enabled},l.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},l.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},l.prototype.disableRotation=function(){this._rotationDisabled=!0},l.prototype.enableRotation=function(){this._rotationDisabled=!1},l.prototype._onStart=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]);this._startVec=t.sub(n),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],a.document.addEventListener("touchmove",this._onMove,!1),a.document.addEventListener("touchend",this._onEnd,!1)}},l.prototype._onMove=function(e){if(2===e.touches.length){var t=r.mousePos(this._el,e.touches[0]),n=r.mousePos(this._el,e.touches[1]),i=t.add(n).div(2),a=t.sub(n),s=a.mag()/this._startVec.mag(),l=this._rotationDisabled?0:180*a.angleWith(this._startVec)/Math.PI,u=this._map;if(this._gestureIntent){var c={duration:0,around:u.unproject(i)};"rotate"===this._gestureIntent&&(c.bearing=this._startBearing+l),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(c.zoom=u.transform.scaleZoom(this._startScale*s)),u.stop(),this._drainInertiaBuffer(),this._inertia.push([o.now(),s,i]),u.easeTo(c,{originalEvent:e})}else{var d=Math.abs(1-s)>.15;Math.abs(l)>10?this._gestureIntent="rotate":d&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=a,this._startScale=u.transform.scale,this._startBearing=u.transform.bearing)}e.preventDefault()}},l.prototype._onEnd=function(e){a.document.removeEventListener("touchmove",this._onMove),a.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,n=this._map;if(t.length<2)return void n.snapToNorth({},{originalEvent:e});var r=t[t.length-1],i=t[0],o=n.transform.scaleZoom(this._startScale*r[1]),l=n.transform.scaleZoom(this._startScale*i[1]),u=o-l,c=(r[0]-i[0])/1e3,d=r[2];if(0===c||o===l)return void n.snapToNorth({},{originalEvent:e});var f=.15*u/c;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var h=1e3*Math.abs(f/(12*.15)),p=o+f*h/2e3;p<0&&(p=0),n.easeTo({zoom:p,duration:h,easing:s,around:this._aroundCenter?n.getCenter():n.unproject(d)},{originalEvent:e})},l.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=o.now();e.length>2&&t-e[0][0]>160;)e.shift()},t.exports=l},{"../../util/browser":252,"../../util/dom":259,"../../util/util":275,"../../util/window":254}],246:[function(e,t,n){var r=e("../util/util"),i=e("../util/window"),a=e("../util/throttle"),o=function(){r.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=a(this._updateHashUnthrottled.bind(this),300)};o.prototype.addTo=function(e){return this._map=e,i.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},o.prototype.remove=function(){return i.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},o.prototype.getHashString=function(e){var t=this._map.getCenter(),n=Math.round(100*this._map.getZoom())/100,r=Math.ceil((n*Math.LN2+Math.log(512/360/.5))/Math.LN10),i=Math.pow(10,r),a=Math.round(t.lng*i)/i,o=Math.round(t.lat*i)/i,s=this._map.getBearing(),l=this._map.getPitch(),u="";return u+=e?"#/"+a+"/"+o+"/"+n:"#"+n+"/"+o+"/"+a,(s||l)&&(u+="/"+Math.round(10*s)/10),l&&(u+="/"+Math.round(l)),u},o.prototype._onHashChange=function(){var e=i.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},o.prototype._updateHashUnthrottled=function(){var e=this.getHashString();i.history.replaceState("","",e)},t.exports=o},{"../util/throttle":272,"../util/util":275,"../util/window":254}],247:[function(e,t,n){function r(e){e.parentNode&&e.parentNode.removeChild(e)}var i=e("../util/util"),a=e("../util/browser"),o=e("../util/window"),s=e("../util/window"),l=s.HTMLImageElement,u=s.HTMLElement,c=e("../util/dom"),d=e("../util/ajax"),f=e("../style/style"),h=e("../style/evaluation_parameters"),p=e("../render/painter"),m=e("../geo/transform"),g=e("./hash"),y=e("./bind_handlers"),v=e("./camera"),_=e("../geo/lng_lat"),b=e("../geo/lng_lat_bounds"),x=e("@mapbox/point-geometry"),w=e("./control/attribution_control"),k=e("./control/logo_control"),T=e("@mapbox/mapbox-gl-supported"),M=e("../util/image"),A=M.RGBAImage;e("./events");var C={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,fadeDuration:300},S=function(e){function t(t){if(t=i.extend({},C,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var n=new m(t.minZoom,t.maxZoom,t.renderWorldCopies);e.call(this,n,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._fadeDuration=t.fadeDuration,this._crossFadingFactor=1,this._collectResourceTiming=t.collectResourceTiming;var r=t.transformRequest;if(this._transformRequest=r?function(e,t){return r(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){var a=o.document.getElementById(t.container);if(!a)throw new Error("Container '"+t.container+"' not found.");this._container=a}else{if(!(t.container instanceof u))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}t.maxBounds&&this.setMaxBounds(t.maxBounds),i.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),void 0!==o&&(o.addEventListener("online",this._onWindowOnline,!1),o.addEventListener("resize",this._onWindowResize,!1)),y(this,t),this._hash=t.hash&&(new g).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new w),this.addControl(new k,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var n=e.onAdd(this),r=this._controlPositions[t];return-1!==t.indexOf("bottom")?r.insertBefore(n,r.firstChild):r.appendChild(n),this},t.prototype.removeControl=function(e){return e.onRemove(this),this},t.prototype.resize=function(){var e=this._containerDimensions(),t=e[0],n=e[1];return this._resizeCanvas(t,n),this.transform.resize(t,n),this.painter.resize(t,n),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var e=new b(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),e},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new b([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(e){if(e){var t=b.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(e){if((e=null===e||void 0===e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(e){if((e=null===e||void 0===e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(e){return this.transform.locationPoint(_.convert(e))},t.prototype.unproject=function(e){return this.transform.pointLocation(x.convert(e))},t.prototype.on=function(t,n,r){var a=this;if(void 0===r)return e.prototype.on.call(this,t,n);var o=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:n,listener:r,delegates:{mousemove:function(o){var s=a.getLayer(n)?a.queryRenderedFeatures(o.point,{layers:[n]}):[];s.length?e||(e=!0,r.call(a,i.extend({features:s},o,{type:t}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var o=!1;return{layer:n,listener:r,delegates:{mousemove:function(e){(a.getLayer(n)?a.queryRenderedFeatures(e.point,{layers:[n]}):[]).length?o=!0:o&&(o=!1,r.call(a,i.extend({},e,{type:t})))},mouseout:function(e){o&&(o=!1,r.call(a,i.extend({},e,{type:t})))}}}}var s=function(e){var t=a.getLayer(n)?a.queryRenderedFeatures(e.point,{layers:[n]}):[];t.length&&r.call(a,i.extend({features:t},e))};return{layer:n,listener:r,delegates:(l={},l[t]=s,l)};var l}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(o);for(var s in o.delegates)a.on(s,o.delegates[s]);return this},t.prototype.off=function(t,n,r){var i=this;if(void 0===r)return e.prototype.off.call(this,t,n);if(this._delegatedListeners&&this._delegatedListeners[t])for(var a=this._delegatedListeners[t],o=0;o<a.length;o++){var s=a[o];if(s.layer===n&&s.listener===r){for(var l in s.delegates)i.off(l,s.delegates[l]);return a.splice(o,1),i}}return this},t.prototype.queryRenderedFeatures=function(e,t){return 2===arguments.length?(e=arguments[0],t=arguments[1]):1===arguments.length&&function(e){return e instanceof x||Array.isArray(e)}(arguments[0])?(e=arguments[0],t={}):1===arguments.length?(e=void 0,t=arguments[0]):(e=void 0,t={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),t,this.transform.zoom,this.transform.angle):[]},t.prototype._makeQueryGeometry=function(e){var t=this;void 0===e&&(e=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]);var n;if(e instanceof x||"number"==typeof e[0])n=[x.convert(e)];else{var r=[x.convert(e[0]),x.convert(e[1])];n=[r[0],new x(r[1].x,r[0].y),r[1],new x(r[0].x,r[1].y),r[0]]}return n=n.map(function(e){return t.transform.pointCoordinate(e)})},t.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},t.prototype.setStyle=function(e,t){if((!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e&&"object"==typeof e)try{return this.style.setState(e)&&this._update(!0),this}catch(e){i.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new f(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():i.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},t.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+e+"'")}):t.loaded()},t.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var n=e[t],r=n._tiles;for(var i in r){var a=r[i];if("loaded"!==a.state&&"errored"!==a.state)return!1}}return!0},t.prototype.addSourceType=function(e,t,n){return this.style.addSourceType(e,t,n)},t.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},t.prototype.getSource=function(e){return this.style.getSource(e)},t.prototype.addImage=function(e,t,n){void 0===n&&(n={});var r=n.pixelRatio;void 0===r&&(r=1);var i=n.sdf;if(void 0===i&&(i=!1),t instanceof l){var o=a.getImageData(t),s=o.width,u=o.height,c=o.data;this.style.addImage(e,{data:new A({width:s,height:u},c),pixelRatio:r,sdf:i})}else{if(void 0===t.width||void 0===t.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});var d=t.width,f=t.height,h=t.data;this.style.addImage(e,{data:new A({width:d,height:f},h.slice(0)),pixelRatio:r,sdf:i})}},t.prototype.hasImage=function(e){return e?!!this.style.getImage(e):(this.fire("error",{error:new Error("Missing required image id")}),!1)},t.prototype.removeImage=function(e){this.style.removeImage(e)},t.prototype.loadImage=function(e,t){d.getImage(this._transformRequest(e,d.ResourceType.Image),t)},t.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},t.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},t.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},t.prototype.getLayer=function(e){return this.style.getLayer(e)},t.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(e,t,n){return this.style.setLayerZoomRange(e,t,n),this._update(!0),this},t.prototype.getFilter=function(e){return this.style.getFilter(e)},t.prototype.setPaintProperty=function(e,t,n){return this.style.setPaintProperty(e,t,n),this._update(!0),this},t.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},t.prototype.setLayoutProperty=function(e,t,n){return this.style.setLayoutProperty(e,t,n),this._update(!0),this},t.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},t.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},t.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",e)).innerHTML="Missing Mapbox GL JS CSS";var t=this._canvasContainer=c.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var n=this._containerDimensions();this._resizeCanvas(n[0],n[1]);var r=this._controlContainer=c.create("div","mapboxgl-control-container",e),i=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){i[e]=c.create("div","mapboxgl-ctrl-"+e,r)})},t.prototype._resizeCanvas=function(e,t){var n=o.devicePixelRatio||1;this._canvas.width=n*e,this._canvas.height=n*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var e=i.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},T.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);if(!t)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new p(t,this.transform)},t.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(a.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:e})},t.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},t.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!(!this.style||!this.style.loaded())},t.prototype._update=function(e){this.style&&(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender())},t.prototype._render=function(){this._updateCamera();var e=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var t=this.transform.zoom,n=a.now();this.style.zoomHistory.update(t,n);var r=new h(t,{now:n,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),i=r.crossFadingFactor();1===i&&i===this._crossFadingFactor||(e=!0,this._crossFadingFactor=i),this.style.update(r)}return this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,fadeDuration:this._fadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this.style&&(this.style.hasTransitions()||e)&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),a.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==o&&(o.removeEventListener("resize",this._onWindowResize,!1),o.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.context.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),r(this._canvasContainer),r(this._controlContainer),r(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},t.prototype._rerender=function(){var e=this;this.style&&!this._frameId&&(this._frameId=a.frame(function(){e._frameId=null,e._render()}))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},n.showTileBoundaries.get=function(){return!!this._showTileBoundaries},n.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},n.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},n.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},n.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},n.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},n.repaint.get=function(){return!!this._repaint},n.repaint.set=function(e){this._repaint=e,this._update()},n.vertices.get=function(){return!!this._vertices},n.vertices.set=function(e){this._vertices=e,this._update()},t.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(e.dataType+"data",e)},t.prototype._onDataLoading=function(e){this.fire(e.dataType+"dataloading",e)},Object.defineProperties(t.prototype,n),t}(v);t.exports=S},{"../geo/lng_lat":62,"../geo/lng_lat_bounds":63,"../geo/transform":64,"../render/painter":90,"../style/evaluation_parameters":182,"../style/style":190,"../util/ajax":251,"../util/browser":252,"../util/dom":259,"../util/image":263,"../util/util":275,"../util/window":254,"./bind_handlers":230,"./camera":231,"./control/attribution_control":232,"./control/logo_control":235,"./events":238,"./hash":246,"@mapbox/mapbox-gl-supported":3,"@mapbox/point-geometry":4}],248:[function(e,t,n){var r=e("../util/dom"),i=e("../geo/lng_lat"),a=e("@mapbox/point-geometry"),o=e("../util/smart_wrap"),s=e("../util/util"),l=s.bindAll,u=function(e,t){if(l(["_update","_onMapClick"],this),!e){e=r.create("div");var n=r.createNS("http://www.w3.org/2000/svg","svg");n.setAttributeNS(null,"height","41px"),n.setAttributeNS(null,"width","27px"),n.setAttributeNS(null,"viewBox","0 0 27 41");var i=r.createNS("http://www.w3.org/2000/svg","g");i.setAttributeNS(null,"stroke","none"),i.setAttributeNS(null,"stroke-width","1"),i.setAttributeNS(null,"fill","none"),i.setAttributeNS(null,"fill-rule","evenodd");var o=r.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"fill-rule","nonzero");var s=r.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],c=0,d=u;c<d.length;c+=1){var f=d[c],h=r.createNS("http://www.w3.org/2000/svg","ellipse");h.setAttributeNS(null,"opacity","0.04"),h.setAttributeNS(null,"cx","10.5"),h.setAttributeNS(null,"cy","5.80029008"),h.setAttributeNS(null,"rx",f.rx),h.setAttributeNS(null,"ry",f.ry),s.appendChild(h)}var p=r.createNS("http://www.w3.org/2000/svg","g");p.setAttributeNS(null,"fill","#3FB1CE");var m=r.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),p.appendChild(m);var g=r.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"opacity","0.25"),g.setAttributeNS(null,"fill","#000000");var y=r.createNS("http://www.w3.org/2000/svg","path");y.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),g.appendChild(y);var v=r.createNS("http://www.w3.org/2000/svg","g");v.setAttributeNS(null,"transform","translate(6.0, 7.0)"),v.setAttributeNS(null,"fill","#FFFFFF");var _=r.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=r.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=r.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(x),o.appendChild(s),o.appendChild(p),o.appendChild(g),o.appendChild(v),o.appendChild(_),n.appendChild(o),e.appendChild(n);var w=[0,-14];t&&t.offset||(t?t.offset=w:t={offset:w})}this._offset=a.convert(t&&t.offset||[0,0]),e.classList.add("mapboxgl-marker"),this._element=e,this._popup=null};u.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},u.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),r.remove(this._element),this._popup&&this._popup.remove(),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(e){return this._lngLat=i.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},u.prototype.getElement=function(){return this._element},u.prototype.setPopup=function(e){return this._popup&&(this._popup.remove(),this._popup=null),e&&("offset"in e.options||(e.options.offset=this._offset),this._popup=e,this._lngLat&&this._popup.setLngLat(this._lngLat)),this},u.prototype._onMapClick=function(e){var t=e.originalEvent.target,n=this._element;this._popup&&(t===n||n.contains(t))&&this.togglePopup()},u.prototype.getPopup=function(){return this._popup},u.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},u.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=o(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),r.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},u.prototype.getOffset=function(){return this._offset},u.prototype.setOffset=function(e){return this._offset=a.convert(e),this._update(),this},t.exports=u},{"../geo/lng_lat":62,"../util/dom":259,"../util/smart_wrap":270,"../util/util":275,"@mapbox/point-geometry":4}],249:[function(e,t,n){function r(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new l(0,e),"top-left":new l(t,t),"top-right":new l(-t,t),bottom:new l(0,-e),"bottom-left":new l(t,-t),"bottom-right":new l(-t,-t),left:new l(e,0),right:new l(-e,0)}}if(e instanceof l||Array.isArray(e)){var n=l.convert(e);return{top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{top:l.convert(e.top||[0,0]),"top-left":l.convert(e["top-left"]||[0,0]),"top-right":l.convert(e["top-right"]||[0,0]),bottom:l.convert(e.bottom||[0,0]),"bottom-left":l.convert(e["bottom-left"]||[0,0]),"bottom-right":l.convert(e["bottom-right"]||[0,0]),left:l.convert(e.left||[0,0]),right:l.convert(e.right||[0,0])}}return r(new l(0,0))}var i=e("../util/util"),a=e("../util/evented"),o=e("../util/dom"),s=e("../geo/lng_lat"),l=e("@mapbox/point-geometry"),u=e("../util/window"),c=e("../util/smart_wrap"),d={closeButton:!0,closeOnClick:!0},f=function(e){function t(t){e.call(this),this.options=i.extend(Object.create(d),t),i.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&o.remove(this._content),this._container&&(o.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(e){return this._lngLat=s.convert(e),this._pos=null,this._update(),this},t.prototype.setText=function(e){return this.setDOMContent(u.document.createTextNode(e))},t.prototype.setHTML=function(e){var t,n=u.document.createDocumentFragment(),r=u.document.createElement("body");for(r.innerHTML=e;t=r.firstChild;)n.appendChild(t);return this.setDOMContent(n)},t.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},t.prototype._createContent=function(){this._content&&o.remove(this._content),this._content=o.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=o.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=o.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=o.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=c(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),t=this.options.anchor,n=r(this.options.offset);if(!t){var i=this._container.offsetWidth,a=this._container.offsetHeight;t=e.y+n.bottom.y<a?["top"]:e.y>this._map.transform.height-a?["bottom"]:[],e.x<i/2?t.push("left"):e.x>this._map.transform.width-i/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var s=e.add(n[t]).round(),l={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},u=this._container.classList;for(var d in l)u.remove("mapboxgl-popup-anchor-"+d);u.add("mapboxgl-popup-anchor-"+t),o.setTransform(this._container,l[t]+" translate("+s.x+"px,"+s.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(a);t.exports=f},{"../geo/lng_lat":62,"../util/dom":259,"../util/evented":260,"../util/smart_wrap":270,"../util/util":275,"../util/window":254,"@mapbox/point-geometry":4}],250:[function(e,t,n){var r=e("./util"),i=e("./web_worker_transfer"),a=i.serialize,o=i.deserialize,s=function(e,t,n){this.target=e,this.parent=t,this.mapId=n,this.callbacks={},this.callbackID=0,r.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};s.prototype.send=function(e,t,n,r){var i=n?this.mapId+":"+this.callbackID++:null;n&&(this.callbacks[i]=n);var o=[];this.target.postMessage({targetMapId:r,sourceMapId:this.mapId,type:e,id:String(i),data:a(t,o)},o)},s.prototype.receive=function(e){var t,n=this,r=e.data,i=r.id;if(!r.targetMapId||this.mapId===r.targetMapId){var s=function(e,t){var r=[];n.target.postMessage({sourceMapId:n.mapId,type:"<response>",id:String(i),error:e?String(e):null,data:a(t,r)},r)};if("<response>"===r.type)t=this.callbacks[r.id],delete this.callbacks[r.id],t&&r.error?t(new Error(r.error)):t&&t(null,o(r.data));else if(void 0!==r.id&&this.parent[r.type])this.parent[r.type](r.sourceMapId,o(r.data),s);else if(void 0!==r.id&&this.parent.getWorkerSource){var l=r.type.split("."),u=this.parent.getWorkerSource(r.sourceMapId,l[0]);u[l[1]](o(r.data),s)}else this.parent[r.type](o(r.data))}},s.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.exports=s},{"./util":275,"./web_worker_transfer":278}],251:[function(e,t,n){function r(e){var t=new a.XMLHttpRequest;t.open("GET",e.url,!0);for(var n in e.headers)t.setRequestHeader(n,e.headers[n]);return t.withCredentials="include"===e.credentials,t}function i(e){var t=a.document.createElement("a");return t.href=e,t.protocol===a.document.location.protocol&&t.host===a.document.location.host}var a=e("./window"),o={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};n.ResourceType=o,"function"==typeof Object.freeze&&Object.freeze(o);var s=function(e){function t(t,n){e.call(this,t),this.status=n}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t}(Error);n.getJSON=function(e,t){var n=r(e);return n.setRequestHeader("Accept","application/json"),n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if(n.status>=200&&n.status<300&&n.response){var e;try{e=JSON.parse(n.response)}catch(e){return t(e)}t(null,e)}else t(new s(n.statusText,n.status))},n.send(),n},n.getArrayBuffer=function(e,t){var n=r(e);return n.responseType="arraybuffer",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){var e=n.response;if(0===e.byteLength&&200===n.status)return t(new Error("http status 200 returned without content."));n.status>=200&&n.status<300&&n.response?t(null,{data:e,cacheControl:n.getResponseHeader("Cache-Control"),expires:n.getResponseHeader("Expires")}):t(new s(n.statusText,n.status))},n.send(),n};n.getImage=function(e,t){return n.getArrayBuffer(e,function(e,n){if(e)t(e);else if(n){var r=new a.Image,i=a.URL||a.webkitURL;r.onload=function(){t(null,r),i.revokeObjectURL(r.src)};var o=new a.Blob([new Uint8Array(n.data)],{type:"image/png"});r.cacheControl=n.cacheControl,r.expires=n.expires,r.src=n.data.byteLength?i.createObjectURL(o):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},n.getVideo=function(e,t){var n=a.document.createElement("video");n.onloadstart=function(){t(null,n)};for(var r=0;r<e.length;r++){var o=a.document.createElement("source");i(e[r])||(n.crossOrigin="Anonymous"),o.src=e[r],n.appendChild(o)}return n}},{"./window":254}],252:[function(e,t,n){var r=e("./window"),i=r.performance&&r.performance.now?r.performance.now.bind(r.performance):Date.now.bind(Date),a=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame,o=r.cancelAnimationFrame||r.mozCancelAnimationFrame||r.webkitCancelAnimationFrame||r.msCancelAnimationFrame;t.exports={now:i,frame:function(e){return a(e)},cancelFrame:function(e){return o(e)},getImageData:function(e){var t=r.document.createElement("canvas"),n=t.getContext("2d");if(!n)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,n.drawImage(e,0,0,e.width,e.height),n.getImageData(0,0,e.width,e.height)},hardwareConcurrency:r.navigator.hardwareConcurrency||4,get devicePixelRatio(){return r.devicePixelRatio},supportsWebp:!1};var s=r.document.createElement("img");s.onload=function(){t.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":254}],253:[function(e,t,n){var r=e("webworkify"),i=e("../window"),a=i.URL.createObjectURL(new r(e("../../source/worker"),{bare:!0}));t.exports=function(){return new i.Worker(a)}},{"../../source/worker":118,"../window":254,webworkify:36}],254:[function(e,t,n){t.exports=self},{}],255:[function(e,t,n){function r(e,t){return t.area-e.area}var i=e("quickselect"),a=e("./util").calculateSignedArea;t.exports=function(e,t){var n=e.length;if(n<=1)return[e];for(var o,s,l=[],u=0;u<n;u++){var c=a(e[u]);0!==c&&(e[u].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(o&&l.push(o),o=[e[u]]):o.push(e[u]))}if(o&&l.push(o),t>1)for(var d=0;d<l.length;d++)l[d].length<=t||(i(l[d],t,1,l[d].length-1,r),l[d]=l[d].slice(0,t));return l}},{"./util":275,quickselect:31}],256:[function(e,t,n){var r={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};t.exports=r},{}],257:[function(e,t,n){var r=function(e){var t=this;this._stringToNumber={},this._numberToString=[];for(var n=0;n<e.length;n++){var r=e[n];t._stringToNumber[r]=n,t._numberToString[n]=r}};r.prototype.encode=function(e){return this._stringToNumber[e]},r.prototype.decode=function(e){return this._numberToString[e]},t.exports=r},{}],258:[function(e,t,n){var r=e("./util"),i=e("./actor"),a=function(e,t){var n=this;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=r.uniqueId();for(var a=this.workerPool.acquire(this.id),o=0;o<a.length;o++){var s=a[o],l=new i(s,t,n.id);l.name="Worker "+o,n.actors.push(l)}};a.prototype.broadcast=function(e,t,n){n=n||function(){},r.asyncAll(this.actors,function(n,r){n.send(e,t,r)},n)},a.prototype.send=function(e,t,n,r){return("number"!=typeof r||isNaN(r))&&(r=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[r].send(e,t,n),r},a.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},t.exports=a},{"./actor":250,"./util":275}],259:[function(e,t,n){function r(e){for(var t=0;t<e.length;t++)if(e[t]in s)return e[t];return e[0]}var i=e("@mapbox/point-geometry"),a=e("./window");n.create=function(e,t,n){var r=a.document.createElement(e);return t&&(r.className=t),n&&n.appendChild(r),r},n.createNS=function(e,t){return a.document.createElementNS(e,t)};var o,s=a.document.documentElement.style,l=r(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);n.disableDrag=function(){l&&(o=s[l],s[l]="none")},n.enableDrag=function(){l&&(s[l]=o)};var u=r(["transform","WebkitTransform"]);n.setTransform=function(e,t){e.style[u]=t};var c=function(e){e.preventDefault(),e.stopPropagation(),a.removeEventListener("click",c,!0)};n.suppressClick=function(){a.addEventListener("click",c,!0),a.setTimeout(function(){a.removeEventListener("click",c,!0)},0)},n.mousePos=function(e,t){var n=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new i(t.clientX-n.left-e.clientLeft,t.clientY-n.top-e.clientTop)},n.touchPos=function(e,t){for(var n=e.getBoundingClientRect(),r=[],a="touchend"===t.type?t.changedTouches:t.touches,o=0;o<a.length;o++)r.push(new i(a[o].clientX-n.left-e.clientLeft,a[o].clientY-n.top-e.clientTop));return r},n.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{"./window":254,"@mapbox/point-geometry":4}],260:[function(e,t,n){function r(e,t,n){n[e]=n[e]||[],n[e].push(t)}function i(e,t,n){if(n&&n[e]){var r=n[e].indexOf(t);-1!==r&&n[e].splice(r,1)}}var a=e("./util"),o=function(){};o.prototype.on=function(e,t){return this._listeners=this._listeners||{},r(e,t,this._listeners),this},o.prototype.off=function(e,t){return i(e,t,this._listeners),i(e,t,this._oneTimeListeners),this},o.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},r(e,t,this._oneTimeListeners),this},o.prototype.fire=function(e,t){var n=this;if(this.listens(e)){t=a.extend({},t,{type:e,target:this});for(var r=this._listeners&&this._listeners[e]?this._listeners[e].slice():[],o=0,s=r;o<s.length;o+=1)s[o].call(n,t);for(var l=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],u=0,c=l;u<c.length;u+=1){var d=c[u];i(e,d,n._oneTimeListeners),d.call(n,t)}this._eventedParent&&this._eventedParent.fire(e,a.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else a.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event");return this},o.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},o.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t.exports=o},{"./util":275}],261:[function(e,t,n){function r(e,t){return t.max-e.max}function i(e,t,n,r){this.p=new l(e,t),this.h=n,this.d=a(this.p,r),this.max=this.d+this.h*Math.SQRT2}function a(e,t){for(var n=!1,r=1/0,i=0;i<t.length;i++)for(var a=t[i],o=0,s=a.length,l=s-1;o<s;l=o++){var c=a[o],d=a[l];c.y>e.y!=d.y>e.y&&e.x<(d.x-c.x)*(e.y-c.y)/(d.y-c.y)+c.x&&(n=!n),r=Math.min(r,u(e,c,d))}return(n?1:-1)*Math.sqrt(r)}function o(e){for(var t=0,n=0,r=0,a=e[0],o=0,s=a.length,l=s-1;o<s;l=o++){var u=a[o],c=a[l],d=u.x*c.y-c.x*u.y;n+=(u.x+c.x)*d,r+=(u.y+c.y)*d,t+=3*d}return new i(n/t,r/t,0,e)}var s=e("tinyqueue"),l=e("@mapbox/point-geometry"),u=e("./intersection_tests").distToSegmentSquared;t.exports=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!1);for(var a=1/0,u=1/0,c=-1/0,d=-1/0,f=e[0],h=0;h<f.length;h++){var p=f[h];(!h||p.x<a)&&(a=p.x),(!h||p.y<u)&&(u=p.y),(!h||p.x>c)&&(c=p.x),(!h||p.y>d)&&(d=p.y)}var m=c-a,g=d-u,y=Math.min(m,g),v=y/2,_=new s(null,r);if(0===y)return new l(a,u);for(var b=a;b<c;b+=y)for(var x=u;x<d;x+=y)_.push(new i(b+v,x+v,v,e));for(var w=o(e),k=_.length;_.length;){var T=_.pop();(T.d>w.d||!w.d)&&(w=T,n&&console.log("found best %d after %d probes",Math.round(1e4*T.d)/1e4,k)),T.max-w.d<=t||(v=T.h/2,_.push(new i(T.p.x-v,T.p.y-v,v,e)),_.push(new i(T.p.x+v,T.p.y-v,v,e)),_.push(new i(T.p.x-v,T.p.y+v,v,e)),_.push(new i(T.p.x+v,T.p.y+v,v,e)),k+=4)}return n&&(console.log("num probes: "+k),console.log("best distance: "+w.d)),w.p}},{"./intersection_tests":264,"@mapbox/point-geometry":4,tinyqueue:33}],262:[function(e,t,n){var r,i=e("./worker_pool");t.exports=function(){return r||(r=new i),r}},{"./worker_pool":279}],263:[function(e,t,n){function r(e,t,n,r){var i=t.width,a=t.height;if(r){if(r.length!==i*a*n)throw new RangeError("mismatched image size")}else r=new Uint8Array(i*a*n);return e.width=i,e.height=a,e.data=r,e}function i(e,t,n){var i=t.width,o=t.height;if(i!==e.width||o!==e.height){var s=r({},{width:i,height:o},n);a(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,i),height:Math.min(e.height,o)},n),e.width=i,e.height=o,e.data=s.data}}function a(e,t,n,r,i,a){if(0===i.width||0===i.height)return t;if(i.width>e.width||i.height>e.height||n.x>e.width-i.width||n.y>e.height-i.height)throw new RangeError("out of range source coordinates for image copy");if(i.width>t.width||i.height>t.height||r.x>t.width-i.width||r.y>t.height-i.height)throw new RangeError("out of range destination coordinates for image copy");for(var o=e.data,s=t.data,l=0;l<i.height;l++)for(var u=((n.y+l)*e.width+n.x)*a,c=((r.y+l)*t.width+r.x)*a,d=0;d<i.width*a;d++)s[c+d]=o[u+d];return t}var o=e("./web_worker_transfer"),s=o.register,l=function(e,t){r(this,e,1,t)};l.prototype.resize=function(e){i(this,e,1)},l.prototype.clone=function(){return new l({width:this.width,height:this.height},new Uint8Array(this.data))},l.copy=function(e,t,n,r,i){a(e,t,n,r,i,1)};var u=function(e,t){r(this,e,4,t)};u.prototype.resize=function(e){i(this,e,4)},u.prototype.clone=function(){return new u({width:this.width,height:this.height},new Uint8Array(this.data))},u.copy=function(e,t,n,r,i){a(e,t,n,r,i,4)},s("AlphaImage",l),s("RGBAImage",u),t.exports={AlphaImage:l,RGBAImage:u}},{"./web_worker_transfer":278}],264:[function(e,t,n){function r(e,t){for(var n=0;n<e.length;n++)if(h(t,e[n]))return!0;for(var r=0;r<t.length;r++)if(h(e,t[r]))return!0;return!!l(e,t)}function i(e,t,n){for(var r=0;r<e.length;r++)for(var i=e[r],a=0;a<t.length;a++)for(var o=t[a],s=0;s<o.length;s++){var l=o[s];if(h(i,l))return!0;if(c(l,i,n))return!0}return!1}function a(e,t){if(1===e.length&&1===e[0].length)return f(t,e[0][0]);for(var n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)if(f(e,r[i]))return!0;for(var a=0;a<e.length;a++){for(var o=e[a],s=0;s<o.length;s++)if(f(t,o[s]))return!0;for(var u=0;u<t.length;u++)if(l(o,t[u]))return!0}return!1}function o(e,t,n){for(var r=0;r<t.length;r++)for(var i=t[r],a=0;a<e.length;a++){var o=e[a];if(o.length>=3)for(var l=0;l<i.length;l++)if(h(o,i[l]))return!0;if(s(o,i,n))return!0}return!1}function s(e,t,n){if(e.length>1){if(l(e,t))return!0;for(var r=0;r<t.length;r++)if(c(t[r],e,n))return!0}for(var i=0;i<e.length;i++)if(c(e[i],t,n))return!0;return!1}function l(e,t){if(0===e.length||0===t.length)return!1;for(var n=0;n<e.length-1;n++)for(var r=e[n],i=e[n+1],a=0;a<t.length-1;a++){var o=t[a],s=t[a+1];if(u(r,i,o,s))return!0}return!1}function u(e,t,n,r){return m(e,n,r)!==m(t,n,r)&&m(e,t,n)!==m(e,t,r)}function c(e,t,n){var r=n*n;if(1===t.length)return e.distSqr(t[0])<r;for(var i=1;i<t.length;i++)if(d(e,t[i-1],t[i])<r)return!0;return!1}function d(e,t,n){var r=t.distSqr(n);if(0===r)return e.distSqr(t);var i=((e.x-t.x)*(n.x-t.x)+(e.y-t.y)*(n.y-t.y))/r;return i<0?e.distSqr(t):i>1?e.distSqr(n):e.distSqr(n.sub(t)._mult(i)._add(t))}function f(e,t){for(var n,r,i,a=!1,o=0;o<e.length;o++){n=e[o];for(var s=0,l=n.length-1;s<n.length;l=s++)r=n[s],i=n[l],r.y>t.y!=i.y>t.y&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(a=!a)}return a}function h(e,t){for(var n=!1,r=0,i=e.length-1;r<e.length;i=r++){var a=e[r],o=e[i];a.y>t.y!=o.y>t.y&&t.x<(o.x-a.x)*(t.y-a.y)/(o.y-a.y)+a.x&&(n=!n)}return n}var p=e("./util"),m=p.isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:i,multiPolygonIntersectsMultiPolygon:a,multiPolygonIntersectsBufferedMultiLine:o,polygonIntersectsPolygon:r,distToSegmentSquared:d}},{"./util":275}],265:[function(e,t,n){var r={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};t.exports=r},{}],266:[function(e,t,n){var r=function(e,t){this.max=e,this.onRemove=t,this.reset()};r.prototype.reset=function(){var e=this;for(var t in e.data)e.onRemove(e.data[t]);return this.data={},this.order=[],this},r.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var n=this.getAndRemove(this.order[0]);n&&this.onRemove(n)}return this},r.prototype.has=function(e){return e in this.data},r.prototype.keys=function(){return this.order},r.prototype.getAndRemove=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},r.prototype.get=function(e){return this.has(e)?this.data[e]:null},r.prototype.remove=function(e){if(!this.has(e))return this;var t=this.data[e];return delete this.data[e],this.onRemove(t),this.order.splice(this.order.indexOf(e),1),this},r.prototype.setMaxSize=function(e){var t=this;for(this.max=e;this.order.length>this.max;){var n=t.getAndRemove(t.order[0]);n&&t.onRemove(n)}return this},t.exports=r},{}],267:[function(e,t,n){function r(e,t){var n=o(l.API_URL);if(e.protocol=n.protocol,e.authority=n.authority,"/"!==n.path&&(e.path=""+n.path+e.path),!l.REQUIRE_ACCESS_TOKEN)return s(e);if(!(t=t||l.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return e.params.push("access_token="+t),s(e)}function i(e){return 0===e.indexOf("mapbox:")}function a(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(l.ACCESS_TOKEN||""))}function o(e){var t=e.match(f);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function s(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var l=e("./config"),u=e("./browser"),c="See https://www.mapbox.com/api-documentation/#access-tokens";n.isMapboxURL=i,n.normalizeStyleURL=function(e,t){if(!i(e))return e;var n=o(e);return n.path="/styles/v1"+n.path,r(n,t)},n.normalizeGlyphsURL=function(e,t){if(!i(e))return e;var n=o(e);return n.path="/fonts/v1"+n.path,r(n,t)},n.normalizeSourceURL=function(e,t){if(!i(e))return e;var n=o(e);return n.path="/v4/"+n.authority+".json",n.params.push("secure"),r(n,t)},n.normalizeSpriteURL=function(e,t,n,a){var l=o(e);return i(e)?(l.path="/styles/v1"+l.path+"/sprite"+t+n,r(l,a)):(l.path+=""+t+n,s(l))};var d=/(\.(png|jpg)\d*)(?=$)/;n.normalizeTileURL=function(e,t,n){if(!t||!i(t))return e;var r=o(e),l=u.devicePixelRatio>=2||512===n?"@2x":"",c=u.supportsWebp?".webp":"$1";return r.path=r.path.replace(d,""+l+c),a(r.params),s(r)};var f=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":252,"./config":256}],268:[function(e,t,n){t.exports={getEntriesByName:function(e){return!(!performance||!performance.getEntriesByName)&&performance.getEntriesByName(e)}}},{}],269:[function(e,t,n){var r=e("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsIdeographicBreaking(i.charCodeAt(0)))return!1}return!0},t.exports.allowsVerticalWritingMode=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(n.charHasUprightVerticalOrientation(i.charCodeAt(0)))return!0}return!1},t.exports.allowsLetterSpacing=function(e){for(var t=0,r=e;t<r.length;t+=1){var i=r[t];if(!n.charAllowsLetterSpacing(i.charCodeAt(0)))return!1}return!0},t.exports.charAllowsLetterSpacing=function(e){return!r.Arabic(e)&&!r["Arabic Supplement"](e)&&!r["Arabic Extended-A"](e)&&!r["Arabic Presentation Forms-A"](e)&&!r["Arabic Presentation Forms-B"](e)},t.exports.charAllowsIdeographicBreaking=function(e){return!(e<11904)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!!r["CJK Compatibility Forms"](e)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!!r["CJK Symbols and Punctuation"](e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!!r.Katakana(e)||!!r["Vertical Forms"](e)||!!r["Yi Radicals"](e)||!!r["Yi Syllables"](e))},n.charHasUprightVerticalOrientation=function(e){return 746===e||747===e||!(e<4352)&&(!!r["Bopomofo Extended"](e)||!!r.Bopomofo(e)||!(!r["CJK Compatibility Forms"](e)||e>=65097&&e<=65103)||!!r["CJK Compatibility Ideographs"](e)||!!r["CJK Compatibility"](e)||!!r["CJK Radicals Supplement"](e)||!!r["CJK Strokes"](e)||!(!r["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||!!r["CJK Unified Ideographs Extension A"](e)||!!r["CJK Unified Ideographs"](e)||!!r["Enclosed CJK Letters and Months"](e)||!!r["Hangul Compatibility Jamo"](e)||!!r["Hangul Jamo Extended-A"](e)||!!r["Hangul Jamo Extended-B"](e)||!!r["Hangul Jamo"](e)||!!r["Hangul Syllables"](e)||!!r.Hiragana(e)||!!r["Ideographic Description Characters"](e)||!!r.Kanbun(e)||!!r["Kangxi Radicals"](e)||!!r["Katakana Phonetic Extensions"](e)||!(!r.Katakana(e)||12540===e)||!(!r["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!r["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||!!r["Unified Canadian Aboriginal Syllabics"](e)||!!r["Unified Canadian Aboriginal Syllabics Extended"](e)||!!r["Vertical Forms"](e)||!!r["Yijing Hexagram Symbols"](e)||!!r["Yi Syllables"](e)||!!r["Yi Radicals"](e))},n.charHasNeutralVerticalOrientation=function(e){return!(!r["Latin-1 Supplement"](e)||167!==e&&169!==e&&174!==e&&177!==e&&188!==e&&189!==e&&190!==e&&215!==e&&247!==e)||!(!r["General Punctuation"](e)||8214!==e&&8224!==e&&8225!==e&&8240!==e&&8241!==e&&8251!==e&&8252!==e&&8258!==e&&8263!==e&&8264!==e&&8265!==e&&8273!==e)||!!r["Letterlike Symbols"](e)||!!r["Number Forms"](e)||!(!r["Miscellaneous Technical"](e)||!(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215))||!(!r["Control Pictures"](e)||9251===e)||!!r["Optical Character Recognition"](e)||!!r["Enclosed Alphanumerics"](e)||!!r["Geometric Shapes"](e)||!(!r["Miscellaneous Symbols"](e)||e>=9754&&e<=9759)||!(!r["Miscellaneous Symbols and Arrows"](e)||!(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243))||!!r["CJK Symbols and Punctuation"](e)||!!r.Katakana(e)||!!r["Private Use Area"](e)||!!r["CJK Compatibility Forms"](e)||!!r["Small Form Variants"](e)||!!r["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e},n.charHasRotatedVerticalOrientation=function(e){return!(n.charHasUprightVerticalOrientation(e)||n.charHasNeutralVerticalOrientation(e))}},{"./is_char_in_unicode_block":265}],270:[function(e,t,n){var r=e("../geo/lng_lat");t.exports=function(e,t,n){if(e=new r(e.lng,e.lat),t){var i=new r(e.lng-360,e.lat),a=new r(e.lng+360,e.lat),o=n.locationPoint(e).distSqr(t);n.locationPoint(i).distSqr(t)<o?e=i:n.locationPoint(a).distSqr(t)<o&&(e=a)}for(;Math.abs(e.lng-n.center.lng)>180;){var s=n.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=n.width&&s.y<=n.height)break;e.lng>n.center.lng?e.lng-=360:e.lng+=360}return e}},{"../geo/lng_lat":62}],271:[function(e,t,n){function r(e,t){void 0===t&&(t=1);var n=0,r=0;return{members:e.map(function(e){var o=i(e.type),s=n=a(n,Math.max(t,o)),l=e.components||1;return r=Math.max(r,o),n+=o*l,{name:e.name,type:e.type,components:l,offset:s}}),size:a(n,Math.max(r,t)),alignment:t}}function i(e){return o[e].BYTES_PER_ELEMENT}function a(e,t){return Math.ceil(e/t)*t}var o={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},s=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},l=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};l.serialize=function(e,t){return e._trim(),t&&(e.isTransferred=!0,t.push(e.arrayBuffer)),{length:e.length,arrayBuffer:e.arrayBuffer}},l.deserialize=function(e){var t=Object.create(this.prototype);return t.arrayBuffer=e.arrayBuffer,t.length=e.length,t.capacity=e.arrayBuffer.byteLength/t.bytesPerElement,t._refreshViews(),t},l.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},l.prototype.clear=function(){this.length=0},l.prototype.resize=function(e){this.reserve(e),this.length=e},l.prototype.reserve=function(e){if(e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},l.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")},t.exports.StructArray=l,t.exports.Struct=s,t.exports.viewTypes=o,t.exports.createLayout=r},{}],272:[function(e,t,n){t.exports=function(e,t){var n=!1,r=0,i=function(){r=0,n&&(e(),r=setTimeout(i,t),n=!1)};return function(){return n=!0,r||i(),r}}},{}],273:[function(e,t,n){function r(e,t,n,r){function i(t,i,o){var u,c,d,f;if(o>=0&&o<=a)for(u=t;u<i;u++)c=Math.floor(u/a),d=(u%a+a)%a,0!==c&&!0!==r||(f=new l(n,c,e,d,o),s[f.key]=f)}void 0===r&&(r=!0);var a=1<<e,s={};return o(t[0],t[1],t[2],0,a,i),o(t[2],t[3],t[0],0,a,i),Object.keys(s).map(function(e){return s[e]})}function i(e,t){if(e.row>t.row){var n=e;e=t,t=n}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function a(e,t,n,r,i){var a=Math.max(n,Math.floor(t.y0)),o=Math.min(r,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var l=e.dx/e.dy,u=t.dx/t.dy,c=e.dx>0,d=t.dx<0,f=a;f<o;f++){var h=l*Math.max(0,Math.min(e.dy,f+c-e.y0))+e.x0,p=u*Math.max(0,Math.min(t.dy,f+d-t.y0))+t.x0;i(Math.floor(p),Math.ceil(h),f)}}function o(e,t,n,r,o,s){var l,u=i(e,t),c=i(t,n),d=i(n,e);u.dy>c.dy&&(l=u,u=c,c=l),u.dy>d.dy&&(l=u,u=d,d=l),c.dy>d.dy&&(l=c,c=d,d=l),u.dy&&a(d,u,r,o,s),c.dy&&a(d,c,r,o,s)}var s=(e("../geo/coordinate"),e("../source/tile_id")),l=s.OverscaledTileID;t.exports=r},{"../geo/coordinate":61,"../source/tile_id":114}],274:[function(e,t,n){function r(e,t){return t.replace(/{([^{}]+)}/g,function(t,n){return n in e?String(e[n]):""})}t.exports=r},{}],275:[function(e,t,n){var r=e("@mapbox/unitbezier"),i=e("../geo/coordinate");e("@mapbox/point-geometry");n.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)},n.bezier=function(e,t,n,i){var a=new r(e,t,n,i);return function(e){return a.solve(e)}},n.ease=n.bezier(.25,.1,.25,1),n.clamp=function(e,t,n){return Math.min(n,Math.max(t,e))},n.wrap=function(e,t,n){var r=n-t,i=((e-t)%r+r)%r+t;return i===t?n:i},n.asyncAll=function(e,t,n){if(!e.length)return n(null,[]);var r=e.length,i=new Array(e.length),a=null;e.forEach(function(e,o){t(e,function(e,t){e&&(a=e),i[o]=t,0==--r&&n(a,i)})})},n.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},n.keysDifference=function(e,t){var n=[];for(var r in e)r in t||n.push(r);return n},n.extend=function(e){for(var t=arguments,n=[],r=arguments.length-1;r-- >0;)n[r]=t[r+1];for(var i=0,a=n;i<a.length;i+=1){var o=a[i];for(var s in o)e[s]=o[s]}return e},n.pick=function(e,t){for(var n={},r=0;r<t.length;r++){var i=t[r];i in e&&(n[i]=e[i])}return n};var a=1;n.uniqueId=function(){return a++},n.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},n.getCoordinatesCenter=function(e){for(var t=1/0,n=1/0,r=-1/0,a=-1/0,o=0;o<e.length;o++)t=Math.min(t,e[o].column),n=Math.min(n,e[o].row),r=Math.max(r,e[o].column),a=Math.max(a,e[o].row);var s=r-t,l=a-n,u=Math.max(s,l),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new i((t+r)/2,(n+a)/2,0).zoomTo(c)},n.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},n.mapObject=function(e,t,n){var r=this,i={};for(var a in e)i[a]=t.call(n||r,e[a],a,e);return i},n.filterObject=function(e,t,n){var r=this,i={};for(var a in e)t.call(n||r,e[a],a,e)&&(i[a]=e[a]);return i},n.deepEqual=e("../style-spec/util/deep_equal"),n.clone=function(e){return Array.isArray(e)?e.map(n.clone):"object"==typeof e&&e?n.mapObject(e,n.clone):e},n.arraysIntersect=function(e,t){for(var n=0;n<e.length;n++)if(t.indexOf(e[n])>=0)return!0;return!1};var o={};n.warnOnce=function(e){o[e]||("undefined"!=typeof console&&console.warn(e),o[e]=!0)},n.isCounterClockwise=function(e,t,n){return(n.y-e.y)*(t.x-e.x)>(t.y-e.y)*(n.x-e.x)},n.calculateSignedArea=function(e){for(var t=0,n=0,r=e.length,i=r-1,a=void 0,o=void 0;n<r;i=n++)a=e[n],o=e[i],t+=(o.x-a.x)*(a.y+o.y);return t},n.isClosedPolygon=function(e){if(e.length<4)return!1;var t=e[0],r=e[e.length-1];return!(Math.abs(t.x-r.x)>0||Math.abs(t.y-r.y)>0)&&Math.abs(n.calculateSignedArea(e))>.01},n.sphericalToCartesian=function(e){var t=e[0],n=e[1],r=e[2];return n+=90,n*=Math.PI/180,r*=Math.PI/180,{x:t*Math.cos(n)*Math.sin(r),y:t*Math.sin(n)*Math.sin(r),z:t*Math.cos(r)}},n.parseCacheControl=function(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,n={};if(e.replace(t,function(e,t,r,i){var a=r||i;return n[t]=!a||a.toLowerCase(),""}),n["max-age"]){var r=parseInt(n["max-age"],10);isNaN(r)?delete n["max-age"]:n["max-age"]=r}return n}},{"../geo/coordinate":61,"../style-spec/util/deep_equal":155,"@mapbox/point-geometry":4,"@mapbox/unitbezier":7}],276:[function(e,t,n){var r=function(e,t,n,r){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=n,e._y=r,this.properties=e.properties,null!=e.id&&(this.id=e.id)},i={geometry:{}};i.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},i.geometry.set=function(e){this._geometry=e},r.prototype.toJSON=function(){var e=this,t={geometry:this.geometry};for(var n in e)"_geometry"!==n&&"_vectorTileFeature"!==n&&(t[n]=e[n]);return t},Object.defineProperties(r.prototype,i),t.exports=r},{}],277:[function(e,t,n){var r=e("./script_detection");t.exports=function(e){for(var n="",i=0;i<e.length;i++){var a=e.charCodeAt(i+1)||null,o=e.charCodeAt(i-1)||null;a&&r.charHasRotatedVerticalOrientation(a)&&!t.exports.lookup[e[i+1]]||o&&r.charHasRotatedVerticalOrientation(o)&&!t.exports.lookup[e[i-1]]||!t.exports.lookup[e[i]]?n+=e[i]:n+=t.exports.lookup[e[i]]}return n},t.exports.lookup={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"}},{"./script_detection":269}],278:[function(e,t,n){function r(e,t,n){void 0===n&&(n={}),Object.defineProperty(t,"_classRegistryKey",{value:e,writeable:!1}),_[e]={klass:t,omit:n.omit||[],shallow:n.shallow||[]}}function i(e,t){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp)return e;if(e instanceof ArrayBuffer)return t&&t.push(e),e;if(ArrayBuffer.isView(e)){var n=e;return t&&t.push(n.buffer),n}if(e instanceof v)return t&&t.push(e.data.buffer),e;if(Array.isArray(e)){for(var r=[],a=0,o=e;a<o.length;a+=1){var s=o[a];r.push(i(s,t))}return r}if("object"==typeof e){var l=e.constructor,u=l._classRegistryKey;if(!u)throw new Error("can't serialize object of unregistered class");var c={};if(l.serialize)c._serialized=l.serialize(e,t);else for(var d in e)if(e.hasOwnProperty(d)&&!(_[u].omit.indexOf(d)>=0)){var f=e[d];c[d]=_[u].shallow.indexOf(d)>=0?f:i(f,t)}return{name:u,properties:c}}throw new Error("can't serialize object of type "+typeof e)}function a(e){if(null===e||void 0===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||e instanceof Boolean||e instanceof Number||e instanceof String||e instanceof Date||e instanceof RegExp||e instanceof ArrayBuffer||ArrayBuffer.isView(e)||e instanceof v)return e;if(Array.isArray(e))return e.map(function(e){return a(e)});if("object"==typeof e){var t=e,n=t.name,r=t.properties;if(!n)throw new Error("can't deserialize object of anonymous class");var i=_[n],o=i.klass;if(!o)throw new Error("can't deserialize unregistered class "+n);if(o.deserialize)return o.deserialize(r._serialized);for(var s=Object.create(o.prototype),l=0,u=Object.keys(r);l<u.length;l+=1){var c=u[l];s[c]=_[n].shallow.indexOf(c)>=0?r[c]:a(r[c])}return s}throw new Error("can't deserialize object of type "+typeof e)}var o=e("grid-index"),s=e("../style-spec/util/color"),l=e("../style-spec/expression"),u=l.StylePropertyFunction,c=l.StyleExpression,d=l.StyleExpressionWithErrorHandling,f=l.ZoomDependentExpression,h=l.ZoomConstantExpression,p=e("../style-spec/expression/compound_expression"),m=p.CompoundExpression,g=e("../style-spec/expression/definitions"),y=e("./window"),v=y.ImageData,_={};r("Object",Object),o.serialize=function(e,t){var n=e.toArrayBuffer();return t&&t.push(n),n},o.deserialize=function(e){return new o(e)},r("Grid",o),r("Color",s),r("StylePropertyFunction",u),r("StyleExpression",c,{omit:["_evaluator"]}),r("StyleExpressionWithErrorHandling",d,{omit:["_evaluator"]}),r("ZoomDependentExpression",f),r("ZoomConstantExpression",h),r("CompoundExpression",m,{omit:["_evaluate"]});for(var b in g)g[b]._classRegistryKey||r("Expression_"+b,g[b]);t.exports={register:r,serialize:i,deserialize:a}},{"../style-spec/expression":139,"../style-spec/expression/compound_expression":123,"../style-spec/expression/definitions":131,"../style-spec/util/color":153,"./window":254,"grid-index":24}],279:[function(e,t,n){var r=e("./web_worker"),i=function(){this.active={}};i.prototype.acquire=function(t){var n=this;if(!this.workers){var i=e("../").workerCount;for(this.workers=[];this.workers.length<i;)n.workers.push(new r)}return this.active[t]=!0,this.workers.slice()},i.prototype.release=function(e){delete this.active[e],0===Object.keys(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.exports=i},{"../":73,"./web_worker":253}]},{},[73])(73)})}).call(this,"undefined"!==typeof t?t:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{}),p6=p6.exports;var m6={requiredVersion:"0.44.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",controlContainerClassName:"mapboxgl-control-container",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@0.44.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.plot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),mapOnErrorMsg:"Mapbox error.",styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none"}},g6=jE.defaultLine,y6=qD.attributes,v6=YP.textposition,_6=TE.overrideAll,b6=KC({});b6.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var x6=_6({_arrayAttrRegexps:[uE.counterRegex("mapbox",".layers",!0)],domain:y6({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],dflt:"basic"},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:{_isLinkedToArray:"layer",sourcetype:{valType:"enumerated",values:["geojson","vector"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},type:{valType:"enumerated",values:["circle","line","fill","symbol"],dflt:"circle"},below:{valType:"string",dflt:""},color:{valType:"color",dflt:g6},opacity:{valType:"number",min:0,max:1,dflt:1},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2}},fill:{outlinecolor:{valType:"color",dflt:g6}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},textfont:b6,textposition:uE.extendFlat({},v6,{arrayOk:!1})}}},"plot","from-root"),w6=function(e,t,n){QD(e,t,0,{type:"mapbox",attributes:x6,handleDefaults:hM,partition:"y",accessToken:t._mapboxAccessToken})},k6=function(e,t){var n=e.split(" "),r=n[0],i=n[1],a=uE.isArrayOrTypedArray(t)?uE.mean(t):t,o=.5+a/100,s=1.5+a/100,l=["",""],u=[0,0];switch(r){case"top":l[0]="top",u[1]=-s;break;case"bottom":l[0]="bottom",u[1]=s}switch(i){case"left":l[1]="right",u[0]=-o;break;case"right":l[1]="left",u[0]=o}var c;return c=l[0]&&l[1]?l.join("-"):l[0]?l[0]:l[1]?l[1]:"center",{anchor:c,offset:u}},T6=mM.prototype;T6.update=function(e){this.visible?this.needsNewSource(e)?(this.updateLayer(e),this.updateSource(e)):this.needsNewLayer(e)?this.updateLayer(e):this.updateStyle(e):(this.updateSource(e),this.updateLayer(e)),this.visible=gM(e)},T6.needsNewSource=function(e){return this.sourceType!==e.sourcetype||this.source!==e.source||this.layerType!==e.type},T6.needsNewLayer=function(e){return this.layerType!==e.type||this.below!==e.below},T6.updateSource=function(e){var t=this.map;if(t.getSource(this.idSource)&&t.removeSource(this.idSource),this.sourceType=e.sourcetype,this.source=e.source,gM(e)){var n=vM(e);t.addSource(this.idSource,n)}},T6.updateLayer=function(e){var t=this.map,n=yM(e);t.getLayer(this.idLayer)&&t.removeLayer(this.idLayer),this.layerType=e.type,gM(e)&&t.addLayer({id:this.idLayer,source:this.idSource,"source-layer":e.sourcelayer||"",type:e.type,layout:n.layout,paint:n.paint},e.below)},T6.updateStyle=function(e){if(gM(e)){var t=yM(e);this.mapbox.setOptions(this.idLayer,"setLayoutProperty",t.layout),this.mapbox.setOptions(this.idLayer,"setPaintProperty",t.paint)}},T6.dispose=function(){var e=this.map;e.removeLayer(this.idLayer),e.removeSource(this.idSource)};var M6=function(e,t,n){var r=new mM(e,t);return r.update(n),r},A6=_M.prototype,C6=function(e){return new _M(e)};A6.plot=function(e,t,n){var r=this,i=r.opts=t[this.id];r.map&&i.accesstoken!==r.accessToken&&(r.map.remove(),r.map=null,r.styleObj=null,r.traceHash=[],r.layerList={});var a;a=r.map?new Promise(function(n,i){r.updateMap(e,t,n,i)}):new Promise(function(n,i){r.createMap(e,t,n,i)}),n.push(a)},A6.createMap=function(e,t,n,r){function i(){kO.loneUnhover(t._toppaper)}var a=this,o=a.gd,s=a.opts,l=a.styleObj=bM(s.style);a.accessToken=s.accesstoken;var u=a.map=new p6.Map({container:a.div,style:l.style,center:wM(s.center),zoom:s.zoom,bearing:s.bearing,pitch:s.pitch,interactive:!a.isStatic,preserveDrawingBuffer:a.isStatic,doubleClickZoom:!1,boxZoom:!1}),c=m6.controlContainerClassName,d=a.div.getElementsByClassName(c)[0];a.div.removeChild(d),u._canvas.style.left="0px",u._canvas.style.top="0px",a.rejectOnError(r),u.once("load",function(){a.updateData(e),a.updateLayout(t),a.resolveOnRender(n)}),a.isStatic||(u.on("moveend",function(e){if(a.map){var t=a.getView();if(s._input.center=s.center=t.center,s._input.zoom=s.zoom=t.zoom,s._input.bearing=s.bearing=t.bearing,s._input.pitch=s.pitch=t.pitch,e.originalEvent){var n={};n[a.id]=uE.extendFlat({},t),o.emit("plotly_relayout",n)}}}),u.on("mousemove",function(e){var t=a.div.getBoundingClientRect();e.clientX=e.point.x+t.left,e.clientY=e.point.y+t.top,e.target.getBoundingClientRect=function(){return t},a.xaxis.p2c=function(){return e.lngLat.lng},a.yaxis.p2c=function(){return e.lngLat.lat},kO.hover(o,e,a.id)}),u.on("click",function(e){kO.click(o,e.originalEvent)}),u.on("dragstart",i),u.on("zoomstart",i),u.on("dblclick",function(){var e=a.viewInitial;u.setCenter(wM(e.center)),u.setZoom(e.zoom),u.setBearing(e.bearing),u.setPitch(e.pitch);var t=a.getView();s._input.center=s.center=t.center,s._input.zoom=s.zoom=t.zoom,s._input.bearing=s.bearing=t.bearing,s._input.pitch=s.pitch=t.pitch,o.emit("plotly_doubleclick",null)}),a.clearSelect=function(){o._fullLayout._zoomlayer.selectAll(".select-outline").remove()})},A6.updateMap=function(e,t,n,r){var i=this,a=i.map;i.rejectOnError(r);var o=bM(i.opts.style);i.styleObj.id!==o.id?(i.styleObj=o,a.setStyle(o.style),a.once("styledata",function(){i.traceHash={},i.updateData(e),i.updateLayout(t),i.resolveOnRender(n)})):(i.updateData(e),i.updateLayout(t),i.resolveOnRender(n))},A6.updateData=function(e){var t,n,r,i,a=this.traceHash;for(r=0;r<e.length;r++){var o=e[r];n=o[0].trace,t=a[n.uid],t?t.update(o):n._module&&(a[n.uid]=n._module.plot(this,o))}var s=Object.keys(a);e:for(r=0;r<s.length;r++){var l=s[r];for(i=0;i<e.length;i++)if(n=e[i][0].trace,l===n.uid)continue e;t=a[l],t.dispose(),delete a[l]}},A6.updateLayout=function(e){var t=this.map,n=this.opts;t.setCenter(wM(n.center)),t.setZoom(n.zoom),t.setBearing(n.bearing),t.setPitch(n.pitch),this.updateLayers(),this.updateFramework(e),this.updateFx(e),this.map.resize()},A6.resolveOnRender=function(e){var t=this.map;t.on("render",function n(){t.loaded()&&(t.off("render",n),setTimeout(e,0))})},A6.rejectOnError=function(e){function t(){e(new Error(m6.mapOnErrorMsg))}var n=this.map;n.once("error",t),n.once("style.error",t),n.once("source.error",t),n.once("tile.error",t),n.once("layer.error",t)},A6.createFramework=function(e){var t=this,n=t.div=document.createElement("div");n.id=t.uid,n.style.position="absolute",t.container.appendChild(n),t.xaxis={_id:"x",c2p:function(e){return t.project(e).x}},t.yaxis={_id:"y",c2p:function(e){return t.project(e).y}},t.updateFramework(e)},A6.updateFx=function(e){function t(e){var t=n.map.unproject(e);return[t.lng,t.lat]}var n=this,r=n.map,i=n.gd;if(!n.isStatic){var a,o=e.dragmode;if(a="select"===o?function(e,r){(e.range={})[n.id]=[t([r.xmin,r.ymin]),t([r.xmax,r.ymax])]}:function(e,r,i){(e.lassoPoints={})[n.id]=i.filtered.map(t)},"select"===o||"lasso"===o){r.dragPan.disable(),r.on("zoomstart",n.clearSelect);var s={element:n.div,gd:i,plotinfo:{xaxis:n.xaxis,yaxis:n.yaxis,fillRangeItems:a},xaxes:[n.xaxis],yaxes:[n.yaxis],subplot:n.id};s.prepFn=function(e,t,n){zD(e,t,n,s,o)},$L.init(s)}else r.dragPan.enable(),r.off("zoomstart",n.clearSelect),n.div.onmousedown=null}},A6.updateFramework=function(e){var t=e[this.id].domain,n=e._size,r=this.div.style;r.width=n.w*(t.x[1]-t.x[0])+"px",r.height=n.h*(t.y[1]-t.y[0])+"px",r.left=n.l+t.x[0]*n.w+"px",r.top=n.t+(1-t.y[1])*n.h+"px",this.xaxis._offset=n.l+t.x[0]*n.w,this.xaxis._length=n.w*(t.x[1]-t.x[0]),this.yaxis._offset=n.t+(1-t.y[1])*n.h,this.yaxis._length=n.h*(t.y[1]-t.y[0])},A6.updateLayers=function(){var e,t=this.opts,n=t.layers,r=this.layerList;if(n.length!==r.length){for(e=0;e<r.length;e++)r[e].dispose();for(r=this.layerList=[],e=0;e<n.length;e++)r.push(M6(this,e,n[e]))}else for(e=0;e<n.length;e++)r[e].update(n[e])},A6.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},A6.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},A6.setOptions=function(e,t,n){for(var r in n)this.map[t](e,r,n[r])},A6.project=function(e){return this.map.project(new p6.LngLat(e[0],e[1]))},A6.getView=function(){var e=this.map,t=e.getCenter();return{center:{lon:t.lng,lat:t.lat},zoom:e.getZoom(),bearing:e.getBearing(),pitch:e.getPitch()}};var S6={},E6=_L.getSubplotCalcData;for(var P6 in m6.styleRules)uE.addStyleRule(".mapboxgl-"+P6,m6.styleRules[P6]);S6.name="mapbox",S6.attr="subplot",S6.idRoot="mapbox",S6.idRegex=S6.attrRegex=uE.counterRegex("mapbox"),S6.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},S6.layoutAttributes=x6,S6.supplyLayoutDefaults=w6,S6.plot=function(e){var t=e._fullLayout,n=e.calcdata,r=t._subplots.mapbox;if(p6.version!==m6.requiredVersion)throw new Error(m6.wrongVersionErrorMsg);var i=kM(e,r);p6.accessToken=i;for(var a=0;a<r.length;a++){var o=r[a],s=E6(n,"mapbox",o),l=t[o],u=l._subplot;u||(u=C6({gd:e,container:t._glcontainer.node(),id:o,fullLayout:t,staticPlot:e._context.staticPlot}),t[o]._subplot=u),u.viewInitial||(u.viewInitial={center:uE.extendFlat({},l.center),zoom:l.zoom,bearing:l.bearing,pitch:l.pitch}),u.plot(s,t,e._promises)}},S6.clean=function(e,t,n,r){for(var i=r._subplots.mapbox||[],a=0;a<i.length;a++){var o=i[a];!t[o]&&r[o]._subplot&&r[o]._subplot.destroy()}},S6.toSVG=function(e){for(var t=e._fullLayout,n=t._subplots.mapbox,r=t._size,i=0;i<n.length;i++){var a=t[n[i]],o=a.domain,s=a._subplot,l=s.toImage("png");t._glimages.append("svg:image").attr({xmlns:aP.svg,"xlink:href":l,x:r.l+r.w*o.x[0],y:r.t+r.h*(1-o.y[1]),width:r.w*(o.x[1]-o.x[0]),height:r.h*(o.y[1]-o.y[0]),preserveAspectRatio:"none"}),s.destroy()}},S6.updateFx=function(e){for(var t=e._subplots.mapbox,n=0;n<t.length;n++){e[t[n]]._subplot.updateFx(e)}};var I6=WC.extendFlat,L6=TE.overrideAll,O6=dN.line,z6=dN.marker,R6=L6({lon:dN.lon,lat:dN.lat,mode:I6({},YP.mode,{dflt:"markers"}),text:I6({},YP.text,{}),hovertext:I6({},YP.hovertext,{}),line:{color:O6.color,width:O6.width},connectgaps:YP.connectgaps,marker:{symbol:{valType:"string",dflt:"circle",arrayOk:!0},opacity:z6.opacity,size:z6.size,sizeref:z6.sizeref,sizemin:z6.sizemin,sizemode:z6.sizemode,color:z6.color,colorscale:z6.colorscale,cauto:z6.cauto,cmax:z6.cmax,cmin:z6.cmin,autocolorscale:z6.autocolorscale,reversescale:z6.reversescale,showscale:z6.showscale,colorbar:RE},fill:dN.fill,fillcolor:YP.fillcolor,textfont:x6.layers.symbol.textfont,textposition:x6.layers.symbol.textposition,selected:{marker:YP.selected.marker},unselected:{marker:YP.unselected.marker},hoverinfo:I6({},$C.hoverinfo,{flags:["lon","lat","text","name"]})},"calc","nested"),D6=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,R6,n,r)}if(!TM(e,t,i))return void(t.visible=!1);if(i("text"),i("hovertext"),i("mode"),EP.hasLines(t)&&(hH(e,t,n,r,i,{noDash:!0}),i("connectgaps")),EP.hasMarkers(t)){mH(e,t,n,r,i,{noLine:!0});var a=t.marker;a.line={width:0},"circle"!==a.symbol&&(uE.isArrayOrTypedArray(a.size)&&(a.size=a.size[0]),uE.isArrayOrTypedArray(a.color)&&(a.color=a.color[0]))}EP.hasText(t)&&gH(0,0,r,i,{noSelect:!0}),i("fill"),"none"!==t.fill&&dH(0,t,n,i),uE.coerceSelectionMarkerOpacity(t,i)},N6=function(e,t){return e.lon=t.lon,e.lat=t.lat,e},F6=AC.BADNUM,j6=function(e,t,n){function r(e){var t=e.lonlat;if(t[0]===F6)return 1/0;var r=uE.wrap180(t[0]),i=t[1],a=l.project([r,i]),u=a.x-o.c2p([d,i]),c=a.y-s.c2p([r,n]),f=Math.max(3,e.mrc||0);return Math.max(Math.sqrt(u*u+c*c)-f,1-3/f)}var i=e.cd,a=i[0].trace,o=e.xa,s=e.ya,l=e.subplot,u=t>=0?Math.floor((t+180)/360):Math.ceil((t-180)/360),c=360*u,d=t-c;if(kO.getClosest(i,r,e),!1!==e.index){var f=i[e.index],h=f.lonlat,p=[uE.wrap180(h[0])+c,h[1]],m=o.c2p(p),g=s.c2p(p),y=f.mrc||1;return e.x0=m-y,e.x1=m+y,e.y0=g-y,e.y1=g+y,e.color=vH(a,f),e.extraText=MM(a,f,i[0].t.labels),[e]}},B6=AC.BADNUM,U6=function(e){var t=e[0].trace,n=!0===t.visible,r="none"!==t.fill,i=EP.hasLines(t),a=EP.hasMarkers(t),o=EP.hasText(t),s=a&&"circle"===t.marker.symbol,l=a&&"circle"!==t.marker.symbol,u=AM(),c=AM(),d=AM(),f=AM(),h={fill:u,line:c,circle:d,symbol:f};if(!n)return h;var p;if((r||i)&&(p=G5.calcTraceToLineCoords(e)),r&&(u.geojson=G5.makePolygon(p),u.layout.visibility="visible",uE.extendFlat(u.paint,{"fill-color":t.fillcolor})),i&&(c.geojson=G5.makeLine(p),c.layout.visibility="visible",uE.extendFlat(c.paint,{"line-width":t.line.width,"line-color":t.line.color,"line-opacity":t.opacity})),s){var m=CM(e);d.geojson=m.geojson,d.layout.visibility="visible",uE.extendFlat(d.paint,{"circle-color":m.mcc,"circle-radius":m.mrc,"circle-opacity":m.mo})}if((l||o)&&(f.geojson=SM(e),uE.extendFlat(f.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),l&&(uE.extendFlat(f.layout,{"icon-size":t.marker.size/10}),uE.extendFlat(f.paint,{"icon-opacity":t.opacity*t.marker.opacity,"icon-color":t.marker.color})),o)){var g=(t.marker||{}).size,y=k6(t.textposition,g);uE.extendFlat(f.layout,{"text-size":t.textfont.size,"text-anchor":y.anchor,"text-offset":y.offset}),uE.extendFlat(f.paint,{"text-color":t.textfont.color,"text-opacity":t.opacity})}return h},V6=LM.prototype;V6.addSource=function(e,t){this.subplot.map.addSource(this.sourceIds[e],{type:"geojson",data:t.geojson})},V6.setSourceData=function(e,t){this.subplot.map.getSource(this.sourceIds[e]).setData(t.geojson)},V6.addLayer=function(e,t){this.subplot.map.addLayer({type:e,id:this.layerIds[e],source:this.sourceIds[e],layout:t.layout,paint:t.paint})},V6.update=function(e){for(var t=this.subplot,n=U6(e),r=0;r<this.order.length;r++){var i=this.order[r],a=n[i];t.setOptions(this.layerIds[i],"setLayoutProperty",a.layout),"visible"===a.layout.visibility&&(this.setSourceData(i,a),t.setOptions(this.layerIds[i],"setPaintProperty",a.paint))}e[0].trace._glTrace=this},V6.dispose=function(){for(var e=this.subplot.map,t=0;t<this.order.length;t++){var n=this.order[t];e.removeLayer(this.layerIds[n]),e.removeSource(this.sourceIds[n])}};var H6=function(e,t){for(var n=t[0].trace,r=new LM(e,n.uid),i=U6(t),a=0;a<r.order.length;a++){var o=r.order[a],s=i[o];r.addSource(o,s),r.addLayer(o,s)}return t[0].trace._glTrace=r,r},W6=function(e,t){var n,r=e.cd,i=e.xaxis,a=e.yaxis,o=[],s=r[0].trace;if(!EP.hasMarkers(s))return[];if(!1===t)for(n=0;n<r.length;n++)r[n].selected=0;else for(n=0;n<r.length;n++){var l=r[n],u=l.lonlat,c=[uE.wrap180(u[0]),u[1]],d=[i.c2p(c),a.c2p(c)];t.contains(d)?(o.push({pointNumber:n,lon:u[0],lat:u[1]}),l.selected=1):l.selected=0}return o},q6={};q6.attributes=R6,q6.supplyDefaults=D6,q6.colorbar=YO,q6.calc=U5,q6.plot=H6,q6.hoverPoints=j6,q6.eventData=N6,q6.selectPoints=W6,q6.style=function(e,t){if(t){t[0].trace._glTrace.update(t)}},q6.moduleType="trace",q6.name="scattermapbox",q6.basePlotModule=S6,q6.categories=["mapbox","gl","symbols","markerColorscale","showLegend","scatterlike"],q6.meta={};var G6=q6,Y6=G6,X6={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-axis","radial-axis","angular-line","radial-line"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20},Z6=qD.attributes,J6=uE.extendFlat,K6=TE.overrideAll,Q6=K6({color:LE.color,showline:J6({},LE.showline,{dflt:!0}),linecolor:LE.linecolor,linewidth:LE.linewidth,showgrid:J6({},LE.showgrid,{dflt:!0}),gridcolor:LE.gridcolor,gridwidth:LE.gridwidth},"plot","from-root"),$6=K6({tickmode:LE.tickmode,nticks:LE.nticks,tick0:LE.tick0,dtick:LE.dtick,tickvals:LE.tickvals,ticktext:LE.ticktext,ticks:LE.ticks,ticklen:LE.ticklen,tickwidth:LE.tickwidth,tickcolor:LE.tickcolor,showticklabels:LE.showticklabels,showtickprefix:LE.showtickprefix,tickprefix:LE.tickprefix,showticksuffix:LE.showticksuffix,ticksuffix:LE.ticksuffix,showexponent:LE.showexponent,exponentformat:LE.exponentformat,separatethousands:LE.separatethousands,tickfont:LE.tickfont,tickangle:LE.tickangle,tickformat:LE.tickformat,tickformatstops:LE.tickformatstops,layer:LE.layer},"plot","from-root"),e8={visible:J6({},LE.visible,{dflt:!0}),type:LE.type,autorange:LE.autorange,rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:LE.range,categoryorder:LE.categoryorder,categoryarray:LE.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:J6({},LE.title,{editType:"plot",dflt:""}),titlefont:K6(LE.titlefont,"plot","from-root"),hoverformat:LE.hoverformat,editType:"calc"};J6(e8,Q6,$6);var t8={visible:J6({},LE.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc"},categoryorder:LE.categoryorder,categoryarray:LE.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:LE.hoverformat,editType:"calc"};J6(t8,Q6,$6);var n8={domain:Z6({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:eS.background},radialaxis:e8,angularaxis:t8,editType:"calc"},r8={};r8.setConvertAngular=function(e){function t(){return e.period?Math.max(e.period,e._categories.length):e._categories.length}function n(e){return o*e+s}function r(e){return(e-s)/o}var i,a,o={clockwise:-1,counterclockwise:1}[e.direction],s=uE.deg2rad(e.rotation);"linear"===e.type?(i=function(e,t){return"degrees"===t?uE.deg2rad(e):e},a=function(e,t){return"degrees"===t?uE.rad2deg(e):e}):"category"===e.type&&(i=function(e){var n=t();return 2*e*Math.PI/n},a=function(e){return e*t()/Math.PI/2}),e.unTransformRad=r,e._c2rad=i,e.c2rad=function(e,t){return n(i(e,t))},e.rad2c=function(e,t){return a(r(e),t)},e.c2deg=function(t,n){return uE.rad2deg(e.c2rad(t,n))},e.deg2c=function(t,n){return e.rad2c(uE.deg2rad(t),n)}};var i8=_L.getSubplotData,a8=r8.setConvertAngular,o8=X6.axisNames,s8=function(e,t,n){QD(e,t,0,{type:X6.name,attributes:n8,handleDefaults:OM,font:t.font,paper_bgcolor:t.paper_bgcolor,fullData:n,layoutOut:t})},l8=bI.doAutoRange,u8=iP.MID_SHIFT,c8=uE._,d8=uE.deg2rad,f8=uE.rad2deg,h8=uE.wrap360,p8=uE.wrap180,m8=r8.setConvertAngular,g8=RM.prototype,y8=function(e,t){return new RM(e,t)};g8.plot=function(e,t){var n=this,r=t[n.id];n._hasClipOnAxisFalse=!1;for(var i=0;i<e.length;i++){if(!1===e[i][0].trace.cliponaxis){n._hasClipOnAxisFalse=!0;break}}n.updateLayers(t,r),n.updateLayout(t,r),lI.generalUpdatePerTraceModule(n.gd,n,e,r),n.updateFx(t,r)},g8.updateLayers=function(e,t){var n=this,r=n.layers,i=t.radialaxis,a=t.angularaxis,o=X6.layerNames,s=o.indexOf("frontplot"),l=o.slice(0,s),u="below traces"===a.layer,c="below traces"===i.layer;u&&l.push("angular-axis"),c&&l.push("radial-axis"),u&&l.push("angular-line"),c&&l.push("radial-line"),l.push("frontplot"),u||l.push("angular-axis"),c||l.push("radial-axis"),u||l.push("angular-line"),c||l.push("radial-line");var d=n.framework.selectAll(".polarsublayer").data(l,String);d.enter().append("g").attr("class",function(e){return"polarsublayer "+e}).each(function(e){var t=r[e]=CC.select(this);switch(e){case"frontplot":t.append("g").classed("scatterlayer",!0);break;case"backplot":t.append("g").classed("maplayer",!0);break;case"plotbg":r.bgcircle=t.append("path");break;case"radial-grid":t.style("fill","none"),t.append("g").classed("x",1);break;case"angular-grid":t.style("fill","none"),t.append("g").classed("angular",1);break;case"radial-line":t.append("line").style("fill","none");break;case"angular-line":t.append("path").style("fill","none")}}),d.order()},g8.updateLayout=function(e,t){var n=this,r=n.layers,i=e._size,a=t.domain.x,o=t.domain.y;n.xOffset=i.l+i.w*a[0],n.yOffset=i.t+i.h*(1-o[1]);var s,l,u,c,d,f=n.xLength=i.w*(a[1]-a[0]),h=n.yLength=i.h*(o[1]-o[0]),p=n.sector=t.sector,m=n.sectorBBox=FM(p),g=m[2]-m[0],y=m[3]-m[1],v=h/f,_=Math.abs(y/g);v>_?(s=f,l=f*_,d=(h-l)/i.h/2,u=[a[0],a[1]],c=[o[0]+d,o[1]-d]):(s=h/_,l=h,d=(f-s)/i.w/2,u=[a[0]+d,a[1]-d],c=[o[0],o[1]]),n.xLength2=s,n.yLength2=l,n.xDomain2=u,n.yDomain2=c;var b=n.xOffset2=i.l+i.w*u[0],x=n.yOffset2=i.t+i.h*(1-c[1]),w=n.radius=s/g,k=n.cx=b-w*m[0],T=n.cy=x+w*m[3],M=n.cxx=k-b,A=n.cyy=T-x;n.updateRadialAxis(e,t),n.updateRadialAxisTitle(e,t),n.updateAngularAxis(e,t);var C=n.radialAxis.range,S=C[1]-C[0],E=n.xaxis={type:"linear",_id:"x",range:[m[0]*S,m[2]*S],domain:u};PI.setConvert(E,e),E.setScale();var P=n.yaxis={type:"linear",_id:"y",range:[m[1]*S,m[3]*S],domain:c};PI.setConvert(P,e),P.setScale(),E.isPtWithinRange=function(e){return n.isPtWithinSector(e)},P.isPtWithinRange=function(){return!0},r.frontplot.attr("transform",WM(b,x)).call(PP.setClipUrl,n._hasClipOnAxisFalse?null:n.clipIds.circle),r.bgcircle.attr({d:BM(w,p),transform:WM(k,T)}).call(jE.fill,t.bgcolor),n.clipPaths.circle.select("path").attr("d",BM(w,p)).attr("transform",WM(M,A)),n.framework.selectAll(".crisp").classed("crisp",0)},g8.updateRadialAxis=function(e,t){var n=this,r=n.gd,i=n.layers,a=n.radius,o=n.cx,s=n.cy,l=e._size,u=t.radialaxis,c=t.sector,d=h8(c[0]);n.fillViewInitialKey("radialaxis.angle",u.angle);var f=n.radialAxis=uE.extendFlat({},u,{_axislayer:i["radial-axis"],_gridlayer:i["radial-grid"],_id:"x",_pos:0,side:{counterclockwise:"top",clockwise:"bottom"}[u.side],domain:[0,a/l.w],anchor:"free",position:0,_counteraxis:!0,automargin:!1});DM(f,u,e),l8(f),u.range=f.range.slice(),u._input.range=f.range.slice(),n.fillViewInitialKey("radialaxis.range",f.range.slice()),"auto"===f.tickangle&&d>90&&d<=270&&(f.tickangle=180),f._transfn=function(e){return"translate("+f.l2p(e.x)+",0)"},f._gridpath=function(e){return jM(f.r2p(e.x),c)};var h=NM(u);n.radialTickLayout!==h&&(i["radial-axis"].selectAll(".xtick").remove(),n.radialTickLayout=h),PI.doTicks(r,f,!0),HM(i["radial-axis"],u.showticklabels||u.ticks,{transform:WM(o,s)+qM(-u.angle)}),HM(i["radial-grid"],u.showgrid,{transform:WM(o,s)}).selectAll("path").attr("transform",null),HM(i["radial-line"].select("line"),u.showline,{x1:0,y1:0,x2:a,y2:0,transform:WM(o,s)+qM(-u.angle)}).attr("stroke-width",u.linewidth).call(jE.stroke,u.linecolor)},g8.updateRadialAxisTitle=function(e,t,n){var r=this,i=r.gd,a=r.radius,o=r.cx,s=r.cy,l=t.radialaxis,u=r.id+"title",c=void 0!==n?n:l.angle,d=d8(c),f=Math.cos(d),h=Math.sin(d),p=0;if(l.title){var m=PP.bBox(r.layers["radial-axis"].node()).height,g=l.titlefont.size;p="counterclockwise"===l.side?-m-.4*g:m+.8*g}r.layers["radial-axis-title"]=yI.draw(i,u,{propContainer:l,propName:r.id+".radialaxis.title",placeholder:c8(i,"Click to enter radial axis title"),attributes:{x:o+a/2*f+p*h,y:s-a/2*h+p*f,"text-anchor":"middle"},transform:{rotate:-c}})},g8.updateAngularAxis=function(e,t){function n(e){return h.c2rad(e.x,"degrees")}function r(e){return[s*Math.cos(e),s*Math.sin(e)]}var i=this,a=i.gd,o=i.layers,s=i.radius,l=i.cx,u=i.cy,c=t.angularaxis,d=t.sector,f=d.map(d8);i.fillViewInitialKey("angularaxis.rotation",c.rotation);var h=i.angularAxis=uE.extendFlat({},c,{_axislayer:o["angular-axis"],_gridlayer:o["angular-grid"],_id:"angular",_pos:0,side:"right",domain:[0,Math.PI],anchor:"free",position:0,_counteraxis:!0,automargin:!1,autorange:!1});if("linear"===h.type)VM(d)?h.range=d.slice():h.range=f.map(h.unTransformRad).map(f8),"radians"===h.thetaunit&&(h.tick0=f8(h.tick0),h.dtick=f8(h.dtick));else if("category"===h.type){var p=c.period?Math.max(c.period,c._categories.length):c._categories.length;h.range=[0,p],h._tickFilter=function(e){return i.isPtWithinSector({r:i.radialAxis.range[1],rad:h.c2rad(e.x)})}}DM(h,c,e),h._transfn=function(e){var t=n(e),i=r(t),a=WM(l+i[0],u-i[1]),o=CC.select(this);return o&&o.node()&&o.classed("ticks")&&(a+=qM(-f8(t))),a},h._gridpath=function(e){var t=n(e),i=r(t);return"M0,0L"+-i[0]+","+i[1]};var m="outside"!==c.ticks?.7:.5;h._labelx=function(e){var t=n(e),r=h._labelStandoff,i=h._pad;return(0===XM(t)?0:Math.cos(t)*(r+i+m*e.fontSize))+YM(t)*(e.dx+r+i)},h._labely=function(e){var t=n(e),r=h._labelStandoff,i=h._labelShift,a=h._pad;return e.dy+e.fontSize*u8-i+-Math.sin(t)*(r+a+m*e.fontSize)},h._labelanchor=function(e,t){var r=n(t);return 0===XM(r)?YM(r)>0?"start":"end":"middle"};var g=NM(c);i.angularTickLayout!==g&&(o["angular-axis"].selectAll(".angulartick").remove(),i.angularTickLayout=g),PI.doTicks(a,h,!0),HM(o["angular-line"].select("path"),c.showline,{d:BM(s,d),transform:WM(l,u)}).attr("stroke-width",c.linewidth).call(jE.stroke,c.linecolor)},g8.updateFx=function(e,t){this.gd._context.staticPlot||(this.updateAngularDrag(e,t),this.updateRadialDrag(e,t),this.updateMainDrag(e,t))},g8.updateMainDrag=function(e,t){function n(e,t){var n=e-v,r=t-_;return Math.sqrt(n*n+r*r)}function r(e,t){return Math.atan2(_-t,e-v)}function i(e,t){return[e*Math.cos(t),e*Math.sin(-t)]}function a(e,t){var n=X6.cornerLen,r=X6.cornerHalfWidth;if(0===e)return BM(2*r,b);var a=n/e/2,o=t-a,s=t+a,l=Math.max(0,Math.min(e,m)),u=l-r,c=l+r;return"M"+i(u,o)+"A"+[u,u]+" 0,0,0 "+i(u,s)+"L"+i(c,s)+"A"+[c,c]+" 0,0,1 "+i(c,o)+"Z"}function o(){T=null,M=null,A=BM(m,b),C=!1;var e=c._fullLayout[u.id];S=zC(e.bgcolor).getLuminance(),E=cV.makeZoombox(f,S,g,y,A),E.attr("fill-rule","evenodd"),P=cV.makeCorners(f,g,y),cV.clearSelect(f)}function s(e,t){var i=w+e,o=k+t,s=n(w,k),l=Math.min(n(i,o),m),u=r(w,k),c=r(i,o);s<p?s=0:m-s<p?s=m:l<p?l=0:m-l<p&&(l=m);var d,f;Math.abs(l-s)>h?(s<l?(T=s,M=l):(T=l,M=s,c=[u,u=c][0]),d=A+BM(M,b)+BM(T,b),f=a(T,u)+a(M,c)):(T=null,M=null,d=A,f="M0,0Z"),E.attr("d",d),P.attr("d",f),cV.transitionZoombox(E,P,C,S),C=!0}function l(){if(cV.removeZoombox(c),null!==T&&null!==M){cV.showDoubleClickNotifier(c);var e=u.radialAxis,t=e.range,n=t[1]-t[0],r={};r[u.id+".radialaxis.range"]=[t[0]+T*n/m,t[0]+M*n/m],rS.call("relayout",c,r)}}var u=this,c=u.gd,d=u.layers,f=e._zoomlayer,h=X6.MINZOOM,p=X6.OFFEDGE,m=u.radius,g=u.cx,y=u.cy,v=u.cxx,_=u.cyy,b=t.sector,x=cV.makeDragger(d,"path","maindrag","crosshair");CC.select(x).attr("d",BM(m,b)).attr("transform",WM(g,y));var w,k,T,M,A,C,S,E,P,I={element:x,gd:c,subplot:u.id,plotinfo:{xaxis:u.xaxis,yaxis:u.yaxis},xaxes:[u.xaxis],yaxes:[u.yaxis]};I.prepFn=function(e,t,n){var r=c._fullLayout.dragmode,i=x.getBoundingClientRect();switch(w=t-i.left,k=n-i.top,r){case"zoom":I.moveFn=s,I.doneFn=l,o();break;case"select":case"lasso":zD(e,t,n,I,r)}},I.clickFn=function(e,t){if(cV.removeZoombox(c),2===e){var n={};for(var r in u.viewInitial)n[u.id+"."+r]=u.viewInitial[r];c.emit("plotly_doubleclick",null),rS.call("relayout",c,n)}kO.click(c,t,u.id)},x.onmousemove=function(e){kO.hover(c,e,u.id),c._fullLayout._lasthover=x,c._fullLayout._hoversubplot=u.id},x.onmouseout=function(e){c._dragging||$L.unhover(c,e)},$L.init(I)},g8.updateRadialDrag=function(e,t){function n(e,t){if(k)k(e,t);else{var n=[e,-t],r=[Math.cos(p),Math.sin(p)],o=Math.abs(uE.dot(n,r)/Math.sqrt(uE.dot(n,n)));isNaN(o)||(k=o<.5?i:a)}}function r(){null!==T?rS.call("relayout",s,o.id+".radialaxis.angle",T):null!==M&&rS.call("relayout",s,o.id+".radialaxis.range[1]",M)}function i(e,t){var n=x+e,r=w+t;T=f8(Math.atan2(d-r,n-c));var i=WM(c,d)+qM(-T);l["radial-axis"].attr("transform",i),l["radial-line"].select("line").attr("transform",i);var a=o.gd._fullLayout,s=a[o.id];o.updateRadialAxisTitle(a,s,T)}function a(e,t){var n=uE.dot([e,-t],[Math.cos(p),Math.sin(p)]),r=m[1]-g*n/u*.75;if(g>0===r>m[0]){M=f.range[1]=r,PI.doTicks(s,o.radialAxis,!0),l["radial-grid"].attr("transform",WM(c,d)).selectAll("path").attr("transform",null);var i=M-m[0],a=o.sectorBBox;o.xaxis.range=[a[0]*i,a[2]*i],o.yaxis.range=[a[1]*i,a[3]*i],o.xaxis.setScale(),o.yaxis.setScale();for(var h in o.traceHash){var y=o.traceHash[h],v=uE.filterVisible(y),_=y[0][0].trace._module,b=s._fullLayout[o.id];if(_.plot(s,o,v,b),!rS.traceIs(h,"gl"))for(var x=0;x<v.length;x++)_.style(s,v[x])}}}var o=this,s=o.gd,l=o.layers,u=o.radius,c=o.cx,d=o.cy,f=o.radialAxis,h=t.radialaxis,p=d8(h.angle),m=f.range.slice(),g=m[1]-m[0],y=X6.radialDragBoxSize,v=y/2;if(h.visible){var _=cV.makeRectDragger(l,"radialdrag","crosshair",-v,-v,y,y),b={element:_,gd:s},x=c+(u+v)*Math.cos(p),w=d-(u+v)*Math.sin(p);CC.select(_).attr("transform",WM(x,w));var k,T,M;b.prepFn=function(){k=null,T=null,M=null,b.moveFn=n,b.doneFn=r,cV.clearSelect(e._zoomlayer)},b.clampFn=function(e,t){return Math.sqrt(e*e+t*t)<X6.MINDRAG&&(e=0,t=0),[e,t]},$L.init(b)}},g8.updateAngularDrag=function(e,t){function n(e,t){return Math.atan2(f+p-t,e-d-p)}function r(e,t){var r=y+e,i=v+t,l=n(r,i),u=f8(l-w);b=_+u,s.frontplot.attr("transform",WM(a.xOffset2,a.yOffset2)+qM([-u,d,f])),a.clipPaths.circle.select("path").attr("transform",WM(d,f)+qM(u)),T.each(function(){var e=CC.select(this),t=PP.getTranslate(e);e.attr("transform",WM(t.x,t.y)+qM([u]))}),M.each(function(){var e=CC.select(this),t=e.select("text"),n=PP.getTranslate(e);e.attr("transform",qM([u,t.attr("x"),t.attr("y")])+WM(n.x,n.y))});var c=a.angularAxis;c.rotation=p8(b),"linear"!==c.type||VM(h)||(c.range=x.map(d8).map(c.unTransformRad).map(f8)),m8(c),PI.doTicks(o,c,!0),a._hasClipOnAxisFalse&&!VM(h)&&(a.sector=[x[0]-u,x[1]-u],k.call(PP.hideOutsideRangePoints,a));for(var p in a.traceHash)if(rS.traceIs(p,"gl")){var m=a.traceHash[p],g=uE.filterVisible(m),A=m[0][0].trace._module,C=o._fullLayout[a.id];A.plot(o,a,g,C)}}function i(){M.select("text").attr("transform",null);var e={};e[a.id+".angularaxis.rotation"]=b,rS.call("relayout",o,e)}var a=this,o=a.gd,s=a.layers,l=a.radius,u=a.cx,c=a.cy,d=a.cxx,f=a.cyy,h=t.sector,p=X6.angularDragBoxSize,m=cV.makeDragger(s,"path","angulardrag","move"),g={element:m,gd:o};CC.select(m).attr("d",UM(l,l+p,h)).attr("transform",WM(u,c)).call(iO,"move");var y,v,_,b,x,w,k=s.frontplot.select(".scatterlayer").selectAll(".trace"),T=k.selectAll(".point"),M=k.selectAll(".textpoint");g.prepFn=function(t,o,s){var l=e[a.id];x=l.sector.slice(),_=l.angularaxis.rotation;var u=m.getBoundingClientRect();y=o-u.left,v=s-u.top,w=n(y,v),g.moveFn=r,g.doneFn=i,cV.clearSelect(e._zoomlayer)},$L.init(g)},g8.isPtWithinSector=function(e){var t=this.sector,n=this.radialAxis,r=n.range,i=n.c2r(e.r),a=h8(t[0]),o=h8(t[1]);a>o&&(o+=360);var s,l,u=h8(f8(e.rad)),c=u+360;return r[1]>=r[0]?(s=r[0],l=r[1]):(s=r[1],l=r[0]),i>=s&&i<=l&&(VM(t)||u>=a&&u<=o||c>=a&&c<=o)},g8.fillViewInitialKey=function(e,t){e in this.viewInitial||(this.viewInitial[e]=t)};var v8=_L.getSubplotCalcData,_8=uE.counterRegex,b8=X6.attr,x8=X6.name,w8=_8(x8),k8={};k8[b8]={valType:"subplotid",dflt:x8,editType:"calc"};var T8={attr:b8,name:x8,idRoot:x8,idRegex:w8,attrRegex:w8,attributes:k8,layoutAttributes:n8,supplyLayoutDefaults:s8,plot:ZM,clean:JM,toSVG:xL.toSVG},M8=WC.extendFlat,A8=YP.line,C8={mode:YP.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:YP.text,hovertext:YP.hovertext,line:{color:A8.color,width:A8.width,dash:A8.dash,shape:M8({},A8.shape,{values:["linear","spline"]}),smoothing:A8.smoothing,editType:"calc"},connectgaps:YP.connectgaps,marker:YP.marker,cliponaxis:M8({},YP.cliponaxis,{dflt:!1}),textposition:YP.textposition,textfont:YP.textfont,fill:M8({},YP.fill,{values:["none","toself","tonext"]}),fillcolor:YP.fillcolor,hoverinfo:M8({},$C.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:YP.hoveron,selected:YP.selected,unselected:YP.unselected},S8=AC.BADNUM,E8=lH.calcMarkerSize,P8=function(e,t){for(var n=e._fullLayout,r=t.subplot,i=n[r].radialaxis,a=n[r].angularaxis,o=i.makeCalcdata(t,"r"),s=a.makeCalcdata(t,"theta"),l=t._length,u=new Array(l),c=0;c<l;c++){var d=o[c],f=s[c],h=u[c]={};SC(d)&&SC(f)?(h.r=d,h.theta=f,h.rad=function(e){return a.c2rad(e,t.thetaunit)}(f)):h.r=S8}var p=E8(t,l);return PI.expand(i,o,{ppad:p}),aH(t),gN(u,t),OL(u,t),u},I8=WP.PTS_LINESONLY,L8=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,C8,n,r)}var a=i("r"),o=i("theta"),s=a&&o?Math.min(a.length,o.length):0;if(!s)return void(t.visible=!1);t._length=s,i("thetaunit"),i("mode",s<I8?"lines+markers":"lines"),i("text"),i("hovertext"),EP.hasLines(t)&&(hH(e,t,n,r,i),pH(0,0,i),i("connectgaps")),EP.hasMarkers(t)&&mH(e,t,n,r,i,{gradient:!0}),EP.hasText(t)&&gH(0,0,r,i);var l=[];(EP.hasMarkers(t)||EP.hasText(t))&&(i("cliponaxis"),i("marker.maxdisplayed"),l.push("points")),i("fill"),"none"!==t.fill&&(dH(0,t,n,i),EP.hasLines(t)||pH(0,0,i)),"tonext"!==t.fill&&"toself"!==t.fill||l.push("fills"),i("hoveron",l.join("+")||"points"),uE.coerceSelectionMarkerOpacity(t,i)},O8={hoverPoints:KM,makeHoverPointText:QM},z8=AC.BADNUM,R8=function(e,t,n){var r,i,a,o={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.circle:null},s=t.radialAxis,l=s.range;for(a=l[0]>l[1]?function(e){return e<=0}:function(e){return e>=0},r=0;r<n.length;r++)for(i=0;i<n[r].length;i++){var u=n[r][i],c=u.r;if(c!==z8){var d=s.c2r(c)-l[0];if(a(d)){var f=u.rad;u.x=d*Math.cos(f),u.y=d*Math.sin(f);continue}u.intoCenter=[t.cxx,t.cyy]}u.x=z8,u.y=z8}AH(e,o,n)},D8={moduleType:"trace",name:"scatterpolar",basePlotModule:T8,categories:["polar","symbols","markerColorscale","showLegend","scatter-like"],attributes:C8,supplyDefaults:L8,calc:P8,plot:R8,style:SH.style,hoverPoints:O8.hoverPoints,selectPoints:CH,meta:{}},N8=D8,F8={mode:C8.mode,r:C8.r,theta:C8.theta,thetaunit:C8.thetaunit,text:C8.text,line:i6.line,connectgaps:i6.connectgaps,marker:i6.marker,fill:i6.fill,fillcolor:i6.fillcolor,hoverinfo:C8.hoverinfo,hoveron:C8.hoveron,selected:C8.selected,unselected:C8.unselected},j8=WP.PTS_LINESONLY,B8=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,F8,n,r)}var a=i("r"),o=i("theta"),s=a&&o?Math.min(a.length,o.length):0;if(!s)return void(t.visible=!1);t._length=s,i("thetaunit"),i("mode",s<j8?"lines+markers":"lines"),i("text"),EP.hasLines(t)&&(hH(e,t,n,r,i),i("connectgaps"));var l=[];EP.hasMarkers(t)&&(mH(e,t,n,r,i),l.push("points")),i("fill"),"none"!==t.fill&&dH(0,t,n,i),"tonext"!==t.fill&&"toself"!==t.fill||l.push("fills"),i("hoveron",l.join("+")||"points"),uE.coerceSelectionMarkerOpacity(t,i)},U8=O8.makeHoverPointText,V8={moduleType:"trace",name:"scatterpolargl",basePlotModule:T8,categories:["gl","regl","polar","symbols","markerColorscale","showLegend","scatter-like"],attributes:F8,supplyDefaults:B8,calc:$M,plot:eA,hoverPoints:tA,style:f6.style,selectPoints:f6.selectPoints,meta:{}},H8=V8,W8={subplot:{valType:"subplotid",dflt:"ternary",editType:"calc"}},q8=WC.extendFlat,G8={title:LE.title,titlefont:LE.titlefont,color:LE.color,tickmode:LE.tickmode,nticks:q8({},LE.nticks,{dflt:6,min:1}),tick0:LE.tick0,dtick:LE.dtick,tickvals:LE.tickvals,ticktext:LE.ticktext,ticks:LE.ticks,ticklen:LE.ticklen,tickwidth:LE.tickwidth,tickcolor:LE.tickcolor,showticklabels:LE.showticklabels,showtickprefix:LE.showtickprefix,tickprefix:LE.tickprefix,showticksuffix:LE.showticksuffix,ticksuffix:LE.ticksuffix,showexponent:LE.showexponent,exponentformat:LE.exponentformat,separatethousands:LE.separatethousands,tickfont:LE.tickfont,tickangle:LE.tickangle,tickformat:LE.tickformat,tickformatstops:LE.tickformatstops,hoverformat:LE.hoverformat,showline:q8({},LE.showline,{dflt:!0}),linecolor:LE.linecolor,linewidth:LE.linewidth,showgrid:q8({},LE.showgrid,{dflt:!0}),gridcolor:LE.gridcolor,gridwidth:LE.gridwidth,layer:LE.layer,min:{valType:"number",dflt:0,min:0}},Y8=function(e,t,n){function r(n,r){return uE.coerce(e,t,G8,n,r)}t.type="linear";var i=r("color"),a=i===e.color?i:n.font.color,o=t._name,s=o.charAt(0).toUpperCase(),l="Component "+s,u=r("title",l);t._hovertitle=u===l?u:s,uE.coerceFont(r,"titlefont",{family:n.font.family,size:Math.round(1.2*n.font.size),color:a}),r("min"),XE(e,t,r,"linear"),qE(e,t,r,"linear",{}),GE(e,t,r,{outerTicks:!0}),r("showticklabels")&&(uE.coerceFont(r,"tickfont",{family:n.font.family,size:n.font.size,color:a}),r("tickangle"),r("tickformat")),lL(e,t,r,{dfltColor:i,bgColor:n.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:G8}),r("hoverformat"),r("layer")},X8=qD.attributes,Z8=TE.overrideAll,J8=Z8({domain:X8({name:"ternary"}),bgcolor:{valType:"color",dflt:eS.background},sum:{valType:"number",dflt:1,min:0},aaxis:G8,baxis:G8,caxis:G8},"plot","from-root"),K8=["aaxis","baxis","caxis"],Q8=function(e,t,n){QD(e,t,0,{type:"ternary",attributes:J8,handleDefaults:nA,font:t.font,paper_bgcolor:t.paper_bgcolor})},$8=uE._,e7=WC.extendFlat,t7=rA,n7=rA.prototype;n7.init=function(e){this.container=e._ternarylayer,this.defs=e._defs,this.layoutId=e._uid,this.traceHash={},this.layers={}},n7.plot=function(e,t){var n=this,r=t[n.id],i=t._size;n._hasClipOnAxisFalse=!1;for(var a=0;a<e.length;a++){if(!1===e[a][0].trace.cliponaxis){n._hasClipOnAxisFalse=!0;break}}n.updateLayers(r),n.adjustLayout(r,i),lI.generalUpdatePerTraceModule(n.graphDiv,n,e,r),n.layers.plotbg.select("path").call(jE.fill,r.bgcolor)},n7.makeFramework=function(e){var t=this,n=e[t.id],r=t.clipId="clip"+t.layoutId+t.id;t.clipDef=e._clips.selectAll("#"+r).data([0]),t.clipDef.enter().append("clipPath").attr("id",r).append("path").attr("d","M0,0Z");var i=t.clipIdRelative="clip-relative"+t.layoutId+t.id;t.clipDefRelative=e._clips.selectAll("#"+i).data([0]),t.clipDefRelative.enter().append("clipPath").attr("id",i).append("path").attr("d","M0,0Z"),t.plotContainer=t.container.selectAll("g."+t.id).data([0]),t.plotContainer.enter().append("g").classed(t.id,!0),t.updateLayers(n),PP.setClipUrl(t.layers.backplot,r),PP.setClipUrl(t.layers.grids,r)},n7.updateLayers=function(e){var t=this,n=t.layers,r=["draglayer","plotbg","backplot","grids"];"below traces"===e.aaxis.layer&&r.push("aaxis","aline"),"below traces"===e.baxis.layer&&r.push("baxis","bline"),"below traces"===e.caxis.layer&&r.push("caxis","cline"),r.push("frontplot"),"above traces"===e.aaxis.layer&&r.push("aaxis","aline"),"above traces"===e.baxis.layer&&r.push("baxis","bline"),"above traces"===e.caxis.layer&&r.push("caxis","cline");var i=t.plotContainer.selectAll("g.toplevel").data(r,String),a=["agrid","bgrid","cgrid"];i.enter().append("g").attr("class",function(e){return"toplevel "+e}).each(function(e){var t=CC.select(this);n[e]=t,"frontplot"===e?t.append("g").classed("scatterlayer",!0):"backplot"===e?t.append("g").classed("maplayer",!0):"plotbg"===e?t.append("path").attr("d","M0,0Z"):"aline"===e||"bline"===e||"cline"===e?t.append("path"):"grids"===e&&a.forEach(function(e){n[e]=t.append("g").classed("grid "+e,!0);var r="bgrid"===e?"x":"y";n[e].append("g").classed(r,!0)})}),i.order()};var r7=Math.sqrt(4/3);n7.adjustLayout=function(e,t){var n,r,i,a,o,s,l=this,u=e.domain,c=(u.x[0]+u.x[1])/2,d=(u.y[0]+u.y[1])/2,f=u.x[1]-u.x[0],h=u.y[1]-u.y[0],p=f*t.w,m=h*t.h,g=e.sum,y=e.aaxis.min,v=e.baxis.min,_=e.caxis.min;p>r7*m?(a=m,i=a*r7):(i=p,a=i/r7),o=f*i/p,s=h*a/m,n=t.l+t.w*c-i/2,r=t.t+t.h*(1-d)-a/2,l.x0=n,l.y0=r,l.w=i,l.h=a,l.sum=g,l.xaxis={type:"linear",range:[y+2*_-g,g-y-2*v],domain:[c-o/2,c+o/2],_id:"x"},EI(l.xaxis,l.graphDiv._fullLayout),l.xaxis.setScale(),l.xaxis.isPtWithinRange=function(e){return e.a>=l.aaxis.range[0]&&e.a<=l.aaxis.range[1]&&e.b>=l.baxis.range[1]&&e.b<=l.baxis.range[0]&&e.c>=l.caxis.range[1]&&e.c<=l.caxis.range[0]},l.yaxis={type:"linear",range:[y,g-v-_],domain:[d-s/2,d+s/2],_id:"y"},EI(l.yaxis,l.graphDiv._fullLayout),l.yaxis.setScale(),l.yaxis.isPtWithinRange=function(){return!0};var b=l.yaxis.domain[0],x=l.aaxis=e7({},e.aaxis,{visible:!0,range:[y,g-v-_],side:"left",_counterangle:30,tickangle:(+e.aaxis.tickangle||0)-30,domain:[b,b+s*r7],_axislayer:l.layers.aaxis,_gridlayer:l.layers.agrid,_pos:0,_id:"y",_length:i,_gridpath:"M0,0l"+a+",-"+i/2,automargin:!1});EI(x,l.graphDiv._fullLayout),x.setScale();var w=l.baxis=e7({},e.baxis,{visible:!0,range:[g-y-_,v],side:"bottom",_counterangle:30,domain:l.xaxis.domain,_axislayer:l.layers.baxis,_gridlayer:l.layers.bgrid,_counteraxis:l.aaxis,_pos:0,_id:"x",_length:i,_gridpath:"M0,0l-"+i/2+",-"+a,automargin:!1});EI(w,l.graphDiv._fullLayout),w.setScale(),x._counteraxis=w;var k=l.caxis=e7({},e.caxis,{visible:!0,range:[g-y-v,_],side:"right",_counterangle:30,tickangle:(+e.caxis.tickangle||0)+30,domain:[b,b+s*r7],_axislayer:l.layers.caxis,_gridlayer:l.layers.cgrid,_counteraxis:l.baxis,_pos:0,_id:"y",_length:i,_gridpath:"M0,0l-"+a+","+i/2,automargin:!1});EI(k,l.graphDiv._fullLayout),k.setScale();var T="M"+n+","+(r+a)+"h"+i+"l-"+i/2+",-"+a+"Z";l.clipDef.select("path").attr("d",T),l.layers.plotbg.select("path").attr("d",T);var M="M0,"+a+"h"+i+"l-"+i/2+",-"+a+"Z";l.clipDefRelative.select("path").attr("d",M);var A="translate("+n+","+r+")";l.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",A),l.clipDefRelative.select("path").attr("transform",null);var C="translate("+(n-w._offset)+","+(r+a)+")";l.layers.baxis.attr("transform",C),l.layers.bgrid.attr("transform",C);var S="translate("+(n+i/2)+","+r+")rotate(30)translate(0,"+-x._offset+")";l.layers.aaxis.attr("transform",S),l.layers.agrid.attr("transform",S);var E="translate("+(n+i/2)+","+r+")rotate(-30)translate(0,"+-k._offset+")";l.layers.caxis.attr("transform",E),l.layers.cgrid.attr("transform",E),l.drawAxes(!0),l.plotContainer.selectAll(".crisp").classed("crisp",!1),l.layers.aline.select("path").attr("d",x.showline?"M"+n+","+(r+a)+"l"+i/2+",-"+a:"M0,0").call(jE.stroke,x.linecolor||"#000").style("stroke-width",(x.linewidth||0)+"px"),l.layers.bline.select("path").attr("d",w.showline?"M"+n+","+(r+a)+"h"+i:"M0,0").call(jE.stroke,w.linecolor||"#000").style("stroke-width",(w.linewidth||0)+"px"),l.layers.cline.select("path").attr("d",k.showline?"M"+(n+i/2)+","+r+"l"+i/2+","+a:"M0,0").call(jE.stroke,k.linecolor||"#000").style("stroke-width",(k.linewidth||0)+"px"),l.graphDiv._context.staticPlot||l.initInteractions(),PP.setClipUrl(l.layers.frontplot,l._hasClipOnAxisFalse?null:l.clipId)},n7.drawAxes=function(e){var t=this,n=t.graphDiv,r=t.id.substr(7)+"title",i=t.aaxis,a=t.baxis,o=t.caxis;if(PI.doTicks(n,i,!0),PI.doTicks(n,a,!0),PI.doTicks(n,o,!0),e){var s=Math.max(i.showticklabels?i.tickfont.size/2:0,(o.showticklabels?.75*o.tickfont.size:0)+("outside"===o.ticks?.87*o.ticklen:0));t.layers["a-title"]=yI.draw(n,"a"+r,{propContainer:i,propName:t.id+".aaxis.title",placeholder:$8(n,"Click to enter Component A title"),attributes:{x:t.x0+t.w/2,y:t.y0-i.titlefont.size/3-s,"text-anchor":"middle"}});var l=(a.showticklabels?a.tickfont.size:0)+("outside"===a.ticks?a.ticklen:0)+3;t.layers["b-title"]=yI.draw(n,"b"+r,{propContainer:a,propName:t.id+".baxis.title",placeholder:$8(n,"Click to enter Component B title"),attributes:{x:t.x0-l,y:t.y0+t.h+.83*a.titlefont.size+l,"text-anchor":"middle"}}),t.layers["c-title"]=yI.draw(n,"c"+r,{propContainer:o,propName:t.id+".caxis.title",placeholder:$8(n,"Click to enter Component C title"),attributes:{x:t.x0+t.w+l,y:t.y0+t.h+.83*o.titlefont.size+l,"text-anchor":"middle"}})}};var i7=EE.MINZOOM/2+.87,a7="m-0.87,.5h"+i7+"v3h-"+(i7+5.2)+"l"+(i7/2+2.6)+",-"+(.87*i7+4.5)+"l2.6,1.5l-"+i7/2+","+.87*i7+"Z",o7="m0.87,.5h-"+i7+"v3h"+(i7+5.2)+"l-"+(i7/2+2.6)+",-"+(.87*i7+4.5)+"l-2.6,1.5l"+i7/2+","+.87*i7+"Z",s7="m0,1l"+i7/2+","+.87*i7+"l2.6,-1.5l-"+(i7/2+2.6)+",-"+(.87*i7+4.5)+"l-"+(i7/2+2.6)+","+(.87*i7+4.5)+"l2.6,1.5l"+i7/2+",-"+.87*i7+"Z",l7=!0;n7.initInteractions=function(){function e(e,t,n){var r=x.getBoundingClientRect();c=t-r.left,d=n-r.top,f={a:b.aaxis.range[0],b:b.baxis.range[1],c:b.caxis.range[1]},p=f,h=b.aaxis.range[1]-f.a,m=zC(b.graphDiv._fullLayout[b.id].bgcolor).getLuminance(),g="M0,"+b.h+"L"+b.w/2+", 0L"+b.w+","+b.h+"Z",y=!1,v=k.append("path").attr("class","zoombox").attr("transform","translate("+b.x0+", "+b.y0+")").style({fill:m>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",g),_=k.append("path").attr("class","zoombox-corners").attr("transform","translate("+b.x0+", "+b.y0+")").style({fill:jE.background,stroke:jE.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),u()}function t(e,t){return 1-t/b.h}function n(e,t){return 1-(e+(b.h-t)/Math.sqrt(3))/b.w}function r(e,t){return(e-(b.h-t)/Math.sqrt(3))/b.w}function i(e,i){var a=c+e,o=d+i,s=Math.max(0,Math.min(1,t(c,d),t(a,o))),l=Math.max(0,Math.min(1,n(c,d),n(a,o))),u=Math.max(0,Math.min(1,r(c,d),r(a,o))),x=(s/2+u)*b.w,w=(1-s/2-l)*b.w,k=(x+w)/2,T=w-x,M=(1-s)*b.h,A=M-T/r7;T<EE.MINZOOM?(p=f,v.attr("d",g),_.attr("d","M0,0Z")):(p={a:f.a+s*h,b:f.b+l*h,c:f.c+u*h},v.attr("d",g+"M"+x+","+M+"H"+w+"L"+k+","+A+"L"+x+","+M+"Z"),_.attr("d","M"+c+","+d+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+x+","+M+a7+"M"+w+","+M+o7+"M"+k+","+A+s7)),y||(v.transition().style("fill",m>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),_.transition().style("opacity",1).duration(200),y=!0)}function a(){if(iA(w),p!==f){var e={};e[b.id+".aaxis.min"]=p.a,e[b.id+".baxis.min"]=p.b,e[b.id+".caxis.min"]=p.c,rS.call("relayout",w,e),l7&&w.data&&w._context.showTips&&(uE.notifier($8(w,"Double-click to zoom back out"),"long"),l7=!1)}}function o(){f={a:b.aaxis.range[0],b:b.baxis.range[1],c:b.caxis.range[1]},p=f}function s(e,t){var n=e/b.xaxis._m,r=t/b.yaxis._m;p={a:f.a-r,b:f.b+(n+r)/2,c:f.c-(n-r)/2};var i=[p.a,p.b,p.c].sort(),a={a:i.indexOf(p.a),b:i.indexOf(p.b),c:i.indexOf(p.c)};i[0]<0&&(i[1]+i[0]/2<0?(i[2]+=i[0]+i[1],i[0]=i[1]=0):(i[2]+=i[0]/2,i[1]+=i[0]/2,i[0]=0),p={a:i[a.a],b:i[a.b],c:i[a.c]},t=(f.a-p.a)*b.yaxis._m,e=(f.c-p.c-f.b+p.b)*b.xaxis._m);var o="translate("+(b.x0+e)+","+(b.y0+t)+")";b.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",o);var s="translate("+-e+","+-t+")";b.clipDefRelative.select("path").attr("transform",s),b.aaxis.range=[p.a,b.sum-p.b-p.c],b.baxis.range=[b.sum-p.a-p.c,p.b],b.caxis.range=[b.sum-p.a-p.b,p.c],b.drawAxes(!1),b.plotContainer.selectAll(".crisp").classed("crisp",!1),b._hasClipOnAxisFalse&&b.plotContainer.select(".scatterlayer").selectAll(".trace").call(PP.hideOutsideRangePoints,b)}function l(){var e={};e[b.id+".aaxis.min"]=p.a,e[b.id+".baxis.min"]=p.b,e[b.id+".caxis.min"]=p.c,rS.call("relayout",w,e)}function u(){k.selectAll(".select-outline").remove()}var c,d,f,h,p,m,g,y,v,_,b=this,x=b.layers.plotbg.select("path").node(),w=b.graphDiv,k=w._fullLayout._zoomlayer,T={element:x,gd:w,plotinfo:{xaxis:b.xaxis,yaxis:b.yaxis},subplot:b.id,prepFn:function(t,n,r){T.xaxes=[b.xaxis],T.yaxes=[b.yaxis];var c=w._fullLayout.dragmode;t.shiftKey&&(c="pan"===c?"zoom":"pan"),T.minDrag="lasso"===c?1:void 0,"zoom"===c?(T.moveFn=i,T.doneFn=a,e(t,n,r)):"pan"===c?(T.moveFn=s,T.doneFn=l,o(),u()):"select"!==c&&"lasso"!==c||zD(t,n,r,T,c)},clickFn:function(e,t){if(iA(w),2===e){var n={};n[b.id+".aaxis.min"]=0,n[b.id+".baxis.min"]=0,n[b.id+".caxis.min"]=0,w.emit("plotly_doubleclick",null),rS.call("relayout",w,n)}kO.click(w,t,b.id)}};x.onmousemove=function(e){kO.hover(w,e,b.id),w._fullLayout._lasthover=x,w._fullLayout._hoversubplot=b.id},x.onmouseout=function(e){w._dragging||$L.unhover(w,e)},$L.init(T)};var u7={},c7=_L.getSubplotCalcData,d7=uE.counterRegex;u7.name="ternary",u7.attr="subplot",u7.idRoot="ternary",u7.idRegex=u7.attrRegex=d7("ternary"),u7.attributes=W8,u7.layoutAttributes=J8,u7.supplyLayoutDefaults=Q8,u7.plot=function(e){for(var t=e._fullLayout,n=e.calcdata,r=t._subplots.ternary,i=0;i<r.length;i++){var a=r[i],o=c7(n,"ternary",a),s=t[a]._subplot;s||(s=new t7({id:a,graphDiv:e,container:t._ternarylayer.node()},t),t[a]._subplot=s),s.plot(o,t,e._promises)}},u7.clean=function(e,t,n,r){for(var i=r._subplots.ternary||[],a=0;a<i.length;a++){var o=i[a],s=r[o]._subplot;!t[o]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}};var f7=CE.dash,h7=WC.extendFlat,p7=YP.marker,m7=YP.line,g7=p7.line,y7={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:h7({},YP.mode,{dflt:"markers"}),text:h7({},YP.text,{}),hovertext:h7({},YP.hovertext,{}),line:{color:m7.color,width:m7.width,dash:f7,shape:h7({},m7.shape,{values:["linear","spline"]}),smoothing:m7.smoothing,editType:"calc"},connectgaps:YP.connectgaps,cliponaxis:YP.cliponaxis,fill:h7({},YP.fill,{values:["none","toself","tonext"]}),fillcolor:YP.fillcolor,marker:h7({symbol:p7.symbol,opacity:p7.opacity,maxdisplayed:p7.maxdisplayed,size:p7.size,sizeref:p7.sizeref,sizemin:p7.sizemin,sizemode:p7.sizemode,line:h7({width:g7.width,editType:"calc"},FE()),gradient:p7.gradient,editType:"calc"},FE(),{showscale:p7.showscale,colorbar:RE}),textfont:YP.textfont,textposition:YP.textposition,selected:YP.selected,unselected:YP.unselected,hoverinfo:h7({},$C.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:YP.hoveron},v7=lH.calcMarkerSize,_7=["a","b","c"],b7={a:["b","c"],b:["a","c"],c:["a","b"]},x7=function(e,t){var n,r,i,a,o,s,l=e._fullLayout[t.subplot],u=l.sum,c=t.sum||u,d={a:t.a,b:t.b,c:t.c};for(n=0;n<_7.length;n++)if(i=_7[n],!d[i]){for(o=d[b7[i][0]],s=d[b7[i][1]],a=new Array(o.length),r=0;r<o.length;r++)a[r]=c-o[r]-s[r];d[i]=a}var f,h,p,m,g,y,v=t._length,_=new Array(v);for(n=0;n<v;n++)f=d.a[n],h=d.b[n],p=d.c[n],SC(f)&&SC(h)&&SC(p)?(f=+f,h=+h,p=+p,m=u/(f+h+p),1!==m&&(f*=m,h*=m,p*=m),y=f,g=p-h,_[n]={x:g,y:y,a:f,b:h,c:p}):_[n]={x:!1,y:!1};return v7(t,v),aH(t),gN(_,t),OL(_,t),_},w7=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,y7,n,r)}var a,o=i("a"),s=i("b"),l=i("c");if(o?(a=o.length,s?(a=Math.min(a,s.length),l&&(a=Math.min(a,l.length))):a=l?Math.min(a,l.length):0):s&&l&&(a=Math.min(s.length,l.length)),!a)return void(t.visible=!1);t._length=a,i("sum"),i("text"),i("hovertext"),i("mode",a<WP.PTS_LINESONLY?"lines+markers":"lines"),EP.hasLines(t)&&(hH(e,t,n,r,i),pH(0,0,i),i("connectgaps")),EP.hasMarkers(t)&&mH(e,t,n,r,i,{gradient:!0}),EP.hasText(t)&&gH(0,0,r,i);var u=[];(EP.hasMarkers(t)||EP.hasText(t))&&(i("cliponaxis"),i("marker.maxdisplayed"),u.push("points")),i("fill"),"none"!==t.fill&&(dH(0,t,n,i),EP.hasLines(t)||pH(0,0,i)),"tonext"!==t.fill&&"toself"!==t.fill||u.push("fills"),i("hoveron",u.join("+")||"points"),uE.coerceSelectionMarkerOpacity(t,i)},k7=function(e,t,n,r,i){if(t.xa&&(e.xaxis=t.xa),t.ya&&(e.yaxis=t.ya),r[i]){var a=r[i];e.a=a.a,e.b=a.b,e.c=a.c}else e.a=t.a,e.b=t.b,e.c=t.c;return e},T7=function(e,t,n,r){function i(e,t){g.push(e._hovertitle+": "+PI.tickText(e,t,"hover").text)}var a=_H(e,t,n,r);if(a&&!1!==a[0].index){var o=a[0];if(void 0===o.index){var s=1-o.y0/e.ya._length,l=e.xa._length,u=l*s/2,c=l-u;return o.x0=Math.max(Math.min(o.x0,c),u),o.x1=Math.max(Math.min(o.x1,c),u),a}var d=o.cd[o.index];o.a=d.a,o.b=d.b,o.c=d.c,o.xLabelVal=void 0,o.yLabelVal=void 0;var f=o.trace,h=o.subplot,p=d.hi||f.hoverinfo,m=p.split("+"),g=[];return-1!==m.indexOf("all")&&(m=["a","b","c"]),-1!==m.indexOf("a")&&i(h.aaxis,d.a),-1!==m.indexOf("b")&&i(h.baxis,d.b),-1!==m.indexOf("c")&&i(h.caxis,d.c),o.extraText=g.join("<br>"),a}},M7=function(e,t,n){var r=t.plotContainer;r.select(".scatterlayer").selectAll("*").remove();var i={xaxis:t.xaxis,yaxis:t.yaxis,plot:r,layerClipId:t._hasClipOnAxisFalse?t.clipIdRelative:null};AH(e,i,n)},A7={};A7.attributes=y7,A7.supplyDefaults=w7,A7.colorbar=YO,A7.calc=x7,A7.plot=M7,A7.style=SH.style,A7.hoverPoints=T7,A7.selectPoints=CH,A7.eventData=k7,A7.moduleType="trace",A7.name="scatterternary",A7.basePlotModule=u7,A7.categories=["ternary","symbols","markerColorscale","showLegend","scatter-like"],A7.meta={};var C7=A7,S7=C7,E7={},P7=KI.pointsAccessorFunction;E7.moduleType="transform",E7.name="sort",E7.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},E7.supplyDefaults=function(e){function t(t,r){return uE.coerce(e,n,E7.attributes,t,r)}var n={};return t("enabled")&&(t("target"),t("order")),n},E7.calcTransform=function(e,t,n){if(n.enabled){var r=uE.getTargetArray(t,n);if(r){var i,a,o=n.target,s=r.length,l=t._arrayAttrs,u=PI.getDataToCoordFunc(e,t,o,r),c=aA(n,r,u),d=P7(t.transforms,n),f={};for(i=0;i<l.length;i++){var h=uE.nestedProperty(t,l[i]),p=h.get(),m=new Array(s);for(a=0;a<s;a++)m[a]=p[c[a]];h.set(m)}for(a=0;a<s;a++)f[a]=d(c[a]);n._indexToPoints=f}}};var I7=E7,L7=function(e,t){t.surfacecolor?WE(t,t.surfacecolor,"","c"):WE(t,t.z,"","c")},O7=function(e,t){var n=t[0].trace,r="cb"+n.uid,i=n.cmin,a=n.cmax,o=n.surfacecolor||n.z;if(SC(i)||(i=uE.aggNums(Math.min,null,o)),SC(a)||(a=uE.aggNums(Math.max,null,o)),e._fullLayout._infolayer.selectAll("."+r).remove(),!n.showscale)return void lI.autoMargin(e,r);var s=t[0].t.cb=GO(e,r),l=nP.makeColorScaleFunc(nP.extractScale(n.colorscale,i,a),{noNumericCheck:!0});s.fillcolor(l).filllevels({start:i,end:a,size:(a-i)/254}).options(n.colorbar)()},z7={},R7=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  worldCoordinate = vec3(uv.zw, f.x);\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),D7=OW(["precision mediump float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor = step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) + step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),N7=OW(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  vec4 worldPosition = model * vec4(dataCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z = clipPosition.z + zOffset;\n\n  gl_Position = clipPosition;\n  value = f;\n  kill = -1.0;\n  worldCoordinate = dataCoordinate;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),F7=OW(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if(kill > 0.0 ||\n    any(lessThan(worldCoordinate, clipBounds[0])) || any(greaterThan(worldCoordinate, clipBounds[1]))) {\n    discard;\n  }\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);z7.createShader=function(e){var t=Oq(e,R7,D7,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},z7.createPickShader=function(e){var t=Oq(e,R7,F7,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t.attributes.normal.location=2,t},z7.createContourShader=function(e){var t=Oq(e,N7,D7,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t},z7.createPickContourShader=function(e){var t=Oq(e,N7,F7,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return t.attributes.uv.location=0,t.attributes.f.location=1,t};var j7=uA,B7={},U7={},V7={body:"",args:[],thisVars:[],localVars:[]},H7=eW({args:["array","array","array"],pre:V7,post:V7,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1},{name:"left",lvalue:!1,rvalue:!0,count:1},{name:"right",lvalue:!1,rvalue:!0,count:1}],body:"out=0.5*(left-right)",thisVars:[],localVars:[]},funcName:"cdiff"}),W7=eW({args:["array"],pre:V7,post:V7,body:{args:[{name:"out",lvalue:!0,rvalue:!1,count:1}],body:"out=0",thisVars:[],localVars:[]},funcName:"zero"}),q7=eW({args:["array","scalar","index"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{\nvar _inline_1_v=_inline_1_arg1_,_inline_1_i\nfor(_inline_1_i=0;_inline_1_i<_inline_1_arg2_.length-1;++_inline_1_i) {\n_inline_1_v=_inline_1_v[_inline_1_arg2_[_inline_1_i]]\n}\n_inline_1_arg0_=_inline_1_v[_inline_1_arg2_[_inline_1_arg2_.length-1]]\n}",args:[{name:"_inline_1_arg0_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:4}],thisVars:[],localVars:["_inline_1_i","_inline_1_v"]},post:{body:"{}",args:[],thisVars:[],localVars:[]},funcName:"convert",blockSize:64}),G7=function(e,t){for(var n=[],r=e,i=1;Array.isArray(r);)n.push(r.length),i*=r.length,r=r[0];return 0===n.length?hW():(t||(t=hW(new Float64Array(i),n)),q7(t,e),t)},Y7=_A,X7=z7.createShader,Z7=z7.createContourShader,J7=z7.createPickShader,K7=z7.createPickContourShader,Q7=40,$7=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e9=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],t9=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];!function(){for(var e=0;e<3;++e){var t=t9[e],n=(e+1)%3,r=(e+2)%3;t[n+0]=1,t[r+3]=1,t[e+6]=1}}();var n9=256,r9=fA.prototype;r9.isTransparent=function(){return this.opacity<1},r9.isOpaque=function(){if(this.opacity>=1)return!0;for(var e=0;e<3;++e)if(this._contourCounts[e].length>0||this._dynamicCounts[e]>0)return!0;return!1},r9.pickSlots=1,r9.setPickBase=function(e){this.pickId=e};var i9=[0,0,0],a9={showSurface:!1,showContour:!1,projections:[$7.slice(),$7.slice(),$7.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]},o9={model:$7,view:$7,projection:$7,inverseModel:$7.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},s9=$7.slice(),l9=[1,0,0,0,1,0,0,0,1];r9.draw=function(e){return pA.call(this,e,!1)},r9.drawTransparent=function(e){return pA.call(this,e,!0)};var u9={model:$7,view:$7,projection:$7,inverseModel:$7,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};r9.drawPick=function(e){e=e||{};var t=this.gl;t.disable(t.CULL_FACE);var n=u9;n.model=e.model||$7,n.view=e.view||$7,n.projection=e.projection||$7,n.shape=this._field[2].shape,n.pickId=this.pickId/255,n.lowerBound=this.bounds[0],n.upperBound=this.bounds[1],n.permutation=l9;for(var r=0;r<2;++r)for(var i=n.clipBounds[r],a=0;a<3;++a)i[a]=Math.min(Math.max(this.clipBounds[r][a],-1e8),1e8);var o=hA(n,this);if(o.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=n,this._vao.bind(),this._vao.draw(t.TRIANGLES,this._vertexCount),r=0;r<3;++r)this.surfaceProject[r]&&(this._pickShader.uniforms.model=o.projections[r],this._pickShader.uniforms.clipBounds=o.clipBounds[r],this._vao.draw(t.TRIANGLES,this._vertexCount));this._vao.unbind()}if(o.showContour){var s=this._contourPickShader;s.bind(),s.uniforms=n;var l=this._contourVAO;for(l.bind(),a=0;a<3;++a)for(t.lineWidth(this.contourWidth[a]),s.uniforms.permutation=t9[a],r=0;r<this.contourLevels[a].length;++r)this._contourCounts[a][r]&&(s.uniforms.height=this.contourLevels[a][r],l.draw(t.LINES,this._contourCounts[a][r],this._contourOffsets[a][r]));for(r=0;r<3;++r)for(s.uniforms.model=o.projections[r],s.uniforms.clipBounds=o.clipBounds[r],a=0;a<3;++a)if(this.contourProject[r][a]){s.uniforms.permutation=t9[a],t.lineWidth(this.contourWidth[a]);for(var u=0;u<this.contourLevels[a].length;++u)this._contourCounts[a][u]&&(s.uniforms.height=this.contourLevels[a][u],l.draw(t.LINES,this._contourCounts[a][u],this._contourOffsets[a][u]))}l.unbind()}},r9.pick=function(e){if(!e)return null;if(e.id!==this.pickId)return null;var t=this._field[2].shape,n=this._pickResult,r=t[0]*(e.value[0]+(e.value[2]>>4)/16)/255,i=Math.floor(r),a=r-i,o=t[1]*(e.value[1]+(15&e.value[2])/16)/255,s=Math.floor(o),l=o-s;i+=1,s+=1;var u=n.position;u[0]=u[1]=u[2]=0;for(var c=0;c<2;++c)for(var d=c?a:1-a,f=0;f<2;++f)for(var h=f?l:1-l,p=i+c,m=s+f,g=d*h,y=0;y<3;++y)u[y]+=this._field[y].get(p,m)*g;for(var v=this._pickResult.level,_=0;_<3;++_)if(v[_]=KY.le(this.contourLevels[_],u[_]),v[_]<0)this.contourLevels[_].length>0&&(v[_]=0);else if(v[_]<this.contourLevels[_].length-1){var b=this.contourLevels[_][v[_]],x=this.contourLevels[_][v[_]+1];Math.abs(b-u[_])>Math.abs(x-u[_])&&(v[_]+=1)}for(n.index[0]=a<.5?i:i+1,n.index[1]=l<.5?s:s+1,n.uv[0]=r/t[0],n.uv[1]=o/t[1],y=0;y<3;++y)n.dataCoordinate[y]=this._field[y].get(n.index[0],n.index[1]);return n},r9.update=function(e){e=e||{},this.dirty=!0,"contourWidth"in e&&(this.contourWidth=gA(e.contourWidth,Number)),"showContour"in e&&(this.showContour=gA(e.showContour,Boolean)),"showSurface"in e&&(this.showSurface=!!e.showSurface),"contourTint"in e&&(this.contourTint=gA(e.contourTint,Boolean)),"contourColor"in e&&(this.contourColor=vA(e.contourColor)),"contourProject"in e&&(this.contourProject=gA(e.contourProject,function(e){return gA(e,Boolean)})),"surfaceProject"in e&&(this.surfaceProject=e.surfaceProject),"dynamicColor"in e&&(this.dynamicColor=vA(e.dynamicColor)),"dynamicTint"in e&&(this.dynamicTint=gA(e.dynamicTint,Number)),"dynamicWidth"in e&&(this.dynamicWidth=gA(e.dynamicWidth,Number)),"opacity"in e&&(this.opacity=e.opacity),"colorBounds"in e&&(this.colorBounds=e.colorBounds),"vertexColor"in e&&(this.vertexColor=e.vertexColor?1:0);var t=e.field||e.coords&&e.coords[2]||null,n=!1;if(t||(t=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in e||"coords"in e){var r=(t.shape[0]+2)*(t.shape[1]+2);r>this._field[2].data.length&&(EW.freeFloat(this._field[2].data),this._field[2].data=EW.mallocFloat(pW.nextPow2(r))),this._field[2]=hW(this._field[2].data,[t.shape[0]+2,t.shape[1]+2]),mA(this._field[2],t),this.shape=t.shape.slice();for(var i=this.shape,a=0;a<2;++a)this._field[2].size>this._field[a].data.length&&(EW.freeFloat(this._field[a].data),this._field[a].data=EW.mallocFloat(this._field[2].size)),this._field[a]=hW(this._field[a].data,[i[0]+2,i[1]+2]);if(e.coords){var o=e.coords;if(!Array.isArray(o)||3!==o.length)throw new Error("gl-surface: invalid coordinates for x/y");for(a=0;a<2;++a){var s=o[a];for(f=0;f<2;++f)if(s.shape[f]!==i[f])throw new Error("gl-surface: coords have incorrect shape");mA(this._field[a],s)}}else if(e.ticks){var l=e.ticks;if(!Array.isArray(l)||2!==l.length)throw new Error("gl-surface: invalid ticks");for(a=0;a<2;++a){var u=l[a];if((Array.isArray(u)||u.length)&&(u=hW(u)),u.shape[0]!==i[a])throw new Error("gl-surface: invalid tick length");var c=hW(u.data,i);c.stride[a]=u.stride[0],c.stride[1^a]=0,mA(this._field[a],c)}}else{for(a=0;a<2;++a){var d=[0,0];d[a]=1,this._field[a]=hW(this._field[a].data,[i[0]+2,i[1]+2],d,0)}this._field[0].set(0,0,0);for(var f=0;f<i[0];++f)this._field[0].set(f+1,0,f);for(this._field[0].set(i[0]+1,0,i[0]-1),this._field[1].set(0,0,0),f=0;f<i[1];++f)this._field[1].set(0,f+1,f);this._field[1].set(0,i[1]+1,i[1]-1)}var h=this._field,p=hW(EW.mallocFloat(3*h[2].size*2),[3,i[0]+2,i[1]+2,2]);for(a=0;a<3;++a)j7(p.pick(a),h[a],"mirror");var m=hW(EW.mallocFloat(3*h[2].size),[i[0]+2,i[1]+2,3]);for(a=0;a<i[0]+2;++a)for(f=0;f<i[1]+2;++f){var g=p.get(0,a,f,0),y=p.get(0,a,f,1),v=p.get(1,a,f,0),_=p.get(1,a,f,1),b=p.get(2,a,f,0),x=p.get(2,a,f,1),w=v*x-_*b,k=b*y-x*g,T=g*_-y*v,M=Math.sqrt(w*w+k*k+T*T);M<1e-8?(M=Math.max(Math.abs(w),Math.abs(k),Math.abs(T)),M<1e-8?(T=1,k=w=0,M=1):M=1/M):M=1/Math.sqrt(M),m.set(a,f,0,w*M),m.set(a,f,1,k*M),m.set(a,f,2,T*M)}EW.free(p.data);var A=[1/0,1/0,1/0],C=[-1/0,-1/0,-1/0],S=1/0,E=-1/0,P=(i[0]-1)*(i[1]-1)*6,I=EW.mallocFloat(pW.nextPow2(10*P)),L=0,O=0;for(a=0;a<i[0]-1;++a)e:for(f=0;f<i[1]-1;++f){for(var z=0;z<2;++z)for(var R=0;R<2;++R)for(var D=0;D<3;++D){var N=this._field[D].get(1+a+z,1+f+R);if(isNaN(N)||!isFinite(N))continue e}for(D=0;D<6;++D){var F=a+e9[D][0],j=f+e9[D][1],B=this._field[0].get(F+1,j+1),U=this._field[1].get(F+1,j+1);N=this._field[2].get(F+1,j+1);var V=N;w=m.get(F+1,j+1,0),k=m.get(F+1,j+1,1),T=m.get(F+1,j+1,2),e.intensity&&(V=e.intensity.get(F,j)),I[L++]=F,I[L++]=j,I[L++]=B,I[L++]=U,I[L++]=N,I[L++]=0,I[L++]=V,I[L++]=w,I[L++]=k,I[L++]=T,A[0]=Math.min(A[0],B),A[1]=Math.min(A[1],U),A[2]=Math.min(A[2],N),S=Math.min(S,V),C[0]=Math.max(C[0],B),C[1]=Math.max(C[1],U),C[2]=Math.max(C[2],N),E=Math.max(E,V),O+=1}}for(e.intensityBounds&&(S=+e.intensityBounds[0],E=+e.intensityBounds[1]),a=6;a<L;a+=10)I[a]=(I[a]-S)/(E-S);this._vertexCount=O,this._coordinateBuffer.update(I.subarray(0,L)),EW.freeFloat(I),EW.free(m.data),this.bounds=[A,C],this.intensity=e.intensity||this._field[2],this.intensityBounds[0]===S&&this.intensityBounds[1]===E||(n=!0),this.intensityBounds=[S,E]}if("levels"in e){var H=e.levels;for(H=Array.isArray(H[0])?H.slice():[[],[],H],a=0;a<3;++a)H[a]=H[a].slice(),H.sort(function(e,t){return e-t});e:for(a=0;a<3;++a){if(H[a].length!==this.contourLevels[a].length){n=!0;break}for(f=0;f<H[a].length;++f)if(H[a][f]!==this.contourLevels[a][f]){n=!0;break e}}this.contourLevels=H}if(n){h=this._field,i=this.shape;for(var W=[],q=0;q<3;++q){H=this.contourLevels[q];var G=[],Y=[],X=[0,0,0];for(a=0;a<H.length;++a){var Z=NX(this._field[q],H[a]);G.push(W.length/5|0),O=0;e:for(f=0;f<Z.cells.length;++f){var J=Z.cells[f];for(D=0;D<2;++D){var K=Z.positions[J[D]],Q=K[0],$=0|Math.floor(Q),ee=Q-$,te=K[1],ne=0|Math.floor(te),re=te-ne,ie=!1;t:for(var ae=0;ae<3;++ae){X[ae]=0;var oe=(q+ae+1)%3;for(z=0;z<2;++z){var se=z?ee:1-ee;for(F=0|Math.min(Math.max($+z,0),i[0]),R=0;R<2;++R){var le=R?re:1-re;if(j=0|Math.min(Math.max(ne+R,0),i[1]),N=ae<2?this._field[oe].get(F,j):(this.intensity.get(F,j)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(N)||isNaN(N)){ie=!0;break t}var ue=se*le;X[ae]+=ue*N}}}if(ie){if(D>0){for(var ce=0;ce<5;++ce)W.pop();O-=1}continue e}W.push(X[0],X[1],K[0],K[1],X[2]),O+=1}}Y.push(O)}this._contourOffsets[q]=G,this._contourCounts[q]=Y}var de=EW.mallocFloat(W.length);for(a=0;a<W.length;++a)de[a]=W[a];this._contourBuffer.update(de),EW.freeFloat(de)}e.colormap&&this._colorMap.setPixels(dA(e.colormap))},r9.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var e=0;e<3;++e)EW.freeFloat(this._field[e].data)},r9.highlight=function(e){if(!e)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(var t=0;t<3;++t)this.enableHighlight[t]?this.highlightLevel[t]=e.level[t]:this.highlightLevel[t]=-1;var n;if(n=this.snapToData?e.dataCoordinate:e.position,this.enableDynamic[0]&&n[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&n[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&n[2]!==this.dynamicLevel[2]){for(var r=0,i=this.shape,a=EW.mallocFloat(12*i[0]*i[1]),o=0;o<3;++o)if(this.enableDynamic[o]){this.dynamicLevel[o]=n[o];var s=(o+1)%3,l=(o+2)%3,u=this._field[o],c=this._field[s],d=this._field[l],f=(this.intensity,NX(u,n[o])),h=f.cells,p=f.positions;for(this._dynamicOffsets[o]=r,t=0;t<h.length;++t)for(var m=h[t],g=0;g<2;++g){var y=p[m[g]],v=+y[0],_=0|v,b=0|Math.min(_+1,i[0]),x=v-_,w=1-x,k=+y[1],T=0|k,M=0|Math.min(T+1,i[1]),A=k-T,C=1-A,S=w*C,E=w*A,P=x*C,I=x*A,L=S*c.get(_,T)+E*c.get(_,M)+P*c.get(b,T)+I*c.get(b,M),O=S*d.get(_,T)+E*d.get(_,M)+P*d.get(b,T)+I*d.get(b,M);if(isNaN(L)||isNaN(O)){g&&(r-=1);break}a[2*r+0]=L,a[2*r+1]=O,r+=1}this._dynamicCounts[o]=r-this._dynamicOffsets[o]}else this.dynamicLevel[o]=NaN,this._dynamicCounts[o]=0;this._dynamicBuffer.update(a.subarray(0,2*r)),EW.freeFloat(a)}};var c9=GX({args:["index","array","scalar"],pre:{body:"{}",args:[],thisVars:[],localVars:[]},body:{body:"{_inline_1_arg1_=_inline_1_arg2_.apply(void 0,_inline_1_arg0_)}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_1_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_1_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:[],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"cwise",blockSize:64}),d9=function(e,t){return c9(e,t),e},f9=bA,h9=xA,p9=wA,m9={};m9=CA,m9.d1=kA,m9.d2=TA,m9.d3=MA;var g9=GX({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=new Array(_inline_3_arg4_)}",args:[{name:"_inline_3_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg2_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg3_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_3_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_4_arg2_(this_warped,_inline_4_arg0_),_inline_4_arg1_=_inline_4_arg3_.apply(void 0,this_warped)}",args:[{name:"_inline_4_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_4_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_4_arg4_",lvalue:!1,rvalue:!1,count:0}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warpND",blockSize:64}),y9=GX({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_7_arg2_(this_warped,_inline_7_arg0_),_inline_7_arg1_=_inline_7_arg3_(_inline_7_arg4_,this_warped[0])}",args:[{name:"_inline_7_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_7_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_7_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp1D",blockSize:64}),v9=GX({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_10_arg2_(this_warped,_inline_10_arg0_),_inline_10_arg1_=_inline_10_arg3_(_inline_10_arg4_,this_warped[0],this_warped[1])}",args:[{name:"_inline_10_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_10_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_10_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp2D",blockSize:64}),_9=GX({args:["index","array","scalar","scalar","scalar"],pre:{body:"{this_warped=[0,0,0]}",args:[],thisVars:["this_warped"],localVars:[]},body:{body:"{_inline_13_arg2_(this_warped,_inline_13_arg0_),_inline_13_arg1_=_inline_13_arg3_(_inline_13_arg4_,this_warped[0],this_warped[1],this_warped[2])}",args:[{name:"_inline_13_arg0_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg1_",lvalue:!0,rvalue:!1,count:1},{name:"_inline_13_arg2_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg3_",lvalue:!1,rvalue:!0,count:1},{name:"_inline_13_arg4_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_warped"],localVars:[]},post:{body:"{}",args:[],thisVars:[],localVars:[]},debug:!1,funcName:"warp3D",blockSize:64}),b9=function(e,t,n){switch(t.shape.length){case 1:y9(e,n,m9.d1,t);break;case 2:v9(e,n,m9.d2,t);break;case 3:_9(e,n,m9.d3,t);break;default:g9(e,n,m9.bind(void 0,t),t.shape.length)}return e},x9=SA,w9=uE.isArrayOrTypedArray,k9=128,T9=EA.prototype;T9.handlePick=function(e){if(e.object===this.surface){var t=e.index=[Math.min(0|Math.round(e.data.index[0]/this.dataScale-1),this.data.z[0].length-1),Math.min(0|Math.round(e.data.index[1]/this.dataScale-1),this.data.z.length-1)],n=[0,0,0];w9(this.data.x)?w9(this.data.x[0])?n[0]=this.data.x[t[1]][t[0]]:n[0]=this.data.x[t[0]]:n[0]=t[0],w9(this.data.y)?w9(this.data.y[0])?n[1]=this.data.y[t[1]][t[0]]:n[1]=this.data.y[t[1]]:n[1]=t[1],n[2]=this.data.z[t[1]][t[0]],e.traceCoordinate=n;var r=this.scene.fullSceneLayout;e.dataCoordinate=[r.xaxis.d2l(n[0],0,this.data.xcalendar)*this.scene.dataScale[0],r.yaxis.d2l(n[1],0,this.data.ycalendar)*this.scene.dataScale[1],r.zaxis.d2l(n[2],0,this.data.zcalendar)*this.scene.dataScale[2]];var i=this.data.text;return Array.isArray(i)&&i[t[1]]&&void 0!==i[t[1]][t[0]]?e.textLabel=i[t[1]][t[0]]:e.textLabel=i||"",e.data.dataCoordinate=e.dataCoordinate.slice(),this.surface.highlight(e.data),this.scene.glplot.spikes.position=e.dataCoordinate,!0}},T9.setContourLevels=function(){for(var e=[[],[],[]],t=!1,n=0;n<3;++n)this.showContour[n]&&(t=!0,e[n]=this.scene.contourLevels[n]);t&&this.surface.update({levels:e})},T9.update=function(e){var t,n=this.scene,r=n.fullSceneLayout,i=this.surface,a=e.opacity,o=PA(e.colorscale,a),s=e.z,l=e.x,u=e.y,c=r.xaxis,d=r.yaxis,f=r.zaxis,h=n.dataScale,p=s[0].length,m=e._ylength,g=[hW(new Float32Array(p*m),[p,m]),hW(new Float32Array(p*m),[p,m]),hW(new Float32Array(p*m),[p,m])],y=g[0],v=g[1],_=n.contourLevels;this.data=e;var b=e.xcalendar,x=e.ycalendar,w=e.zcalendar;d9(g[2],function(e,t){return f.d2l(s[t][e],0,w)*h[2]}),w9(l)?w9(l[0])?d9(y,function(e,t){return c.d2l(l[t][e],0,b)*h[0]}):d9(y,function(e){return c.d2l(l[e],0,b)*h[0]}):d9(y,function(e){return c.d2l(e,0,b)*h[0]}),w9(l)?w9(u[0])?d9(v,function(e,t){return d.d2l(u[t][e],0,x)*h[1]}):d9(v,function(e,t){return d.d2l(u[t],0,x)*h[1]}):d9(v,function(e,t){return d.d2l(t,0,b)*h[1]});var k={colormap:o,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!e.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacity:e.opacity};if(k.intensityBounds=[e.cmin,e.cmax],e.surfacecolor){var T=hW(new Float32Array(p*m),[p,m]);d9(T,function(t,n){return e.surfacecolor[n][t]}),g.push(T)}else k.intensityBounds[0]*=h[2],k.intensityBounds[1]*=h[2];this.dataScale=OA(g),e.surfacecolor&&(k.intensity=g.pop());var M=[!0,!0,!0],A=["x","y","z"];for(t=0;t<3;++t){var C=e.contours[A[t]];M[t]=C.highlight,k.showContour[t]=C.show||C.highlight,k.showContour[t]&&(k.contourProject[t]=[C.project.x,C.project.y,C.project.z],C.show?(this.showContour[t]=!0,k.levels[t]=_[t],i.highlightColor[t]=k.contourColor[t]=UZ(C.color),C.usecolormap?i.highlightTint[t]=k.contourTint[t]=0:i.highlightTint[t]=k.contourTint[t]=1,k.contourWidth[t]=C.width):this.showContour[t]=!1,C.highlight&&(k.dynamicColor[t]=UZ(C.highlightcolor),k.dynamicWidth[t]=C.highlightwidth))}IA(o)&&(k.vertexColor=!0),k.coords=g,i.update(k),i.visible=e.visible,i.enableDynamic=M,i.snapToData=!0,"lighting"in e&&(i.ambientLight=e.lighting.ambient,i.diffuseLight=e.lighting.diffuse,i.specularLight=e.lighting.specular,i.roughness=e.lighting.roughness,i.fresnel=e.lighting.fresnel),"lightposition"in e&&(i.lightPosition=[e.lightposition.x,e.lightposition.y,e.lightposition.z]),a&&a<1&&(i.supportsTransparency=!0)},T9.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};var M9=zA,A9=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,B$,n,r)}var a,o,s=i("z");if(!s)return void(t.visible=!1);var l=i("x");i("y"),t._xlength=Array.isArray(l)&&uE.isArrayOrTypedArray(l[0])?s.length:s[0].length,t._ylength=s.length,rS.getComponentMethod("calendars","handleTraceDefaults")(e,t,["x","y","z"],r),i("text"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","opacity"].forEach(function(e){i(e)});var u=i("surfacecolor");i("colorscale");var c=["x","y","z"];for(a=0;a<3;++a){var d="contours."+c[a],f=i(d+".show"),h=i(d+".highlight");if(f||h)for(o=0;o<3;++o)i(d+".project."+c[o]);f&&(i(d+".color"),i(d+".width"),i(d+".usecolormap")),h&&(i(d+".highlightcolor"),i(d+".highlightwidth"))}u||(RA(e,"zmin","cmin"),RA(e,"zmax","cmax"),RA(e,"zauto","cauto")),QE(e,t,r,i,{prefix:"",cLetter:"c"})},C9={};C9.attributes=B$,C9.supplyDefaults=A9,C9.colorbar=O7,C9.calc=L7,C9.plot=M9,C9.moduleType="trace",C9.name="surface",C9.basePlotModule=N$,C9.categories=["gl3d","2dMap","noOpacity"],C9.meta={};var S9=C9,E9=S9,P9=WC.extendFlat,I9=TE.overrideAll,L9=qD.attributes,O9=I9({domain:L9({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:P9({},Tj.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:P9({},KC({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[]},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:P9({},Tj.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:P9({},KC({arrayOk:!0}))}},"calc","from-root"),z9={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}},R9=WC.extendFlat,D9=function(e,t){var n=t.cells.values,r=function(e){return e.slice(t.header.values.length,e.length)},i=t.header.values.map(function(e){return Array.isArray(e)?e:[e]}).concat(r(n).map(function(){return[""]})),a=t.domain,o=Math.floor(e._fullLayout._size.w*(a.x[1]-a.x[0])),s=Math.floor(e._fullLayout._size.h*(a.y[1]-a.y[0])),l=t.header.values.length?i[0].map(function(){return t.header.height}):[z9.emptyHeaderHeight],u=n.length?n[0].map(function(){return t.cells.height}):[],c=l.reduce(function(e,t){return e+t},0),d=s-c,f=d+z9.uplift,h=FA(u,f),p=FA(l,c),m=NA(p,[]),g=NA(h,m),y={},v=t._fullInput.columnorder.concat(r(n.map(function(e,t){return t}))),_=i.map(function(e,n){var r=Array.isArray(t.columnwidth)?t.columnwidth[Math.min(n,t.columnwidth.length-1)]:t.columnwidth;return SC(r)?Number(r):1}),b=_.reduce(function(e,t){return e+t},0);_=_.map(function(e){return e/b*o});var x={key:t.index,translateX:a.x[0]*e._fullLayout._size.w,translateY:e._fullLayout._size.h*(1-a.y[1]),size:e._fullLayout._size,width:o,height:s,columnOrder:v,groupHeight:s,rowBlocks:g,headerRowBlocks:m,scrollY:0,cells:t.cells,headerCells:R9({},t.header,{values:i}),gdColumns:i.map(function(e){return e[0]}),gdColumnsOriginalOrder:i.map(function(e){return e[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:i.map(function(e,t){var n=y[e];return y[e]=(n||0)+1,{key:e+"__"+y[e],label:e,specIndex:t,xIndex:v[t],xScale:DA,x:void 0,calcdata:void 0,columnWidth:_[t]}})};return x.columns.forEach(function(e){e.calcdata=x,e.x=DA(e)}),x},N9={},F9=WC.extendFlat;N9.splitToPanels=function(e){var t=[0,0],n=F9({},e,{key:"header",type:"header",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!0,values:e.calcdata.headerCells.values[e.specIndex],rowBlocks:e.calcdata.headerRowBlocks,calcdata:F9({},e.calcdata,{cells:e.calcdata.headerCells})});return[F9({},e,{key:"cells1",type:"cells",page:0,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),F9({},e,{key:"cells2",type:"cells",page:1,prevPages:t,currentRepaint:[null,null],dragHandle:!1,values:e.calcdata.cells.values[e.specIndex],rowBlocks:e.calcdata.rowBlocks}),n]},N9.splitToCells=function(e){var t=BA(e);return(e.values||[]).slice(t[0],t[1]).map(function(n,r){return{keyWithinBlock:r+("string"===typeof n&&n.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:t[0]+r,column:e,calcdata:e.calcdata,page:e.page,rowBlocks:e.rowBlocks,value:n}})};var j9=uE.raiseToTop,B9=uE.cancelTransition,U9=function(e,t){var n=e._fullLayout._paper.selectAll("."+z9.cn.table).data(t.map(function(t){var n=M1.unwrap(t),r=n.trace;return D9(e,r)}),M1.keyFun);n.exit().remove(),n.enter().append("g").classed(z9.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),n.attr("width",function(e){return e.width+e.size.l+e.size.r}).attr("height",function(e){return e.height+e.size.t+e.size.b}).attr("transform",function(e){return"translate("+e.translateX+","+e.translateY+")"});var r=n.selectAll("."+z9.cn.tableControlView).data(M1.repeat,M1.keyFun);r.enter().append("g").classed(z9.cn.tableControlView,!0).style("box-sizing","content-box").on("mousemove",function(t){r.filter(function(e){return t===e}).call(WA,e)}).on("mousewheel",function(t){t.scrollbarState.wheeling||(t.scrollbarState.wheeling=!0,CC.event.stopPropagation(),CC.event.preventDefault(),dC(e,r,null,t.scrollY+CC.event.deltaY)(t),t.scrollbarState.wheeling=!1)}).call(WA,e,!0),r.attr("transform",function(e){return"translate("+e.size.l+" "+e.size.t+")"});var i=r.selectAll("."+z9.cn.scrollBackground).data(M1.repeat,M1.keyFun);i.enter().append("rect").classed(z9.cn.scrollBackground,!0).attr("fill","none"),i.attr("width",function(e){return e.width}).attr("height",function(e){return e.height}),r.each(function(t){PP.setClipUrl(CC.select(this),UA(e,t))});var a=r.selectAll("."+z9.cn.yColumn).data(function(e){return e.columns},M1.keyFun);a.enter().append("g").classed(z9.cn.yColumn,!0),a.exit().remove(),a.attr("transform",function(e){return"translate("+e.x+" 0)"}).call(CC.behavior.drag().origin(function(t){return aC(CC.select(this),t,-z9.uplift),j9(this),t.calcdata.columnDragInProgress=!0,WA(r.filter(function(e){return t.calcdata.key===e.key}),e),t}).on("drag",function(e){var t=CC.select(this),n=function(t){return(e===t?CC.event.x:t.x)+t.columnWidth/2};e.x=Math.max(-z9.overdrag,Math.min(e.calcdata.width+z9.overdrag-e.columnWidth,CC.event.x)),HA(a).filter(function(t){return t.calcdata.key===e.calcdata.key}).sort(function(e,t){return n(e)-n(t)}).forEach(function(t,n){t.xIndex=n,t.x=e===t?t.x:t.xScale(t)}),a.filter(function(t){return e!==t}).transition().ease(z9.transitionEase).duration(z9.transitionDuration).attr("transform",function(e){return"translate("+e.x+" 0)"}),t.call(B9).attr("transform","translate("+e.x+" -"+z9.uplift+" )")}).on("dragend",function(t){var n=CC.select(this),r=t.calcdata;t.x=t.xScale(t),t.calcdata.columnDragInProgress=!1,aC(n,t,0),rC(e,r,r.columns.map(function(e){return e.xIndex}))})),a.each(function(t){PP.setClipUrl(CC.select(this),VA(e,t))});var o=a.selectAll("."+z9.cn.columnBlock).data(N9.splitToPanels,M1.keyFun);o.enter().append("g").classed(z9.cn.columnBlock,!0).attr("id",function(e){return e.key}),o.style("cursor",function(e){return e.dragHandle?"ew-resize":e.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var s=o.filter(sC),l=o.filter(oC);l.call(CC.behavior.drag().origin(function(e){return CC.event.stopPropagation(),e}).on("drag",dC(e,r,-1)).on("dragend",function(){})),qA(e,r,s,o),qA(e,r,l,o);var u=r.selectAll("."+z9.cn.scrollAreaClip).data(M1.repeat,M1.keyFun);u.enter().append("clipPath").classed(z9.cn.scrollAreaClip,!0).attr("id",function(t){return UA(e,t)});var c=u.selectAll("."+z9.cn.scrollAreaClipRect).data(M1.repeat,M1.keyFun);c.enter().append("rect").classed(z9.cn.scrollAreaClipRect,!0).attr("x",-z9.overdrag).attr("y",-z9.uplift).attr("fill","none"),c.attr("width",function(e){return e.width+2*z9.overdrag}).attr("height",function(e){return e.height+z9.uplift}),a.selectAll("."+z9.cn.columnBoundary).data(M1.repeat,M1.keyFun).enter().append("g").classed(z9.cn.columnBoundary,!0);var d=a.selectAll("."+z9.cn.columnBoundaryClippath).data(M1.repeat,M1.keyFun);d.enter().append("clipPath").classed(z9.cn.columnBoundaryClippath,!0),d.attr("id",function(t){return VA(e,t)});var f=d.selectAll("."+z9.cn.columnBoundaryRect).data(M1.repeat,M1.keyFun);f.enter().append("rect").classed(z9.cn.columnBoundaryRect,!0).attr("fill","none"),f.attr("width",function(e){return e.columnWidth}).attr("height",function(e){return e.calcdata.height+z9.uplift}),cC(null,l,r)},V9={},H9=_L.getModuleCalcData;V9.name="table",V9.plot=function(e){var t=H9(e.calcdata,"table");t.length&&U9(e,t)},V9.clean=function(e,t,n,r){var i=r._has&&r._has("table"),a=t._has&&t._has("table");i&&!a&&r._paperdiv.selectAll(".table").remove()};var W9=M1.wrap,q9=function(e,t){return W9(t)},G9=qD.defaults,Y9=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,O9,n,r)}G9(t,r,i),i("columnwidth"),i("header.values"),i("header.format"),i("header.align"),i("header.prefix"),i("header.suffix"),i("header.height"),i("header.line.width"),i("header.line.color"),i("header.fill.color"),uE.coerceFont(i,"header.font",uE.extendFlat({},r.font)),wC(t,i),i("cells.values"),i("cells.format"),i("cells.align"),i("cells.prefix"),i("cells.suffix"),i("cells.height"),i("cells.line.width"),i("cells.line.color"),i("cells.fill.color"),uE.coerceFont(i,"cells.font",uE.extendFlat({},r.font))},X9={};X9.attributes=O9,X9.supplyDefaults=Y9,X9.calc=q9,X9.plot=U9,X9.moduleType="trace",X9.name="table",X9.basePlotModule=V9,X9.categories=["noOpacity"],X9.meta={};var Z9=X9,J9=Z9,K9=WC.extendFlat,Q9={y:ez.y,x:ez.x,x0:ez.x0,y0:ez.y0,name:ez.name,orientation:K9({},ez.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:ez.fillcolor,points:K9({},ez.boxpoints,{}),jitter:K9({},ez.jitter,{}),pointpos:K9({},ez.pointpos,{}),marker:ez.marker,text:ez.text,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"plot"},selected:ez.selected,unselected:ez.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}},$9={},eee={gaussian:function(e){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*e*e)}};$9.makeKDE=function(e,t,n){var r=n.length,i=eee.gaussian,a=e.bandwidth,o=1/(r*a);return function(e){for(var t=0,s=0;s<r;s++)t+=i((e-n[s])/a);return o*t}},$9.getPositionOnKdePath=function(e,t,n){var r,i;"h"===t.orientation?(r="y",i="x"):(r="x",i="y");var a=uE.findPointOnPath(e.path,n,i,{pathLength:e.pathLength}),o=e.posCenterPx,s=a[r];return[s,"both"===t.side?2*o-s:o]},$9.getKdeValue=function(e,t,n){var r=e.pts.map($9.extractVal);return $9.makeKDE(e,t,r)(n)/e.posDensityScale},$9.extractVal=function(e){return e.v};var tee=AC.BADNUM,nee=function(e,t){var n=nz(e,t);if(n[0].t.empty)return n;var r=e._fullLayout,i=PI.getFromId(e,t["h"===t.orientation?"xaxis":"yaxis"]),a=r._violinScaleGroupStats,o=t.scalegroup,s=a[o];s||(s=a[o]={maxWidth:0,maxCount:0});for(var l=0;l<n.length;l++){var u=n[l],c=u.pts.map($9.extractVal),d=c.length,f=uE.stdev(c,d-1,u.mean),h=kC(c,f,u.q3-u.q1),p=u.bandwidth=t.bandwidth||h,m=u.span=TC(t,u,i,p),g=m[1]-m[0],y=Math.ceil(g/(Math.min(h,p)/3)),v=g/y;if(!isFinite(v)||!isFinite(y))return uE.error("Something went wrong with computing the violin span"),n[0].t.empty=!0,n;var _=$9.makeKDE(u,t,c);u.density=new Array(y);for(var b=0,x=m[0];x<m[1]+v/2;b++,x+=v){var w=_(x);s.maxWidth=Math.max(s.maxWidth,w),u.density[b]={v:w,t:x}}PI.expand(i,m,{padded:!0}),s.maxCount=Math.max(s.maxCount,c.length)}return n[0].t.labels.kde=uE._(e,"kde:"),n},ree=function(e,t,n,r){function i(n,r){return uE.coerce(e,t,Q9,n,r)}function a(n,r){return uE.coerce2(e,t,Q9,n,r)}if(rz.handleSampleDefaults(e,t,i,r),!1!==t.visible){i("bandwidth"),i("scalegroup",t.name),i("scalemode"),i("side");var o,s=i("span");Array.isArray(s)&&(o="manual"),i("spanmode",o);var l=i("line.color",(e.marker||{}).color||n),u=i("line.width"),c=i("fillcolor",jE.addOpacity(t.line.color,.5));rz.handlePointsDefaults(e,t,i,{prefix:""});var d=a("box.width"),f=a("box.fillcolor",c),h=a("box.line.color",l),p=a("box.line.width",u);i("box.visible",Boolean(d||f||h||p))||delete t.box;var m=a("meanline.color",l),g=a("meanline.width",u);i("meanline.visible",Boolean(m||g))||delete t.meanline}},iee=function(e,t,n,r,i){var a,o,s=e.cd,l=s[0].trace,u=l.hoveron,c=-1!==u.indexOf("violins"),d=-1!==u.indexOf("kde"),f=[];if(c||d){var h=iz.hoverOnBoxes(e,t,n,r);if(c&&(f=f.concat(h)),d&&h.length>0){var p,m,g,y,v,_=e.xa,b=e.ya;"h"===l.orientation?(v=t,p="y",g=b,m="x",y=_):(v=n,p="x",g=_,m="y",y=b);var x=s[e.index];if(v>=x.span[0]&&v<=x.span[1]){var w=uE.extendFlat({},e),k=y.c2p(v,!0),T=$9.getKdeValue(x,l,v),M=$9.getPositionOnKdePath(x,l,k),A=g._offset,C=g._length;w[p+"0"]=M[0],w[p+"1"]=M[1],w[m+"0"]=w[m+"1"]=k,w[m+"Label"]=m+": "+PI.hoverLabelText(y,v)+", "+s[0].t.labels.kde+" "+T.toFixed(3),w.spikeDistance=h[0].spikeDistance;var S=p+"Spike";w[S]=h[0][S],h[0].spikeDistance=void 0,h[0][S]=void 0,f.push(w),o={stroke:e.color},o[p+"1"]=uE.constrain(A+M[0],A,A+C),o[p+"2"]=uE.constrain(A+M[1],A,A+C),o[m+"1"]=o[m+"2"]=y._offset+k}}}-1!==u.indexOf("points")&&(a=iz.hoverOnPoints(e,t,n));var E=i.selectAll(".violinline-"+l.uid).data(o?[0]:[]);return E.enter().append("line").classed("violinline-"+l.uid,!0).attr("stroke-width",1.5),E.exit().remove(),E.attr(o),"closest"===r?a?[a]:f:a?(f.push(a),f):f},aee=uE.extendFlat,oee={violinmode:aee({},az.boxmode,{}),violingap:aee({},az.boxgap,{}),violingroupgap:aee({},az.boxgroupgap,{})},see=function(e,t,n){function r(n,r){return uE.coerce(e,t,oee,n,r)}oz._supply(e,t,n,r,"violin")},lee=function(e,t,n){function r(e){var t=kH(e,{xaxis:a,yaxis:o,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0});return PP.smoothopen(t[0],1)}var i=e._fullLayout,a=t.xaxis,o=t.yaxis;t.plot.select(".violinlayer").selectAll("g.trace.violins").data(n).enter().append("g").attr("class","trace violins").each(function(e){var n=e[0],s=n.t,l=n.trace,u=n.node3=CC.select(this),c=i._numViolins,d="group"===i.violinmode&&c>1,f=s.bdPos=s.dPos*(1-i.violingap)*(1-i.violingroupgap)/(d?c:1),h=s.bPos=d?2*s.dPos*((s.num+.5)/c-.5)*(1-i.violingap):0;if(!0!==l.visible||s.empty)return void CC.select(this).remove();var p=t[s.valLetter+"axis"],m=t[s.posLetter+"axis"],g="both"===l.side,y=g||"positive"===l.side,v=g||"negative"===l.side,_=l.box&&l.box.visible,b=l.meanline&&l.meanline.visible,x=i._violinScaleGroupStats[l.scalegroup];if(u.selectAll("path.violin").data(uE.identity).enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin").each(function(e){var t,n=CC.select(this),i=e.density,a=i.length,o=e.pos+h,u=m.c2p(o);switch(l.scalemode){case"width":t=x.maxWidth/f;break;case"count":t=x.maxWidth/f*(x.maxCount/e.pts.length)}var c,d,_,b,w,k,T;if(y){for(k=new Array(a),b=0;b<a;b++)T=k[b]={},T[s.posLetter]=o+i[b].v/t,T[s.valLetter]=i[b].t;c=r(k)}if(v){for(k=new Array(a),w=0,b=a-1;w<a;w++,b--)T=k[w]={},T[s.posLetter]=o-i[b].v/t,T[s.valLetter]=i[b].t;d=r(k)}if(g)_=c+"L"+d.substr(1)+"Z";else{var M=[u,p.c2p(i[0].t)],A=[u,p.c2p(i[a-1].t)];"h"===l.orientation&&(M.reverse(),A.reverse()),_=y?"M"+M+"L"+c.substr(1)+"L"+A:"M"+A+"L"+d.substr(1)+"L"+M}n.attr("d",_),e.posCenterPx=u,e.posDensityScale=t*f,e.path=n.node(),e.pathLength=e.path.getTotalLength()/(g?2:1)}),_){var w,k,T=l.box.width,M=l.box.line.width;g?(w=f*T,k=0):y?(w=[0,f*T/2],k=-M):(w=[f*T/2,0],k=M),l.whiskerwidth=0,uz.plotBoxAndWhiskers(u,{pos:m,val:p},l,{bPos:h,bdPos:w,bPosPxOffset:k}),b&&uz.plotBoxMean(u,{pos:m,val:p},l,{bPos:h,bdPos:w,bPosPxOffset:k})}else b&&u.selectAll("path.mean").data(uE.identity).enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}).each(function(e){var t=p.c2p(e.mean,!0),n=$9.getPositionOnKdePath(e,l,t);CC.select(this).attr("d","h"===l.orientation?"M"+t+","+n[0]+"V"+n[1]:"M"+n[0]+","+t+"H"+n[1])});l.points&&uz.plotPoints(u,{x:a,y:o},l,s)})},uee=fz.setPositionOffset,cee=["v","h"],dee=function(e,t){for(var n=e.calcdata,r=t.xaxis,i=t.yaxis,a=0;a<cee.length;a++){for(var o=cee[a],s="h"===o?i:r,l=[],u=0,c=0,d=0;d<n.length;d++){var f=n[d],h=f[0].t,p=f[0].trace;!0!==p.visible||"violin"!==p.type||h.empty||p.orientation!==o||p.xaxis!==r._id||p.yaxis!==i._id||(l.push(d),!1!==p.points&&(u=Math.max(u,p.jitter-p.pointpos-1),c=Math.max(c,p.jitter+p.pointpos-1)))}uee("violin",e,l,s,[u,c])}},fee=SH.stylePoints,hee=function(e,t){var n=t?t[0].node3:CC.select(e).selectAll("g.trace.violins");n.style("opacity",function(e){return e[0].trace.opacity}),n.each(function(t){var n=t[0].trace,r=CC.select(this),i=n.box||{},a=i.line||{},o=n.meanline||{},s=o.width;r.selectAll("path.violin").style("stroke-width",n.line.width+"px").call(jE.stroke,n.line.color).call(jE.fill,n.fillcolor),r.selectAll("path.box").style("stroke-width",a.width+"px").call(jE.stroke,a.color).call(jE.fill,i.fillcolor),r.selectAll("path.mean").style({"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"}).call(jE.stroke,o.color),fee(r,n,e)})},pee={attributes:Q9,layoutAttributes:oee,supplyDefaults:ree,supplyLayoutDefaults:see,calc:nee,setPositions:dee,plot:lee,style:hee,hoverPoints:iee,selectPoints:cz,moduleType:"trace",name:"violin",basePlotModule:xL,categories:["cartesian","symbols","oriented","box-violin","showLegend"],meta:{}},mee=pee;return DH.register([JO,gz,JH,PJ,jJ,qJ,v2,XF,S7,mee,T5,E9,p1,r4,zN,h6,P2,_J,$1,Y6,u3,J9,rD,F5,uj,_1,dR,N8,H8]),DH.register([rL,VH,qH,I7]),DH.register([Qz]),DH})}).call(t,n(23))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=n(65),f=n.n(d),h=n(28),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.xAxis,r=e.yAxis,i=Object(c.a)(f.a)({width:"100%"});return s.a.createElement(i,{useResizeHandler:!0,data:[{x:t,type:"histogram",marker:{color:h.a.darkTeal}}],layout:{autosize:!0,title:"",xaxis:{title:n,nticks:5},yaxis:{title:r}},config:h.a.plotlyConfig})}}]),t}(s.a.Component);m.propTypes={data:u.a.array.isRequired,xAxis:u.a.string.isRequired,yAxis:u.a.string.isRequired},t.a=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(17),d=n(65),f=n.n(d),h=n(48),p=(n.n(h),n(28)),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),g=Object(c.a)(f.a)({width:"100%"}),y=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),m(t,[{key:"render",value:function(){var e=this.props.data,t=Object(h.countBy)(e);return s.a.createElement(g,{useResizeHandler:!0,showLink:!1,data:[{type:"choropleth",locationmode:"country names",locations:Object.keys(t),z:Object.values(t),text:Object.keys(t),colorscale:p.a.tealScale,autocolorscale:!1,reversescale:!1,marker:{line:{color:"rgb(180,180,180)",width:.5}},tick0:0,zmin:0,dtick:1e3,colorbar:{autotic:!1,thickness:10,tickprefix:"",title:"Publications",len:.7}}],layout:{margin:{l:0,r:0,b:10,t:10,pad:4},title:"",geo:{scale:2,resolution:300,showcountries:!0,countrycolor:"#696969",countrywidth:.5,scope:"world",showframe:!1,showcoastlines:!1,projection:{type:"mercator"}}},config:p.a.plotlyConfig})}}]),t}(s.a.Component);y.propTypes={data:u.a.array.isRequired},t.a=y},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(400);Object.defineProperty(t,"CircularProgress",{enumerable:!0,get:function(){return r(i).default}});var a=n(401);Object.defineProperty(t,"LinearProgress",{enumerable:!0,get:function(){return r(a).default}})},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n){return(Math.min(Math.max(t,e),n)-t)/(n-t)}function a(e){return e=i(e,0,1),e=(e-=1)*e*e+1}function o(e){return e*e}function s(e){var t,n=e.classes,r=e.className,s=e.color,l=e.max,c=e.min,f=e.size,p=e.style,g=e.thickness,y=e.value,_=e.variant,b=(0,h.default)(e,["classes","className","color","max","min","size","style","thickness","value","variant"]),k={},T={},M={};if("determinate"===_||"static"===_){var A=100*i(y,c,l),C=2*Math.PI*(w/2-5);k.strokeDasharray=C.toFixed(3),M["aria-valuenow"]=Math.round(A),"static"===_?(k.strokeDashoffset=((100-A)/100*C).toFixed(3)+"px",T.transform="rotate(-90deg)"):(k.strokeDashoffset=(o((100-A)/100)*C).toFixed(3)+"px",T.transform="rotate("+(270*a(A/70)).toFixed(3)+"deg)")}return m.default.createElement("div",(0,u.default)({className:(0,v.default)(n.root,(0,d.default)({},n["color"+(0,x.capitalize)(s)],"inherit"!==s),r),style:(0,u.default)({width:f,height:f},T,p),role:"progressbar"},M,b),m.default.createElement("svg",{className:(0,v.default)(n.svg,(t={},(0,d.default)(t,n.svgIndeterminate,"indeterminate"===_),(0,d.default)(t,n.svgStatic,"static"===_),t)),viewBox:"0 0 "+w+" "+w},m.default.createElement("circle",{className:(0,v.default)(n.circle,(0,d.default)({},n.circleIndeterminate,"indeterminate"===_)),style:k,cx:w/2,cy:w/2,r:w/2-5,fill:"none",strokeWidth:g})))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var l=n(2),u=r(l),c=n(12),d=r(c),f=n(3),h=r(f),p=n(1),m=r(p),g=n(0),y=(r(g),n(6)),v=r(y),_=n(13),b=r(_),x=n(25),w=50,k=t.styles=function(e){return{root:{display:"inline-block"},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},svg:{},svgIndeterminate:{animation:"mui-progress-circular-rotate 1.4s linear infinite"},circle:{stroke:"currentColor",strokeLinecap:"round"},circleIndeterminate:{animation:"mui-progress-circular-dash 1.4s ease-in-out infinite",strokeDasharray:"80px, 200px",strokeDashoffset:"0px"},"@keyframes mui-progress-circular-rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes mui-progress-circular-dash":{"0%":{strokeDasharray:"1px, 200px",strokeDashoffset:"0px"},"50%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-15px"},"100%":{strokeDasharray:"100px, 200px",strokeDashoffset:"-120px"}}}};s.propTypes={},s.defaultProps={color:"primary",max:100,min:0,size:40,thickness:3.6,value:0,variant:"indeterminate"},t.default=(0,b.default)(k,{name:"MuiCircularProgress",flip:!1})(s)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){var t,n,r,i,a=e.classes,s=e.className,u=e.color,d=e.value,h=e.valueBuffer,p=e.variant,g=(0,c.default)(e,["classes","className","color","value","valueBuffer","variant"]),y=(0,m.default)(a.root,(t={},(0,l.default)(t,a.colorPrimary,"primary"===u),(0,l.default)(t,a.colorSecondary,"secondary"===u),(0,l.default)(t,a.buffer,"buffer"===p),(0,l.default)(t,a.query,"query"===p),t),s),v=(0,m.default)(a.dashed,(n={},(0,l.default)(n,a.dashedColorPrimary,"primary"===u),(0,l.default)(n,a.dashedColorSecondary,"secondary"===u),n)),_=(0,m.default)(a.bar,(r={},(0,l.default)(r,a.barColorPrimary,"primary"===u),(0,l.default)(r,a.barColorSecondary,"secondary"===u),(0,l.default)(r,a.bar1Indeterminate,"indeterminate"===p||"query"===p),(0,l.default)(r,a.bar1Determinate,"determinate"===p),(0,l.default)(r,a.bar1Buffer,"buffer"===p),r)),b=(0,m.default)(a.bar,(i={},(0,l.default)(i,a.barColorPrimary,"primary"===u&&"buffer"!==p),(0,l.default)(i,a.colorPrimary,"primary"===u&&"buffer"===p),(0,l.default)(i,a.barColorSecondary,"secondary"===u&&"buffer"!==p),(0,l.default)(i,a.colorSecondary,"secondary"===u&&"buffer"===p),(0,l.default)(i,a.bar2Indeterminate,"indeterminate"===p||"query"===p),(0,l.default)(i,a.bar2Buffer,"buffer"===p),i)),x={},w={bar1:{},bar2:{}};return"determinate"!==p&&"buffer"!==p||void 0!==d&&(x["aria-valuenow"]=Math.round(d),w.bar1.transform="scaleX("+d/100+")"),"buffer"===p&&void 0!==h&&(w.bar2.transform="scaleX("+(h||0)/100+")"),f.default.createElement("div",(0,o.default)({className:y,role:"progressbar"},x,g),"buffer"===p?f.default.createElement("div",{className:v}):null,f.default.createElement("div",{className:_,style:w.bar1}),"determinate"===p?null:f.default.createElement("div",{className:b,style:w.bar2}))}Object.defineProperty(t,"__esModule",{value:!0}),t.styles=void 0;var a=n(2),o=r(a),s=n(12),l=r(s),u=n(3),c=r(u),d=n(1),f=r(d),h=n(0),p=(r(h),n(6)),m=r(p),g=n(11),y=(r(g),n(13)),v=r(y),_=n(91),b=t.styles=function(e){return{root:{position:"relative",overflow:"hidden",height:5},colorPrimary:{backgroundColor:(0,_.lighten)(e.palette.primary.light,.6)},colorSecondary:{backgroundColor:(0,_.lighten)(e.palette.secondary.light,.4)},buffer:{backgroundColor:"transparent"},query:{transform:"rotate(180deg)"},dashed:{position:"absolute",marginTop:0,height:"100%",width:"100%",animation:"buffer 3s infinite linear"},dashedColorPrimary:{backgroundImage:"radial-gradient("+(0,_.lighten)(e.palette.primary.light,.6)+" 0%, "+(0,_.lighten)(e.palette.primary.light,.6)+" 16%, transparent 42%)",backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},dashedColorSecondary:{backgroundImage:"radial-gradient("+(0,_.lighten)(e.palette.secondary.light,.4)+" 0%, "+(0,_.lighten)(e.palette.secondary.light,.6)+" 16%, transparent 42%)",backgroundSize:"10px 10px",backgroundPosition:"0px -23px"},bar:{width:"100%",position:"absolute",left:0,bottom:0,top:0,transition:"transform 0.2s linear",transformOrigin:"left"},barColorPrimary:{backgroundColor:e.palette.primary.main},barColorSecondary:{backgroundColor:e.palette.secondary.main},bar1Indeterminate:{width:"auto",willChange:"left, right",animation:"mui-indeterminate1 2.1s cubic-bezier(0.65, 0.815, 0.735, 0.395) infinite"},bar2Indeterminate:{width:"auto",willChange:"left, right",animation:"mui-indeterminate2 2.1s cubic-bezier(0.165, 0.84, 0.44, 1) infinite",animationDelay:"1.15s"},bar1Determinate:{willChange:"transform",transition:"transform .4s linear"},bar1Buffer:{zIndex:1,transition:"transform .4s linear"},bar2Buffer:{transition:"transform .4s linear"},"@keyframes mui-indeterminate1":{"0%":{left:"-35%",right:"100%"},"60%":{left:"100%",right:"-90%"},"100%":{left:"100%",right:"-90%"}},"@keyframes mui-indeterminate2":{"0%":{left:"-200%",right:"100%"},"60%":{left:"107%",right:"-8%"},"100%":{left:"107%",right:"-8%"}},"@keyframes buffer":{"0%":{opacity:1,backgroundPosition:"0px -23px"},"50%":{opacity:0,backgroundPosition:"0px -23px"},"100%":{opacity:1,backgroundPosition:"-200px -23px"}}}};i.propTypes={},i.defaultProps={color:"primary",variant:"indeterminate"},t.default=(0,v.default)(b,{name:"MuiLinearProgress"})(i)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(47),d=n.n(c),f=n(93),h=n(144),p=n(146),m=n(145),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),y=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={ready:!1},n}return a(t,e),g(t,[{key:"componentWillMount",value:function(){setTimeout(function(){this.setState({ready:!0})}.bind(this),300)}},{key:"render",value:function(){var e=this.props.data,t=e.codeBasisLinks.map(function(e,t){return s.a.createElement("div",{key:t},s.a.createElement("a",{href:e.link,target:"_blank"},e.name),s.a.createElement("br",null))});return this.state.ready?s.a.createElement(d.a,{container:!0,spacing:24},s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:6},s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.publicPrivate}),title:"Accessibility",text:"Paywall vs open-access. Open-access includes journals with         preprints publiched on arxiv."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.codeSharing}),title:"Code sharing",text:"Code sharing. Implementations made available vs no code available"}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{xData:e.countries_codeSharing.x,yData:e.countries_codeSharing.y,xAxis:"countries",yAxis:"code sharing"}),title:"countries vs code sharing",text:"countries vs code sharing"}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{xData:e.impactFactors_codeSharing.x,yData:e.impactFactors_codeSharing.y,xAxis:"impact factors",yAxis:"code sharing",autobinx:!1}),title:"impact factors vs code sharing",text:"impact factors vs code sharing - journals only."}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.transferLearning}),title:"Transfer Learning",text:"Transfer learning, or using pre-trained networks on other data              sets, is often utilized when dealing with scarce data."}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{xData:e.domains_transferLearning.x,yData:e.domains_transferLearning.y,xAxis:"domains",yAxis:"transfer learning"}),title:"domains vs transfer learning",text:"domains vs transfer learning"})),s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:6},s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.dataSharing}),title:"Data sharing",text:"Data sharing."}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{xData:e.countries_dataSharing.x,yData:e.countries_dataSharing.y,xAxis:"countries",yAxis:"data sharing"}),title:"countries vs data sharing",text:"countries vs data sharing"}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{xData:e.impactFactors_dataSharing.x,yData:e.impactFactors_dataSharing.y,xAxis:"impactFactors",yAxis:"data sharing",autobinx:!1}),title:"impactFactors vs data sharing",text:"impactFactors vs data sharing"}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.codeBasis}),title:"Code basis",text:s.a.createElement("div",null,"Code basis. Links to these: ",t)}),s.a.createElement(f.a,{plot:s.a.createElement(h.a,{data:e.crossValidation}),title:"Cross validation",text:"Cross validation within datasets."}),s.a.createElement(f.a,{plot:s.a.createElement(p.a,{xData:e.domains_crossValidation.x,yData:e.domains_crossValidation.y,xAxis:"domains",yAxis:"cross validation"}),title:"domains vs cross validation",text:"domains vs cross validation"}))):s.a.createElement(m.a,null)}}]),t}(o.Component);y.propTypes={data:u.a.object.isRequired},t.a=y},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=n.n(l),c=n(47),d=n.n(c),f=n(93),h=n(404),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),p(t,[{key:"render",value:function(){var e=this.props,t=e.data,n=e.raw,r={columns:["title","year","source","domain","task_1","task_2","data_type","location","method_1","method_2","method_3"],columnWidths:[700,200,200,200,200,200,200,200,200,200,200],entries:n};return s.a.createElement("div",null,s.a.createElement(d.a,{container:!0,spacing:24},s.a.createElement(d.a,{item:!0,xs:12,sm:12,md:12},s.a.createElement(f.a,{title:t.count.toString(),text:"Every effort has been made to correctly categorize these              research papers. If you have reason to believe that the              infomation represented here is incorrect, please let us know."}),s.a.createElement("div",null,s.a.createElement(h.a,{data:r})))))}}]),t}(o.Component);m.propTypes={data:u.a.object.isRequired,raw:u.a.array.isRequired},t.a=m},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=(n.n(o),n(0)),l=n.n(s),u=n(405),c=n(96),d=n.n(c),f=n(454),h=(n.n(f),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),p=function(e){function t(e){r(this,t);var n=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=n.props.data.columnWidths;return n.state={columnWidth:a[0],columnCount:a.length,height:600,overscanColumnCount:0,overscanRowCount:5,rowHeight:40,rowCount:108,leftHeaderWidth:a[0]},n._renderBodyCell=n._renderBodyCell.bind(n),n._renderHeaderCell=n._renderHeaderCell.bind(n),n._renderLeftSideCell=n._renderLeftSideCell.bind(n),n._renderLeftHeaderCell=n._renderLeftHeaderCell.bind(n),n._getColumnWidth=n._getColumnWidth.bind(n),n}return a(t,e),h(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.columnCount,r=t.columnWidth,i=t.height,a=t.overscanColumnCount,s=t.overscanRowCount,l=t.rowHeight,c=t.rowCount,f=t.leftHeaderWidth;return o.createElement(u.c,null,function(t){var h=(t.clientHeight,t.clientWidth,t.onScroll),p=(t.scrollHeight,t.scrollLeft),m=t.scrollTop;t.scrollWidth;return o.createElement("div",{className:"GridRow"},o.createElement("div",{className:"LeftSideGridContainer",style:{position:"absolute",left:0,top:0,color:"#fff",backgroundColor:"#696969"}},o.createElement(u.b,{cellRenderer:e._renderLeftHeaderCell,className:"HeaderGrid",width:f,height:l,rowHeight:l,columnWidth:r,rowCount:1,columnCount:1})),o.createElement("div",{className:"LeftSideGridContainer",style:{position:"absolute",left:0,top:l,backgroundColor:"#fff"}},o.createElement(u.b,{overscanColumnCount:a,overscanRowCount:s,cellRenderer:e._renderLeftSideCell,columnWidth:r,columnCount:1,className:"LeftSideGrid",height:i-d()(),rowHeight:l,rowCount:c,scrollTop:m,width:f})),o.createElement("div",{className:"GridColumn"},o.createElement(u.a,{disableHeight:!0},function(t){var r=t.width;return o.createElement("div",null,o.createElement("div",{style:{color:"#fff",backgroundColor:"#696969",height:l,width:r-d()()}},o.createElement(u.b,{className:"HeaderGrid",columnWidth:e._getColumnWidth,columnCount:n,height:l,overscanColumnCount:a,cellRenderer:e._renderHeaderCell,rowHeight:l,rowCount:1,scrollLeft:p,width:r-d()()})),o.createElement("div",{style:{backgroundColor:"#fff",height:i,width:r}},o.createElement(u.b,{className:"BodyGrid",columnWidth:e._getColumnWidth,columnCount:n,height:i,onScroll:h,overscanColumnCount:a,overscanRowCount:s,cellRenderer:e._renderBodyCell,rowHeight:l,rowCount:c,width:r})))})))})}},{key:"_renderBodyCell",value:function(e){var t=e.columnIndex,n=e.key,r=e.rowIndex,i=e.style;if(!(t<1))return this._renderLeftSideCell({columnIndex:t,key:n,rowIndex:r,style:i})}},{key:"_renderHeaderCell",value:function(e){var t=e.columnIndex,n=e.key,r=e.rowIndex,i=e.style;if(!(t<1))return this._renderLeftHeaderCell({columnIndex:t,key:n,rowIndex:r,style:i})}},{key:"_renderLeftHeaderCell",value:function(e){var t=e.columnIndex,n=e.key,r=e.style;return o.createElement("div",{className:"headerCell",key:n,style:r},o.createElement("span",{className:"span"},this.props.data.columns[t]))}},{key:"_renderLeftSideCell",value:function(e){var t=e.columnIndex,n=e.key,r=e.rowIndex,i=e.style,a=r%2===0?"evenRow":"oddRow",s=this.props.data,l=s.entries,u=s.columns;return o.createElement("div",{className:a,key:n,style:i},o.createElement("span",{className:"span"},l[r][u[t]]))}},{key:"_getColumnWidth",value:function(e){var t=e.index;return this.props.data.columnWidths[t]}}]),t}(o.PureComponent);p.propTypes={data:l.a.object.isRequired},t.a=p},function(e,t,n){"use strict";var r=(n(406),n(414));n.d(t,"a",function(){return r.a});var i=(n(153),n(416),n(423),n(16));n.d(t,"b",function(){return i.Grid});var a=(n(425),n(427),n(431),n(443),n(446));n.d(t,"c",function(){return a.a});n(448),n(451)},function(e,t,n){"use strict";n(147)},function(e,t,n){"use strict";var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=(n(10).babelPluginFlowReactPropTypes_proptype_VisibleCellRange||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_CellSizeGetter||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_Alignment||n(0).any,function(){function e(t){var n=t.cellCount,r=t.cellSizeGetter,a=t.estimatedCellSize;i()(this,e),this._cellSizeAndPositionData={},this._lastMeasuredIndex=-1,this._lastBatchedIndex=-1,this._cellSizeGetter=r,this._cellCount=n,this._estimatedCellSize=a}return o()(e,[{key:"areOffsetsAdjusted",value:function(){return!1}},{key:"configure",value:function(e){var t=e.cellCount,n=e.estimatedCellSize;this._cellCount=t,this._estimatedCellSize=n}},{key:"getCellCount",value:function(){return this._cellCount}},{key:"getEstimatedCellSize",value:function(){return this._estimatedCellSize}},{key:"getLastMeasuredIndex",value:function(){return this._lastMeasuredIndex}},{key:"getOffsetAdjustment",value:function(){return 0}},{key:"getSizeAndPositionOfCell",value:function(e){if(e<0||e>=this._cellCount)throw Error("Requested index "+e+" is outside of range 0.."+this._cellCount);if(e>this._lastMeasuredIndex)for(var t=this.getSizeAndPositionOfLastMeasuredCell(),n=t.offset+t.size,r=this._lastMeasuredIndex+1;r<=e;r++){var i=this._cellSizeGetter({index:r});if(void 0===i||isNaN(i))throw Error("Invalid size returned for cell "+r+" of value "+i);null===i?(this._cellSizeAndPositionData[r]={offset:n,size:0},this._lastBatchedIndex=e):(this._cellSizeAndPositionData[r]={offset:n,size:i},n+=i,this._lastMeasuredIndex=e)}return this._cellSizeAndPositionData[e]}},{key:"getSizeAndPositionOfLastMeasuredCell",value:function(){return this._lastMeasuredIndex>=0?this._cellSizeAndPositionData[this._lastMeasuredIndex]:{offset:0,size:0}}},{key:"getTotalSize",value:function(){var e=this.getSizeAndPositionOfLastMeasuredCell();return e.offset+e.size+(this._cellCount-this._lastMeasuredIndex-1)*this._estimatedCellSize}},{key:"getUpdatedOffsetForIndex",value:function(e){var t=e.align,n=void 0===t?"auto":t,r=e.containerSize,i=e.currentOffset,a=e.targetIndex;if(r<=0)return 0;var o=this.getSizeAndPositionOfCell(a),s=o.offset,l=s-r+o.size,u=void 0;switch(n){case"start":u=s;break;case"end":u=l;break;case"center":u=s-(r-o.size)/2;break;default:u=Math.max(l,Math.min(s,i))}var c=this.getTotalSize();return Math.max(0,Math.min(c-r,u))}},{key:"getVisibleCellRange",value:function(e){var t=e.containerSize,n=e.offset;if(0===this.getTotalSize())return{};var r=n+t,i=this._findNearestCell(n),a=this.getSizeAndPositionOfCell(i);n=a.offset+a.size;for(var o=i;n<r&&o<this._cellCount-1;)o++,n+=this.getSizeAndPositionOfCell(o).size;return{start:i,stop:o}}},{key:"resetCell",value:function(e){this._lastMeasuredIndex=Math.min(this._lastMeasuredIndex,e-1)}},{key:"_binarySearch",value:function(e,t,n){for(;t<=e;){var r=t+Math.floor((e-t)/2),i=this.getSizeAndPositionOfCell(r).offset;if(i===n)return r;i<n?t=r+1:i>n&&(e=r-1)}return t>0?t-1:0}},{key:"_exponentialSearch",value:function(e,t){for(var n=1;e<this._cellCount&&this.getSizeAndPositionOfCell(e).offset<t;)e+=n,n*=2;return this._binarySearch(Math.min(e,this._cellCount-1),Math.floor(e/2),t)}},{key:"_findNearestCell",value:function(e){if(isNaN(e))throw Error("Invalid offset "+e+" specified");e=Math.max(0,e);var t=this.getSizeAndPositionOfLastMeasuredCell(),n=Math.max(0,this._lastMeasuredIndex);return t.offset>=e?this._binarySearch(n,0,e):this._exponentialSearch(n,e)}}]),e}());t.a=s},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var r=function(){return"undefined"!==typeof window},i=function(){return!!window.chrome&&!!window.chrome.webstore},a=function(){return r()&&i()?16777100:15e5}},function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var r=void 0;r="undefined"!==typeof window?window:"undefined"!==typeof self?self:{};var i=r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame||function(e){return r.setTimeout(e,1e3/60)},a=r.cancelAnimationFrame||r.webkitCancelAnimationFrame||r.mozCancelAnimationFrame||r.oCancelAnimationFrame||r.msCancelAnimationFrame||function(e){r.clearTimeout(e)},o=i,s=a},function(e,t,n){"use strict";function r(e){var t=e.cellCount,n=e.cellSize,r=e.computeMetadataCallback,i=e.computeMetadataCallbackProps,a=e.nextCellsCount,o=e.nextCellSize,s=e.nextScrollToIndex,l=e.scrollToIndex,u=e.updateScrollOffsetForScrollToIndex;t===a&&("number"!==typeof n&&"number"!==typeof o||n===o)||(r(i),l>=0&&l===s&&u())}t.a=r},function(e,t,n){"use strict";function r(e){var t=e.cellSize,n=e.cellSizeAndPositionManager,r=e.previousCellsCount,i=e.previousCellSize,a=e.previousScrollToAlignment,o=e.previousScrollToIndex,s=e.previousSize,l=e.scrollOffset,u=e.scrollToAlignment,c=e.scrollToIndex,d=e.size,f=e.sizeJustIncreasedFromZero,h=e.updateScrollIndexCallback,p=n.getCellCount(),m=c>=0&&c<p,g=d!==s||f||!i||"number"===typeof t&&t!==i;m&&(g||u!==a||c!==o)?h(c):!m&&p>0&&(d<s||p<r)&&l>n.getTotalSize()-d&&h(p-1)}t.a=r;n(94),n(10).babelPluginFlowReactPropTypes_proptype_CellSize||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_Alignment||n(0).any},function(e,t,n){"use strict";function r(e){var t=e.cellCount,n=e.overscanCellsCount,r=e.scrollDirection,a=e.startIndex,o=e.stopIndex;return n=Math.max(1,n),r===i?{overscanStartIndex:Math.max(0,a-1),overscanStopIndex:Math.min(t-1,o+n)}:{overscanStartIndex:Math.max(0,a-n),overscanStopIndex:Math.min(t-1,o+1)}}t.a=r;var i=(n(10).babelPluginFlowReactPropTypes_proptype_OverscanIndices||n(0).any,n(10).babelPluginFlowReactPropTypes_proptype_OverscanIndicesGetterParams||n(0).any,1)},function(e,t,n){},function(e,t,n){"use strict";var r=n(151);n.d(t,"a",function(){return r.a})},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(4),o=n.n(a),s=n(5),l=n.n(s),u=n(8),c=n.n(u),d=n(9),f=n.n(d),h=n(1),p=(n.n(h),n(29)),m=(n.n(p),n(154),function(e){function t(){var e,n,r,a;o()(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return n=r=c()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(l))),r._measure=function(){var e=r.props,t=e.cache,n=e.columnIndex,i=void 0===n?0:n,a=e.parent,o=e.rowIndex,s=void 0===o?r.props.index||0:o,l=r._getCellMeasurements(),u=l.height,c=l.width;u===t.getHeight(s,i)&&c===t.getWidth(s,i)||(t.set(s,i,c,u),a&&"function"===typeof a.recomputeGridSize&&a.recomputeGridSize({columnIndex:i,rowIndex:s}))},a=n,c()(r,a)}return f()(t,e),l()(t,[{key:"componentDidMount",value:function(){this._maybeMeasureCell()}},{key:"componentDidUpdate",value:function(){this._maybeMeasureCell()}},{key:"render",value:function(){var e=this.props.children;return"function"===typeof e?e({measure:this._measure}):e}},{key:"_getCellMeasurements",value:function(){var e=this.props.cache,t=Object(p.findDOMNode)(this);if(t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){var n=t.style.width,r=t.style.height;e.hasFixedWidth()||(t.style.width="auto"),e.hasFixedHeight()||(t.style.height="auto");var i=Math.ceil(t.offsetHeight),a=Math.ceil(t.offsetWidth);return n&&(t.style.width=n),r&&(t.style.height=r),{height:i,width:a}}return{height:0,width:0}}},{key:"_maybeMeasureCell",value:function(){var e=this.props,t=e.cache,n=e.columnIndex,r=void 0===n?0:n,i=e.parent,a=e.rowIndex,o=void 0===a?this.props.index||0:a;if(!t.has(o,r)){var s=this._getCellMeasurements(),l=s.height,u=s.width;t.set(o,r,u,l),i&&"function"===typeof i.invalidateCellSizeAfterRender&&i.invalidateCellSizeAfterRender({columnIndex:r,rowIndex:o})}}}]),t}(h.PureComponent));m.__internalCellMeasurerFlag=!1,m.propTypes=null,t.a=m},function(e,t,n){"use strict";var r=n(417);r.a},function(e,t,n){"use strict";function r(e){var t=e.cellCache,n=e.cellRenderer,r=e.cellSizeAndPositionGetter,i=e.indices,a=e.isScrolling;return i.map(function(e){var i=r({index:e}),o={index:e,isScrolling:a,key:e,style:{height:i.height,left:i.x,position:"absolute",top:i.y,width:i.width}};return a?(e in t||(t[e]=n(o)),t[e]):n(o)}).filter(function(e){return!!e})}var i=n(2),a=n.n(i),o=n(3),s=n.n(o),l=n(7),u=n.n(l),c=n(4),d=n.n(c),f=n(5),h=n.n(f),p=n(8),m=n.n(p),g=n(9),y=n.n(g),v=n(0),_=(n.n(v),n(1)),b=n.n(_),x=n(418),w=n(419),k=n(422),T=(n(39).babelPluginFlowReactPropTypes_proptype_SizeInfo||n(0).any,n(39).babelPluginFlowReactPropTypes_proptype_ScrollPosition||n(0).any,function(e){function t(e,n){d()(this,t);var r=m()(this,(t.__proto__||u()(t)).call(this,e,n));return r._cellMetadata=[],r._lastRenderedCellIndices=[],r._cellCache=[],r._isScrollingChange=r._isScrollingChange.bind(r),r._setCollectionViewRef=r._setCollectionViewRef.bind(r),r}return y()(t,e),h()(t,[{key:"forceUpdate",value:function(){void 0!==this._collectionView&&this._collectionView.forceUpdate()}},{key:"recomputeCellSizesAndPositions",value:function(){this._cellCache=[],this._collectionView.recomputeCellSizesAndPositions()}},{key:"render",value:function(){var e=s()(this.props,[]);return b.a.createElement(x.a,a()({cellLayoutManager:this,isScrollingChange:this._isScrollingChange,ref:this._setCollectionViewRef},e))}},{key:"calculateSizeAndPositionData",value:function(){var e=this.props,t=e.cellCount,n=e.cellSizeAndPositionGetter,r=e.sectionSize,i=Object(w.a)({cellCount:t,cellSizeAndPositionGetter:n,sectionSize:r});this._cellMetadata=i.cellMetadata,this._sectionManager=i.sectionManager,this._height=i.height,this._width=i.width}},{key:"getLastRenderedIndices",value:function(){return this._lastRenderedCellIndices}},{key:"getScrollPositionForCell",value:function(e){var t=e.align,n=e.cellIndex,r=e.height,i=e.scrollLeft,a=e.scrollTop,o=e.width,s=this.props.cellCount;if(n>=0&&n<s){var l=this._cellMetadata[n];i=Object(k.a)({align:t,cellOffset:l.x,cellSize:l.width,containerSize:o,currentOffset:i,targetIndex:n}),a=Object(k.a)({align:t,cellOffset:l.y,cellSize:l.height,containerSize:r,currentOffset:a,targetIndex:n})}return{scrollLeft:i,scrollTop:a}}},{key:"getTotalSize",value:function(){return{height:this._height,width:this._width}}},{key:"cellRenderers",value:function(e){var t=this,n=e.height,r=e.isScrolling,i=e.width,a=e.x,o=e.y,s=this.props,l=s.cellGroupRenderer,u=s.cellRenderer;return this._lastRenderedCellIndices=this._sectionManager.getCellIndices({height:n,width:i,x:a,y:o}),l({cellCache:this._cellCache,cellRenderer:u,cellSizeAndPositionGetter:function(e){var n=e.index;return t._sectionManager.getCellMetadata({index:n})},indices:this._lastRenderedCellIndices,isScrolling:r})}},{key:"_isScrollingChange",value:function(e){e||(this._cellCache=[])}},{key:"_setCollectionViewRef",value:function(e){this._collectionView=e}}]),t}(_.PureComponent));T.defaultProps={"aria-label":"grid",cellGroupRenderer:r},t.a=T,T.propTypes={}},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(7),o=n.n(a),s=n(4),l=n.n(s),u=n(5),c=n.n(u),d=n(8),f=n.n(d),h=n(9),p=n.n(h),m=n(0),g=(n.n(m),n(1)),y=n.n(g),v=n(6),_=n.n(v),b=n(95),x=n(96),w=n.n(x),k={OBSERVED:"observed",REQUESTED:"requested"},T=function(e){function t(e,n){l()(this,t);var r=f()(this,(t.__proto__||o()(t)).call(this,e,n));return r.state={isScrolling:!1,scrollLeft:0,scrollTop:0},r._calculateSizeAndPositionDataOnNextUpdate=!1,r._onSectionRenderedMemoizer=Object(b.a)(),r._onScrollMemoizer=Object(b.a)(!1),r._invokeOnSectionRenderedHelper=r._invokeOnSectionRenderedHelper.bind(r),r._onScroll=r._onScroll.bind(r),r._setScrollingContainerRef=r._setScrollingContainerRef.bind(r),r._updateScrollPositionForScrollToCell=r._updateScrollPositionForScrollToCell.bind(r),r}return p()(t,e),c()(t,[{key:"recomputeCellSizesAndPositions",value:function(){this._calculateSizeAndPositionDataOnNextUpdate=!0,this.forceUpdate()}},{key:"componentDidMount",value:function(){var e=this.props,t=e.cellLayoutManager,n=e.scrollLeft,r=e.scrollToCell,i=e.scrollTop;this._scrollbarSizeMeasured||(this._scrollbarSize=w()(),this._scrollbarSizeMeasured=!0,this.setState({})),r>=0?this._updateScrollPositionForScrollToCell():(n>=0||i>=0)&&this._setScrollPosition({scrollLeft:n,scrollTop:i}),this._invokeOnSectionRenderedHelper();var a=t.getTotalSize(),o=a.height,s=a.width;this._invokeOnScrollMemoizer({scrollLeft:n||0,scrollTop:i||0,totalHeight:o,totalWidth:s})}},{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.height,i=n.scrollToAlignment,a=n.scrollToCell,o=n.width,s=this.state,l=s.scrollLeft,u=s.scrollPositionChangeReason,c=s.scrollTop;u===k.REQUESTED&&(l>=0&&l!==t.scrollLeft&&l!==this._scrollingContainer.scrollLeft&&(this._scrollingContainer.scrollLeft=l),c>=0&&c!==t.scrollTop&&c!==this._scrollingContainer.scrollTop&&(this._scrollingContainer.scrollTop=c)),r===e.height&&i===e.scrollToAlignment&&a===e.scrollToCell&&o===e.width||this._updateScrollPositionForScrollToCell(),this._invokeOnSectionRenderedHelper()}},{key:"componentWillMount",value:function(){this.props.cellLayoutManager.calculateSizeAndPositionData(),this._scrollbarSize=w()(),void 0===this._scrollbarSize?(this._scrollbarSizeMeasured=!1,this._scrollbarSize=0):this._scrollbarSizeMeasured=!0}},{key:"componentWillUnmount",value:function(){this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId)}},{key:"componentWillReceiveProps",value:function(e){var t=this.state,n=t.scrollLeft,r=t.scrollTop;0!==e.cellCount||0===n&&0===r?e.scrollLeft===this.props.scrollLeft&&e.scrollTop===this.props.scrollTop||this._setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}):this._setScrollPosition({scrollLeft:0,scrollTop:0}),(e.cellCount!==this.props.cellCount||e.cellLayoutManager!==this.props.cellLayoutManager||this._calculateSizeAndPositionDataOnNextUpdate)&&e.cellLayoutManager.calculateSizeAndPositionData(),this._calculateSizeAndPositionDataOnNextUpdate&&(this._calculateSizeAndPositionDataOnNextUpdate=!1)}},{key:"render",value:function(){var e=this.props,t=e.autoHeight,n=e.cellCount,r=e.cellLayoutManager,a=e.className,o=e.height,s=e.horizontalOverscanSize,l=e.id,u=e.noContentRenderer,c=e.style,d=e.verticalOverscanSize,f=e.width,h=this.state,p=h.isScrolling,m=h.scrollLeft,g=h.scrollTop,v=r.getTotalSize(),b=v.height,x=v.width,w=Math.max(0,m-s),k=Math.max(0,g-d),T=Math.min(x,m+f+s),M=Math.min(b,g+o+d),A=o>0&&f>0?r.cellRenderers({height:M-k,isScrolling:p,width:T-w,x:w,y:k}):[],C={boxSizing:"border-box",direction:"ltr",height:t?"auto":o,position:"relative",WebkitOverflowScrolling:"touch",width:f,willChange:"transform"},S=b>o?this._scrollbarSize:0,E=x>f?this._scrollbarSize:0;return C.overflowX=x+S<=f?"hidden":"auto",C.overflowY=b+E<=o?"hidden":"auto",y.a.createElement("div",{ref:this._setScrollingContainerRef,"aria-label":this.props["aria-label"],className:_()("ReactVirtualized__Collection",a),id:l,onScroll:this._onScroll,role:"grid",style:i()({},C,c),tabIndex:0},n>0&&y.a.createElement("div",{className:"ReactVirtualized__Collection__innerScrollContainer",style:{height:b,maxHeight:b,maxWidth:x,overflow:"hidden",pointerEvents:p?"none":"",width:x}},A),0===n&&u())}},{key:"_enablePointerEventsAfterDelay",value:function(){var e=this;this._disablePointerEventsTimeoutId&&clearTimeout(this._disablePointerEventsTimeoutId),this._disablePointerEventsTimeoutId=setTimeout(function(){(0,e.props.isScrollingChange)(!1),e._disablePointerEventsTimeoutId=null,e.setState({isScrolling:!1})},150)}},{key:"_invokeOnSectionRenderedHelper",value:function(){var e=this.props,t=e.cellLayoutManager,n=e.onSectionRendered;this._onSectionRenderedMemoizer({callback:n,indices:{indices:t.getLastRenderedIndices()}})}},{key:"_invokeOnScrollMemoizer",value:function(e){var t=this,n=e.scrollLeft,r=e.scrollTop,i=e.totalHeight,a=e.totalWidth;this._onScrollMemoizer({callback:function(e){var n=e.scrollLeft,r=e.scrollTop,o=t.props,s=o.height;(0,o.onScroll)({clientHeight:s,clientWidth:o.width,scrollHeight:i,scrollLeft:n,scrollTop:r,scrollWidth:a})},indices:{scrollLeft:n,scrollTop:r}})}},{key:"_setScrollingContainerRef",value:function(e){this._scrollingContainer=e}},{key:"_setScrollPosition",value:function(e){var t=e.scrollLeft,n=e.scrollTop,r={scrollPositionChangeReason:k.REQUESTED};t>=0&&(r.scrollLeft=t),n>=0&&(r.scrollTop=n),(t>=0&&t!==this.state.scrollLeft||n>=0&&n!==this.state.scrollTop)&&this.setState(r)}},{key:"_updateScrollPositionForScrollToCell",value:function(){var e=this.props,t=e.cellLayoutManager,n=e.height,r=e.scrollToAlignment,i=e.scrollToCell,a=e.width,o=this.state,s=o.scrollLeft,l=o.scrollTop;if(i>=0){var u=t.getScrollPositionForCell({align:r,cellIndex:i,height:n,scrollLeft:s,scrollTop:l,width:a});u.scrollLeft===s&&u.scrollTop===l||this._setScrollPosition(u)}}},{key:"_onScroll",value:function(e){if(e.target===this._scrollingContainer){this._enablePointerEventsAfterDelay();var t=this.props,n=t.cellLayoutManager,r=t.height,i=t.isScrollingChange,a=t.width,o=this._scrollbarSize,s=n.getTotalSize(),l=s.height,u=s.width,c=Math.max(0,Math.min(u-a+o,e.target.scrollLeft)),d=Math.max(0,Math.min(l-r+o,e.target.scrollTop));if(this.state.scrollLeft!==c||this.state.scrollTop!==d){var f=e.cancelable?k.OBSERVED:k.REQUESTED;this.state.isScrolling||i(!0),this.setState({isScrolling:!0,scrollLeft:c,scrollPositionChangeReason:f,scrollTop:d})}this._invokeOnScrollMemoizer({scrollLeft:c,scrollTop:d,totalWidth:u,totalHeight:l})}}}]),t}(g.PureComponent);T.defaultProps={"aria-label":"grid",horizontalOverscanSize:0,noContentRenderer:function(){return null},onScroll:function(){return null},onSectionRendered:function(){return null},scrollToAlignment:"auto",scrollToCell:-1,style:{},verticalOverscanSize:0},t.a=T,T.propTypes={}},function(e,t,n){"use strict";function r(e){for(var t=e.cellCount,n=e.cellSizeAndPositionGetter,r=e.sectionSize,a=[],o=new i.a(r),s=0,l=0,u=0;u<t;u++){var c=n({index:u});if(null==c.height||isNaN(c.height)||null==c.width||isNaN(c.width)||null==c.x||isNaN(c.x)||null==c.y||isNaN(c.y))throw Error("Invalid metadata returned for cell "+u+":\n        x:"+c.x+", y:"+c.y+", width:"+c.width+", height:"+c.height);s=Math.max(s,c.y+c.height),l=Math.max(l,c.x+c.width),a[u]=c,o.registerCell({cellMetadatum:c,index:u})}return{cellMetadata:a,height:s,sectionManager:o,width:l}}t.a=r;var i=n(420)},function(e,t,n){"use strict";var r=n(22),i=n.n(r),a=n(4),o=n.n(a),s=n(5),l=n.n(s),u=n(421),c=(n(39).babelPluginFlowReactPropTypes_proptype_SizeAndPositionInfo||n(0).any,n(39).babelPluginFlowReactPropTypes_proptype_Index||n(0).any,100),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;o()(this,e),this._sectionSize=t,this._cellMetadata=[],this._sections={}}return l()(e,[{key:"getCellIndices",value:function(e){var t=e.height,n=e.width,r=e.x,a=e.y,o={};return this.getSections({height:t,width:n,x:r,y:a}).forEach(function(e){return e.getCellIndices().forEach(function(e){o[e]=e})}),i()(o).map(function(e){return o[e]})}},{key:"getCellMetadata",value:function(e){var t=e.index;return this._cellMetadata[t]}},{key:"getSections",value:function(e){for(var t=e.height,n=e.width,r=e.x,i=e.y,a=Math.floor(r/this._sectionSize),o=Math.floor((r+n-1)/this._sectionSize),s=Math.floor(i/this._sectionSize),l=Math.floor((i+t-1)/this._sectionSize),c=[],d=a;d<=o;d++)for(var f=s;f<=l;f++){var h=d+"."+f;this._sections[h]||(this._sections[h]=new u.a({height:this._sectionSize,width:this._sectionSize,x:d*this._sectionSize,y:f*this._sectionSize})),c.push(this._sections[h])}return c}},{key:"getTotalSectionCount",value:function(){return i()(this._sections).length}},{key:"toString",value:function(){var e=this;return i()(this._sections).map(function(t){return e._sections[t].toString()})}},{key:"registerCell",value:function(e){var t=e.cellMetadatum,n=e.index;this._cellMetadata[n]=t,this.getSections(t).forEach(function(e){return e.addCellIndex({index:n})})}}]),e}();t.a=d},function(e,t,n){"use strict";var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=(n(39).babelPluginFlowReactPropTypes_proptype_SizeAndPositionInfo||n(0).any,n(39).babelPluginFlowReactPropTypes_proptype_Index||n(0).any,function(){function e(t){var n=t.height,r=t.width,a=t.x,o=t.y;i()(this,e),this.height=n,this.width=r,this.x=a,this.y=o,this._indexMap={},this._indices=[]}return o()(e,[{key:"addCellIndex",value:function(e){var t=e.index;this._indexMap[t]||(this._indexMap[t]=!0,this._indices.push(t))}},{key:"getCellIndices",value:function(){return this._indices}},{key:"toString",value:function(){return this.x+","+this.y+" "+this.width+"x"+this.height}}]),e}());t.a=s},function(e,t,n){"use strict";function r(e){var t=e.align,n=void 0===t?"auto":t,r=e.cellOffset,i=e.cellSize,a=e.containerSize,o=e.currentOffset,s=r,l=s-a+i;switch(n){case"start":return s;case"end":return l;case"center":return s-(a-i)/2;default:return Math.max(l,Math.min(s,o))}}t.a=r},function(e,t,n){"use strict";var r=n(424);r.a},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(4),o=n.n(a),s=n(5),l=n.n(s),u=n(8),c=n.n(u),d=n(9),f=n.n(d),h=n(0),p=(n.n(h),n(1)),m=(n.n(p),function(e){function t(e,n){o()(this,t);var r=c()(this,(t.__proto__||i()(t)).call(this,e,n));return r._registerChild=r._registerChild.bind(r),r}return f()(t,e),l()(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.columnMaxWidth,r=t.columnMinWidth,i=t.columnCount,a=t.width;n===e.columnMaxWidth&&r===e.columnMinWidth&&i===e.columnCount&&a===e.width||this._registeredChild&&this._registeredChild.recomputeGridSize()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.columnMaxWidth,r=e.columnMinWidth,i=e.columnCount,a=e.width,o=r||1,s=n?Math.min(n,a):a,l=a/i;return l=Math.max(o,l),l=Math.min(s,l),l=Math.floor(l),t({adjustedWidth:Math.min(a,l*i),columnWidth:l,getColumnWidth:function(){return l},registerChild:this._registerChild})}},{key:"_registerChild",value:function(e){if(e&&"function"!==typeof e.recomputeGridSize)throw Error("Unexpected child type registered; only Grid/MultiGrid children are supported.");this._registeredChild=e,this._registeredChild&&this._registeredChild.recomputeGridSize()}}]),t}(p.PureComponent));t.a=m,m.propTypes={}},function(e,t,n){"use strict";var r=n(426);r.a},function(e,t,n){"use strict";function r(e){var t=e.lastRenderedStartIndex,n=e.lastRenderedStopIndex,r=e.startIndex,i=e.stopIndex;return!(r>n||i<t)}function i(e){for(var t=e.isRowLoaded,n=e.minimumBatchSize,r=e.rowCount,i=e.startIndex,a=e.stopIndex,o=[],s=null,l=null,u=i;u<=a;u++){t({index:u})?null!==l&&(o.push({startIndex:s,stopIndex:l}),s=l=null):(l=u,null===s&&(s=u))}if(null!==l){for(var c=Math.min(Math.max(l,s+n-1),r-1),d=l+1;d<=c&&!t({index:d});d++)l=d;o.push({startIndex:s,stopIndex:l})}if(o.length)for(var f=o[0];f.stopIndex-f.startIndex+1<n&&f.startIndex>0;){var h=f.startIndex-1;if(t({index:h}))break;f.startIndex=h}return o}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n="function"===typeof e.recomputeGridSize?e.recomputeGridSize:e.recomputeRowHeights;n?n.call(e,t):e.forceUpdate()}var o=n(7),s=n.n(o),l=n(4),u=n.n(l),c=n(5),d=n.n(c),f=n(8),h=n.n(f),p=n(9),m=n.n(p),g=n(1),y=(n.n(g),n(0)),v=(n.n(y),n(95)),_=function(e){function t(e,n){u()(this,t);var r=h()(this,(t.__proto__||s()(t)).call(this,e,n));return r._loadMoreRowsMemoizer=Object(v.a)(),r._onRowsRendered=r._onRowsRendered.bind(r),r._registerChild=r._registerChild.bind(r),r}return m()(t,e),d()(t,[{key:"resetLoadMoreRowsCache",value:function(e){this._loadMoreRowsMemoizer=Object(v.a)(),e&&this._doStuff(this._lastRenderedStartIndex,this._lastRenderedStopIndex)}},{key:"render",value:function(){return(0,this.props.children)({onRowsRendered:this._onRowsRendered,registerChild:this._registerChild})}},{key:"_loadUnloadedRanges",value:function(e){var t=this,n=this.props.loadMoreRows;e.forEach(function(e){var i=n(e);i&&i.then(function(){r({lastRenderedStartIndex:t._lastRenderedStartIndex,lastRenderedStopIndex:t._lastRenderedStopIndex,startIndex:e.startIndex,stopIndex:e.stopIndex})&&t._registeredChild&&a(t._registeredChild,t._lastRenderedStartIndex)})})}},{key:"_onRowsRendered",value:function(e){var t=e.startIndex,n=e.stopIndex;this._lastRenderedStartIndex=t,this._lastRenderedStopIndex=n,this._doStuff(t,n)}},{key:"_doStuff",value:function(e,t){var n=this,r=this.props,a=r.isRowLoaded,o=r.minimumBatchSize,s=r.rowCount,l=r.threshold,u=i({isRowLoaded:a,minimumBatchSize:o,rowCount:s,startIndex:Math.max(0,e-l),stopIndex:Math.min(s-1,t+l)}),c=u.reduce(function(e,t){return e.concat([t.startIndex,t.stopIndex])},[]);this._loadMoreRowsMemoizer({callback:function(){n._loadUnloadedRanges(u)},indices:{squashedUnloadedRanges:c}})}},{key:"_registerChild",value:function(e){this._registeredChild=e}}]),t}(g.PureComponent);_.defaultProps={minimumBatchSize:10,rowCount:0,threshold:15},t.a=_,_.propTypes={}},function(e,t,n){"use strict";n(155)},function(e,t,n){e.exports={default:n(429),__esModule:!0}},function(e,t,n){n(430);var r=n(14).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},function(e,t,n){var r=n(33),i=n(84).f;n(78)("getOwnPropertyDescriptor",function(){return function(e,t){return i(r(e),t)}})},function(e,t,n){"use strict";var r=(n(432),n(98));r.default},function(e,t,n){"use strict";n(98).babelPluginFlowReactPropTypes_proptype_Positioner||n(0).any,n(98).babelPluginFlowReactPropTypes_proptype_CellMeasurerCache||n(0).any},function(e,t,n){"use strict";var r=n(434),i=n.n(r),a=n(4),o=n.n(a),s=n(5),l=n.n(s),u=n(441),c=function(){function e(){o()(this,e),this._columnSizeMap={},this._intervalTree=Object(u.a)(),this._leftMap={}}return l()(e,[{key:"estimateTotalHeight",value:function(e,t,n){var r=e-this.count;return this.tallestColumnSize+Math.ceil(r/t)*n}},{key:"range",value:function(e,t,n){var r=this;this._intervalTree.queryInterval(e,e+t,function(e){var t=i()(e,3),a=t[0],o=(t[1],t[2]);return n(o,r._leftMap[o],a)})}},{key:"setPosition",value:function(e,t,n,r){this._intervalTree.insert([n,n+r,e]),this._leftMap[e]=t;var i=this._columnSizeMap,a=i[t];i[t]=void 0===a?n+r:Math.max(a,n+r)}},{key:"count",get:function(){return this._intervalTree.count}},{key:"shortestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var r=e[n];t=0===t?r:Math.min(t,r)}return t}},{key:"tallestColumnSize",get:function(){var e=this._columnSizeMap,t=0;for(var n in e){var r=e[n];t=Math.max(t,r)}return t}}]),e}();t.a=c},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var i=n(435),a=r(i),o=n(438),s=r(o);t.default=function(){function e(e,t){var n=[],r=!0,i=!1,a=void 0;try{for(var o,l=(0,s.default)(e);!(r=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);r=!0);}catch(e){i=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(i)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,a.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},function(e,t,n){e.exports={default:n(436),__esModule:!0}},function(e,t,n){n(58),n(43),e.exports=n(437)},function(e,t,n){var r=n(86),i=n(18)("iterator"),a=n(37);e.exports=n(14).isIterable=function(e){var t=Object(e);return void 0!==t[i]||"@@iterator"in t||a.hasOwnProperty(r(t))}},function(e,t,n){e.exports={default:n(439),__esModule:!0}},function(e,t,n){n(58),n(43),e.exports=n(440)},function(e,t,n){var r=n(27),i=n(85);e.exports=n(14).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},function(e,t,n){"use strict";function r(e,t,n,r,i){this.mid=e,this.left=t,this.right=n,this.leftPoints=r,this.rightPoints=i,this.count=(t?t.count:0)+(n?n.count:0)+r.length}function i(e,t){e.mid=t.mid,e.left=t.left,e.right=t.right,e.leftPoints=t.leftPoints,e.rightPoints=t.rightPoints,e.count=t.count}function a(e,t){var n=p(t);e.mid=n.mid,e.left=n.left,e.right=n.right,e.leftPoints=n.leftPoints,e.rightPoints=n.rightPoints,e.count=n.count}function o(e,t){var n=e.intervals([]);n.push(t),a(e,n)}function s(e,t){var n=e.intervals([]),r=n.indexOf(t);return r<0?v:(n.splice(r,1),a(e,n),_)}function l(e,t,n){for(var r=0;r<e.length&&e[r][0]<=t;++r){var i=n(e[r]);if(i)return i}}function u(e,t,n){for(var r=e.length-1;r>=0&&e[r][1]>=t;--r){var i=n(e[r]);if(i)return i}}function c(e,t){for(var n=0;n<e.length;++n){var r=t(e[n]);if(r)return r}}function d(e,t){return e-t}function f(e,t){var n=e[0]-t[0];return n||e[1]-t[1]}function h(e,t){var n=e[1]-t[1];return n||e[0]-t[0]}function p(e){if(0===e.length)return null;for(var t=[],n=0;n<e.length;++n)t.push(e[n][0],e[n][1]);t.sort(d);for(var i=t[t.length>>1],a=[],o=[],s=[],n=0;n<e.length;++n){var l=e[n];l[1]<i?a.push(l):i<l[0]?o.push(l):s.push(l)}var u=s,c=s.slice();return u.sort(f),c.sort(h),new r(i,p(a),p(o),u,c)}function m(e){this.root=e}function g(e){return new m(e&&0!==e.length?p(e):null)}t.a=g;var y=n(442),v=0,_=1,b=r.prototype;b.intervals=function(e){return e.push.apply(e,this.leftPoints),this.left&&this.left.intervals(e),this.right&&this.right.intervals(e),e},b.insert=function(e){var t=this.count-this.leftPoints.length;if(this.count+=1,e[1]<this.mid)this.left?4*(this.left.count+1)>3*(t+1)?o(this,e):this.left.insert(e):this.left=p([e]);else if(e[0]>this.mid)this.right?4*(this.right.count+1)>3*(t+1)?o(this,e):this.right.insert(e):this.right=p([e]);else{var n=y.a.ge(this.leftPoints,e,f),r=y.a.ge(this.rightPoints,e,h);this.leftPoints.splice(n,0,e),this.rightPoints.splice(r,0,e)}},b.remove=function(e){var t=this.count-this.leftPoints;if(e[1]<this.mid){if(!this.left)return v;if(4*(this.right?this.right.count:0)>3*(t-1))return s(this,e);var n=this.left.remove(e);return 2===n?(this.left=null,this.count-=1,_):(n===_&&(this.count-=1),n)}if(e[0]>this.mid){if(!this.right)return v;if(4*(this.left?this.left.count:0)>3*(t-1))return s(this,e);var n=this.right.remove(e);return 2===n?(this.right=null,this.count-=1,_):(n===_&&(this.count-=1),n)}if(1===this.count)return this.leftPoints[0]===e?2:v;if(1===this.leftPoints.length&&this.leftPoints[0]===e){if(this.left&&this.right){for(var r=this,a=this.left;a.right;)r=a,a=a.right;if(r===this)a.right=this.right;else{var o=this.left,n=this.right;r.count-=a.count,r.right=a.left,a.left=o,a.right=n}i(this,a),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?i(this,this.left):i(this,this.right);return _}for(var o=y.a.ge(this.leftPoints,e,f);o<this.leftPoints.length&&this.leftPoints[o][0]===e[0];++o)if(this.leftPoints[o]===e){this.count-=1,this.leftPoints.splice(o,1);for(var n=y.a.ge(this.rightPoints,e,h);n<this.rightPoints.length&&this.rightPoints[n][1]===e[1];++n)if(this.rightPoints[n]===e)return this.rightPoints.splice(n,1),_}return v},b.queryPoint=function(e,t){if(e<this.mid){if(this.left){var n=this.left.queryPoint(e,t);if(n)return n}return l(this.leftPoints,e,t)}if(e>this.mid){if(this.right){var n=this.right.queryPoint(e,t);if(n)return n}return u(this.rightPoints,e,t)}return c(this.leftPoints,t)},b.queryInterval=function(e,t,n){if(e<this.mid&&this.left){var r=this.left.queryInterval(e,t,n);if(r)return r}if(t>this.mid&&this.right){var r=this.right.queryInterval(e,t,n);if(r)return r}return t<this.mid?l(this.leftPoints,t,n):e>this.mid?u(this.rightPoints,e,n):c(this.leftPoints,n)};var x=m.prototype;x.insert=function(e){this.root?this.root.insert(e):this.root=new r(e[0],null,null,[e],[e])},x.remove=function(e){if(this.root){var t=this.root.remove(e);return 2===t&&(this.root=null),t!==v}return!1},x.queryPoint=function(e,t){if(this.root)return this.root.queryPoint(e,t)},x.queryInterval=function(e,t,n){if(e<=t&&this.root)return this.root.queryInterval(e,t,n)},Object.defineProperty(x,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(x,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},function(e,t,n){"use strict";function r(e,t,n,r){for(var i=n+1;t<=n;){var a=t+n>>>1;e[a]>=r?(i=a,n=a-1):t=a+1}return i}function i(e,t,n,r,i){for(var a=n+1;t<=n;){var o=t+n>>>1;i(e[o],r)>=0?(a=o,n=o-1):t=o+1}return a}function a(e,t,n,a,o){return"function"===typeof n?i(e,void 0===a?0:0|a,void 0===o?e.length-1:0|o,t,n):r(e,void 0===n?0:0|n,void 0===a?e.length-1:0|a,t)}function o(e,t,n,r){for(var i=n+1;t<=n;){var a=t+n>>>1;e[a]>r?(i=a,n=a-1):t=a+1}return i}function s(e,t,n,r,i){for(var a=n+1;t<=n;){var o=t+n>>>1;i(e[o],r)>0?(a=o,n=o-1):t=o+1}return a}function l(e,t,n,r,i){return"function"===typeof n?s(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t,n):o(e,void 0===n?0:0|n,void 0===r?e.length-1:0|r,t)}function u(e,t,n,r){for(var i=t-1;t<=n;){var a=t+n>>>1;e[a]<r?(i=a,t=a+1):n=a-1}return i}function c(e,t,n,r,i){for(var a=t-1;t<=n;){var o=t+n>>>1;i(e[o],r)<0?(a=o,t=o+1):n=o-1}return a}function d(e,t,n,r,i){return"function"===typeof n?c(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t,n):u(e,void 0===n?0:0|n,void 0===r?e.length-1:0|r,t)}function f(e,t,n,r){for(var i=t-1;t<=n;){var a=t+n>>>1;e[a]<=r?(i=a,t=a+1):n=a-1}return i}function h(e,t,n,r,i){for(var a=t-1;t<=n;){var o=t+n>>>1;i(e[o],r)<=0?(a=o,t=o+1):n=o-1}return a}function p(e,t,n,r,i){return"function"===typeof n?h(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t,n):f(e,void 0===n?0:0|n,void 0===r?e.length-1:0|r,t)}function m(e,t,n,r){for(;t<=n;){var i=t+n>>>1,a=e[i];if(a===r)return i;a<=r?t=i+1:n=i-1}return-1}function g(e,t,n,r,i){for(;t<=n;){var a=t+n>>>1,o=e[a],s=i(o,r);if(0===s)return a;s<=0?t=a+1:n=a-1}return-1}function y(e,t,n,r,i){return"function"===typeof n?g(e,void 0===r?0:0|r,void 0===i?e.length-1:0|i,t,n):m(e,void 0===n?0:0|n,void 0===r?e.length-1:0|r,t)}t.a={ge:a,gt:l,lt:d,le:p,eq:y}},function(e,t,n){"use strict";var r=n(444);r.a},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(3),o=n.n(a),s=n(7),l=n.n(s),u=n(4),c=n.n(u),d=n(5),f=n.n(d),h=n(8),p=n.n(h),m=n(9),g=n.n(m),y=n(0),v=(n.n(y),n(1)),_=n.n(v),b=n(445),x=n(16),w=function(e){function t(e,n){c()(this,t);var r=p()(this,(t.__proto__||l()(t)).call(this,e,n));return r.state={scrollLeft:0,scrollTop:0,scrollbarSize:0,showHorizontalScrollbar:!1,showVerticalScrollbar:!1},r._deferredInvalidateColumnIndex=null,r._deferredInvalidateRowIndex=null,r._bottomLeftGridRef=r._bottomLeftGridRef.bind(r),r._bottomRightGridRef=r._bottomRightGridRef.bind(r),r._cellRendererBottomLeftGrid=r._cellRendererBottomLeftGrid.bind(r),r._cellRendererBottomRightGrid=r._cellRendererBottomRightGrid.bind(r),r._cellRendererTopRightGrid=r._cellRendererTopRightGrid.bind(r),r._columnWidthRightGrid=r._columnWidthRightGrid.bind(r),r._onScroll=r._onScroll.bind(r),r._onScrollbarPresenceChange=r._onScrollbarPresenceChange.bind(r),r._onScrollLeft=r._onScrollLeft.bind(r),r._onScrollTop=r._onScrollTop.bind(r),r._rowHeightBottomGrid=r._rowHeightBottomGrid.bind(r),r._topLeftGridRef=r._topLeftGridRef.bind(r),r._topRightGridRef=r._topRightGridRef.bind(r),r}return g()(t,e),f()(t,[{key:"forceUpdateGrids",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.forceUpdate(),this._bottomRightGrid&&this._bottomRightGrid.forceUpdate(),this._topLeftGrid&&this._topLeftGrid.forceUpdate(),this._topRightGrid&&this._topRightGrid.forceUpdate()}},{key:"invalidateCellSizeAfterRender",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,i=void 0===r?0:r;this._deferredInvalidateColumnIndex="number"===typeof this._deferredInvalidateColumnIndex?Math.min(this._deferredInvalidateColumnIndex,n):n,this._deferredInvalidateRowIndex="number"===typeof this._deferredInvalidateRowIndex?Math.min(this._deferredInvalidateRowIndex,i):i}},{key:"measureAllCells",value:function(){this._bottomLeftGrid&&this._bottomLeftGrid.measureAllCells(),this._bottomRightGrid&&this._bottomRightGrid.measureAllCells(),this._topLeftGrid&&this._topLeftGrid.measureAllCells(),this._topRightGrid&&this._topRightGrid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,i=void 0===r?0:r,a=this.props,o=a.fixedColumnCount,s=a.fixedRowCount,l=Math.max(0,n-o),u=Math.max(0,i-s);this._bottomLeftGrid&&this._bottomLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:u}),this._bottomRightGrid&&this._bottomRightGrid.recomputeGridSize({columnIndex:l,rowIndex:u}),this._topLeftGrid&&this._topLeftGrid.recomputeGridSize({columnIndex:n,rowIndex:i}),this._topRightGrid&&this._topRightGrid.recomputeGridSize({columnIndex:l,rowIndex:i}),this._leftGridWidth=null,this._topGridHeight=null,this._maybeCalculateCachedStyles(null,this.props,null,this.state)}},{key:"componentDidMount",value:function(){var e=this.props,t=e.scrollLeft,n=e.scrollTop;if(t>0||n>0){var r={};t>0&&(r.scrollLeft=t),n>0&&(r.scrollTop=n),this.setState(r)}this._handleInvalidatedGridSize()}},{key:"componentDidUpdate",value:function(){this._handleInvalidatedGridSize()}},{key:"componentWillMount",value:function(){var e=this.props,t=e.deferredMeasurementCache,n=e.fixedColumnCount,r=e.fixedRowCount;this._maybeCalculateCachedStyles(null,this.props,null,this.state),t&&(this._deferredMeasurementCacheBottomLeftGrid=r>0?new b.a({cellMeasurerCache:t,columnIndexOffset:0,rowIndexOffset:r}):t,this._deferredMeasurementCacheBottomRightGrid=n>0||r>0?new b.a({cellMeasurerCache:t,columnIndexOffset:n,rowIndexOffset:r}):t,this._deferredMeasurementCacheTopRightGrid=n>0?new b.a({cellMeasurerCache:t,columnIndexOffset:n,rowIndexOffset:0}):t)}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.props,r=n.columnWidth,i=n.fixedColumnCount,a=n.fixedRowCount,o=n.rowHeight;if(r===e.columnWidth&&i===e.fixedColumnCount||(this._leftGridWidth=null),a===e.fixedRowCount&&o===e.rowHeight||(this._topGridHeight=null),e.scrollLeft!==this.props.scrollLeft||e.scrollTop!==this.props.scrollTop){var s={};null!=e.scrollLeft&&e.scrollLeft>=0&&(s.scrollLeft=e.scrollLeft),null!=e.scrollTop&&e.scrollTop>=0&&(s.scrollTop=e.scrollTop),this.setState(s)}this._maybeCalculateCachedStyles(this.props,e,this.state,t)}},{key:"render",value:function(){var e=this.props,t=e.onScroll,n=e.onSectionRendered,r=(e.onScrollbarPresenceChange,e.scrollLeft,e.scrollToColumn),a=(e.scrollTop,e.scrollToRow),s=o()(e,["onScroll","onSectionRendered","onScrollbarPresenceChange","scrollLeft","scrollToColumn","scrollTop","scrollToRow"]);if(0===this.props.width||0===this.props.height)return null;var l=this.state,u=l.scrollLeft,c=l.scrollTop;return _.a.createElement("div",{style:this._containerOuterStyle},_.a.createElement("div",{style:this._containerTopStyle},this._renderTopLeftGrid(s),this._renderTopRightGrid(i()({},s,{onScroll:t,scrollLeft:u}))),_.a.createElement("div",{style:this._containerBottomStyle},this._renderBottomLeftGrid(i()({},s,{onScroll:t,scrollTop:c})),this._renderBottomRightGrid(i()({},s,{onScroll:t,onSectionRendered:n,scrollLeft:u,scrollToColumn:r,scrollToRow:a,scrollTop:c}))))}},{key:"_bottomLeftGridRef",value:function(e){this._bottomLeftGrid=e}},{key:"_bottomRightGridRef",value:function(e){this._bottomRightGrid=e}},{key:"_cellRendererBottomLeftGrid",value:function(e){var t=e.rowIndex,n=o()(e,["rowIndex"]),r=this.props,a=r.cellRenderer,s=r.fixedRowCount;return t===r.rowCount-s?_.a.createElement("div",{key:n.key,style:i()({},n.style,{height:20})}):a(i()({},n,{parent:this,rowIndex:t+s}))}},{key:"_cellRendererBottomRightGrid",value:function(e){var t=e.columnIndex,n=e.rowIndex,r=o()(e,["columnIndex","rowIndex"]),a=this.props,s=a.cellRenderer,l=a.fixedColumnCount,u=a.fixedRowCount;return s(i()({},r,{columnIndex:t+l,parent:this,rowIndex:n+u}))}},{key:"_cellRendererTopRightGrid",value:function(e){var t=e.columnIndex,n=o()(e,["columnIndex"]),r=this.props,a=r.cellRenderer,s=r.columnCount,l=r.fixedColumnCount;return t===s-l?_.a.createElement("div",{key:n.key,style:i()({},n.style,{width:20})}):a(i()({},n,{columnIndex:t+l,parent:this}))}},{key:"_columnWidthRightGrid",value:function(e){var t=e.index,n=this.props,r=n.columnCount,i=n.fixedColumnCount,a=n.columnWidth,o=this.state,s=o.scrollbarSize;return o.showHorizontalScrollbar&&t===r-i?s:"function"===typeof a?a({index:t+i}):a}},{key:"_getBottomGridHeight",value:function(e){return e.height-this._getTopGridHeight(e)}},{key:"_getLeftGridWidth",value:function(e){var t=e.fixedColumnCount,n=e.columnWidth;if(null==this._leftGridWidth)if("function"===typeof n){for(var r=0,i=0;i<t;i++)r+=n({index:i});this._leftGridWidth=r}else this._leftGridWidth=n*t;return this._leftGridWidth}},{key:"_getRightGridWidth",value:function(e){return e.width-this._getLeftGridWidth(e)}},{key:"_getTopGridHeight",value:function(e){var t=e.fixedRowCount,n=e.rowHeight;if(null==this._topGridHeight)if("function"===typeof n){for(var r=0,i=0;i<t;i++)r+=n({index:i});this._topGridHeight=r}else this._topGridHeight=n*t;return this._topGridHeight}},{key:"_handleInvalidatedGridSize",value:function(){if("number"===typeof this._deferredInvalidateColumnIndex){var e=this._deferredInvalidateColumnIndex,t=this._deferredInvalidateRowIndex;this._deferredInvalidateColumnIndex=null,this._deferredInvalidateRowIndex=null,this.recomputeGridSize({columnIndex:e,rowIndex:t}),this.forceUpdate()}}},{key:"_maybeCalculateCachedStyles",value:function(e,t){var n=t.columnWidth,r=t.enableFixedColumnScroll,a=t.enableFixedRowScroll,o=t.height,s=t.fixedColumnCount,l=t.fixedRowCount,u=t.rowHeight,c=t.style,d=t.styleBottomLeftGrid,f=t.styleBottomRightGrid,h=t.styleTopLeftGrid,p=t.styleTopRightGrid,m=t.width,g=!e,y=g||o!==e.height||m!==e.width,v=g||n!==e.columnWidth||s!==e.fixedColumnCount,_=g||l!==e.fixedRowCount||u!==e.rowHeight;(g||y||c!==e.style)&&(this._containerOuterStyle=i()({height:o,overflow:"visible",width:m},c)),(g||y||_)&&(this._containerTopStyle={height:this._getTopGridHeight(t),position:"relative",width:m},this._containerBottomStyle={height:o-this._getTopGridHeight(t),overflow:"visible",position:"relative",width:m}),(g||d!==e.styleBottomLeftGrid)&&(this._bottomLeftGridStyle=i()({left:0,overflowX:"hidden",overflowY:r?"auto":"hidden",position:"absolute"},d)),(g||v||f!==e.styleBottomRightGrid)&&(this._bottomRightGridStyle=i()({left:this._getLeftGridWidth(t),position:"absolute"},f)),(g||h!==e.styleTopLeftGrid)&&(this._topLeftGridStyle=i()({left:0,overflowX:"hidden",overflowY:"hidden",position:"absolute",top:0},h)),(g||v||p!==e.styleTopRightGrid)&&(this._topRightGridStyle=i()({left:this._getLeftGridWidth(t),overflowX:a?"auto":"hidden",overflowY:"hidden",position:"absolute",top:0},p))}},{key:"_onScroll",value:function(e){var t=e.scrollLeft,n=e.scrollTop;this.setState({scrollLeft:t,scrollTop:n});var r=this.props.onScroll;r&&r(e)}},{key:"_onScrollbarPresenceChange",value:function(e){var t=e.horizontal,n=e.size,r=e.vertical,i=this.state,a=i.showHorizontalScrollbar,o=i.showVerticalScrollbar;if(t!==a||r!==o){this.setState({scrollbarSize:n,showHorizontalScrollbar:t,showVerticalScrollbar:r});var s=this.props.onScrollbarPresenceChange;"function"===typeof s&&s({horizontal:t,size:n,vertical:r})}}},{key:"_onScrollLeft",value:function(e){var t=e.scrollLeft;this._onScroll({scrollLeft:t,scrollTop:this.state.scrollTop})}},{key:"_onScrollTop",value:function(e){var t=e.scrollTop;this._onScroll({scrollTop:t,scrollLeft:this.state.scrollLeft})}},{key:"_renderBottomLeftGrid",value:function(e){var t=e.enableFixedColumnScroll,n=e.fixedColumnCount,r=e.fixedRowCount,a=e.rowCount,o=e.scrollTop,s=this.state.showVerticalScrollbar;if(!n)return null;var l=s?1:0;return _.a.createElement(x.default,i()({},e,{cellRenderer:this._cellRendererBottomLeftGrid,className:this.props.classNameBottomLeftGrid,columnCount:n,deferredMeasurementCache:this._deferredMeasurementCacheBottomLeftGrid,height:this._getBottomGridHeight(e),onScroll:t?this._onScrollTop:void 0,ref:this._bottomLeftGridRef,rowCount:Math.max(0,a-r)+l,rowHeight:this._rowHeightBottomGrid,scrollTop:o,style:this._bottomLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)}))}},{key:"_renderBottomRightGrid",value:function(e){var t=e.columnCount,n=e.fixedColumnCount,r=e.fixedRowCount,a=e.rowCount,o=e.scrollToColumn,s=e.scrollToRow;return _.a.createElement(x.default,i()({},e,{cellRenderer:this._cellRendererBottomRightGrid,className:this.props.classNameBottomRightGrid,columnCount:Math.max(0,t-n),columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheBottomRightGrid,height:this._getBottomGridHeight(e),onScroll:this._onScroll,onScrollbarPresenceChange:this._onScrollbarPresenceChange,ref:this._bottomRightGridRef,rowCount:Math.max(0,a-r),rowHeight:this._rowHeightBottomGrid,scrollToColumn:o-n,scrollToRow:s-r,style:this._bottomRightGridStyle,width:this._getRightGridWidth(e)}))}},{key:"_renderTopLeftGrid",value:function(e){var t=e.fixedColumnCount,n=e.fixedRowCount;return t&&n?_.a.createElement(x.default,i()({},e,{className:this.props.classNameTopLeftGrid,columnCount:t,height:this._getTopGridHeight(e),ref:this._topLeftGridRef,rowCount:n,style:this._topLeftGridStyle,tabIndex:null,width:this._getLeftGridWidth(e)})):null}},{key:"_renderTopRightGrid",value:function(e){var t=e.columnCount,n=e.enableFixedRowScroll,r=e.fixedColumnCount,a=e.fixedRowCount,o=e.scrollLeft,s=this.state.showHorizontalScrollbar;if(!a)return null;var l=s?1:0;return _.a.createElement(x.default,i()({},e,{cellRenderer:this._cellRendererTopRightGrid,className:this.props.classNameTopRightGrid,columnCount:Math.max(0,t-r)+l,columnWidth:this._columnWidthRightGrid,deferredMeasurementCache:this._deferredMeasurementCacheTopRightGrid,height:this._getTopGridHeight(e),onScroll:n?this._onScrollLeft:void 0,ref:this._topRightGridRef,rowCount:a,scrollLeft:o,style:this._topRightGridStyle,tabIndex:null,width:this._getRightGridWidth(e)}))}},{key:"_rowHeightBottomGrid",value:function(e){var t=e.index,n=this.props,r=n.fixedRowCount,i=n.rowCount,a=n.rowHeight,o=this.state,s=o.scrollbarSize;return o.showVerticalScrollbar&&t===i-r?s:"function"===typeof a?a({index:t+r}):a}},{key:"_topLeftGridRef",value:function(e){this._topLeftGrid=e}},{key:"_topRightGridRef",value:function(e){this._topRightGrid=e}}]),t}(v.PureComponent);w.defaultProps={classNameBottomLeftGrid:"",classNameBottomRightGrid:"",classNameTopLeftGrid:"",classNameTopRightGrid:"",enableFixedColumnScroll:!1,enableFixedRowScroll:!1,fixedColumnCount:0,fixedRowCount:0,scrollToColumn:-1,scrollToRow:-1,style:{},styleBottomLeftGrid:{},styleBottomRightGrid:{},styleTopLeftGrid:{},styleTopRightGrid:{}},t.a=w,w.propTypes={}},function(e,t,n){"use strict";var r=n(4),i=n.n(r),a=n(5),o=n.n(a),s=(n(153),function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i()(this,e),this.columnWidth=function(e){var n=e.index;t._cellMeasurerCache.columnWidth({index:n+t._columnIndexOffset})},this.rowHeight=function(e){var n=e.index;t._cellMeasurerCache.rowHeight({index:n+t._rowIndexOffset})};var r=n.cellMeasurerCache,a=n.columnIndexOffset,o=void 0===a?0:a,s=n.rowIndexOffset,l=void 0===s?0:s;this._cellMeasurerCache=r,this._columnIndexOffset=o,this._rowIndexOffset=l}return o()(e,[{key:"clear",value:function(e,t){this._cellMeasurerCache.clear(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"clearAll",value:function(){this._cellMeasurerCache.clearAll()}},{key:"hasFixedHeight",value:function(){return this._cellMeasurerCache.hasFixedHeight()}},{key:"hasFixedWidth",value:function(){return this._cellMeasurerCache.hasFixedWidth()}},{key:"getHeight",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getHeight(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"getWidth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.getWidth(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"has",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._cellMeasurerCache.has(e+this._rowIndexOffset,t+this._columnIndexOffset)}},{key:"set",value:function(e,t,n,r){this._cellMeasurerCache.set(e+this._rowIndexOffset,t+this._columnIndexOffset,n,r)}},{key:"defaultHeight",get:function(){return this._cellMeasurerCache.defaultHeight}},{key:"defaultWidth",get:function(){return this._cellMeasurerCache.defaultWidth}}]),e}());t.a=s},function(e,t,n){"use strict";var r=n(447);n.d(t,"a",function(){return r.a});r.a},function(e,t,n){"use strict";var r=n(7),i=n.n(r),a=n(4),o=n.n(a),s=n(5),l=n.n(s),u=n(8),c=n.n(u),d=n(9),f=n.n(d),h=n(0),p=(n.n(h),n(1)),m=(n.n(p),function(e){function t(e,n){o()(this,t);var r=c()(this,(t.__proto__||i()(t)).call(this,e,n));return r.state={clientHeight:0,clientWidth:0,scrollHeight:0,scrollLeft:0,scrollTop:0,scrollWidth:0},r._onScroll=r._onScroll.bind(r),r}return f()(t,e),l()(t,[{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.clientHeight,r=t.clientWidth,i=t.scrollHeight,a=t.scrollLeft,o=t.scrollTop,s=t.scrollWidth;return e({clientHeight:n,clientWidth:r,onScroll:this._onScroll,scrollHeight:i,scrollLeft:a,scrollTop:o,scrollWidth:s})}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.clientWidth,r=e.scrollHeight,i=e.scrollLeft,a=e.scrollTop,o=e.scrollWidth;this.setState({clientHeight:t,clientWidth:n,scrollHeight:r,scrollLeft:i,scrollTop:a,scrollWidth:o})}}]),t}(p.PureComponent));t.a=m,m.propTypes={}},function(e,t,n){"use strict";var r=(n(449),n(156),n(157),n(158),n(159),n(161),n(162),n(66),n(160),n(450));r.a},function(e,t,n){"use strict"},function(e,t,n){"use strict";var r=n(2),i=n.n(r),a=n(7),o=n.n(a),s=n(4),l=n.n(s),u=n(5),c=n.n(u),d=n(8),f=n.n(d),h=n(9),p=n.n(h),m=n(6),g=n.n(m),y=(n(162),n(0)),v=(n.n(y),n(1)),_=n.n(v),b=n(29),x=(n.n(b),n(16)),w=n(161),k=n(158),T=n(66),M=(n(16).babelPluginFlowReactPropTypes_proptype_CellPosition||n(0).any,function(e){function t(e){l()(this,t);var n=f()(this,(t.__proto__||o()(t)).call(this,e));return n.state={scrollbarWidth:0},n._createColumn=n._createColumn.bind(n),n._createRow=n._createRow.bind(n),n._onScroll=n._onScroll.bind(n),n._onSectionRendered=n._onSectionRendered.bind(n),n._setRef=n._setRef.bind(n),n}return p()(t,e),c()(t,[{key:"forceUpdateGrid",value:function(){this.Grid&&this.Grid.forceUpdate()}},{key:"getOffsetForRow",value:function(e){var t=e.alignment,n=e.index;if(this.Grid){return this.Grid.getOffsetForCell({alignment:t,rowIndex:n}).scrollTop}return 0}},{key:"invalidateCellSizeAfterRender",value:function(e){var t=e.columnIndex,n=e.rowIndex;this.Grid&&this.Grid.invalidateCellSizeAfterRender({rowIndex:n,columnIndex:t})}},{key:"measureAllRows",value:function(){this.Grid&&this.Grid.measureAllCells()}},{key:"recomputeGridSize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.columnIndex,n=void 0===t?0:t,r=e.rowIndex,i=void 0===r?0:r;this.Grid&&this.Grid.recomputeGridSize({rowIndex:i,columnIndex:n})}},{key:"recomputeRowHeights",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.recomputeGridSize({rowIndex:e})}},{key:"scrollToPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToPosition({scrollTop:e})}},{key:"scrollToRow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.Grid&&this.Grid.scrollToCell({columnIndex:0,rowIndex:e})}},{key:"componentDidMount",value:function(){this._setScrollbarWidth()}},{key:"componentDidUpdate",value:function(){this._setScrollbarWidth()}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.className,a=t.disableHeader,o=t.gridClassName,s=t.gridStyle,l=t.headerHeight,u=t.headerRowRenderer,c=t.height,d=t.id,f=t.noRowsRenderer,h=t.rowClassName,p=t.rowStyle,m=t.scrollToIndex,y=t.style,v=t.width,b=this.state.scrollbarWidth,w=a?c:c-l,k="function"===typeof h?h({index:-1}):h,T="function"===typeof p?p({index:-1}):p;return this._cachedColumnStyles=[],_.a.Children.toArray(n).forEach(function(t,n){var r=e._getFlexStyleForColumn(t,t.props.style);e._cachedColumnStyles[n]=i()({},r,{overflow:"hidden"})}),_.a.createElement("div",{className:g()("ReactVirtualized__Table",r),id:d,role:"grid",style:y},!a&&u({className:g()("ReactVirtualized__Table__headerRow",k),columns:this._getHeaderColumns(),style:i()({},T,{height:l,overflow:"hidden",paddingRight:b,width:v})}),_.a.createElement(x.default,i()({},this.props,{autoContainerWidth:!0,className:g()("ReactVirtualized__Table__Grid",o),cellRenderer:this._createRow,columnWidth:v,columnCount:1,height:w,id:void 0,noContentRenderer:f,onScroll:this._onScroll,onSectionRendered:this._onSectionRendered,ref:this._setRef,role:"rowgroup",scrollbarWidth:b,scrollToRow:m,style:i()({},s,{overflowX:"hidden"})})))}},{key:"_createColumn",value:function(e){var t=e.column,n=e.columnIndex,r=e.isScrolling,i=e.parent,a=e.rowData,o=e.rowIndex,s=t.props,l=s.cellDataGetter,u=s.cellRenderer,c=s.className,d=s.columnData,f=s.dataKey,h=s.id,p=l({columnData:d,dataKey:f,rowData:a}),m=u({cellData:p,columnData:d,columnIndex:n,dataKey:f,isScrolling:r,parent:i,rowData:a,rowIndex:o}),y=this._cachedColumnStyles[n],v="string"===typeof m?m:null;return _.a.createElement("div",{"aria-describedby":h,className:g()("ReactVirtualized__Table__rowColumn",c),key:"Row"+o+"-Col"+n,role:"gridcell",style:y,title:v},m)}},{key:"_createHeader",value:function(e){var t=e.column,n=e.index,r=this.props,a=r.headerClassName,o=r.headerStyle,s=r.onHeaderClick,l=r.sort,u=r.sortBy,c=r.sortDirection,d=t.props,f=d.columnData,h=d.dataKey,p=d.defaultSortDirection,m=d.disableSort,y=d.headerRenderer,v=d.id,b=d.label,x=!m&&l,w=g()("ReactVirtualized__Table__headerColumn",a,t.props.headerClassName,{ReactVirtualized__Table__sortableHeaderColumn:x}),k=this._getFlexStyleForColumn(t,i()({},o,t.props.headerStyle)),M=y({columnData:f,dataKey:h,disableSort:m,label:b,sortBy:u,sortDirection:c}),A=void 0,C=void 0,S=void 0,E=void 0,P=void 0;if(x||s){var I=u!==h,L=I?p:c===T.a.DESC?T.a.ASC:T.a.DESC,O=function(e){x&&l({defaultSortDirection:p,event:e,sortBy:h,sortDirection:L}),s&&s({columnData:f,dataKey:h,event:e})},z=function(e){"Enter"!==e.key&&" "!==e.key||O(e)};P=t.props["aria-label"]||b||h,S=0,A=O,C=z}return u===h&&(E=c===T.a.ASC?"ascending":"descending"),_.a.createElement("div",{"aria-label":P,"aria-sort":E,className:w,id:v,key:"Header-Col"+n,onClick:A,onKeyDown:C,role:"columnheader",style:k,tabIndex:S},M)}},{key:"_createRow",value:function(e){var t=this,n=e.rowIndex,r=e.isScrolling,a=e.key,o=e.parent,s=e.style,l=this.props,u=l.children,c=l.onRowClick,d=l.onRowDoubleClick,f=l.onRowRightClick,h=l.onRowMouseOver,p=l.onRowMouseOut,m=l.rowClassName,y=l.rowGetter,v=l.rowRenderer,b=l.rowStyle,x=this.state.scrollbarWidth,w="function"===typeof m?m({index:n}):m,k="function"===typeof b?b({index:n}):b,T=y({index:n}),M=_.a.Children.toArray(u).map(function(e,i){return t._createColumn({column:e,columnIndex:i,isScrolling:r,parent:o,rowData:T,rowIndex:n,scrollbarWidth:x})}),A=g()("ReactVirtualized__Table__row",w),C=i()({},s,k,{height:this._getRowHeight(n),overflow:"hidden",paddingRight:x});return v({className:A,columns:M,index:n,isScrolling:r,key:a,onRowClick:c,onRowDoubleClick:d,onRowRightClick:f,onRowMouseOver:h,onRowMouseOut:p,rowData:T,style:C})}},{key:"_getFlexStyleForColumn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.props.flexGrow+" "+e.props.flexShrink+" "+e.props.width+"px",r=i()({},t,{flex:n,msFlex:n,WebkitFlex:n});return e.props.maxWidth&&(r.maxWidth=e.props.maxWidth),e.props.minWidth&&(r.minWidth=e.props.minWidth),r}},{key:"_getHeaderColumns",value:function(){var e=this,t=this.props,n=t.children;return(t.disableHeader?[]:_.a.Children.toArray(n)).map(function(t,n){return e._createHeader({column:t,index:n})})}},{key:"_getRowHeight",value:function(e){var t=this.props.rowHeight;return"function"===typeof t?t({index:e}):t}},{key:"_onScroll",value:function(e){var t=e.clientHeight,n=e.scrollHeight,r=e.scrollTop;(0,this.props.onScroll)({clientHeight:t,scrollHeight:n,scrollTop:r})}},{key:"_onSectionRendered",value:function(e){var t=e.rowOverscanStartIndex,n=e.rowOverscanStopIndex,r=e.rowStartIndex,i=e.rowStopIndex;(0,this.props.onRowsRendered)({overscanStartIndex:t,overscanStopIndex:n,startIndex:r,stopIndex:i})}},{key:"_setRef",value:function(e){this.Grid=e}},{key:"_setScrollbarWidth",value:function(){if(this.Grid){var e=Object(b.findDOMNode)(this.Grid),t=e.clientWidth||0,n=e.offsetWidth||0,r=n-t;this.setState({scrollbarWidth:r})}}}]),t}(v.PureComponent));M.defaultProps={disableHeader:!1,estimatedRowSize:30,headerHeight:0,headerStyle:{},noRowsRenderer:function(){return null},onRowsRendered:function(){return null},onScroll:function(){return null},overscanIndicesGetter:x.accessibilityOverscanIndicesGetter,overscanRowCount:10,rowRenderer:w.a,headerRowRenderer:k.a,rowStyle:{},scrollToAlignment:"auto",scrollToIndex:-1,style:{}},t.a=M,M.propTypes={}},function(e,t,n){"use strict";var r=n(163);r.a},function(e,t,n){"use strict";function r(){f&&(f=null,document.body&&null!=d&&(document.body.style.pointerEvents=d),d=null)}function i(){r(),c.forEach(function(e){return e.__resetIsScrolling()})}function a(){f&&Object(u.cancelAnimationTimeout)(f);var e=0;c.forEach(function(t){e=Math.max(e,t.props.scrollingResetTimeInterval)}),f=Object(u.requestAnimationTimeout)(i,e)}function o(e){e.currentTarget===window&&null==d&&document.body&&(d=document.body.style.pointerEvents,document.body.style.pointerEvents="none"),a(),c.forEach(function(t){t.props.scrollElement===e.currentTarget&&t.__handleWindowScrollEvent()})}function s(e,t){c.some(function(e){return e.props.scrollElement===t})||t.addEventListener("scroll",o),c.push(e)}function l(e,t){c=c.filter(function(t){return t!==e}),c.length||(t.removeEventListener("scroll",o),f&&(Object(u.cancelAnimationTimeout)(f),r()))}t.a=s,t.b=l;var u=n(49),c=(n(163),[]),d=null,f=null},function(e,t,n){"use strict";function r(e,t){if(e){if(o(e)){var n=window,r=n.innerHeight,i=n.innerWidth;return{height:"number"===typeof r?r:0,width:"number"===typeof i?i:0}}return s(e)}return{height:t.serverHeight,width:t.serverWidth}}function i(e,t){if(o(t)&&document.documentElement){var n=document.documentElement,r=s(e),i=s(n);return{top:r.top-i.top,left:r.left-i.left}}var l=a(t),u=s(e),c=s(t);return{top:u.top+l.top-c.top,left:u.left+l.left-c.left}}function a(e){return o(e)&&document.documentElement?{top:"scrollY"in window?window.scrollY:document.documentElement.scrollTop,left:"scrollX"in window?window.scrollX:document.documentElement.scrollLeft}:{top:e.scrollTop,left:e.scrollLeft}}t.a=r,t.b=i,t.c=a;var o=function(e){return e===window},s=function(e){return e.getBoundingClientRect()}},function(e,t){},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function a(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=n(1),s=n.n(o),l=n(0),u=(n.n(l),function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}()),c=function(e){function t(){return r(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return a(t,e),u(t,[{key:"render",value:function(){return s.a.createElement("div",null," Contribute ")}}]),t}(o.Component);c.propTypes={},t.a=c},function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){console.log("formatting data");var t={count:e.length,abstracts:"",years:[],tasks:[],domains:[],sources:[],architectures:[],anatomy:[],types:[],countries:[],journals:[],conferences:[],jourConf:{},publicPrivate:[],impactFactors:[],domains_tasks:{x:[],y:[]},domains_architectures:{x:[],y:[]},methods_dataTypes:{x:[],y:[]},dataSharing:[],codeSharing:[],codeBasis:[],codeBasisLinks:[],transferLearning:[],crossValidation:[],countries_codeSharing:{x:[],y:[]},countries_dataSharing:{x:[],y:[]},impactFactors_codeSharing:{x:[],y:[]},impactFactors_dataSharing:{x:[],y:[]},domains_transferLearning:{x:[],y:[]},domains_crossValidation:{x:[],y:[]}};return e.map(function(e,n){t.years.push(parseInt(e.year)),Object(a.d)(t.tasks,[e.task_1,e.task_2]),t.domains.push(e.domain),t.abstracts+=" "+e.abstract,t.sources.push(e.source),Object(a.d)(t.architectures,[e.method_1,e.method_2,e.method_3]),Object(a.d)(t.anatomy,[e.location]),Object(a.d)(t.types,[e.data_type]),Object(a.d)(t.countries,[e.country_1,e.country_2,e.country_3]),Object(a.d)(t.journals,[e.journal]),Object(a.d)(t.conferences,[e.conference]),t.publicPrivate.push(0==e.public?"paywall":"open-access"),Object(a.d)(t.impactFactors,[e.impact_factor]),Object(a.a)(t.domains_tasks,[e.domain],[e.task_1,e.task_2]),Object(a.a)(t.domains_architectures,[e.domain],[e.method_1,e.method_2,e.method_3]),Object(a.a)(t.methods_dataTypes,[e.method_1,e.method_2,e.method_3],[e.data_type]);var i=Object(a.b)([e.data_public,e.data_upon_request,e.data_shared]);t.dataSharing=[].concat(r(t.dataSharing),r(i)),t.codeSharing.push(1==e.code_public?"code made public":"code unavailable"),t.codeBasis.push(0==e.based_on_1_name?"no code basis":e.based_on_1_name),0!=e.based_on_1&&t.codeBasisLinks.push({link:e.based_on_1,name:e.based_on_1_name});var o=0==e.transfer_learning?"end-to-end training":"transfer learning";t.transferLearning.push(o);var s=0==e.cross_validation?"multiple datasets used":"cross validation used";t.crossValidation.push(s),Object(a.a)(t.countries_codeSharing,[e.country_1,e.country_2,e.country_3],[1==e.code_public?"code made public":"code unavailable"]),Object(a.a)(t.countries_dataSharing,[e.country_1,e.country_2,e.country_3],i),Object(a.a)(t.impactFactors_codeSharing,[e.impact_factor],[1==e.code_public?"code made public":"code unavailable"]),Object(a.a)(t.impactFactors_dataSharing,[e.impact_factor],i),Object(a.a)(t.domains_transferLearning,[e.domain],[o]),Object(a.a)(t.domains_crossValidation,[e.domain],[s])}),t.abstracts=Object(a.c)(t.abstracts),t.jourConf={journals:t.journals.length,conferences:t.conferences.length,preprint:t.count-(t.journals.length+t.conferences.length)},t.codeBasisLinks=s.a.uniqBy(t.codeBasisLinks,"name"),t}t.a=i;var a=n(457),o=n(48),s=n.n(o)},function(e,t,n){"use strict";function r(e){return e=e.toLowerCase(),e=e.replace(/[^A-Za-z0-9_]/g," "),e=e.replace(/[0-9]/g,""),e=e.split(" "),e=u.a.countBy(e),[]}function i(e,t){t.map(function(t,n){"0"!==t.toString()&&e.push(t)})}function a(e,t,n){t.map(function(t,r){n.map(function(n,r){"0"!==t.toString()&"0"!==n.toString()&&(e.x.push(t),e.y.push(n))})})}function o(e){var t=[];return 0===u.a.max(e)&&t.push("data unavailable"),s(t,e[0],"used public data"),s(t,e[1],"data made available upon request"),s(t,e[2],"data made public"),t}function s(e,t,n){"1"===t.toString()&&e.push(n)}t.c=r,t.d=i,t.a=a,t.b=o;var l=n(48),u=n.n(l)},function(e,t,n){"use strict";function r(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="/service-worker.js";o?(a(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):i(e)})}}function i(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}function a(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):i(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}t.a=r;var o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}]);
//# sourceMappingURL=main.5bf306db.js.map